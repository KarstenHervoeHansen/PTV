XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
D:\PROJECT\pt5201\BootLoader\Source\work\flash.src
ADDR   CODE            LINE SOURCELINE
                          2 ; options: -IC:\cxa\include -Ml -Cxag3 -Sd -A1 -O1 -DWritableSector=14
                          3 ;          -DBootProgram=0 -g
                          5 $NOZPAGE
                          6         NAME    FLASH
000000                   20 FLASH_RO        SEGMENT HCODE ROMDATA
000000                   21         RSEG    FLASH_RO
                         25         PUBLIC  __FL_STATUSREADYTxt
000000                   26 __FL_STATUSREADYTxt:
000000 52454144590D0A    27         DB      052H,045H,041H,044H,059H,00DH,00AH,000H
       00                   
                         30         PUBLIC  __FL_STATUSBUSYTxt
000008                   31 __FL_STATUSBUSYTxt:
000008 425553590D0A00    32         DB      042H,055H,053H,059H,00DH,00AH,000H
                         35         PUBLIC  __FL_STATUSERSUSPTxt
00000F                   36 __FL_STATUSERSUSPTxt:
00000F 45524153452053    37         DB      045H,052H,041H,053H,045H,020H,053H,055H,053H,050H,045H,04EH
       555350454E           
00001B 4445440D0A00      38         DB      044H,045H,044H,00DH,00AH,000H
                         41         PUBLIC  __FL_STATUSTIMEOUTTxt
000021                   42 __FL_STATUSTIMEOUTTxt:
000021 54494D452D4F55    43         DB      054H,049H,04DH,045H,02DH,04FH,055H,054H,00DH,00AH,000H
       540D0A00             
                         46         PUBLIC  __FL_STATUSERRORTxt
00002C                   47 __FL_STATUSERRORTxt:
00002C 4552524F520D0A    48         DB      045H,052H,052H,04FH,052H,00DH,00AH,000H
       00                   
                         51         PUBLIC  __FL_ONTxt
000034                   52 __FL_ONTxt:
000034 4F4E0D0A00        53         DB      04FH,04EH,00DH,00AH,000H
                         56         PUBLIC  __FL_OFFTxt
000039                   57 __FL_OFFTxt:
000039 4F46460D0A00      58         DB      04FH,046H,046H,00DH,00AH,000H
                         75         PUBLIC  _memdesc
00003F RESERVED          76         ALIGN   1
00003F
000040                   77 _memdesc:
000040 rrrrrrrrrrrrrr    78         DD      _3
       rr                   
000044 16000E000000      79         DW      00016H,0000EH,00000H
00004A 00000100000000    80         DD      000010000H,000000000H
       00                   
000052 0200              81         DW      00002H
000054 00000100000001    82         DD      000010000H,000010000H
       00                   
00005C 0200              83         DW      00002H
00005E 00000100000002    84         DD      000010000H,000020000H
       00                   
000066 0200              85         DW      00002H
000068 00000100000003    86         DD      000010000H,000030000H
       00                   
000070 0200              87         DW      00002H
000072 00000100000004    88         DD      000010000H,000040000H
       00                   
00007A 0200              89         DW      00002H
00007C 00000100000005    90         DD      000010000H,000050000H
       00                   
000084 0200              91         DW      00002H
000086 00000100000006    92         DD      000010000H,000060000H
       00                   
00008E 0200              93         DW      00002H
000090 00000100000007    94         DD      000010000H,000070000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
000098 0200              95         DW      00002H
00009A 00000100000008    96         DD      000010000H,000080000H
       00                   
0000A2 0200              97         DW      00002H
0000A4 00000100000009    98         DD      000010000H,000090000H
       00                   
0000AC 0200              99         DW      00002H
0000AE 0000010000000A   100         DD      000010000H,0000A0000H
       00                   
0000B6 0200             101         DW      00002H
0000B8 0000010000000B   102         DD      000010000H,0000B0000H
       00                   
0000C0 0200             103         DW      00002H
0000C2 0000010000000C   104         DD      000010000H,0000C0000H
       00                   
0000CA 0200             105         DW      00002H
0000CC 0000010000000D   106         DD      000010000H,0000D0000H
       00                   
0000D4 0200             107         DW      00002H
0000D6 0040000000000E   108         DD      000004000H,0000E0000H
       00                   
0000DE 0100             109         DW      00001H
0000E0 0080000000400E   110         DD      000008000H,0000E4000H
       00                   
0000E8 0100             111         DW      00001H
0000EA 0020000000C00E   112         DD      000002000H,0000EC000H
       00                   
0000F2 0100             113         DW      00001H
0000F4 0020000000E00E   114         DD      000002000H,0000EE000H
       00                   
0000FC 0100             115         DW      00001H
0000FE 0020000000000F   116         DD      000002000H,0000F0000H
       00                   
000106 0100             117         DW      00001H
000108 0020000000200F   118         DD      000002000H,0000F2000H
       00                   
000110 0100             119         DW      00001H
000112 0080000000400F   120         DD      000008000H,0000F4000H
       00                   
00011A 0100             121         DW      00001H
00011C 0040000000C00F   122         DD      000004000H,0000FC000H
       00                   
000124 0100             123         DW      00001H
000126 00000000000010   124         DD      000000000H,000100000H
       00                   
00012E 0100             125         DW      00001H
000130 rrrrrrrrrrrrrr   126         DD      _4
       rr                   
000134 160000000800     127         DW      00016H,00000H,00008H
00013A 00400000000000   128         DD      000004000H,000000000H
       00                   
000142 0100             129         DW      00001H
000144 00800000004000   130         DD      000008000H,000004000H
       00                   
00014C 0100             131         DW      00001H
00014E 0020000000C000   132         DD      000002000H,00000C000H
       00                   
000156 0100             133         DW      00001H
000158 0020000000E000   134         DD      000002000H,00000E000H
       00                   
000160 0100             135         DW      00001H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
000162 00200000000001   136         DD      000002000H,000010000H
       00                   
00016A 0100             137         DW      00001H
00016C 00200000002001   138         DD      000002000H,000012000H
       00                   
000174 0100             139         DW      00001H
000176 00800000004001   140         DD      000008000H,000014000H
       00                   
00017E 0100             141         DW      00001H
000180 0040000000C001   142         DD      000004000H,00001C000H
       00                   
000188 0100             143         DW      00001H
00018A 00000100000002   144         DD      000010000H,000020000H
       00                   
000192 0200             145         DW      00002H
000194 00000100000003   146         DD      000010000H,000030000H
       00                   
00019C 0200             147         DW      00002H
00019E 00000100000004   148         DD      000010000H,000040000H
       00                   
0001A6 0200             149         DW      00002H
0001A8 00000100000005   150         DD      000010000H,000050000H
       00                   
0001B0 0200             151         DW      00002H
0001B2 00000100000006   152         DD      000010000H,000060000H
       00                   
0001BA 0200             153         DW      00002H
0001BC 00000100000007   154         DD      000010000H,000070000H
       00                   
0001C4 0200             155         DW      00002H
0001C6 00000100000008   156         DD      000010000H,000080000H
       00                   
0001CE 0200             157         DW      00002H
0001D0 00000100000009   158         DD      000010000H,000090000H
       00                   
0001D8 0200             159         DW      00002H
0001DA 0000010000000A   160         DD      000010000H,0000A0000H
       00                   
0001E2 0200             161         DW      00002H
0001E4 0000010000000B   162         DD      000010000H,0000B0000H
       00                   
0001EC 0200             163         DW      00002H
0001EE 0000010000000C   164         DD      000010000H,0000C0000H
       00                   
0001F6 0200             165         DW      00002H
0001F8 0000010000000D   166         DD      000010000H,0000D0000H
       00                   
000200 0200             167         DW      00002H
000202 0000010000000E   168         DD      000010000H,0000E0000H
       00                   
00020A 0200             169         DW      00002H
00020C 0000010000000F   170         DD      000010000H,0000F0000H
       00                   
000214 0200             171         DW      00002H
000216 00000000000010   172         DD      000000000H,000100000H
       00                   
00021E 0200             173         DW      00002H
000220 rrrrrrrrrrrrrr   174         DD      _5
       rr                   
000224 0B0000000000     175         DW      0000BH,00000H,00000H
00022A 00000100000000   176         DD      000010000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
000232 0100             177         DW      00001H
000234 00000100000001   178         DD      000010000H,000010000H
       00                   
00023C 0100             179         DW      00001H
00023E 00000100000002   180         DD      000010000H,000020000H
       00                   
000246 0100             181         DW      00001H
000248 00000100000003   182         DD      000010000H,000030000H
       00                   
000250 0100             183         DW      00001H
000252 00000100000004   184         DD      000010000H,000040000H
       00                   
00025A 0100             185         DW      00001H
00025C 00000100000005   186         DD      000010000H,000050000H
       00                   
000264 0100             187         DW      00001H
000266 00000100000006   188         DD      000010000H,000060000H
       00                   
00026E 0100             189         DW      00001H
000270 00800000000007   190         DD      000008000H,000070000H
       00                   
000278 0100             191         DW      00001H
00027A 00200000008007   192         DD      000002000H,000078000H
       00                   
000282 0100             193         DW      00001H
000284 0020000000A007   194         DD      000002000H,00007A000H
       00                   
00028C 0100             195         DW      00001H
00028E 0040000000C007   196         DD      000004000H,00007C000H
       00                   
000296 0100             197         DW      00001H
000298 00000000000008   198         DD      000000000H,000080000H
       00                   
0002A0 0100             199         DW      00001H
0002A2 00000000000000   200         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002AE 00000000000000   201         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002BA 00000000000000   202         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002C6 00000000000000   203         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002D2 00000000000000   204         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002DE 00000000000000   205         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002EA 00000000000000   206         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002F6 00000000000000   207         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
000302 00000000000000   208         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
00030E 0000             209         DB      000H,000H
000310 rrrrrrrrrrrrrr   210         DD      _6
       rr                   
000314 0B0000000000     211         DW      0000BH,00000H,00000H
00031A 00400000000000   212         DD      000004000H,000000000H
       00                   
000322 0100             213         DW      00001H
000324 00200000004000   214         DD      000002000H,000004000H
       00                   
00032C 0100             215         DW      00001H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   5

ADDR   CODE            LINE SOURCELINE
00032E 00200000006000   216         DD      000002000H,000006000H
       00                   
000336 0100             217         DW      00001H
000338 00800000008000   218         DD      000008000H,000008000H
       00                   
000340 0100             219         DW      00001H
000342 00000100000001   220         DD      000010000H,000010000H
       00                   
00034A 0100             221         DW      00001H
00034C 00000100000002   222         DD      000010000H,000020000H
       00                   
000354 0100             223         DW      00001H
000356 00000100000003   224         DD      000010000H,000030000H
       00                   
00035E 0100             225         DW      00001H
000360 00000100000004   226         DD      000010000H,000040000H
       00                   
000368 0100             227         DW      00001H
00036A 00000100000005   228         DD      000010000H,000050000H
       00                   
000372 0100             229         DW      00001H
000374 00000100000006   230         DD      000010000H,000060000H
       00                   
00037C 0100             231         DW      00001H
00037E 00000100000007   232         DD      000010000H,000070000H
       00                   
000386 0100             233         DW      00001H
000388 00000000000008   234         DD      000000000H,000080000H
       00                   
000390 0100             235         DW      00001H
000392 00000000000000   236         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
00039E 00000000000000   237         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003AA 00000000000000   238         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003B6 00000000000000   239         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003C2 00000000000000   240         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003CE 00000000000000   241         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003DA 00000000000000   242         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003E6 00000000000000   243         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003F2 00000000000000   244         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003FE 0000             245         DB      000H,000H
000000                  246 FLASH_PR        SEGMENT HCODE
000000                  247         RSEG    FLASH_PR
                        248         ALIGN   1
                        250         PUBLIC  _flash_init
000000                  251 _flash_init:
000000 E800F0           262         MULU.B  R0L,#0F0H
000003 B910             264         MOVS.W  R1,#00H
000005 9900rrrr         265         ADD.W   R0,#SOF( _memdesc )
000009 9911rrrr         266         ADDC.W  R1,#SEG( _memdesc )
00000D 8E1rrr           267         MOV.W   _meminfo+2,R1
000010 8E0rrr           268         MOV.W   _meminfo,R0
000013 B64042           270         MOV.B   ES,#SEG( 00H )
000016 B900             271         MOV.W   R0,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   6

ADDR   CODE            LINE SOURCELINE
000018 9A0800F0         272         MOV.W   [R0],#0F0H
00001C D680             274         RET
                        276         ALIGN   1
                        278         PUBLIC  _flash_reset
00001E                  279 _flash_reset:
00001E B64042           286         MOV.B   ES,#SEG( 00H )
000021 B900             287         MOV.W   R0,#00H
000023 9A0800F0         288         MOV.W   [R0],#0F0H
000027 D680             290         RET
000029 00               292         ALIGN   1
                        294         PUBLIC  _flash_status
00002A                  295 _flash_status:
00002A 0F10             299         PUSH.W  R4
00002C 916801           310         MOV.B   R3L,#01H
000030                  313 _7:
000030 862C42           315         MOV.B   ES,R1L
000033 8A40             316         MOV.W   R4,[R0]
000035 8924             318         MOV.W   R2,R4
000037 862C42           320         MOV.B   ES,R1L
00003A 7A20             321         XOR.W   R2,[R0]
00003C F203             324         BNE     _8
00003E 910800           326         MOV.B   R0L,#00H
000041 FE1B             328         BR      _16
000041 FE1B00           328         BR      _16
000044                  329 _8:
000044 99240004         337         CMP.W   R2,#04H
000048 F205             338         BNE     _9
00004A 6166             340         OR.B    R3L,R3L
00004C F20F             341         BNE     _12
00004E 910802           343         MOV.B   R0L,#02H
000051 FE13             345         BR      _16
000054                  347 _9:
000054 99250040         354         AND.W   R2,#040H
000058 F309             356         BEQ     _12
00005A 99450020         358         AND.W   R4,#020H
00005E F303             359         BEQ     _10
000060 910803           361         MOV.B   R0L,#03H
000063 FE0A             363         BR      _16
000063 FE0A00           363         BR      _16
000066                  364 _10:
000066 910801           366         MOV.B   R0L,#01H
000069 FE07             367         BR      _16
00006C                  369 _12:
00006C 8146             374         MOV.B   R2L,R3L
00006E A16F             377         ADDS.B  R3L,#0FH
000070 6144             380         OR.B    R2L,R2L
000072 F2DE             381         BNE     _7
000074 910804           383         MOV.B   R0L,#04H
000078                  386 _16:
000078 2F10             387         POP.W   R4
00007A D680             389         RET
                        392         ALIGN   1
                        394         PUBLIC  _flash_get_device_info
00007C                  395 _flash_get_device_info:
00007C 0F30             401         PUSH.W  R4, R5
00007E E8000A           411         MULU.B  R0L,#0AH
000081 8900             413         MOV.W   R0,R0
000083 9819             414         SEXT.W  R1
000085 8E5rrr           415         MOV.W   R5,_meminfo+2
000088 8E4rrr           416         MOV.W   R4,_meminfo
00008B 9940000E         417         ADD.W   R4,#0EH
00008F 99510000         418         ADDC.W  R5,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   7

ADDR   CODE            LINE SOURCELINE
000093 0940             419         ADD.W   R4,R0
000095 1951             420         ADDC.W  R5,R1
000097 86AC43           421         MOV.B   CS,R5L
00009A 8804             422         MOVC.W  R0,[R4+]
00009C 99440000         423         CMP.W   R4,#00H
0000A0 F202             424         BNE     _18
0000A2 A64143           425         ADDS.B  CS,#01H
0000A2 A6414300         425         ADDS.B  CS,#01H
0000A6                  426 _18:
0000A6 8814             427         MOVC.W  R1,[R4+]
0000A8 862C42           430         MOV.B   ES,R1L
0000AB 9A0800F0         431         MOV.W   [R0],#0F0H
0000AF 862C42           433         MOV.B   ES,R1L
0000B2 9D080AAA00AA     434         MOV.W   [R0+2730],#0AAH
0000B8 862C42           436         MOV.B   ES,R1L
0000BB 9D0805540055     437         MOV.W   [R0+1364],#055H
0000C1 862C42           439         MOV.B   ES,R1L
0000C4 9D080AAA0090     440         MOV.W   [R0+2730],#090H
0000CA 862C42           442         MOV.B   ES,R1L
0000CD 8A40             443         MOV.W   R4,[R0]
0000CF 9185FF           444         AND.B   R4L,#0FFH
0000D2 866C42           445         MOV.B   ES,R3L
0000D5 828A             446         MOV.B   [R2],R4L
0000D7 862C42           448         MOV.B   ES,R1L
0000DA 8C2002           449         MOV.W   R2,[R0+2]
0000DD 8C570A           451         MOV.W   R5,[R7+10]
0000E0 8C4708           452         MOV.W   R4,[R7+8]
0000E3 86AC42           453         MOV.B   ES,R5L
0000E6 8A2C             454         MOV.W   [R4],R2
0000E8 862C42           456         MOV.B   ES,R1L
0000EB 9A0800F0         457         MOV.W   [R0],#0F0H
0000EF 2F30             459         POP.W   R4, R5
0000F1 D680             461         RET
0000F3 00               464         ALIGN   1
                        466         PUBLIC  _flash_get_status
0000F4                  467 _flash_get_status:
0000F4 E8000A           474         MULU.B  R0L,#0AH
0000F7 8920             476         MOV.W   R2,R0
0000F9 9839             477         SEXT.W  R3
0000FB 8E1rrr           478         MOV.W   R1,_meminfo+2
0000FE 8E0rrr           479         MOV.W   R0,_meminfo
000101 9900000E         480         ADD.W   R0,#0EH
000105 99110000         481         ADDC.W  R1,#00H
000109 0902             482         ADD.W   R0,R2
00010B 1913             483         ADDC.W  R1,R3
00010D 862C43           484         MOV.B   CS,R1L
000110 8820             485         MOVC.W  R2,[R0+]
000112 99040000         486         CMP.W   R0,#00H
000116 F202             487         BNE     _19
000118 A64143           488         ADDS.B  CS,#01H
000118 A6414300         488         ADDS.B  CS,#01H
00011C                  489 _19:
00011C 8830             490         MOVC.W  R3,[R0+]
00011E 8913             491         MOV.W   R1,R3
000120 8902             492         MOV.W   R0,R2
000122 C5FF83           493         CALL    _flash_status
000125 D680             495         RET
000127 00               497         ALIGN   1
                        499         PUBLIC  _flash_sector_protect_verify
000128                  500 _flash_sector_protect_verify:
000128 E8000A           511         MULU.B  R0L,#0AH
00012B 8920             513         MOV.W   R2,R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   8

ADDR   CODE            LINE SOURCELINE
00012D 9839             514         SEXT.W  R3
00012F 8E1rrr           515         MOV.W   R1,_meminfo+2
000132 8E0rrr           516         MOV.W   R0,_meminfo
000135 9900000E         517         ADD.W   R0,#0EH
000139 99110000         518         ADDC.W  R1,#00H
00013D 0902             519         ADD.W   R0,R2
00013F 1913             520         ADDC.W  R1,R3
000141 862C43           521         MOV.B   CS,R1L
000144 8820             522         MOVC.W  R2,[R0+]
000146 99040000         523         CMP.W   R0,#00H
00014A F202             524         BNE     _20
00014C A64143           525         ADDS.B  CS,#01H
00014C A6414300         525         ADDS.B  CS,#01H
000150                  526 _20:
000150 8830             527         MOVC.W  R3,[R0+]
000152 866C42           530         MOV.B   ES,R3L
000155 9A2800F0         531         MOV.W   [R2],#0F0H
000159 866C42           533         MOV.B   ES,R3L
00015C 9D280AAA00AA     534         MOV.W   [R2+2730],#0AAH
000162 866C42           536         MOV.B   ES,R3L
000165 9D2805540055     537         MOV.W   [R2+1364],#055H
00016B 866C42           539         MOV.B   ES,R3L
00016E 9D280AAA0090     540         MOV.W   [R2+2730],#090H
000174 866C42           542         MOV.B   ES,R3L
000177 8A02             543         MOV.W   R0,[R2]
000179 910501           544         AND.B   R0L,#01H
00017C 866C42           547         MOV.B   ES,R3L
00017F 9A2800F0         548         MOV.W   [R2],#0F0H
000183 D680             550         RET
000185 00               554         ALIGN   1
                        556         PUBLIC  _flash_sector_erase
000186                  557 _flash_sector_erase:
000186 E8000A           566         MULU.B  R0L,#0AH
000189 8900             568         MOV.W   R0,R0
00018B 9819             569         SEXT.W  R1
00018D 8E3rrr           570         MOV.W   R3,_meminfo+2
000190 8E2rrr           571         MOV.W   R2,_meminfo
000193 9920000E         572         ADD.W   R2,#0EH
000197 99310000         573         ADDC.W  R3,#00H
00019B 0920             574         ADD.W   R2,R0
00019D 1931             575         ADDC.W  R3,R1
00019F 866C43           576         MOV.B   CS,R3L
0001A2 8802             577         MOVC.W  R0,[R2+]
0001A4 99240000         578         CMP.W   R2,#00H
0001A8 F202             579         BNE     _21
0001AA A64143           580         ADDS.B  CS,#01H
0001AA A6414300         580         ADDS.B  CS,#01H
0001AE                  581 _21:
0001AE 8812             582         MOVC.W  R1,[R2+]
0001B0 862C42           585         MOV.B   ES,R1L
0001B3 9D080AAA00AA     586         MOV.W   [R0+2730],#0AAH
0001B9 862C42           588         MOV.B   ES,R1L
0001BC 9D0805540055     589         MOV.W   [R0+1364],#055H
0001C2 862C42           591         MOV.B   ES,R1L
0001C5 9D080AAA0080     592         MOV.W   [R0+2730],#080H
0001CB 862C42           594         MOV.B   ES,R1L
0001CE 9D080AAA00AA     595         MOV.W   [R0+2730],#0AAH
0001D4 862C42           597         MOV.B   ES,R1L
0001D7 9D0805540055     598         MOV.W   [R0+1364],#055H
0001DD 862C42           600         MOV.B   ES,R1L
0001E0 9A080030         601         MOV.W   [R0],#030H
0001E4 D680             603         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   9

ADDR   CODE            LINE SOURCELINE
                        606         ALIGN   1
                        608         PUBLIC  _flash_sector_erase_int
0001E6                  609 _flash_sector_erase_int:
0001E6 0F30             613         PUSH.W  R4, R5
0001E8 E8000A           620         MULU.B  R0L,#0AH
0001EB 8920             622         MOV.W   R2,R0
0001ED 9839             623         SEXT.W  R3
0001EF 8E1rrr           624         MOV.W   R1,_meminfo+2
0001F2 8E0rrr           625         MOV.W   R0,_meminfo
0001F5 9900000E         626         ADD.W   R0,#0EH
0001F9 99110000         627         ADDC.W  R1,#00H
0001FD 0902             628         ADD.W   R0,R2
0001FF 1913             629         ADDC.W  R1,R3
000201 862C43           630         MOV.B   CS,R1L
000204 8840             631         MOVC.W  R4,[R0+]
000206 99040000         632         CMP.W   R0,#00H
00020A F202             633         BNE     _23
00020C A64143           634         ADDS.B  CS,#01H
00020C A6414300         634         ADDS.B  CS,#01H
000210                  635 _23:
000210 8850             636         MOVC.W  R5,[R0+]
000212 86AC42           639         MOV.B   ES,R5L
000215 9D480AAA00AA     640         MOV.W   [R4+2730],#0AAH
00021B 86AC42           642         MOV.B   ES,R5L
00021E 9D4805540055     643         MOV.W   [R4+1364],#055H
000224 86AC42           645         MOV.B   ES,R5L
000227 9D480AAA0080     646         MOV.W   [R4+2730],#080H
00022D 86AC42           648         MOV.B   ES,R5L
000230 9D480AAA00AA     649         MOV.W   [R4+2730],#0AAH
000236 86AC42           651         MOV.B   ES,R5L
000239 9D4805540055     652         MOV.W   [R4+1364],#055H
00023F 86AC42           654         MOV.B   ES,R5L
000242 9A480030         655         MOV.W   [R4],#030H
000246                  657 _22:
000246 8915             658         MOV.W   R1,R5
000248 8904             659         MOV.W   R0,R4
00024A C5FEEF           660         CALL    _flash_status
00024D 910401           661         CMP.B   R0L,#01H
000250 F3FA             662         BEQ     _22
000252 8915             664         MOV.W   R1,R5
000254 8904             665         MOV.W   R0,R4
000256 C5FEE9           666         CALL    _flash_status
000259 2F30             671         POP.W   R4, R5
00025B D680             673         RET
00025D 00               675         ALIGN   1
                        677         PUBLIC  _flash_read_word
00025E                  678 _flash_read_word:
00025E 862C42           689         MOV.B   ES,R1L
000261 8A00             690         MOV.W   R0,[R0]
000263 D680             693         RET
000265 00               695         ALIGN   1
                        697         PUBLIC  _flash_write_word
000266                  698 _flash_write_word:
000266 0F70             702         PUSH.W  R4, R5, R6
000268 A97C             704         ADDS.W  R7,#0CH
00026A 8962             708         MOV.W   R6,R2
00026C 8931             722         MOV.W   R3,R1
00026E 8920             723         MOV.W   R2,R0
000270 8C3F02           724         MOV.W   [R7+2],R3
000273 8A2F             725         MOV.W   [R7],R2
000275 99050000         728         AND.W   R0,#00H
000279 9915000F         729         AND.W   R1,#0FH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  10

ADDR   CODE            LINE SOURCELINE
00027D 8951             731         MOV.W   R5,R1
00027F 8940             732         MOV.W   R4,R0
000281 86AC42           735         MOV.B   ES,R5L
000284 9A4800F0         736         MOV.W   [R4],#0F0H
000288                  738 _28:
000288 8915             739         MOV.W   R1,R5
00028A 8904             740         MOV.W   R0,R4
00028C C5FECE           741         CALL    _flash_status
00028F 8110             742         MOV.B   R0H,R0L
000291 911401           744         CMP.B   R0H,#01H
000294 F3F9             745         BEQ     _28
000296 6100             747         OR.B    R0L,R0L
000298 F21E             748         BNE     _30
00029A 86AC42           750         MOV.B   ES,R5L
00029D 9D480AAA00AA     751         MOV.W   [R4+2730],#0AAH
0002A3 86AC42           753         MOV.B   ES,R5L
0002A6 9D4805540055     754         MOV.W   [R4+1364],#055H
0002AC 86AC42           756         MOV.B   ES,R5L
0002AF 9D480AAA00A0     757         MOV.W   [R4+2730],#0A0H
0002B5 8C1702           759         MOV.W   R1,[R7+2]
0002B8 8A07             760         MOV.W   R0,[R7]
0002BA 862C42           761         MOV.B   ES,R1L
0002BD 8A68             762         MOV.W   [R0],R6
0002C0                  767 _29:
0002C0 8915             768         MOV.W   R1,R5
0002C2 8904             769         MOV.W   R0,R4
0002C4 C5FEB2           771         CALL    _flash_status
0002C7 8110             772         MOV.B   R0H,R0L
0002C9 911401           774         CMP.B   R0H,#01H
0002CC F3F9             775         BEQ     _29
0002CE 86AC42           777         MOV.B   ES,R5L
0002D1 9A4800F0         778         MOV.W   [R4],#0F0H
0002D6                  780 _30:
0002D6 8101             782         MOV.B   R0L,R0H
0002D8 A974             786         ADDS.W  R7,#04H
0002DA 2F70             788         POP.W   R4, R5, R6
0002DC D680             790         RET
                        795         ALIGN   1
                        797         PUBLIC  _flash_get_sector_size
0002DE                  798 _flash_get_sector_size:
0002DE E8000A           805         MULU.B  R0L,#0AH
0002E1 8900             807         MOV.W   R0,R0
0002E3 9819             808         SEXT.W  R1
0002E5 8E3rrr           809         MOV.W   R3,_meminfo+2
0002E8 8E2rrr           810         MOV.W   R2,_meminfo
0002EB 9920000A         811         ADD.W   R2,#0AH
0002EF 99310000         812         ADDC.W  R3,#00H
0002F3 0920             813         ADD.W   R2,R0
0002F5 1931             814         ADDC.W  R3,R1
0002F7 866C43           815         MOV.B   CS,R3L
0002FA 8802             816         MOVC.W  R0,[R2+]
0002FC 99240000         817         CMP.W   R2,#00H
000300 F202             818         BNE     _33
000302 A64143           819         ADDS.B  CS,#01H
000302 A6414300         819         ADDS.B  CS,#01H
000306                  820 _33:
000306 8812             821         MOVC.W  R1,[R2+]
000308 D680             823         RET
                        825         ALIGN   1
                        827         PUBLIC  _flash_get_numsectors
00030A                  828 _flash_get_numsectors:
00030A 8E1rrr           833         MOV.W   R1,_meminfo+2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  11

ADDR   CODE            LINE SOURCELINE
00030D 8E0rrr           834         MOV.W   R0,_meminfo
000310 99000004         835         ADD.W   R0,#04H
000314 99110000         836         ADDC.W  R1,#00H
000318 862C43           837         MOV.B   CS,R1L
00031B 8810             838         MOVC.W  R1,[R0+]
00031D 8102             839         MOV.B   R0L,R1L
00031F D680             841         RET
000000                  845 FLASH_ROM_FA    SEGMENT HDATA INSEGMENT ROMDATA
000000                  846         RSEG    FLASH_ROM_FA
000000 416D3239444C38   847 _4:     DB      041H,06DH,032H,039H,044H,04CH,038H,030H,030H,042H,000H
       30304200             
00000B 416D3239444C38   848 _3:     DB      041H,06DH,032H,039H,044H,04CH,038H,030H,030H,054H,000H
       30305400             
000000                  853 FLASH_CLR_NE@DS SEGMENT DATA JOIN CLEAR
000000                  854         RSEG    FLASH_CLR_NE@DS
                        855         PUBLIC  _meminfo
                        856         ALIGN   1
000000                  857 _meminfo:       DS      4
   |  RESERVED             
000003
000016                  858         RSEG    FLASH_ROM_FA
000016 4D424D32394634   859 _6:     DB      04DH,042H,04DH,032H,039H,046H,034H,030H,030H,042H,000H
       30304200             
000021 4D424D32394634   860 _5:     DB      04DH,042H,04DH,032H,039H,046H,034H,030H,030H,054H,000H
       30305400             
                        861         EXTRN   DATA(__lc_ub_xvwbuffer)
                        862         EXTRN   DATA(__lc_ue_xvwbuffer)
                        863         CALLS   'flash_get_status', 'flash_status'
                        864         CALLS   'flash_sector_erase_int', 'flash_status'
                        865         CALLS   'flash_write_word', 'flash_status'
