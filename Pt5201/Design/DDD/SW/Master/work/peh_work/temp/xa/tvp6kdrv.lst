XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
F:\PTV\Pt5201\Design\DDD\SW\Master\work\peh_work\temp\xa\tvp6kdrv.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -Ic:\cxa\rtxc\xa\include -I. -Ml
                          3 ;          -O2 -s
                          5 $NOZPAGE
                          6         NAME    TVP6KDRV
                         10 ; tvp6kdrv.c    1       /************************************************************************
                            ****/
                         11 ; tvp6kdrv.c    2       /* MODULE:                                                               
                               */
                         12 ; tvp6kdrv.c    3       /*  tvp6kdrv.c - TI TVP600+ Multimedie chip driver                       
                               */
                         13 ; tvp6kdrv.c    4       /************************************************************************
                            ****/
                         14 ; tvp6kdrv.c    5       /* FUNCTIONS:                                                            
                               */
                         15 ; tvp6kdrv.c    6       /*                                                                       
                               */
                         16 ; tvp6kdrv.c    7       /*  int pld_Init( void);                                                 
                                            */
                         17 ; tvp6kdrv.c    8       /*                                                                       
                               */
                         18 ; tvp6kdrv.c    9       /* TASKS:                                                                
                               */
                         19 ; tvp6kdrv.c   10       /*                                                                       
                               */
                         20 ; tvp6kdrv.c   11       /* NOTES:                                                                
                               */
                         21 ; tvp6kdrv.c   12       /*                                                                       
                               */
                         22 ; tvp6kdrv.c   13       /************************************************************************
                            ****/
                         23 ; tvp6kdrv.c   14       /*
                         24 ; tvp6kdrv.c   15        *   PTV software for PT5201    
                         25 ; tvp6kdrv.c   16        *   Copyright (c) 
                         26 ; tvp6kdrv.c   17        *   ProTeleVision Technologies A/S.
                         27 ; tvp6kdrv.c   18        *   ALL RIGHTS RESERVED
                         28 ; tvp6kdrv.c   19       */
                         29 ; tvp6kdrv.c   20       /************************************************************************
                            ****/
                         30 ; tvp6kdrv.c   21       
                         31 ; tvp6kdrv.c   22       #include "define.h"
                         34 ; tvp6kdrv.c   23       #include "tables.h"
                         37 ; tvp6kdrv.c   24       #include "tvp6kdrv.h"
                         40 ; tvp6kdrv.c   25       #include "i2c_drv.h"
                         43 ; tvp6kdrv.c   26       
                         44 ; tvp6kdrv.c   27       
                         45 ; tvp6kdrv.c   28       /************************************************************************
                            **/
                         46 ; tvp6kdrv.c   29       /* tvp6k_init                                                            
                                                                                                                             
                                                                     TVP6KDRV.C     */
                         47 ; tvp6kdrv.c   30       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                         48 ; tvp6kdrv.c   31       /* Author:       Kim Engedahl, DEV, 000401                               
                                                                                                                             
                                            */
                         49 ; tvp6kdrv.c   32       /* Revised:      000401, KEn, DEV                                        
                                                                                                                             
                                                    */
                         50 ; tvp6kdrv.c   33       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                         51 ; tvp6kdrv.c   34       /* Function:                                                             
                                                                                                                             
                                                                                                            */
                         52 ; tvp6kdrv.c   35       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                         53 ; tvp6kdrv.c   36       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                         54 ; tvp6kdrv.c   37       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                         55 ; tvp6kdrv.c   38       /************************************************************************
                            **/
                         56 ; tvp6kdrv.c   39       int tvp6k_init( void)
                         57 ; tvp6kdrv.c   40       {
000000                   58 TVP6KDRV_PR     SEGMENT HCODE
000000                   59         RSEG    TVP6KDRV_PR
                         60         ALIGN   1
                         62         PUBLIC  _tvp6k_init
000000                   63 _tvp6k_init:
                         67 ; tvp6kdrv.c   41               return( tvp6k_system( PAL));
000000 B900              69         MOV.W   R0,#00H
000002 C50002            70         CALL    _tvp6k_system
                         71 ; tvp6kdrv.c   42       }
000005 D680              73         RET
                         75 ; tvp6kdrv.c   43       
                         76 ; tvp6kdrv.c   44       /************************************************************************
                            **/
                         77 ; tvp6kdrv.c   45       /* tvp6k_system                                                          
                                                                                                                             
                                                             TVP6KDRV.C     */
                         78 ; tvp6kdrv.c   46       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                         79 ; tvp6kdrv.c   47       /* Author:       Kim Engedahl, DEV, 000401                               
                                                                                                                             
                                            */
                         80 ; tvp6kdrv.c   48       /* Revised:      000705, KEn, DEV                                        
                                                                                                                             
                                                    */
                         81 ; tvp6kdrv.c   49       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                         82 ; tvp6kdrv.c   50       /* Function:                                                             
                                                                                                                             
                                                                                                            */
                         83 ; tvp6kdrv.c   51       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                         84 ; tvp6kdrv.c   52       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                         85 ; tvp6kdrv.c   53       /* Updates:                                                              
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                            *
                            /
                         86 ; tvp6kdrv.c   54       /************************************************************************
                            **/
                         87 ; tvp6kdrv.c   55       int tvp6k_system( int system)
                         88 ; tvp6kdrv.c   56       {
000007 00                89         ALIGN   1
                         91         PUBLIC  _tvp6k_system
000008                   92 _tvp6k_system:
000008 0F30              96         PUSH.W  R4, R5
00000A 99720010          98         SUB.W   R7,#010H
                        104 ; tvp6kdrv.c   57       
                        105 ; tvp6kdrv.c   58           enum {  PAL_Gain_U = 304,      /* (default datasheep 0x115 (227 dec))
                             */
                        106 ; tvp6kdrv.c   59                   PAL_Gain_V = 406,      /* (default datasheep 0x18C (396 dec))
                             */
                        107 ; tvp6kdrv.c   60                   PAL_Black_level = 51,  /* (default datasheep 0x3C (60 dec)) *
                            /
                        108 ; tvp6kdrv.c   61                   PAL_Blank_level = 62,  /* (default datasheep 0x3C (60 dec)) *
                            /
                        109 ; tvp6kdrv.c   62                   PAL_Gain_Y =     319,  /* (default datasheep 0x145 (325 dec))
                             */
                        110 ; tvp6kdrv.c   63                   PAL_COLOR_BURST_AMP = 62, /* (default datasheep 0x41 (65 dec)
                             */
                        111 ; tvp6kdrv.c   64       
                        112 ; tvp6kdrv.c   65                   NTSC_Gain_U = 274,     /* (default datasheep 0x101 (257 dec))
                             */
                        113 ; tvp6kdrv.c   66                   NTSC_Gain_V = 389,      /* (default datasheep 0x16B (363 dec)
                            ) */
                        114 ; tvp6kdrv.c   67                   NTSC_Black_level = 65,  /* (default datasheep 0x4C (76 dec)) 
                            */
                        115 ; tvp6kdrv.c   68                   NTSC_Blank_level = 56,  /* (default datasheep 0x38 (56 dec)) 
                            */
                        116 ; tvp6kdrv.c   69                   NTSC_Gain_Y =     304,  /* (default datasheep 0x1E2 (482 dec)
                            ) */
                        117 ; tvp6kdrv.c   70       
                        118 ; tvp6kdrv.c   71       
                        119 ; tvp6kdrv.c   72                   NTSC_COLOR_BURST_AMP = 60, /* (default datasheep 0x38 (56 dec
                            ) */
                        120 ; tvp6kdrv.c   73       
                        121 ; tvp6kdrv.c   74       
                        122 ; tvp6kdrv.c   75                   JNTSC_Gain_U = 299,     
                        123 ; tvp6kdrv.c   76                   JNTSC_Gain_V = 419,      
                        124 ; tvp6kdrv.c   77                   JNTSC_Black_level = 45,  
                        125 ; tvp6kdrv.c   78                   JNTSC_Blank_level = 56,  
                        126 ; tvp6kdrv.c   79                   JNTSC_Gain_Y =     326,  
                        127 ; tvp6kdrv.c   80                   JNTSC_COLOR_BURST_AMP = 60 
                        128 ; tvp6kdrv.c   81                };
                        129 ; tvp6kdrv.c   82       
                        130 ; tvp6kdrv.c   83               UC buffer[15];
                        131 ; tvp6kdrv.c   84       
                        132 ; tvp6kdrv.c   85       
                        133 ; tvp6kdrv.c   86               if ( system < NTSC_US)
00000E 99040002         135         CMP.W   R0,#02H
                        136         BGE     _3
000012 FB02            +136 ;       BLT     _LG_0
000014 D5009C          +136 ;       JMP.L   _3
000014 D5009C00        +136 ;       JMP.L   _3
000018                 +136 _LG_0:
                        137 ; tvp6kdrv.c   87               {
                        138 ; tvp6kdrv.c   88                 /*------------------------------------------------------
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
                        139 ; tvp6kdrv.c   89                 |    P A L   S e t u p
                        140 ; tvp6kdrv.c   90                 -----+----+----------------------------------------------
                        141 ; tvp6kdrv.c   91                 | 3A | 8F | CBAR=1, FTM=0x03, Y2C=1, UV2C=1, (SCN=0)
                        142 ; tvp6kdrv.c   92                 |----+----+----------------------------------------------
                        143 ; tvp6kdrv.c   93                 | 5A | 00 | CPHS=0x00                 (User adj.)
                        144 ; tvp6kdrv.c   94                 |----+----+----------------------------------------------
                        145 ; tvp6kdrv.c   95                 | 5B | 30 | GU=0x130      (default datasheep 0x115)
                        146 ; tvp6kdrv.c   96                 |    |    |   Gain_U
                        147 ; tvp6kdrv.c   97                 |----+----+----------------------------------------------
                        148 ; tvp6kdrv.c   98                 | 5C | 96 | GV=0x196      (default datasheep 0x18C)
                        149 ; tvp6kdrv.c   99                 |    |    |   Gain_V
                        150 ; tvp6kdrv.c  100                 |----+----+----------------------------------------------
                        151 ; tvp6kdrv.c  101                 | 5D | B3 | BLACK=0x33
                        152 ; tvp6kdrv.c  102                 |    |    |   Black_Level
                        153 ; tvp6kdrv.c  103                 |----+----+----------------------------------------------
                        154 ; tvp6kdrv.c  104                 | 5E | BE | BLANK=0x3E
                        155 ; tvp6kdrv.c  105                 |    |    |   Blank_Level
                        156 ; tvp6kdrv.c  106                 |----+----+----------------------------------------------
                        157 ; tvp6kdrv.c  107                 | 5F | 3F | GY=0x13F
                        158 ; tvp6kdrv.c  108                 |    |    |   Gain_Y
                        159 ; tvp6kdrv.c  109                 |----+----+----------------------------------------------
                        160 ; tvp6kdrv.c  110                 | 60 | 20 | XC=0, LCD=0x0
                        161 ; tvp6kdrv.c  111                 |----+----+----------------------------------------------
                        162 ; tvp6kdrv.c  112                 | 61 | 42 | SDOWN=0, CDOWN=1, PALPHS=0, GLCE=0, CBW=0, PAL=1, F
                            REQ=0
                        163 ; tvp6kdrv.c  113                 |----+----+----------------------------------------------
                        164 ; tvp6kdrv.c  114                 | 62 | 3E | SQP=0, BSTAP=0x3E
                        165 ; tvp6kdrv.c  115                 |    |    |   Color_burst_amplitude
                        166 ; tvp6kdrv.c  116                 |----+----+----------------------------------------------
                        167 ; tvp6kdrv.c  117                 | 63 | CB | FSC=0x2A098ACB
                        168 ; tvp6kdrv.c  118                 |----+----+----------------------------------------------
                        169 ; tvp6kdrv.c  119                 | 64 | 8A |
                        170 ; tvp6kdrv.c  120                 |----+----+----------------------------------------------
                        171 ; tvp6kdrv.c  121                 | 65 | 09 |
                        172 ; tvp6kdrv.c  122                 |----+----+----------------------------------------------
                        173 ; tvp6kdrv.c  123                 | 66 | 2A |
                        174 ; tvp6kdrv.c  124                 |----+----+----------------------------------------------
                        175 ; tvp6kdrv.c  125                 | 67 | 00 | L21O=0x0000
                        176 ; tvp6kdrv.c  126                 |----+----+----------------------------------------------
                        177 ; tvp6kdrv.c  127                 | 68 | 00 |
                        178 ; tvp6kdrv.c  128                 |----+----+----------------------------------------------
                        179 ; tvp6kdrv.c  129                 | 69 | 00 | L21E=0x0000
                        180 ; tvp6kdrv.c  130                 |----+----+----------------------------------------------
                        181 ; tvp6kdrv.c  131                 | 6A | 00 |
                        182 ; tvp6kdrv.c  132                 |----+----+----------------------------------------------
                        183 ; tvp6kdrv.c  133                 | 6B | 11 | SLINE=0x11
                        184 ; tvp6kdrv.c  134                 |----+----+----------------------------------------------
                        185 ; tvp6kdrv.c  135                 | 6C | A0 | RCV1A=1, RCV1B=0, HSINSEL=1, ORCV1=0, PRCV1=0,
                        186 ; tvp6kdrv.c  136                 |    |    | CBLFV2=0, ORCV2=0, PRCV2=0
                        187 ; tvp6kdrv.c  137                 |----+----+----------------------------------------------
                        188 ; tvp6kdrv.c  138                 | 6D | 00 | CRCM2=0, CBLFM2=0, ORCM2=0, PRCM2=0, RCM1A=0,
                        189 ; tvp6kdrv.c  139                 |    |    | RCM1B=0, L21ENA=0, L21ENB=0
                        190 ; tvp6kdrv.c  140                 |----+----+----------------------------------------------
                        191 ; tvp6kdrv.c  141                 | 6E | 0A |  HTRIG=0x10A
                        192 ; tvp6kdrv.c  142                 |----+----+----------------------------------------------
                        193 ; tvp6kdrv.c  143                 | 6F | 01 |
                        194 ; tvp6kdrv.c  144                 |----+----+----------------------------------------------
                        195 ; tvp6kdrv.c  145                 | 70 | 80 | PRESA=1, PRESB=0, SBLANK=0, VTRIG=0x00
                        196 ; tvp6kdrv.c  146                 |----+----+----------------------------------------------
                        197 ; tvp6kdrv.c  147                 | 71 | 8C | BMRQ=0x08C
                        198 ; tvp6kdrv.c  148                 |----+----+----------------------------------------------
                        199 ; tvp6kdrv.c  149                 | 72 | 4C | EMRQ=0x34C
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   5

ADDR   CODE            LINE SOURCELINE
                        200 ; tvp6kdrv.c  150                 |----+----+----------------------------------------------
                        201 ; tvp6kdrv.c  151                 | 73 | 30 |
                        202 ; tvp6kdrv.c  152                 |----+----+----------------------------------------------
                        203 ; tvp6kdrv.c  153                 | 77 | 8C | BRCV=0x08C
                        204 ; tvp6kdrv.c  154                 |----+----+----------------------------------------------
                        205 ; tvp6kdrv.c  155                 | 78 | 4C | ERCV=0x34C
                        206 ; tvp6kdrv.c  156                 |----+----+----------------------------------------------
                        207 ; tvp6kdrv.c  157                 | 79 | 30 |
                        208 ; tvp6kdrv.c  158                 |----+----+----------------------------------------------
                        209 ; tvp6kdrv.c  159                 | 7A | 70 | FLEN=0x270
                        210 ; tvp6kdrv.c  160                 |----+----+----------------------------------------------
                        211 ; tvp6kdrv.c  161                 | 7B | 16 | FAL=0x016
                        212 ; tvp6kdrv.c  162                 |----+----+----------------------------------------------
                        213 ; tvp6kdrv.c  163                 | 7C | 35 | LAL=0x135
                        214 ; tvp6kdrv.c  164                 |----+----+----------------------------------------------
                        215 ; tvp6kdrv.c  165                 | 7D | 22 |
                        216 ; tvp6kdrv.c  166                 |----+----+----------------------------------------------
                        217 ; tvp6kdrv.c  167                 | 7E | 0A | ESAV=0, IGNP=0, FREE=0, BLINKS=1, AVM=0x01, FID=0
                        218 ; tvp6kdrv.c  168                 |----+----+----------------------------------------------
                        219 ; tvp6kdrv.c  169                 | 90 | 00 | SWPF=0, HSC=0x0, VSC=0x0, SCN=0
                        220 ; tvp6kdrv.c  170                 |----+----+----------------------------------------------
                        221 ; tvp6kdrv.c  171                 | 91 | 00 | SLPF=0x000
                        222 ; tvp6kdrv.c  172                 |----+----+----------------------------------------------
                        223 ; tvp6kdrv.c  173                 | 92 | 00 | SPPL=0x000
                        224 ; tvp6kdrv.c  174                 |----+----+----------------------------------------------
                        225 ; tvp6kdrv.c  175                 | 93 | 00 |
                        226 ; tvp6kdrv.c  176                 |----+----+----------------------------------------------
                        227 ; tvp6kdrv.c  177                 | 94 | 00 | DLPF=0x000
                        228 ; tvp6kdrv.c  178                 |----+----+----------------------------------------------
                        229 ; tvp6kdrv.c  179                 | 95 | 00 | DPPL=0x000
                        230 ; tvp6kdrv.c  180                 |----+----+----------------------------------------------
                        231 ; tvp6kdrv.c  181                 | 96 | 00 |
                        232 ; tvp6kdrv.c  182                 |----+----+----------------------------------------------
                        233 ; tvp6kdrv.c  183                 | 97 | 00 | VDTA=0x0000
                        234 ; tvp6kdrv.c  184                 |----+----+----------------------------------------------
                        235 ; tvp6kdrv.c  185                 | 98 | 00 |
                        236 ; tvp6kdrv.c  186                 |----+----+----------------------------------------------
                        237 ; tvp6kdrv.c  187                 | 99 | 00 | HDTA=0x0000
                        238 ; tvp6kdrv.c  188                 |----+----+----------------------------------------------
                        239 ; tvp6kdrv.c  189                 | 9A | 00 |
                        240 ; tvp6kdrv.c  190                 |----+----+----------------------------------------------
                        241 ; tvp6kdrv.c  191                 | 9B | 00 | VOFS=0x00
                        242 ; tvp6kdrv.c  192                 |----+----+----------------------------------------------
                        243 ; tvp6kdrv.c  193                 | 9C | 00 | HOFS=0x00
                        244 ; tvp6kdrv.c  194                 |----+----+----------------------------------------------
                        245 ; tvp6kdrv.c  195                 | 9D | 00 | NLR=0x00
                        246 ; tvp6kdrv.c  196                 |--------------------------------------------------------
                        247 ; tvp6kdrv.c  197                 */
                        248 ; tvp6kdrv.c  198       
                        249 ; tvp6kdrv.c  199                       // PAL setup
                        250 ; tvp6kdrv.c  200                       buffer[0] = 0x3A;
000018 92783A           252         MOV.B   [R7],#03AH
                        253 ; tvp6kdrv.c  201                       buffer[1] = 0x8F;
00001B 9478018F         255         MOV.B   [R7+1],#08FH
                        256 ; tvp6kdrv.c  202                       TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PTV);
00001F 91A8rr           258         MOV.B   R5L,#SEG( __lc_bs )
000022 71BB             259         XOR.B   R5H,R5H
000024 8947             260         MOV.W   R4,R7
000026 912800           261         MOV.B   R1L,#00H
000029 8935             262         MOV.W   R3,R5
00002B 8924             263         MOV.W   R2,R4
00002D 911802           264         MOV.B   R0H,#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   6

ADDR   CODE            LINE SOURCELINE
000030 910840           266         MOV.B   R0L,#040H
                        267         CALL    _TransmitIIC
000033 C4rrrrrr        +267 ;       FCALL   _TransmitIIC
                        268 ; tvp6kdrv.c  203       
                        269 ; tvp6kdrv.c  204                       buffer[0] = 0x5A;
000037 92785A           271         MOV.B   [R7],#05AH
                        272 ; tvp6kdrv.c  205                       buffer[1] = 0x00;               // [5A]
00003A B47001           274         MOV.B   [R7+1],#00H
                        275 ; tvp6kdrv.c  206                       buffer[2] = 0xFF & PAL_Gain_U;  // [5B]      //was 0x10, 
                            0x32
00003D 94780230         277         MOV.B   [R7+2],#030H
                        278 ; tvp6kdrv.c  207                       buffer[3] = 0xFF & PAL_Gain_V;  // [5C]     //was 0x80, 0
                            xAC
000041 94780396         280         MOV.B   [R7+3],#096H
                        281 ; tvp6kdrv.c  208                       buffer[4] = PAL_Black_level | ((PAL_Gain_U & 0x100) >> 1)
                            ;   // [5D]
000045 947804B3         283         MOV.B   [R7+4],#0B3H
                        284 ; tvp6kdrv.c  209                       buffer[5] = PAL_Blank_level | ((PAL_Gain_V & 0x100) >> 1)
                            ;   // [5E]
000049 947805BE         286         MOV.B   [R7+5],#0BEH
                        287 ; tvp6kdrv.c  210                       buffer[6] = 0xFF & PAL_Gain_Y;  // [5F]
00004D 9478063F         289         MOV.B   [R7+6],#03FH
                        290 ; tvp6kdrv.c  211                       buffer[7] = 0x00 | ((PAL_Gain_Y & 0x100) >> 3);  // [60]
000051 94780720         292         MOV.B   [R7+7],#020H
                        293 ; tvp6kdrv.c  212                       buffer[8] = 0x42;         // [61]
000055 94780842         295         MOV.B   [R7+8],#042H
                        296 ; tvp6kdrv.c  213                       buffer[9] = PAL_COLOR_BURST_AMP;  // [62]               /
                            / was 0x41
000059 9478093E         298         MOV.B   [R7+9],#03EH
                        299 ; tvp6kdrv.c  214                       buffer[10] = 0xCB;        // [62]
00005D 94780ACB         301         MOV.B   [R7+10],#0CBH
                        302 ; tvp6kdrv.c  215                       buffer[11] = 0x8A;        // [63]
000061 94780B8A         304         MOV.B   [R7+11],#08AH
                        305 ; tvp6kdrv.c  216                       buffer[12] = 0x09;
000065 94780C09         307         MOV.B   [R7+12],#09H
                        308 ; tvp6kdrv.c  217                       buffer[13] = 0x2A;
000069 94780D2A         310         MOV.B   [R7+13],#02AH
                        311 ; tvp6kdrv.c  218                       TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_PTV);
00006D 912800           313         MOV.B   R1L,#00H
000070 8935             314         MOV.W   R3,R5
000072 8924             315         MOV.W   R2,R4
000074 91180E           316         MOV.B   R0H,#0EH
000077 910840           317         MOV.B   R0L,#040H
                        318         CALL    _TransmitIIC
00007A C4rrrrrr        +318 ;       FCALL   _TransmitIIC
                        319 ; tvp6kdrv.c  219       
                        320 ; tvp6kdrv.c  220                       buffer[0] = 0x67;
00007E 927867           322         MOV.B   [R7],#067H
                        323 ; tvp6kdrv.c  221                       buffer[1] = 0x00;
000081 B47001           325         MOV.B   [R7+1],#00H
                        326 ; tvp6kdrv.c  222                       buffer[2] = 0x00;
000084 B47002           328         MOV.B   [R7+2],#00H
                        329 ; tvp6kdrv.c  223                       buffer[3] = 0x00;
000087 B47003           331         MOV.B   [R7+3],#00H
                        332 ; tvp6kdrv.c  224                       buffer[4] = 0x00;
00008A B47004           334         MOV.B   [R7+4],#00H
                        335 ; tvp6kdrv.c  225                       buffer[5] = 0x11;
00008D 94780511         337         MOV.B   [R7+5],#011H
                        338 ; tvp6kdrv.c  226                       buffer[6] = 0xA0;
000091 947806A0         340         MOV.B   [R7+6],#0A0H
                        341 ; tvp6kdrv.c  227                       buffer[7] = 0x00;
000095 B47007           343         MOV.B   [R7+7],#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   7

ADDR   CODE            LINE SOURCELINE
                        344 ; tvp6kdrv.c  228                       buffer[8] = 0x0A;
000098 9478080A         346         MOV.B   [R7+8],#0AH
                        347 ; tvp6kdrv.c  229                       buffer[9] = 0x01;
00009C B47109           349         MOV.B   [R7+9],#01H
                        350 ; tvp6kdrv.c  230                       buffer[10] = 0x80;
00009F 94780A80         352         MOV.B   [R7+10],#080H
                        353 ; tvp6kdrv.c  231                       buffer[11] = 0x8C;
0000A3 94780B8C         355         MOV.B   [R7+11],#08CH
                        356 ; tvp6kdrv.c  232                       buffer[12] = 0x4C;
0000A7 94780C4C         358         MOV.B   [R7+12],#04CH
                        359 ; tvp6kdrv.c  233                       buffer[13] = 0x30;
0000AB 94780D30         361         MOV.B   [R7+13],#030H
0000AF 912800           362         MOV.B   R1L,#00H
0000B2 8935             363         MOV.W   R3,R5
0000B4 8924             364         MOV.W   R2,R4
0000B6 910840           365         MOV.B   R0L,#040H
                        366 ; tvp6kdrv.c  234       
                        367 ; tvp6kdrv.c  235                       TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_PTV);
0000B9 91180E           369         MOV.B   R0H,#0EH
                        370         CALL    _TransmitIIC
0000BC C4rrrrrr        +370 ;       FCALL   _TransmitIIC
                        371 ; tvp6kdrv.c  236       
                        372 ; tvp6kdrv.c  237                       buffer[0] = 0x77;
0000C0 927877           374         MOV.B   [R7],#077H
                        375 ; tvp6kdrv.c  238                       buffer[1] = 0x8C;
0000C3 9478018C         377         MOV.B   [R7+1],#08CH
                        378 ; tvp6kdrv.c  239                       buffer[2] = 0x4C;
0000C7 9478024C         380         MOV.B   [R7+2],#04CH
                        381 ; tvp6kdrv.c  240                       buffer[3] = 0x30;
0000CB 94780330         383         MOV.B   [R7+3],#030H
                        384 ; tvp6kdrv.c  241                       buffer[4] = 0x70;
0000CF 94780470         386         MOV.B   [R7+4],#070H
                        387 ; tvp6kdrv.c  242                       buffer[5] = 0x16;
0000D3 94780516         389         MOV.B   [R7+5],#016H
                        390 ; tvp6kdrv.c  243                       buffer[6] = 0x35;
0000D7 94780635         392         MOV.B   [R7+6],#035H
                        393 ; tvp6kdrv.c  244                       buffer[7] = 0x22;
0000DB 94780722         395         MOV.B   [R7+7],#022H
                        396 ; tvp6kdrv.c  245                       buffer[8] = 0x0A;
0000DF 9478080A         398         MOV.B   [R7+8],#0AH
0000E3 912800           399         MOV.B   R1L,#00H
0000E6 8935             400         MOV.W   R3,R5
0000E8 8924             401         MOV.W   R2,R4
0000EA 910840           402         MOV.B   R0L,#040H
                        403 ; tvp6kdrv.c  246                       TransmitIIC( TVP6K_IIC_address, 9, buffer, IIC_PTV);
0000ED 911809           405         MOV.B   R0H,#09H
                        406         CALL    _TransmitIIC
0000F0 C4rrrrrr        +406 ;       FCALL   _TransmitIIC
                        407 ; tvp6kdrv.c  247       
                        408 ; tvp6kdrv.c  248                       buffer[0] = 0x90;
0000F4 927890           410         MOV.B   [R7],#090H
                        411 ; tvp6kdrv.c  249                       buffer[1] = 0x00;
0000F7 B47001           413         MOV.B   [R7+1],#00H
                        414 ; tvp6kdrv.c  250                       buffer[2] = 0x00;
0000FA B47002           416         MOV.B   [R7+2],#00H
                        417 ; tvp6kdrv.c  251                       buffer[3] = 0x00;
0000FD B47003           419         MOV.B   [R7+3],#00H
                        420 ; tvp6kdrv.c  252                       buffer[4] = 0x00;
000100 B47004           422         MOV.B   [R7+4],#00H
                        423 ; tvp6kdrv.c  253                       buffer[5] = 0x00;
000103 B47005           425         MOV.B   [R7+5],#00H
                        426 ; tvp6kdrv.c  254                       buffer[6] = 0x00;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   8

ADDR   CODE            LINE SOURCELINE
000106 B47006           428         MOV.B   [R7+6],#00H
                        429 ; tvp6kdrv.c  255                       buffer[7] = 0x00;
000109 B47007           431         MOV.B   [R7+7],#00H
                        432 ; tvp6kdrv.c  256                       buffer[8] = 0x00;
00010C B47008           434         MOV.B   [R7+8],#00H
                        435 ; tvp6kdrv.c  257                       buffer[9] = 0x00;
00010F B47009           437         MOV.B   [R7+9],#00H
                        438 ; tvp6kdrv.c  258                       buffer[10] = 0x00;
000112 B4700A           440         MOV.B   [R7+10],#00H
                        441 ; tvp6kdrv.c  259                       buffer[11] = 0x00;
000115 B4700B           443         MOV.B   [R7+11],#00H
                        444 ; tvp6kdrv.c  260                       buffer[12] = 0x00;
000118 B4700C           446         MOV.B   [R7+12],#00H
                        447 ; tvp6kdrv.c  261                       buffer[13] = 0x00;
00011B B4700D           449         MOV.B   [R7+13],#00H
                        450 ; tvp6kdrv.c  262                       buffer[14] = 0x00;
00011E B4700E           452         MOV.B   [R7+14],#00H
                        453 ; tvp6kdrv.c  263       
                        454 ; tvp6kdrv.c  264                       TransmitIIC( TVP6K_IIC_address, 15, buffer, IIC_PTV);
000121 912800           456         MOV.B   R1L,#00H
000124 8935             457         MOV.W   R3,R5
000126 8924             458         MOV.W   R2,R4
000128 91180F           459         MOV.B   R0H,#0FH
00012B 910840           460         MOV.B   R0L,#040H
                        461         CALL    _TransmitIIC
00012E C4rrrrrr        +461 ;       FCALL   _TransmitIIC
                        462 ; tvp6kdrv.c  265       
                        463 ; tvp6kdrv.c  266                       buffer[0] = 0x3A;
000132 92783A           465         MOV.B   [R7],#03AH
                        466 ; tvp6kdrv.c  267                       buffer[1] = 0x0F;
000135 9478010F         468         MOV.B   [R7+1],#0FH
                        469 ; tvp6kdrv.c  268                       TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PTV);
000139 911802           471         MOV.B   R0H,#02H
00013C 910840           472         MOV.B   R0L,#040H
00013F 8935             473         MOV.W   R3,R5
000141 8924             474         MOV.W   R2,R4
000143 912800           475         MOV.B   R1L,#00H
                        476         CALL    _TransmitIIC
000146 C4rrrrrr        +476 ;       FCALL   _TransmitIIC
                        477 ; tvp6kdrv.c  269               }
                        479         BR      _6
00014A D50139          +479         JMP.L   _6
00014A D5013900        +479         JMP.L   _6
00014E                  480 _3:
                        482 ; tvp6kdrv.c  270               else
                        483 ; tvp6kdrv.c  271               {
                        484 ; tvp6kdrv.c  272                       if ( system < NTSC_J)
00014E 99040003         486         CMP.W   R0,#03H
                        487         BGE     _4
000152 FB02            +487 ;       BLT     _LG_2
000154 D5009B          +487 ;       JMP.L   _4
000154 D5009B00        +487 ;       JMP.L   _4
000158                 +487 _LG_2:
                        488 ; tvp6kdrv.c  273                       {
                        489 ; tvp6kdrv.c  274                         /*-----------------------------------------------------
                            -
                        490 ; tvp6kdrv.c  275                         |    N T S C   S e t u p
                        491 ; tvp6kdrv.c  276                         -----+----+--------------------------------------------
                            --
                        492 ; tvp6kdrv.c  277                         | 3A | 8F | CBAR=1, FTM=0x03, Y2C=1, UV2C=1, (SCN=0)
                        493 ; tvp6kdrv.c  278                         |----+----+--------------------------------------------
                            --
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   9

ADDR   CODE            LINE SOURCELINE
                        494 ; tvp6kdrv.c  279                         | 5A | 00 | CPHS=0x00                 (User adj.)
                        495 ; tvp6kdrv.c  280                         |----+----+--------------------------------------------
                            --
                        496 ; tvp6kdrv.c  281                         | 5B | 12 | GU=0x112      (default datasheep 0x101)
                        497 ; tvp6kdrv.c  282                         |    |    |   Gain_U
                        498 ; tvp6kdrv.c  283                         |----+----+--------------------------------------------
                            --
                        499 ; tvp6kdrv.c  284                         | 5C | 85 | GV=0x185      (default datasheep 0x)
                        500 ; tvp6kdrv.c  285                         |    |    |   Gain_V
                        501 ; tvp6kdrv.c  286                         |----+----+--------------------------------------------
                            --
                        502 ; tvp6kdrv.c  287                         | 5D | c1 | BLACK=0x41
                        503 ; tvp6kdrv.c  288                         |    |    |   Black_Level
                        504 ; tvp6kdrv.c  289                         |----+----+--------------------------------------------
                            --
                        505 ; tvp6kdrv.c  290                         | 5E | B8 | BLANK=0x38
                        506 ; tvp6kdrv.c  291                         |    |    |   Blank_Level
                        507 ; tvp6kdrv.c  292                         |----+----+--------------------------------------------
                            --
                        508 ; tvp6kdrv.c  293                         | 5F | 30 | GY=0x130
                        509 ; tvp6kdrv.c  294                         |    |    |   Gain_Y
                        510 ; tvp6kdrv.c  295                         |----+----+--------------------------------------------
                            --
                        511 ; tvp6kdrv.c  296                         | 60 | 20 | XC=0, LCD=0x0
                        512 ; tvp6kdrv.c  297                         |----+----+--------------------------------------------
                            --
                        513 ; tvp6kdrv.c  298                         | 61 | 41 | SDOWN=0, CDOWN=1, PALPHS=0, GLCE=0, CBW=0, 
                            PAL=0, FREQ=1
                        514 ; tvp6kdrv.c  299                         |----+----+--------------------------------------------
                            --
                        515 ; tvp6kdrv.c  300                         | 62 | 3C | SQP=0, BSTAP=0x3C     // was 0x38
                        516 ; tvp6kdrv.c  301                         |    |    |   Color_burst_amplitude
                        517 ; tvp6kdrv.c  302                         |----+----+--------------------------------------------
                            --
                        518 ; tvp6kdrv.c  303                         | 63 | CB | FSC=0x21F07C1F
                        519 ; tvp6kdrv.c  304                         |----+----+--------------------------------------------
                            --
                        520 ; tvp6kdrv.c  305                         | 64 | 8A |
                        521 ; tvp6kdrv.c  306                         |----+----+--------------------------------------------
                            --
                        522 ; tvp6kdrv.c  307                         | 65 | 09 |
                        523 ; tvp6kdrv.c  308                         |----+----+--------------------------------------------
                            --
                        524 ; tvp6kdrv.c  309                         | 66 | 2A |
                        525 ; tvp6kdrv.c  310                         |----+----+--------------------------------------------
                            --
                        526 ; tvp6kdrv.c  311                         | 67 | 00 | L21O=0x0000
                        527 ; tvp6kdrv.c  312                         |----+----+--------------------------------------------
                            --
                        528 ; tvp6kdrv.c  313                         | 68 | 00 |
                        529 ; tvp6kdrv.c  314                         |----+----+--------------------------------------------
                            --
                        530 ; tvp6kdrv.c  315                         | 69 | 00 | L21E=0x0000
                        531 ; tvp6kdrv.c  316                         |----+----+--------------------------------------------
                            --
                        532 ; tvp6kdrv.c  317                         | 6A | 00 |
                        533 ; tvp6kdrv.c  318                         |----+----+--------------------------------------------
                            --
                        534 ; tvp6kdrv.c  319                         | 6B | 11 | SLINE=0x11
                        535 ; tvp6kdrv.c  320                         |----+----+--------------------------------------------
                            --
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  10

ADDR   CODE            LINE SOURCELINE
                        536 ; tvp6kdrv.c  321                         | 6C | A0 | RCV1A=1, RCV1B=0, HSINSEL=1, ORCV1=0, PRCV1
                            =0,
                        537 ; tvp6kdrv.c  322                         |    |    | CBLFV2=0, ORCV2=0, PRCV2=0
                        538 ; tvp6kdrv.c  323                         |----+----+--------------------------------------------
                            --
                        539 ; tvp6kdrv.c  324                         | 6D | 00 | CRCM2=0, CBLFM2=0, ORCM2=0, PRCM2=0, RCM1A=
                            0,
                        540 ; tvp6kdrv.c  325                         |    |    | RCM1B=0, L21ENA=0, L21ENB=0
                        541 ; tvp6kdrv.c  326                         |----+----+--------------------------------------------
                            --
                        542 ; tvp6kdrv.c  327                         | 6E | 0A |  HTRIG=0x10A
                        543 ; tvp6kdrv.c  328                         |----+----+--------------------------------------------
                            --
                        544 ; tvp6kdrv.c  329                         | 6F | 01 |
                        545 ; tvp6kdrv.c  330                         |----+----+--------------------------------------------
                            --
                        546 ; tvp6kdrv.c  331                         | 70 | C0 | PRESA=1, PRESB=1, SBLANK=0, VTRIG=0x00
                        547 ; tvp6kdrv.c  332                         |----+----+--------------------------------------------
                            --
                        548 ; tvp6kdrv.c  333                         | 71 | 82 | BMRQ=0x082
                        549 ; tvp6kdrv.c  334                         |----+----+--------------------------------------------
                            --
                        550 ; tvp6kdrv.c  335                         | 72 | 46 | EMRQ=0x346
                        551 ; tvp6kdrv.c  336                         |----+----+--------------------------------------------
                            --
                        552 ; tvp6kdrv.c  337                         | 73 | 30 |
                        553 ; tvp6kdrv.c  338                         |----+----+--------------------------------------------
                            --
                        554 ; tvp6kdrv.c  339                         | 77 | 82 | BRCV=0x082
                        555 ; tvp6kdrv.c  340                         |----+----+--------------------------------------------
                            --
                        556 ; tvp6kdrv.c  341                         | 78 | 46 | ERCV=0x346
                        557 ; tvp6kdrv.c  342                         |----+----+--------------------------------------------
                            --
                        558 ; tvp6kdrv.c  343                         | 79 | 30 |
                        559 ; tvp6kdrv.c  344                         |----+----+--------------------------------------------
                            --
                        560 ; tvp6kdrv.c  345                         | 7A | 0C | FLEN=0x20C
                        561 ; tvp6kdrv.c  346                         |----+----+--------------------------------------------
                            --
                        562 ; tvp6kdrv.c  347                         | 7B | 11 | FAL=0x011
                        563 ; tvp6kdrv.c  348                         |----+----+--------------------------------------------
                            --
                        564 ; tvp6kdrv.c  349                         | 7C | 03 | LAL=0x103
                        565 ; tvp6kdrv.c  350                         |----+----+--------------------------------------------
                            --
                        566 ; tvp6kdrv.c  351                         | 7D | 22 |
                        567 ; tvp6kdrv.c  352                         |----+----+--------------------------------------------
                            --
                        568 ; tvp6kdrv.c  353                         | 7E | 0A | ESAV=0, IGNP=0, FREE=0, BLINKS=1, AVM=0x01,
                             FID=0
                        569 ; tvp6kdrv.c  354                         |----+----+--------------------------------------------
                            --
                        570 ; tvp6kdrv.c  355                         | 90 | 00 | SWPF=0, HSC=0x0, VSC=0x0, SCN=0
                        571 ; tvp6kdrv.c  356                         |----+----+--------------------------------------------
                            --
                        572 ; tvp6kdrv.c  357                         | 91 | 00 | SLPF=0x000
                        573 ; tvp6kdrv.c  358                         |----+----+--------------------------------------------
                            --
                        574 ; tvp6kdrv.c  359                         | 92 | 00 | SPPL=0x000
                        575 ; tvp6kdrv.c  360                         |----+----+--------------------------------------------
                            --
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  11

ADDR   CODE            LINE SOURCELINE
                        576 ; tvp6kdrv.c  361                         | 93 | 00 |
                        577 ; tvp6kdrv.c  362                         |----+----+--------------------------------------------
                            --
                        578 ; tvp6kdrv.c  363                         | 94 | 00 | DLPF=0x000
                        579 ; tvp6kdrv.c  364                         |----+----+--------------------------------------------
                            --
                        580 ; tvp6kdrv.c  365                         | 95 | 00 | DPPL=0x000
                        581 ; tvp6kdrv.c  366                         |----+----+--------------------------------------------
                            --
                        582 ; tvp6kdrv.c  367                         | 96 | 00 |
                        583 ; tvp6kdrv.c  368                         |----+----+--------------------------------------------
                            --
                        584 ; tvp6kdrv.c  369                         | 97 | 00 | VDTA=0x0000
                        585 ; tvp6kdrv.c  370                         |----+----+--------------------------------------------
                            --
                        586 ; tvp6kdrv.c  371                         | 98 | 00 |
                        587 ; tvp6kdrv.c  372                         |----+----+--------------------------------------------
                            --
                        588 ; tvp6kdrv.c  373                         | 99 | 00 | HDTA=0x0000
                        589 ; tvp6kdrv.c  374                         |----+----+--------------------------------------------
                            --
                        590 ; tvp6kdrv.c  375                         | 9A | 00 |
                        591 ; tvp6kdrv.c  376                         |----+----+--------------------------------------------
                            --
                        592 ; tvp6kdrv.c  377                         | 9B | 00 | VOFS=0x00
                        593 ; tvp6kdrv.c  378                         |----+----+--------------------------------------------
                            --
                        594 ; tvp6kdrv.c  379                         | 9C | 00 | HOFS=0x00
                        595 ; tvp6kdrv.c  380                         |----+----+--------------------------------------------
                            --
                        596 ; tvp6kdrv.c  381                         | 9D | 00 | NLR=0x00
                        597 ; tvp6kdrv.c  382                         |------------------------------------------------------
                            --
                        598 ; tvp6kdrv.c  383                               */
                        599 ; tvp6kdrv.c  384       
                        600 ; tvp6kdrv.c  385                               // NTSC US
                        601 ; tvp6kdrv.c  386       
                        602 ; tvp6kdrv.c  387                               buffer[0] = 0x3A;
000158 92783A           604         MOV.B   [R7],#03AH
                        605 ; tvp6kdrv.c  388                               buffer[1] = 0x8F;
00015B 9478018F         607         MOV.B   [R7+1],#08FH
                        608 ; tvp6kdrv.c  389                               TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PT
                            V);
00015F 91A8rr           610         MOV.B   R5L,#SEG( __lc_bs )
000162 71BB             611         XOR.B   R5H,R5H
000164 8947             612         MOV.W   R4,R7
000166 912800           613         MOV.B   R1L,#00H
000169 8935             614         MOV.W   R3,R5
00016B 8924             615         MOV.W   R2,R4
00016D 911802           616         MOV.B   R0H,#02H
000170 910840           618         MOV.B   R0L,#040H
                        619         CALL    _TransmitIIC
000173 C4rrrrrr        +619 ;       FCALL   _TransmitIIC
                        620 ; tvp6kdrv.c  390       
                        621 ; tvp6kdrv.c  391                               buffer[0] = 0x5A;
000177 92785A           623         MOV.B   [R7],#05AH
                        624 ; tvp6kdrv.c  392                               buffer[1] = 0x00;
00017A B47001           626         MOV.B   [R7+1],#00H
                        627 ; tvp6kdrv.c  393                               buffer[2] = 0xFF & NTSC_Gain_U;   // [5B]       /
                            / was 0x01, 0x03
00017D 94780212         629         MOV.B   [R7+2],#012H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  12

ADDR   CODE            LINE SOURCELINE
                        630 ; tvp6kdrv.c  394                               buffer[3] = 0xFF & NTSC_Gain_V;   // [5C]       /
                            / was 0x6B, 0x6E
000181 94780385         632         MOV.B   [R7+3],#085H
                        633 ; tvp6kdrv.c  395                               buffer[4] = NTSC_Black_level | ((NTSC_Gain_U & 0x
                            100) >> 1);   // [5D]
000185 947804C1         635         MOV.B   [R7+4],#0C1H
                        636 ; tvp6kdrv.c  396                               buffer[5] = NTSC_Blank_level | ((NTSC_Gain_V & 0x
                            100) >> 1);   // [5E]
000189 947805B8         638         MOV.B   [R7+5],#0B8H
                        639 ; tvp6kdrv.c  397                               buffer[6] = 0xFF & NTSC_Gain_Y;  // [5F]        /
                            / was 0x2E
00018D 94780630         641         MOV.B   [R7+6],#030H
                        642 ; tvp6kdrv.c  398                               buffer[7] = 0x00 | ((NTSC_Gain_Y & 0x100) >> 3); 
                             // [60]
000191 94780720         644         MOV.B   [R7+7],#020H
                        645 ; tvp6kdrv.c  399                               buffer[8] = 0x41;    // [61]
000195 94780841         647         MOV.B   [R7+8],#041H
                        648 ; tvp6kdrv.c  400                               buffer[9] = NTSC_COLOR_BURST_AMP;  // [62]       
                                    // was 0x38
000199 9478093C         650         MOV.B   [R7+9],#03CH
                        651 ; tvp6kdrv.c  401                               buffer[10] = 0x1F;    // [63]
00019D 94780A1F         653         MOV.B   [R7+10],#01FH
                        654 ; tvp6kdrv.c  402                               buffer[11] = 0x7C;    // [64]
0001A1 94780B7C         656         MOV.B   [R7+11],#07CH
                        657 ; tvp6kdrv.c  403                               buffer[12] = 0xF0;    // [65]
0001A5 94780CF0         659         MOV.B   [R7+12],#0F0H
                        660 ; tvp6kdrv.c  404                               buffer[13] = 0x21;    // [66]
0001A9 94780D21         662         MOV.B   [R7+13],#021H
                        663 ; tvp6kdrv.c  405                               TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_P
                            TV);
0001AD 912800           665         MOV.B   R1L,#00H
0001B0 8935             666         MOV.W   R3,R5
0001B2 8924             667         MOV.W   R2,R4
0001B4 91180E           668         MOV.B   R0H,#0EH
0001B7 910840           669         MOV.B   R0L,#040H
                        670         CALL    _TransmitIIC
0001BA C4rrrrrr        +670 ;       FCALL   _TransmitIIC
                        671 ; tvp6kdrv.c  406       
                        672 ; tvp6kdrv.c  407                               buffer[0] = 0x67;
0001BE 927867           674         MOV.B   [R7],#067H
                        675 ; tvp6kdrv.c  408                               buffer[1] = 0x00;
0001C1 B47001           677         MOV.B   [R7+1],#00H
                        678 ; tvp6kdrv.c  409                               buffer[2] = 0x00;
0001C4 B47002           680         MOV.B   [R7+2],#00H
                        681 ; tvp6kdrv.c  410                               buffer[3] = 0x00;
0001C7 B47003           683         MOV.B   [R7+3],#00H
                        684 ; tvp6kdrv.c  411                               buffer[4] = 0x00;
0001CA B47004           686         MOV.B   [R7+4],#00H
                        687 ; tvp6kdrv.c  412                               buffer[5] = 0x11;
0001CD 94780511         689         MOV.B   [R7+5],#011H
                        690 ; tvp6kdrv.c  413                               buffer[6] = 0xA0;
0001D1 947806A0         692         MOV.B   [R7+6],#0A0H
                        693 ; tvp6kdrv.c  414                               buffer[7] = 0x00;
0001D5 B47007           695         MOV.B   [R7+7],#00H
                        696 ; tvp6kdrv.c  415                               buffer[8] = 0x0A;
0001D8 9478080A         698         MOV.B   [R7+8],#0AH
                        699 ; tvp6kdrv.c  416                               buffer[9] = 0x01;
0001DC B47109           701         MOV.B   [R7+9],#01H
                        702 ; tvp6kdrv.c  417                               buffer[10] = 0xC0;
0001DF 94780AC0         704         MOV.B   [R7+10],#0C0H
                        705 ; tvp6kdrv.c  418                               buffer[11] = 0x82;
0001E3 94780B82         707         MOV.B   [R7+11],#082H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  13

ADDR   CODE            LINE SOURCELINE
                        708 ; tvp6kdrv.c  419                               buffer[12] = 0x46;
0001E7 94780C46         710         MOV.B   [R7+12],#046H
                        711 ; tvp6kdrv.c  420                               buffer[13] = 0x30;
0001EB 94780D30         713         MOV.B   [R7+13],#030H
0001EF 912800           714         MOV.B   R1L,#00H
0001F2 8935             715         MOV.W   R3,R5
0001F4 8924             716         MOV.W   R2,R4
0001F6 910840           717         MOV.B   R0L,#040H
                        718 ; tvp6kdrv.c  421       
                        719 ; tvp6kdrv.c  422                               TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_P
                            TV);
0001F9 91180E           721         MOV.B   R0H,#0EH
                        722         CALL    _TransmitIIC
0001FC C4rrrrrr        +722 ;       FCALL   _TransmitIIC
                        723 ; tvp6kdrv.c  423       
                        724 ; tvp6kdrv.c  424                               buffer[0] = 0x77;
000200 927877           726         MOV.B   [R7],#077H
                        727 ; tvp6kdrv.c  425                               buffer[1] = 0x82;
000203 94780182         729         MOV.B   [R7+1],#082H
                        730 ; tvp6kdrv.c  426                               buffer[2] = 0x46;
000207 94780246         732         MOV.B   [R7+2],#046H
                        733 ; tvp6kdrv.c  427                               buffer[3] = 0x30;
00020B 94780330         735         MOV.B   [R7+3],#030H
                        736 ; tvp6kdrv.c  428                               buffer[4] = 0x0C;
00020F 9478040C         738         MOV.B   [R7+4],#0CH
                        739 ; tvp6kdrv.c  429                               buffer[5] = 0x11;
000213 94780511         741         MOV.B   [R7+5],#011H
                        742 ; tvp6kdrv.c  430                               buffer[6] = 0x03;
000217 B47306           744         MOV.B   [R7+6],#03H
                        745 ; tvp6kdrv.c  431                               buffer[7] = 0x22;
00021A 94780722         747         MOV.B   [R7+7],#022H
                        748 ; tvp6kdrv.c  432                               buffer[8] = 0x0A;
00021E 9478080A         750         MOV.B   [R7+8],#0AH
                        751 ; tvp6kdrv.c  433                               TransmitIIC( TVP6K_IIC_address, 9, buffer, IIC_PT
                            V);
000222 911809           753         MOV.B   R0H,#09H
000225 912800           754         MOV.B   R1L,#00H
000228 8935             755         MOV.W   R3,R5
00022A 8924             756         MOV.W   R2,R4
00022C 910840           757         MOV.B   R0L,#040H
                        758         CALL    _TransmitIIC
00022F C4rrrrrr        +758 ;       FCALL   _TransmitIIC
                        759 ; tvp6kdrv.c  434       
                        760 ; tvp6kdrv.c  435                               buffer[0] = 0x90;
000233 927890           762         MOV.B   [R7],#090H
                        763 ; tvp6kdrv.c  436                               buffer[1] = 0x00;
000236 B47001           765         MOV.B   [R7+1],#00H
                        766 ; tvp6kdrv.c  437                               buffer[2] = 0x00;
000239 B47002           768         MOV.B   [R7+2],#00H
                        769 ; tvp6kdrv.c  438                               buffer[3] = 0x00;
00023C B47003           771         MOV.B   [R7+3],#00H
                        772 ; tvp6kdrv.c  439                               buffer[4] = 0x00;
00023F B47004           774         MOV.B   [R7+4],#00H
                        775 ; tvp6kdrv.c  440                               buffer[5] = 0x00;
000242 B47005           777         MOV.B   [R7+5],#00H
                        778 ; tvp6kdrv.c  441                               buffer[6] = 0x00;
000245 B47006           780         MOV.B   [R7+6],#00H
                        781 ; tvp6kdrv.c  442                               buffer[7] = 0x00;
000248 B47007           783         MOV.B   [R7+7],#00H
                        784 ; tvp6kdrv.c  443                               buffer[8] = 0x00;
00024B B47008           786         MOV.B   [R7+8],#00H
                        787 ; tvp6kdrv.c  444                               buffer[9] = 0x00;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  14

ADDR   CODE            LINE SOURCELINE
00024E B47009           789         MOV.B   [R7+9],#00H
                        790 ; tvp6kdrv.c  445                               buffer[10] = 0x00;
000251 B4700A           792         MOV.B   [R7+10],#00H
                        793 ; tvp6kdrv.c  446                               buffer[11] = 0x00;
000254 B4700B           795         MOV.B   [R7+11],#00H
                        796 ; tvp6kdrv.c  447                               buffer[12] = 0x00;
000257 B4700C           798         MOV.B   [R7+12],#00H
                        799 ; tvp6kdrv.c  448                               buffer[13] = 0x00;
00025A B4700D           801         MOV.B   [R7+13],#00H
                        802 ; tvp6kdrv.c  449                               buffer[14] = 0x00;
00025D B4700E           804         MOV.B   [R7+14],#00H
                        805 ; tvp6kdrv.c  450       
                        806 ; tvp6kdrv.c  451                               TransmitIIC( TVP6K_IIC_address, 15, buffer, IIC_P
                            TV);
000260 912800           808         MOV.B   R1L,#00H
000263 8935             809         MOV.W   R3,R5
000265 8924             810         MOV.W   R2,R4
000267 91180F           811         MOV.B   R0H,#0FH
00026A 910840           812         MOV.B   R0L,#040H
                        813         CALL    _TransmitIIC
00026D C4rrrrrr        +813 ;       FCALL   _TransmitIIC
                        814 ; tvp6kdrv.c  452       
                        815 ; tvp6kdrv.c  453                               buffer[0] = 0x3A;
000271 92783A           817         MOV.B   [R7],#03AH
                        818 ; tvp6kdrv.c  454                               buffer[1] = 0x0F;
000274 9478010F         820         MOV.B   [R7+1],#0FH
                        821 ; tvp6kdrv.c  455                               TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PT
                            V);
000278 911802           823         MOV.B   R0H,#02H
00027B 910840           824         MOV.B   R0L,#040H
00027E 8935             825         MOV.W   R3,R5
000280 8924             826         MOV.W   R2,R4
000282 912800           827         MOV.B   R1L,#00H
                        828         CALL    _TransmitIIC
000285 C4rrrrrr        +828 ;       FCALL   _TransmitIIC
                        829 ; tvp6kdrv.c  456                       }
                        831         BR      _6
000289 D50099          +831         JMP.L   _6
000289 D50099          +831         JMP.L   _6
00028C                  832 _4:
                        833 ; tvp6kdrv.c  457                       else
                        834 ; tvp6kdrv.c  458                       {
                        835 ; tvp6kdrv.c  459                               // NTSC J
                        836 ; tvp6kdrv.c  460       
                        837 ; tvp6kdrv.c  461                               buffer[0] = 0x3A;
00028C 92783A           839         MOV.B   [R7],#03AH
                        840 ; tvp6kdrv.c  462                               buffer[1] = 0x8F;
00028F 9478018F         842         MOV.B   [R7+1],#08FH
                        843 ; tvp6kdrv.c  463                               TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PT
                            V);
000293 91A8rr           845         MOV.B   R5L,#SEG( __lc_bs )
000296 71BB             846         XOR.B   R5H,R5H
000298 8947             847         MOV.W   R4,R7
00029A 912800           848         MOV.B   R1L,#00H
00029D 8935             849         MOV.W   R3,R5
00029F 8924             850         MOV.W   R2,R4
0002A1 911802           851         MOV.B   R0H,#02H
0002A4 910840           852         MOV.B   R0L,#040H
                        853         CALL    _TransmitIIC
0002A7 C4rrrrrr        +853 ;       FCALL   _TransmitIIC
                        854 ; tvp6kdrv.c  464       
                        855 ; tvp6kdrv.c  465                               buffer[0] = 0x5A;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  15

ADDR   CODE            LINE SOURCELINE
0002AB 92785A           857         MOV.B   [R7],#05AH
                        858 ; tvp6kdrv.c  466                               buffer[1] = 0x00;
0002AE B47001           860         MOV.B   [R7+1],#00H
                        861 ; tvp6kdrv.c  467                               buffer[2] = 0xFF & JNTSC_Gain_U;          // [5B]
                                    // was 0x01, 0x03
0002B1 9478022B         863         MOV.B   [R7+2],#02BH
                        864 ; tvp6kdrv.c  468                               buffer[3] = 0xFF & JNTSC_Gain_V;          // [5C]
                                    // was 0x6B, 0x6E
0002B5 947803A3         866         MOV.B   [R7+3],#0A3H
                        867 ; tvp6kdrv.c  469                               buffer[4] = JNTSC_Black_level | ((JNTSC_Gain_U & 
                            0x100) >> 1);   // [5D]
0002B9 947804AD         869         MOV.B   [R7+4],#0ADH
                        870 ; tvp6kdrv.c  470                               buffer[5] = JNTSC_Blank_level | ((JNTSC_Gain_V & 
                            0x100) >> 1);   // [5E]
0002BD 947805B8         872         MOV.B   [R7+5],#0B8H
                        873 ; tvp6kdrv.c  471                               buffer[6] = 0xFF & JNTSC_Gain_Y;  // [5F]       /
                            / was 0x2E
0002C1 94780646         875         MOV.B   [R7+6],#046H
                        876 ; tvp6kdrv.c  472                               buffer[7] = 0x00 | ((JNTSC_Gain_Y & 0x100) >> 3);
                              // [60]
0002C5 94780720         878         MOV.B   [R7+7],#020H
                        879 ; tvp6kdrv.c  473                               buffer[8] = 0x41;    // [61]
0002C9 94780841         881         MOV.B   [R7+8],#041H
                        882 ; tvp6kdrv.c  474                               buffer[9] = JNTSC_COLOR_BURST_AMP;  // [62]      
                                     // was 0x38
0002CD 9478093C         884         MOV.B   [R7+9],#03CH
                        885 ; tvp6kdrv.c  475                               buffer[10] = 0x1F;    // [63]
0002D1 94780A1F         887         MOV.B   [R7+10],#01FH
                        888 ; tvp6kdrv.c  476                               buffer[11] = 0x7C;    // [64]
0002D5 94780B7C         890         MOV.B   [R7+11],#07CH
                        891 ; tvp6kdrv.c  477                               buffer[12] = 0xF0;    // [65]
0002D9 94780CF0         893         MOV.B   [R7+12],#0F0H
                        894 ; tvp6kdrv.c  478                               buffer[13] = 0x21;    // [66]
0002DD 94780D21         896         MOV.B   [R7+13],#021H
                        897 ; tvp6kdrv.c  479                               TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_P
                            TV);
0002E1 912800           899         MOV.B   R1L,#00H
0002E4 8935             900         MOV.W   R3,R5
0002E6 8924             901         MOV.W   R2,R4
0002E8 91180E           902         MOV.B   R0H,#0EH
0002EB 910840           903         MOV.B   R0L,#040H
                        904         CALL    _TransmitIIC
0002EE C4rrrrrr        +904 ;       FCALL   _TransmitIIC
                        905 ; tvp6kdrv.c  480       
                        906 ; tvp6kdrv.c  481                               buffer[0] = 0x67;
0002F2 927867           908         MOV.B   [R7],#067H
                        909 ; tvp6kdrv.c  482                               buffer[1] = 0x00;
0002F5 B47001           911         MOV.B   [R7+1],#00H
                        912 ; tvp6kdrv.c  483                               buffer[2] = 0x00;
0002F8 B47002           914         MOV.B   [R7+2],#00H
                        915 ; tvp6kdrv.c  484                               buffer[3] = 0x00;
0002FB B47003           917         MOV.B   [R7+3],#00H
                        918 ; tvp6kdrv.c  485                               buffer[4] = 0x00;
0002FE B47004           920         MOV.B   [R7+4],#00H
                        921 ; tvp6kdrv.c  486                               buffer[5] = 0x11;
000301 94780511         923         MOV.B   [R7+5],#011H
                        924 ; tvp6kdrv.c  487                               buffer[6] = 0xA0;
000305 947806A0         926         MOV.B   [R7+6],#0A0H
                        927 ; tvp6kdrv.c  488                               buffer[7] = 0x00;
000309 B47007           929         MOV.B   [R7+7],#00H
                        930 ; tvp6kdrv.c  489                               buffer[8] = 0x0A;
00030C 9478080A         932         MOV.B   [R7+8],#0AH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  16

ADDR   CODE            LINE SOURCELINE
                        933 ; tvp6kdrv.c  490                               buffer[9] = 0x01;
000310 B47109           935         MOV.B   [R7+9],#01H
                        936 ; tvp6kdrv.c  491                               buffer[10] = 0xC0;
000313 94780AC0         938         MOV.B   [R7+10],#0C0H
                        939 ; tvp6kdrv.c  492                               buffer[11] = 0x82;
000317 94780B82         941         MOV.B   [R7+11],#082H
                        942 ; tvp6kdrv.c  493                               buffer[12] = 0x46;
00031B 94780C46         944         MOV.B   [R7+12],#046H
                        945 ; tvp6kdrv.c  494                               buffer[13] = 0x30;
00031F 94780D30         947         MOV.B   [R7+13],#030H
000323 912800           948         MOV.B   R1L,#00H
000326 8935             949         MOV.W   R3,R5
000328 8924             950         MOV.W   R2,R4
00032A 910840           951         MOV.B   R0L,#040H
                        952 ; tvp6kdrv.c  495       
                        953 ; tvp6kdrv.c  496                               TransmitIIC( TVP6K_IIC_address, 14, buffer, IIC_P
                            TV);
00032D 91180E           955         MOV.B   R0H,#0EH
                        956         CALL    _TransmitIIC
000330 C4rrrrrr        +956 ;       FCALL   _TransmitIIC
                        957 ; tvp6kdrv.c  497       
                        958 ; tvp6kdrv.c  498                               buffer[0] = 0x77;
000334 927877           960         MOV.B   [R7],#077H
                        961 ; tvp6kdrv.c  499                               buffer[1] = 0x82;
000337 94780182         963         MOV.B   [R7+1],#082H
                        964 ; tvp6kdrv.c  500                               buffer[2] = 0x46;
00033B 94780246         966         MOV.B   [R7+2],#046H
                        967 ; tvp6kdrv.c  501                               buffer[3] = 0x30;
00033F 94780330         969         MOV.B   [R7+3],#030H
                        970 ; tvp6kdrv.c  502                               buffer[4] = 0x0C;
000343 9478040C         972         MOV.B   [R7+4],#0CH
                        973 ; tvp6kdrv.c  503                               buffer[5] = 0x11;
000347 94780511         975         MOV.B   [R7+5],#011H
                        976 ; tvp6kdrv.c  504                               buffer[6] = 0x03;
00034B B47306           978         MOV.B   [R7+6],#03H
                        979 ; tvp6kdrv.c  505                               buffer[7] = 0x22;
00034E 94780722         981         MOV.B   [R7+7],#022H
                        982 ; tvp6kdrv.c  506                               buffer[8] = 0x0A;
000352 9478080A         984         MOV.B   [R7+8],#0AH
                        985 ; tvp6kdrv.c  507                               TransmitIIC( TVP6K_IIC_address, 9, buffer, IIC_PT
                            V);
000356 911809           987         MOV.B   R0H,#09H
000359 912800           988         MOV.B   R1L,#00H
00035C 8935             989         MOV.W   R3,R5
00035E 8924             990         MOV.W   R2,R4
000360 910840           991         MOV.B   R0L,#040H
                        992         CALL    _TransmitIIC
000363 C4rrrrrr        +992 ;       FCALL   _TransmitIIC
                        993 ; tvp6kdrv.c  508       
                        994 ; tvp6kdrv.c  509                               buffer[0] = 0x90;
000367 927890           996         MOV.B   [R7],#090H
                        997 ; tvp6kdrv.c  510                               buffer[1] = 0x00;
00036A B47001           999         MOV.B   [R7+1],#00H
                       1000 ; tvp6kdrv.c  511                               buffer[2] = 0x00;
00036D B47002          1002         MOV.B   [R7+2],#00H
                       1003 ; tvp6kdrv.c  512                               buffer[3] = 0x00;
000370 B47003          1005         MOV.B   [R7+3],#00H
                       1006 ; tvp6kdrv.c  513                               buffer[4] = 0x00;
000373 B47004          1008         MOV.B   [R7+4],#00H
                       1009 ; tvp6kdrv.c  514                               buffer[5] = 0x00;
000376 B47005          1011         MOV.B   [R7+5],#00H
                       1012 ; tvp6kdrv.c  515                               buffer[6] = 0x00;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  17

ADDR   CODE            LINE SOURCELINE
000379 B47006          1014         MOV.B   [R7+6],#00H
                       1015 ; tvp6kdrv.c  516                               buffer[7] = 0x00;
00037C B47007          1017         MOV.B   [R7+7],#00H
                       1018 ; tvp6kdrv.c  517                               buffer[8] = 0x00;
00037F B47008          1020         MOV.B   [R7+8],#00H
                       1021 ; tvp6kdrv.c  518                               buffer[9] = 0x00;
000382 B47009          1023         MOV.B   [R7+9],#00H
                       1024 ; tvp6kdrv.c  519                               buffer[10] = 0x00;
000385 B4700A          1026         MOV.B   [R7+10],#00H
                       1027 ; tvp6kdrv.c  520                               buffer[11] = 0x00;
000388 B4700B          1029         MOV.B   [R7+11],#00H
                       1030 ; tvp6kdrv.c  521                               buffer[12] = 0x00;
00038B B4700C          1032         MOV.B   [R7+12],#00H
                       1033 ; tvp6kdrv.c  522                               buffer[13] = 0x00;
00038E B4700D          1035         MOV.B   [R7+13],#00H
                       1036 ; tvp6kdrv.c  523                               buffer[14] = 0x00;
000391 B4700E          1038         MOV.B   [R7+14],#00H
                       1039 ; tvp6kdrv.c  524       
                       1040 ; tvp6kdrv.c  525                               TransmitIIC( TVP6K_IIC_address, 15, buffer, IIC_P
                            TV);
000394 912800          1042         MOV.B   R1L,#00H
000397 8935            1043         MOV.W   R3,R5
000399 8924            1044         MOV.W   R2,R4
00039B 91180F          1045         MOV.B   R0H,#0FH
00039E 910840          1046         MOV.B   R0L,#040H
                       1047         CALL    _TransmitIIC
0003A1 C4rrrrrr       +1047 ;       FCALL   _TransmitIIC
                       1048 ; tvp6kdrv.c  526       
                       1049 ; tvp6kdrv.c  527                               buffer[0] = 0x3A;
0003A5 92783A          1051         MOV.B   [R7],#03AH
                       1052 ; tvp6kdrv.c  528                               buffer[1] = 0x0F;
0003A8 9478010F        1054         MOV.B   [R7+1],#0FH
                       1055 ; tvp6kdrv.c  529                               TransmitIIC( TVP6K_IIC_address, 2, buffer, IIC_PT
                            V);
0003AC 911802          1057         MOV.B   R0H,#02H
0003AF 910840          1058         MOV.B   R0L,#040H
0003B2 8935            1059         MOV.W   R3,R5
0003B4 8924            1060         MOV.W   R2,R4
0003B6 912800          1061         MOV.B   R1L,#00H
                       1062         CALL    _TransmitIIC
0003B9 C4rrrrrr       +1062 ;       FCALL   _TransmitIIC
                       1063 ; tvp6kdrv.c  530                       }
                       1064 ; tvp6kdrv.c  531               }
0003BE                 1066 _6:
                       1067 ; tvp6kdrv.c  532       
                       1068 ; tvp6kdrv.c  533               return( OK);
0003BE 9908FFFF        1070         MOV.W   R0,#0FFFFH
                       1071 ; tvp6kdrv.c  534       }
0003C2 99700010        1073         ADD.W   R7,#010H
0003C6 2F30            1075         POP.W   R4, R5
0003C8 D680            1077         RET
                       1085         EXTRN   HCODE(_TransmitIIC)
                       1086         EXTRN   IDATA(__lc_bs)
                       1087         EXTRN   DATA(__lc_ub_xvwbuffer)
                       1088         EXTRN   DATA(__lc_ue_xvwbuffer)
                       1089         CALLS   'tvp6k_init', 'tvp6k_system'
                       1090         CALLS   'tvp6k_system', 'TransmitIIC'
