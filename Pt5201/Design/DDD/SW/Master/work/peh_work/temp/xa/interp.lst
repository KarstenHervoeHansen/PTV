XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
F:\PTV\Pt5201\Design\DDD\SW\Master\work\peh_work\temp\xa\interp.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -Ic:\cxa\rtxc\xa\include -I. -Ml
                          3 ;          -O2 -s
                          5 $NOZPAGE
                          6         NAME    INTERP
                         10 ; interp.c    1 /****************************************************************************/
                         11 ; interp.c    2 /* MODULE:                                                                  */
                         12 ; interp.c    3 /*   interp.c - Interpreter module RS232 remote.                            */
                         13 ; interp.c    4 /****************************************************************************/
                         14 ; interp.c    5 /* FUNCTIONS:                                                               */
                         15 ; interp.c    6 /*                                                                          */
                         16 ; interp.c    7 /*                                                                          */
                         17 ; interp.c    8 /* TASKS:                                                                   */
                         18 ; interp.c    9         void Interpreter(void);
                         19 ; interp.c   10 /*                                                                          */
                         20 ; interp.c   11 /* NOTES:                                                                   */
                         21 ; interp.c   12 /*                                                                          */
                         22 ; interp.c   13 /****************************************************************************/
                         23 ; interp.c   14 /*
                         24 ; interp.c   15  *   TK-PTV software for PT5765    
                         25 ; interp.c   16  *   Copyright (c) 
                         26 ; interp.c   17  *   ProTeleVision Technologies A/S.
                         27 ; interp.c   18  *   ALL RIGHTS RESERVED
                         28 ; interp.c   19 */
                         29 ; interp.c   20 /****************************************************************************/
                         30 ; interp.c   21 
                         31 ; interp.c   22 
                         32 ; interp.c   23 //#include "interp.h"
                         33 ; interp.c   24 #include "rs232.h"
                        367 ; interp.c   25 
                        368 ; interp.c   26 
                        369 ; interp.c   27 extern void CmdHandler( char c);
                        370 ; interp.c   28 
                        371 ; interp.c   29 
                        372 ; interp.c   30 /*  Task  */
                        373 ; interp.c   31 void Interpreter(void)
                        374 ; interp.c   32 {
000000                  375 INTERP_PR       SEGMENT HCODE
000000                  376         RSEG    INTERP_PR
                        377         ALIGN   1
000000                  379 INTERP_CLR_FA   SEGMENT HDATA INSEGMENT CLEAR
000000                  380         RSEG    INTERP_CLR_FA
000000 RESERVED         381 _3:     DS      1
000000
                        382         PUBLIC  _Interpreter
000000                  383         RSEG    INTERP_PR
000000                  383         RSEG    INTERP_PR
000000                  384 _Interpreter:
                        389 ; interp.c   33  static char ch;
                        390 ; interp.c   34 
                        391 ; interp.c   35  for(;;)
000000                  393 _4:
                        394 ; interp.c   36  {
                        395 ; interp.c   37   ch=rs232getchar();
                        397         CALL    _rs232getchar
000000 C4rrrrrr        +397 ;       FCALL   _rs232getchar
000004 8910             398         MOV.W   R1,R0
000006 964842rr         399         MOV.B   ES,#SEG( _3 )
00000A 9908rrrr         400         MOV.W   R0,#SOF( _3 )
00000E 8228             401         MOV.B   [R0],R1L
                        402 ; interp.c   38 
                        403 ; interp.c   39   CmdHandler(ch);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
000010 8102             405         MOV.B   R0L,R1L
                        406         CALL    _CmdHandler
000012 C4rrrrrr        +406 ;       FCALL   _CmdHandler
000016 FEF4             408         BR      _4
                        409 ; interp.c   40  }
                        410 ; interp.c   41 }
000018 D680             412         RET
                        414 ; interp.c   42   
                        419         EXTRN   HCODE(_CmdHandler)
                        422         EXTRN   HCODE(_rs232getchar)
                        423         EXTRN   DATA(__lc_ub_xvwbuffer)
                        424         EXTRN   DATA(__lc_ue_xvwbuffer)
                        425         CALLS   'Interpreter', 'rs232getchar'
                        426         CALLS   'Interpreter', 'CmdHandler'
