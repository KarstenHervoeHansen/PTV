XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\Master\Source\MAKE\1_0\temp\xa\interp.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -I..\..\rtxcdef\xa
                          3 ;          -I..\..\rtxc\xa\include -I..\..\code\include\1_0 -I..\..\app_spec\xa
                          4 ;          -Ml -O2 -s
                          6 $NOZPAGE
                          7         NAME    INTERP
                         11 ; interp.c    1 /****************************************************************************/
                         12 ; interp.c    2 /* MODULE:                                                                  */
                         13 ; interp.c    3 /*   interp.c - Interpreter module RS232 remote.                            */
                         14 ; interp.c    4 /****************************************************************************/
                         15 ; interp.c    5 /* FUNCTIONS:                                                               */
                         16 ; interp.c    6 /*                                                                          */
                         17 ; interp.c    7 /*                                                                          */
                         18 ; interp.c    8 /* TASKS:                                                                   */
                         19 ; interp.c    9         void Interpreter(void);
                         20 ; interp.c   10 /*                                                                          */
                         21 ; interp.c   11 /* NOTES:                                                                   */
                         22 ; interp.c   12 /*                                                                          */
                         23 ; interp.c   13 /****************************************************************************/
                         24 ; interp.c   14 /*
                         25 ; interp.c   15  *   TK-PTV software for PT5765    
                         26 ; interp.c   16  *   Copyright (c) 
                         27 ; interp.c   17  *   ProTeleVision Technologies A/S.
                         28 ; interp.c   18  *   ALL RIGHTS RESERVED
                         29 ; interp.c   19 */
                         30 ; interp.c   20 /****************************************************************************/
                         31 ; interp.c   21 
                         32 ; interp.c   22 
                         33 ; interp.c   23 //#include "interp.h"
                         34 ; interp.c   24 #include "rs232.h"
                        368 ; interp.c   25 
                        369 ; interp.c   26 
                        370 ; interp.c   27 extern void CmdHandler( char c);
                        371 ; interp.c   28 
                        372 ; interp.c   29 
                        373 ; interp.c   30 /*  Task  */
                        374 ; interp.c   31 void Interpreter(void)
                        375 ; interp.c   32 {
000000                  376 INTERP_PR       SEGMENT HCODE
000000                  377         RSEG    INTERP_PR
                        378         ALIGN   1
000000                  380 INTERP_CLR_FA   SEGMENT HDATA INSEGMENT CLEAR
000000                  381         RSEG    INTERP_CLR_FA
000000 RESERVED         382 _3:     DS      1
000000
                        383         PUBLIC  _Interpreter
000000                  384         RSEG    INTERP_PR
000000                  384         RSEG    INTERP_PR
000000                  385 _Interpreter:
                        390 ; interp.c   33  static char ch;
                        391 ; interp.c   34 
                        392 ; interp.c   35  for(;;)
000000                  394 _4:
                        395 ; interp.c   36  {
                        396 ; interp.c   37   ch=rs232getchar();
                        398         CALL    _rs232getchar
000000 C4rrrrrr        +398 ;       FCALL   _rs232getchar
000004 8910             399         MOV.W   R1,R0
000006 964842rr         400         MOV.B   ES,#SEG( _3 )
00000A 9908rrrr         401         MOV.W   R0,#SOF( _3 )
00000E 8228             402         MOV.B   [R0],R1L
                        403 ; interp.c   38 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                        404 ; interp.c   39   CmdHandler(ch);
000010 8102             406         MOV.B   R0L,R1L
                        407         CALL    _CmdHandler
000012 C4rrrrrr        +407 ;       FCALL   _CmdHandler
000016 FEF4             409         BR      _4
                        410 ; interp.c   40  }
                        411 ; interp.c   41 }
000018 D680             413         RET
                        415 ; interp.c   42   
                        420         EXTRN   HCODE(_CmdHandler)
                        423         EXTRN   HCODE(_rs232getchar)
                        424         EXTRN   DATA(__lc_ub_xvwbuffer)
                        425         EXTRN   DATA(__lc_ue_xvwbuffer)
                        426         CALLS   'Interpreter', 'rs232getchar'
                        427         CALLS   'Interpreter', 'CmdHandler'
