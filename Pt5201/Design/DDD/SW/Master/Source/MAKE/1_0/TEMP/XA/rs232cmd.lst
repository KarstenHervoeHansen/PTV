XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\Master\Source\MAKE\1_0\temp\xa\rs232cmd.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -I..\..\rtxcdef\xa
                          3 ;          -I..\..\rtxc\xa\include -I..\..\code\include\1_0 -I..\..\app_spec\xa
                          4 ;          -Ml -O2 -s
                          6 $NOZPAGE
                          7         NAME    RS232CMD
                         11 ; rs232cmd.c    1       /* MODULE:                                                               
                               */
                         12 ; rs232cmd.c    2       /*   r232cmd.c - RS232 remote commands.                                  
                                             */
                         13 ; rs232cmd.c    3       /************************************************************************
                            ****/
                         14 ; rs232cmd.c    4       /* FUNCTIONS:                                                            
                               */
                         15 ; rs232cmd.c    5       /*                                                                       
                               */
                         16 ; rs232cmd.c    6       /* TASKS:                                                                
                               */
                         17 ; rs232cmd.c    7       /*                                                                       
                               */
                         18 ; rs232cmd.c    8       /* NOTES:                                                                
                               */
                         19 ; rs232cmd.c    9       /*                                                                       
                               */
                         20 ; rs232cmd.c   10       /************************************************************************
                            ****/
                         21 ; rs232cmd.c   11       /*
                         22 ; rs232cmd.c   12        *   PTV software for PT5201
                         23 ; rs232cmd.c   13        *   Copyright (c) 
                         24 ; rs232cmd.c   14        *   ProTeleVision Technologies A/S.
                         25 ; rs232cmd.c   15        *   ALL RIGHTS RESERVED
                         26 ; rs232cmd.c   16       */
                         27 ; rs232cmd.c   17       /************************************************************************
                            ****/
                         28 ; rs232cmd.c   18       
                         29 ; rs232cmd.c   19       /************************************************************************
                            ****/
                         30 ; rs232cmd.c   20       /* Include files:                                                        
                                                                                                                             
                                     */
                         31 ; rs232cmd.c   21       
                         32 ; rs232cmd.c   22       #include <string.h>
                         36 ; rs232cmd.c   23       #include <ctype.h>
                         39 ; rs232cmd.c   24       #include <stdio.h>
                         59 ; rs232cmd.c   25       #include <stdlib.h>
                         73 ; rs232cmd.c   26       #include <math.h>
                         76 ; rs232cmd.c   27       
                         77 ; rs232cmd.c   28       #include "config.h"
                         80 ; rs232cmd.c   29       #include "define.h"
                         83 ; rs232cmd.c   30       #include "rtxcobj.h"
                        408 ; rs232cmd.c   31       #include "rs232par.h"
                        411 ; rs232cmd.c   32       #include "rs232err.h"
                        414 ; rs232cmd.c   33       #include "rs232cmd.h"
                        419 ; rs232cmd.c   34       #include "util.h"
                        422 ; rs232cmd.c   35       #include "rs232.h"
                        429 ; rs232cmd.c   36       #include "i2c_drv.h"
                        432 ; rs232cmd.c   37       #include "sio0drv.h"
                        439 ; rs232cmd.c   38       #include "instru.h"
                        542 ; rs232cmd.c   39       #include "tables.h"
                        545 ; rs232cmd.c   40       #include "genlock.h"
                        548 ; rs232cmd.c   41       #include "bb.h"
                        551 ; rs232cmd.c   42       #include "cbar.h"
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                        554 ; rs232cmd.c   43       #include "audio.h"
                        557 ; rs232cmd.c   44       #include "plddrv.h"
                        560 ; rs232cmd.c   45       #include "unitprg.h"
                        567 ; rs232cmd.c   46       
                        568 ; rs232cmd.c   47       
                        569 ; rs232cmd.c   48       UC code MasterSWVersion                                 = 10;
000000                  570 RS232CMD_RO     SEGMENT HCODE ROMDATA
000000                  571         RSEG    RS232CMD_RO
                        574         PUBLIC  _MasterSWVersion
000000                  575 _MasterSWVersion:
                        576 ; rs232cmd.c   49       
                        577 ; rs232cmd.c   50       char code SystemVersionTxt[]                    = "1995.0";
000000 0A               578         DB      00AH
                        582         PUBLIC  _SystemVersionTxt
000001                  583 _SystemVersionTxt:
                        584 ; rs232cmd.c   51       char code PasswordText[]                                = "PASS5201";
000001 313939352E3000   585         DB      031H,039H,039H,035H,02EH,030H,000H
                        588         PUBLIC  _PasswordText
000008                  589 _PasswordText:
                        590 ; rs232cmd.c   52       
                        591 ; rs232cmd.c   53       char code CLSCmdTxt[]                   = "CLS";
000008 50415353353230   592         DB      050H,041H,053H,053H,035H,032H,030H,031H,000H
       3100                 
                        595         PUBLIC  _CLSCmdTxt
000011                  596 _CLSCmdTxt:
                        597 ; rs232cmd.c   54       char code ESECmdTxt[]                   = "ESE";
000011 434C5300         598         DB      043H,04CH,053H,000H
                        601         PUBLIC  _ESECmdTxt
000015                  602 _ESECmdTxt:
                        603 ; rs232cmd.c   55       char code ESRCmdTxt[]                   = "ESR";
000015 45534500         604         DB      045H,053H,045H,000H
                        607         PUBLIC  _ESRCmdTxt
000019                  608 _ESRCmdTxt:
                        609 ; rs232cmd.c   56       char code OPCCmdTxt[]                   = "OPC";
000019 45535200         610         DB      045H,053H,052H,000H
                        613         PUBLIC  _OPCCmdTxt
00001D                  614 _OPCCmdTxt:
                        615 ; rs232cmd.c   57       char code SRECmdTxt[]                   = "SRE";
00001D 4F504300         616         DB      04FH,050H,043H,000H
                        619         PUBLIC  _SRECmdTxt
000021                  620 _SRECmdTxt:
                        621 ; rs232cmd.c   58       char code STBCmdTxt[]                   = "STB";
000021 53524500         622         DB      053H,052H,045H,000H
                        625         PUBLIC  _STBCmdTxt
000025                  626 _STBCmdTxt:
                        627 ; rs232cmd.c   59       char code TSTCmdTxt[]                   = "TST";
000025 53544200         628         DB      053H,054H,042H,000H
                        631         PUBLIC  _TSTCmdTxt
000029                  632 _TSTCmdTxt:
                        633 ; rs232cmd.c   60       char code WAICmdTxt[]                   = "WAI";
000029 54535400         634         DB      054H,053H,054H,000H
                        637         PUBLIC  _WAICmdTxt
00002D                  638 _WAICmdTxt:
                        639 ; rs232cmd.c   61       char code RSTCmdTxt[]                   = "RST";
00002D 57414900         640         DB      057H,041H,049H,000H
                        643         PUBLIC  _RSTCmdTxt
000031                  644 _RSTCmdTxt:
                        645 ; rs232cmd.c   62       char code IDNCmdTxt[]                   = "IDN";
000031 52535400         646         DB      052H,053H,054H,000H
                        649         PUBLIC  _IDNCmdTxt
000035                  650 _IDNCmdTxt:
                        651 ; rs232cmd.c   63       char code RCLCmdTxt[]                   = "RCL";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
000035 49444E00         652         DB      049H,044H,04EH,000H
                        655         PUBLIC  _RCLCmdTxt
000039                  656 _RCLCmdTxt:
                        657 ; rs232cmd.c   64       char code SAVCmdTxt[]                   = "SAV";
000039 52434C00         658         DB      052H,043H,04CH,000H
                        661         PUBLIC  _SAVCmdTxt
00003D                  662 _SAVCmdTxt:
                        663 ; rs232cmd.c   65       
                        664 ; rs232cmd.c   66       char code SYSTEMCmdTxt[]                        = "SYSTEM";
00003D 53415600         665         DB      053H,041H,056H,000H
                        668         PUBLIC  _SYSTEMCmdTxt
000041                  669 _SYSTEMCmdTxt:
                        670 ; rs232cmd.c   67       char code SYSTCmdTxt[]                          = "SYST";
000041 53595354454D00   671         DB      053H,059H,053H,054H,045H,04DH,000H
                        674         PUBLIC  _SYSTCmdTxt
000048                  675 _SYSTCmdTxt:
                        676 ; rs232cmd.c   68       char code STATUSCmdTxt[]                                = "STATUS";
000048 5359535400       677         DB      053H,059H,053H,054H,000H
                        680         PUBLIC  _STATUSCmdTxt
00004D                  681 _STATUSCmdTxt:
                        682 ; rs232cmd.c   69       char code STATCmdTxt[]                                  = "STAT";
00004D 53544154555300   683         DB      053H,054H,041H,054H,055H,053H,000H
                        686         PUBLIC  _STATCmdTxt
000054                  687 _STATCmdTxt:
                        688 ; rs232cmd.c   70       char code DIAGNOSTICCmdTxt[]                    = "DIAGNOSTIC";
000054 5354415400       689         DB      053H,054H,041H,054H,000H
                        692         PUBLIC  _DIAGNOSTICCmdTxt
000059                  693 _DIAGNOSTICCmdTxt:
                        694 ; rs232cmd.c   71       char code DIAGCmdTxt[]                          = "DIAG";
000059 444941474E4F53   695         DB      044H,049H,041H,047H,04EH,04FH,053H,054H,049H,043H,000H
       54494300             
                        698         PUBLIC  _DIAGCmdTxt
000064                  699 _DIAGCmdTxt:
                        700 ; rs232cmd.c   72       char code MONITORCmdTxt[]                               = "MONITOR";
000064 4449414700       701         DB      044H,049H,041H,047H,000H
                        704         PUBLIC  _MONITORCmdTxt
000069                  705 _MONITORCmdTxt:
                        706 ; rs232cmd.c   73       char code MONCmdTxt[]                           = "MON";
000069 4D4F4E49544F52   707         DB      04DH,04FH,04EH,049H,054H,04FH,052H,000H
       00                   
                        710         PUBLIC  _MONCmdTxt
000071                  711 _MONCmdTxt:
                        712 ; rs232cmd.c   74       char code INPUTCmdTxt[]                                 = "INPUT";
000071 4D4F4E00         713         DB      04DH,04FH,04EH,000H
                        716         PUBLIC  _INPUTCmdTxt
000075                  717 _INPUTCmdTxt:
                        718 ; rs232cmd.c   75       char code INPCmdTxt[]                                   = "INP";
000075 494E50555400     719         DB      049H,04EH,050H,055H,054H,000H
                        722         PUBLIC  _INPCmdTxt
00007B                  723 _INPCmdTxt:
                        724 ; rs232cmd.c   76       char code OUTPUTCmdTxt[]                                = "OUTPUT";
00007B 494E5000         725         DB      049H,04EH,050H,000H
                        728         PUBLIC  _OUTPUTCmdTxt
00007F                  729 _OUTPUTCmdTxt:
                        730 ; rs232cmd.c   77       char code OUTPCmdTxt[]                                  = "OUTP";
00007F 4F555450555400   731         DB      04FH,055H,054H,050H,055H,054H,000H
                        734         PUBLIC  _OUTPCmdTxt
000086                  735 _OUTPCmdTxt:
                        736 ; rs232cmd.c   78       char code USERCmdTxt[]                                  = "USER";
000086 4F55545000       737         DB      04FH,055H,054H,050H,000H
                        740         PUBLIC  _USERCmdTxt
00008B                  741 _USERCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
                        742 ; rs232cmd.c   79       char code MEASURECmdTxt[]                               = "MEASURE";
00008B 5553455200       743         DB      055H,053H,045H,052H,000H
                        746         PUBLIC  _MEASURECmdTxt
000090                  747 _MEASURECmdTxt:
                        748 ; rs232cmd.c   80       char code MEASCmdTxt[]                          = "MEAS";
000090 4D454153555245   749         DB      04DH,045H,041H,053H,055H,052H,045H,000H
       00                   
                        752         PUBLIC  _MEASCmdTxt
000098                  753 _MEASCmdTxt:
                        754 ; rs232cmd.c   81       char code FACTORYCmdTxt[]                               = "FACTORY";
000098 4D45415300       755         DB      04DH,045H,041H,053H,000H
                        758         PUBLIC  _FACTORYCmdTxt
00009D                  759 _FACTORYCmdTxt:
                        760 ; rs232cmd.c   82       char code FACTCmdTxt[]                          = "FACT";
00009D 464143544F5259   761         DB      046H,041H,043H,054H,04FH,052H,059H,000H
       00                   
                        764         PUBLIC  _FACTCmdTxt
0000A5                  765 _FACTCmdTxt:
                        766 ; rs232cmd.c   83       
                        767 ; rs232cmd.c   84       char code ERRORCmdTxt[]                         = "ERROR";
0000A5 4641435400       768         DB      046H,041H,043H,054H,000H
                        771         PUBLIC  _ERRORCmdTxt
0000AA                  772 _ERRORCmdTxt:
                        773 ; rs232cmd.c   85       char code ERRCmdTxt[]                           = "ERR";
0000AA 4552524F5200     774         DB      045H,052H,052H,04FH,052H,000H
                        777         PUBLIC  _ERRCmdTxt
0000B0                  778 _ERRCmdTxt:
                        779 ; rs232cmd.c   86       char code VERSIONCmdTxt[]                       = "VERSION";
0000B0 45525200         780         DB      045H,052H,052H,000H
                        783         PUBLIC  _VERSIONCmdTxt
0000B4                  784 _VERSIONCmdTxt:
                        785 ; rs232cmd.c   87       char code VERSCmdTxt[]                  = "VERS";
0000B4 56455253494F4E   786         DB      056H,045H,052H,053H,049H,04FH,04EH,000H
       00                   
                        789         PUBLIC  _VERSCmdTxt
0000BC                  790 _VERSCmdTxt:
                        791 ; rs232cmd.c   88       char code PRESETCmdTxt[]                                = "PRESET";
0000BC 5645525300       792         DB      056H,045H,052H,053H,000H
                        795         PUBLIC  _PRESETCmdTxt
0000C1                  796 _PRESETCmdTxt:
                        797 ; rs232cmd.c   89       char code PRESCmdTxt[]                                  = "PRES";
0000C1 50524553455400   798         DB      050H,052H,045H,053H,045H,054H,000H
                        801         PUBLIC  _PRESCmdTxt
0000C8                  802 _PRESCmdTxt:
                        803 ; rs232cmd.c   90       char code EVENTLOGCmdTxt[]                              = "EVENTLOG";
0000C8 5052455300       804         DB      050H,052H,045H,053H,000H
                        807         PUBLIC  _EVENTLOGCmdTxt
0000CD                  808 _EVENTLOGCmdTxt:
                        809 ; rs232cmd.c   91       char code DATECmdTxt[]                                  = "DATE";
0000CD 4556454E544C4F   810         DB      045H,056H,045H,04EH,054H,04CH,04FH,047H,000H
       4700                 
                        813         PUBLIC  _DATECmdTxt
0000D6                  814 _DATECmdTxt:
                        815 ; rs232cmd.c   92       char code TIMECmdTxt[]                                  = "TIME";
0000D6 4441544500       816         DB      044H,041H,054H,045H,000H
                        819         PUBLIC  _TIMECmdTxt
0000DB                  820 _TIMECmdTxt:
                        821 ; rs232cmd.c   93       
                        822 ; rs232cmd.c   94       char code RECALLCmdTxt[]                                = "RECALL";
0000DB 54494D4500       823         DB      054H,049H,04DH,045H,000H
                        826         PUBLIC  _RECALLCmdTxt
0000E0                  827 _RECALLCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   5

ADDR   CODE            LINE SOURCELINE
                        828 ; rs232cmd.c   95       char code RECCmdTxt[]                                   = "REC";
0000E0 524543414C4C00   829         DB      052H,045H,043H,041H,04CH,04CH,000H
                        832         PUBLIC  _RECCmdTxt
0000E7                  833 _RECCmdTxt:
                        834 ; rs232cmd.c   96       char code STORECmdTxt[]                                 = "STORE";
0000E7 52454300         835         DB      052H,045H,043H,000H
                        838         PUBLIC  _STORECmdTxt
0000EB                  839 _STORECmdTxt:
                        840 ; rs232cmd.c   97       char code STORCmdTxt[]                                  = "STOR";
0000EB 53544F524500     841         DB      053H,054H,04FH,052H,045H,000H
                        844         PUBLIC  _STORCmdTxt
0000F1                  845 _STORCmdTxt:
                        846 ; rs232cmd.c   98       char code NAMECmdTxt[]                                  = "NAME";
0000F1 53544F5200       847         DB      053H,054H,04FH,052H,000H
                        850         PUBLIC  _NAMECmdTxt
0000F6                  851 _NAMECmdTxt:
                        852 ; rs232cmd.c   99       char code AUTHORCmdTxt[]                                = "AUTHOR";
0000F6 4E414D4500       853         DB      04EH,041H,04DH,045H,000H
                        856         PUBLIC  _AUTHORCmdTxt
0000FB                  857 _AUTHORCmdTxt:
                        858 ; rs232cmd.c  100       char code AUTHCmdTxt[]                                  = "AUTH";
0000FB 415554484F5200   859         DB      041H,055H,054H,048H,04FH,052H,000H
                        862         PUBLIC  _AUTHCmdTxt
000102                  863 _AUTHCmdTxt:
                        864 ; rs232cmd.c  101       char code DOWNLOADCmdTxt[]                      = "DOWNLOAD";
000102 4155544800       865         DB      041H,055H,054H,048H,000H
                        868         PUBLIC  _DOWNLOADCmdTxt
000107                  869 _DOWNLOADCmdTxt:
                        870 ; rs232cmd.c  102       char code DOWNCmdTxt[]                                  = "DOWN";
000107 444F574E4C4F41   871         DB      044H,04FH,057H,04EH,04CH,04FH,041H,044H,000H
       4400                 
                        874         PUBLIC  _DOWNCmdTxt
000110                  875 _DOWNCmdTxt:
                        876 ; rs232cmd.c  103       char code UPLOADCmdTxt[]                                = "UPLOAd";
000110 444F574E00       877         DB      044H,04FH,057H,04EH,000H
                        880         PUBLIC  _UPLOADCmdTxt
000115                  881 _UPLOADCmdTxt:
                        882 ; rs232cmd.c  104       char code UPLCmdTxt[]                                   = "UPL";
000115 55504C4F416400   883         DB      055H,050H,04CH,04FH,041H,064H,000H
                        886         PUBLIC  _UPLCmdTxt
00011C                  887 _UPLCmdTxt:
                        888 ; rs232cmd.c  105       
                        889 ; rs232cmd.c  106       char code OPERATIONCmdTxt[]                     = "OPERATION";
00011C 55504C00         890         DB      055H,050H,04CH,000H
                        893         PUBLIC  _OPERATIONCmdTxt
000120                  894 _OPERATIONCmdTxt:
                        895 ; rs232cmd.c  107       char code OPERCmdTxt[]                          = "OPER";
000120 4F504552415449   896         DB      04FH,050H,045H,052H,041H,054H,049H,04FH,04EH,000H
       4F4E00               
                        899         PUBLIC  _OPERCmdTxt
00012A                  900 _OPERCmdTxt:
                        901 ; rs232cmd.c  108       char code QUESTIONABLECmdTxt[]          = "QUESTIONABLE";
00012A 4F50455200       902         DB      04FH,050H,045H,052H,000H
                        905         PUBLIC  _QUESTIONABLECmdTxt
00012F                  906 _QUESTIONABLECmdTxt:
00012F 5155455354494F   907         DB      051H,055H,045H,053H,054H,049H,04FH,04EH,041H,042H,04CH,045H
       4E41424C45           
                        908 ; rs232cmd.c  109       char code QUESCmdTxt[]                                  = "QUES";
00013B 00               909         DB      000H
                        912         PUBLIC  _QUESCmdTxt
00013C                  913 _QUESCmdTxt:
                        914 ; rs232cmd.c  110       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   6

ADDR   CODE            LINE SOURCELINE
                        915 ; rs232cmd.c  111       char code EVENTCmdTxt[]                                 = "EVENT";
00013C 5155455300       916         DB      051H,055H,045H,053H,000H
                        919         PUBLIC  _EVENTCmdTxt
000141                  920 _EVENTCmdTxt:
                        921 ; rs232cmd.c  112       char code EVENCmdTxt[]                                  = "EVEN";
000141 4556454E5400     922         DB      045H,056H,045H,04EH,054H,000H
                        925         PUBLIC  _EVENCmdTxt
000147                  926 _EVENCmdTxt:
                        927 ; rs232cmd.c  113       char code CONDITIONCmdTxt[]                     = "CONDITION";
000147 4556454E00       928         DB      045H,056H,045H,04EH,000H
                        931         PUBLIC  _CONDITIONCmdTxt
00014C                  932 _CONDITIONCmdTxt:
                        933 ; rs232cmd.c  114       char code CONDCmdTxt[]                                  = "COND";
00014C 434F4E44495449   934         DB      043H,04FH,04EH,044H,049H,054H,049H,04FH,04EH,000H
       4F4E00               
                        937         PUBLIC  _CONDCmdTxt
000156                  938 _CONDCmdTxt:
                        939 ; rs232cmd.c  115       char code ENABLECmdTxt[]                                = "ENABLE";
000156 434F4E4400       940         DB      043H,04FH,04EH,044H,000H
                        943         PUBLIC  _ENABLECmdTxt
00015B                  944 _ENABLECmdTxt:
                        945 ; rs232cmd.c  116       char code ENABCmdTxt[]                                  = "ENAB";
00015B 454E41424C4500   946         DB      045H,04EH,041H,042H,04CH,045H,000H
                        949         PUBLIC  _ENABCmdTxt
000162                  950 _ENABCmdTxt:
                        951 ; rs232cmd.c  117       
                        952 ; rs232cmd.c  118       char code DISPLAYCmdTxt[]                               = "DISPLAY";
000162 454E414200       953         DB      045H,04EH,041H,042H,000H
                        956         PUBLIC  _DISPLAYCmdTxt
000167                  957 _DISPLAYCmdTxt:
                        958 ; rs232cmd.c  119       char code DISPCmdTxt[]                                  = "DISP";
000167 444953504C4159   959         DB      044H,049H,053H,050H,04CH,041H,059H,000H
       00                   
                        962         PUBLIC  _DISPCmdTxt
00016F                  963 _DISPCmdTxt:
                        964 ; rs232cmd.c  120       char code ERRORQUEUECmdTxt[]            = "ERRORQUEUE";
00016F 4449535000       965         DB      044H,049H,053H,050H,000H
                        968         PUBLIC  _ERRORQUEUECmdTxt
000174                  969 _ERRORQUEUECmdTxt:
                        970 ; rs232cmd.c  121       char code RESETCmdTxt[]                                 = "RESET";
000174 4552524F525155   971         DB      045H,052H,052H,04FH,052H,051H,055H,045H,055H,045H,000H
       45554500             
                        974         PUBLIC  _RESETCmdTxt
00017F                  975 _RESETCmdTxt:
                        976 ; rs232cmd.c  122       char code RESCmdTxt[]                                   = "RES";
00017F 524553455400     977         DB      052H,045H,053H,045H,054H,000H
                        980         PUBLIC  _RESCmdTxt
000185                  981 _RESCmdTxt:
                        982 ; rs232cmd.c  123       
                        983 ; rs232cmd.c  124       char code DEFAULTCmdTxt[]                               = "DEFAULT";
000185 52455300         984         DB      052H,045H,053H,000H
                        987         PUBLIC  _DEFAULTCmdTxt
000189                  988 _DEFAULTCmdTxt:
                        989 ; rs232cmd.c  125       char code DEFCmdTxt[]                                   = "DEF";
000189 44454641554C54   990         DB      044H,045H,046H,041H,055H,04CH,054H,000H
       00                   
                        993         PUBLIC  _DEFCmdTxt
000191                  994 _DEFCmdTxt:
                        995 ; rs232cmd.c  126       
                        996 ; rs232cmd.c  127       char code GENLOCKCmdTxt[]                               = "GENLOCK";
000191 44454600         997         DB      044H,045H,046H,000H
                       1000         PUBLIC  _GENLOCKCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   7

ADDR   CODE            LINE SOURCELINE
000195                 1001 _GENLOCKCmdTxt:
                       1002 ; rs232cmd.c  128       char code GENLCmdTxt[]                                  = "GENL";
000195 47454E4C4F434B  1003         DB      047H,045H,04EH,04CH,04FH,043H,04BH,000H
       00                   
                       1006         PUBLIC  _GENLCmdTxt
00019D                 1007 _GENLCmdTxt:
                       1008 ; rs232cmd.c  129       
                       1009 ; rs232cmd.c  130       char code DELAYCmdTxt[]                                 = "DELAY";
00019D 47454E4C00      1010         DB      047H,045H,04EH,04CH,000H
                       1013         PUBLIC  _DELAYCmdTxt
0001A2                 1014 _DELAYCmdTxt:
                       1015 ; rs232cmd.c  131       char code DELCmdTxt[]                                   = "DEL";
0001A2 44454C415900    1016         DB      044H,045H,04CH,041H,059H,000H
                       1019         PUBLIC  _DELCmdTxt
0001A8                 1020 _DELCmdTxt:
                       1021 ; rs232cmd.c  132       
                       1022 ; rs232cmd.c  133       char code CALIBRATECmdTxt[]                     = "CALIBRATE";
0001A8 44454C00        1023         DB      044H,045H,04CH,000H
                       1026         PUBLIC  _CALIBRATECmdTxt
0001AC                 1027 _CALIBRATECmdTxt:
                       1028 ; rs232cmd.c  134       char code CALCmdTxt[]                                   = "CAL";
0001AC 43414C49425241  1029         DB      043H,041H,04CH,049H,042H,052H,041H,054H,045H,000H
       544500               
                       1032         PUBLIC  _CALCmdTxt
0001B6                 1033 _CALCmdTxt:
                       1034 ; rs232cmd.c  135       
                       1035 ; rs232cmd.c  136       char code ADJUSTCmdTxt[]                                = "ADJUST";
0001B6 43414C00        1036         DB      043H,041H,04CH,000H
                       1039         PUBLIC  _ADJUSTCmdTxt
0001BA                 1040 _ADJUSTCmdTxt:
                       1041 ; rs232cmd.c  137       char code ADJCmdTxt[]                                   = "ADJ";
0001BA 41444A55535400  1042         DB      041H,044H,04AH,055H,053H,054H,000H
                       1045         PUBLIC  _ADJCmdTxt
0001C1                 1046 _ADJCmdTxt:
                       1047 ; rs232cmd.c  138       
                       1048 ; rs232cmd.c  139       char code BBCmdTxt[]                                    = "BB";
0001C1 41444A00        1049         DB      041H,044H,04AH,000H
                       1052         PUBLIC  _BBCmdTxt
0001C5                 1053 _BBCmdTxt:
                       1054 ; rs232cmd.c  140       char code CBGENERATORCmdTxt[]           = "CBGENERATOR";
0001C5 424200          1055         DB      042H,042H,000H
                       1058         PUBLIC  _CBGENERATORCmdTxt
0001C8                 1059 _CBGENERATORCmdTxt:
                       1060 ; rs232cmd.c  141       char code CBGCmdTxt[]                                   = "CBG";
0001C8 434247454E4552  1061         DB      043H,042H,047H,045H,04EH,045H,052H,041H,054H,04FH,052H,000H
       41544F5200           
                       1064         PUBLIC  _CBGCmdTxt
0001D4                 1065 _CBGCmdTxt:
                       1066 ; rs232cmd.c  142       char code AUDIOCmdTxt[]                                 = "AUDIO";
0001D4 43424700        1067         DB      043H,042H,047H,000H
                       1070         PUBLIC  _AUDIOCmdTxt
0001D8                 1071 _AUDIOCmdTxt:
                       1072 ; rs232cmd.c  143       char code AUDCmdTxt[]                                   = "AUD";
0001D8 415544494F00    1073         DB      041H,055H,044H,049H,04FH,000H
                       1076         PUBLIC  _AUDCmdTxt
0001DE                 1077 _AUDCmdTxt:
                       1078 ; rs232cmd.c  144       
                       1079 ; rs232cmd.c  145       char code ANALOGCmdTxt[]                                = "ANALOG";
0001DE 41554400        1080         DB      041H,055H,044H,000H
                       1083         PUBLIC  _ANALOGCmdTxt
0001E2                 1084 _ANALOGCmdTxt:
                       1085 ; rs232cmd.c  146       char code ANALCmdTxt[]                                  = "ANAL";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   8

ADDR   CODE            LINE SOURCELINE
0001E2 414E414C4F4700  1086         DB      041H,04EH,041H,04CH,04FH,047H,000H
                       1089         PUBLIC  _ANALCmdTxt
0001E9                 1090 _ANALCmdTxt:
                       1091 ; rs232cmd.c  147       
                       1092 ; rs232cmd.c  148       char code PATTERNCmdTxt[]                               = "PATTERN";
0001E9 414E414C00      1093         DB      041H,04EH,041H,04CH,000H
                       1096         PUBLIC  _PATTERNCmdTxt
0001EE                 1097 _PATTERNCmdTxt:
                       1098 ; rs232cmd.c  149       char code PATTCmdTxt[]                                  = "PATT";
0001EE 5041545445524E  1099         DB      050H,041H,054H,054H,045H,052H,04EH,000H
       00                   
                       1102         PUBLIC  _PATTCmdTxt
0001F6                 1103 _PATTCmdTxt:
                       1104 ; rs232cmd.c  150       char code EMBAUDIOCmdTxt[]                      = "EMBAUDIO";
0001F6 5041545400      1105         DB      050H,041H,054H,054H,000H
                       1108         PUBLIC  _EMBAUDIOCmdTxt
0001FB                 1109 _EMBAUDIOCmdTxt:
                       1110 ; rs232cmd.c  151       char code EMBCmdTxt[]                                   = "EMB";
0001FB 454D4241554449  1111         DB      045H,04DH,042H,041H,055H,044H,049H,04FH,000H
       4F00                 
                       1114         PUBLIC  _EMBCmdTxt
000204                 1115 _EMBCmdTxt:
                       1116 ; rs232cmd.c  152       
                       1117 ; rs232cmd.c  153       char code AESEBUCmdTxt[]                                = "AESEBU";
000204 454D4200        1118         DB      045H,04DH,042H,000H
                       1121         PUBLIC  _AESEBUCmdTxt
000208                 1122 _AESEBUCmdTxt:
                       1123 ; rs232cmd.c  154       char code AESCmdTxt[]                                   = "AES";
000208 41455345425500  1124         DB      041H,045H,053H,045H,042H,055H,000H
                       1127         PUBLIC  _AESCmdTxt
00020F                 1128 _AESCmdTxt:
                       1129 ; rs232cmd.c  155       
                       1130 ; rs232cmd.c  156       char code SCHPHASECmdTxt[]                      = "SCHPHASE";
00020F 41455300        1131         DB      041H,045H,053H,000H
                       1134         PUBLIC  _SCHPHASECmdTxt
000213                 1135 _SCHPHASECmdTxt:
                       1136 ; rs232cmd.c  157       char code SCHPCmdTxt[]                                  = "SCHP";
000213 53434850484153  1137         DB      053H,043H,048H,050H,048H,041H,053H,045H,000H
       4500                 
                       1140         PUBLIC  _SCHPCmdTxt
00021C                 1141 _SCHPCmdTxt:
                       1142 ; rs232cmd.c  158       
                       1143 ; rs232cmd.c  159       char code SIGNALCmdTxt[]                                = "SIGNAL";
00021C 5343485000      1144         DB      053H,043H,048H,050H,000H
                       1147         PUBLIC  _SIGNALCmdTxt
000221                 1148 _SIGNALCmdTxt:
                       1149 ; rs232cmd.c  160       char code SIGNCmdTxt[]                                  = "SIGN";
000221 5349474E414C00  1150         DB      053H,049H,047H,04EH,041H,04CH,000H
                       1153         PUBLIC  _SIGNCmdTxt
000228                 1154 _SIGNCmdTxt:
                       1155 ; rs232cmd.c  161       char code LEVELCmdTxt[]                                 = "LEVEL";
000228 5349474E00      1156         DB      053H,049H,047H,04EH,000H
                       1159         PUBLIC  _LEVELCmdTxt
00022D                 1160 _LEVELCmdTxt:
                       1161 ; rs232cmd.c  162       char code LEVCmdTxt[]                                   = "LEV";
00022D 4C4556454C00    1162         DB      04CH,045H,056H,045H,04CH,000H
                       1165         PUBLIC  _LEVCmdTxt
000233                 1166 _LEVCmdTxt:
                       1167 ; rs232cmd.c  163       char code EDHINSERTCmdTxt[]                     = "EDHINSERT";
000233 4C455600        1168         DB      04CH,045H,056H,000H
                       1171         PUBLIC  _EDHINSERTCmdTxt
000237                 1172 _EDHINSERTCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   9

ADDR   CODE            LINE SOURCELINE
                       1173 ; rs232cmd.c  164       char code EDHCmdTxt[]                                   = "EDH";
000237 454448494E5345  1174         DB      045H,044H,048H,049H,04EH,053H,045H,052H,054H,000H
       525400               
                       1177         PUBLIC  _EDHCmdTxt
000241                 1178 _EDHCmdTxt:
                       1179 ; rs232cmd.c  165       
                       1180 ; rs232cmd.c  166       char code TIMINGCmdTxt[]                                = "TIMING";
000241 45444800        1181         DB      045H,044H,048H,000H
                       1184         PUBLIC  _TIMINGCmdTxt
000245                 1185 _TIMINGCmdTxt:
                       1186 ; rs232cmd.c  167       char code TIMCmdTxt[]                                   = "TIM";
000245 54494D494E4700  1187         DB      054H,049H,04DH,049H,04EH,047H,000H
                       1190         PUBLIC  _TIMCmdTxt
00024C                 1191 _TIMCmdTxt:
                       1192 ; rs232cmd.c  168       
                       1193 ; rs232cmd.c  169       char code WORDCLOCKCmdTxt[]                     = "WORDCLOCK";
00024C 54494D00        1194         DB      054H,049H,04DH,000H
                       1197         PUBLIC  _WORDCLOCKCmdTxt
000250                 1198 _WORDCLOCKCmdTxt:
                       1199 ; rs232cmd.c  170       char code WORDCmdTxt[]                                  = "WORD";
000250 574F5244434C4F  1200         DB      057H,04FH,052H,044H,043H,04CH,04FH,043H,04BH,000H
       434B00               
                       1203         PUBLIC  _WORDCmdTxt
00025A                 1204 _WORDCmdTxt:
                       1205 ; rs232cmd.c  171       
                       1206 ; rs232cmd.c  172       char code CLICKCmdTxt[]                                 = "CLICK";
00025A 574F524400      1207         DB      057H,04FH,052H,044H,000H
                       1210         PUBLIC  _CLICKCmdTxt
00025F                 1211 _CLICKCmdTxt:
                       1212 ; rs232cmd.c  173       char code CLICCmdTxt[]                                  = "CLIC";
00025F 434C49434B00    1213         DB      043H,04CH,049H,043H,04BH,000H
                       1216         PUBLIC  _CLICCmdTxt
000265                 1217 _CLICCmdTxt:
                       1218 ; rs232cmd.c  174       
                       1219 ; rs232cmd.c  175       char code PASSWORDCmdTxt[]                      = "PASSWORD";
000265 434C494300      1220         DB      043H,04CH,049H,043H,000H
                       1223         PUBLIC  _PASSWORDCmdTxt
00026A                 1224 _PASSWORDCmdTxt:
                       1225 ; rs232cmd.c  176       char code PASSCmdTxt[]                                  = "PASS";
00026A 50415353574F52  1226         DB      050H,041H,053H,053H,057H,04FH,052H,044H,000H
       4400                 
                       1229         PUBLIC  _PASSCmdTxt
000273                 1230 _PASSCmdTxt:
                       1231 ; rs232cmd.c  177       char code V24CIRCUITCmdTxt[]                    = "V24CIRCUIT";
000273 5041535300      1232         DB      050H,041H,053H,053H,000H
                       1235         PUBLIC  _V24CIRCUITCmdTxt
000278                 1236 _V24CIRCUITCmdTxt:
                       1237 ; rs232cmd.c  178       char code V24CCmdTxt[]                                  = "V24C";
000278 56323443495243  1238         DB      056H,032H,034H,043H,049H,052H,043H,055H,049H,054H,000H
       55495400             
                       1241         PUBLIC  _V24CCmdTxt
000283                 1242 _V24CCmdTxt:
                       1243 ; rs232cmd.c  179       char code CHECKSUMCmdTxt[]                      = "CHECKSUM";
000283 5632344300      1244         DB      056H,032H,034H,043H,000H
                       1247         PUBLIC  _CHECKSUMCmdTxt
000288                 1248 _CHECKSUMCmdTxt:
                       1249 ; rs232cmd.c  180       char code CHECCmdTxt[]                                  = "CHEC";
000288 434845434B5355  1250         DB      043H,048H,045H,043H,04BH,053H,055H,04DH,000H
       4D00                 
                       1253         PUBLIC  _CHECCmdTxt
000291                 1254 _CHECCmdTxt:
                       1255 ; rs232cmd.c  181       char code CODECmdTxt[]                                  = "CODE";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  10

ADDR   CODE            LINE SOURCELINE
000291 4348454300      1256         DB      043H,048H,045H,043H,000H
                       1259         PUBLIC  _CODECmdTxt
000296                 1260 _CODECmdTxt:
                       1261 ; rs232cmd.c  182       char code RANGECmdTxt[]                                 = "RANGE";
000296 434F444500      1262         DB      043H,04FH,044H,045H,000H
                       1265         PUBLIC  _RANGECmdTxt
00029B                 1266 _RANGECmdTxt:
                       1267 ; rs232cmd.c  183       char code RANGCmdTxt[]                                  = "RANG";
00029B 52414E474500    1268         DB      052H,041H,04EH,047H,045H,000H
                       1271         PUBLIC  _RANGCmdTxt
0002A1                 1272 _RANGCmdTxt:
                       1273 ; rs232cmd.c  184       char code COMMANDCmdTxt[]                               = "COMMAND";
0002A1 52414E4700      1274         DB      052H,041H,04EH,047H,000H
                       1277         PUBLIC  _COMMANDCmdTxt
0002A6                 1278 _COMMANDCmdTxt:
                       1279 ; rs232cmd.c  185       char code COMMCmdTxt[]                                  = "COMM";
0002A6 434F4D4D414E44  1280         DB      043H,04FH,04DH,04DH,041H,04EH,044H,000H
       00                   
                       1283         PUBLIC  _COMMCmdTxt
0002AE                 1284 _COMMCmdTxt:
                       1285 ; rs232cmd.c  186       char code TRANSPARENTCmdTxt[]           = "TRANSPARENT";
0002AE 434F4D4D00      1286         DB      043H,04FH,04DH,04DH,000H
                       1289         PUBLIC  _TRANSPARENTCmdTxt
0002B3                 1290 _TRANSPARENTCmdTxt:
                       1291 ; rs232cmd.c  187       char code TRANCmdTxt[]                                  = "TRAN";
0002B3 5452414E535041  1292         DB      054H,052H,041H,04EH,053H,050H,041H,052H,045H,04EH,054H,000H
       52454E5400           
                       1295         PUBLIC  _TRANCmdTxt
0002BF                 1296 _TRANCmdTxt:
                       1297 ; rs232cmd.c  188       
                       1298 ; rs232cmd.c  189       char code MAINBOARDCmdTxt[]                     = "MAINBOARD";
0002BF 5452414E00      1299         DB      054H,052H,041H,04EH,000H
                       1302         PUBLIC  _MAINBOARDCmdTxt
0002C4                 1303 _MAINBOARDCmdTxt:
                       1304 ; rs232cmd.c  190       char code MAINCmdTxt[]                                  = "MAIN";
0002C4 4D41494E424F41  1305         DB      04DH,041H,049H,04EH,042H,04FH,041H,052H,044H,000H
       524400               
                       1308         PUBLIC  _MAINCmdTxt
0002CE                 1309 _MAINCmdTxt:
                       1310 ; rs232cmd.c  191       char code COMPANYCmdTxt[]                               = "COMPANY";
0002CE 4D41494E00      1311         DB      04DH,041H,049H,04EH,000H
                       1314         PUBLIC  _COMPANYCmdTxt
0002D3                 1315 _COMPANYCmdTxt:
                       1316 ; rs232cmd.c  192       char code COMPCmdTxt[]                                  = "COMP";
0002D3 434F4D50414E59  1317         DB      043H,04FH,04DH,050H,041H,04EH,059H,000H
       00                   
                       1320         PUBLIC  _COMPCmdTxt
0002DB                 1321 _COMPCmdTxt:
                       1322 ; rs232cmd.c  193       char code TYPECmdTxt[]                                  = "TYPE";
0002DB 434F4D5000      1323         DB      043H,04FH,04DH,050H,000H
                       1326         PUBLIC  _TYPECmdTxt
0002E0                 1327 _TYPECmdTxt:
                       1328 ; rs232cmd.c  194       char code KUNUMBERCmdTxt[]                      = "KUNUMBER";
0002E0 5459504500      1329         DB      054H,059H,050H,045H,000H
                       1332         PUBLIC  _KUNUMBERCmdTxt
0002E5                 1333 _KUNUMBERCmdTxt:
                       1334 ; rs232cmd.c  195       char code KUNCmdTxt[]                                   = "KUN";
0002E5 4B554E554D4245  1335         DB      04BH,055H,04EH,055H,04DH,042H,045H,052H,000H
       5200                 
                       1338         PUBLIC  _KUNCmdTxt
0002EE                 1339 _KUNCmdTxt:
                       1340 ; rs232cmd.c  196       char code SWREVISIONCmdTxt[]                    = "SWREVISION";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  11

ADDR   CODE            LINE SOURCELINE
0002EE 4B554E00        1341         DB      04BH,055H,04EH,000H
                       1344         PUBLIC  _SWREVISIONCmdTxt
0002F2                 1345 _SWREVISIONCmdTxt:
                       1346 ; rs232cmd.c  197       char code SWRCmdTxt[]                                   = "SWR";
0002F2 53575245564953  1347         DB      053H,057H,052H,045H,056H,049H,053H,049H,04FH,04EH,000H
       494F4E00             
                       1350         PUBLIC  _SWRCmdTxt
0002FD                 1351 _SWRCmdTxt:
                       1352 ; rs232cmd.c  198       
                       1353 ; rs232cmd.c  199       char code NCCmdTxt[]                                    = "NC";
0002FD 53575200        1354         DB      053H,057H,052H,000H
                       1357         PUBLIC  _NCCmdTxt
000301                 1358 _NCCmdTxt:
                       1359 ; rs232cmd.c  200       char code FMSDATECmdTxt[]                               = "FMSDATE";
000301 4E4300          1360         DB      04EH,043H,000H
                       1363         PUBLIC  _FMSDATECmdTxt
000304                 1364 _FMSDATECmdTxt:
                       1365 ; rs232cmd.c  201       char code FMSDCmdTxt[]                                  = "FMSD";
000304 464D5344415445  1366         DB      046H,04DH,053H,044H,041H,054H,045H,000H
       00                   
                       1369         PUBLIC  _FMSDCmdTxt
00030C                 1370 _FMSDCmdTxt:
                       1371 ; rs232cmd.c  202       char code PRODUCTIONCmdTxt[]                    = "PRODUCTION";
00030C 464D534400      1372         DB      046H,04DH,053H,044H,000H
                       1375         PUBLIC  _PRODUCTIONCmdTxt
000311                 1376 _PRODUCTIONCmdTxt:
                       1377 ; rs232cmd.c  203       char code PRODCmdTxt[]                                  = "PROD";
000311 50524F44554354  1378         DB      050H,052H,04FH,044H,055H,043H,054H,049H,04FH,04EH,000H
       494F4E00             
                       1381         PUBLIC  _PRODCmdTxt
00031C                 1382 _PRODCmdTxt:
                       1383 ; rs232cmd.c  204       char code UPDATECmdTxt[]                                = "UPDATE";
00031C 50524F4400      1384         DB      050H,052H,04FH,044H,000H
                       1387         PUBLIC  _UPDATECmdTxt
000321                 1388 _UPDATECmdTxt:
                       1389 ; rs232cmd.c  205       char code UPDCmdTxt[]                                   = "UPD";
000321 55504441544500  1390         DB      055H,050H,044H,041H,054H,045H,000H
                       1393         PUBLIC  _UPDCmdTxt
000328                 1394 _UPDCmdTxt:
                       1395 ; rs232cmd.c  206       
                       1396 ; rs232cmd.c  207       char code FREFERENCECmdTxt[]                    = "FREFERENCE";
000328 55504400        1397         DB      055H,050H,044H,000H
                       1400         PUBLIC  _FREFERENCECmdTxt
00032C                 1401 _FREFERENCECmdTxt:
                       1402 ; rs232cmd.c  208       char code FREFCmdTxt[]                                  = "FREF";
00032C 46524546455245  1403         DB      046H,052H,045H,046H,045H,052H,045H,04EH,043H,045H,000H
       4E434500             
                       1406         PUBLIC  _FREFCmdTxt
000337                 1407 _FREFCmdTxt:
                       1408 ; rs232cmd.c  209       char code DACCmdTxt[]                                   = "DAC";
000337 4652454600      1409         DB      046H,052H,045H,046H,000H
                       1412         PUBLIC  _DACCmdTxt
00033C                 1413 _DACCmdTxt:
                       1414 ; rs232cmd.c  210       char code UREFERENCECmdTxt[]                    = "UREFERENCE";
00033C 44414300        1415         DB      044H,041H,043H,000H
                       1418         PUBLIC  _UREFERENCECmdTxt
000340                 1419 _UREFERENCECmdTxt:
                       1420 ; rs232cmd.c  211       char code UREFCmdTxt[]                                  = "UREF";
000340 55524546455245  1421         DB      055H,052H,045H,046H,045H,052H,045H,04EH,043H,045H,000H
       4E434500             
                       1424         PUBLIC  _UREFCmdTxt
00034B                 1425 _UREFCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  12

ADDR   CODE            LINE SOURCELINE
                       1426 ; rs232cmd.c  212       char code HPHZEROCmdTxt[]                               = "HPHZERO";
00034B 5552454600      1427         DB      055H,052H,045H,046H,000H
                       1430         PUBLIC  _HPHZEROCmdTxt
000350                 1431 _HPHZEROCmdTxt:
                       1432 ; rs232cmd.c  213       char code HPHZCmdTxt[]                                  = "HPHZ";
000350 4850485A45524F  1433         DB      048H,050H,048H,05AH,045H,052H,04FH,000H
       00                   
                       1436         PUBLIC  _HPHZCmdTxt
000358                 1437 _HPHZCmdTxt:
                       1438 ; rs232cmd.c  214       char code PHASECmdTxt[]                                 = "PHASE";
000358 4850485A00      1439         DB      048H,050H,048H,05AH,000H
                       1442         PUBLIC  _PHASECmdTxt
00035D                 1443 _PHASECmdTxt:
                       1444 ; rs232cmd.c  215       char code PHASCmdTxt[]                                  = "PHAS";
00035D 504841534500    1445         DB      050H,048H,041H,053H,045H,000H
                       1448         PUBLIC  _PHASCmdTxt
000363                 1449 _PHASCmdTxt:
                       1450 ; rs232cmd.c  216       
                       1451 ; rs232cmd.c  217       char code AGAINCmdTxt[]                                 = "AGAIN";
000363 5048415300      1452         DB      050H,048H,041H,053H,000H
                       1455         PUBLIC  _AGAINCmdTxt
000368                 1456 _AGAINCmdTxt:
                       1457 ; rs232cmd.c  218       char code AGACmdTxt[]                                   = "AGA";
000368 414741494E00    1458         DB      041H,047H,041H,049H,04EH,000H
                       1461         PUBLIC  _AGACmdTxt
00036E                 1462 _AGACmdTxt:
                       1463 ; rs232cmd.c  219       char code CGAINCmdTxt[]                                 = "CGAIN";
00036E 41474100        1464         DB      041H,047H,041H,000H
                       1467         PUBLIC  _CGAINCmdTxt
000372                 1468 _CGAINCmdTxt:
                       1469 ; rs232cmd.c  220       char code CGACmdTxt[]                                   = "CGA";
000372 434741494E00    1470         DB      043H,047H,041H,049H,04EH,000H
                       1473         PUBLIC  _CGACmdTxt
000378                 1474 _CGACmdTxt:
                       1475 ; rs232cmd.c  221       char code ALEVELCmdTxt[]                                = "ALEVEL";
000378 43474100        1476         DB      043H,047H,041H,000H
                       1479         PUBLIC  _ALEVELCmdTxt
00037C                 1480 _ALEVELCmdTxt:
                       1481 ; rs232cmd.c  222       char code ALEVCmdTxt[]                                  = "ALEV";
00037C 414C4556454C00  1482         DB      041H,04CH,045H,056H,045H,04CH,000H
                       1485         PUBLIC  _ALEVCmdTxt
000383                 1486 _ALEVCmdTxt:
                       1487 ; rs232cmd.c  223       
                       1488 ; rs232cmd.c  224       char code PLDCmdTxt[]                                   = "PLD";
000383 414C455600      1489         DB      041H,04CH,045H,056H,000H
                       1492         PUBLIC  _PLDCmdTxt
000388                 1493 _PLDCmdTxt:
                       1494 ; rs232cmd.c  225       char code TCXOCmdTxt[]                                  = "TCXO";
000388 504C4400        1495         DB      050H,04CH,044H,000H
                       1498         PUBLIC  _TCXOCmdTxt
00038C                 1499 _TCXOCmdTxt:
                       1500 ; rs232cmd.c  226       char code MMCHIPCmdTxt[]                                = "MMCHIP";
00038C 5443584F00      1501         DB      054H,043H,058H,04FH,000H
                       1504         PUBLIC  _MMCHIPCmdTxt
000391                 1505 _MMCHIPCmdTxt:
                       1506 ; rs232cmd.c  227       char code MMCHCmdTxt[]                                  = "MMCH";
000391 4D4D4348495000  1507         DB      04DH,04DH,043H,048H,049H,050H,000H
                       1510         PUBLIC  _MMCHCmdTxt
000398                 1511 _MMCHCmdTxt:
                       1512 ; rs232cmd.c  228       
                       1513 ; rs232cmd.c  229       char code SAVEParTxt[]                                  = "SAVE";
000398 4D4D434800      1514         DB      04DH,04DH,043H,048H,000H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  13

ADDR   CODE            LINE SOURCELINE
                       1517         PUBLIC  _SAVEParTxt
00039D                 1518 _SAVEParTxt:
                       1519 ; rs232cmd.c  230       
                       1520 ; rs232cmd.c  231       char code INTERNALParTxt[]                      = "INTERNAL";
00039D 5341564500      1521         DB      053H,041H,056H,045H,000H
                       1524         PUBLIC  _INTERNALParTxt
0003A2                 1525 _INTERNALParTxt:
                       1526 ; rs232cmd.c  232       char code INTParTxt[]                                   = "INT";
0003A2 494E5445524E41  1527         DB      049H,04EH,054H,045H,052H,04EH,041H,04CH,000H
       4C00                 
                       1530         PUBLIC  _INTParTxt
0003AB                 1531 _INTParTxt:
                       1532 ; rs232cmd.c  233       char code PALBURSTParTxt[]                      = "PALBURST";
0003AB 494E5400        1533         DB      049H,04EH,054H,000H
                       1536         PUBLIC  _PALBURSTParTxt
0003AF                 1537 _PALBURSTParTxt:
                       1538 ; rs232cmd.c  234       char code PALBParTxt[]                                  = "PALB";
0003AF 50414C42555253  1539         DB      050H,041H,04CH,042H,055H,052H,053H,054H,000H
       5400                 
                       1542         PUBLIC  _PALBParTxt
0003B8                 1543 _PALBParTxt:
                       1544 ; rs232cmd.c  235       char code NTSCBURSTParTxt[]                     = "NTSCBURST";
0003B8 50414C4200      1545         DB      050H,041H,04CH,042H,000H
                       1548         PUBLIC  _NTSCBURSTParTxt
0003BD                 1549 _NTSCBURSTParTxt:
                       1550 ; rs232cmd.c  236       char code NTSCParTxt[]                                  = "NTSC";
0003BD 4E545343425552  1551         DB      04EH,054H,053H,043H,042H,055H,052H,053H,054H,000H
       535400               
                       1554         PUBLIC  _NTSCParTxt
0003C7                 1555 _NTSCParTxt:
                       1556 ; rs232cmd.c  237       
                       1557 ; rs232cmd.c  238       char code F10MHzParTxt[]                                = "F10MHZ";
0003C7 4E54534300      1558         DB      04EH,054H,053H,043H,000H
                       1561         PUBLIC  _F10MHzParTxt
0003CC                 1562 _F10MHzParTxt:
                       1563 ; rs232cmd.c  239       
                       1564 ; rs232cmd.c  240       char code PALParTxt[]                                   = "PAL";
0003CC 4631304D485A00  1565         DB      046H,031H,030H,04DH,048H,05AH,000H
                       1568         PUBLIC  _PALParTxt
0003D3                 1569 _PALParTxt:
                       1570 ; rs232cmd.c  241       char code PAL_IDParTxt[]                                = "PAL_ID";
0003D3 50414C00        1571         DB      050H,041H,04CH,000H
                       1574         PUBLIC  _PAL_IDParTxt
0003D7                 1575 _PAL_IDParTxt:
                       1576 ; rs232cmd.c  242       
                       1577 ; rs232cmd.c  243       char code CBSMPTEParTxt[]                               = "CBSMPTE";     
                                            // SMPTE Colorbar
0003D7 50414C5F494400  1578         DB      050H,041H,04CH,05FH,049H,044H,000H
                       1581         PUBLIC  _CBSMPTEParTxt
0003DE                 1582 _CBSMPTEParTxt:
                       1583 ; rs232cmd.c  244       char code CBSMParTxt[]                                  = "CBSM";        
                                                            
0003DE 4342534D505445  1584         DB      043H,042H,053H,04DH,050H,054H,045H,000H
       00                   
                       1587         PUBLIC  _CBSMParTxt
0003E6                 1588 _CBSMParTxt:
                       1589 ; rs232cmd.c  245       char code CBEBUParTxt[]                                 = "CBEBU";       
                                    // EBU Colorbar
0003E6 4342534D00      1590         DB      043H,042H,053H,04DH,000H
                       1593         PUBLIC  _CBEBUParTxt
0003EB                 1594 _CBEBUParTxt:
                       1595 ; rs232cmd.c  246       char code CBEBParTxt[]                                  = "CBEB";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  14

ADDR   CODE            LINE SOURCELINE
0003EB 434245425500    1596         DB      043H,042H,045H,042H,055H,000H
                       1599         PUBLIC  _CBEBParTxt
0003F1                 1600 _CBEBParTxt:
                       1601 ; rs232cmd.c  247       char code CBFCCParTxt[]                                 = "CBFCC";       
                                                    // FCC Colorbar
0003F1 4342454200      1602         DB      043H,042H,045H,042H,000H
                       1605         PUBLIC  _CBFCCParTxt
0003F6                 1606 _CBFCCParTxt:
                       1607 ; rs232cmd.c  248       char code CBFCParTxt[]                                  = "CBFC";
0003F6 434246434300    1608         DB      043H,042H,046H,043H,043H,000H
                       1611         PUBLIC  _CBFCParTxt
0003FC                 1612 _CBFCParTxt:
                       1613 ; rs232cmd.c  249       char code CBEBU8ParTxt[]                                = "CBEBU8";      
                                                    // Colorbar ITU801
0003FC 4342464300      1614         DB      043H,042H,046H,043H,000H
                       1617         PUBLIC  _CBEBU8ParTxt
000401                 1618 _CBEBU8ParTxt:
                       1619 ; rs232cmd.c  250       char code CBEB8ParTxt[]                                 = "CBEB8";
000401 43424542553800  1620         DB      043H,042H,045H,042H,055H,038H,000H
                       1623         PUBLIC  _CBEB8ParTxt
000408                 1624 _CBEB8ParTxt:
                       1625 ; rs232cmd.c  251       char code CB100ParTxt[]                                 = "CB100";       
                                                    // 100% Colorbar
000408 434245423800    1626         DB      043H,042H,045H,042H,038H,000H
                       1629         PUBLIC  _CB100ParTxt
00040E                 1630 _CB100ParTxt:
                       1631 ; rs232cmd.c  252       char code CBGREY75ParTxt[]                      = "CBGREY75";            
                                    // Colorbar + 75% Grey
00040E 434231303000    1632         DB      043H,042H,031H,030H,030H,000H
                       1635         PUBLIC  _CBGREY75ParTxt
000414                 1636 _CBGREY75ParTxt:
                       1637 ; rs232cmd.c  253       char code CBGR75ParTxt[]                                = "CBGR75";
000414 43424752455937  1638         DB      043H,042H,047H,052H,045H,059H,037H,035H,000H
       3500                 
                       1641         PUBLIC  _CBGR75ParTxt
00041D                 1642 _CBGR75ParTxt:
                       1643 ; rs232cmd.c  254       char code CBRED75ParTxt[]                       = "CBRED75";             
                                    // Colorbar + 75% Red
00041D 43424752373500  1644         DB      043H,042H,047H,052H,037H,035H,000H
                       1647         PUBLIC  _CBRED75ParTxt
000424                 1648 _CBRED75ParTxt:
                       1649 ; rs232cmd.c  255       char code CBR75ParTxt[]                                 = "CBR75";
000424 43425245443735  1650         DB      043H,042H,052H,045H,044H,037H,035H,000H
       00                   
                       1653         PUBLIC  _CBR75ParTxt
00042C                 1654 _CBR75ParTxt:
                       1655 ; rs232cmd.c  256       char code RED75ParTxt[]                                 = "RED75";       
                                                    // 75% Red
00042C 434252373500    1656         DB      043H,042H,052H,037H,035H,000H
                       1659         PUBLIC  _RED75ParTxt
000432                 1660 _RED75ParTxt:
                       1661 ; rs232cmd.c  257       
                       1662 ; rs232cmd.c  258       char code MULTIBURSTParTxt[]                    = "MULTIBURST";         /
                            / Multi burst
000432 524544373500    1663         DB      052H,045H,044H,037H,035H,000H
                       1666         PUBLIC  _MULTIBURSTParTxt
000438                 1667 _MULTIBURSTParTxt:
                       1668 ; rs232cmd.c  259       char code MULTParTxt[]                                  = "MULT";
000438 4D554C54494255  1669         DB      04DH,055H,04CH,054H,049H,042H,055H,052H,053H,054H,000H
       52535400             
                       1672         PUBLIC  _MULTParTxt
000443                 1673 _MULTParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  15

ADDR   CODE            LINE SOURCELINE
                       1674 ; rs232cmd.c  260       char code CCIR18ParTxt[]                                = "CCIR18";
000443 4D554C5400      1675         DB      04DH,055H,04CH,054H,000H
                       1678         PUBLIC  _CCIR18ParTxt
000448                 1679 _CCIR18ParTxt:
                       1680 ; rs232cmd.c  261       char code WIN10ParTxt[]                                 = "WIN10";       
                                                    // Window 10%
000448 43434952313800  1681         DB      043H,043H,049H,052H,031H,038H,000H
                       1684         PUBLIC  _WIN10ParTxt
00044F                 1685 _WIN10ParTxt:
                       1686 ; rs232cmd.c  262       char code WIN15ParTxt[]                                 = "WIN15";       
                                                    // Window 15%
00044F 57494E313000    1687         DB      057H,049H,04EH,031H,030H,000H
                       1690         PUBLIC  _WIN15ParTxt
000455                 1691 _WIN15ParTxt:
                       1692 ; rs232cmd.c  263       char code WIN20ParTxt[]                                 = "WIN20";       
                                                    // Window 20%
000455 57494E313500    1693         DB      057H,049H,04EH,031H,035H,000H
                       1696         PUBLIC  _WIN20ParTxt
00045B                 1697 _WIN20ParTxt:
                       1698 ; rs232cmd.c  264       char code WIN100ParTxt[]                                = "WIN100";      
                                                    // Window 100%
00045B 57494E323000    1699         DB      057H,049H,04EH,032H,030H,000H
                       1702         PUBLIC  _WIN100ParTxt
000461                 1703 _WIN100ParTxt:
                       1704 ; rs232cmd.c  265       char code BLWH15ParTxt[]                                = "BLWH15KHZ";   
                                            // 15kHz Bl/Wh
000461 57494E31303000  1705         DB      057H,049H,04EH,031H,030H,030H,000H
                       1708         PUBLIC  _BLWH15ParTxt
000468                 1709 _BLWH15ParTxt:
                       1710 ; rs232cmd.c  266       char code WHITE100ParTxt[]                      = "WHITE100";            
                                    // White 100%
000468 424C574831354B  1711         DB      042H,04CH,057H,048H,031H,035H,04BH,048H,05AH,000H
       485A00               
                       1714         PUBLIC  _WHITE100ParTxt
000472                 1715 _WHITE100ParTxt:
                       1716 ; rs232cmd.c  267       char code WHIT100ParTxt[]                               = "WHIT100";
000472 57484954453130  1717         DB      057H,048H,049H,054H,045H,031H,030H,030H,000H
       3000                 
                       1720         PUBLIC  _WHIT100ParTxt
00047B                 1721 _WHIT100ParTxt:
                       1722 ; rs232cmd.c  268       char code BLACKParTxt[]                                 = "BLACK";       
                                                    // Black
00047B 57484954313030  1723         DB      057H,048H,049H,054H,031H,030H,030H,000H
       00                   
                       1726         PUBLIC  _BLACKParTxt
000483                 1727 _BLACKParTxt:
                       1728 ; rs232cmd.c  269       char code BLACParTxt[]                                  = "BLAC";
000483 424C41434B00    1729         DB      042H,04CH,041H,043H,04BH,000H
                       1732         PUBLIC  _BLACParTxt
000489                 1733 _BLACParTxt:
                       1734 ; rs232cmd.c  270       
                       1735 ; rs232cmd.c  271       char code SDICHECKParTxt[]                      = "SDICHECK";            
                                    // Check field
000489 424C414300      1736         DB      042H,04CH,041H,043H,000H
                       1739         PUBLIC  _SDICHECKParTxt
00048E                 1740 _SDICHECKParTxt:
                       1741 ; rs232cmd.c  272       char code SDICParTxt[]                                  = "SDIC";
00048E 53444943484543  1742         DB      053H,044H,049H,043H,048H,045H,043H,04BH,000H
       4B00                 
                       1745         PUBLIC  _SDICParTxt
000497                 1746 _SDICParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  16

ADDR   CODE            LINE SOURCELINE
                       1747 ; rs232cmd.c  273       char code DGREYParTxt[]                                 = "DGREY";       
                                                    // Digital grey
000497 5344494300      1748         DB      053H,044H,049H,043H,000H
                       1751         PUBLIC  _DGREYParTxt
00049C                 1752 _DGREYParTxt:
                       1753 ; rs232cmd.c  274       char code DGRParTxt[]                                   = "DGR";
00049C 444752455900    1754         DB      044H,047H,052H,045H,059H,000H
                       1757         PUBLIC  _DGRParTxt
0004A2                 1758 _DGRParTxt:
                       1759 ; rs232cmd.c  275       char code STAIRCASE5ParTxt[]                    = "STAIRCASE5";         /
                            / 5-step staircase
0004A2 44475200        1760         DB      044H,047H,052H,000H
                       1763         PUBLIC  _STAIRCASE5ParTxt
0004A6                 1764 _STAIRCASE5ParTxt:
                       1765 ; rs232cmd.c  276       char code STA5ParTxt[]                                  = "STA5";
0004A6 53544149524341  1766         DB      053H,054H,041H,049H,052H,043H,041H,053H,045H,035H,000H
       53453500             
                       1769         PUBLIC  _STA5ParTxt
0004B1                 1770 _STA5ParTxt:
                       1771 ; rs232cmd.c  277       char code STAIRCASE10ParTxt[]           = "STAIRCASE10";                /
                            / 10-step staircase
0004B1 5354413500      1772         DB      053H,054H,041H,035H,000H
                       1775         PUBLIC  _STAIRCASE10ParTxt
0004B6                 1776 _STAIRCASE10ParTxt:
                       1777 ; rs232cmd.c  278       char code STA10ParTxt[]                                 = "STA10";
0004B6 53544149524341  1778         DB      053H,054H,041H,049H,052H,043H,041H,053H,045H,031H,030H,000H
       5345313000           
                       1781         PUBLIC  _STA10ParTxt
0004C2                 1782 _STA10ParTxt:
                       1783 ; rs232cmd.c  279       char code CROSSHATCHParTxt[]                    = "CROSSHATCH";         /
                            / Cross hatch
0004C2 535441313000    1784         DB      053H,054H,041H,031H,030H,000H
                       1787         PUBLIC  _CROSSHATCHParTxt
0004C8                 1788 _CROSSHATCHParTxt:
                       1789 ; rs232cmd.c  280       char code CROSParTxt[]                                  = "CROS";
0004C8 43524F53534841  1790         DB      043H,052H,04FH,053H,053H,048H,041H,054H,043H,048H,000H
       54434800             
                       1793         PUBLIC  _CROSParTxt
0004D3                 1794 _CROSParTxt:
                       1795 ; rs232cmd.c  281       char code PLUGEParTxt[]                                 = "PLUGE";       
                                                    // PLUGE
0004D3 43524F5300      1796         DB      043H,052H,04FH,053H,000H
                       1799         PUBLIC  _PLUGEParTxt
0004D8                 1800 _PLUGEParTxt:
                       1801 ; rs232cmd.c  282       char code PLUGParTxt[]                                  = "PLUG";
0004D8 504C55474500    1802         DB      050H,04CH,055H,047H,045H,000H
                       1805         PUBLIC  _PLUGParTxt
0004DE                 1806 _PLUGParTxt:
                       1807 ; rs232cmd.c  283       
                       1808 ; rs232cmd.c  284       char code ANALOGParTxt[]                                = "ANALOG";
0004DE 504C554700      1809         DB      050H,04CH,055H,047H,000H
                       1812         PUBLIC  _ANALOGParTxt
0004E3                 1813 _ANALOGParTxt:
                       1814 ; rs232cmd.c  285       char code ANALParTxt[]                                  = "ANAL";
0004E3 414E414C4F4700  1815         DB      041H,04EH,041H,04CH,04FH,047H,000H
                       1818         PUBLIC  _ANALParTxt
0004EA                 1819 _ANALParTxt:
                       1820 ; rs232cmd.c  286       char code AESEBUParTxt[]                                = "AESEBU";
0004EA 414E414C00      1821         DB      041H,04EH,041H,04CH,000H
                       1824         PUBLIC  _AESEBUParTxt
0004EF                 1825 _AESEBUParTxt:
                       1826 ; rs232cmd.c  287       char code AESParTxt[]                                   = "AES";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  17

ADDR   CODE            LINE SOURCELINE
0004EF 41455345425500  1827         DB      041H,045H,053H,045H,042H,055H,000H
                       1830         PUBLIC  _AESParTxt
0004F6                 1831 _AESParTxt:
                       1832 ; rs232cmd.c  288       
                       1833 ; rs232cmd.c  289       char code F441KHZParTxt[]                               = "F441KHZ";
0004F6 41455300        1834         DB      041H,045H,053H,000H
                       1837         PUBLIC  _F441KHZParTxt
0004FA                 1838 _F441KHZParTxt:
                       1839 ; rs232cmd.c  290       char code F48KHZParTxt[]                                = "F48KHZ";
0004FA 463434314B485A  1840         DB      046H,034H,034H,031H,04BH,048H,05AH,000H
       00                   
                       1843         PUBLIC  _F48KHZParTxt
000502                 1844 _F48KHZParTxt:
                       1845 ; rs232cmd.c  291       char code F45MHZParTxt[]                                = "F45MHZ";
000502 4634384B485A00  1846         DB      046H,034H,038H,04BH,048H,05AH,000H
                       1849         PUBLIC  _F45MHZParTxt
000509                 1850 _F45MHZParTxt:
                       1851 ; rs232cmd.c  292       
                       1852 ; rs232cmd.c  293       char code S500HZParTxt[]                                = "S500HZ";      
                                                    // Stereo 500 Hz
000509 4634354D485A00  1853         DB      046H,034H,035H,04DH,048H,05AH,000H
                       1856         PUBLIC  _S500HZParTxt
000510                 1857 _S500HZParTxt:
                       1858 ; rs232cmd.c  294       char code S1KHZParTxt[]                                 = "S1KHZ";       
                                            // Stereo 1 kHz
000510 53353030485A00  1859         DB      053H,035H,030H,030H,048H,05AH,000H
                       1862         PUBLIC  _S1KHZParTxt
000517                 1863 _S1KHZParTxt:
                       1864 ; rs232cmd.c  295       char code SEBU1KHZParTxt[]                              = "SEBU1KHZ";    
                                            // Stereo EBU 1 kHz
000517 53314B485A00    1865         DB      053H,031H,04BH,048H,05AH,000H
                       1868         PUBLIC  _SEBU1KHZParTxt
00051D                 1869 _SEBU1KHZParTxt:
                       1870 ; rs232cmd.c  296       char code S8KHZParTxt[]                                 = "S8KHZ";       
                                                    // Stereo 8 kHz
00051D 53454255314B48  1871         DB      053H,045H,042H,055H,031H,04BH,048H,05AH,000H
       5A00                 
                       1874         PUBLIC  _S8KHZParTxt
000526                 1875 _S8KHZParTxt:
                       1876 ; rs232cmd.c  297       
                       1877 ; rs232cmd.c  298       char code SILENCEParTxt[]                               = "SILENCE";
000526 53384B485A00    1878         DB      053H,038H,04BH,048H,05AH,000H
                       1881         PUBLIC  _SILENCEParTxt
00052C                 1882 _SILENCEParTxt:
                       1883 ; rs232cmd.c  299       char code SILParTxt[]                                   = "SIL";
00052C 53494C454E4345  1884         DB      053H,049H,04CH,045H,04EH,043H,045H,000H
       00                   
                       1887         PUBLIC  _SILParTxt
000534                 1888 _SILParTxt:
                       1889 ; rs232cmd.c  300       
                       1890 ; rs232cmd.c  301       char code DMYParTxt[]                                   = "DMY";
000534 53494C00        1891         DB      053H,049H,04CH,000H
                       1894         PUBLIC  _DMYParTxt
000538                 1895 _DMYParTxt:
                       1896 ; rs232cmd.c  302       char code MDYParTxt[]                                   = "MDY";
000538 444D5900        1897         DB      044H,04DH,059H,000H
                       1900         PUBLIC  _MDYParTxt
00053C                 1901 _MDYParTxt:
                       1902 ; rs232cmd.c  303       char code YMDParTxt[]                                   = "YMD";
00053C 4D445900        1903         DB      04DH,044H,059H,000H
                       1906         PUBLIC  _YMDParTxt
000540                 1907 _YMDParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  18

ADDR   CODE            LINE SOURCELINE
                       1908 ; rs232cmd.c  304       
                       1909 ; rs232cmd.c  305       char code BBParTxt[]                                    = "BB";
000540 594D4400        1910         DB      059H,04DH,044H,000H
                       1913         PUBLIC  _BBParTxt
000544                 1914 _BBParTxt:
                       1915 ; rs232cmd.c  306       char code SPGParTxt[]                                   = "SPG";
000544 424200          1916         DB      042H,042H,000H
                       1919         PUBLIC  _SPGParTxt
000547                 1920 _SPGParTxt:
                       1921 ; rs232cmd.c  307       
                       1922 ; rs232cmd.c  308       char code OFFParTxt[]                                   = "OFF";
000547 53504700        1923         DB      053H,050H,047H,000H
                       1926         PUBLIC  _OFFParTxt
00054B                 1927 _OFFParTxt:
                       1928 ; rs232cmd.c  309       char code ONParTxt[]                                    = "ON";
00054B 4F464600        1929         DB      04FH,046H,046H,000H
                       1932         PUBLIC  _ONParTxt
00054F                 1933 _ONParTxt:
                       1934 ; rs232cmd.c  310       
                       1935 ; rs232cmd.c  311       char code UPParTxt[]                                    = "UP";
00054F 4F4E00          1936         DB      04FH,04EH,000H
                       1939         PUBLIC  _UPParTxt
000552                 1940 _UPParTxt:
                       1941 ; rs232cmd.c  312       char code DOWNParTxt[]                                  = "DOWN";
000552 555000          1942         DB      055H,050H,000H
                       1945         PUBLIC  _DOWNParTxt
000555                 1946 _DOWNParTxt:
                       1947 ; rs232cmd.c  313       
                       1948 ; rs232cmd.c  314       char code NORMALParTxt[]                                = "NORMAL";
000555 444F574E00      1949         DB      044H,04FH,057H,04EH,000H
                       1952         PUBLIC  _NORMALParTxt
00055A                 1953 _NORMALParTxt:
                       1954 ; rs232cmd.c  315       char code NORMParTxt[]                                  = "NORM";
00055A 4E4F524D414C00  1955         DB      04EH,04FH,052H,04DH,041H,04CH,000H
                       1958         PUBLIC  _NORMParTxt
000561                 1959 _NORMParTxt:
                       1960 ; rs232cmd.c  316       
                       1961 ; rs232cmd.c  317       char code MINParTxt[]                                   = "MIN";
000561 4E4F524D00      1962         DB      04EH,04FH,052H,04DH,000H
                       1965         PUBLIC  _MINParTxt
000566                 1966 _MINParTxt:
                       1967 ; rs232cmd.c  318       char code MAXParTxt[]                                   = "MAX";
000566 4D494E00        1968         DB      04DH,049H,04EH,000H
                       1971         PUBLIC  _MAXParTxt
00056A                 1972 _MAXParTxt:
                       1973 ; rs232cmd.c  319       
                       1974 ; rs232cmd.c  320       
                       1975 ; rs232cmd.c  321       void CLSCommand( void);
                       1976 ; rs232cmd.c  322       void ESECommand( void);
                       1977 ; rs232cmd.c  323       void ESRCommand( void);
                       1978 ; rs232cmd.c  324       void OPCCommand( void);
                       1979 ; rs232cmd.c  325       void SRECommand( void);
                       1980 ; rs232cmd.c  326       void STBCommand( void);
                       1981 ; rs232cmd.c  327       void TSTCommand( void);
                       1982 ; rs232cmd.c  328       void WAICommand( void);
                       1983 ; rs232cmd.c  329       void RSTCommand( void);
                       1984 ; rs232cmd.c  330       void IDNCommand( void);
                       1985 ; rs232cmd.c  331       void RCLCommand( void);
                       1986 ; rs232cmd.c  332       void SAVCommand( void);
                       1987 ; rs232cmd.c  333       
                       1988 ; rs232cmd.c  334       void SystemError( void);
                       1989 ; rs232cmd.c  335       void SystemVersion( void);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  19

ADDR   CODE            LINE SOURCELINE
                       1990 ; rs232cmd.c  336       void SystemTime( void);
                       1991 ; rs232cmd.c  337       void SystemDate( void);
                       1992 ; rs232cmd.c  338       
                       1993 ; rs232cmd.c  339       void SystemPresetName( void);
                       1994 ; rs232cmd.c  340       void SystemPresetAuthor( void);
                       1995 ; rs232cmd.c  341       void SystemPresetDate( void);
                       1996 ; rs232cmd.c  342       void SystemPresetDownload( void);
                       1997 ; rs232cmd.c  343       void SystemPresetUpload( void);
                       1998 ; rs232cmd.c  344       
                       1999 ; rs232cmd.c  345       void StatusOperEvent( void);
                       2000 ; rs232cmd.c  346       void StatusOperCondition( void);
                       2001 ; rs232cmd.c  347       void StatusOperEnable( void);
                       2002 ; rs232cmd.c  348       void StatusQuestEvent( void);
                       2003 ; rs232cmd.c  349       void StatusQuestCondition( void);
                       2004 ; rs232cmd.c  350       void StatusQuestEnable( void);
                       2005 ; rs232cmd.c  351       void StatusPreset( void);
                       2006 ; rs232cmd.c  352       
                       2007 ; rs232cmd.c  353       void GenlockGen( void);
                       2008 ; rs232cmd.c  354       void GenlockGenSystem( void);
                       2009 ; rs232cmd.c  355       void GenlockGenDelay( void);
                       2010 ; rs232cmd.c  356       void GenlockGenCalibrateEnable( void);
                       2011 ; rs232cmd.c  357       void GenlockGenCalibrateAdjust( void);
                       2012 ; rs232cmd.c  358       void GenlockGenCalibrateStore( void);
                       2013 ; rs232cmd.c  359       
                       2014 ; rs232cmd.c  360       void BBGenSuffix( void);
                       2015 ; rs232cmd.c  361       void BBGen( void);
                       2016 ; rs232cmd.c  362       void BBGenSystem( void);
                       2017 ; rs232cmd.c  363       void BBGenDelay( void);
                       2018 ; rs232cmd.c  364       void BBGenScHPhase( void);
                       2019 ; rs232cmd.c  365       
                       2020 ; rs232cmd.c  366       void CBGen( void);
                       2021 ; rs232cmd.c  367       void CBGenPattern( void);
                       2022 ; rs232cmd.c  368       void CBGenSystem( void);
                       2023 ; rs232cmd.c  369       void CBGenDelay( void);
                       2024 ; rs232cmd.c  370       void CBGenScHPhase( void);
                       2025 ; rs232cmd.c  371       void CBGenEmbAudioSignal( void);
                       2026 ; rs232cmd.c  372       
                       2027 ; rs232cmd.c  373       void AudioGenOutput( void);
                       2028 ; rs232cmd.c  374       
                       2029 ; rs232cmd.c  375       void AudioGenAnalog( void);
                       2030 ; rs232cmd.c  376       void AudioGenAnalogSignal( void);
                       2031 ; rs232cmd.c  377       void AudioGenAnalogLevel( void);
                       2032 ; rs232cmd.c  378       void AudioGenAnalogClick( void);
                       2033 ; rs232cmd.c  379       
                       2034 ; rs232cmd.c  380       void AudioGenAESEBU( void);
                       2035 ; rs232cmd.c  381       void AudioGenAESEBUSystem( void);
                       2036 ; rs232cmd.c  382       void AudioGenAESEBUSignal( void);
                       2037 ; rs232cmd.c  383       void AudioGenAESEBULevel( void);
                       2038 ; rs232cmd.c  384       void AudioGenAESEBUTiming( void);
                       2039 ; rs232cmd.c  385       void AudioGenAESEBUWordClock( void);
                       2040 ; rs232cmd.c  386       void AudioGenAESEBUClick( void);
                       2041 ; rs232cmd.c  387       
                       2042 ; rs232cmd.c  388       void FactPassword( void);
                       2043 ; rs232cmd.c  389       void FactReset( void);
                       2044 ; rs232cmd.c  390       void FactV24Command( void);
                       2045 ; rs232cmd.c  391       void FactV24Transparent( void);
                       2046 ; rs232cmd.c  392       
                       2047 ; rs232cmd.c  393       void FactChecksumCode( void);
                       2048 ; rs232cmd.c  394       void FactChecksumPLD( void);
                       2049 ; rs232cmd.c  395       void FactChecksumEmbAudio( void);
                       2050 ; rs232cmd.c  396       void FactChecksumPattern( void);
                       2051 ; rs232cmd.c  397       void FactChecksumRange( void);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  20

ADDR   CODE            LINE SOURCELINE
                       2052 ; rs232cmd.c  398       
                       2053 ; rs232cmd.c  399       void FactMainVersion( void);
                       2054 ; rs232cmd.c  400       void FactMainIDNCompany( void);
                       2055 ; rs232cmd.c  401       void FactMainIDNType( void);
                       2056 ; rs232cmd.c  402       void FactMainIDNKUNumber( void);
                       2057 ; rs232cmd.c  403       void FactMainIDNSWRevision( void);
                       2058 ; rs232cmd.c  404       
                       2059 ; rs232cmd.c  405       void FactMainSystem( void);
                       2060 ; rs232cmd.c  406       void FactMainFMSDateProd( void);
                       2061 ; rs232cmd.c  407       void FactMainFMSDateUpd( void);
                       2062 ; rs232cmd.c  408       
                       2063 ; rs232cmd.c  409       void FactGenlockGenDate( void);
                       2064 ; rs232cmd.c  410       void FactGenlockGenVersion( void);
                       2065 ; rs232cmd.c  411       void FactGenlockGenFRefDate( void);
                       2066 ; rs232cmd.c  412       void FactGenlockGenFRefDAC( void);
                       2067 ; rs232cmd.c  413       void FactGenlockGenURefDate( void);
                       2068 ; rs232cmd.c  414       void FactGenlockGenURefDAC( void);
                       2069 ; rs232cmd.c  415       void FactGenlockGenHPHZero( void);
                       2070 ; rs232cmd.c  416       void FactGenlockGenPhase( void);
                       2071 ; rs232cmd.c  417       
                       2072 ; rs232cmd.c  418       void FactBBGenDate( void);
                       2073 ; rs232cmd.c  419       void FactBBGenVersion( void);
                       2074 ; rs232cmd.c  420       void FactBBGenSignal( void);
                       2075 ; rs232cmd.c  421       void FactBBGenPhase( void);
                       2076 ; rs232cmd.c  422       void FactBBGenScHPhase( void);
                       2077 ; rs232cmd.c  423       void FactBBGenDAC( void);
                       2078 ; rs232cmd.c  424       
                       2079 ; rs232cmd.c  425       void FactCBGenDate( void);
                       2080 ; rs232cmd.c  426       void FactCBGenAGain( void);
                       2081 ; rs232cmd.c  427       void FactCBGenCGain( void);
                       2082 ; rs232cmd.c  428       void FactCBGenPhase( void);
                       2083 ; rs232cmd.c  429       void FactCBGenScHPhase( void);
                       2084 ; rs232cmd.c  430       
                       2085 ; rs232cmd.c  431       void FactAudioGenStatus( void);
                       2086 ; rs232cmd.c  432       void FactAudioGenDate( void);
                       2087 ; rs232cmd.c  433       void FactAudioGenLevel( void);
                       2088 ; rs232cmd.c  434       
                       2089 ; rs232cmd.c  435       void FactPLDVersion( void);
                       2090 ; rs232cmd.c  436       void FactTCXOStatus( void);
                       2091 ; rs232cmd.c  437       void FactMultiMediaChip( void);
                       2092 ; rs232cmd.c  438       
                       2093 ; rs232cmd.c  439       int FindParameter( char* par, struct PAR_STRUCT code* TmpPtr);
                       2094 ; rs232cmd.c  440       
                       2095 ; rs232cmd.c  441       long FLTToSamples( UC system, int F, int L, float T);
                       2096 ; rs232cmd.c  442       void PrintSamplesToFLT( UC system, long samples);
                       2097 ; rs232cmd.c  443       
                       2098 ; rs232cmd.c  444       // **********************************************************************
                            ****
                       2099 ; rs232cmd.c  445       struct CMD_STRUCT code Mandated[12] = {
00056A 4D415800        2100         DB      04DH,041H,058H,000H
                       2121         PUBLIC  _Mandated
                       2122         ALIGN   1
00056E                 2123 _Mandated:
00056E rrrrrrrrrrrrrr  2124         DD      _CLSCmdTxt
       rr                   
000572 00000000        2125         DD      000000000H
000576 rrrrrrrrrrrrrr  2126         DD      _Mandated+24
       rr                   
00057A 00000000000000  2127         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  21

ADDR   CODE            LINE SOURCELINE
000582 rrrrrrrrrrrrrr  2128         DD      _CLSCommand,_ESECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00058A 00000000        2129         DD      000000000H
00058E rrrrrrrrrrrrrr  2130         DD      _Mandated+48
       rr                   
000592 00000000000000  2131         DD      000000000H,000000000H
       00                   
00059A rrrrrrrrrrrrrr  2132         DD      _ESECommand,_ESRCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005A2 00000000        2133         DD      000000000H
0005A6 rrrrrrrrrrrrrr  2134         DD      _Mandated+72
       rr                   
0005AA 00000000000000  2135         DD      000000000H,000000000H
       00                   
0005B2 rrrrrrrrrrrrrr  2136         DD      _ESRCommand,_IDNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005BA 00000000        2137         DD      000000000H
0005BE rrrrrrrrrrrrrr  2138         DD      _Mandated+96
       rr                   
0005C2 00000000000000  2139         DD      000000000H,000000000H
       00                   
0005CA rrrrrrrrrrrrrr  2140         DD      _IDNCommand,_OPCCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005D2 00000000        2141         DD      000000000H
0005D6 rrrrrrrrrrrrrr  2142         DD      _Mandated+120
       rr                   
0005DA 00000000000000  2143         DD      000000000H,000000000H
       00                   
0005E2 rrrrrrrrrrrrrr  2144         DD      _OPCCommand,_RSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005EA 00000000        2145         DD      000000000H
0005EE rrrrrrrrrrrrrr  2146         DD      _Mandated+144
       rr                   
0005F2 00000000000000  2147         DD      000000000H,000000000H
       00                   
0005FA rrrrrrrrrrrrrr  2148         DD      _RSTCommand,_SRECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000602 00000000        2149         DD      000000000H
000606 rrrrrrrrrrrrrr  2150         DD      _Mandated+168
       rr                   
00060A 00000000000000  2151         DD      000000000H,000000000H
       00                   
000612 rrrrrrrrrrrrrr  2152         DD      _SRECommand,_STBCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00061A 00000000        2153         DD      000000000H
00061E rrrrrrrrrrrrrr  2154         DD      _Mandated+192
       rr                   
000622 00000000000000  2155         DD      000000000H,000000000H
       00                   
00062A rrrrrrrrrrrrrr  2156         DD      _STBCommand,_TSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000632 00000000        2157         DD      000000000H
000636 rrrrrrrrrrrrrr  2158         DD      _Mandated+216
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  22

ADDR   CODE            LINE SOURCELINE
00063A 00000000000000  2159         DD      000000000H,000000000H
       00                   
000642 rrrrrrrrrrrrrr  2160         DD      _TSTCommand,_RCLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00064A 00000000        2161         DD      000000000H
00064E rrrrrrrrrrrrrr  2162         DD      _Mandated+240
       rr                   
000652 00000000000000  2163         DD      000000000H,000000000H
       00                   
00065A rrrrrrrrrrrrrr  2164         DD      _RCLCommand,_SAVCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000662 00000000        2165         DD      000000000H
000666 rrrrrrrrrrrrrr  2166         DD      _Mandated+264
       rr                   
00066A 00000000000000  2167         DD      000000000H,000000000H
       00                   
000672 rrrrrrrrrrrrrr  2168         DD      _SAVCommand,_WAICmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00067A 00000000000000  2169         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2170 ; rs232cmd.c  446               { CLSCmdTxt, NULL, &Mandated[1],  NULL, NONE, CLSCommand},
                       2171 ; rs232cmd.c  447               { ESECmdTxt, NULL, &Mandated[2],  NULL, NONE, ESECommand},
                       2172 ; rs232cmd.c  448               { ESRCmdTxt, NULL, &Mandated[3],  NULL, NONE, ESRCommand},
                       2173 ; rs232cmd.c  449               { IDNCmdTxt, NULL, &Mandated[4],  NULL, NONE, IDNCommand},
                       2174 ; rs232cmd.c  450               { OPCCmdTxt, NULL, &Mandated[5],  NULL, NONE, OPCCommand},
                       2175 ; rs232cmd.c  451               { RSTCmdTxt, NULL, &Mandated[6],  NULL, NONE, RSTCommand},
                       2176 ; rs232cmd.c  452               { SRECmdTxt, NULL, &Mandated[7],  NULL, NONE, SRECommand},
                       2177 ; rs232cmd.c  453               { STBCmdTxt, NULL, &Mandated[8],  NULL, NONE, STBCommand},
                       2178 ; rs232cmd.c  454               { TSTCmdTxt, NULL, &Mandated[9],  NULL, NONE, TSTCommand},
                       2179 ; rs232cmd.c  455               { RCLCmdTxt, NULL, &Mandated[10], NULL, NONE, RCLCommand},
                       2180 ; rs232cmd.c  456               { SAVCmdTxt, NULL, &Mandated[11], NULL, NONE, SAVCommand},
                       2181 ; rs232cmd.c  457               { WAICmdTxt, NULL, NULL         , NULL, NONE, WAICommand}
                       2182 ; rs232cmd.c  458       };
                       2183 ; rs232cmd.c  459       
                       2184 ; rs232cmd.c  460       struct CMD_STRUCT code Subsystem[9] = {
00068A rrrrrrrrrrrrrr  2185         DD      _WAICommand
       rr                   
                       2189         PUBLIC  _Subsystem
                       2190         ALIGN   1
00068E                 2191 _Subsystem:
00068E rrrrrrrrrrrrrr  2192         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000696 rrrrrrrrrrrrrr  2193         DD      _Subsystem+24
       rr                   
00069A rrrrrrrrrrrrrr  2194         DD      _System
       rr                   
00069E 00000000000000  2195         DD      000000000H,000000000H
       00                   
0006A6 rrrrrrrrrrrrrr  2196         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006AE rrrrrrrrrrrrrr  2197         DD      _Subsystem+48
       rr                   
0006B2 rrrrrrrrrrrrrr  2198         DD      _Status
       rr                   
0006B6 00000000000000  2199         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  23

ADDR   CODE            LINE SOURCELINE
0006BE rrrrrrrrrrrrrr  2200         DD      _DIAGNOSTICCmdTxt,_DIAGCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006C6 rrrrrrrrrrrrrr  2201         DD      _Subsystem+72
       rr                   
0006CA 00000000000000  2202         DD      000000000H,000000000H,000000000H
       0000000000           
0006D6 rrrrrrrrrrrrrr  2203         DD      _MONITORCmdTxt,_MONCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006DE rrrrrrrrrrrrrr  2204         DD      _Subsystem+96
       rr                   
0006E2 00000000000000  2205         DD      000000000H,000000000H,000000000H
       0000000000           
0006EE rrrrrrrrrrrrrr  2206         DD      _INPUTCmdTxt,_INPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006F6 rrrrrrrrrrrrrr  2207         DD      _Subsystem+120
       rr                   
0006FA rrrrrrrrrrrrrr  2208         DD      _Input
       rr                   
0006FE 00000000000000  2209         DD      000000000H,000000000H
       00                   
000706 rrrrrrrrrrrrrr  2210         DD      _OUTPUTCmdTxt,_OUTPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00070E rrrrrrrrrrrrrr  2211         DD      _Subsystem+144
       rr                   
000712 rrrrrrrrrrrrrr  2212         DD      _Output
       rr                   
000716 00000000000000  2213         DD      000000000H,000000000H
       00                   
00071E rrrrrrrrrrrrrr  2214         DD      _USERCmdTxt,_USERCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000726 rrrrrrrrrrrrrr  2215         DD      _Subsystem+168
       rr                   
00072A 00000000000000  2216         DD      000000000H,000000000H,000000000H
       0000000000           
000736 rrrrrrrrrrrrrr  2217         DD      _MEASURECmdTxt,_MEASCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00073E rrrrrrrrrrrrrr  2218         DD      _Subsystem+192
       rr                   
000742 00000000000000  2219         DD      000000000H,000000000H,000000000H
       0000000000           
00074E rrrrrrrrrrrrrr  2220         DD      _FACTORYCmdTxt,_FACTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000756 00000000        2221         DD      000000000H
00075A rrrrrrrrrrrrrr  2222         DD      _Factory
       rr                   
                       2223 ; rs232cmd.c  461               { SYSTEMCmdTxt,   SYSTCmdTxt, &Subsystem[1], &System[0],  NONE, N
                            ONE},
                       2224 ; rs232cmd.c  462               { STATUSCmdTxt,           STATCmdTxt, &Subsystem[2], &Status[0], 
                             NONE, NONE},
                       2225 ; rs232cmd.c  463               { DIAGNOSTICCmdTxt, DIAGCmdTxt, &Subsystem[3], NULL,             
                              NONE, NONE},
                       2226 ; rs232cmd.c  464               { MONITORCmdTxt,          MONCmdTxt,  &Subsystem[4], NULL,       
                                       NONE, NONE},
                       2227 ; rs232cmd.c  465               { INPUTCmdTxt,    INPCmdTxt,  &Subsystem[5], &Input[0],   NONE, N
                            ONE},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  24

ADDR   CODE            LINE SOURCELINE
                       2228 ; rs232cmd.c  466               { OUTPUTCmdTxt,           OUTPCmdTxt, &Subsystem[6], &Output[0], 
                             NONE, NONE},
                       2229 ; rs232cmd.c  467               { USERCmdTxt,             USERCmdTxt, &Subsystem[7], NULL,       
                                       NONE, NONE},
                       2230 ; rs232cmd.c  468               { MEASURECmdTxt,          MEASCmdTxt, &Subsystem[8], NULL,       
                                       NONE, NONE},
                       2231 ; rs232cmd.c  469               { FACTORYCmdTxt,          FACTCmdTxt, NULL,                      
                             &Factory[0], NONE, NONE},
                       2232 ; rs232cmd.c  470       };
                       2233 ; rs232cmd.c  471       
                       2234 ; rs232cmd.c  472       // **********************************************************************
                            ****
                       2235 ; rs232cmd.c  473       /*      CMD:    SUB1:   SUB2:   SUB3:   PARM:
                       2236 ; rs232cmd.c  474                       SYSTem
                       2237 ; rs232cmd.c  475                               :ERRor?
                       2238 ; rs232cmd.c  476               :VERSion?
                       2239 ; rs232cmd.c  477                   :PRESet<?>
                       2240 ; rs232cmd.c  478                       [:ACTIVE?]
                       2241 ; rs232cmd.c  479                       :RECall<?>      1 .. 4
                       2242 ; rs232cmd.c  480                 :STORe                        1 .. 4
                       2243 ; rs232cmd.c  481               :NAMe<?>                1 .. 4 , <name>
                       2244 ; rs232cmd.c  482               :AUTHor<?>      1 .. 4 , <author name>
                       2245 ; rs232cmd.c  483                     :DATE<?>          1 .. 4[, <year>,<month>,<date>]
                       2246 ; rs232cmd.c  484                                       :DOWNload               1 .. 4
                       2247 ; rs232cmd.c  485                                       :UPLoad                 1 .. 4
                       2248 ; rs232cmd.c  486               :EVENtlog
                       2249 ; rs232cmd.c  487               :DATE
                       2250 ; rs232cmd.c  488               :TIME
                       2251 ; rs232cmd.c  489       */
                       2252 ; rs232cmd.c  490       struct CMD_STRUCT code System[6] = {
00075E 00000000000000  2253         DD      000000000H,000000000H
       00                   
                       2257         PUBLIC  _System
                       2258         ALIGN   1
000766                 2259 _System:
000766 rrrrrrrrrrrrrr  2260         DD      _ERRORCmdTxt,_ERRCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00076E rrrrrrrrrrrrrr  2261         DD      _System+24
       rr                   
000772 00000000000000  2262         DD      000000000H,000000000H
       00                   
00077A rrrrrrrrrrrrrr  2263         DD      _SystemError,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000786 rrrrrrrrrrrrrr  2264         DD      _System+48
       rr                   
00078A 00000000000000  2265         DD      000000000H,000000000H
       00                   
000792 rrrrrrrrrrrrrr  2266         DD      _SystemVersion,_PRESETCmdTxt,_PRESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00079E rrrrrrrrrrrrrr  2267         DD      _System+72
       rr                   
0007A2 rrrrrrrrrrrrrr  2268         DD      _SystemLevel1
       rr                   
0007A6 00000000        2269         DD      000000000H
0007AA rrrrrrrrrrrrrr  2270         DD      _RCLCommand,_EVENTLOGCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  25

ADDR   CODE            LINE SOURCELINE
0007B6 rrrrrrrrrrrrrr  2271         DD      _System+96
       rr                   
0007BA 00000000000000  2272         DD      000000000H,000000000H,000000000H
       0000000000           
0007C6 rrrrrrrrrrrrrr  2273         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0007CE rrrrrrrrrrrrrr  2274         DD      _System+120
       rr                   
0007D2 00000000000000  2275         DD      000000000H,000000000H,000000000H
       0000000000           
0007DE rrrrrrrrrrrrrr  2276         DD      _TIMECmdTxt,_TIMECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       2277 ; rs232cmd.c  491               { ERRORCmdTxt,  ERRCmdTxt,      &System[1], NULL,                
                                            NONE, SystemError},
                       2278 ; rs232cmd.c  492               { VERSIONCmdTxt,        VERSCmdTxt, &System[2], NULL,            
                                            NONE, SystemVersion},
                       2279 ; rs232cmd.c  493               { PRESETCmdTxt,         PRESCmdTxt, &System[3], &SystemLevel1[0],
                             NONE, RCLCommand},
                       2280 ; rs232cmd.c  494               { EVENTLOGCmdTxt, EVENCmdTxt, &System[4], NULL,                  
                                            NONE, NONE},
                       2281 ; rs232cmd.c  495               { DATECmdTxt,           DATECmdTxt, &System[5], NULL,            
                                            NONE, NONE},
                       2282 ; rs232cmd.c  496               { TIMECmdTxt,           TIMECmdTxt, NULL,               NULL,    
                                                    NONE, NONE}
                       2283 ; rs232cmd.c  497       };
                       2284 ; rs232cmd.c  498       
                       2285 ; rs232cmd.c  499       struct CMD_STRUCT code SystemLevel1[7] = {
0007E6 00000000000000  2286         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2290         PUBLIC  _SystemLevel1
                       2291         ALIGN   1
0007F6                 2292 _SystemLevel1:
0007F6 rrrrrrrrrrrrrr  2293         DD      _RECALLCmdTxt,_RECCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0007FE rrrrrrrrrrrrrr  2294         DD      _SystemLevel1+24
       rr                   
000802 00000000000000  2295         DD      000000000H,000000000H
       00                   
00080A rrrrrrrrrrrrrr  2296         DD      _RCLCommand,_STORECmdTxt,_STORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000816 rrrrrrrrrrrrrr  2297         DD      _SystemLevel1+48
       rr                   
00081A 00000000000000  2298         DD      000000000H,000000000H
       00                   
000822 rrrrrrrrrrrrrr  2299         DD      _SAVCommand,_NAMECmdTxt,_NAMECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00082E rrrrrrrrrrrrrr  2300         DD      _SystemLevel1+72
       rr                   
000832 00000000000000  2301         DD      000000000H,000000000H
       00                   
00083A rrrrrrrrrrrrrr  2302         DD      _SystemPresetName,_AUTHORCmdTxt,_AUTHCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  26

ADDR   CODE            LINE SOURCELINE
000846 rrrrrrrrrrrrrr  2303         DD      _SystemLevel1+96
       rr                   
00084A 00000000000000  2304         DD      000000000H,000000000H
       00                   
000852 rrrrrrrrrrrrrr  2305         DD      _SystemPresetAuthor,_DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00085E rrrrrrrrrrrrrr  2306         DD      _SystemLevel1+120
       rr                   
000862 00000000000000  2307         DD      000000000H,000000000H
       00                   
00086A rrrrrrrrrrrrrr  2308         DD      _SystemPresetDate,_DOWNLOADCmdTxt,_DOWNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000876 rrrrrrrrrrrrrr  2309         DD      _SystemLevel1+144
       rr                   
00087A 00000000000000  2310         DD      000000000H,000000000H
       00                   
000882 rrrrrrrrrrrrrr  2311         DD      _SystemPresetDownload,_UPLOADCmdTxt,_UPLCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00088E 00000000000000  2312         DD      000000000H,000000000H,000000000H
       0000000000           
                       2313 ; rs232cmd.c  500               { RECALLCmdTxt,   RECCmdTxt,    &SystemLevel1[1], NULL, NONE, RCL
                            Command},
                       2314 ; rs232cmd.c  501               { STORECmdTxt,    STORCmdTxt, &SystemLevel1[2], NULL, NONE, SAVCo
                            mmand},
                       2315 ; rs232cmd.c  502               { NAMECmdTxt,      NAMECmdTxt, &SystemLevel1[3],        NULL, NON
                            E, SystemPresetName},
                       2316 ; rs232cmd.c  503               { AUTHORCmdTxt,   AUTHCmdTxt, &SystemLevel1[4], NULL, NONE, Syste
                            mPresetAuthor},
                       2317 ; rs232cmd.c  504               { DATECmdTxt,      DATECmdTxt, &SystemLevel1[5],        NULL, NON
                            E, SystemPresetDate},
                       2318 ; rs232cmd.c  505               { DOWNLOADCmdTxt, DOWNCmdTxt,   &SystemLevel1[6],       NULL, NON
                            E, SystemPresetDownload},
                       2319 ; rs232cmd.c  506               { UPLOADCmdTxt,         UPLCmdTxt,      NULL,                    
                                    NULL, NONE, SystemPresetUpload},
                       2320 ; rs232cmd.c  507       };
                       2321 ; rs232cmd.c  508       
                       2322 ; rs232cmd.c  509       // **********************************************************************
                            ****
                       2323 ; rs232cmd.c  510       /*      CMD:    SUB1:   SUB2:   SUB3:   PARM:
                       2324 ; rs232cmd.c  511                       STATus
                       2325 ; rs232cmd.c  512                               :OPERation
                       2326 ; rs232cmd.c  513                               :EVENt?
                       2327 ; rs232cmd.c  514                     :CONDition?
                       2328 ; rs232cmd.c  515                   :ENABle<?>  0 .. 65535
                       2329 ; rs232cmd.c  516                       :QUEStionable
                       2330 ; rs232cmd.c  517                       :EVENt?
                       2331 ; rs232cmd.c  518                     :CONDition?
                       2332 ; rs232cmd.c  519                   :ENABle<?>  0 .. 65535
                       2333 ; rs232cmd.c  520                               :PRESet                         TBD
                       2334 ; rs232cmd.c  521                   :PT5201?
                       2335 ; rs232cmd.c  522       */
                       2336 ; rs232cmd.c  523       struct CMD_STRUCT code Status[3] = {
00089A rrrrrrrrrrrrrr  2337         DD      _SystemPresetUpload
       rr                   
                       2341         PUBLIC  _Status
                       2342         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  27

ADDR   CODE            LINE SOURCELINE
00089E                 2343 _Status:
00089E rrrrrrrrrrrrrr  2344         DD      _OPERATIONCmdTxt,_OPERCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0008A6 rrrrrrrrrrrrrr  2345         DD      _Status+24
       rr                   
0008AA rrrrrrrrrrrrrr  2346         DD      _StatusLevel1_1
       rr                   
0008AE 00000000        2347         DD      000000000H
0008B2 rrrrrrrrrrrrrr  2348         DD      _StatusOperEvent,_QUESTIONABLECmdTxt,_QUESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0008BE rrrrrrrrrrrrrr  2349         DD      _Status+48
       rr                   
0008C2 rrrrrrrrrrrrrr  2350         DD      _StatusLevel1_2
       rr                   
0008C6 00000000        2351         DD      000000000H
0008CA rrrrrrrrrrrrrr  2352         DD      _StatusQuestEvent,_PRESETCmdTxt,_PRESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0008D6 00000000000000  2353         DD      000000000H,000000000H,000000000H
       0000000000           
                       2354 ; rs232cmd.c  524               { OPERATIONCmdTxt,       OPERCmdTxt, &Status[1], &StatusLevel1_1[
                            0], NONE, StatusOperEvent},
                       2355 ; rs232cmd.c  525               { QUESTIONABLECmdTxt, QUESCmdTxt, &Status[2], &StatusLevel1_2[0],
                             NONE, StatusQuestEvent},
                       2356 ; rs232cmd.c  526               { PRESETCmdTxt,                  PRESCmdTxt, NULL,               
                            NULL,                                   NONE, StatusPreset},
                       2357 ; rs232cmd.c  527       };
                       2358 ; rs232cmd.c  528       
                       2359 ; rs232cmd.c  529       struct CMD_STRUCT code StatusLevel1_1[3] = {
0008E2 rrrrrrrrrrrrrr  2360         DD      _StatusPreset
       rr                   
                       2363         PUBLIC  _StatusLevel1_1
                       2364         ALIGN   1
0008E6                 2365 _StatusLevel1_1:
0008E6 rrrrrrrrrrrrrr  2366         DD      _EVENTCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0008EE rrrrrrrrrrrrrr  2367         DD      _StatusLevel1_1+24
       rr                   
0008F2 00000000000000  2368         DD      000000000H,000000000H
       00                   
0008FA rrrrrrrrrrrrrr  2369         DD      _StatusOperEvent,_CONDITIONCmdTxt,_CONDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000906 rrrrrrrrrrrrrr  2370         DD      _StatusLevel1_1+48
       rr                   
00090A 00000000000000  2371         DD      000000000H,000000000H
       00                   
000912 rrrrrrrrrrrrrr  2372         DD      _StatusOperCondition,_ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00091E 00000000000000  2373         DD      000000000H,000000000H,000000000H
       0000000000           
                       2374 ; rs232cmd.c  530               { EVENTCmdTxt,   EVENCmdTxt, &StatusLevel1_1[1], NULL, NONE, Stat
                            usOperEvent},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  28

ADDR   CODE            LINE SOURCELINE
                       2375 ; rs232cmd.c  531               { CONDITIONCmdTxt, CONDCmdTxt, &StatusLevel1_1[2], NULL, NONE, St
                            atusOperCondition},
                       2376 ; rs232cmd.c  532               { ENABLECmdTxt,          ENABCmdTxt, NULL,                       
                                       NULL, NONE, StatusOperEnable},
                       2377 ; rs232cmd.c  533       };
                       2378 ; rs232cmd.c  534       
                       2379 ; rs232cmd.c  535       struct CMD_STRUCT code StatusLevel1_2[3] = {
00092A rrrrrrrrrrrrrr  2380         DD      _StatusOperEnable
       rr                   
                       2383         PUBLIC  _StatusLevel1_2
                       2384         ALIGN   1
00092E                 2385 _StatusLevel1_2:
00092E rrrrrrrrrrrrrr  2386         DD      _EVENTCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000936 rrrrrrrrrrrrrr  2387         DD      _StatusLevel1_2+24
       rr                   
00093A 00000000000000  2388         DD      000000000H,000000000H
       00                   
000942 rrrrrrrrrrrrrr  2389         DD      _StatusQuestEvent,_CONDITIONCmdTxt,_CONDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00094E rrrrrrrrrrrrrr  2390         DD      _StatusLevel1_2+48
       rr                   
000952 00000000000000  2391         DD      000000000H,000000000H
       00                   
00095A rrrrrrrrrrrrrr  2392         DD      _StatusQuestCondition,_ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000966 00000000000000  2393         DD      000000000H,000000000H,000000000H
       0000000000           
                       2394 ; rs232cmd.c  536               { EVENTCmdTxt,           EVENCmdTxt, &StatusLevel1_2[1], NULL, NO
                            NE, StatusQuestEvent},
                       2395 ; rs232cmd.c  537               { CONDITIONCmdTxt, CONDCmdTxt, &StatusLevel1_2[2], NULL, NONE, St
                            atusQuestCondition},
                       2396 ; rs232cmd.c  538               { ENABLECmdTxt,          ENABCmdTxt, NULL,                       
                                            NULL, NONE, StatusQuestEnable},
                       2397 ; rs232cmd.c  539       };
                       2398 ; rs232cmd.c  540       
                       2399 ; rs232cmd.c  541       
                       2400 ; rs232cmd.c  542       // **********************************************************************
                            ****
                       2401 ; rs232cmd.c  543       /*      CMD:    SUB1:   SUB2:           PARM:
                       2402 ; rs232cmd.c  544                       INPut
                       2403 ; rs232cmd.c  545                               :GENLOCK<?>
                       2404 ; rs232cmd.c  546                                       :SYSTem                 INTernal | PALBur
                            st | NTSCburst |F10MHZ
                       2405 ; rs232cmd.c  547                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2406 ; rs232cmd.c  548                                       :CALibrate
                       2407 ; rs232cmd.c  549                                               :ENABle         OFF|ON
                       2408 ; rs232cmd.c  550                                               :ADJust         UP|DOWN|MIN|MAX
                       2409 ; rs232cmd.c  551                                               :STORe
                       2410 ; rs232cmd.c  552                                                                                
                                    
                       2411 ; rs232cmd.c  553       */
                       2412 ; rs232cmd.c  554       //***********************************************************************
                            ***
                       2413 ; rs232cmd.c  555       struct CMD_STRUCT code Input[1] = {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  29

ADDR   CODE            LINE SOURCELINE
000972 rrrrrrrrrrrrrr  2414         DD      _StatusQuestEnable
       rr                   
                       2418         PUBLIC  _Input
                       2419         ALIGN   1
000976 rrrrrrrrrrrrrr  2420 _Input: DD      _GENLOCKCmdTxt,_GENLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00097E 00000000        2421         DD      000000000H
000982 rrrrrrrrrrrrrr  2422         DD      _GenlockLevel1
       rr                   
000986 00000000        2423         DD      000000000H
                       2424 ; rs232cmd.c  556               { GENLOCKCmdTxt, GENLCmdTxt, NULL, &GenlockLevel1[0], NONE, Genlo
                            ckGen},
                       2425 ; rs232cmd.c  557       };
                       2426 ; rs232cmd.c  558       
                       2427 ; rs232cmd.c  559       struct CMD_STRUCT code GenlockLevel1[3] = {
00098A rrrrrrrrrrrrrr  2428         DD      _GenlockGen
       rr                   
                       2431         PUBLIC  _GenlockLevel1
                       2432         ALIGN   1
00098E                 2433 _GenlockLevel1:
00098E rrrrrrrrrrrrrr  2434         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000996 rrrrrrrrrrrrrr  2435         DD      _GenlockLevel1+24
       rr                   
00099A 00000000000000  2436         DD      000000000H,000000000H
       00                   
0009A2 rrrrrrrrrrrrrr  2437         DD      _GenlockGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009AE rrrrrrrrrrrrrr  2438         DD      _GenlockLevel1+48
       rr                   
0009B2 00000000000000  2439         DD      000000000H,000000000H
       00                   
0009BA rrrrrrrrrrrrrr  2440         DD      _GenlockGenDelay,_CALIBRATECmdTxt,_CALCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009C6 00000000        2441         DD      000000000H
0009CA rrrrrrrrrrrrrr  2442         DD      _GenlockLevel1_1
       rr                   
                       2443 ; rs232cmd.c  560               { SYSTEMCmdTxt,          SYSTCmdTxt, &GenlockLevel1[1], NULL,    
                                                              NONE, GenlockGenSystem},
                       2444 ; rs232cmd.c  561               { DELAYCmdTxt,   DELCmdTxt,  &GenlockLevel1[2], NULL,            
                                                      NONE, GenlockGenDelay},
                       2445 ; rs232cmd.c  562               { CALIBRATECmdTxt, CALCmdTxt,  NULL,                             
                             &GenlockLevel1_1[0], NONE, NONE},
                       2446 ; rs232cmd.c  563       };
                       2447 ; rs232cmd.c  564       
                       2448 ; rs232cmd.c  565       struct CMD_STRUCT code GenlockLevel1_1[3] = {
0009CE 00000000000000  2449         DD      000000000H,000000000H
       00                   
                       2452         PUBLIC  _GenlockLevel1_1
                       2453         ALIGN   1
0009D6                 2454 _GenlockLevel1_1:
0009D6 rrrrrrrrrrrrrr  2455         DD      _ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0009DE rrrrrrrrrrrrrr  2456         DD      _GenlockLevel1_1+24
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  30

ADDR   CODE            LINE SOURCELINE
0009E2 00000000000000  2457         DD      000000000H,000000000H
       00                   
0009EA rrrrrrrrrrrrrr  2458         DD      _GenlockGenCalibrateEnable,_ADJUSTCmdTxt,_ADJCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009F6 rrrrrrrrrrrrrr  2459         DD      _GenlockLevel1_1+48
       rr                   
0009FA 00000000000000  2460         DD      000000000H,000000000H
       00                   
000A02 rrrrrrrrrrrrrr  2461         DD      _GenlockGenCalibrateAdjust,_STORECmdTxt,_STORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A0E 00000000000000  2462         DD      000000000H,000000000H,000000000H
       0000000000           
                       2463 ; rs232cmd.c  566               { ENABLECmdTxt, ENABCmdTxt, &GenlockLevel1_1[1], NULL, NONE, Genl
                            ockGenCalibrateEnable},
                       2464 ; rs232cmd.c  567               { ADJUSTCmdTxt, ADJCmdTxt,  &GenlockLevel1_1[2], NULL, NONE, Genl
                            ockGenCalibrateAdjust},
                       2465 ; rs232cmd.c  568               { STORECmdTxt,  STORCmdTxt, NULL,                                
                                     NULL, NONE, GenlockGenCalibrateStore},
                       2466 ; rs232cmd.c  569       };
                       2467 ; rs232cmd.c  570       // **********************************************************************
                            ****
                       2468 ; rs232cmd.c  571       /*      CMD:    SUB1:   SUB2:           PARM:
                       2469 ; rs232cmd.c  572                       OUTPut
                       2470 ; rs232cmd.c  573                               :BB1-3<?>
                       2471 ; rs232cmd.c  574                                       :SYSTem                 INTernal | PALBur
                            st | NTSCburst |F10MHZ
                       2472 ; rs232cmd.c  575                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2473 ; rs232cmd.c  576                                       :SCHPhase               <-179to 180>
                       2474 ; rs232cmd.c  577       
                       2475 ; rs232cmd.c  578                               :CBGenerator<?>
                       2476 ; rs232cmd.c  579                                       :PATTern          <pattern name>
                       2477 ; rs232cmd.c  580                                       :SYSTem                 PAL|NTSC
                       2478 ; rs232cmd.c  581                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2479 ; rs232cmd.c  582                                       :SCHPhase               <-179to 180>
                       2480 ; rs232cmd.c  583                                       :EMBaudio<?>
                       2481 ; rs232cmd.c  584                                               [:SIGNal]       OFF | SILence | F
                            1KHZ
                       2482 ; rs232cmd.c  585                                               :LEVel
                       2483 ; rs232cmd.c  586       
                       2484 ; rs232cmd.c  587                               :AUDio
                       2485 ; rs232cmd.c  588                                       :OUTPut
                       2486 ; rs232cmd.c  589                                       :ANALog<?>
                       2487 ; rs232cmd.c  590                                               :SIGNal
                       2488 ; rs232cmd.c  591                                               :LEVel
                       2489 ; rs232cmd.c  592                                               :CLICk
                       2490 ; rs232cmd.c  593                                       :AESebu<?>
                       2491 ; rs232cmd.c  594                                               :SYSTem
                       2492 ; rs232cmd.c  595                                               :SIGNal
                       2493 ; rs232cmd.c  596                                               :LEVel
                       2494 ; rs232cmd.c  597                                               :TIMing
                       2495 ; rs232cmd.c  598                                               :WORDclock
                       2496 ; rs232cmd.c  599                                               :CLICkperiod
                       2497 ; rs232cmd.c  600       */
                       2498 ; rs232cmd.c  601       struct CMD_STRUCT code Output[3] = {
000A1A rrrrrrrrrrrrrr  2499         DD      _GenlockGenCalibrateStore
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  31

ADDR   CODE            LINE SOURCELINE
                       2502         PUBLIC  _Output
                       2503         ALIGN   1
000A1E                 2504 _Output:
000A1E rrrrrrrrrrrrrr  2505         DD      _BBCmdTxt,_BBCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000A26 rrrrrrrrrrrrrr  2506         DD      _Output+24
       rr                   
000A2A rrrrrrrrrrrrrr  2507         DD      _BBGenLevel1,_BBGenSuffix,_BBGen,_CBGENERATORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrrrr             
000A3A rrrrrrrrrrrrrr  2508         DD      _CBGCmdTxt
       rr                   
000A3E rrrrrrrrrrrrrr  2509         DD      _Output+48
       rr                   
000A42 rrrrrrrrrrrrrr  2510         DD      _CBGenLevel1
       rr                   
000A46 00000000        2511         DD      000000000H
000A4A rrrrrrrrrrrrrr  2512         DD      _CBGen,_AUDIOCmdTxt,_AUDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A56 00000000        2513         DD      000000000H
000A5A rrrrrrrrrrrrrr  2514         DD      _AudioGenLevel1
       rr                   
000A5E 00000000        2515         DD      000000000H
                       2516 ; rs232cmd.c  602               { BBCmdTxt,                     BBCmdTxt,  &Output[1], &BBGenLeve
                            l1[0],   BBGenSuffix, BBGen},
                       2517 ; rs232cmd.c  603               { CBGENERATORCmdTxt, CBGCmdTxt, &Output[2], &CBGenLevel1[0],     
                            NONE,             CBGen},
                       2518 ; rs232cmd.c  604               { AUDIOCmdTxt,          AUDCmdTxt, NULL,                  &AudioG
                            enLevel1[0], NONE,                AudioGenOutput},
                       2519 ; rs232cmd.c  605       };
                       2520 ; rs232cmd.c  606       
                       2521 ; rs232cmd.c  607       struct CMD_STRUCT code BBGenLevel1[3] = {
000A62 rrrrrrrrrrrrrr  2522         DD      _AudioGenOutput
       rr                   
                       2525         PUBLIC  _BBGenLevel1
                       2526         ALIGN   1
000A66                 2527 _BBGenLevel1:
000A66 rrrrrrrrrrrrrr  2528         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000A6E rrrrrrrrrrrrrr  2529         DD      _BBGenLevel1+24
       rr                   
000A72 00000000000000  2530         DD      000000000H,000000000H
       00                   
000A7A rrrrrrrrrrrrrr  2531         DD      _BBGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A86 rrrrrrrrrrrrrr  2532         DD      _BBGenLevel1+48
       rr                   
000A8A 00000000000000  2533         DD      000000000H,000000000H
       00                   
000A92 rrrrrrrrrrrrrr  2534         DD      _BBGenDelay,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  32

ADDR   CODE            LINE SOURCELINE
000A9E 00000000000000  2535         DD      000000000H,000000000H,000000000H
       0000000000           
                       2536 ; rs232cmd.c  608               { SYSTEMCmdTxt,         SYSTCmdTxt, &BBGenLevel1[1], NULL, NONE, 
                            BBGenSystem},
                       2537 ; rs232cmd.c  609               { DELAYCmdTxt,     DELCmdTxt,  &BBGenLevel1[2], NULL, NONE, BBGen
                            Delay},
                       2538 ; rs232cmd.c  610               { SCHPHASECmdTxt, SCHPCmdTxt, NULL,                       NULL, N
                            ONE, BBGenScHPhase},
                       2539 ; rs232cmd.c  611       };
                       2540 ; rs232cmd.c  612       
                       2541 ; rs232cmd.c  613       struct CMD_STRUCT code CBGenLevel1[5] = {
000AAA rrrrrrrrrrrrrr  2542         DD      _BBGenScHPhase
       rr                   
                       2546         PUBLIC  _CBGenLevel1
                       2547         ALIGN   1
000AAE                 2548 _CBGenLevel1:
000AAE rrrrrrrrrrrrrr  2549         DD      _PATTERNCmdTxt,_PATTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000AB6 rrrrrrrrrrrrrr  2550         DD      _CBGenLevel1+24
       rr                   
000ABA 00000000000000  2551         DD      000000000H,000000000H
       00                   
000AC2 rrrrrrrrrrrrrr  2552         DD      _CBGenPattern,_SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000ACE rrrrrrrrrrrrrr  2553         DD      _CBGenLevel1+48
       rr                   
000AD2 00000000000000  2554         DD      000000000H,000000000H
       00                   
000ADA rrrrrrrrrrrrrr  2555         DD      _CBGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000AE6 rrrrrrrrrrrrrr  2556         DD      _CBGenLevel1+72
       rr                   
000AEA 00000000000000  2557         DD      000000000H,000000000H
       00                   
000AF2 rrrrrrrrrrrrrr  2558         DD      _CBGenDelay,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000AFE rrrrrrrrrrrrrr  2559         DD      _CBGenLevel1+96
       rr                   
000B02 00000000000000  2560         DD      000000000H,000000000H
       00                   
000B0A rrrrrrrrrrrrrr  2561         DD      _CBGenScHPhase,_EMBAUDIOCmdTxt,_EMBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B16 00000000        2562         DD      000000000H
000B1A rrrrrrrrrrrrrr  2563         DD      _CBGenLevel1_1
       rr                   
000B1E 00000000        2564         DD      000000000H
                       2565 ; rs232cmd.c  614               { PATTERNCmdTxt,        PATTCmdTxt, &CBGenLevel1[1], NULL,       
                                                            NONE, CBGenPattern},
                       2566 ; rs232cmd.c  615               { SYSTEMCmdTxt,         SYSTCmdTxt, &CBGenLevel1[2], NULL,       
                                                            NONE, CBGenSystem},
                       2567 ; rs232cmd.c  616               { DELAYCmdTxt,     DELCmdTxt,  &CBGenLevel1[3], NULL,            
                                                    NONE, CBGenDelay},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  33

ADDR   CODE            LINE SOURCELINE
                       2568 ; rs232cmd.c  617               { SCHPHASECmdTxt, SCHPCmdTxt, &CBGenLevel1[4], NULL,             
                                                    NONE, CBGenScHPhase},
                       2569 ; rs232cmd.c  618               { EMBAUDIOCmdTxt, EMBCmdTxt,    NULL,                     &CBGenL
                            evel1_1[0], NONE, CBGenEmbAudioSignal},
                       2570 ; rs232cmd.c  619       };
                       2571 ; rs232cmd.c  620       
                       2572 ; rs232cmd.c  621       struct CMD_STRUCT code CBGenLevel1_1[2] = {
000B22 rrrrrrrrrrrrrr  2573         DD      _CBGenEmbAudioSignal
       rr                   
                       2577         PUBLIC  _CBGenLevel1_1
                       2578         ALIGN   1
000B26                 2579 _CBGenLevel1_1:
000B26 rrrrrrrrrrrrrr  2580         DD      _SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000B2E rrrrrrrrrrrrrr  2581         DD      _CBGenLevel1_1+24
       rr                   
000B32 00000000000000  2582         DD      000000000H,000000000H
       00                   
000B3A rrrrrrrrrrrrrr  2583         DD      _CBGenEmbAudioSignal,_LEVELCmdTxt,_LEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
                       2584 ; rs232cmd.c  622               { SIGNALCmdTxt, SIGNCmdTxt, &CBGenLevel1_1[1], NULL, NONE, CBGenE
                            mbAudioSignal},
                       2585 ; rs232cmd.c  623               { LEVELCmdTxt,  LEVCmdTxt,  NULL,                                
                             NULL, NONE, NONE},
                       2586 ; rs232cmd.c  624       };
                       2587 ; rs232cmd.c  625       
                       2588 ; rs232cmd.c  626       struct CMD_STRUCT code AudioGenLevel1[3] = {
000B46 00000000000000  2589         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2592         PUBLIC  _AudioGenLevel1
                       2593         ALIGN   1
000B56                 2594 _AudioGenLevel1:
000B56 rrrrrrrrrrrrrr  2595         DD      _OUTPUTCmdTxt,_OUTPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000B5E rrrrrrrrrrrrrr  2596         DD      _AudioGenLevel1+24
       rr                   
000B62 00000000000000  2597         DD      000000000H,000000000H
       00                   
000B6A rrrrrrrrrrrrrr  2598         DD      _AudioGenOutput,_ANALOGCmdTxt,_ANALCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B76 rrrrrrrrrrrrrr  2599         DD      _AudioGenLevel1+48
       rr                   
000B7A rrrrrrrrrrrrrr  2600         DD      _AudioGenLevel1_1
       rr                   
000B7E 00000000        2601         DD      000000000H
000B82 rrrrrrrrrrrrrr  2602         DD      _AudioGenAnalog,_AESEBUCmdTxt,_AESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B8E 00000000        2603         DD      000000000H
000B92 rrrrrrrrrrrrrr  2604         DD      _AudioGenLevel1_2
       rr                   
000B96 00000000        2605         DD      000000000H
                       2606 ; rs232cmd.c  627               { OUTPUTCmdTxt, OUTPCmdTxt, &AudioGenLevel1[1], NULL,            
                                                     NONE, AudioGenOutput},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  34

ADDR   CODE            LINE SOURCELINE
                       2607 ; rs232cmd.c  628               { ANALOGCmdTxt, ANALCmdTxt, &AudioGenLevel1[2], &AudioGenLevel1_1
                            [0], NONE, AudioGenAnalog},
                       2608 ; rs232cmd.c  629               { AESEBUCmdTxt, AESCmdTxt,  NULL,                                
                              &AudioGenLevel1_2[0], NONE, AudioGenAESEBU},
                       2609 ; rs232cmd.c  630       };
                       2610 ; rs232cmd.c  631       
                       2611 ; rs232cmd.c  632       struct CMD_STRUCT code AudioGenLevel1_1[3] = {
000B9A rrrrrrrrrrrrrr  2612         DD      _AudioGenAESEBU
       rr                   
                       2615         PUBLIC  _AudioGenLevel1_1
                       2616         ALIGN   1
000B9E                 2617 _AudioGenLevel1_1:
000B9E rrrrrrrrrrrrrr  2618         DD      _SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000BA6 rrrrrrrrrrrrrr  2619         DD      _AudioGenLevel1_1+24
       rr                   
000BAA 00000000000000  2620         DD      000000000H,000000000H
       00                   
000BB2 rrrrrrrrrrrrrr  2621         DD      _AudioGenAnalogSignal,_LEVELCmdTxt,_LEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000BBE rrrrrrrrrrrrrr  2622         DD      _AudioGenLevel1_1+48
       rr                   
000BC2 00000000000000  2623         DD      000000000H,000000000H
       00                   
000BCA rrrrrrrrrrrrrr  2624         DD      _AudioGenAnalogLevel,_CLICKCmdTxt,_CLICCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000BD6 00000000000000  2625         DD      000000000H,000000000H,000000000H
       0000000000           
                       2626 ; rs232cmd.c  633               { SIGNALCmdTxt, SIGNCmdTxt, &AudioGenLevel1_1[1], NULL, NONE, Aud
                            ioGenAnalogSignal},
                       2627 ; rs232cmd.c  634               { LEVELCmdTxt,  LEVCmdTxt,  &AudioGenLevel1_1[2], NULL, NONE, Aud
                            ioGenAnalogLevel},
                       2628 ; rs232cmd.c  635               { CLICKCmdTxt,  CLICCmdTxt, NULL,                                
                                      NULL, NONE, AudioGenAnalogClick},
                       2629 ; rs232cmd.c  636       };
                       2630 ; rs232cmd.c  637       
                       2631 ; rs232cmd.c  638       struct CMD_STRUCT code AudioGenLevel1_2[6] = {
000BE2 rrrrrrrrrrrrrr  2632         DD      _AudioGenAnalogClick
       rr                   
                       2635         PUBLIC  _AudioGenLevel1_2
                       2636         ALIGN   1
000BE6                 2637 _AudioGenLevel1_2:
000BE6 rrrrrrrrrrrrrr  2638         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000BEE rrrrrrrrrrrrrr  2639         DD      _AudioGenLevel1_2+24
       rr                   
000BF2 00000000000000  2640         DD      000000000H,000000000H
       00                   
000BFA rrrrrrrrrrrrrr  2641         DD      _AudioGenAESEBUSystem,_SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C06 rrrrrrrrrrrrrr  2642         DD      _AudioGenLevel1_2+48
       rr                   
000C0A 00000000000000  2643         DD      000000000H,000000000H
       00                   
000C12 rrrrrrrrrrrrrr  2644         DD      _AudioGenAESEBUSignal,_LEVELCmdTxt,_LEVCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  35

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C1E rrrrrrrrrrrrrr  2645         DD      _AudioGenLevel1_2+72
       rr                   
000C22 00000000000000  2646         DD      000000000H,000000000H
       00                   
000C2A rrrrrrrrrrrrrr  2647         DD      _AudioGenAESEBULevel,_TIMINGCmdTxt,_TIMCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C36 rrrrrrrrrrrrrr  2648         DD      _AudioGenLevel1_2+96
       rr                   
000C3A 00000000000000  2649         DD      000000000H,000000000H
       00                   
000C42 rrrrrrrrrrrrrr  2650         DD      _AudioGenAESEBUTiming,_WORDCLOCKCmdTxt,_WORDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C4E rrrrrrrrrrrrrr  2651         DD      _AudioGenLevel1_2+120
       rr                   
000C52 00000000000000  2652         DD      000000000H,000000000H
       00                   
000C5A rrrrrrrrrrrrrr  2653         DD      _AudioGenAESEBUWordClock,_CLICKCmdTxt,_CLICCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C66 00000000000000  2654         DD      000000000H,000000000H,000000000H
       0000000000           
                       2655 ; rs232cmd.c  639               { SYSTEMCmdTxt,          SYSTCmdTxt, &AudioGenLevel1_2[1], NULL, 
                            NONE, AudioGenAESEBUSystem},
                       2656 ; rs232cmd.c  640               { SIGNALCmdTxt,          SIGNCmdTxt, &AudioGenLevel1_2[2], NULL, 
                            NONE, AudioGenAESEBUSignal},
                       2657 ; rs232cmd.c  641               { LEVELCmdTxt,   LEVCmdTxt,  &AudioGenLevel1_2[3], NULL, NONE, Au
                            dioGenAESEBULevel},
                       2658 ; rs232cmd.c  642               { TIMINGCmdTxt,  TIMCmdTxt,  &AudioGenLevel1_2[4], NULL, NONE, Au
                            dioGenAESEBUTiming},
                       2659 ; rs232cmd.c  643               { WORDCLOCKCmdTxt, WORDCmdTxt, &AudioGenLevel1_2[5], NULL, NONE, 
                            AudioGenAESEBUWordClock},
                       2660 ; rs232cmd.c  644               { CLICKCmdTxt,   CLICCmdTxt, NULL,                               
                                      NULL, NONE, AudioGenAESEBUClick},
                       2661 ; rs232cmd.c  645       };
                       2662 ; rs232cmd.c  646       
                       2663 ; rs232cmd.c  647       // **********************************************************************
                            ****
                       2664 ; rs232cmd.c  648       /*      CMD:    SUB1:   SUB2:           PARM:
                       2665 ; rs232cmd.c  649                       FACTORY
                       2666 ; rs232cmd.c  650                               :PASSword
                       2667 ; rs232cmd.c  651       
                       2668 ; rs232cmd.c  652                               :RESet
                       2669 ; rs232cmd.c  653       
                       2670 ; rs232cmd.c  654                               :V24Circuit
                       2671 ; rs232cmd.c  655                                       :COMMand
                       2672 ; rs232cmd.c  656                                       :TRANsparent
                       2673 ; rs232cmd.c  657       
                       2674 ; rs232cmd.c  658                               :CHECksum
                       2675 ; rs232cmd.c  659                                       :CODE
                       2676 ; rs232cmd.c  660                                       :PLD
                       2677 ; rs232cmd.c  661                                       :EMBaudio
                       2678 ; rs232cmd.c  662                                       :PATTern
                       2679 ; rs232cmd.c  663       
                       2680 ; rs232cmd.c  664                               :MAINboard
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  36

ADDR   CODE            LINE SOURCELINE
                       2681 ; rs232cmd.c  665                                       :VERSion
                       2682 ; rs232cmd.c  666                                       :IDN
                       2683 ; rs232cmd.c  667                                               :COMPany
                       2684 ; rs232cmd.c  668                                               :TYPE
                       2685 ; rs232cmd.c  669                                               :KUNumber
                       2686 ; rs232cmd.c  670                                               :SWRevision
                       2687 ; rs232cmd.c  671                                       :SYSTem                         PAL|NTSC
                       2688 ; rs232cmd.c  672                                       :FMSDate
                       2689 ; rs232cmd.c  673                                               :PRODuction     <year>,<month>,<d
                            ay>
                       2690 ; rs232cmd.c  674                                               :UPDate                 <year>,<m
                            onth>,<day>
                       2691 ; rs232cmd.c  675       
                       2692 ; rs232cmd.c  676                               :GENLock
                       2693 ; rs232cmd.c  677                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2694 ; rs232cmd.c  678                                       :VERSion
                       2695 ; rs232cmd.c  679                                       :FREFerence
                       2696 ; rs232cmd.c  680                                               [:DATE]                 <year>,<m
                            onth>,<day>
                       2697 ; rs232cmd.c  681                                               :DAC
                       2698 ; rs232cmd.c  682                                       :UREFerence
                       2699 ; rs232cmd.c  683                                               [:DATE]                 <year>,<m
                            onth>,<day>
                       2700 ; rs232cmd.c  684                                               :DAC
                       2701 ; rs232cmd.c  685                                       :HPHZero                        <pal>,<nt
                            sc>
                       2702 ; rs232cmd.c  686                                       :PHASe                          <pal>,<nt
                            sc>
                       2703 ; rs232cmd.c  687       
                       2704 ; rs232cmd.c  688                               :BB 1
                       2705 ; rs232cmd.c  689                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2706 ; rs232cmd.c  690                                       :VERSion
                       2707 ; rs232cmd.c  691                                       :SIGNAL                         NORMAL|F4
                            5MHZ
                       2708 ; rs232cmd.c  692                                       :PHASe                          <pal>,<nt
                            sc>
                       2709 ; rs232cmd.c  693                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2710 ; rs232cmd.c  694                                       :DAC                                    <
                            gain>,<offset>,<level>
                       2711 ; rs232cmd.c  695       
                       2712 ; rs232cmd.c  696                               :BB 2-3
                       2713 ; rs232cmd.c  697                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2714 ; rs232cmd.c  698                                       :PHASe                          <pal>,<nt
                            sc>
                       2715 ; rs232cmd.c  699                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2716 ; rs232cmd.c  700                                       :DAC                                    <
                            gain>,<offset>,<level>
                       2717 ; rs232cmd.c  701       
                       2718 ; rs232cmd.c  702                               :CBGenerator
                       2719 ; rs232cmd.c  703                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2720 ; rs232cmd.c  704                                       :AGAin                          <pal>,<nt
                            sc>
                       2721 ; rs232cmd.c  705                                       :CGAin                          <pal>,<nt
                            sc>
                       2722 ; rs232cmd.c  706                                       :PHASE                          <pal>,<nt
                            sc>
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  37

ADDR   CODE            LINE SOURCELINE
                       2723 ; rs232cmd.c  707                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2724 ; rs232cmd.c  708       
                       2725 ; rs232cmd.c  709                               :AUDio
                       2726 ; rs232cmd.c  710                                       [:STATus]
                       2727 ; rs232cmd.c  711                                       :DATE                                   <
                            year>,<month>,<day>
                       2728 ; rs232cmd.c  712                                       :ALEVel                         <left>,<r
                            ight>
                       2729 ; rs232cmd.c  713       
                       2730 ; rs232cmd.c  714                               :PLD
                       2731 ; rs232cmd.c  715                                       :VERSion                        <video>,<
                            audio>
                       2732 ; rs232cmd.c  716       
                       2733 ; rs232cmd.c  717                               :TCXO
                       2734 ; rs232cmd.c  718                                       [:STATus]
                       2735 ; rs232cmd.c  719       
                       2736 ; rs232cmd.c  720                               :MMCH                                           <
                            subaddress>[,<data>]
                       2737 ; rs232cmd.c  721       
                       2738 ; rs232cmd.c  722       */                                                                      
                       2739 ; rs232cmd.c  723       
                       2740 ; rs232cmd.c  724       struct CMD_STRUCT code Factory[12] = {
000C72 rrrrrrrrrrrrrr  2741         DD      _AudioGenAESEBUClick
       rr                   
                       2744         PUBLIC  _Factory
                       2745         ALIGN   1
000C76                 2746 _Factory:
000C76 rrrrrrrrrrrrrr  2747         DD      _PASSWORDCmdTxt,_PASSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000C7E rrrrrrrrrrrrrr  2748         DD      _Factory+24
       rr                   
000C82 00000000000000  2749         DD      000000000H,000000000H
       00                   
000C8A rrrrrrrrrrrrrr  2750         DD      _FactPassword,_RESETCmdTxt,_RESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C96 rrrrrrrrrrrrrr  2751         DD      _Factory+48
       rr                   
000C9A 00000000000000  2752         DD      000000000H,000000000H
       00                   
000CA2 rrrrrrrrrrrrrr  2753         DD      _FactReset,_V24CIRCUITCmdTxt,_V24CCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000CAE rrrrrrrrrrrrrr  2754         DD      _Factory+72
       rr                   
000CB2 rrrrrrrrrrrrrr  2755         DD      _FactoryLevel1
       rr                   
000CB6 00000000000000  2756         DD      000000000H,000000000H
       00                   
000CBE rrrrrrrrrrrrrr  2757         DD      _CHECKSUMCmdTxt,_CHECCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CC6 rrrrrrrrrrrrrr  2758         DD      _Factory+96
       rr                   
000CCA rrrrrrrrrrrrrr  2759         DD      _FactoryLevel9
       rr                   
000CCE 00000000000000  2760         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  38

ADDR   CODE            LINE SOURCELINE
000CD6 rrrrrrrrrrrrrr  2761         DD      _MAINBOARDCmdTxt,_MAINCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CDE rrrrrrrrrrrrrr  2762         DD      _Factory+120
       rr                   
000CE2 rrrrrrrrrrrrrr  2763         DD      _FactoryLevel2
       rr                   
000CE6 00000000000000  2764         DD      000000000H,000000000H
       00                   
000CEE rrrrrrrrrrrrrr  2765         DD      _GENLOCKCmdTxt,_GENLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CF6 rrrrrrrrrrrrrr  2766         DD      _Factory+144
       rr                   
000CFA rrrrrrrrrrrrrr  2767         DD      _FactoryLevel3
       rr                   
000CFE 00000000        2768         DD      000000000H
000D02 rrrrrrrrrrrrrr  2769         DD      _FactGenlockGenDate,_BBCmdTxt,_BBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D0E rrrrrrrrrrrrrr  2770         DD      _Factory+168
       rr                   
000D12 rrrrrrrrrrrrrr  2771         DD      _FactoryLevel4,_BBGenSuffix,_FactBBGenDate
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D1E rrrrrrrrrrrrrr  2772         DD      _CBGENERATORCmdTxt,_CBGCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000D26 rrrrrrrrrrrrrr  2773         DD      _Factory+192
       rr                   
000D2A rrrrrrrrrrrrrr  2774         DD      _FactoryLevel5
       rr                   
000D2E 00000000        2775         DD      000000000H
000D32 rrrrrrrrrrrrrr  2776         DD      _FactCBGenDate,_AUDIOCmdTxt,_AUDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D3E rrrrrrrrrrrrrr  2777         DD      _Factory+216
       rr                   
000D42 rrrrrrrrrrrrrr  2778         DD      _FactoryLevel6
       rr                   
000D46 00000000        2779         DD      000000000H
000D4A rrrrrrrrrrrrrr  2780         DD      _FactAudioGenStatus,_PLDCmdTxt,_PLDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D56 rrrrrrrrrrrrrr  2781         DD      _Factory+240
       rr                   
000D5A rrrrrrrrrrrrrr  2782         DD      _FactoryLevel7
       rr                   
000D5E 00000000        2783         DD      000000000H
000D62 rrrrrrrrrrrrrr  2784         DD      _FactPLDVersion,_TCXOCmdTxt,_TCXOCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D6E rrrrrrrrrrrrrr  2785         DD      _Factory+264
       rr                   
000D72 rrrrrrrrrrrrrr  2786         DD      _FactoryLevel8
       rr                   
000D76 00000000        2787         DD      000000000H
000D7A rrrrrrrrrrrrrr  2788         DD      _FactTCXOStatus,_MMCHIPCmdTxt,_MMCHCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  39

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D86 00000000000000  2789         DD      000000000H,000000000H,000000000H
       0000000000           
                       2790 ; rs232cmd.c  725               { PASSWORDCmdTxt,       PASSCmdTxt, &Factory[1],  NULL,          
                                                    NONE,            FactPassword},
                       2791 ; rs232cmd.c  726               { RESETCmdTxt,          RESCmdTxt,  &Factory[2],  NULL,          
                                                    NONE,            FactReset},
                       2792 ; rs232cmd.c  727               { V24CIRCUITCmdTxt,     V24CCmdTxt, &Factory[3],  &FactoryLevel1[
                            0], NONE,                NONE},
                       2793 ; rs232cmd.c  728               { CHECKSUMCmdTxt,       CHECCmdTxt, &Factory[4],  &FactoryLevel9[
                            0], NONE,                        NONE},
                       2794 ; rs232cmd.c  729               { MAINBOARDCmdTxt,      MAINCmdTxt, &Factory[5],  &FactoryLevel2[
                            0], NONE,                        NONE},
                       2795 ; rs232cmd.c  730               { GENLOCKCmdTxt,                GENLCmdTxt,     &Factory[6],  &Fa
                            ctoryLevel3[0], NONE,                    FactGenlockGenDate},
                       2796 ; rs232cmd.c  731               { BBCmdTxt,                     BBCmdTxt,       &Factory[7],  &Fa
                            ctoryLevel4[0], BBGenSuffix, FactBBGenDate},
                       2797 ; rs232cmd.c  732               { CBGENERATORCmdTxt, CBGCmdTxt,         &Factory[8],  &FactoryLev
                            el5[0], NONE,                    FactCBGenDate},
                       2798 ; rs232cmd.c  733               { AUDIOCmdTxt,          AUDCmdTxt,      &Factory[9],  &FactoryLev
                            el6[0], NONE,                    FactAudioGenStatus},
                       2799 ; rs232cmd.c  734               { PLDCmdTxt,                    PLDCmdTxt,      &Factory[10], &Fa
                            ctoryLevel7[0], NONE,                    FactPLDVersion},
                       2800 ; rs232cmd.c  735               { TCXOCmdTxt,                   TCXOCmdTxt,     &Factory[11], &Fa
                            ctoryLevel8[0], NONE,                    FactTCXOStatus},
                       2801 ; rs232cmd.c  736               { MMCHIPCmdTxt,                 MMCHCmdTxt, NULL,                
                                      NULL,                                 NONE,                    FactMultiMediaChip},
                       2802 ; rs232cmd.c  737       };
                       2803 ; rs232cmd.c  738       
                       2804 ; rs232cmd.c  739       struct CMD_STRUCT code FactoryLevel1[2] = {
000D92 rrrrrrrrrrrrrr  2805         DD      _FactMultiMediaChip
       rr                   
                       2808         PUBLIC  _FactoryLevel1
                       2809         ALIGN   1
000D96                 2810 _FactoryLevel1:
000D96 rrrrrrrrrrrrrr  2811         DD      _COMMANDCmdTxt,_COMMCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000D9E rrrrrrrrrrrrrr  2812         DD      _FactoryLevel1+24
       rr                   
000DA2 00000000000000  2813         DD      000000000H,000000000H
       00                   
000DAA rrrrrrrrrrrrrr  2814         DD      _FactV24Command,_TRANSPARENTCmdTxt,_TRANCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DB6 00000000000000  2815         DD      000000000H,000000000H,000000000H
       0000000000           
                       2816 ; rs232cmd.c  740               { COMMANDCmdTxt,                 COMMCmdTxt, &FactoryLevel1[1], N
                            ULL, NONE, FactV24Command},
                       2817 ; rs232cmd.c  741               { TRANSPARENTCmdTxt, TRANCmdTxt, NULL,                           
                                              NULL, NONE, FactV24Transparent},
                       2818 ; rs232cmd.c  742       };
                       2819 ; rs232cmd.c  743       
                       2820 ; rs232cmd.c  744       struct CMD_STRUCT code FactoryLevel9[5] = {
000DC2 rrrrrrrrrrrrrr  2821         DD      _FactV24Transparent
       rr                   
                       2824         PUBLIC  _FactoryLevel9
                       2825         ALIGN   1
000DC6                 2826 _FactoryLevel9:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  40

ADDR   CODE            LINE SOURCELINE
000DC6 rrrrrrrrrrrrrr  2827         DD      _CODECmdTxt,_CODECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000DCE rrrrrrrrrrrrrr  2828         DD      _FactoryLevel9+24
       rr                   
000DD2 00000000000000  2829         DD      000000000H,000000000H
       00                   
000DDA rrrrrrrrrrrrrr  2830         DD      _FactChecksumCode,_PLDCmdTxt,_PLDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DE6 rrrrrrrrrrrrrr  2831         DD      _FactoryLevel9+48
       rr                   
000DEA 00000000000000  2832         DD      000000000H,000000000H
       00                   
000DF2 rrrrrrrrrrrrrr  2833         DD      _FactChecksumPLD,_EMBAUDIOCmdTxt,_EMBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DFE rrrrrrrrrrrrrr  2834         DD      _FactoryLevel9+72
       rr                   
000E02 00000000000000  2835         DD      000000000H,000000000H
       00                   
000E0A rrrrrrrrrrrrrr  2836         DD      _FactChecksumEmbAudio,_PATTERNCmdTxt,_PATTCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E16 rrrrrrrrrrrrrr  2837         DD      _FactoryLevel9+96
       rr                   
000E1A 00000000000000  2838         DD      000000000H,000000000H
       00                   
000E22 rrrrrrrrrrrrrr  2839         DD      _FactChecksumPattern,_RANGECmdTxt,_RANGCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E2E 00000000000000  2840         DD      000000000H,000000000H,000000000H
       0000000000           
                       2841 ; rs232cmd.c  745               { CODECmdTxt,           CODECmdTxt, &FactoryLevel9[1], NULL, NONE
                            , FactChecksumCode},
                       2842 ; rs232cmd.c  746               { PLDCmdTxt,            PLDCmdTxt,  &FactoryLevel9[2], NULL, NONE
                            , FactChecksumPLD},
                       2843 ; rs232cmd.c  747               { EMBAUDIOCmdTxt, EMBCmdTxt,  &FactoryLevel9[3], NULL, NONE, Fact
                            ChecksumEmbAudio},
                       2844 ; rs232cmd.c  748               { PATTERNCmdTxt,        PATTCmdTxt, &FactoryLevel9[4], NULL, NONE
                            , FactChecksumPattern},
                       2845 ; rs232cmd.c  749               { RANGECmdTxt,  RANGCmdTxt, NULL,                                
                            NULL, NONE, FactChecksumRange},
                       2846 ; rs232cmd.c  750       };
                       2847 ; rs232cmd.c  751       
                       2848 ; rs232cmd.c  752       struct CMD_STRUCT code FactoryLevel2[4] = {
000E3A rrrrrrrrrrrrrr  2849         DD      _FactChecksumRange
       rr                   
                       2853         PUBLIC  _FactoryLevel2
                       2854         ALIGN   1
000E3E                 2855 _FactoryLevel2:
000E3E rrrrrrrrrrrrrr  2856         DD      _VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000E46 rrrrrrrrrrrrrr  2857         DD      _FactoryLevel2+24
       rr                   
000E4A 00000000000000  2858         DD      000000000H,000000000H
       00                   
000E52 rrrrrrrrrrrrrr  2859         DD      _FactMainVersion,_IDNCmdTxt,_IDNCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  41

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E5E rrrrrrrrrrrrrr  2860         DD      _FactoryLevel2+48
       rr                   
000E62 rrrrrrrrrrrrrr  2861         DD      _FactoryLevel2_2
       rr                   
000E66 00000000000000  2862         DD      000000000H,000000000H
       00                   
000E6E rrrrrrrrrrrrrr  2863         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000E76 rrrrrrrrrrrrrr  2864         DD      _FactoryLevel2+72
       rr                   
000E7A 00000000000000  2865         DD      000000000H,000000000H
       00                   
000E82 rrrrrrrrrrrrrr  2866         DD      _FactMainSystem,_FMSDATECmdTxt,_FMSDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E8E 00000000        2867         DD      000000000H
000E92 rrrrrrrrrrrrrr  2868         DD      _FactoryLevel2_1
       rr                   
                       2869 ; rs232cmd.c  753               { VERSIONCmdTxt,        VERSCmdTxt, &FactoryLevel2[1], NULL,     
                                                             NONE, FactMainVersion},
                       2870 ; rs232cmd.c  754               { IDNCmdTxt,            IDNCmdTxt,  &FactoryLevel2[2], &FactoryLe
                            vel2_2[0], NONE, NONE},
                       2871 ; rs232cmd.c  755               { SYSTEMCmdTxt,         SYSTCmdTxt, &FactoryLevel2[3], NULL,     
                                                             NONE, FactMainSystem},
                       2872 ; rs232cmd.c  756               { FMSDATECmdTxt,        FMSDCmdTxt, NULL,                        
                                     &FactoryLevel2_1[0], NONE, NONE},
                       2873 ; rs232cmd.c  757       };
                       2874 ; rs232cmd.c  758       
                       2875 ; rs232cmd.c  759       struct CMD_STRUCT code FactoryLevel2_1[2] = {
000E96 00000000000000  2876         DD      000000000H,000000000H
       00                   
                       2879         PUBLIC  _FactoryLevel2_1
                       2880         ALIGN   1
000E9E                 2881 _FactoryLevel2_1:
000E9E rrrrrrrrrrrrrr  2882         DD      _PRODUCTIONCmdTxt,_PRODCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000EA6 rrrrrrrrrrrrrr  2883         DD      _FactoryLevel2_1+24
       rr                   
000EAA 00000000000000  2884         DD      000000000H,000000000H
       00                   
000EB2 rrrrrrrrrrrrrr  2885         DD      _FactMainFMSDateProd,_UPDATECmdTxt,_UPDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000EBE 00000000000000  2886         DD      000000000H,000000000H,000000000H
       0000000000           
                       2887 ; rs232cmd.c  760               { PRODUCTIONCmdTxt, PRODCmdTxt, &FactoryLevel2_1[1], NULL, NONE, 
                            FactMainFMSDateProd},
                       2888 ; rs232cmd.c  761               { UPDATECmdTxt,           UPDCmdTxt,  NULL,                      
                                              NULL, NONE, FactMainFMSDateUpd},
                       2889 ; rs232cmd.c  762       };
                       2890 ; rs232cmd.c  763       
                       2891 ; rs232cmd.c  764       struct CMD_STRUCT code FactoryLevel2_2[4] = {
000ECA rrrrrrrrrrrrrr  2892         DD      _FactMainFMSDateUpd
       rr                   
                       2895         PUBLIC  _FactoryLevel2_2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  42

ADDR   CODE            LINE SOURCELINE
                       2896         ALIGN   1
000ECE                 2897 _FactoryLevel2_2:
000ECE rrrrrrrrrrrrrr  2898         DD      _COMPANYCmdTxt,_COMPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000ED6 rrrrrrrrrrrrrr  2899         DD      _FactoryLevel2_2+24
       rr                   
000EDA 00000000000000  2900         DD      000000000H,000000000H
       00                   
000EE2 rrrrrrrrrrrrrr  2901         DD      _FactMainIDNCompany,_TYPECmdTxt,_TYPECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000EEE rrrrrrrrrrrrrr  2902         DD      _FactoryLevel2_2+48
       rr                   
000EF2 00000000000000  2903         DD      000000000H,000000000H
       00                   
000EFA rrrrrrrrrrrrrr  2904         DD      _FactMainIDNType,_KUNUMBERCmdTxt,_KUNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F06 rrrrrrrrrrrrrr  2905         DD      _FactoryLevel2_2+72
       rr                   
000F0A 00000000000000  2906         DD      000000000H,000000000H
       00                   
000F12 rrrrrrrrrrrrrr  2907         DD      _FactMainIDNKUNumber,_SWREVISIONCmdTxt,_SWRCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F1E 00000000000000  2908         DD      000000000H,000000000H,000000000H
       0000000000           
                       2909 ; rs232cmd.c  765               { COMPANYCmdTxt,    COMPCmdTxt, &FactoryLevel2_2[1], NULL, NONE, 
                            FactMainIDNCompany},
                       2910 ; rs232cmd.c  766               { TYPECmdTxt,     TYPECmdTxt, &FactoryLevel2_2[2], NULL, NONE, Fa
                            ctMainIDNType},
                       2911 ; rs232cmd.c  767               { KUNUMBERCmdTxt,   KUNCmdTxt,  &FactoryLevel2_2[3], NULL, NONE, 
                            FactMainIDNKUNumber},
                       2912 ; rs232cmd.c  768               { SWREVISIONCmdTxt, SWRCmdTxt,  NULL,                            
                                      NULL, NONE, FactMainIDNSWRevision},
                       2913 ; rs232cmd.c  769       };
                       2914 ; rs232cmd.c  770       
                       2915 ; rs232cmd.c  771       struct CMD_STRUCT code FactoryLevel3[6] = {
000F2A rrrrrrrrrrrrrr  2916         DD      _FactMainIDNSWRevision
       rr                   
                       2919         PUBLIC  _FactoryLevel3
                       2920         ALIGN   1
000F2E                 2921 _FactoryLevel3:
000F2E rrrrrrrrrrrrrr  2922         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000F36 rrrrrrrrrrrrrr  2923         DD      _FactoryLevel3+24
       rr                   
000F3A 00000000000000  2924         DD      000000000H,000000000H
       00                   
000F42 rrrrrrrrrrrrrr  2925         DD      _FactGenlockGenDate,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F4E rrrrrrrrrrrrrr  2926         DD      _FactoryLevel3+48
       rr                   
000F52 00000000000000  2927         DD      000000000H,000000000H
       00                   
000F5A rrrrrrrrrrrrrr  2928         DD      _FactGenlockGenVersion,_FREFERENCECmdTxt,_FREFCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  43

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F66 rrrrrrrrrrrrrr  2929         DD      _FactoryLevel3+72
       rr                   
000F6A rrrrrrrrrrrrrr  2930         DD      _FactoryLevel3_1
       rr                   
000F6E 00000000        2931         DD      000000000H
000F72 rrrrrrrrrrrrrr  2932         DD      _FactGenlockGenFRefDate,_UREFERENCECmdTxt,_UREFCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F7E rrrrrrrrrrrrrr  2933         DD      _FactoryLevel3+96
       rr                   
000F82 rrrrrrrrrrrrrr  2934         DD      _FactoryLevel3_2
       rr                   
000F86 00000000        2935         DD      000000000H
000F8A rrrrrrrrrrrrrr  2936         DD      _FactGenlockGenURefDate,_HPHZEROCmdTxt,_HPHZCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F96 rrrrrrrrrrrrrr  2937         DD      _FactoryLevel3+120
       rr                   
000F9A 00000000000000  2938         DD      000000000H,000000000H
       00                   
000FA2 rrrrrrrrrrrrrr  2939         DD      _FactGenlockGenHPHZero,_PHASECmdTxt,_PHASCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000FAE 00000000000000  2940         DD      000000000H,000000000H,000000000H
       0000000000           
                       2941 ; rs232cmd.c  772               { DATECmdTxt,     DATECmdTxt, &FactoryLevel3[1], NULL,           
                                                    NONE, FactGenlockGenDate},
                       2942 ; rs232cmd.c  773               { VERSIONCmdTxt,    VERSCmdTxt, &FactoryLevel3[2], NULL,         
                                                            NONE, FactGenlockGenVersion},
                       2943 ; rs232cmd.c  774               { FREFERENCECmdTxt, FREFCmdTxt, &FactoryLevel3[3], &FactoryLevel3
                            _1[0], NONE, FactGenlockGenFRefDate},
                       2944 ; rs232cmd.c  775               { UREFERENCECmdTxt, UREFCmdTxt, &FactoryLevel3[4], &FactoryLevel3
                            _2[0], NONE, FactGenlockGenURefDate},
                       2945 ; rs232cmd.c  776               { HPHZEROCmdTxt,    HPHZCmdTxt, &FactoryLevel3[5], NULL,         
                                                                    NONE, FactGenlockGenHPHZero},
                       2946 ; rs232cmd.c  777               { PHASECmdTxt,            PHASCmdTxt, NULL,                      
                                            NULL,                                           NONE, FactGenlockGenPhase},
                       2947 ; rs232cmd.c  778       };
                       2948 ; rs232cmd.c  779       
                       2949 ; rs232cmd.c  780       struct CMD_STRUCT code FactoryLevel3_1[2] = {
000FBA rrrrrrrrrrrrrr  2950         DD      _FactGenlockGenPhase
       rr                   
                       2953         PUBLIC  _FactoryLevel3_1
                       2954         ALIGN   1
000FBE                 2955 _FactoryLevel3_1:
000FBE rrrrrrrrrrrrrr  2956         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000FC6 rrrrrrrrrrrrrr  2957         DD      _FactoryLevel3_1+24
       rr                   
000FCA 00000000000000  2958         DD      000000000H,000000000H
       00                   
000FD2 rrrrrrrrrrrrrr  2959         DD      _FactGenlockGenFRefDate,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  44

ADDR   CODE            LINE SOURCELINE
000FDE 00000000000000  2960         DD      000000000H,000000000H,000000000H
       0000000000           
                       2961 ; rs232cmd.c  781               { DATECmdTxt, DATECmdTxt, &FactoryLevel3_1[1], NULL, NONE, FactGe
                            nlockGenFRefDate},
                       2962 ; rs232cmd.c  782               { DACCmdTxt,  DACCmdTxt,  NULL,                                  
                                      NULL, NONE, FactGenlockGenFRefDAC},
                       2963 ; rs232cmd.c  783       };
                       2964 ; rs232cmd.c  784       
                       2965 ; rs232cmd.c  785       struct CMD_STRUCT code FactoryLevel3_2[2] = {
000FEA rrrrrrrrrrrrrr  2966         DD      _FactGenlockGenFRefDAC
       rr                   
                       2969         PUBLIC  _FactoryLevel3_2
                       2970         ALIGN   1
000FEE                 2971 _FactoryLevel3_2:
000FEE rrrrrrrrrrrrrr  2972         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000FF6 rrrrrrrrrrrrrr  2973         DD      _FactoryLevel3_2+24
       rr                   
000FFA 00000000000000  2974         DD      000000000H,000000000H
       00                   
001002 rrrrrrrrrrrrrr  2975         DD      _FactGenlockGenURefDate,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00100E 00000000000000  2976         DD      000000000H,000000000H,000000000H
       0000000000           
                       2977 ; rs232cmd.c  786               { DATECmdTxt, DATECmdTxt, &FactoryLevel3_2[1], NULL, NONE, FactGe
                            nlockGenURefDate},
                       2978 ; rs232cmd.c  787               { DACCmdTxt,  DACCmdTxt,  NULL,                                  
                                      NULL, NONE, FactGenlockGenURefDAC},
                       2979 ; rs232cmd.c  788       };
                       2980 ; rs232cmd.c  789       
                       2981 ; rs232cmd.c  790       struct CMD_STRUCT code FactoryLevel4[6] = {
00101A rrrrrrrrrrrrrr  2982         DD      _FactGenlockGenURefDAC
       rr                   
                       2985         PUBLIC  _FactoryLevel4
                       2986         ALIGN   1
00101E                 2987 _FactoryLevel4:
00101E rrrrrrrrrrrrrr  2988         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001026 rrrrrrrrrrrrrr  2989         DD      _FactoryLevel4+24
       rr                   
00102A 00000000000000  2990         DD      000000000H,000000000H
       00                   
001032 rrrrrrrrrrrrrr  2991         DD      _FactBBGenDate,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00103E rrrrrrrrrrrrrr  2992         DD      _FactoryLevel4+48
       rr                   
001042 00000000000000  2993         DD      000000000H,000000000H
       00                   
00104A rrrrrrrrrrrrrr  2994         DD      _FactBBGenVersion,_SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001056 rrrrrrrrrrrrrr  2995         DD      _FactoryLevel4+72
       rr                   
00105A 00000000000000  2996         DD      000000000H,000000000H
       00                   
001062 rrrrrrrrrrrrrr  2997         DD      _FactBBGenSignal,_PHASECmdTxt,_PHASCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  45

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00106E rrrrrrrrrrrrrr  2998         DD      _FactoryLevel4+96
       rr                   
001072 00000000000000  2999         DD      000000000H,000000000H
       00                   
00107A rrrrrrrrrrrrrr  3000         DD      _FactBBGenPhase,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001086 rrrrrrrrrrrrrr  3001         DD      _FactoryLevel4+120
       rr                   
00108A 00000000000000  3002         DD      000000000H,000000000H
       00                   
001092 rrrrrrrrrrrrrr  3003         DD      _FactBBGenScHPhase,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00109E 00000000000000  3004         DD      000000000H,000000000H,000000000H
       0000000000           
                       3005 ; rs232cmd.c  791               { DATECmdTxt,   DATECmdTxt, &FactoryLevel4[1], NULL, NONE, FactBB
                            GenDate},
                       3006 ; rs232cmd.c  792               { VERSIONCmdTxt,        VERSCmdTxt, &FactoryLevel4[2], NULL, NONE
                            , FactBBGenVersion},
                       3007 ; rs232cmd.c  793               { SIGNALCmdTxt,         SIGNCmdTxt, &FactoryLevel4[3], NULL, NONE
                            , FactBBGenSignal},
                       3008 ; rs232cmd.c  794               { PHASECmdTxt,  PHASCmdTxt, &FactoryLevel4[4], NULL, NONE, FactBB
                            GenPhase},
                       3009 ; rs232cmd.c  795               { SCHPHASECmdTxt,       SCHPCmdTxt, &FactoryLevel4[5], NULL, NONE
                            , FactBBGenScHPhase},
                       3010 ; rs232cmd.c  796               { DACCmdTxt,            DACCmdTxt,  NULL,                        
                                     NULL, NONE, FactBBGenDAC},
                       3011 ; rs232cmd.c  797       };
                       3012 ; rs232cmd.c  798       
                       3013 ; rs232cmd.c  799       struct CMD_STRUCT code FactoryLevel5[5] = {
0010AA rrrrrrrrrrrrrr  3014         DD      _FactBBGenDAC
       rr                   
                       3017         PUBLIC  _FactoryLevel5
                       3018         ALIGN   1
0010AE                 3019 _FactoryLevel5:
0010AE rrrrrrrrrrrrrr  3020         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0010B6 rrrrrrrrrrrrrr  3021         DD      _FactoryLevel5+24
       rr                   
0010BA 00000000000000  3022         DD      000000000H,000000000H
       00                   
0010C2 rrrrrrrrrrrrrr  3023         DD      _FactCBGenDate,_AGAINCmdTxt,_AGACmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010CE rrrrrrrrrrrrrr  3024         DD      _FactoryLevel5+48
       rr                   
0010D2 00000000000000  3025         DD      000000000H,000000000H
       00                   
0010DA rrrrrrrrrrrrrr  3026         DD      _FactCBGenAGain,_CGAINCmdTxt,_CGACmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010E6 rrrrrrrrrrrrrr  3027         DD      _FactoryLevel5+72
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  46

ADDR   CODE            LINE SOURCELINE
0010EA 00000000000000  3028         DD      000000000H,000000000H
       00                   
0010F2 rrrrrrrrrrrrrr  3029         DD      _FactCBGenCGain,_PHASECmdTxt,_PHASCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010FE rrrrrrrrrrrrrr  3030         DD      _FactoryLevel5+96
       rr                   
001102 00000000000000  3031         DD      000000000H,000000000H
       00                   
00110A rrrrrrrrrrrrrr  3032         DD      _FactCBGenPhase,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001116 00000000000000  3033         DD      000000000H,000000000H,000000000H
       0000000000           
                       3034 ; rs232cmd.c  800               { DATECmdTxt,   DATECmdTxt, &FactoryLevel5[1], NULL, NONE, FactCB
                            GenDate},
                       3035 ; rs232cmd.c  801               { AGAINCmdTxt,  AGACmdTxt,      &FactoryLevel5[2], NULL, NONE, Fa
                            ctCBGenAGain},
                       3036 ; rs232cmd.c  802               { CGAINCmdTxt,  CGACmdTxt,      &FactoryLevel5[3], NULL, NONE, Fa
                            ctCBGenCGain},
                       3037 ; rs232cmd.c  803               { PHASECmdTxt,  PHASCmdTxt, &FactoryLevel5[4], NULL, NONE, FactCB
                            GenPhase},
                       3038 ; rs232cmd.c  804               { SCHPHASECmdTxt,       SCHPCmdTxt, NULL,                        
                                     NULL, NONE, FactCBGenScHPhase},
                       3039 ; rs232cmd.c  805       };
                       3040 ; rs232cmd.c  806       
                       3041 ; rs232cmd.c  807       struct CMD_STRUCT code FactoryLevel6[3] = {
001122 rrrrrrrrrrrrrr  3042         DD      _FactCBGenScHPhase
       rr                   
                       3045         PUBLIC  _FactoryLevel6
                       3046         ALIGN   1
001126                 3047 _FactoryLevel6:
001126 rrrrrrrrrrrrrr  3048         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00112E rrrrrrrrrrrrrr  3049         DD      _FactoryLevel6+24
       rr                   
001132 00000000000000  3050         DD      000000000H,000000000H
       00                   
00113A rrrrrrrrrrrrrr  3051         DD      _FactAudioGenStatus,_DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001146 rrrrrrrrrrrrrr  3052         DD      _FactoryLevel6+48
       rr                   
00114A 00000000000000  3053         DD      000000000H,000000000H
       00                   
001152 rrrrrrrrrrrrrr  3054         DD      _FactAudioGenDate,_ALEVELCmdTxt,_ALEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00115E 00000000000000  3055         DD      000000000H,000000000H,000000000H
       0000000000           
                       3056 ; rs232cmd.c  808               { STATUSCmdTxt, STATCmdTxt, &FactoryLevel6[1], NULL, NONE, FactAu
                            dioGenStatus},
                       3057 ; rs232cmd.c  809               { DATECmdTxt,   DATECmdTxt, &FactoryLevel6[2], NULL, NONE, FactAu
                            dioGenDate},
                       3058 ; rs232cmd.c  810               { ALEVELCmdTxt, ALEVCmdTxt, NULL,                                
                             NULL, NONE, FactAudioGenLevel},
                       3059 ; rs232cmd.c  811       };
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  47

ADDR   CODE            LINE SOURCELINE
                       3060 ; rs232cmd.c  812       
                       3061 ; rs232cmd.c  813       struct CMD_STRUCT code FactoryLevel7[1] = {
00116A rrrrrrrrrrrrrr  3062         DD      _FactAudioGenLevel
       rr                   
                       3065         PUBLIC  _FactoryLevel7
                       3066         ALIGN   1
00116E                 3067 _FactoryLevel7:
00116E rrrrrrrrrrrrrr  3068         DD      _VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001176 00000000000000  3069         DD      000000000H,000000000H,000000000H
       0000000000           
                       3070 ; rs232cmd.c  814               { VERSIONCmdTxt,        VERSCmdTxt, NULL, NULL, NONE, FactPLDVers
                            ion},
                       3071 ; rs232cmd.c  815       };
                       3072 ; rs232cmd.c  816       
                       3073 ; rs232cmd.c  817       struct CMD_STRUCT code FactoryLevel8[1] = {
001182 rrrrrrrrrrrrrr  3074         DD      _FactPLDVersion
       rr                   
                       3077         PUBLIC  _FactoryLevel8
                       3078         ALIGN   1
001186                 3079 _FactoryLevel8:
001186 rrrrrrrrrrrrrr  3080         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00118E 00000000000000  3081         DD      000000000H,000000000H,000000000H
       0000000000           
                       3082 ; rs232cmd.c  818               { STATUSCmdTxt, STATCmdTxt, NULL, NULL, NONE, FactTCXOStatus},
                       3083 ; rs232cmd.c  819       };
                       3084 ; rs232cmd.c  820       
                       3085 ; rs232cmd.c  821       //***********************************************************************
                            ***
                       3086 ; rs232cmd.c  822       // The following parameter structures are based on the enumerated types
                       3087 ; rs232cmd.c  823       //  defined in TABLES.H, ie. DO NOT change the order of these names. If
                       3088 ; rs232cmd.c  824       //  the order is changed in TABLES.H it must also be changed here.
                       3089 ; rs232cmd.c  825       
                       3090 ; rs232cmd.c  826       struct PAR_STRUCT code SAVEPar[1] = {
00119A rrrrrrrrrrrrrr  3091         DD      _FactTCXOStatus
       rr                   
                       3101         PUBLIC  _SAVEPar
                       3102         ALIGN   1
00119E                 3103 _SAVEPar:
00119E rrrrrrrrrrrrrr  3104         DD      _SAVEParTxt,_SAVEParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3105 ; rs232cmd.c  827               { SAVEParTxt, SAVEParTxt, NULL}
                       3106 ; rs232cmd.c  828       };
                       3107 ; rs232cmd.c  829       
                       3108 ; rs232cmd.c  830       struct PAR_STRUCT code GenlockSystemPar[4] = {
0011A6 00000000        3109         DD      000000000H
                       3113         PUBLIC  _GenlockSystemPar
                       3114         ALIGN   1
0011AA                 3115 _GenlockSystemPar:
0011AA rrrrrrrrrrrrrr  3116         DD      _INTERNALParTxt,_INTParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011B2 rrrrrrrrrrrrrr  3117         DD      _GenlockSystemPar+12
       rr                   
0011B6 rrrrrrrrrrrrrr  3118         DD      _PALBURSTParTxt,_PALBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  48

ADDR   CODE            LINE SOURCELINE
0011BE rrrrrrrrrrrrrr  3119         DD      _GenlockSystemPar+24
       rr                   
0011C2 rrrrrrrrrrrrrr  3120         DD      _NTSCBURSTParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011CA rrrrrrrrrrrrrr  3121         DD      _GenlockSystemPar+36
       rr                   
0011CE rrrrrrrrrrrrrr  3122         DD      _F10MHzParTxt,_F10MHzParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3123 ; rs232cmd.c  831               { INTERNALParTxt,  INTParTxt,   &GenlockSystemPar[1]},
                       3124 ; rs232cmd.c  832               { PALBURSTParTxt,  PALBParTxt,  &GenlockSystemPar[2]},
                       3125 ; rs232cmd.c  833               { NTSCBURSTParTxt, NTSCParTxt,  &GenlockSystemPar[3]},
                       3126 ; rs232cmd.c  834               { F10MHzParTxt,          F10MHzParTxt, NULL},
                       3127 ; rs232cmd.c  835       };
                       3128 ; rs232cmd.c  836       
                       3129 ; rs232cmd.c  837       struct PAR_STRUCT code SystemPar[3] = {
0011D6 00000000        3130         DD      000000000H
                       3134         PUBLIC  _SystemPar
                       3135         ALIGN   1
0011DA                 3136 _SystemPar:
0011DA rrrrrrrrrrrrrr  3137         DD      _PALParTxt,_PALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011E2 rrrrrrrrrrrrrr  3138         DD      _SystemPar+12
       rr                   
0011E6 rrrrrrrrrrrrrr  3139         DD      _PAL_IDParTxt,_PAL_IDParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011EE rrrrrrrrrrrrrr  3140         DD      _SystemPar+24
       rr                   
0011F2 rrrrrrrrrrrrrr  3141         DD      _NTSCParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3142 ; rs232cmd.c  838               { PALParTxt,     PALParTxt, &SystemPar[1]},
                       3143 ; rs232cmd.c  839               { PAL_IDParTxt, PAL_IDParTxt, &SystemPar[2]},
                       3144 ; rs232cmd.c  840               { NTSCParTxt,    NTSCParTxt, NULL},
                       3145 ; rs232cmd.c  841       };
                       3146 ; rs232cmd.c  842       
                       3147 ; rs232cmd.c  843       struct PAR_STRUCT code CBPatternPar[23] = {
0011FA 00000000        3148         DD      000000000H
                       3152         PUBLIC  _CBPatternPar
                       3153         ALIGN   1
0011FE                 3154 _CBPatternPar:
0011FE rrrrrrrrrrrrrr  3155         DD      _CBSMPTEParTxt,_CBSMParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001206 rrrrrrrrrrrrrr  3156         DD      _CBPatternPar+12
       rr                   
00120A rrrrrrrrrrrrrr  3157         DD      _CBEBUParTxt,_CBEBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001212 rrrrrrrrrrrrrr  3158         DD      _CBPatternPar+24
       rr                   
001216 rrrrrrrrrrrrrr  3159         DD      _CBFCCParTxt,_CBFCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00121E rrrrrrrrrrrrrr  3160         DD      _CBPatternPar+36
       rr                   
001222 rrrrrrrrrrrrrr  3161         DD      _CBEBU8ParTxt,_CBEB8ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  49

ADDR   CODE            LINE SOURCELINE
00122A rrrrrrrrrrrrrr  3162         DD      _CBPatternPar+48
       rr                   
00122E rrrrrrrrrrrrrr  3163         DD      _CB100ParTxt,_CB100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001236 rrrrrrrrrrrrrr  3164         DD      _CBPatternPar+60
       rr                   
00123A rrrrrrrrrrrrrr  3165         DD      _CBGREY75ParTxt,_CBGR75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001242 rrrrrrrrrrrrrr  3166         DD      _CBPatternPar+72
       rr                   
001246 rrrrrrrrrrrrrr  3167         DD      _CBRED75ParTxt,_CBR75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00124E rrrrrrrrrrrrrr  3168         DD      _CBPatternPar+84
       rr                   
001252 rrrrrrrrrrrrrr  3169         DD      _RED75ParTxt,_RED75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00125A rrrrrrrrrrrrrr  3170         DD      _CBPatternPar+96
       rr                   
00125E rrrrrrrrrrrrrr  3171         DD      _MULTIBURSTParTxt,_MULTParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001266 rrrrrrrrrrrrrr  3172         DD      _CBPatternPar+108
       rr                   
00126A rrrrrrrrrrrrrr  3173         DD      _CCIR18ParTxt,_CCIR18ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001272 rrrrrrrrrrrrrr  3174         DD      _CBPatternPar+120
       rr                   
001276 rrrrrrrrrrrrrr  3175         DD      _WIN10ParTxt,_WIN10ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00127E rrrrrrrrrrrrrr  3176         DD      _CBPatternPar+132
       rr                   
001282 rrrrrrrrrrrrrr  3177         DD      _WIN15ParTxt,_WIN15ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00128A rrrrrrrrrrrrrr  3178         DD      _CBPatternPar+144
       rr                   
00128E rrrrrrrrrrrrrr  3179         DD      _WIN20ParTxt,_WIN20ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001296 rrrrrrrrrrrrrr  3180         DD      _CBPatternPar+156
       rr                   
00129A rrrrrrrrrrrrrr  3181         DD      _WIN100ParTxt,_WIN100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012A2 rrrrrrrrrrrrrr  3182         DD      _CBPatternPar+168
       rr                   
0012A6 rrrrrrrrrrrrrr  3183         DD      _BLWH15ParTxt,_BLWH15ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012AE rrrrrrrrrrrrrr  3184         DD      _CBPatternPar+180
       rr                   
0012B2 rrrrrrrrrrrrrr  3185         DD      _WHITE100ParTxt,_WHIT100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012BA rrrrrrrrrrrrrr  3186         DD      _CBPatternPar+192
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  50

ADDR   CODE            LINE SOURCELINE
0012BE rrrrrrrrrrrrrr  3187         DD      _BLACKParTxt,_BLACParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012C6 rrrrrrrrrrrrrr  3188         DD      _CBPatternPar+204
       rr                   
0012CA rrrrrrrrrrrrrr  3189         DD      _SDICHECKParTxt,_SDICParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012D2 rrrrrrrrrrrrrr  3190         DD      _CBPatternPar+216
       rr                   
0012D6 rrrrrrrrrrrrrr  3191         DD      _DGREYParTxt,_DGRParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012DE rrrrrrrrrrrrrr  3192         DD      _CBPatternPar+228
       rr                   
0012E2 rrrrrrrrrrrrrr  3193         DD      _STAIRCASE5ParTxt,_STA5ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012EA rrrrrrrrrrrrrr  3194         DD      _CBPatternPar+240
       rr                   
0012EE rrrrrrrrrrrrrr  3195         DD      _STAIRCASE10ParTxt,_STA10ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012F6 rrrrrrrrrrrrrr  3196         DD      _CBPatternPar+252
       rr                   
0012FA rrrrrrrrrrrrrr  3197         DD      _CROSSHATCHParTxt,_CROSParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001302 rrrrrrrrrrrrrr  3198         DD      _CBPatternPar+264
       rr                   
001306 rrrrrrrrrrrrrr  3199         DD      _PLUGEParTxt,_PLUGParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3200 ; rs232cmd.c  844               { CBSMPTEParTxt,                CBSMParTxt,     &CBPatternPar[1]}
                            ,
                       3201 ; rs232cmd.c  845               { CBEBUParTxt,          CBEBParTxt,     &CBPatternPar[2]},
                       3202 ; rs232cmd.c  846               { CBFCCParTxt,          CBFCParTxt,     &CBPatternPar[3]},
                       3203 ; rs232cmd.c  847               { CBEBU8ParTxt,                 CBEB8ParTxt,    &CBPatternPar[4]}
                            ,
                       3204 ; rs232cmd.c  848               { CB100ParTxt,          CB100ParTxt,    &CBPatternPar[5]},
                       3205 ; rs232cmd.c  849               { CBGREY75ParTxt,       CBGR75ParTxt,   &CBPatternPar[6]},
                       3206 ; rs232cmd.c  850               { CBRED75ParTxt,                CBR75ParTxt,    &CBPatternPar[7]}
                            ,
                       3207 ; rs232cmd.c  851               { RED75ParTxt,          RED75ParTxt,    &CBPatternPar[8]},
                       3208 ; rs232cmd.c  852       
                       3209 ; rs232cmd.c  853               { MULTIBURSTParTxt,     MULTParTxt,     &CBPatternPar[9]},
                       3210 ; rs232cmd.c  854               { CCIR18ParTxt,         CCIR18ParTxt,   &CBPatternPar[10]},
                       3211 ; rs232cmd.c  855                                                                                
                                                                                                            
                       3212 ; rs232cmd.c  856               { WIN10ParTxt,          WIN10ParTxt,    &CBPatternPar[11]},
                       3213 ; rs232cmd.c  857               { WIN15ParTxt,          WIN15ParTxt,    &CBPatternPar[12]},
                       3214 ; rs232cmd.c  858               { WIN20ParTxt,          WIN20ParTxt,    &CBPatternPar[13]},
                       3215 ; rs232cmd.c  859               { WIN100ParTxt,                 WIN100ParTxt,   &CBPatternPar[14]
                            },
                       3216 ; rs232cmd.c  860               { BLWH15ParTxt,                 BLWH15ParTxt,   &CBPatternPar[15]
                            },
                       3217 ; rs232cmd.c  861               { WHITE100ParTxt,       WHIT100ParTxt, &CBPatternPar[16]},
                       3218 ; rs232cmd.c  862               { BLACKParTxt,          BLACParTxt,     &CBPatternPar[17]},
                       3219 ; rs232cmd.c  863       
                       3220 ; rs232cmd.c  864               { SDICHECKParTxt,       SDICParTxt,     &CBPatternPar[18]},
                       3221 ; rs232cmd.c  865               { DGREYParTxt,          DGRParTxt,              &CBPatternPar[19]
                            },
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  51

ADDR   CODE            LINE SOURCELINE
                       3222 ; rs232cmd.c  866       
                       3223 ; rs232cmd.c  867               { STAIRCASE5ParTxt,     STA5ParTxt,     &CBPatternPar[20]},
                       3224 ; rs232cmd.c  868               { STAIRCASE10ParTxt, STA10ParTxt,       &CBPatternPar[21]},
                       3225 ; rs232cmd.c  869       
                       3226 ; rs232cmd.c  870               { CROSSHATCHParTxt,     CROSParTxt,     &CBPatternPar[22]},
                       3227 ; rs232cmd.c  871               { PLUGEParTxt,          PLUGParTxt,     NULL},
                       3228 ; rs232cmd.c  872       };
                       3229 ; rs232cmd.c  873       
                       3230 ; rs232cmd.c  874       struct PAR_STRUCT code EmbAudioSignalPar[3] = {
00130E 00000000        3231         DD      000000000H
                       3234         PUBLIC  _EmbAudioSignalPar
                       3235         ALIGN   1
001312                 3236 _EmbAudioSignalPar:
001312 rrrrrrrrrrrrrr  3237         DD      _OFFParTxt,_OFFParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00131A rrrrrrrrrrrrrr  3238         DD      _EmbAudioSignalPar+12
       rr                   
00131E rrrrrrrrrrrrrr  3239         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001326 rrrrrrrrrrrrrr  3240         DD      _EmbAudioSignalPar+24
       rr                   
00132A rrrrrrrrrrrrrr  3241         DD      _S1KHZParTxt,_S1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3242 ; rs232cmd.c  875               { OFFParTxt,            OFFParTxt,              &EmbAudioSignalPa
                            r[1]},
                       3243 ; rs232cmd.c  876               { SILENCEParTxt,        SILParTxt,              &EmbAudioSignalPa
                            r[2]},
                       3244 ; rs232cmd.c  877               { S1KHZParTxt,          S1KHZParTxt,    NULL},
                       3245 ; rs232cmd.c  878       };
                       3246 ; rs232cmd.c  879       
                       3247 ; rs232cmd.c  880       struct PAR_STRUCT code AudioOutputPar[2] = {
001332 00000000        3248         DD      000000000H
                       3252         PUBLIC  _AudioOutputPar
                       3253         ALIGN   1
001336                 3254 _AudioOutputPar:
001336 rrrrrrrrrrrrrr  3255         DD      _ANALOGParTxt,_ANALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00133E rrrrrrrrrrrrrr  3256         DD      _AudioOutputPar+12
       rr                   
001342 rrrrrrrrrrrrrr  3257         DD      _AESEBUParTxt,_AESParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3258 ; rs232cmd.c  881               { ANALOGParTxt, ANALParTxt, &AudioOutputPar[1]},
                       3259 ; rs232cmd.c  882               { AESEBUParTxt, AESParTxt,  NULL},
                       3260 ; rs232cmd.c  883       };
                       3261 ; rs232cmd.c  884       
                       3262 ; rs232cmd.c  885       struct PAR_STRUCT code AESEBUSystemPar[2] = {
00134A 00000000        3263         DD      000000000H
                       3266         PUBLIC  _AESEBUSystemPar
                       3267         ALIGN   1
00134E                 3268 _AESEBUSystemPar:
00134E rrrrrrrrrrrrrr  3269         DD      _PALParTxt,_PALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001356 rrrrrrrrrrrrrr  3270         DD      _AESEBUSystemPar+12
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  52

ADDR   CODE            LINE SOURCELINE
00135A rrrrrrrrrrrrrr  3271         DD      _NTSCParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3272 ; rs232cmd.c  886               { PALParTxt,  PALParTxt,  &AESEBUSystemPar[1]},
                       3273 ; rs232cmd.c  887               { NTSCParTxt, NTSCParTxt, NULL},
                       3274 ; rs232cmd.c  888       };
                       3275 ; rs232cmd.c  889       
                       3276 ; rs232cmd.c  890       struct PAR_STRUCT code AudioSignalPar[4] = {
001362 00000000        3277         DD      000000000H
                       3280         PUBLIC  _AudioSignalPar
                       3281         ALIGN   1
001366                 3282 _AudioSignalPar:
001366 rrrrrrrrrrrrrr  3283         DD      _S500HZParTxt,_S500HZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00136E rrrrrrrrrrrrrr  3284         DD      _AudioSignalPar+12
       rr                   
001372 rrrrrrrrrrrrrr  3285         DD      _S1KHZParTxt,_S1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00137A rrrrrrrrrrrrrr  3286         DD      _AudioSignalPar+24
       rr                   
00137E rrrrrrrrrrrrrr  3287         DD      _SEBU1KHZParTxt,_SEBU1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001386 rrrrrrrrrrrrrr  3288         DD      _AudioSignalPar+36
       rr                   
00138A rrrrrrrrrrrrrr  3289         DD      _S8KHZParTxt,_S8KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3290 ; rs232cmd.c  891               { S500HZParTxt,         S500HZParTxt,    &AudioSignalPar[1]},
                       3291 ; rs232cmd.c  892               { S1KHZParTxt,  S1KHZParTxt,     &AudioSignalPar[2]},
                       3292 ; rs232cmd.c  893               { SEBU1KHZParTxt, SEBU1KHZParTxt, &AudioSignalPar[3]},
                       3293 ; rs232cmd.c  894               { S8KHZParTxt,  S8KHZParTxt,     NULL},
                       3294 ; rs232cmd.c  895       };
                       3295 ; rs232cmd.c  896       
                       3296 ; rs232cmd.c  897       struct PAR_STRUCT code AnalogLevelPar[1] = {
001392 00000000        3297         DD      000000000H
                       3300         PUBLIC  _AnalogLevelPar
                       3301         ALIGN   1
001396                 3302 _AnalogLevelPar:
001396 rrrrrrrrrrrrrr  3303         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3304 ; rs232cmd.c  898               { SILENCEParTxt, SILParTxt, NULL},
                       3305 ; rs232cmd.c  899       };
                       3306 ; rs232cmd.c  900       
                       3307 ; rs232cmd.c  901       struct PAR_STRUCT code AESEBULevelPar[1] = {
00139E 00000000        3308         DD      000000000H
                       3311         PUBLIC  _AESEBULevelPar
                       3312         ALIGN   1
0013A2                 3313 _AESEBULevelPar:
0013A2 rrrrrrrrrrrrrr  3314         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3315 ; rs232cmd.c  902               { SILENCEParTxt, SILParTxt, NULL},
                       3316 ; rs232cmd.c  903       };
                       3317 ; rs232cmd.c  904       
                       3318 ; rs232cmd.c  905       struct PAR_STRUCT code AudioFrequencyPar[2] = {
0013AA 00000000        3319         DD      000000000H
                       3322         PUBLIC  _AudioFrequencyPar
                       3323         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  53

ADDR   CODE            LINE SOURCELINE
0013AE                 3324 _AudioFrequencyPar:
0013AE rrrrrrrrrrrrrr  3325         DD      _F441KHZParTxt,_F441KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013B6 rrrrrrrrrrrrrr  3326         DD      _AudioFrequencyPar+12
       rr                   
0013BA rrrrrrrrrrrrrr  3327         DD      _F48KHZParTxt,_F48KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3328 ; rs232cmd.c  906               { F441KHZParTxt, F441KHZParTxt, &AudioFrequencyPar[1]},
                       3329 ; rs232cmd.c  907               { F48KHZParTxt,  F48KHZParTxt,  NULL},
                       3330 ; rs232cmd.c  908       };
                       3331 ; rs232cmd.c  909       
                       3332 ; rs232cmd.c  910       struct PAR_STRUCT code UnitPar[2] = {
0013C2 00000000        3333         DD      000000000H
                       3336         PUBLIC  _UnitPar
                       3337         ALIGN   1
0013C6                 3338 _UnitPar:
0013C6 rrrrrrrrrrrrrr  3339         DD      _BBParTxt,_BBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013CE rrrrrrrrrrrrrr  3340         DD      _UnitPar+12
       rr                   
0013D2 rrrrrrrrrrrrrr  3341         DD      _SPGParTxt,_SPGParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3342 ; rs232cmd.c  911               { BBParTxt,  BBParTxt,  &UnitPar[1]},
                       3343 ; rs232cmd.c  912               { SPGParTxt, SPGParTxt, NULL},
                       3344 ; rs232cmd.c  913       };
                       3345 ; rs232cmd.c  914       
                       3346 ; rs232cmd.c  915       struct PAR_STRUCT code OffOnPar[2] = {
0013DA 00000000        3347         DD      000000000H
                       3350         PUBLIC  _OffOnPar
                       3351         ALIGN   1
0013DE                 3352 _OffOnPar:
0013DE rrrrrrrrrrrrrr  3353         DD      _OFFParTxt,_OFFParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013E6 rrrrrrrrrrrrrr  3354         DD      _OffOnPar+12
       rr                   
0013EA rrrrrrrrrrrrrr  3355         DD      _ONParTxt,_ONParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3356 ; rs232cmd.c  916               { OFFParTxt, OFFParTxt, &OffOnPar[1]},
                       3357 ; rs232cmd.c  917               { ONParTxt,  ONParTxt,  NULL},
                       3358 ; rs232cmd.c  918       };
                       3359 ; rs232cmd.c  919       
                       3360 ; rs232cmd.c  920       struct PAR_STRUCT code FactBBGenSignalPar[2] = {
0013F2 00000000        3361         DD      000000000H
                       3364         PUBLIC  _FactBBGenSignalPar
                       3365         ALIGN   1
0013F6                 3366 _FactBBGenSignalPar:
0013F6 rrrrrrrrrrrrrr  3367         DD      _NORMALParTxt,_NORMParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013FE rrrrrrrrrrrrrr  3368         DD      _FactBBGenSignalPar+12
       rr                   
001402 rrrrrrrrrrrrrr  3369         DD      _F45MHZParTxt,_F45MHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3370 ; rs232cmd.c  921               { NORMALParTxt, NORMParTxt,     &FactBBGenSignalPar[1]},
                       3371 ; rs232cmd.c  922               { F45MHZParTxt, F45MHZParTxt, NULL},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  54

ADDR   CODE            LINE SOURCELINE
                       3372 ; rs232cmd.c  923       };
                       3373 ; rs232cmd.c  924       
                       3374 ; rs232cmd.c  925       struct PAR_STRUCT code MinMaxPar[2] = {
00140A 00000000        3375         DD      000000000H
                       3378         PUBLIC  _MinMaxPar
                       3379         ALIGN   1
00140E                 3380 _MinMaxPar:
00140E rrrrrrrrrrrrrr  3381         DD      _MINParTxt,_MINParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001416 rrrrrrrrrrrrrr  3382         DD      _MinMaxPar+12
       rr                   
00141A rrrrrrrrrrrrrr  3383         DD      _MAXParTxt,_MAXParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3384 ; rs232cmd.c  926               { MINParTxt, MINParTxt, &MinMaxPar[1]},
                       3385 ; rs232cmd.c  927               { MAXParTxt, MAXParTxt, NULL},
                       3386 ; rs232cmd.c  928       };
                       3387 ; rs232cmd.c  929       
                       3388 ; rs232cmd.c  930       struct PAR_STRUCT code UpDownPar[2] = {
001422 00000000        3389         DD      000000000H
                       3392         PUBLIC  _UpDownPar
                       3393         ALIGN   1
001426                 3394 _UpDownPar:
001426 rrrrrrrrrrrrrr  3395         DD      _UPParTxt,_UPParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00142E rrrrrrrrrrrrrr  3396         DD      _UpDownPar+12
       rr                   
001432 rrrrrrrrrrrrrr  3397         DD      _DOWNParTxt,_DOWNParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3398 ; rs232cmd.c  931               { UPParTxt,   UPParTxt,   &UpDownPar[1]},
                       3399 ; rs232cmd.c  932               { DOWNParTxt, DOWNParTxt, NULL},
                       3400 ; rs232cmd.c  933       };
                       3401 ; rs232cmd.c  934       
                       3402 ; rs232cmd.c  935       /************************************************************************
                            ***/
                       3403 ; rs232cmd.c  936       // Temporary variables PRIVATE NOT overlayable
                       3404 ; rs232cmd.c  937       
                       3405 ; rs232cmd.c  938       static unsigned int Suffix[4]=
00143A 00000000        3406         DD      000000000H
000000                 3407 RS232CMD_INI_FA SEGMENT HDATA INSEGMENT INIT
000000                 3408         RSEG    RS232CMD_INI_FA
                       3411         ALIGN   1
000000                 3412 _Suffix:
                       3413 ; rs232cmd.c  939       {
                       3414 ; rs232cmd.c  940               1,1,1,1
                       3415 ; rs232cmd.c  941       };
                       3416 ; rs232cmd.c  942       
                       3417 ; rs232cmd.c  943       static bool PasswordProtected = true;
000000 01000100010001  3418         DW      00001H,00001H,00001H,00001H
       00                   
                       3420         ALIGN   1
000008                 3421 _PasswordProtected:
                       3422 ; rs232cmd.c  944       static UC GenlockCalEnable = 0;
000008 FFFF            3423         DW      0FFFFH
00000A                 3425 _GenlockCalEnable:
                       3426 ; rs232cmd.c  945       static int GenlockCalValue = 0;
00000A 00              3427         DB      000H
00000B RESERVED        3429         ALIGN   1
00000B
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  55

ADDR   CODE            LINE SOURCELINE
00000C                 3430 _GenlockCalValue:
                       3431 ; rs232cmd.c  946       
                       3432 ; rs232cmd.c  947       /************************************************************************
                            **/
                       3433 ; rs232cmd.c  948       /* CLSCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3434 ; rs232cmd.c  949       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3435 ; rs232cmd.c  950       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       3436 ; rs232cmd.c  951       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3437 ; rs232cmd.c  952       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3438 ; rs232cmd.c  953       /* Function:  Clear status command                                       
                                                                                                                             
                                                    */
                       3439 ; rs232cmd.c  954       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3440 ; rs232cmd.c  955       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3441 ; rs232cmd.c  956       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3442 ; rs232cmd.c  957       /************************************************************************
                            **/
                       3443 ; rs232cmd.c  958       void CLSCommand( void)
                       3444 ; rs232cmd.c  959       {
00000C 0000            3445         DW      00000H
000000                 3446 RS232CMD_PR     SEGMENT HCODE
000000                 3447         RSEG    RS232CMD_PR
                       3448         ALIGN   1
                       3450         PUBLIC  _CLSCommand
000000                 3451 _CLSCommand:
                       3455 ; rs232cmd.c  960               if ( CmdExecute && !SCPIError)
000000 964842rr        3457         MOV.B   ES,#SEG( _CmdExecute )
000004 9908rrrr        3458         MOV.W   R0,#SOF( _CmdExecute )
000008 8200            3459         MOV.B   R0L,[R0]
00000A F320            3460         BEQ     _8
00000C 964842rr        3461         MOV.B   ES,#SEG( _SCPIError )
000010 9908rrrr        3462         MOV.W   R0,#SOF( _SCPIError )
000014 8A00            3463         MOV.W   R0,[R0]
000016 F21A            3464         BNE     _8
                       3465 ; rs232cmd.c  961               {
                       3466 ; rs232cmd.c  962                       if ( CmdRequest)
000018 964842rr        3468         MOV.B   ES,#SEG( _CmdRequest )
00001C 9908rrrr        3469         MOV.W   R0,#SOF( _CmdRequest )
000020 8200            3470         MOV.B   R0L,[R0]
000022 F306            3471         BEQ     _3
                       3472 ; rs232cmd.c  963                               SCPIError = SyntaxErr;
000024 964842rr        3474         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  56

ADDR   CODE            LINE SOURCELINE
000028 9908rrrr        3475         MOV.W   R0,#SOF( _SCPIError )
00002C BA03            3476         MOV.W   [R0],#03H
00002E D680            3477         RET
00002E D680            3477         RET
000030                 3478 _3:
                       3479 ; rs232cmd.c  964                       else
                       3480 ; rs232cmd.c  965                       {
                       3481 ; rs232cmd.c  966                               if ( ParCnt)
000030 964842rr        3483         MOV.B   ES,#SEG( _ParCnt )
000034 9908rrrr        3484         MOV.W   R0,#SOF( _ParCnt )
000038 8200            3485         MOV.B   R0L,[R0]
00003A F306            3486         BEQ     _4
                       3487 ; rs232cmd.c  967                                       SCPIError = ParNotAllowed;
00003C 964842rr        3489         MOV.B   ES,#SEG( _SCPIError )
000040 9908rrrr        3490         MOV.W   R0,#SOF( _SCPIError )
000044 BA06            3491         MOV.W   [R0],#06H
000046 D680            3492         RET
000046 D680            3492         RET
000048                 3493 _4:
                       3494 ; rs232cmd.c  968                               else
                       3495 ; rs232cmd.c  969                                       ResetErrorEventQueue();
                       3497         CALL    _ResetErrorEventQueue
000048 C4rrrrrr       +3497 ;       FCALL   _ResetErrorEventQueue
                       3498 ; rs232cmd.c  970                       }
                       3499 ; rs232cmd.c  971               }
00004C                 3501 _8:
                       3502 ; rs232cmd.c  972       }
00004C D680            3504         RET
                       3506 ; rs232cmd.c  973       
                       3507 ; rs232cmd.c  974       /************************************************************************
                            **/
                       3508 ; rs232cmd.c  975       /* ESECommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3509 ; rs232cmd.c  976       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3510 ; rs232cmd.c  977       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3511 ; rs232cmd.c  978       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3512 ; rs232cmd.c  979       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3513 ; rs232cmd.c  980       /* Function:    Set/read the Standard Event Status Enable Register       
                                                            */
                       3514 ; rs232cmd.c  981       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       3515 ; rs232cmd.c  982       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3516 ; rs232cmd.c  983       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  57

ADDR   CODE            LINE SOURCELINE
                       3517 ; rs232cmd.c  984       /************************************************************************
                            **/
                       3518 ; rs232cmd.c  985       void ESECommand( void)
                       3519 ; rs232cmd.c  986       {
                       3520         ALIGN   1
                       3522         PUBLIC  _ESECommand
00004E                 3523 _ESECommand:
00004E A97E            3527         ADDS.W  R7,#0EH
                       3530 ; rs232cmd.c  987               int Reg;
                       3531 ; rs232cmd.c  988       
                       3532 ; rs232cmd.c  989               if ( CmdExecute && !SCPIError)
000050 964842rr        3534         MOV.B   ES,#SEG( _CmdExecute )
000054 9908rrrr        3535         MOV.W   R0,#SOF( _CmdExecute )
000058 8200            3536         MOV.B   R0L,[R0]
00005A F35E            3537         BEQ     _21
00005C 964842rr        3538         MOV.B   ES,#SEG( _SCPIError )
000060 9908rrrr        3539         MOV.W   R0,#SOF( _SCPIError )
000064 8A00            3540         MOV.W   R0,[R0]
000066 F258            3541         BNE     _21
                       3542 ; rs232cmd.c  990               {
                       3543 ; rs232cmd.c  991                       if ( CmdRequest)
000068 964842rr        3545         MOV.B   ES,#SEG( _CmdRequest )
00006C 9908rrrr        3546         MOV.W   R0,#SOF( _CmdRequest )
000070 8200            3547         MOV.B   R0L,[R0]
000072 F31E            3548         BEQ     _12
                       3549 ; rs232cmd.c  992                       {
                       3550 ; rs232cmd.c  993                               if ( ParCnt)
000074 964842rr        3552         MOV.B   ES,#SEG( _ParCnt )
000078 9908rrrr        3553         MOV.W   R0,#SOF( _ParCnt )
00007C 8200            3554         MOV.B   R0L,[R0]
00007E F306            3555         BEQ     _11
                       3556 ; rs232cmd.c  994                                       SCPIError = ParNotAllowed;
000080 964842rr        3558         MOV.B   ES,#SEG( _SCPIError )
000084 9908rrrr        3559         MOV.W   R0,#SOF( _SCPIError )
000088 BA06            3560         MOV.W   [R0],#06H
00008A FE46            3561         BR      _21
00008A FE46            3561         BR      _21
00008C                 3562 _11:
                       3563 ; rs232cmd.c  995                               else
                       3564 ; rs232cmd.c  996                                       rs232printf( 12, "%d\n", ESEReg);
00008C 9908000C        3566         MOV.W   R0,#0CH
000090 964842rr        3567         MOV.B   ES,#SEG( _ESEReg )
000094 9918rrrr        3568         MOV.W   R1,#SOF( _ESEReg )
000098 8221            3569         MOV.B   R1L,[R1]
00009A B130            3570         MOVS.B  R1H,#00H
00009C 0F02            3571         PUSH.W  R1
00009E 9938rrrr        3573         MOV.W   R3,#SEG( _9 )
0000A2 9928rrrr        3574         MOV.W   R2,#SOF( _9 )
0000A6 0F0C            3575         PUSH.W  R2, R3
                       3577         CALL    _rs232printf
0000A8 C4rrrrrr       +3577 ;       FCALL   _rs232printf
0000AC A976            3578         ADDS.W  R7,#06H
                       3580 ; rs232cmd.c  997                       }
0000AE FE34            3582         BR      _21
0000AE FE34            3582         BR      _21
0000B0                 3583 _12:
                       3584 ; rs232cmd.c  998                       else
                       3585 ; rs232cmd.c  999                       {
                       3586 ; rs232cmd.c 1000                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0000B0 964842rr        3588         MOV.B   ES,#SEG( _ParCnt )
0000B4 9908rrrr        3589         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  58

ADDR   CODE            LINE SOURCELINE
0000B8 8200            3590         MOV.B   R0L,[R0]
0000BA 910401          3591         CMP.B   R0L,#01H
0000BD F215            3592         BNE     _13
0000BF 9918rrrr        3593         MOV.W   R1,#SEG( _Cmd )
0000C3 9908rrrr        3594         MOV.W   R0,#SOF( _Cmd )
0000C7 9168rr          3595         MOV.B   R3L,#SEG( __lc_bs )
0000CA 7177            3596         XOR.B   R3H,R3H
0000CC 8927            3597         MOV.W   R2,R7
0000CE 0F0C            3598         PUSH.W  R2, R3
0000D0 9938rrrr        3600         MOV.W   R3,#SEG( _10 )
0000D4 9928rrrr        3601         MOV.W   R2,#SOF( _10 )
0000D8 0F0C            3602         PUSH.W  R2, R3
                       3604         CALL    _sscanf
0000DA C4rrrrrr       +3604 ;       FCALL   _sscanf
0000DE 99700008        3605         ADD.W   R7,#08H
0000E2 99040001        3607         CMP.W   R0,#01H
0000E6 F306            3608         BEQ     _14
0000E6 F306            3608         BEQ     _14
0000E8                 3609 _13:
                       3610 ; rs232cmd.c 1001                               {
                       3611 ; rs232cmd.c 1002                                       SCPIError = SyntaxErr;  
0000E8 964842rr        3613         MOV.B   ES,#SEG( _SCPIError )
0000EC 9908rrrr        3614         MOV.W   R0,#SOF( _SCPIError )
0000F0 BA03            3615         MOV.W   [R0],#03H
                       3616 ; rs232cmd.c 1003                                       return;
0000F2 FE12            3618         BR      _21
                       3619 ; rs232cmd.c 1004                               }
0000F4                 3621 _14:
                       3622 ; rs232cmd.c 1005       
                       3623 ; rs232cmd.c 1006                               if ( Reg > 255)
0000F4 9A7400FF        3625         CMP.W   [R7],#0FFH
0000F8 FD07            3626         BLE     _15
                       3627 ; rs232cmd.c 1007                               {
                       3628 ; rs232cmd.c 1008                                       SCPIError = DataOutOfRange;
0000FA 964842rr        3630         MOV.B   ES,#SEG( _SCPIError )
0000FE 9908rrrr        3631         MOV.W   R0,#SOF( _SCPIError )
000102 9A080021        3632         MOV.W   [R0],#021H
                       3633 ; rs232cmd.c 1009                                       return;
000106 FE08            3635         BR      _21
                       3636 ; rs232cmd.c 1010                               }
000108                 3638 _15:
                       3639 ; rs232cmd.c 1011       
                       3640 ; rs232cmd.c 1012                               ESEReg = Reg & 0xFF;
000108 8A07            3642         MOV.W   R0,[R7]
00010A 9105FF          3643         AND.B   R0L,#0FFH
00010D 964842rr        3644         MOV.B   ES,#SEG( _ESEReg )
000111 9918rrrr        3645         MOV.W   R1,#SOF( _ESEReg )
000115 8209            3646         MOV.B   [R1],R0L
                       3647 ; rs232cmd.c 1013                       }
                       3648 ; rs232cmd.c 1014               }
                       3649 ; rs232cmd.c 1015       }
000118                 3651 _21:
000118 A972            3652         ADDS.W  R7,#02H
00011A D680            3654         RET
                       3656 ; rs232cmd.c 1016       
                       3657 ; rs232cmd.c 1017       /************************************************************************
                            **/
                       3658 ; rs232cmd.c 1018       /* ESRCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3659 ; rs232cmd.c 1019       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  59

ADDR   CODE            LINE SOURCELINE
                                                    */
                       3660 ; rs232cmd.c 1020       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3661 ; rs232cmd.c 1021       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3662 ; rs232cmd.c 1022       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3663 ; rs232cmd.c 1023       /* Function:    Read and clear the Standard Event Status Register        
                                                                    */
                       3664 ; rs232cmd.c 1024       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3665 ; rs232cmd.c 1025       /*                                              The register will reset t
                            o zero.                                                                                          
                                            */
                       3666 ; rs232cmd.c 1026       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3667 ; rs232cmd.c 1027       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3668 ; rs232cmd.c 1028       /************************************************************************
                            **/
                       3669 ; rs232cmd.c 1029       void ESRCommand( void)
                       3670 ; rs232cmd.c 1030       {
                       3671         ALIGN   1
                       3673         PUBLIC  _ESRCommand
00011C                 3674 _ESRCommand:
                       3680 ; rs232cmd.c 1031               int Reg;
                       3681 ; rs232cmd.c 1032       
                       3682 ; rs232cmd.c 1033               if ( CmdExecute && !SCPIError)
00011C 964842rr        3684         MOV.B   ES,#SEG( _CmdExecute )
000120 9908rrrr        3685         MOV.W   R0,#SOF( _CmdExecute )
000124 8200            3686         MOV.B   R0L,[R0]
000126 F332            3687         BEQ     _30
000128 964842rr        3688         MOV.B   ES,#SEG( _SCPIError )
00012C 9908rrrr        3689         MOV.W   R0,#SOF( _SCPIError )
000130 8A00            3690         MOV.W   R0,[R0]
000132 F22C            3691         BNE     _30
                       3692 ; rs232cmd.c 1034               {
                       3693 ; rs232cmd.c 1035                       if ( CmdRequest)
000134 964842rr        3695         MOV.B   ES,#SEG( _CmdRequest )
000138 9908rrrr        3696         MOV.W   R0,#SOF( _CmdRequest )
00013C 8200            3697         MOV.B   R0L,[R0]
00013E F321            3698         BEQ     _26
                       3699 ; rs232cmd.c 1036                       {
                       3700 ; rs232cmd.c 1037                               if ( ParCnt)
000140 964842rr        3702         MOV.B   ES,#SEG( _ParCnt )
000144 9908rrrr        3703         MOV.W   R0,#SOF( _ParCnt )
000148 8200            3704         MOV.B   R0L,[R0]
00014A F306            3705         BEQ     _25
                       3706 ; rs232cmd.c 1038                                       SCPIError = ParNotAllowed;
00014C 964842rr        3708         MOV.B   ES,#SEG( _SCPIError )
000150 9908rrrr        3709         MOV.W   R0,#SOF( _SCPIError )
000154 BA06            3710         MOV.W   [R0],#06H
000156 D680            3711         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  60

ADDR   CODE            LINE SOURCELINE
000156 D680            3711         RET
000158                 3712 _25:
                       3713 ; rs232cmd.c 1039                               else
                       3714 ; rs232cmd.c 1040                               {
                       3715 ; rs232cmd.c 1041                                       rs232printf( 12, "%d\n", UpdateESRRegiste
                            r());
                       3717         CALL    _UpdateESRRegister
000158 C4rrrrrr       +3717 ;       FCALL   _UpdateESRRegister
00015C 8120            3718         MOV.B   R1L,R0L
00015E B130            3719         MOVS.B  R1H,#00H
000160 9908000C        3720         MOV.W   R0,#0CH
000164 0F02            3721         PUSH.W  R1
000166 9938rrrr        3723         MOV.W   R3,#SEG( _9 )
00016A 9928rrrr        3724         MOV.W   R2,#SOF( _9 )
00016E 0F0C            3725         PUSH.W  R2, R3
                       3727         CALL    _rs232printf
000170 C4rrrrrr       +3727 ;       FCALL   _rs232printf
000174 A976            3728         ADDS.W  R7,#06H
                       3730 ; rs232cmd.c 1042       
                       3731 ; rs232cmd.c 1043                                       ESRReg = 0;
000176 964842rr        3733         MOV.B   ES,#SEG( _ESRReg )
00017A 9908rrrr        3734         MOV.W   R0,#SOF( _ESRReg )
00017E B200            3735         MOV.B   [R0],#00H
                       3736 ; rs232cmd.c 1044                               }
                       3737 ; rs232cmd.c 1045                       }
000180 D680            3739         RET
000180 D680            3739         RET
000182                 3740 _26:
                       3741 ; rs232cmd.c 1046                       else
                       3742 ; rs232cmd.c 1047                               SCPIError = SyntaxErr;
000182 964842rr        3744         MOV.B   ES,#SEG( _SCPIError )
000186 9908rrrr        3745         MOV.W   R0,#SOF( _SCPIError )
00018A BA03            3746         MOV.W   [R0],#03H
                       3747 ; rs232cmd.c 1048               }
00018C                 3749 _30:
                       3750 ; rs232cmd.c 1049       }
00018C D680            3752         RET
                       3754 ; rs232cmd.c 1050       
                       3755 ; rs232cmd.c 1051       /************************************************************************
                            **/
                       3756 ; rs232cmd.c 1052       /* OPCCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3757 ; rs232cmd.c 1053       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3758 ; rs232cmd.c 1054       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       3759 ; rs232cmd.c 1055       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3760 ; rs232cmd.c 1056       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3761 ; rs232cmd.c 1057       /* Function:    Operation Complete Command/Query                         
                                                                                                                    */
                       3762 ; rs232cmd.c 1058       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3763 ; rs232cmd.c 1059       /* Returns:             -                                                
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  61

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                            *
                            /
                       3764 ; rs232cmd.c 1060       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3765 ; rs232cmd.c 1061       /************************************************************************
                            **/
                       3766 ; rs232cmd.c 1062       void OPCCommand( void)
                       3767 ; rs232cmd.c 1063       {
                       3768         ALIGN   1
                       3770         PUBLIC  _OPCCommand
00018E                 3771 _OPCCommand:
                       3775 ; rs232cmd.c 1064               if ( CmdExecute && !SCPIError)
00018E 964842rr        3777         MOV.B   ES,#SEG( _CmdExecute )
000192 9908rrrr        3778         MOV.W   R0,#SOF( _CmdExecute )
000196 8200            3779         MOV.B   R0L,[R0]
000198 F323            3780         BEQ     _36
00019A 964842rr        3781         MOV.B   ES,#SEG( _SCPIError )
00019E 9908rrrr        3782         MOV.W   R0,#SOF( _SCPIError )
0001A2 8A00            3783         MOV.W   R0,[R0]
0001A4 F21D            3784         BNE     _36
                       3785 ; rs232cmd.c 1065               {
                       3786 ; rs232cmd.c 1066                       if ( CmdRequest)
0001A6 964842rr        3788         MOV.B   ES,#SEG( _CmdRequest )
0001AA 9908rrrr        3789         MOV.W   R0,#SOF( _CmdRequest )
0001AE 8200            3790         MOV.B   R0L,[R0]
0001B0 F30C            3791         BEQ     _31
                       3792 ; rs232cmd.c 1067                       {
                       3793 ; rs232cmd.c 1068                               if ( ParCnt)
0001B2 964842rr        3795         MOV.B   ES,#SEG( _ParCnt )
0001B6 9908rrrr        3796         MOV.W   R0,#SOF( _ParCnt )
0001BA 8200            3797         MOV.B   R0L,[R0]
0001BC F311            3798         BEQ     _36
                       3799 ; rs232cmd.c 1069                                       SCPIError = ParNotAllowed;
0001BE 964842rr        3801         MOV.B   ES,#SEG( _SCPIError )
0001C2 9908rrrr        3802         MOV.W   R0,#SOF( _SCPIError )
0001C6 BA06            3803         MOV.W   [R0],#06H
                       3804 ; rs232cmd.c 1070                       }
0001C8 D680            3806         RET
0001C8 D680            3806         RET
0001CA                 3807 _31:
                       3808 ; rs232cmd.c 1071                       else
                       3809 ; rs232cmd.c 1072                       {
                       3810 ; rs232cmd.c 1073                               if ( ParCnt)
0001CA 964842rr        3812         MOV.B   ES,#SEG( _ParCnt )
0001CE 9908rrrr        3813         MOV.W   R0,#SOF( _ParCnt )
0001D2 8200            3814         MOV.B   R0L,[R0]
0001D4 F305            3815         BEQ     _36
                       3816 ; rs232cmd.c 1074                                       SCPIError = ParNotAllowed;
0001D6 964842rr        3818         MOV.B   ES,#SEG( _SCPIError )
0001DA 9908rrrr        3819         MOV.W   R0,#SOF( _SCPIError )
0001DE BA06            3820         MOV.W   [R0],#06H
                       3821 ; rs232cmd.c 1075                       }
                       3822 ; rs232cmd.c 1076               }
0001E0                 3824 _36:
                       3825 ; rs232cmd.c 1077       }
0001E0 D680            3827         RET
                       3829 ; rs232cmd.c 1078       
                       3830 ; rs232cmd.c 1079       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  62

ADDR   CODE            LINE SOURCELINE
                       3831 ; rs232cmd.c 1080       /* SRECommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3832 ; rs232cmd.c 1081       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3833 ; rs232cmd.c 1082       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3834 ; rs232cmd.c 1083       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3835 ; rs232cmd.c 1084       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3836 ; rs232cmd.c 1085       /* Function:    Set/read the Service Request Enable Register             
                                                                            */
                       3837 ; rs232cmd.c 1086       /* Remarks:             Bit 6 in *SRE? register is always ZERO           
                                                                                                    */
                       3838 ; rs232cmd.c 1087       /*                                              Bit 6 in *SRE register is
                             ignored                                                                                         
                                                    */
                       3839 ; rs232cmd.c 1088       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3840 ; rs232cmd.c 1089       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3841 ; rs232cmd.c 1090       /************************************************************************
                            **/
                       3842 ; rs232cmd.c 1091       void SRECommand( void)
                       3843 ; rs232cmd.c 1092       {
                       3844         ALIGN   1
                       3846         PUBLIC  _SRECommand
0001E2                 3847 _SRECommand:
0001E2 A97E            3851         ADDS.W  R7,#0EH
                       3854 ; rs232cmd.c 1093               int Reg;
                       3855 ; rs232cmd.c 1094       
                       3856 ; rs232cmd.c 1095               if ( CmdExecute && !SCPIError)
0001E4 964842rr        3858         MOV.B   ES,#SEG( _CmdExecute )
0001E8 9908rrrr        3859         MOV.W   R0,#SOF( _CmdExecute )
0001EC 8200            3860         MOV.B   R0L,[R0]
0001EE F35E            3861         BEQ     _47
0001F0 964842rr        3862         MOV.B   ES,#SEG( _SCPIError )
0001F4 9908rrrr        3863         MOV.W   R0,#SOF( _SCPIError )
0001F8 8A00            3864         MOV.W   R0,[R0]
0001FA F258            3865         BNE     _47
                       3866 ; rs232cmd.c 1096               {
                       3867 ; rs232cmd.c 1097                       if ( CmdRequest)
0001FC 964842rr        3869         MOV.B   ES,#SEG( _CmdRequest )
000200 9908rrrr        3870         MOV.W   R0,#SOF( _CmdRequest )
000204 8200            3871         MOV.B   R0L,[R0]
000206 F31E            3872         BEQ     _38
                       3873 ; rs232cmd.c 1098                       {
                       3874 ; rs232cmd.c 1099                               if ( ParCnt)
000208 964842rr        3876         MOV.B   ES,#SEG( _ParCnt )
00020C 9908rrrr        3877         MOV.W   R0,#SOF( _ParCnt )
000210 8200            3878         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  63

ADDR   CODE            LINE SOURCELINE
000212 F306            3879         BEQ     _37
                       3880 ; rs232cmd.c 1100                                       SCPIError = ParNotAllowed;
000214 964842rr        3882         MOV.B   ES,#SEG( _SCPIError )
000218 9908rrrr        3883         MOV.W   R0,#SOF( _SCPIError )
00021C BA06            3884         MOV.W   [R0],#06H
00021E FE46            3885         BR      _47
00021E FE46            3885         BR      _47
000220                 3886 _37:
                       3887 ; rs232cmd.c 1101                               else
                       3888 ; rs232cmd.c 1102                                       rs232printf( 12, "%d\n", SREReg);
000220 9908000C        3890         MOV.W   R0,#0CH
000224 964842rr        3891         MOV.B   ES,#SEG( _SREReg )
000228 9918rrrr        3892         MOV.W   R1,#SOF( _SREReg )
00022C 8221            3893         MOV.B   R1L,[R1]
00022E B130            3894         MOVS.B  R1H,#00H
000230 0F02            3895         PUSH.W  R1
000232 9938rrrr        3897         MOV.W   R3,#SEG( _9 )
000236 9928rrrr        3898         MOV.W   R2,#SOF( _9 )
00023A 0F0C            3899         PUSH.W  R2, R3
                       3901         CALL    _rs232printf
00023C C4rrrrrr       +3901 ;       FCALL   _rs232printf
000240 A976            3902         ADDS.W  R7,#06H
                       3904 ; rs232cmd.c 1103                       }
000242 FE34            3906         BR      _47
000242 FE34            3906         BR      _47
000244                 3907 _38:
                       3908 ; rs232cmd.c 1104                       else
                       3909 ; rs232cmd.c 1105                       {
                       3910 ; rs232cmd.c 1106                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000244 964842rr        3912         MOV.B   ES,#SEG( _ParCnt )
000248 9908rrrr        3913         MOV.W   R0,#SOF( _ParCnt )
00024C 8200            3914         MOV.B   R0L,[R0]
00024E 910401          3915         CMP.B   R0L,#01H
000251 F215            3916         BNE     _39
000253 9918rrrr        3917         MOV.W   R1,#SEG( _Cmd )
000257 9908rrrr        3918         MOV.W   R0,#SOF( _Cmd )
00025B 9168rr          3919         MOV.B   R3L,#SEG( __lc_bs )
00025E 7177            3920         XOR.B   R3H,R3H
000260 8927            3921         MOV.W   R2,R7
000262 0F0C            3922         PUSH.W  R2, R3
000264 9938rrrr        3924         MOV.W   R3,#SEG( _10 )
000268 9928rrrr        3925         MOV.W   R2,#SOF( _10 )
00026C 0F0C            3926         PUSH.W  R2, R3
                       3928         CALL    _sscanf
00026E C4rrrrrr       +3928 ;       FCALL   _sscanf
000272 99700008        3929         ADD.W   R7,#08H
000276 99040001        3931         CMP.W   R0,#01H
00027A F306            3932         BEQ     _40
00027A F306            3932         BEQ     _40
00027C                 3933 _39:
                       3934 ; rs232cmd.c 1107                               {
                       3935 ; rs232cmd.c 1108                                       SCPIError = SyntaxErr;  
00027C 964842rr        3937         MOV.B   ES,#SEG( _SCPIError )
000280 9908rrrr        3938         MOV.W   R0,#SOF( _SCPIError )
000284 BA03            3939         MOV.W   [R0],#03H
                       3940 ; rs232cmd.c 1109                                       return;
000286 FE12            3942         BR      _47
                       3943 ; rs232cmd.c 1110                               }
000288                 3945 _40:
                       3946 ; rs232cmd.c 1111       
                       3947 ; rs232cmd.c 1112                               if ( Reg > 255)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  64

ADDR   CODE            LINE SOURCELINE
000288 9A7400FF        3949         CMP.W   [R7],#0FFH
00028C FD07            3950         BLE     _41
                       3951 ; rs232cmd.c 1113                               {
                       3952 ; rs232cmd.c 1114                                       SCPIError = DataOutOfRange;
00028E 964842rr        3954         MOV.B   ES,#SEG( _SCPIError )
000292 9908rrrr        3955         MOV.W   R0,#SOF( _SCPIError )
000296 9A080021        3956         MOV.W   [R0],#021H
                       3957 ; rs232cmd.c 1115                                       return;
00029A FE08            3959         BR      _47
                       3960 ; rs232cmd.c 1116                               }
00029C                 3962 _41:
                       3963 ; rs232cmd.c 1117       
                       3964 ; rs232cmd.c 1118                               SREReg = Reg & 0xBF;
00029C 8A07            3966         MOV.W   R0,[R7]
00029E 9105BF          3967         AND.B   R0L,#0BFH
0002A1 964842rr        3968         MOV.B   ES,#SEG( _SREReg )
0002A5 9918rrrr        3969         MOV.W   R1,#SOF( _SREReg )
0002A9 8209            3970         MOV.B   [R1],R0L
                       3971 ; rs232cmd.c 1119                       }
                       3972 ; rs232cmd.c 1120               }
                       3973 ; rs232cmd.c 1121       }
0002AC                 3975 _47:
0002AC A972            3976         ADDS.W  R7,#02H
0002AE D680            3978         RET
                       3980 ; rs232cmd.c 1122       
                       3981 ; rs232cmd.c 1123       /************************************************************************
                            **/
                       3982 ; rs232cmd.c 1124       /* STBCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3983 ; rs232cmd.c 1125       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3984 ; rs232cmd.c 1126       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3985 ; rs232cmd.c 1127       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3986 ; rs232cmd.c 1128       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3987 ; rs232cmd.c 1129       /* Function:    Read the Status Byte Register                            
                                                                                                                            *
                            /
                       3988 ; rs232cmd.c 1130       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3989 ; rs232cmd.c 1131       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3990 ; rs232cmd.c 1132       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3991 ; rs232cmd.c 1133       /************************************************************************
                            **/
                       3992 ; rs232cmd.c 1134       void STBCommand( void)
                       3993 ; rs232cmd.c 1135       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  65

ADDR   CODE            LINE SOURCELINE
                       3994         ALIGN   1
                       3996         PUBLIC  _STBCommand
0002B0                 3997 _STBCommand:
                       4001 ; rs232cmd.c 1136               if ( CmdExecute && !SCPIError)
0002B0 964842rr        4003         MOV.B   ES,#SEG( _CmdExecute )
0002B4 9908rrrr        4004         MOV.W   R0,#SOF( _CmdExecute )
0002B8 8200            4005         MOV.B   R0L,[R0]
0002BA F331            4006         BEQ     _56
0002BC 964842rr        4007         MOV.B   ES,#SEG( _SCPIError )
0002C0 9908rrrr        4008         MOV.W   R0,#SOF( _SCPIError )
0002C4 8A00            4009         MOV.W   R0,[R0]
0002C6 F22B            4010         BNE     _56
                       4011 ; rs232cmd.c 1137               {
                       4012 ; rs232cmd.c 1138                       if ( CmdRequest)
0002C8 964842rr        4014         MOV.B   ES,#SEG( _CmdRequest )
0002CC 9908rrrr        4015         MOV.W   R0,#SOF( _CmdRequest )
0002D0 8200            4016         MOV.B   R0L,[R0]
0002D2 F320            4017         BEQ     _52
                       4018 ; rs232cmd.c 1139                       {
                       4019 ; rs232cmd.c 1140                               if ( ParCnt)
0002D4 964842rr        4021         MOV.B   ES,#SEG( _ParCnt )
0002D8 9908rrrr        4022         MOV.W   R0,#SOF( _ParCnt )
0002DC 8200            4023         MOV.B   R0L,[R0]
0002DE F306            4024         BEQ     _51
                       4025 ; rs232cmd.c 1141                                       SCPIError = ParNotAllowed;
0002E0 964842rr        4027         MOV.B   ES,#SEG( _SCPIError )
0002E4 9908rrrr        4028         MOV.W   R0,#SOF( _SCPIError )
0002E8 BA06            4029         MOV.W   [R0],#06H
0002EA D680            4030         RET
0002EA D680            4030         RET
0002EC                 4031 _51:
                       4032 ; rs232cmd.c 1142                               else
                       4033 ; rs232cmd.c 1143                               {
                       4034 ; rs232cmd.c 1144                                       UpdateSTBRegister();
                       4036         CALL    _UpdateSTBRegister
0002EC C4rrrrrr       +4036 ;       FCALL   _UpdateSTBRegister
                       4037 ; rs232cmd.c 1145       
                       4038 ; rs232cmd.c 1146                                       rs232printf( 12, "%d\n", STBReg);
0002F0 9908000C        4040         MOV.W   R0,#0CH
0002F4 964842rr        4041         MOV.B   ES,#SEG( _STBReg )
0002F8 9918rrrr        4042         MOV.W   R1,#SOF( _STBReg )
0002FC 8221            4043         MOV.B   R1L,[R1]
0002FE B130            4044         MOVS.B  R1H,#00H
000300 0F02            4045         PUSH.W  R1
000302 9938rrrr        4047         MOV.W   R3,#SEG( _9 )
000306 9928rrrr        4048         MOV.W   R2,#SOF( _9 )
00030A 0F0C            4049         PUSH.W  R2, R3
                       4051         CALL    _rs232printf
00030C C4rrrrrr       +4051 ;       FCALL   _rs232printf
000310 A976            4052         ADDS.W  R7,#06H
                       4054 ; rs232cmd.c 1147                               }
                       4055 ; rs232cmd.c 1148                       }
000312 D680            4057         RET
000312 D680            4057         RET
000314                 4058 _52:
                       4059 ; rs232cmd.c 1149                       else
                       4060 ; rs232cmd.c 1150                               SCPIError = SyntaxErr;
000314 964842rr        4062         MOV.B   ES,#SEG( _SCPIError )
000318 9908rrrr        4063         MOV.W   R0,#SOF( _SCPIError )
00031C BA03            4064         MOV.W   [R0],#03H
                       4065 ; rs232cmd.c 1151               }
00031E                 4067 _56:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  66

ADDR   CODE            LINE SOURCELINE
                       4068 ; rs232cmd.c 1152       }
00031E D680            4070         RET
                       4072 ; rs232cmd.c 1153       
                       4073 ; rs232cmd.c 1154       /************************************************************************
                            **/
                       4074 ; rs232cmd.c 1155       /* TSTCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4075 ; rs232cmd.c 1156       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4076 ; rs232cmd.c 1157       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       4077 ; rs232cmd.c 1158       /* Revised:             000505                                           
                                                                                                                             
                                                                                    */
                       4078 ; rs232cmd.c 1159       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4079 ; rs232cmd.c 1160       /* Function:    Selftest query                                           
                                                                                                                             
                                                                    */
                       4080 ; rs232cmd.c 1161       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4081 ; rs232cmd.c 1162       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4082 ; rs232cmd.c 1163       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4083 ; rs232cmd.c 1164       /************************************************************************
                            **/
                       4084 ; rs232cmd.c 1165       void TSTCommand( void)
                       4085 ; rs232cmd.c 1166       {
                       4086         ALIGN   1
                       4088         PUBLIC  _TSTCommand
000320                 4089 _TSTCommand:
                       4093 ; rs232cmd.c 1167               if ( CmdExecute && !SCPIError)
000320 964842rr        4095         MOV.B   ES,#SEG( _CmdExecute )
000324 9908rrrr        4096         MOV.W   R0,#SOF( _CmdExecute )
000328 8200            4097         MOV.B   R0L,[R0]
00032A F31D            4098         BEQ     _61
00032C 964842rr        4099         MOV.B   ES,#SEG( _SCPIError )
000330 9908rrrr        4100         MOV.W   R0,#SOF( _SCPIError )
000334 8A00            4101         MOV.W   R0,[R0]
000336 F217            4102         BNE     _61
                       4103 ; rs232cmd.c 1168               {
                       4104 ; rs232cmd.c 1169                       if ( CmdRequest)
000338 964842rr        4106         MOV.B   ES,#SEG( _CmdRequest )
00033C 9908rrrr        4107         MOV.W   R0,#SOF( _CmdRequest )
000340 8200            4108         MOV.B   R0L,[R0]
000342 F30C            4109         BEQ     _57
                       4110 ; rs232cmd.c 1170                       {
                       4111 ; rs232cmd.c 1171                               if ( ParCnt)
000344 964842rr        4113         MOV.B   ES,#SEG( _ParCnt )
000348 9908rrrr        4114         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  67

ADDR   CODE            LINE SOURCELINE
00034C 8200            4115         MOV.B   R0L,[R0]
00034E F30B            4116         BEQ     _61
                       4117 ; rs232cmd.c 1172                                       SCPIError = ParNotAllowed;
000350 964842rr        4119         MOV.B   ES,#SEG( _SCPIError )
000354 9908rrrr        4120         MOV.W   R0,#SOF( _SCPIError )
000358 BA06            4121         MOV.W   [R0],#06H
                       4122 ; rs232cmd.c 1173                               else
                       4123 ; rs232cmd.c 1174                               {
                       4124 ; rs232cmd.c 1175                                       ;
                       4125 ; rs232cmd.c 1176                               }
                       4126 ; rs232cmd.c 1177                       }
00035A D680            4128         RET
00035A D680            4128         RET
00035C                 4129 _57:
                       4130 ; rs232cmd.c 1178                       else
                       4131 ; rs232cmd.c 1179                               SCPIError = SyntaxErr;
00035C 964842rr        4133         MOV.B   ES,#SEG( _SCPIError )
000360 9908rrrr        4134         MOV.W   R0,#SOF( _SCPIError )
000364 BA03            4135         MOV.W   [R0],#03H
                       4136 ; rs232cmd.c 1180               }
000366                 4138 _61:
                       4139 ; rs232cmd.c 1181       }
000366 D680            4141         RET
                       4143 ; rs232cmd.c 1182       
                       4144 ; rs232cmd.c 1183       /************************************************************************
                            **/
                       4145 ; rs232cmd.c 1184       /* WAICommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4146 ; rs232cmd.c 1185       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4147 ; rs232cmd.c 1186       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       4148 ; rs232cmd.c 1187       /* Revised:             000505                                           
                                                                                                                             
                                                                                    */
                       4149 ; rs232cmd.c 1188       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4150 ; rs232cmd.c 1189       /* Function:    Wait-to-continue command                                 
                                                                                                                             
                                            */
                       4151 ; rs232cmd.c 1190       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4152 ; rs232cmd.c 1191       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4153 ; rs232cmd.c 1192       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4154 ; rs232cmd.c 1193       /************************************************************************
                            **/
                       4155 ; rs232cmd.c 1194       void WAICommand( void)
                       4156 ; rs232cmd.c 1195       {
                       4157         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  68

ADDR   CODE            LINE SOURCELINE
                       4159         PUBLIC  _WAICommand
000368                 4160 _WAICommand:
                       4164 ; rs232cmd.c 1196               if ( CmdExecute && !SCPIError)
000368 964842rr        4166         MOV.B   ES,#SEG( _CmdExecute )
00036C 9908rrrr        4167         MOV.W   R0,#SOF( _CmdExecute )
000370 8200            4168         MOV.B   R0L,[R0]
000372 F31D            4169         BEQ     _66
000374 964842rr        4170         MOV.B   ES,#SEG( _SCPIError )
000378 9908rrrr        4171         MOV.W   R0,#SOF( _SCPIError )
00037C 8A00            4172         MOV.W   R0,[R0]
00037E F217            4173         BNE     _66
                       4174 ; rs232cmd.c 1197               {
                       4175 ; rs232cmd.c 1198                       if ( CmdRequest)
000380 964842rr        4177         MOV.B   ES,#SEG( _CmdRequest )
000384 9908rrrr        4178         MOV.W   R0,#SOF( _CmdRequest )
000388 8200            4179         MOV.B   R0L,[R0]
00038A F306            4180         BEQ     _62
                       4181 ; rs232cmd.c 1199                               SCPIError = SyntaxErr;
00038C 964842rr        4183         MOV.B   ES,#SEG( _SCPIError )
000390 9908rrrr        4184         MOV.W   R0,#SOF( _SCPIError )
000394 BA03            4185         MOV.W   [R0],#03H
000396 D680            4186         RET
000396 D680            4186         RET
000398                 4187 _62:
                       4188 ; rs232cmd.c 1200                       else
                       4189 ; rs232cmd.c 1201                       {
                       4190 ; rs232cmd.c 1202                               if ( ParCnt)
000398 964842rr        4192         MOV.B   ES,#SEG( _ParCnt )
00039C 9908rrrr        4193         MOV.W   R0,#SOF( _ParCnt )
0003A0 8200            4194         MOV.B   R0L,[R0]
0003A2 F305            4195         BEQ     _66
                       4196 ; rs232cmd.c 1203                                       SCPIError = ParNotAllowed;
0003A4 964842rr        4198         MOV.B   ES,#SEG( _SCPIError )
0003A8 9908rrrr        4199         MOV.W   R0,#SOF( _SCPIError )
0003AC BA06            4200         MOV.W   [R0],#06H
                       4201 ; rs232cmd.c 1204                               else
                       4202 ; rs232cmd.c 1205                               {
                       4203 ; rs232cmd.c 1206                                       ;
                       4204 ; rs232cmd.c 1207                               }
                       4205 ; rs232cmd.c 1208                       }
                       4206 ; rs232cmd.c 1209               }
0003AE                 4208 _66:
                       4209 ; rs232cmd.c 1210       }
0003AE D680            4211         RET
                       4213 ; rs232cmd.c 1211       
                       4214 ; rs232cmd.c 1212       /************************************************************************
                            **/
                       4215 ; rs232cmd.c 1213       /* RSTCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4216 ; rs232cmd.c 1214       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4217 ; rs232cmd.c 1215       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       4218 ; rs232cmd.c 1216       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                       4219 ; rs232cmd.c 1217       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  69

ADDR   CODE            LINE SOURCELINE
                                                    */
                       4220 ; rs232cmd.c 1218       /* Function:    Reset comamnd                                            
                                                                                                                             
                                                                            */
                       4221 ; rs232cmd.c 1219       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4222 ; rs232cmd.c 1220       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4223 ; rs232cmd.c 1221       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4224 ; rs232cmd.c 1222       /************************************************************************
                            **/
                       4225 ; rs232cmd.c 1223       void RSTCommand( void)
                       4226 ; rs232cmd.c 1224       {
                       4227         ALIGN   1
                       4229         PUBLIC  _RSTCommand
0003B0                 4230 _RSTCommand:
                       4234 ; rs232cmd.c 1225               if ( CmdExecute && !SCPIError)
0003B0 964842rr        4236         MOV.B   ES,#SEG( _CmdExecute )
0003B4 9908rrrr        4237         MOV.W   R0,#SOF( _CmdExecute )
0003B8 8200            4238         MOV.B   R0L,[R0]
0003BA F320            4239         BEQ     _72
0003BC 964842rr        4240         MOV.B   ES,#SEG( _SCPIError )
0003C0 9908rrrr        4241         MOV.W   R0,#SOF( _SCPIError )
0003C4 8A00            4242         MOV.W   R0,[R0]
0003C6 F21A            4243         BNE     _72
                       4244 ; rs232cmd.c 1226               {
                       4245 ; rs232cmd.c 1227                       if ( CmdRequest)
0003C8 964842rr        4247         MOV.B   ES,#SEG( _CmdRequest )
0003CC 9908rrrr        4248         MOV.W   R0,#SOF( _CmdRequest )
0003D0 8200            4249         MOV.B   R0L,[R0]
0003D2 F306            4250         BEQ     _67
                       4251 ; rs232cmd.c 1228                               SCPIError = SyntaxErr;
0003D4 964842rr        4253         MOV.B   ES,#SEG( _SCPIError )
0003D8 9908rrrr        4254         MOV.W   R0,#SOF( _SCPIError )
0003DC BA03            4255         MOV.W   [R0],#03H
0003DE D680            4256         RET
0003DE D680            4256         RET
0003E0                 4257 _67:
                       4258 ; rs232cmd.c 1229                       else
                       4259 ; rs232cmd.c 1230                       {
                       4260 ; rs232cmd.c 1231                               if ( ParCnt)
0003E0 964842rr        4262         MOV.B   ES,#SEG( _ParCnt )
0003E4 9908rrrr        4263         MOV.W   R0,#SOF( _ParCnt )
0003E8 8200            4264         MOV.B   R0L,[R0]
0003EA F306            4265         BEQ     _68
                       4266 ; rs232cmd.c 1232                                       SCPIError = ParNotAllowed;
0003EC 964842rr        4268         MOV.B   ES,#SEG( _SCPIError )
0003F0 9908rrrr        4269         MOV.W   R0,#SOF( _SCPIError )
0003F4 BA06            4270         MOV.W   [R0],#06H
0003F6 D680            4271         RET
0003F6 D680            4271         RET
0003F8                 4272 _68:
                       4273 ; rs232cmd.c 1233                               else
                       4274 ; rs232cmd.c 1234                                       ResetInstrument();
                       4276         CALL    _ResetInstrument
0003F8 C4rrrrrr       +4276 ;       FCALL   _ResetInstrument
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  70

ADDR   CODE            LINE SOURCELINE
                       4277 ; rs232cmd.c 1235                       }
                       4278 ; rs232cmd.c 1236               }
0003FC                 4280 _72:
                       4281 ; rs232cmd.c 1237       }
0003FC D680            4283         RET
                       4285 ; rs232cmd.c 1238       
                       4286 ; rs232cmd.c 1239       /************************************************************************
                            **/
                       4287 ; rs232cmd.c 1240       /* IDNCommand                                                            
                                                                                                                             
                                                               RS232CMD.C */
                       4288 ; rs232cmd.c 1241       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4289 ; rs232cmd.c 1242       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       4290 ; rs232cmd.c 1243       /* Revised:             000614                                           
                                                                                                                             
                                                                                    */
                       4291 ; rs232cmd.c 1244       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4292 ; rs232cmd.c 1245       /* Function:    Identification query                                     
                                                                                                                             
                                                    */
                       4293 ; rs232cmd.c 1246       /* Remarks:             No parameter, Query only                         
                                                                                                                             
                                                    */
                       4294 ; rs232cmd.c 1247       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4295 ; rs232cmd.c 1248       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4296 ; rs232cmd.c 1249       /************************************************************************
                            **/
                       4297 ; rs232cmd.c 1250       void IDNCommand( void)
                       4298 ; rs232cmd.c 1251       {
                       4299         ALIGN   1
                       4301         PUBLIC  _IDNCommand
0003FE                 4302 _IDNCommand:
                       4306 ; rs232cmd.c 1252               if ( CmdExecute && !SCPIError)
0003FE 964842rr        4308         MOV.B   ES,#SEG( _CmdExecute )
000402 9908rrrr        4309         MOV.W   R0,#SOF( _CmdExecute )
000406 8200            4310         MOV.B   R0L,[R0]
000408 F344            4311         BEQ     _78
00040A 964842rr        4312         MOV.B   ES,#SEG( _SCPIError )
00040E 9908rrrr        4313         MOV.W   R0,#SOF( _SCPIError )
000412 8A00            4314         MOV.W   R0,[R0]
000414 F23E            4315         BNE     _78
                       4316 ; rs232cmd.c 1253               {
                       4317 ; rs232cmd.c 1254                       if ( CmdRequest)
000416 964842rr        4319         MOV.B   ES,#SEG( _CmdRequest )
00041A 9908rrrr        4320         MOV.W   R0,#SOF( _CmdRequest )
00041E 8200            4321         MOV.B   R0L,[R0]
000420 F333            4322         BEQ     _74
                       4323 ; rs232cmd.c 1255                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  71

ADDR   CODE            LINE SOURCELINE
                       4324 ; rs232cmd.c 1256                               if ( ParCnt)
000422 964842rr        4326         MOV.B   ES,#SEG( _ParCnt )
000426 9908rrrr        4327         MOV.W   R0,#SOF( _ParCnt )
00042A 8200            4328         MOV.B   R0L,[R0]
00042C F306            4329         BEQ     _73
                       4330 ; rs232cmd.c 1257                                       SCPIError = ParNotAllowed;
00042E 964842rr        4332         MOV.B   ES,#SEG( _SCPIError )
000432 9908rrrr        4333         MOV.W   R0,#SOF( _SCPIError )
000436 BA06            4334         MOV.W   [R0],#06H
000438 D680            4335         RET
000438 D680            4335         RET
00043A                 4336 _73:
                       4337 ; rs232cmd.c 1258                               else
                       4338 ; rs232cmd.c 1259                               {
                       4339 ; rs232cmd.c 1260                                       rs232puts( Calibration.Company);
00043A 9918rrrr        4341         MOV.W   R1,#SEG( _Calibration )
00043E 9908rrrr        4342         MOV.W   R0,#SOF( _Calibration )
                       4343         CALL    _rs232puts
000442 C4rrrrrr       +4343 ;       FCALL   _rs232puts
                       4344 ; rs232cmd.c 1261       
                       4345 ; rs232cmd.c 1262                                       rs232putchar( ',');
000446 91082C          4347         MOV.B   R0L,#02CH
                       4348         CALL    _rs232putchar
000449 C4rrrrrr       +4348 ;       FCALL   _rs232putchar
                       4349 ; rs232cmd.c 1263       
                       4350 ; rs232cmd.c 1264                                       rs232puts( Calibration.Type);
00044D 9918rrrr        4352         MOV.W   R1,#SEG( _Calibration+33 )
000451 9908rrrr        4353         MOV.W   R0,#SOF( _Calibration+33 )
                       4354         CALL    _rs232puts
000455 C4rrrrrr       +4354 ;       FCALL   _rs232puts
000459 91082C          4355         MOV.B   R0L,#02CH
                       4356 ; rs232cmd.c 1265       
                       4357 ; rs232cmd.c 1266                                       rs232putchar( ',');
                       4359         CALL    _rs232putchar
00045C C4rrrrrr       +4359 ;       FCALL   _rs232putchar
                       4360 ; rs232cmd.c 1267       
                       4361 ; rs232cmd.c 1268                                       rs232puts( Calibration.KUNumber);
000460 9918rrrr        4363         MOV.W   R1,#SEG( _Calibration+66 )
000464 9908rrrr        4364         MOV.W   R0,#SOF( _Calibration+66 )
                       4365         CALL    _rs232puts
000468 C4rrrrrr       +4365 ;       FCALL   _rs232puts
                       4366 ; rs232cmd.c 1269       
                       4367 ; rs232cmd.c 1270                                       rs232putchar( ',');
00046C 91082C          4369         MOV.B   R0L,#02CH
                       4370         CALL    _rs232putchar
00046F C4rrrrrr       +4370 ;       FCALL   _rs232putchar
                       4371 ; rs232cmd.c 1271       
                       4372 ; rs232cmd.c 1272                                       rs232puts( Calibration.SWRevision);
000473 9918rrrr        4374         MOV.W   R1,#SEG( _Calibration+75 )
000477 9908rrrr        4375         MOV.W   R0,#SOF( _Calibration+75 )
                       4376         CALL    _rs232puts
00047B C4rrrrrr       +4376 ;       FCALL   _rs232puts
                       4377 ; rs232cmd.c 1273       
                       4378 ; rs232cmd.c 1274                                       rs232putchar( '\n');
00047F 91080A          4380         MOV.B   R0L,#0AH
                       4381         CALL    _rs232putchar
000482 C4rrrrrr       +4381 ;       FCALL   _rs232putchar
                       4382 ; rs232cmd.c 1275                               }
                       4383 ; rs232cmd.c 1276                       }
000486 D680            4385         RET
000486 D680            4385         RET
000488                 4386 _74:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  72

ADDR   CODE            LINE SOURCELINE
                       4387 ; rs232cmd.c 1277                       else
                       4388 ; rs232cmd.c 1278                               SCPIError = SyntaxErr;
000488 964842rr        4390         MOV.B   ES,#SEG( _SCPIError )
00048C 9908rrrr        4391         MOV.W   R0,#SOF( _SCPIError )
000490 BA03            4392         MOV.W   [R0],#03H
                       4393 ; rs232cmd.c 1279               }
000492                 4395 _78:
                       4396 ; rs232cmd.c 1280       }
000492 D680            4398         RET
                       4400 ; rs232cmd.c 1281       
                       4401 ; rs232cmd.c 1282       /************************************************************************
                            **/
                       4402 ; rs232cmd.c 1283       /* RCLCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4403 ; rs232cmd.c 1284       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4404 ; rs232cmd.c 1285       /* Author:              Sten A. Andersen/Thomas Kappelgaard, DEV, xxxxxx 
                                                                            */
                       4405 ; rs232cmd.c 1286       /* Revised:             Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                                    */
                       4406 ; rs232cmd.c 1287       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4407 ; rs232cmd.c 1288       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       4408 ; rs232cmd.c 1289       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4409 ; rs232cmd.c 1290       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4410 ; rs232cmd.c 1291       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4411 ; rs232cmd.c 1292       /************************************************************************
                            **/
                       4412 ; rs232cmd.c 1293       void RCLCommand(void) 
                       4413 ; rs232cmd.c 1294       {
                       4414         ALIGN   1
                       4416         PUBLIC  _RCLCommand
000494                 4417 _RCLCommand:
000494 A97E            4421         ADDS.W  R7,#0EH
                       4424 ; rs232cmd.c 1295               int     Reg = 0;
000496 BA70            4426         MOV.W   [R7],#00H
                       4427 ; rs232cmd.c 1296       
                       4428 ; rs232cmd.c 1297               if ( CmdExecute && !SCPIError)
000498 964842rr        4430         MOV.B   ES,#SEG( _CmdExecute )
00049C 9908rrrr        4431         MOV.W   R0,#SOF( _CmdExecute )
0004A0 8200            4432         MOV.B   R0L,[R0]
0004A2 F34C            4433         BEQ     _89
0004A4 964842rr        4434         MOV.B   ES,#SEG( _SCPIError )
0004A8 9908rrrr        4435         MOV.W   R0,#SOF( _SCPIError )
0004AC 8A00            4436         MOV.W   R0,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  73

ADDR   CODE            LINE SOURCELINE
0004AE F246            4437         BNE     _89
                       4438 ; rs232cmd.c 1298               {
                       4439 ; rs232cmd.c 1299                       if ( CmdRequest)
0004B0 964842rr        4441         MOV.B   ES,#SEG( _CmdRequest )
0004B4 9908rrrr        4442         MOV.W   R0,#SOF( _CmdRequest )
0004B8 8200            4443         MOV.B   R0L,[R0]
0004BA F306            4444         BEQ     _79
                       4445 ; rs232cmd.c 1300                       {
                       4446 ; rs232cmd.c 1301                               SCPIError = SyntaxErr;
0004BC 964842rr        4448         MOV.B   ES,#SEG( _SCPIError )
0004C0 9908rrrr        4449         MOV.W   R0,#SOF( _SCPIError )
0004C4 BA03            4450         MOV.W   [R0],#03H
                       4451 ; rs232cmd.c 1302                       }
0004C6 FE3A            4453         BR      _89
0004C6 FE3A            4453         BR      _89
0004C8                 4454 _79:
                       4455 ; rs232cmd.c 1303                       else
                       4456 ; rs232cmd.c 1304                       {
                       4457 ; rs232cmd.c 1305                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0004C8 964842rr        4459         MOV.B   ES,#SEG( _ParCnt )
0004CC 9908rrrr        4460         MOV.W   R0,#SOF( _ParCnt )
0004D0 8200            4461         MOV.B   R0L,[R0]
0004D2 910401          4462         CMP.B   R0L,#01H
0004D5 F215            4463         BNE     _80
0004D7 9918rrrr        4464         MOV.W   R1,#SEG( _Cmd )
0004DB 9908rrrr        4465         MOV.W   R0,#SOF( _Cmd )
0004DF 9168rr          4466         MOV.B   R3L,#SEG( __lc_bs )
0004E2 7177            4467         XOR.B   R3H,R3H
0004E4 8927            4468         MOV.W   R2,R7
0004E6 0F0C            4469         PUSH.W  R2, R3
0004E8 9938rrrr        4471         MOV.W   R3,#SEG( _10 )
0004EC 9928rrrr        4472         MOV.W   R2,#SOF( _10 )
0004F0 0F0C            4473         PUSH.W  R2, R3
                       4475         CALL    _sscanf
0004F2 C4rrrrrr       +4475 ;       FCALL   _sscanf
0004F6 99700008        4476         ADD.W   R7,#08H
0004FA 99040001        4478         CMP.W   R0,#01H
0004FE F306            4479         BEQ     _81
0004FE F306            4479         BEQ     _81
000500                 4480 _80:
                       4481 ; rs232cmd.c 1306                               {
                       4482 ; rs232cmd.c 1307                                       SCPIError = SyntaxErr;  
000500 964842rr        4484         MOV.B   ES,#SEG( _SCPIError )
000504 9908rrrr        4485         MOV.W   R0,#SOF( _SCPIError )
000508 BA03            4486         MOV.W   [R0],#03H
                       4487 ; rs232cmd.c 1308                                       return;
00050A FE18            4489         BR      _89
                       4490 ; rs232cmd.c 1309                               }
00050C                 4492 _81:
                       4493 ; rs232cmd.c 1310       
                       4494 ; rs232cmd.c 1311                               if (( Reg == 0) || ( Reg > NoOfPresets))
00050C 8A07            4496         MOV.W   R0,[R7]
00050E F303            4497         BEQ     _82
000510 9A740004        4498         CMP.W   [R7],#04H
000514 FD07            4499         BLE     _83
000514 FD07            4499         BLE     _83
000516                 4500 _82:
                       4501 ; rs232cmd.c 1312                                       SCPIError = DataOutOfRange;
000516 964842rr        4503         MOV.B   ES,#SEG( _SCPIError )
00051A 9908rrrr        4504         MOV.W   R0,#SOF( _SCPIError )
00051E 9A080021        4505         MOV.W   [R0],#021H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  74

ADDR   CODE            LINE SOURCELINE
000522 FE0C            4506         BR      _89
000522 FE0C            4506         BR      _89
000524                 4507 _83:
                       4508 ; rs232cmd.c 1313                               else
                       4509 ; rs232cmd.c 1314                               {
                       4510 ; rs232cmd.c 1315                                       if ( RecallPreset( Reg) != OK)
000524 8A07            4512         MOV.W   R0,[R7]
                       4513         CALL    _RecallPreset
000526 C4rrrrrr       +4513 ;       FCALL   _RecallPreset
00052A 9904FFFF        4514         CMP.W   R0,#0FFFFH
00052E F306            4515         BEQ     _89
                       4516 ; rs232cmd.c 1316                                               SCPIError = ExecErr;
000530 964842rr        4518         MOV.B   ES,#SEG( _SCPIError )
000534 9908rrrr        4519         MOV.W   R0,#SOF( _SCPIError )
000538 9A08001D        4520         MOV.W   [R0],#01DH
                       4521 ; rs232cmd.c 1317                               }
                       4522 ; rs232cmd.c 1318                       }
                       4523 ; rs232cmd.c 1319               }
                       4524 ; rs232cmd.c 1320       }
00053C                 4526 _89:
00053C A972            4527         ADDS.W  R7,#02H
00053E D680            4529         RET
                       4531 ; rs232cmd.c 1321       
                       4532 ; rs232cmd.c 1322       /************************************************************************
                            **/
                       4533 ; rs232cmd.c 1323       /* SAVCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4534 ; rs232cmd.c 1324       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4535 ; rs232cmd.c 1325       /* Author:              Sten A. Andersen/Thomas Kappelgaard, DEV, xxxxxx 
                                                                            */
                       4536 ; rs232cmd.c 1326       /* Revised:             Kim Engedahl, DEV, 000502                        
                                                                                                                             
                                                    */
                       4537 ; rs232cmd.c 1327       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4538 ; rs232cmd.c 1328       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       4539 ; rs232cmd.c 1329       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4540 ; rs232cmd.c 1330       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4541 ; rs232cmd.c 1331       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4542 ; rs232cmd.c 1332       /************************************************************************
                            **/
                       4543 ; rs232cmd.c 1333       void SAVCommand(void) 
                       4544 ; rs232cmd.c 1334       {
                       4545         ALIGN   1
                       4547         PUBLIC  _SAVCommand
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  75

ADDR   CODE            LINE SOURCELINE
000540                 4548 _SAVCommand:
000540 A97E            4552         ADDS.W  R7,#0EH
                       4555 ; rs232cmd.c 1335               int     Reg = 0;
000542 BA70            4557         MOV.W   [R7],#00H
                       4558 ; rs232cmd.c 1336       
                       4559 ; rs232cmd.c 1337               if ( CmdExecute && !SCPIError)
000544 964842rr        4561         MOV.B   ES,#SEG( _CmdExecute )
000548 9908rrrr        4562         MOV.W   R0,#SOF( _CmdExecute )
00054C 8200            4563         MOV.B   R0L,[R0]
00054E F34C            4564         BEQ     _104
000550 964842rr        4565         MOV.B   ES,#SEG( _SCPIError )
000554 9908rrrr        4566         MOV.W   R0,#SOF( _SCPIError )
000558 8A00            4567         MOV.W   R0,[R0]
00055A F246            4568         BNE     _104
                       4569 ; rs232cmd.c 1338               {
                       4570 ; rs232cmd.c 1339                       if ( CmdRequest)
00055C 964842rr        4572         MOV.B   ES,#SEG( _CmdRequest )
000560 9908rrrr        4573         MOV.W   R0,#SOF( _CmdRequest )
000564 8200            4574         MOV.B   R0L,[R0]
000566 F306            4575         BEQ     _94
                       4576 ; rs232cmd.c 1340                               SCPIError = SyntaxErr;
000568 964842rr        4578         MOV.B   ES,#SEG( _SCPIError )
00056C 9908rrrr        4579         MOV.W   R0,#SOF( _SCPIError )
000570 BA03            4580         MOV.W   [R0],#03H
000572 FE3A            4581         BR      _104
000572 FE3A            4581         BR      _104
000574                 4582 _94:
                       4583 ; rs232cmd.c 1341                       else
                       4584 ; rs232cmd.c 1342                       {
                       4585 ; rs232cmd.c 1343                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000574 964842rr        4587         MOV.B   ES,#SEG( _ParCnt )
000578 9908rrrr        4588         MOV.W   R0,#SOF( _ParCnt )
00057C 8200            4589         MOV.B   R0L,[R0]
00057E 910401          4590         CMP.B   R0L,#01H
000581 F215            4591         BNE     _95
000583 9918rrrr        4592         MOV.W   R1,#SEG( _Cmd )
000587 9908rrrr        4593         MOV.W   R0,#SOF( _Cmd )
00058B 9168rr          4594         MOV.B   R3L,#SEG( __lc_bs )
00058E 7177            4595         XOR.B   R3H,R3H
000590 8927            4596         MOV.W   R2,R7
000592 0F0C            4597         PUSH.W  R2, R3
000594 9938rrrr        4599         MOV.W   R3,#SEG( _10 )
000598 9928rrrr        4600         MOV.W   R2,#SOF( _10 )
00059C 0F0C            4601         PUSH.W  R2, R3
                       4603         CALL    _sscanf
00059E C4rrrrrr       +4603 ;       FCALL   _sscanf
0005A2 99700008        4604         ADD.W   R7,#08H
0005A6 99040001        4606         CMP.W   R0,#01H
0005AA F306            4607         BEQ     _96
0005AA F306            4607         BEQ     _96
0005AC                 4608 _95:
                       4609 ; rs232cmd.c 1344                               {
                       4610 ; rs232cmd.c 1345                                       SCPIError = SyntaxErr;  
0005AC 964842rr        4612         MOV.B   ES,#SEG( _SCPIError )
0005B0 9908rrrr        4613         MOV.W   R0,#SOF( _SCPIError )
0005B4 BA03            4614         MOV.W   [R0],#03H
                       4615 ; rs232cmd.c 1346                                       return;
0005B6 FE18            4617         BR      _104
                       4618 ; rs232cmd.c 1347                               }
0005B8                 4620 _96:
                       4621 ; rs232cmd.c 1348       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  76

ADDR   CODE            LINE SOURCELINE
                       4622 ; rs232cmd.c 1349                               if (( Reg == 0) || ( Reg > NoOfPresets))
0005B8 8A07            4624         MOV.W   R0,[R7]
0005BA F303            4625         BEQ     _97
0005BC 9A740004        4626         CMP.W   [R7],#04H
0005C0 FD07            4627         BLE     _98
0005C0 FD07            4627         BLE     _98
0005C2                 4628 _97:
                       4629 ; rs232cmd.c 1350                                       SCPIError = DataOutOfRange;
0005C2 964842rr        4631         MOV.B   ES,#SEG( _SCPIError )
0005C6 9908rrrr        4632         MOV.W   R0,#SOF( _SCPIError )
0005CA 9A080021        4633         MOV.W   [R0],#021H
0005CE FE0C            4634         BR      _104
0005CE FE0C            4634         BR      _104
0005D0                 4635 _98:
                       4636 ; rs232cmd.c 1351                               else
                       4637 ; rs232cmd.c 1352                               {
                       4638 ; rs232cmd.c 1353                                       if ( StorePreset( Reg) != OK)
0005D0 8A07            4640         MOV.W   R0,[R7]
                       4641         CALL    _StorePreset
0005D2 C4rrrrrr       +4641 ;       FCALL   _StorePreset
0005D6 9904FFFF        4642         CMP.W   R0,#0FFFFH
0005DA F306            4643         BEQ     _104
                       4644 ; rs232cmd.c 1354                                               SCPIError = ExecErr;
0005DC 964842rr        4646         MOV.B   ES,#SEG( _SCPIError )
0005E0 9908rrrr        4647         MOV.W   R0,#SOF( _SCPIError )
0005E4 9A08001D        4648         MOV.W   [R0],#01DH
                       4649 ; rs232cmd.c 1355                               }
                       4650 ; rs232cmd.c 1356                       }
                       4651 ; rs232cmd.c 1357               }
                       4652 ; rs232cmd.c 1358       }
0005E8                 4654 _104:
0005E8 A972            4655         ADDS.W  R7,#02H
0005EA D680            4657         RET
                       4659 ; rs232cmd.c 1359       
                       4660 ; rs232cmd.c 1360       /************************************************************************
                            **/
                       4661 ; rs232cmd.c 1361       /* SystemError                                                           
                                                                                                                             
                                                             RS232CMD.C */
                       4662 ; rs232cmd.c 1362       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4663 ; rs232cmd.c 1363       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       4664 ; rs232cmd.c 1364       /* Revised:             000401                                           
                                                                                                                             
                                                                                    */
                       4665 ; rs232cmd.c 1365       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4666 ; rs232cmd.c 1366       /* Function:    Write the next entry in the error queue (FIFO) to RS232  
                                            */
                       4667 ; rs232cmd.c 1367       /* Remarks:             No parameters, Query only                        
                                                                                                                             
                                                    */
                       4668 ; rs232cmd.c 1368       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4669 ; rs232cmd.c 1369       /* Updates:             -                                                
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  77

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                            *
                            /
                       4670 ; rs232cmd.c 1370       /************************************************************************
                            **/
                       4671 ; rs232cmd.c 1371       void SystemError( void)
                       4672 ; rs232cmd.c 1372       {
                       4673         ALIGN   1
                       4675         PUBLIC  _SystemError
0005EC                 4676 _SystemError:
0005EC 0F30            4680         PUSH.W  R4, R5
0005EE 9972000C        4682         SUB.W   R7,#0CH
                       4690 ; rs232cmd.c 1373               int i;
                       4691 ; rs232cmd.c 1374               code char *ptr;
                       4692 ; rs232cmd.c 1375               char buf[12];
                       4693 ; rs232cmd.c 1376       
                       4694 ; rs232cmd.c 1377               if ( CmdExecute && !SCPIError)
0005F2 964842rr        4696         MOV.B   ES,#SEG( _CmdExecute )
0005F6 9908rrrr        4697         MOV.W   R0,#SOF( _CmdExecute )
0005FA 8200            4698         MOV.B   R0L,[R0]
0005FC F377            4699         BEQ     _119
0005FE 964842rr        4700         MOV.B   ES,#SEG( _SCPIError )
000602 9908rrrr        4701         MOV.W   R0,#SOF( _SCPIError )
000606 8A00            4702         MOV.W   R0,[R0]
000608 F271            4703         BNE     _119
                       4704 ; rs232cmd.c 1378               {
                       4705 ; rs232cmd.c 1379                       if ( CmdRequest)
00060A 964842rr        4707         MOV.B   ES,#SEG( _CmdRequest )
00060E 9908rrrr        4708         MOV.W   R0,#SOF( _CmdRequest )
000612 8200            4709         MOV.B   R0L,[R0]
000614 F366            4710         BEQ     _114
                       4711 ; rs232cmd.c 1380                       {
                       4712 ; rs232cmd.c 1381                               if ( ParCnt > 0)
000616 964842rr        4714         MOV.B   ES,#SEG( _ParCnt )
00061A 9908rrrr        4715         MOV.W   R0,#SOF( _ParCnt )
00061E 8200            4716         MOV.B   R0L,[R0]
000620 910400          4717         CMP.B   R0L,#00H
000623 F907            4718         BL      _111
                       4719 ; rs232cmd.c 1382                                       SCPIError = ParNotAllowed;
000625 964842rr        4721         MOV.B   ES,#SEG( _SCPIError )
000629 9908rrrr        4722         MOV.W   R0,#SOF( _SCPIError )
00062D BA06            4723         MOV.W   [R0],#06H
00062F FE5E            4724         BR      _119
00062F FE5E00          4724         BR      _119
000632                 4725 _111:
                       4726 ; rs232cmd.c 1383                               else
                       4727 ; rs232cmd.c 1384                               {
                       4728 ; rs232cmd.c 1385                                       if (( i = ReadErrorEventQueue()) >= 0)
                       4730         CALL    _ReadErrorEventQueue
000632 C4rrrrrr       +4730 ;       FCALL   _ReadErrorEventQueue
000636 8940            4731         MOV.W   R4,R0
000638 8910            4732         MOV.W   R1,R0
00063A 99140000        4733         CMP.W   R1,#00H
00063E FB56            4734         BLT     _119
                       4735 ; rs232cmd.c 1386                                       {
                       4736 ; rs232cmd.c 1387                                               sprintf( buf, "%d,\"", ErrorTxt_A
                            rray[i].ErrorNo);
000640 9128rr          4738         MOV.B   R1L,#SEG( __lc_bs )
000643 7133            4739         XOR.B   R1H,R1H
000645 8907            4740         MOV.W   R0,R7
000647 E9400006        4741         MULU.W  R4,#06H
00064B 8924            4742         MOV.W   R2,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  78

ADDR   CODE            LINE SOURCELINE
00064D B930            4743         MOVS.W  R3,#00H
00064F 9918rrrr        4744         MOV.W   R1,#SEG( _ErrorTxt_Array )
000653 9908rrrr        4745         MOV.W   R0,#SOF( _ErrorTxt_Array )
000657 0902            4746         ADD.W   R0,R2
000659 1913            4747         ADDC.W  R1,R3
00065B 862C43          4748         MOV.B   CS,R1L
00065E 8810            4749         MOVC.W  R1,[R0+]
000660 0F02            4750         PUSH.W  R1
000662 9918rrrr        4752         MOV.W   R1,#SEG( _109 )
000666 9908rrrr        4753         MOV.W   R0,#SOF( _109 )
00066A 0F03            4754         PUSH.W  R0, R1
00066C 9128rr          4756         MOV.B   R1L,#SEG( __lc_bs )
00066F 7133            4757         XOR.B   R1H,R1H
000671 400706          4758         LEA     R0,R7+6
                       4759         CALL    _sprintf
000674 C4rrrrrr       +4759 ;       FCALL   _sprintf
000678 A976            4760         ADDS.W  R7,#06H
                       4762 ; rs232cmd.c 1388                                               rs232puts( buf);
00067A 9128rr          4764         MOV.B   R1L,#SEG( __lc_bs )
00067D 7133            4765         XOR.B   R1H,R1H
00067F 8907            4766         MOV.W   R0,R7
                       4767         CALL    _rs232puts
000681 C4rrrrrr       +4767 ;       FCALL   _rs232puts
                       4768 ; rs232cmd.c 1389       
                       4769 ; rs232cmd.c 1390                                               ptr = ErrorTxt_Array[i].ErrorTxt;
                            
000685 8924            4771         MOV.W   R2,R4
000687 B930            4772         MOVS.W  R3,#00H
000689 9918rrrr        4773         MOV.W   R1,#SEG( _ErrorTxt_Array+2 )
00068D 9908rrrr        4774         MOV.W   R0,#SOF( _ErrorTxt_Array+2 )
000691 0902            4775         ADD.W   R0,R2
000693 1913            4776         ADDC.W  R1,R3
000695 862C43          4777         MOV.B   CS,R1L
000698 8820            4778         MOVC.W  R2,[R0+]
00069A 99040000        4779         CMP.W   R0,#00H
00069E F202            4780         BNE     _122
0006A0 A64143          4781         ADDS.B  CS,#01H
0006A0 A6414300        4781         ADDS.B  CS,#01H
0006A4                 4782 _122:
0006A4 8830            4783         MOVC.W  R3,[R0+]
0006A6 8953            4784         MOV.W   R5,R3
0006A8 8942            4785         MOV.W   R4,R2
                       4787 ; rs232cmd.c 1391       
                       4788 ; rs232cmd.c 1392                                               while ( *ptr)
0006AA 866C43          4790         MOV.B   CS,R3L
0006AD 8062            4791         MOVC.B  R3L,[R2+]
0006AF F312            4792         BEQ     _113
0006AF F31200          4792         BEQ     _113
0006B2                 4793 _112:
                       4794 ; rs232cmd.c 1393                                                       rs232putchar( *ptr++);
0006B2 8915            4796         MOV.W   R1,R5
0006B4 8904            4797         MOV.W   R0,R4
0006B6 862C43          4798         MOV.B   CS,R1L
0006B9 8020            4799         MOVC.B  R1L,[R0+]
0006BB 8102            4800         MOV.B   R0L,R1L
                       4801         CALL    _rs232putchar
0006BD C4rrrrrr       +4801 ;       FCALL   _rs232putchar
0006C1 99400001        4802         ADD.W   R4,#01H
0006C5 99510000        4803         ADDC.W  R5,#00H
0006C9 8915            4807         MOV.W   R1,R5
0006CB 8904            4808         MOV.W   R0,R4
0006CD 862C43          4809         MOV.B   CS,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  79

ADDR   CODE            LINE SOURCELINE
0006D0 8020            4810         MOVC.B  R1L,[R0+]
0006D2 F2EF            4811         BNE     _112
0006D4                 4813 _113:
                       4814 ; rs232cmd.c 1394       
                       4815 ; rs232cmd.c 1395                                                rs232puts( "\"\n");
0006D4 9918rrrr        4817         MOV.W   R1,#SEG( _110 )
0006D8 9908rrrr        4818         MOV.W   R0,#SOF( _110 )
                       4819         CALL    _rs232puts
0006DC C4rrrrrr       +4819 ;       FCALL   _rs232puts
                       4820 ; rs232cmd.c 1396                                       }
                       4821 ; rs232cmd.c 1397                               }
                       4822 ; rs232cmd.c 1398                       }
0006E0 FE05            4824         BR      _119
0006E0 FE05            4824         BR      _119
0006E2                 4825 _114:
                       4826 ; rs232cmd.c 1399                       else
                       4827 ; rs232cmd.c 1400                               SCPIError = SyntaxErr;
0006E2 964842rr        4829         MOV.B   ES,#SEG( _SCPIError )
0006E6 9908rrrr        4830         MOV.W   R0,#SOF( _SCPIError )
0006EA BA03            4831         MOV.W   [R0],#03H
                       4832 ; rs232cmd.c 1401               }
0006EC                 4834 _119:
                       4835 ; rs232cmd.c 1402       }
0006EC 9970000C        4837         ADD.W   R7,#0CH
0006F0 2F30            4839         POP.W   R4, R5
0006F2 D680            4841         RET
                       4844 ; rs232cmd.c 1403       
                       4845 ; rs232cmd.c 1404       /************************************************************************
                            **/
                       4846 ; rs232cmd.c 1405       /* SystemVersion                                                         
                                                                                                                             
                                                             RS232CMD.C */
                       4847 ; rs232cmd.c 1406       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4848 ; rs232cmd.c 1407       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       4849 ; rs232cmd.c 1408       /* Revised:             000401                                           
                                                                                                                             
                                                                                    */
                       4850 ; rs232cmd.c 1409       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4851 ; rs232cmd.c 1410       /* Function:    Write the SCPI version to RS232                          
                                                                                                                    */
                       4852 ; rs232cmd.c 1411       /* Remarks:             No parameter, Query only                         
                                                                                                                             
                                                    */
                       4853 ; rs232cmd.c 1412       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4854 ; rs232cmd.c 1413       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4855 ; rs232cmd.c 1414       /************************************************************************
                            **/
                       4856 ; rs232cmd.c 1415       void SystemVersion( void)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  80

ADDR   CODE            LINE SOURCELINE
                       4857 ; rs232cmd.c 1416       {
                       4858         ALIGN   1
                       4860         PUBLIC  _SystemVersion
0006F4                 4861 _SystemVersion:
0006F4 0F30            4865         PUSH.W  R4, R5
                       4869 ; rs232cmd.c 1417               char code *str;
                       4870 ; rs232cmd.c 1418       
                       4871 ; rs232cmd.c 1419               if ( CmdExecute && !SCPIError)
0006F6 964842rr        4873         MOV.B   ES,#SEG( _CmdExecute )
0006FA 9908rrrr        4874         MOV.W   R0,#SOF( _CmdExecute )
0006FE 8200            4875         MOV.B   R0L,[R0]
000700 F33D            4876         BEQ     _130
000702 964842rr        4877         MOV.B   ES,#SEG( _SCPIError )
000706 9908rrrr        4878         MOV.W   R0,#SOF( _SCPIError )
00070A 8A00            4879         MOV.W   R0,[R0]
00070C F237            4880         BNE     _130
                       4881 ; rs232cmd.c 1420               {
                       4882 ; rs232cmd.c 1421                       if ( CmdRequest)
00070E 964842rr        4884         MOV.B   ES,#SEG( _CmdRequest )
000712 9908rrrr        4885         MOV.W   R0,#SOF( _CmdRequest )
000716 8200            4886         MOV.B   R0L,[R0]
000718 F32C            4887         BEQ     _126
                       4888 ; rs232cmd.c 1422                       {
                       4889 ; rs232cmd.c 1423                               if ( ParCnt)
00071A 964842rr        4891         MOV.B   ES,#SEG( _ParCnt )
00071E 9908rrrr        4892         MOV.W   R0,#SOF( _ParCnt )
000722 8200            4893         MOV.B   R0L,[R0]
000724 F306            4894         BEQ     _123
                       4895 ; rs232cmd.c 1424                                       SCPIError = ParNotAllowed;
000726 964842rr        4897         MOV.B   ES,#SEG( _SCPIError )
00072A 9908rrrr        4898         MOV.W   R0,#SOF( _SCPIError )
00072E BA06            4899         MOV.W   [R0],#06H
000730 FE25            4900         BR      _130
000730 FE25            4900         BR      _130
000732                 4901 _123:
                       4902 ; rs232cmd.c 1425                               else
                       4903 ; rs232cmd.c 1426                               {
                       4904 ; rs232cmd.c 1427                                       str = SystemVersionTxt;
000732 9958rrrr        4906         MOV.W   R5,#SEG( _SystemVersionTxt )
000736 9948rrrr        4907         MOV.W   R4,#SOF( _SystemVersionTxt )
                       4909 ; rs232cmd.c 1428       
                       4910 ; rs232cmd.c 1429                                       while ( *str)
00073A 964843rr        4912         MOV.B   CS,#SEG( _SystemVersionTxt )
00073E 9908rrrr        4913         MOV.W   R0,#SOF( _SystemVersionTxt )
000742 8020            4914         MOVC.B  R1L,[R0+]
000744 F311            4915         BEQ     _125
000744 F311            4915         BEQ     _125
000746                 4916 _124:
                       4917 ; rs232cmd.c 1430                                               rs232putchar( *str++);
000746 8915            4919         MOV.W   R1,R5
000748 8904            4920         MOV.W   R0,R4
00074A 862C43          4921         MOV.B   CS,R1L
00074D 8020            4922         MOVC.B  R1L,[R0+]
00074F 8102            4923         MOV.B   R0L,R1L
                       4924         CALL    _rs232putchar
000751 C4rrrrrr       +4924 ;       FCALL   _rs232putchar
000755 99400001        4925         ADD.W   R4,#01H
000759 99510000        4926         ADDC.W  R5,#00H
00075D 8915            4930         MOV.W   R1,R5
00075F 8904            4931         MOV.W   R0,R4
000761 862C43          4932         MOV.B   CS,R1L
000764 8020            4933         MOVC.B  R1L,[R0+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  81

ADDR   CODE            LINE SOURCELINE
000766 F2EF            4934         BNE     _124
000768                 4936 _125:
                       4937 ; rs232cmd.c 1431       
                       4938 ; rs232cmd.c 1432                                       rs232putchar( '\n');
000768 91080A          4940         MOV.B   R0L,#0AH
                       4941         CALL    _rs232putchar
00076B C4rrrrrr       +4941 ;       FCALL   _rs232putchar
                       4942 ; rs232cmd.c 1433                               }
                       4943 ; rs232cmd.c 1434                       }
00076F FE06            4945         BR      _130
00076F FE0600          4945         BR      _130
000772                 4946 _126:
                       4947 ; rs232cmd.c 1435                       else
                       4948 ; rs232cmd.c 1436                               SCPIError = SyntaxErr;
000772 964842rr        4950         MOV.B   ES,#SEG( _SCPIError )
000776 9908rrrr        4951         MOV.W   R0,#SOF( _SCPIError )
00077A BA03            4952         MOV.W   [R0],#03H
                       4953 ; rs232cmd.c 1437               }
00077C                 4955 _130:
                       4956 ; rs232cmd.c 1438       }
00077C 2F30            4958         POP.W   R4, R5
00077E D680            4960         RET
                       4963 ; rs232cmd.c 1439       
                       4964 ; rs232cmd.c 1440       /************************************************************************
                            **/
                       4965 ; rs232cmd.c 1441       /* SystemPresetName                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       4966 ; rs232cmd.c 1442       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4967 ; rs232cmd.c 1443       /* Author:              Kim Engedahl, DEV, 970206                        
                                                                                                                             
                                    */
                       4968 ; rs232cmd.c 1444       /* Revised:             000503                                           
                                                                                                                             
                                                                                    */
                       4969 ; rs232cmd.c 1445       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       4970 ; rs232cmd.c 1446       /* Function:    Name a specific preset number.                           
                                                                                                                    */
                       4971 ; rs232cmd.c 1447       /* Remarks:             the scanf function can not used MaxPresetNameLeng
                            th, i.e.                */
                       4972 ; rs232cmd.c 1448       /*                                              this define should be ins
                            erted as a value. The value is                  */
                       4973 ; rs232cmd.c 1449       /*                                              defined in INSTRU.H      
                                                                                                                             
                                                                                            */
                       4974 ; rs232cmd.c 1450       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4975 ; rs232cmd.c 1451       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4976 ; rs232cmd.c 1452       /************************************************************************
                            **/
                       4977 ; rs232cmd.c 1453       void SystemPresetName( void)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  82

ADDR   CODE            LINE SOURCELINE
                       4978 ; rs232cmd.c 1454       {
                       4979         ALIGN   1
                       4995         PUBLIC  _SystemPresetName
000780                 4996 _SystemPresetName:
000780 0F30            5000         PUSH.W  R4, R5
000782 99720078        5002         SUB.W   R7,#078H
                       5007 ; rs232cmd.c 1455               int Reg;
                       5008 ; rs232cmd.c 1456               char Name[MaxPresetNameLength];
                       5009 ; rs232cmd.c 1457               PresetObject Preset;
                       5010 ; rs232cmd.c 1458       
                       5011 ; rs232cmd.c 1459               if ( CmdExecute && !SCPIError)
000786 964842rr        5013         MOV.B   ES,#SEG( _CmdExecute )
00078A 9908rrrr        5014         MOV.W   R0,#SOF( _CmdExecute )
00078E 8200            5015         MOV.B   R0L,[R0]
                       5016         BEQ     _149
000790 F202           +5016 ;       BNE     _LG_154
000792 D500C8         +5016 ;       JMP.L   _149
000792 D500C800       +5016 ;       JMP.L   _149
000796                +5016 _LG_154:
000796 964842rr        5017         MOV.B   ES,#SEG( _SCPIError )
00079A 9908rrrr        5018         MOV.W   R0,#SOF( _SCPIError )
00079E 8A00            5019         MOV.W   R0,[R0]
                       5020         BNE     _149
0007A0 F302           +5020 ;       BEQ     _LG_156
0007A2 D500C0         +5020 ;       JMP.L   _149
0007A2 D500C000       +5020 ;       JMP.L   _149
0007A6                +5020 _LG_156:
                       5021 ; rs232cmd.c 1460               {
                       5022 ; rs232cmd.c 1461                       if ( CmdRequest)
0007A6 964842rr        5024         MOV.B   ES,#SEG( _CmdRequest )
0007AA 9908rrrr        5025         MOV.W   R0,#SOF( _CmdRequest )
0007AE 8200            5026         MOV.B   R0L,[R0]
0007B0 F34B            5027         BEQ     _136
                       5028 ; rs232cmd.c 1462                       {
                       5029 ; rs232cmd.c 1463                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0007B2 964842rr        5031         MOV.B   ES,#SEG( _ParCnt )
0007B6 9908rrrr        5032         MOV.W   R0,#SOF( _ParCnt )
0007BA 8200            5033         MOV.B   R0L,[R0]
0007BC 910401          5034         CMP.B   R0L,#01H
0007BF F215            5035         BNE     _132
0007C1 9918rrrr        5036         MOV.W   R1,#SEG( _Cmd )
0007C5 9908rrrr        5037         MOV.W   R0,#SOF( _Cmd )
0007C9 9168rr          5038         MOV.B   R3L,#SEG( __lc_bs )
0007CC 7177            5039         XOR.B   R3H,R3H
0007CE 8927            5040         MOV.W   R2,R7
0007D0 0F0C            5041         PUSH.W  R2, R3
0007D2 9938rrrr        5043         MOV.W   R3,#SEG( _10 )
0007D6 9928rrrr        5044         MOV.W   R2,#SOF( _10 )
0007DA 0F0C            5045         PUSH.W  R2, R3
                       5047         CALL    _sscanf
0007DC C4rrrrrr       +5047 ;       FCALL   _sscanf
0007E0 99700008        5048         ADD.W   R7,#08H
0007E4 99040001        5050         CMP.W   R0,#01H
0007E8 F307            5051         BEQ     _133
0007E8 F307            5051         BEQ     _133
0007EA                 5052 _132:
                       5053 ; rs232cmd.c 1464                                       SCPIError = SyntaxErr;
0007EA 964842rr        5055         MOV.B   ES,#SEG( _SCPIError )
0007EE 9908rrrr        5056         MOV.W   R0,#SOF( _SCPIError )
0007F2 BA03            5057         MOV.W   [R0],#03H
                       5058         BR      _149
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  83

ADDR   CODE            LINE SOURCELINE
0007F4 D50097         +5058         JMP.L   _149
0007F4 D5009700       +5058         JMP.L   _149
0007F8                 5059 _133:
                       5060 ; rs232cmd.c 1465                               else
                       5061 ; rs232cmd.c 1466                               {
                       5062 ; rs232cmd.c 1467                                       if (( Reg == 0) || ( Reg > NoOfPresets))
0007F8 8A07            5064         MOV.W   R0,[R7]
0007FA F303            5065         BEQ     _134
0007FC 9A740004        5066         CMP.W   [R7],#04H
000800 FD08            5067         BLE     _135
000800 FD08            5067         BLE     _135
000802                 5068 _134:
                       5069 ; rs232cmd.c 1468                                               SCPIError = DataOutOfRange;
000802 964842rr        5071         MOV.B   ES,#SEG( _SCPIError )
000806 9908rrrr        5072         MOV.W   R0,#SOF( _SCPIError )
00080A 9A080021        5073         MOV.W   [R0],#021H
                       5074         BR      _149
00080E D5008A         +5074         JMP.L   _149
00080E D5008A00       +5074         JMP.L   _149
000812                 5075 _135:
                       5076 ; rs232cmd.c 1469                                       else
                       5077 ; rs232cmd.c 1470                                       {
                       5078 ; rs232cmd.c 1471                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
000812 91A8rr          5080         MOV.B   R5L,#SEG( __lc_bs )
000815 71BB            5081         XOR.B   R5H,R5H
000817 404714          5082         LEA     R4,R7+20
00081A 8A07            5083         MOV.W   R0,[R7]
00081C D901            5084         ASL.W   R0,#01H
00081E 8920            5085         MOV.W   R2,R0
000820 B930            5086         MOVS.W  R3,#00H
000822 964842rr        5087         MOV.B   ES,#SEG( _PresetPtr+-2 )
000826 8D22rrrr        5088         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
00082A 99380064        5089         MOV.W   R3,#064H
00082E 8915            5090         MOV.W   R1,R5
000830 8904            5091         MOV.W   R0,R4
                       5092         CALL    _NV_Recall
000832 C4rrrrrr       +5092 ;       FCALL   _NV_Recall
                       5093 ; rs232cmd.c 1472       
                       5094 ; rs232cmd.c 1473                                               rs232puts( Preset.Name);
000836 8915            5096         MOV.W   R1,R5
000838 8904            5097         MOV.W   R0,R4
                       5098         CALL    _rs232puts
00083A C4rrrrrr       +5098 ;       FCALL   _rs232puts
                       5099 ; rs232cmd.c 1474                                               rs232putchar( '\n');
00083E 91080A          5101         MOV.B   R0L,#0AH
                       5102         CALL    _rs232putchar
000841 C4rrrrrr       +5102 ;       FCALL   _rs232putchar
                       5103 ; rs232cmd.c 1475                                       }
                       5104 ; rs232cmd.c 1476                               }
                       5105 ; rs232cmd.c 1477                       }
000845 FE6F            5107         BR      _149
000845 FE6F00          5107         BR      _149
000848                 5108 _136:
                       5109 ; rs232cmd.c 1478                       else
                       5110 ; rs232cmd.c 1479                       {
                       5111 ; rs232cmd.c 1480                                                                                
                                                                                    // The second parameter, the string, in s
                            canf
                       5112 ; rs232cmd.c 1481                                                                                
                                                                                    // should be limited to the definition of
                            
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  84

ADDR   CODE            LINE SOURCELINE
                       5113 ; rs232cmd.c 1482                                                                                
                                                                                    // MaxPresetNameLength
                       5114 ; rs232cmd.c 1483                               if (( ParCnt != 2) || (( sscanf( Cmd, "%d,%17s", 
                            &Reg, Name)) != 2))
000848 964842rr        5116         MOV.B   ES,#SEG( _ParCnt )
00084C 9908rrrr        5117         MOV.W   R0,#SOF( _ParCnt )
000850 8200            5118         MOV.B   R0L,[R0]
000852 910402          5119         CMP.B   R0L,#02H
000855 F220            5120         BNE     _137
000857 9918rrrr        5121         MOV.W   R1,#SEG( _Cmd )
00085B 9908rrrr        5122         MOV.W   R0,#SOF( _Cmd )
00085F 9168rr          5123         MOV.B   R3L,#SEG( __lc_bs )
000862 7177            5124         XOR.B   R3H,R3H
000864 8927            5125         MOV.W   R2,R7
000866 91A8rr          5126         MOV.B   R5L,#SEG( __lc_bs )
000869 71BB            5127         XOR.B   R5H,R5H
00086B 404702          5128         LEA     R4,R7+2
00086E 8935            5129         MOV.W   R3,R5
000870 8924            5130         MOV.W   R2,R4
000872 0F0C            5131         PUSH.W  R2, R3
000874 9168rr          5133         MOV.B   R3L,#SEG( __lc_bs )
000877 7177            5134         XOR.B   R3H,R3H
000879 402704          5135         LEA     R2,R7+4
00087C 0F0C            5136         PUSH.W  R2, R3
00087E 9938rrrr        5138         MOV.W   R3,#SEG( _131 )
000882 9928rrrr        5139         MOV.W   R2,#SOF( _131 )
000886 0F0C            5140         PUSH.W  R2, R3
                       5142         CALL    _sscanf
000888 C4rrrrrr       +5142 ;       FCALL   _sscanf
00088C 9970000C        5143         ADD.W   R7,#0CH
000890 99040002        5145         CMP.W   R0,#02H
000894 F306            5146         BEQ     _138
000894 F306            5146         BEQ     _138
000896                 5147 _137:
                       5148 ; rs232cmd.c 1484                                       SCPIError = SyntaxErr;
000896 964842rr        5150         MOV.B   ES,#SEG( _SCPIError )
00089A 9908rrrr        5151         MOV.W   R0,#SOF( _SCPIError )
00089E BA03            5152         MOV.W   [R0],#03H
0008A0 FE41            5153         BR      _149
0008A0 FE41            5153         BR      _149
0008A2                 5154 _138:
0008A2 8915            5155         MOV.W   R1,R5
0008A4 8904            5156         MOV.W   R0,R4
                       5157 ; rs232cmd.c 1485                               else
                       5158 ; rs232cmd.c 1486                               {
                       5159 ; rs232cmd.c 1487                                       if ( strlen( Name) == MaxPresetNameLength
                            )
                       5161         CALL    _strlen
0008A6 C4rrrrrr       +5161 ;       FCALL   _strlen
0008AA 99040011        5162         CMP.W   R0,#011H
0008AE F206            5163         BNE     _139
                       5164 ; rs232cmd.c 1488                                               SCPIError = SyntaxErr;
0008B0 964842rr        5166         MOV.B   ES,#SEG( _SCPIError )
0008B4 9908rrrr        5167         MOV.W   R0,#SOF( _SCPIError )
0008B8 BA03            5168         MOV.W   [R0],#03H
0008BA FE34            5169         BR      _149
0008BA FE34            5169         BR      _149
0008BC                 5170 _139:
                       5171 ; rs232cmd.c 1489                                       else
                       5172 ; rs232cmd.c 1490                                       {
                       5173 ; rs232cmd.c 1491                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  85

ADDR   CODE            LINE SOURCELINE
0008BC 8A07            5175         MOV.W   R0,[R7]
0008BE F303            5176         BEQ     _140
0008C0 9A740004        5177         CMP.W   [R7],#04H
0008C4 FD07            5178         BLE     _141
0008C4 FD07            5178         BLE     _141
0008C6                 5179 _140:
                       5180 ; rs232cmd.c 1492                                                       SCPIError = DataOutOfRang
                            e;
0008C6 964842rr        5182         MOV.B   ES,#SEG( _SCPIError )
0008CA 9908rrrr        5183         MOV.W   R0,#SOF( _SCPIError )
0008CE 9A080021        5184         MOV.W   [R0],#021H
0008D2 FE28            5185         BR      _149
0008D2 FE28            5185         BR      _149
0008D4                 5186 _141:
                       5187 ; rs232cmd.c 1493                                               else
                       5188 ; rs232cmd.c 1494                                               {
                       5189 ; rs232cmd.c 1495                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
0008D4 91A8rr          5191         MOV.B   R5L,#SEG( __lc_bs )
0008D7 71BB            5192         XOR.B   R5H,R5H
0008D9 404714          5193         LEA     R4,R7+20
0008DC 8A07            5194         MOV.W   R0,[R7]
0008DE D901            5195         ASL.W   R0,#01H
0008E0 8920            5196         MOV.W   R2,R0
0008E2 B930            5197         MOVS.W  R3,#00H
0008E4 964842rr        5198         MOV.B   ES,#SEG( _PresetPtr+-2 )
0008E8 8D22rrrr        5199         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
0008EC 99380064        5200         MOV.W   R3,#064H
0008F0 8915            5201         MOV.W   R1,R5
0008F2 8904            5202         MOV.W   R0,R4
                       5203         CALL    _NV_Recall
0008F4 C4rrrrrr       +5203 ;       FCALL   _NV_Recall
0008F8 8915            5204         MOV.W   R1,R5
0008FA 8904            5205         MOV.W   R0,R4
                       5206 ; rs232cmd.c 1496                                                       strcpy( Preset.Name, Name
                            );
0008FC 9168rr          5208         MOV.B   R3L,#SEG( __lc_bs )
0008FF 7177            5209         XOR.B   R3H,R3H
000901 402702          5210         LEA     R2,R7+2
                       5211         CALL    _strcpy
000904 C4rrrrrr       +5211 ;       FCALL   _strcpy
                       5212 ; rs232cmd.c 1497                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000908 8A07            5214         MOV.W   R0,[R7]
00090A D901            5215         ASL.W   R0,#01H
00090C 8920            5216         MOV.W   R2,R0
00090E B930            5217         MOVS.W  R3,#00H
000910 964842rr        5218         MOV.B   ES,#SEG( _PresetPtr+-2 )
000914 8D22rrrr        5219         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000918 8915            5220         MOV.W   R1,R5
00091A 8904            5221         MOV.W   R0,R4
00091C 99380064        5222         MOV.W   R3,#064H
                       5223         CALL    _NV_Store
000920 C4rrrrrr       +5223 ;       FCALL   _NV_Store
                       5224 ; rs232cmd.c 1498                                               }
                       5225 ; rs232cmd.c 1499                                       }
                       5226 ; rs232cmd.c 1500                               }
                       5227 ; rs232cmd.c 1501                       }
                       5228 ; rs232cmd.c 1502               }
000924                 5230 _149:
                       5231 ; rs232cmd.c 1503       }
000924 99700078        5233         ADD.W   R7,#078H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  86

ADDR   CODE            LINE SOURCELINE
000928 2F30            5235         POP.W   R4, R5
00092A D680            5237         RET
                       5239 ; rs232cmd.c 1504       
                       5240 ; rs232cmd.c 1505       /************************************************************************
                            **/
                       5241 ; rs232cmd.c 1506       /* SystemPresetAuthor                                                    
                                                                                                                             
                                             RS232CMD.C */
                       5242 ; rs232cmd.c 1507       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5243 ; rs232cmd.c 1508       /* Author:              Kim Engedahl, DEV, 000502                        
                                                                                                                             
                                    */
                       5244 ; rs232cmd.c 1509       /* Revised:             000503                                           
                                                                                                                             
                                                                                    */
                       5245 ; rs232cmd.c 1510       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5246 ; rs232cmd.c 1511       /* Function:    Name the author of a specific preset number.             
                                                                            */
                       5247 ; rs232cmd.c 1512       /* Remarks:             the scanf function can not used MaxPresetAuthorLe
                            ngth, i.e.      */
                       5248 ; rs232cmd.c 1513       /*                                              this define should be ins
                            erted as a value. The value is                  */
                       5249 ; rs232cmd.c 1514       /*                                              defined in INSTRU.H      
                                                                                                                             
                                                                                            */
                       5250 ; rs232cmd.c 1515       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5251 ; rs232cmd.c 1516       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5252 ; rs232cmd.c 1517       /************************************************************************
                            **/
                       5253 ; rs232cmd.c 1518       void SystemPresetAuthor( void)
                       5254 ; rs232cmd.c 1519       {
                       5255         ALIGN   1
                       5257         PUBLIC  _SystemPresetAuthor
00092C                 5258 _SystemPresetAuthor:
00092C 0F30            5262         PUSH.W  R4, R5
00092E 9972006E        5264         SUB.W   R7,#06EH
                       5269 ; rs232cmd.c 1520               int Reg;
                       5270 ; rs232cmd.c 1521               char Author[MaxPresetAuthorLength];
                       5271 ; rs232cmd.c 1522               PresetObject Preset;
                       5272 ; rs232cmd.c 1523       
                       5273 ; rs232cmd.c 1524               if ( CmdExecute && !SCPIError)
000932 964842rr        5275         MOV.B   ES,#SEG( _CmdExecute )
000936 9908rrrr        5276         MOV.W   R0,#SOF( _CmdExecute )
00093A 8200            5277         MOV.B   R0L,[R0]
                       5278         BEQ     _175
00093C F202           +5278 ;       BNE     _LG_178
00093E D500C9         +5278 ;       JMP.L   _175
00093E D500C900       +5278 ;       JMP.L   _175
000942                +5278 _LG_178:
000942 964842rr        5279         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  87

ADDR   CODE            LINE SOURCELINE
000946 9908rrrr        5280         MOV.W   R0,#SOF( _SCPIError )
00094A 8A00            5281         MOV.W   R0,[R0]
                       5282         BNE     _175
00094C F302           +5282 ;       BEQ     _LG_180
00094E D500C1         +5282 ;       JMP.L   _175
00094E D500C100       +5282 ;       JMP.L   _175
000952                +5282 _LG_180:
                       5283 ; rs232cmd.c 1525               {
                       5284 ; rs232cmd.c 1526                       if ( CmdRequest)
000952 964842rr        5286         MOV.B   ES,#SEG( _CmdRequest )
000956 9908rrrr        5287         MOV.W   R0,#SOF( _CmdRequest )
00095A 8200            5288         MOV.B   R0L,[R0]
00095C F34A            5289         BEQ     _162
                       5290 ; rs232cmd.c 1527                       {
                       5291 ; rs232cmd.c 1528                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
00095E 964842rr        5293         MOV.B   ES,#SEG( _ParCnt )
000962 9908rrrr        5294         MOV.W   R0,#SOF( _ParCnt )
000966 8200            5295         MOV.B   R0L,[R0]
000968 910401          5296         CMP.B   R0L,#01H
00096B F215            5297         BNE     _158
00096D 9918rrrr        5298         MOV.W   R1,#SEG( _Cmd )
000971 9908rrrr        5299         MOV.W   R0,#SOF( _Cmd )
000975 9168rr          5300         MOV.B   R3L,#SEG( __lc_bs )
000978 7177            5301         XOR.B   R3H,R3H
00097A 8927            5302         MOV.W   R2,R7
00097C 0F0C            5303         PUSH.W  R2, R3
00097E 9938rrrr        5305         MOV.W   R3,#SEG( _10 )
000982 9928rrrr        5306         MOV.W   R2,#SOF( _10 )
000986 0F0C            5307         PUSH.W  R2, R3
                       5309         CALL    _sscanf
000988 C4rrrrrr       +5309 ;       FCALL   _sscanf
00098C 99700008        5310         ADD.W   R7,#08H
000990 99040001        5312         CMP.W   R0,#01H
000994 F307            5313         BEQ     _159
000994 F307            5313         BEQ     _159
000996                 5314 _158:
                       5315 ; rs232cmd.c 1529                                       SCPIError = SyntaxErr;
000996 964842rr        5317         MOV.B   ES,#SEG( _SCPIError )
00099A 9908rrrr        5318         MOV.W   R0,#SOF( _SCPIError )
00099E BA03            5319         MOV.W   [R0],#03H
                       5320         BR      _175
0009A0 D50098         +5320         JMP.L   _175
0009A0 D5009800       +5320         JMP.L   _175
0009A4                 5321 _159:
                       5322 ; rs232cmd.c 1530                               else
                       5323 ; rs232cmd.c 1531                               {
                       5324 ; rs232cmd.c 1532                                       if (( Reg == 0) || ( Reg > NoOfPresets))
0009A4 8A07            5326         MOV.W   R0,[R7]
0009A6 F303            5327         BEQ     _160
0009A8 9A740004        5328         CMP.W   [R7],#04H
0009AC FD08            5329         BLE     _161
0009AC FD08            5329         BLE     _161
0009AE                 5330 _160:
                       5331 ; rs232cmd.c 1533                                               SCPIError = DataOutOfRange;
0009AE 964842rr        5333         MOV.B   ES,#SEG( _SCPIError )
0009B2 9908rrrr        5334         MOV.W   R0,#SOF( _SCPIError )
0009B6 9A080021        5335         MOV.W   [R0],#021H
                       5336         BR      _175
0009BA D5008B         +5336         JMP.L   _175
0009BA D5008B00       +5336         JMP.L   _175
0009BE                 5337 _161:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  88

ADDR   CODE            LINE SOURCELINE
                       5338 ; rs232cmd.c 1534                                       else
                       5339 ; rs232cmd.c 1535                                       {
                       5340 ; rs232cmd.c 1536                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
0009BE 9128rr          5342         MOV.B   R1L,#SEG( __lc_bs )
0009C1 7133            5343         XOR.B   R1H,R1H
0009C3 40070A          5344         LEA     R0,R7+10
0009C6 8A27            5345         MOV.W   R2,[R7]
0009C8 D921            5346         ASL.W   R2,#01H
0009CA B930            5347         MOVS.W  R3,#00H
0009CC 964842rr        5348         MOV.B   ES,#SEG( _PresetPtr+-2 )
0009D0 8D22rrrr        5349         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
0009D4 99380064        5350         MOV.W   R3,#064H
                       5351         CALL    _NV_Recall
0009D8 C4rrrrrr       +5351 ;       FCALL   _NV_Recall
                       5352 ; rs232cmd.c 1537       
                       5353 ; rs232cmd.c 1538                                               rs232puts( Preset.Author);
0009DC 9128rr          5355         MOV.B   R1L,#SEG( __lc_bs )
0009DF 7133            5356         XOR.B   R1H,R1H
0009E1 40071B          5357         LEA     R0,R7+27
                       5358         CALL    _rs232puts
0009E4 C4rrrrrr       +5358 ;       FCALL   _rs232puts
                       5359 ; rs232cmd.c 1539                                               rs232putchar( '\n');
0009E8 91080A          5361         MOV.B   R0L,#0AH
                       5362         CALL    _rs232putchar
0009EB C4rrrrrr       +5362 ;       FCALL   _rs232putchar
                       5363 ; rs232cmd.c 1540                                       }
                       5364 ; rs232cmd.c 1541                               }
                       5365 ; rs232cmd.c 1542                       }
0009EF FE71            5367         BR      _175
0009EF FE7100          5367         BR      _175
0009F2                 5368 _162:
                       5369 ; rs232cmd.c 1543                       else
                       5370 ; rs232cmd.c 1544                       {
                       5371 ; rs232cmd.c 1545                                                                                
                                                                                    // The second parameter, the string, in s
                            canf
                       5372 ; rs232cmd.c 1546                                                                                
                                                                                    // should be limited to the definition of
                            
                       5373 ; rs232cmd.c 1547                                                                                
                                                                                    // MaxPresetAuthorLength
                       5374 ; rs232cmd.c 1548                               if (( ParCnt != 2) || (( sscanf( Cmd, "%d,%7s", &
                            Reg, Author)) != 2))
0009F2 964842rr        5376         MOV.B   ES,#SEG( _ParCnt )
0009F6 9908rrrr        5377         MOV.W   R0,#SOF( _ParCnt )
0009FA 8200            5378         MOV.B   R0L,[R0]
0009FC 910402          5379         CMP.B   R0L,#02H
0009FF F220            5380         BNE     _163
000A01 9918rrrr        5381         MOV.W   R1,#SEG( _Cmd )
000A05 9908rrrr        5382         MOV.W   R0,#SOF( _Cmd )
000A09 9168rr          5383         MOV.B   R3L,#SEG( __lc_bs )
000A0C 7177            5384         XOR.B   R3H,R3H
000A0E 8927            5385         MOV.W   R2,R7
000A10 91A8rr          5386         MOV.B   R5L,#SEG( __lc_bs )
000A13 71BB            5387         XOR.B   R5H,R5H
000A15 404702          5388         LEA     R4,R7+2
000A18 8935            5389         MOV.W   R3,R5
000A1A 8924            5390         MOV.W   R2,R4
000A1C 0F0C            5391         PUSH.W  R2, R3
000A1E 9168rr          5393         MOV.B   R3L,#SEG( __lc_bs )
000A21 7177            5394         XOR.B   R3H,R3H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  89

ADDR   CODE            LINE SOURCELINE
000A23 402704          5395         LEA     R2,R7+4
000A26 0F0C            5396         PUSH.W  R2, R3
000A28 9938rrrr        5398         MOV.W   R3,#SEG( _157 )
000A2C 9928rrrr        5399         MOV.W   R2,#SOF( _157 )
000A30 0F0C            5400         PUSH.W  R2, R3
                       5402         CALL    _sscanf
000A32 C4rrrrrr       +5402 ;       FCALL   _sscanf
000A36 9970000C        5403         ADD.W   R7,#0CH
000A3A 99040002        5405         CMP.W   R0,#02H
000A3E F306            5406         BEQ     _164
000A3E F306            5406         BEQ     _164
000A40                 5407 _163:
                       5408 ; rs232cmd.c 1549                                       SCPIError = SyntaxErr;
000A40 964842rr        5410         MOV.B   ES,#SEG( _SCPIError )
000A44 9908rrrr        5411         MOV.W   R0,#SOF( _SCPIError )
000A48 BA03            5412         MOV.W   [R0],#03H
000A4A FE43            5413         BR      _175
000A4A FE43            5413         BR      _175
000A4C                 5414 _164:
000A4C 8915            5415         MOV.W   R1,R5
000A4E 8904            5416         MOV.W   R0,R4
                       5417 ; rs232cmd.c 1550                               else
                       5418 ; rs232cmd.c 1551                               {
                       5419 ; rs232cmd.c 1552                                       if ( strlen( Author) == MaxPresetAuthorLe
                            ngth)
                       5421         CALL    _strlen
000A50 C4rrrrrr       +5421 ;       FCALL   _strlen
000A54 99040007        5422         CMP.W   R0,#07H
000A58 F206            5423         BNE     _165
                       5424 ; rs232cmd.c 1553                                               SCPIError = SyntaxErr;
000A5A 964842rr        5426         MOV.B   ES,#SEG( _SCPIError )
000A5E 9908rrrr        5427         MOV.W   R0,#SOF( _SCPIError )
000A62 BA03            5428         MOV.W   [R0],#03H
000A64 FE36            5429         BR      _175
000A64 FE36            5429         BR      _175
000A66                 5430 _165:
                       5431 ; rs232cmd.c 1554                                       else
                       5432 ; rs232cmd.c 1555                                       {
                       5433 ; rs232cmd.c 1556                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
000A66 8A07            5435         MOV.W   R0,[R7]
000A68 F303            5436         BEQ     _166
000A6A 9A740004        5437         CMP.W   [R7],#04H
000A6E FD07            5438         BLE     _167
000A6E FD07            5438         BLE     _167
000A70                 5439 _166:
                       5440 ; rs232cmd.c 1557                                                       SCPIError = DataOutOfRang
                            e;
000A70 964842rr        5442         MOV.B   ES,#SEG( _SCPIError )
000A74 9908rrrr        5443         MOV.W   R0,#SOF( _SCPIError )
000A78 9A080021        5444         MOV.W   [R0],#021H
000A7C FE2A            5445         BR      _175
000A7C FE2A            5445         BR      _175
000A7E                 5446 _167:
                       5447 ; rs232cmd.c 1558                                               else
                       5448 ; rs232cmd.c 1559                                               {
                       5449 ; rs232cmd.c 1560                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
000A7E 91A8rr          5451         MOV.B   R5L,#SEG( __lc_bs )
000A81 71BB            5452         XOR.B   R5H,R5H
000A83 40470A          5453         LEA     R4,R7+10
000A86 8A07            5454         MOV.W   R0,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  90

ADDR   CODE            LINE SOURCELINE
000A88 D901            5455         ASL.W   R0,#01H
000A8A 8920            5456         MOV.W   R2,R0
000A8C B930            5457         MOVS.W  R3,#00H
000A8E 964842rr        5458         MOV.B   ES,#SEG( _PresetPtr+-2 )
000A92 8D22rrrr        5459         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000A96 99380064        5460         MOV.W   R3,#064H
000A9A 8915            5461         MOV.W   R1,R5
000A9C 8904            5462         MOV.W   R0,R4
                       5463         CALL    _NV_Recall
000A9E C4rrrrrr       +5463 ;       FCALL   _NV_Recall
                       5464 ; rs232cmd.c 1561                                                       strcpy( Preset.Author, Au
                            thor);
000AA2 9128rr          5466         MOV.B   R1L,#SEG( __lc_bs )
000AA5 7133            5467         XOR.B   R1H,R1H
000AA7 40071B          5468         LEA     R0,R7+27
000AAA 9168rr          5469         MOV.B   R3L,#SEG( __lc_bs )
000AAD 7177            5470         XOR.B   R3H,R3H
000AAF 402702          5471         LEA     R2,R7+2
                       5472         CALL    _strcpy
000AB2 C4rrrrrr       +5472 ;       FCALL   _strcpy
                       5473 ; rs232cmd.c 1562                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000AB6 8A07            5475         MOV.W   R0,[R7]
000AB8 D901            5476         ASL.W   R0,#01H
000ABA 8920            5477         MOV.W   R2,R0
000ABC B930            5478         MOVS.W  R3,#00H
000ABE 964842rr        5479         MOV.B   ES,#SEG( _PresetPtr+-2 )
000AC2 8D22rrrr        5480         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000AC6 8915            5481         MOV.W   R1,R5
000AC8 8904            5482         MOV.W   R0,R4
000ACA 99380064        5483         MOV.W   R3,#064H
                       5484         CALL    _NV_Store
000ACE C4rrrrrr       +5484 ;       FCALL   _NV_Store
                       5485 ; rs232cmd.c 1563                                               }
                       5486 ; rs232cmd.c 1564                                       }
                       5487 ; rs232cmd.c 1565                               }
                       5488 ; rs232cmd.c 1566                       }
                       5489 ; rs232cmd.c 1567               }
000AD2                 5491 _175:
                       5492 ; rs232cmd.c 1568       }
000AD2 9970006E        5494         ADD.W   R7,#06EH
000AD6 2F30            5496         POP.W   R4, R5
000AD8 D680            5498         RET
                       5500 ; rs232cmd.c 1569       
                       5501 ; rs232cmd.c 1570       /************************************************************************
                            **/
                       5502 ; rs232cmd.c 1571       /* SystemPresetDate                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       5503 ; rs232cmd.c 1572       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5504 ; rs232cmd.c 1573       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       5505 ; rs232cmd.c 1574       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                       5506 ; rs232cmd.c 1575       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  91

ADDR   CODE            LINE SOURCELINE
                       5507 ; rs232cmd.c 1576       /* Function:    -                                                        
                                                                                                                             
                                                                                                                    */
                       5508 ; rs232cmd.c 1577       /* Remarks:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5509 ; rs232cmd.c 1578       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5510 ; rs232cmd.c 1579       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5511 ; rs232cmd.c 1580       /************************************************************************
                            **/
                       5512 ; rs232cmd.c 1581       void SystemPresetDate( void)
                       5513 ; rs232cmd.c 1582       {
                       5514         ALIGN   1
                       5516         PUBLIC  _SystemPresetDate
000ADA                 5517 _SystemPresetDate:
000ADA 0F30            5521         PUSH.W  R4, R5
000ADC 99720080        5523         SUB.W   R7,#080H
                       5532 ; rs232cmd.c 1583               int Reg;
                       5533 ; rs232cmd.c 1584               PresetObject Preset;
                       5534 ; rs232cmd.c 1585               UI year, month, day;
                       5535 ; rs232cmd.c 1586               char buffer[20];
                       5536 ; rs232cmd.c 1587       
                       5537 ; rs232cmd.c 1588               if ( CmdExecute && !SCPIError)
000AE0 964842rr        5539         MOV.B   ES,#SEG( _CmdExecute )
000AE4 9908rrrr        5540         MOV.W   R0,#SOF( _CmdExecute )
000AE8 8200            5541         MOV.B   R0L,[R0]
                       5542         BEQ     _202
000AEA F202           +5542 ;       BNE     _LG_202
000AEC D50108         +5542 ;       JMP.L   _202
000AEC D5010800       +5542 ;       JMP.L   _202
000AF0                +5542 _LG_202:
000AF0 964842rr        5543         MOV.B   ES,#SEG( _SCPIError )
000AF4 9908rrrr        5544         MOV.W   R0,#SOF( _SCPIError )
000AF8 8A00            5545         MOV.W   R0,[R0]
                       5546         BNE     _202
000AFA F302           +5546 ;       BEQ     _LG_204
000AFC D50100         +5546 ;       JMP.L   _202
000AFC D5010000       +5546 ;       JMP.L   _202
000B00                +5546 _LG_204:
                       5547 ; rs232cmd.c 1589               {
                       5548 ; rs232cmd.c 1590                       if ( CmdRequest)
000B00 964842rr        5550         MOV.B   ES,#SEG( _CmdRequest )
000B04 9908rrrr        5551         MOV.W   R0,#SOF( _CmdRequest )
000B08 8200            5552         MOV.B   R0L,[R0]
                       5553         BEQ     _189
000B0A F202           +5553 ;       BNE     _LG_206
000B0C D50081         +5553 ;       JMP.L   _189
000B0C D5008100       +5553 ;       JMP.L   _189
000B10                +5553 _LG_206:
                       5554 ; rs232cmd.c 1591                       {
                       5555 ; rs232cmd.c 1592                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000B10 964842rr        5557         MOV.B   ES,#SEG( _ParCnt )
000B14 9908rrrr        5558         MOV.W   R0,#SOF( _ParCnt )
000B18 8200            5559         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  92

ADDR   CODE            LINE SOURCELINE
000B1A 910401          5560         CMP.B   R0L,#01H
000B1D F215            5561         BNE     _185
000B1F 9918rrrr        5562         MOV.W   R1,#SEG( _Cmd )
000B23 9908rrrr        5563         MOV.W   R0,#SOF( _Cmd )
000B27 9168rr          5564         MOV.B   R3L,#SEG( __lc_bs )
000B2A 7177            5565         XOR.B   R3H,R3H
000B2C 8927            5566         MOV.W   R2,R7
000B2E 0F0C            5567         PUSH.W  R2, R3
000B30 9938rrrr        5569         MOV.W   R3,#SEG( _10 )
000B34 9928rrrr        5570         MOV.W   R2,#SOF( _10 )
000B38 0F0C            5571         PUSH.W  R2, R3
                       5573         CALL    _sscanf
000B3A C4rrrrrr       +5573 ;       FCALL   _sscanf
000B3E 99700008        5574         ADD.W   R7,#08H
000B42 99040001        5576         CMP.W   R0,#01H
000B46 F307            5577         BEQ     _186
000B46 F307            5577         BEQ     _186
000B48                 5578 _185:
                       5579 ; rs232cmd.c 1593                                       SCPIError = SyntaxErr;
000B48 964842rr        5581         MOV.B   ES,#SEG( _SCPIError )
000B4C 9908rrrr        5582         MOV.W   R0,#SOF( _SCPIError )
000B50 BA03            5583         MOV.W   [R0],#03H
                       5584         BR      _202
000B52 D500D5         +5584         JMP.L   _202
000B52 D500D500       +5584         JMP.L   _202
000B56                 5585 _186:
                       5586 ; rs232cmd.c 1594                               else
                       5587 ; rs232cmd.c 1595                               {
                       5588 ; rs232cmd.c 1596                                       if (( Reg == 0) || ( Reg > NoOfPresets))
000B56 8A07            5590         MOV.W   R0,[R7]
000B58 F303            5591         BEQ     _187
000B5A 9A740004        5592         CMP.W   [R7],#04H
000B5E FD08            5593         BLE     _188
000B5E FD08            5593         BLE     _188
000B60                 5594 _187:
                       5595 ; rs232cmd.c 1597                                               SCPIError = DataOutOfRange;
000B60 964842rr        5597         MOV.B   ES,#SEG( _SCPIError )
000B64 9908rrrr        5598         MOV.W   R0,#SOF( _SCPIError )
000B68 9A080021        5599         MOV.W   [R0],#021H
                       5600         BR      _202
000B6C D500C8         +5600         JMP.L   _202
000B6C D500C800       +5600         JMP.L   _202
000B70                 5601 _188:
                       5602 ; rs232cmd.c 1598                                       else
                       5603 ; rs232cmd.c 1599                                       {
                       5604 ; rs232cmd.c 1600                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
000B70 9128rr          5606         MOV.B   R1L,#SEG( __lc_bs )
000B73 7133            5607         XOR.B   R1H,R1H
000B75 400702          5608         LEA     R0,R7+2
000B78 8A27            5609         MOV.W   R2,[R7]
000B7A D921            5610         ASL.W   R2,#01H
000B7C B930            5611         MOVS.W  R3,#00H
000B7E 964842rr        5612         MOV.B   ES,#SEG( _PresetPtr+-2 )
000B82 8D22rrrr        5613         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000B86 99380064        5614         MOV.W   R3,#064H
                       5615         CALL    _NV_Recall
000B8A C4rrrrrr       +5615 ;       FCALL   _NV_Recall
                       5616 ; rs232cmd.c 1601       
                       5617 ; rs232cmd.c 1602                                               day = Preset.Date % 100;
000B8E 8C171C          5619         MOV.W   R1,[R7+28]
000B91 8C071A          5620         MOV.W   R0,[R7+26]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  93

ADDR   CODE            LINE SOURCELINE
000B94 B930            5621         MOV.W   R3,#00H
000B96 99280064        5622         MOV.W   R2,#064H
000B9A 8C1F1C          5623         MOV.W   [R7+28],R1
000B9D 8C0F1A          5624         MOV.W   [R7+26],R0
000BA0 C4rrrrrr        5625         FCALL   __UMODL
000BA4 8C0F6A          5626         MOV.W   [R7+106],R0
                       5627 ; rs232cmd.c 1603                                               month = ( Preset.Date / 100) % 10
                            0;
000BA7 8C171C          5629         MOV.W   R1,[R7+28]
000BAA 8C071A          5630         MOV.W   R0,[R7+26]
000BAD B930            5631         MOV.W   R3,#00H
000BAF 99280064        5632         MOV.W   R2,#064H
000BB3 8953            5633         MOV.W   R5,R3
000BB5 8942            5634         MOV.W   R4,R2
000BB7 C4rrrrrr        5635         FCALL   __UDIVL
000BBB 8935            5636         MOV.W   R3,R5
000BBD 8924            5637         MOV.W   R2,R4
000BBF C4rrrrrr        5638         FCALL   __UMODL
000BC3 8C0F68          5639         MOV.W   [R7+104],R0
                       5640 ; rs232cmd.c 1604                                               year = ( Preset.Date / 10000);
000BC6 B930            5642         MOV.W   R3,#00H
000BC8 99282710        5643         MOV.W   R2,#02710H
000BCC 8C171C          5644         MOV.W   R1,[R7+28]
000BCF 8C071A          5645         MOV.W   R0,[R7+26]
000BD2 C4rrrrrr        5646         FCALL   __UDIVL
000BD6 8C0F66          5647         MOV.W   [R7+102],R0
                       5648 ; rs232cmd.c 1605       
                       5649 ; rs232cmd.c 1606                                               sprintf( buffer, "%d,%d,%d\n", ye
                            ar, month, day);
000BD9 91A8rr          5651         MOV.B   R5L,#SEG( __lc_bs )
000BDC 71BB            5652         XOR.B   R5H,R5H
000BDE 40476C          5653         LEA     R4,R7+108
000BE1 8C076A          5654         MOV.W   R0,[R7+106]
000BE4 0F01            5655         PUSH.W  R0
000BE6 8C076A          5657         MOV.W   R0,[R7+106]
000BE9 0F01            5658         PUSH.W  R0
000BEB 8C076A          5660         MOV.W   R0,[R7+106]
000BEE 0F01            5661         PUSH.W  R0
000BF0 9918rrrr        5663         MOV.W   R1,#SEG( _183 )
000BF4 9908rrrr        5664         MOV.W   R0,#SOF( _183 )
000BF8 0F03            5665         PUSH.W  R0, R1
000BFA 8915            5667         MOV.W   R1,R5
000BFC 8904            5668         MOV.W   R0,R4
                       5669         CALL    _sprintf
000BFE C4rrrrrr       +5669 ;       FCALL   _sprintf
000C02 9970000A        5670         ADD.W   R7,#0AH
                       5672 ; rs232cmd.c 1607       
                       5673 ; rs232cmd.c 1608                                               rs232puts( buffer);
000C06 8915            5675         MOV.W   R1,R5
000C08 8904            5676         MOV.W   R0,R4
                       5677         CALL    _rs232puts
000C0A C4rrrrrr       +5677 ;       FCALL   _rs232puts
                       5678 ; rs232cmd.c 1609                                       }
                       5679 ; rs232cmd.c 1610                               }
                       5680 ; rs232cmd.c 1611                       }
000C0E FE77            5682         BR      _202
000C0E FE77            5682         BR      _202
000C10                 5683 _189:
                       5684 ; rs232cmd.c 1612                       else
                       5685 ; rs232cmd.c 1613                       {
                       5686 ; rs232cmd.c 1614                               if (( ParCnt != 3) || (( sscanf( Cmd, "%d,%d,%d",
                             &year, &month, &day)) != 3))
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  94

ADDR   CODE            LINE SOURCELINE
000C10 964842rr        5688         MOV.B   ES,#SEG( _ParCnt )
000C14 9908rrrr        5689         MOV.W   R0,#SOF( _ParCnt )
000C18 8200            5690         MOV.B   R0L,[R0]
000C1A 910403          5691         CMP.B   R0L,#03H
000C1D F220            5692         BNE     _190
000C1F 9168rr          5693         MOV.B   R3L,#SEG( __lc_bs )
000C22 7177            5694         XOR.B   R3H,R3H
000C24 402766          5695         LEA     R2,R7+102
000C27 91A8rr          5696         MOV.B   R5L,#SEG( __lc_bs )
000C2A 71BB            5697         XOR.B   R5H,R5H
000C2C 404768          5698         LEA     R4,R7+104
000C2F 9128rr          5699         MOV.B   R1L,#SEG( __lc_bs )
000C32 7133            5700         XOR.B   R1H,R1H
000C34 40076A          5701         LEA     R0,R7+106
000C37 0F03            5702         PUSH.W  R0, R1
000C39 0F30            5704         PUSH.W  R4, R5
000C3B 0F0C            5706         PUSH.W  R2, R3
000C3D 9938rrrr        5708         MOV.W   R3,#SEG( _184 )
000C41 9928rrrr        5709         MOV.W   R2,#SOF( _184 )
000C45 0F0C            5710         PUSH.W  R2, R3
000C47 9918rrrr        5712         MOV.W   R1,#SEG( _Cmd )
000C4B 9908rrrr        5713         MOV.W   R0,#SOF( _Cmd )
                       5714         CALL    _sscanf
000C4F C4rrrrrr       +5714 ;       FCALL   _sscanf
000C53 99700010        5715         ADD.W   R7,#010H
000C57 99040003        5717         CMP.W   R0,#03H
000C5B F307            5718         BEQ     _191
000C5B F30700          5718         BEQ     _191
000C5E                 5719 _190:
                       5720 ; rs232cmd.c 1615                                       SCPIError = SyntaxErr;
000C5E 964842rr        5722         MOV.B   ES,#SEG( _SCPIError )
000C62 9908rrrr        5723         MOV.W   R0,#SOF( _SCPIError )
000C66 BA03            5724         MOV.W   [R0],#03H
000C68 FE4A            5725         BR      _202
000C68 FE4A            5725         BR      _202
000C6A                 5726 _191:
                       5727 ; rs232cmd.c 1616                               else
                       5728 ; rs232cmd.c 1617                               {
                       5729 ; rs232cmd.c 1618                                       if ( ValidateDate( year, month, day) == F
                            AIL)
000C6A 8C0766          5731         MOV.W   R0,[R7+102]
000C6D 8C1768          5732         MOV.W   R1,[R7+104]
000C70 8C276A          5733         MOV.W   R2,[R7+106]
                       5734         CALL    _ValidateDate
000C73 C4rrrrrr       +5734 ;       FCALL   _ValidateDate
000C77 6900            5735         OR.W    R0,R0
000C79 F208            5736         BNE     _192
                       5737 ; rs232cmd.c 1619                                               SCPIError = ExecErr;
000C7B 964842rr        5739         MOV.B   ES,#SEG( _SCPIError )
000C7F 9908rrrr        5740         MOV.W   R0,#SOF( _SCPIError )
000C83 9A08001D        5741         MOV.W   [R0],#01DH
000C87 FE3B            5742         BR      _202
000C87 FE3B00          5742         BR      _202
000C8A                 5743 _192:
                       5744 ; rs232cmd.c 1620                                       else
                       5745 ; rs232cmd.c 1621                                       {
                       5746 ; rs232cmd.c 1622                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
000C8A 8A07            5748         MOV.W   R0,[R7]
000C8C F303            5749         BEQ     _193
000C8E 9A740004        5750         CMP.W   [R7],#04H
000C92 FD07            5751         BLE     _194
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  95

ADDR   CODE            LINE SOURCELINE
000C92 FD07            5751         BLE     _194
000C94                 5752 _193:
                       5753 ; rs232cmd.c 1623                                                       SCPIError = DataOutOfRang
                            e;
000C94 964842rr        5755         MOV.B   ES,#SEG( _SCPIError )
000C98 9908rrrr        5756         MOV.W   R0,#SOF( _SCPIError )
000C9C 9A080021        5757         MOV.W   [R0],#021H
000CA0 FE2E            5758         BR      _202
000CA0 FE2E            5758         BR      _202
000CA2                 5759 _194:
                       5760 ; rs232cmd.c 1624                                               else
                       5761 ; rs232cmd.c 1625                                               {
                       5762 ; rs232cmd.c 1626                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
000CA2 91A8rr          5764         MOV.B   R5L,#SEG( __lc_bs )
000CA5 71BB            5765         XOR.B   R5H,R5H
000CA7 404702          5766         LEA     R4,R7+2
000CAA 8A07            5767         MOV.W   R0,[R7]
000CAC D901            5768         ASL.W   R0,#01H
000CAE 8920            5769         MOV.W   R2,R0
000CB0 B930            5770         MOVS.W  R3,#00H
000CB2 964842rr        5771         MOV.B   ES,#SEG( _PresetPtr+-2 )
000CB6 8D22rrrr        5772         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000CBA 99380064        5773         MOV.W   R3,#064H
000CBE 8915            5774         MOV.W   R1,R5
000CC0 8904            5775         MOV.W   R0,R4
                       5776         CALL    _NV_Recall
000CC2 C4rrrrrr       +5776 ;       FCALL   _NV_Recall
                       5777 ; rs232cmd.c 1627                                                       Preset.Date = day + 100*m
                            onth + 10000*year;
000CC6 8C0768          5779         MOV.W   R0,[R7+104]
000CC9 E9000064        5780         MULU.W  R0,#064H
000CCD 0C076A          5781         ADD.W   R0,[R7+106]
000CD0 8C2766          5782         MOV.W   R2,[R7+102]
000CD3 E9202710        5783         MULU.W  R2,#02710H
000CD7 0902            5784         ADD.W   R0,R2
000CD9 B910            5785         MOVS.W  R1,#00H
000CDB 8C1F1C          5786         MOV.W   [R7+28],R1
000CDE 8C0F1A          5787         MOV.W   [R7+26],R0
                       5788 ; rs232cmd.c 1628                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000CE1 8A07            5790         MOV.W   R0,[R7]
000CE3 D901            5791         ASL.W   R0,#01H
000CE5 8920            5792         MOV.W   R2,R0
000CE7 B930            5793         MOVS.W  R3,#00H
000CE9 964842rr        5794         MOV.B   ES,#SEG( _PresetPtr+-2 )
000CED 8D22rrrr        5795         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000CF1 8915            5796         MOV.W   R1,R5
000CF3 8904            5797         MOV.W   R0,R4
000CF5 99380064        5798         MOV.W   R3,#064H
                       5799         CALL    _NV_Store
000CF9 C4rrrrrr       +5799 ;       FCALL   _NV_Store
                       5800 ; rs232cmd.c 1629                                               }
                       5801 ; rs232cmd.c 1630                                       }                               
                       5802 ; rs232cmd.c 1631                               }
                       5803 ; rs232cmd.c 1632                       }
                       5804 ; rs232cmd.c 1633               }
000CFE                 5806 _202:
                       5807 ; rs232cmd.c 1634       }
000CFE 99700080        5809         ADD.W   R7,#080H
000D02 2F30            5811         POP.W   R4, R5
000D04 D680            5813         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  96

ADDR   CODE            LINE SOURCELINE
                       5815 ; rs232cmd.c 1635       
                       5816 ; rs232cmd.c 1636       /************************************************************************
                            **/
                       5817 ; rs232cmd.c 1637       /* SystemPresetDownload                                                  
                                                                                                                             
                                     RS232CMD.C */
                       5818 ; rs232cmd.c 1638       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5819 ; rs232cmd.c 1639       /* Author:              Kim Engedahl, DEV, 000413                        
                                                                                                                             
                                    */
                       5820 ; rs232cmd.c 1640       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5821 ; rs232cmd.c 1641       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5822 ; rs232cmd.c 1642       /* Function:    Download a setup to a specific preset withouth disturbing
                                            */
                       5823 ; rs232cmd.c 1643       /*                                              the setting/function of t
                            he PT5201.                                                                                       
                                            */
                       5824 ; rs232cmd.c 1644       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       5825 ; rs232cmd.c 1645       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5826 ; rs232cmd.c 1646       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5827 ; rs232cmd.c 1647       /************************************************************************
                            **/
                       5828 ; rs232cmd.c 1648       void SystemPresetDownload( void)
                       5829 ; rs232cmd.c 1649       {
                       5830         ALIGN   1
                       5832         PUBLIC  _SystemPresetDownload
000D06                 5833 _SystemPresetDownload:
                       5837 ; rs232cmd.c 1650               ;
                       5838 ; rs232cmd.c 1651       }
000D06 D680            5840         RET
                       5842 ; rs232cmd.c 1652       
                       5843 ; rs232cmd.c 1653       /************************************************************************
                            **/
                       5844 ; rs232cmd.c 1654       /* SystemPresetUpload                                                    
                                                                                                                             
                                             RS232CMD.C */
                       5845 ; rs232cmd.c 1655       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5846 ; rs232cmd.c 1656       /* Author:              Kim Engedahl, DEV, 000413                        
                                                                                                                             
                                    */
                       5847 ; rs232cmd.c 1657       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5848 ; rs232cmd.c 1658       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  97

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5849 ; rs232cmd.c 1659       /* Function:    Upload a setup from a specific preset withouth disturbing
                                            */
                       5850 ; rs232cmd.c 1660       /*                                              the setting/function of t
                            he PT5201.                                                                                       
                                            */
                       5851 ; rs232cmd.c 1661       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       5852 ; rs232cmd.c 1662       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5853 ; rs232cmd.c 1663       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5854 ; rs232cmd.c 1664       /************************************************************************
                            **/
                       5855 ; rs232cmd.c 1665       void SystemPresetUpload( void)
                       5856 ; rs232cmd.c 1666       {
                       5857         ALIGN   1
                       5859         PUBLIC  _SystemPresetUpload
000D08                 5860 _SystemPresetUpload:
                       5864 ; rs232cmd.c 1667               ;
                       5865 ; rs232cmd.c 1668       }
000D08 D680            5867         RET
                       5869 ; rs232cmd.c 1669       
                       5870 ; rs232cmd.c 1670       /************************************************************************
                            **/
                       5871 ; rs232cmd.c 1671       /* StatusOperEvent                                                       
                                                                                                                             
                                                     RS232CMD.C */
                       5872 ; rs232cmd.c 1672       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5873 ; rs232cmd.c 1673       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       5874 ; rs232cmd.c 1674       /* Revised:             000402                                           
                                                                                                                             
                                                                                    */
                       5875 ; rs232cmd.c 1675       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5876 ; rs232cmd.c 1676       /* Function:    Set/read the status operation event register             
                                                                            */
                       5877 ; rs232cmd.c 1677       /* Remarks:             Reading the event register clears it             
                                                                                                            */
                       5878 ; rs232cmd.c 1678       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5879 ; rs232cmd.c 1679       /* Updates:             OperEventReg                                     
                                                                                                                             
                                                                                    */
                       5880 ; rs232cmd.c 1680       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  98

ADDR   CODE            LINE SOURCELINE
                       5881 ; rs232cmd.c 1681       void StatusOperEvent( void)
                       5882 ; rs232cmd.c 1682       {
                       5883         ALIGN   1
                       5885         PUBLIC  _StatusOperEvent
000D0A                 5886 _StatusOperEvent:
                       5890 ; rs232cmd.c 1683               if ( CmdExecute && !SCPIError)
000D0A 964842rr        5892         MOV.B   ES,#SEG( _CmdExecute )
000D0E 9908rrrr        5893         MOV.W   R0,#SOF( _CmdExecute )
000D12 8200            5894         MOV.B   R0L,[R0]
000D14 F333            5895         BEQ     _214
000D16 964842rr        5896         MOV.B   ES,#SEG( _SCPIError )
000D1A 9908rrrr        5897         MOV.W   R0,#SOF( _SCPIError )
000D1E 8A00            5898         MOV.W   R0,[R0]
000D20 F22D            5899         BNE     _214
                       5900 ; rs232cmd.c 1684               {
                       5901 ; rs232cmd.c 1685                       if ( ParCnt)
000D22 964842rr        5903         MOV.B   ES,#SEG( _ParCnt )
000D26 9908rrrr        5904         MOV.W   R0,#SOF( _ParCnt )
000D2A 8200            5905         MOV.B   R0L,[R0]
000D2C F306            5906         BEQ     _209
                       5907 ; rs232cmd.c 1686                               SCPIError = ParNotAllowed;
000D2E 964842rr        5909         MOV.B   ES,#SEG( _SCPIError )
000D32 9908rrrr        5910         MOV.W   R0,#SOF( _SCPIError )
000D36 BA06            5911         MOV.W   [R0],#06H
000D38 D680            5912         RET
000D38 D680            5912         RET
000D3A                 5913 _209:
                       5914 ; rs232cmd.c 1687                       else
                       5915 ; rs232cmd.c 1688                       {
                       5916 ; rs232cmd.c 1689                               if ( CmdRequest) {
000D3A 964842rr        5918         MOV.B   ES,#SEG( _CmdRequest )
000D3E 9908rrrr        5919         MOV.W   R0,#SOF( _CmdRequest )
000D42 8200            5920         MOV.B   R0L,[R0]
000D44 F316            5921         BEQ     _210
                       5922 ; rs232cmd.c 1690                                       rs232printf( 12, "%d\n", OperEventReg);
000D46 9908000C        5924         MOV.W   R0,#0CH
000D4A 964842rr        5925         MOV.B   ES,#SEG( _OperEventReg )
000D4E 9918rrrr        5926         MOV.W   R1,#SOF( _OperEventReg )
000D52 8A11            5927         MOV.W   R1,[R1]
000D54 0F02            5928         PUSH.W  R1
000D56 9938rrrr        5930         MOV.W   R3,#SEG( _9 )
000D5A 9928rrrr        5931         MOV.W   R2,#SOF( _9 )
000D5E 0F0C            5932         PUSH.W  R2, R3
                       5934         CALL    _rs232printf
000D60 C4rrrrrr       +5934 ;       FCALL   _rs232printf
000D64 A976            5935         ADDS.W  R7,#06H
                       5937 ; rs232cmd.c 1691       
                       5938 ; rs232cmd.c 1692                                       OperEventReg = 0;
000D66 964842rr        5940         MOV.B   ES,#SEG( _OperEventReg )
000D6A 9908rrrr        5941         MOV.W   R0,#SOF( _OperEventReg )
000D6E BA00            5942         MOV.W   [R0],#00H
                       5943 ; rs232cmd.c 1693                               }
000D70 D680            5945         RET
000D70 D680            5945         RET
000D72                 5946 _210:
                       5947 ; rs232cmd.c 1694                               else
                       5948 ; rs232cmd.c 1695                                       SCPIError = SyntaxErr;
000D72 964842rr        5950         MOV.B   ES,#SEG( _SCPIError )
000D76 9908rrrr        5951         MOV.W   R0,#SOF( _SCPIError )
000D7A BA03            5952         MOV.W   [R0],#03H
                       5953 ; rs232cmd.c 1696                       }
                       5954 ; rs232cmd.c 1697               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  99

ADDR   CODE            LINE SOURCELINE
000D7C                 5956 _214:
                       5957 ; rs232cmd.c 1698       }
000D7C D680            5959         RET
                       5961 ; rs232cmd.c 1699       
                       5962 ; rs232cmd.c 1700       /************************************************************************
                            **/
                       5963 ; rs232cmd.c 1701       /* StatusOperCondition                                                   
                                                                                                                             
                                     RS232CMD.C */
                       5964 ; rs232cmd.c 1702       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5965 ; rs232cmd.c 1703       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       5966 ; rs232cmd.c 1704       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5967 ; rs232cmd.c 1705       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5968 ; rs232cmd.c 1706       /* Function:    Read the status questionable condition register          
                                                                    */
                       5969 ; rs232cmd.c 1707       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       5970 ; rs232cmd.c 1708       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       5971 ; rs232cmd.c 1709       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       5972 ; rs232cmd.c 1710       /************************************************************************
                            **/
                       5973 ; rs232cmd.c 1711       void StatusOperCondition( void)
                       5974 ; rs232cmd.c 1712       {
                       5975         ALIGN   1
                       5977         PUBLIC  _StatusOperCondition
000D7E                 5978 _StatusOperCondition:
                       5982 ; rs232cmd.c 1713               if ( CmdExecute && !SCPIError)
000D7E 964842rr        5984         MOV.B   ES,#SEG( _CmdExecute )
000D82 9908rrrr        5985         MOV.W   R0,#SOF( _CmdExecute )
000D86 8200            5986         MOV.B   R0L,[R0]
000D88 F32E            5987         BEQ     _220
000D8A 964842rr        5988         MOV.B   ES,#SEG( _SCPIError )
000D8E 9908rrrr        5989         MOV.W   R0,#SOF( _SCPIError )
000D92 8A00            5990         MOV.W   R0,[R0]
000D94 F228            5991         BNE     _220
                       5992 ; rs232cmd.c 1714               {
                       5993 ; rs232cmd.c 1715                       if ( ParCnt)
000D96 964842rr        5995         MOV.B   ES,#SEG( _ParCnt )
000D9A 9908rrrr        5996         MOV.W   R0,#SOF( _ParCnt )
000D9E 8200            5997         MOV.B   R0L,[R0]
000DA0 F306            5998         BEQ     _215
                       5999 ; rs232cmd.c 1716                               SCPIError = ParNotAllowed;
000DA2 964842rr        6001         MOV.B   ES,#SEG( _SCPIError )
000DA6 9908rrrr        6002         MOV.W   R0,#SOF( _SCPIError )
000DAA BA06            6003         MOV.W   [R0],#06H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 100

ADDR   CODE            LINE SOURCELINE
000DAC D680            6004         RET
000DAC D680            6004         RET
000DAE                 6005 _215:
                       6006 ; rs232cmd.c 1717                       else
                       6007 ; rs232cmd.c 1718                       {
                       6008 ; rs232cmd.c 1719                               if ( CmdRequest)
000DAE 964842rr        6010         MOV.B   ES,#SEG( _CmdRequest )
000DB2 9908rrrr        6011         MOV.W   R0,#SOF( _CmdRequest )
000DB6 8200            6012         MOV.B   R0L,[R0]
000DB8 F311            6013         BEQ     _216
                       6014 ; rs232cmd.c 1720                                       rs232printf( 12, "%d\n", OperConditionReg
                            );
000DBA 9908000C        6016         MOV.W   R0,#0CH
000DBE 964842rr        6017         MOV.B   ES,#SEG( _OperConditionReg )
000DC2 9918rrrr        6018         MOV.W   R1,#SOF( _OperConditionReg )
000DC6 8A11            6019         MOV.W   R1,[R1]
000DC8 0F02            6020         PUSH.W  R1
000DCA 9938rrrr        6022         MOV.W   R3,#SEG( _9 )
000DCE 9928rrrr        6023         MOV.W   R2,#SOF( _9 )
000DD2 0F0C            6024         PUSH.W  R2, R3
                       6026         CALL    _rs232printf
000DD4 C4rrrrrr       +6026 ;       FCALL   _rs232printf
000DD8 A976            6027         ADDS.W  R7,#06H
000DDA D680            6029         RET
000DDA D680            6029         RET
000DDC                 6030 _216:
                       6031 ; rs232cmd.c 1721                               else
                       6032 ; rs232cmd.c 1722                                       SCPIError = SyntaxErr;
000DDC 964842rr        6034         MOV.B   ES,#SEG( _SCPIError )
000DE0 9908rrrr        6035         MOV.W   R0,#SOF( _SCPIError )
000DE4 BA03            6036         MOV.W   [R0],#03H
                       6037 ; rs232cmd.c 1723                       }
                       6038 ; rs232cmd.c 1724               }
000DE6                 6040 _220:
                       6041 ; rs232cmd.c 1725       }
000DE6 D680            6043         RET
                       6045 ; rs232cmd.c 1726       
                       6046 ; rs232cmd.c 1727       /************************************************************************
                            **/
                       6047 ; rs232cmd.c 1728       /* StatusOperEnable                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       6048 ; rs232cmd.c 1729       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6049 ; rs232cmd.c 1730       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6050 ; rs232cmd.c 1731       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6051 ; rs232cmd.c 1732       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6052 ; rs232cmd.c 1733       /* Function:    Set/read the status operaion enable register             
                                                                            */
                       6053 ; rs232cmd.c 1734       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6054 ; rs232cmd.c 1735       /* Returns:             -                                                
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 101

ADDR   CODE            LINE SOURCELINE
                                                                                                                            *
                            /
                       6055 ; rs232cmd.c 1736       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6056 ; rs232cmd.c 1737       /************************************************************************
                            **/
                       6057 ; rs232cmd.c 1738       void StatusOperEnable( void)
                       6058 ; rs232cmd.c 1739       {
                       6059         ALIGN   1
                       6061         PUBLIC  _StatusOperEnable
000DE8                 6062 _StatusOperEnable:
000DE8 A97C            6066         ADDS.W  R7,#0CH
                       6069 ; rs232cmd.c 1740               long    Reg;
                       6070 ; rs232cmd.c 1741       
                       6071 ; rs232cmd.c 1742               if ( CmdExecute && !SCPIError)
000DEA 964842rr        6073         MOV.B   ES,#SEG( _CmdExecute )
000DEE 9908rrrr        6074         MOV.W   R0,#SOF( _CmdExecute )
000DF2 8200            6075         MOV.B   R0L,[R0]
000DF4 F364            6076         BEQ     _232
000DF6 964842rr        6077         MOV.B   ES,#SEG( _SCPIError )
000DFA 9908rrrr        6078         MOV.W   R0,#SOF( _SCPIError )
000DFE 8A00            6079         MOV.W   R0,[R0]
000E00 F25E            6080         BNE     _232
                       6081 ; rs232cmd.c 1743               {
                       6082 ; rs232cmd.c 1744                       if ( CmdRequest)
000E02 964842rr        6084         MOV.B   ES,#SEG( _CmdRequest )
000E06 9908rrrr        6085         MOV.W   R0,#SOF( _CmdRequest )
000E0A 8200            6086         MOV.B   R0L,[R0]
000E0C F31D            6087         BEQ     _223
                       6088 ; rs232cmd.c 1745                       {
                       6089 ; rs232cmd.c 1746                               if ( ParCnt)
000E0E 964842rr        6091         MOV.B   ES,#SEG( _ParCnt )
000E12 9908rrrr        6092         MOV.W   R0,#SOF( _ParCnt )
000E16 8200            6093         MOV.B   R0L,[R0]
000E18 F306            6094         BEQ     _222
                       6095 ; rs232cmd.c 1747                                       SCPIError = ParNotAllowed;
000E1A 964842rr        6097         MOV.B   ES,#SEG( _SCPIError )
000E1E 9908rrrr        6098         MOV.W   R0,#SOF( _SCPIError )
000E22 BA06            6099         MOV.W   [R0],#06H
000E24 FE4C            6100         BR      _232
000E24 FE4C            6100         BR      _232
000E26                 6101 _222:
                       6102 ; rs232cmd.c 1748                               else
                       6103 ; rs232cmd.c 1749                                       rs232printf( 12, "%d\n", OperEnableReg);
000E26 9908000C        6105         MOV.W   R0,#0CH
000E2A 964842rr        6106         MOV.B   ES,#SEG( _OperEnableReg )
000E2E 9918rrrr        6107         MOV.W   R1,#SOF( _OperEnableReg )
000E32 8A11            6108         MOV.W   R1,[R1]
000E34 0F02            6109         PUSH.W  R1
000E36 9938rrrr        6111         MOV.W   R3,#SEG( _9 )
000E3A 9928rrrr        6112         MOV.W   R2,#SOF( _9 )
000E3E 0F0C            6113         PUSH.W  R2, R3
                       6115         CALL    _rs232printf
000E40 C4rrrrrr       +6115 ;       FCALL   _rs232printf
000E44 A976            6116         ADDS.W  R7,#06H
                       6118 ; rs232cmd.c 1750                       }
000E46 FE3B            6120         BR      _232
000E46 FE3B            6120         BR      _232
000E48                 6121 _223:
                       6122 ; rs232cmd.c 1751                       else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 102

ADDR   CODE            LINE SOURCELINE
                       6123 ; rs232cmd.c 1752                       {
                       6124 ; rs232cmd.c 1753                               if (( ParCnt != 1) || ( sscanf( Cmd, "%l", &Reg) 
                            != 1))
000E48 964842rr        6126         MOV.B   ES,#SEG( _ParCnt )
000E4C 9908rrrr        6127         MOV.W   R0,#SOF( _ParCnt )
000E50 8200            6128         MOV.B   R0L,[R0]
000E52 910401          6129         CMP.B   R0L,#01H
000E55 F215            6130         BNE     _224
000E57 9918rrrr        6131         MOV.W   R1,#SEG( _Cmd )
000E5B 9908rrrr        6132         MOV.W   R0,#SOF( _Cmd )
000E5F 9168rr          6133         MOV.B   R3L,#SEG( __lc_bs )
000E62 7177            6134         XOR.B   R3H,R3H
000E64 8927            6135         MOV.W   R2,R7
000E66 0F0C            6136         PUSH.W  R2, R3
000E68 9938rrrr        6138         MOV.W   R3,#SEG( _221 )
000E6C 9928rrrr        6139         MOV.W   R2,#SOF( _221 )
000E70 0F0C            6140         PUSH.W  R2, R3
                       6142         CALL    _sscanf
000E72 C4rrrrrr       +6142 ;       FCALL   _sscanf
000E76 99700008        6143         ADD.W   R7,#08H
000E7A 99040001        6145         CMP.W   R0,#01H
000E7E F306            6146         BEQ     _225
000E7E F306            6146         BEQ     _225
000E80                 6147 _224:
                       6148 ; rs232cmd.c 1754                               {
                       6149 ; rs232cmd.c 1755                                       SCPIError = SyntaxErr;  
000E80 964842rr        6151         MOV.B   ES,#SEG( _SCPIError )
000E84 9908rrrr        6152         MOV.W   R0,#SOF( _SCPIError )
000E88 BA03            6153         MOV.W   [R0],#03H
                       6154 ; rs232cmd.c 1756                                       return;
000E8A FE19            6156         BR      _232
                       6157 ; rs232cmd.c 1757                               }
000E8C                 6159 _225:
                       6160 ; rs232cmd.c 1758       
                       6161 ; rs232cmd.c 1759                               if ( Reg > 65535)
000E8C 9C74020000      6163         CMP.W   [R7+2],#00H
000E91 FB0C            6164         BLT     _226
000E93 FC04            6165         BGT     _235
000E95 9A74FFFF        6166         CMP.W   [R7],#0FFFFH
000E99 F908            6167         BL      _226
000E99 F90800          6167         BL      _226
000E9C                 6168 _235:
                       6169 ; rs232cmd.c 1760                               {
                       6170 ; rs232cmd.c 1761                                       SCPIError = DataOutOfRange;
000E9C 964842rr        6172         MOV.B   ES,#SEG( _SCPIError )
000EA0 9908rrrr        6173         MOV.W   R0,#SOF( _SCPIError )
000EA4 9A080021        6174         MOV.W   [R0],#021H
                       6175 ; rs232cmd.c 1762                                       return;
000EA8 FE0A            6177         BR      _232
                       6178 ; rs232cmd.c 1763                               }
000EAA                 6180 _226:
                       6181 ; rs232cmd.c 1764       
                       6182 ; rs232cmd.c 1765                               OperEnableReg = Reg & 0xEFFF;
000EAA 8C1702          6184         MOV.W   R1,[R7+2]
000EAD 8A07            6185         MOV.W   R0,[R7]
000EAF 9905EFFF        6186         AND.W   R0,#0EFFFH
000EB3 964842rr        6187         MOV.B   ES,#SEG( _OperEnableReg )
000EB7 9918rrrr        6188         MOV.W   R1,#SOF( _OperEnableReg )
000EBB 8A09            6189         MOV.W   [R1],R0
                       6190 ; rs232cmd.c 1766                       }
                       6191 ; rs232cmd.c 1767               }
                       6192 ; rs232cmd.c 1768       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 103

ADDR   CODE            LINE SOURCELINE
000EBE                 6194 _232:
000EBE A974            6195         ADDS.W  R7,#04H
000EC0 D680            6197         RET
                       6199 ; rs232cmd.c 1769       
                       6200 ; rs232cmd.c 1770       /************************************************************************
                            ***/
                       6201 ; rs232cmd.c 1771       /* StatusQuestEvent                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       6202 ; rs232cmd.c 1772       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6203 ; rs232cmd.c 1773       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6204 ; rs232cmd.c 1774       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6205 ; rs232cmd.c 1775       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6206 ; rs232cmd.c 1776       /* Function:    Set/read the status questionablen event register         
                                                                    */
                       6207 ; rs232cmd.c 1777       /* Remarks:             Reading the event register clears it             
                                                                                                            */
                       6208 ; rs232cmd.c 1778       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6209 ; rs232cmd.c 1779       /* Updates:             QuestEventReg                                    
                                                                                                                             
                                                                                    */
                       6210 ; rs232cmd.c 1780       /************************************************************************
                            ***/
                       6211 ; rs232cmd.c 1781       void StatusQuestEvent( void)
                       6212 ; rs232cmd.c 1782       {
                       6213         ALIGN   1
                       6215         PUBLIC  _StatusQuestEvent
000EC2                 6216 _StatusQuestEvent:
                       6220 ; rs232cmd.c 1783               if ( CmdExecute && !SCPIError)
000EC2 964842rr        6222         MOV.B   ES,#SEG( _CmdExecute )
000EC6 9908rrrr        6223         MOV.W   R0,#SOF( _CmdExecute )
000ECA 8200            6224         MOV.B   R0L,[R0]
000ECC F333            6225         BEQ     _241
000ECE 964842rr        6226         MOV.B   ES,#SEG( _SCPIError )
000ED2 9908rrrr        6227         MOV.W   R0,#SOF( _SCPIError )
000ED6 8A00            6228         MOV.W   R0,[R0]
000ED8 F22D            6229         BNE     _241
                       6230 ; rs232cmd.c 1784               {
                       6231 ; rs232cmd.c 1785                       if ( ParCnt)
000EDA 964842rr        6233         MOV.B   ES,#SEG( _ParCnt )
000EDE 9908rrrr        6234         MOV.W   R0,#SOF( _ParCnt )
000EE2 8200            6235         MOV.B   R0L,[R0]
000EE4 F306            6236         BEQ     _236
                       6237 ; rs232cmd.c 1786                               SCPIError = ParNotAllowed;
000EE6 964842rr        6239         MOV.B   ES,#SEG( _SCPIError )
000EEA 9908rrrr        6240         MOV.W   R0,#SOF( _SCPIError )
000EEE BA06            6241         MOV.W   [R0],#06H
000EF0 D680            6242         RET
000EF0 D680            6242         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 104

ADDR   CODE            LINE SOURCELINE
000EF2                 6243 _236:
                       6244 ; rs232cmd.c 1787                       else
                       6245 ; rs232cmd.c 1788                       {
                       6246 ; rs232cmd.c 1789                               if ( CmdRequest)
000EF2 964842rr        6248         MOV.B   ES,#SEG( _CmdRequest )
000EF6 9908rrrr        6249         MOV.W   R0,#SOF( _CmdRequest )
000EFA 8200            6250         MOV.B   R0L,[R0]
000EFC F316            6251         BEQ     _237
                       6252 ; rs232cmd.c 1790                               {
                       6253 ; rs232cmd.c 1791                                       rs232printf( 12, "%d\n", QuestEventReg);
000EFE 9908000C        6255         MOV.W   R0,#0CH
000F02 964842rr        6256         MOV.B   ES,#SEG( _QuestEventReg )
000F06 9918rrrr        6257         MOV.W   R1,#SOF( _QuestEventReg )
000F0A 8A11            6258         MOV.W   R1,[R1]
000F0C 0F02            6259         PUSH.W  R1
000F0E 9938rrrr        6261         MOV.W   R3,#SEG( _9 )
000F12 9928rrrr        6262         MOV.W   R2,#SOF( _9 )
000F16 0F0C            6263         PUSH.W  R2, R3
                       6265         CALL    _rs232printf
000F18 C4rrrrrr       +6265 ;       FCALL   _rs232printf
000F1C A976            6266         ADDS.W  R7,#06H
                       6268 ; rs232cmd.c 1792       
                       6269 ; rs232cmd.c 1793                                       QuestEventReg = 0;
000F1E 964842rr        6271         MOV.B   ES,#SEG( _QuestEventReg )
000F22 9908rrrr        6272         MOV.W   R0,#SOF( _QuestEventReg )
000F26 BA00            6273         MOV.W   [R0],#00H
                       6274 ; rs232cmd.c 1794                               }
000F28 D680            6276         RET
000F28 D680            6276         RET
000F2A                 6277 _237:
                       6278 ; rs232cmd.c 1795                               else
                       6279 ; rs232cmd.c 1796                                       SCPIError = SyntaxErr;
000F2A 964842rr        6281         MOV.B   ES,#SEG( _SCPIError )
000F2E 9908rrrr        6282         MOV.W   R0,#SOF( _SCPIError )
000F32 BA03            6283         MOV.W   [R0],#03H
                       6284 ; rs232cmd.c 1797                       }
                       6285 ; rs232cmd.c 1798               }
000F34                 6287 _241:
                       6288 ; rs232cmd.c 1799       }
000F34 D680            6290         RET
                       6292 ; rs232cmd.c 1800       
                       6293 ; rs232cmd.c 1801       /************************************************************************
                            **/
                       6294 ; rs232cmd.c 1802       /* StatusQuestCondition                                                  
                                                                                                                             
                                     RS232CMD.C */
                       6295 ; rs232cmd.c 1803       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6296 ; rs232cmd.c 1804       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6297 ; rs232cmd.c 1805       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6298 ; rs232cmd.c 1806       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6299 ; rs232cmd.c 1807       /* Function:    Read the status operation condition register             
                                                                            */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 105

ADDR   CODE            LINE SOURCELINE
                       6300 ; rs232cmd.c 1808       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       6301 ; rs232cmd.c 1809       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6302 ; rs232cmd.c 1810       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6303 ; rs232cmd.c 1811       /************************************************************************
                            **/
                       6304 ; rs232cmd.c 1812       void StatusQuestCondition( void)
                       6305 ; rs232cmd.c 1813       {
                       6306         ALIGN   1
                       6308         PUBLIC  _StatusQuestCondition
000F36                 6309 _StatusQuestCondition:
                       6313 ; rs232cmd.c 1814               if ( CmdExecute && !SCPIError)
000F36 964842rr        6315         MOV.B   ES,#SEG( _CmdExecute )
000F3A 9908rrrr        6316         MOV.W   R0,#SOF( _CmdExecute )
000F3E 8200            6317         MOV.B   R0L,[R0]
000F40 F32E            6318         BEQ     _247
000F42 964842rr        6319         MOV.B   ES,#SEG( _SCPIError )
000F46 9908rrrr        6320         MOV.W   R0,#SOF( _SCPIError )
000F4A 8A00            6321         MOV.W   R0,[R0]
000F4C F228            6322         BNE     _247
                       6323 ; rs232cmd.c 1815               {
                       6324 ; rs232cmd.c 1816                       if ( ParCnt)
000F4E 964842rr        6326         MOV.B   ES,#SEG( _ParCnt )
000F52 9908rrrr        6327         MOV.W   R0,#SOF( _ParCnt )
000F56 8200            6328         MOV.B   R0L,[R0]
000F58 F306            6329         BEQ     _242
                       6330 ; rs232cmd.c 1817                               SCPIError = ParNotAllowed;
000F5A 964842rr        6332         MOV.B   ES,#SEG( _SCPIError )
000F5E 9908rrrr        6333         MOV.W   R0,#SOF( _SCPIError )
000F62 BA06            6334         MOV.W   [R0],#06H
000F64 D680            6335         RET
000F64 D680            6335         RET
000F66                 6336 _242:
                       6337 ; rs232cmd.c 1818                       else
                       6338 ; rs232cmd.c 1819                       {
                       6339 ; rs232cmd.c 1820                               if ( CmdRequest)
000F66 964842rr        6341         MOV.B   ES,#SEG( _CmdRequest )
000F6A 9908rrrr        6342         MOV.W   R0,#SOF( _CmdRequest )
000F6E 8200            6343         MOV.B   R0L,[R0]
000F70 F311            6344         BEQ     _243
                       6345 ; rs232cmd.c 1821                               rs232printf( 12, "%d\n", QuestConditionReg);
000F72 9908000C        6347         MOV.W   R0,#0CH
000F76 964842rr        6348         MOV.B   ES,#SEG( _QuestConditionReg )
000F7A 9918rrrr        6349         MOV.W   R1,#SOF( _QuestConditionReg )
000F7E 8A11            6350         MOV.W   R1,[R1]
000F80 0F02            6351         PUSH.W  R1
000F82 9938rrrr        6353         MOV.W   R3,#SEG( _9 )
000F86 9928rrrr        6354         MOV.W   R2,#SOF( _9 )
000F8A 0F0C            6355         PUSH.W  R2, R3
                       6357         CALL    _rs232printf
000F8C C4rrrrrr       +6357 ;       FCALL   _rs232printf
000F90 A976            6358         ADDS.W  R7,#06H
000F92 D680            6360         RET
000F92 D680            6360         RET
000F94                 6361 _243:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 106

ADDR   CODE            LINE SOURCELINE
                       6362 ; rs232cmd.c 1822                               else
                       6363 ; rs232cmd.c 1823                                       SCPIError = SyntaxErr;
000F94 964842rr        6365         MOV.B   ES,#SEG( _SCPIError )
000F98 9908rrrr        6366         MOV.W   R0,#SOF( _SCPIError )
000F9C BA03            6367         MOV.W   [R0],#03H
                       6368 ; rs232cmd.c 1824                       }
                       6369 ; rs232cmd.c 1825               }
000F9E                 6371 _247:
                       6372 ; rs232cmd.c 1826       }
000F9E D680            6374         RET
                       6376 ; rs232cmd.c 1827       
                       6377 ; rs232cmd.c 1828       /************************************************************************
                            **/
                       6378 ; rs232cmd.c 1829       /* StatusQuestEnable                                                     
                                                                                                                             
                                             RS232CMD.C */
                       6379 ; rs232cmd.c 1830       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6380 ; rs232cmd.c 1831       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6381 ; rs232cmd.c 1832       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6382 ; rs232cmd.c 1833       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6383 ; rs232cmd.c 1834       /* Function:    Set/read the status questionable enable register         
                                                                    */
                       6384 ; rs232cmd.c 1835       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6385 ; rs232cmd.c 1836       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6386 ; rs232cmd.c 1837       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6387 ; rs232cmd.c 1838       /************************************************************************
                            **/
                       6388 ; rs232cmd.c 1839       void StatusQuestEnable( void)
                       6389 ; rs232cmd.c 1840       {
                       6390         ALIGN   1
                       6392         PUBLIC  _StatusQuestEnable
000FA0                 6393 _StatusQuestEnable:
000FA0 A97C            6397         ADDS.W  R7,#0CH
                       6400 ; rs232cmd.c 1841               long    Reg;
                       6401 ; rs232cmd.c 1842       
                       6402 ; rs232cmd.c 1843               if ( CmdExecute && !SCPIError)
000FA2 964842rr        6404         MOV.B   ES,#SEG( _CmdExecute )
000FA6 9908rrrr        6405         MOV.W   R0,#SOF( _CmdExecute )
000FAA 8200            6406         MOV.B   R0L,[R0]
000FAC F364            6407         BEQ     _258
000FAE 964842rr        6408         MOV.B   ES,#SEG( _SCPIError )
000FB2 9908rrrr        6409         MOV.W   R0,#SOF( _SCPIError )
000FB6 8A00            6410         MOV.W   R0,[R0]
000FB8 F25E            6411         BNE     _258
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 107

ADDR   CODE            LINE SOURCELINE
                       6412 ; rs232cmd.c 1844               {
                       6413 ; rs232cmd.c 1845                       if ( CmdRequest)
000FBA 964842rr        6415         MOV.B   ES,#SEG( _CmdRequest )
000FBE 9908rrrr        6416         MOV.W   R0,#SOF( _CmdRequest )
000FC2 8200            6417         MOV.B   R0L,[R0]
000FC4 F31D            6418         BEQ     _249
                       6419 ; rs232cmd.c 1846                       {
                       6420 ; rs232cmd.c 1847                               if ( ParCnt)
000FC6 964842rr        6422         MOV.B   ES,#SEG( _ParCnt )
000FCA 9908rrrr        6423         MOV.W   R0,#SOF( _ParCnt )
000FCE 8200            6424         MOV.B   R0L,[R0]
000FD0 F306            6425         BEQ     _248
                       6426 ; rs232cmd.c 1848                                       SCPIError = ParNotAllowed;
000FD2 964842rr        6428         MOV.B   ES,#SEG( _SCPIError )
000FD6 9908rrrr        6429         MOV.W   R0,#SOF( _SCPIError )
000FDA BA06            6430         MOV.W   [R0],#06H
000FDC FE4C            6431         BR      _258
000FDC FE4C            6431         BR      _258
000FDE                 6432 _248:
                       6433 ; rs232cmd.c 1849                               else
                       6434 ; rs232cmd.c 1850                                       rs232printf( 12, "%d\n", QuestEnableReg);
                            
000FDE 9908000C        6436         MOV.W   R0,#0CH
000FE2 964842rr        6437         MOV.B   ES,#SEG( _QuestEnableReg )
000FE6 9918rrrr        6438         MOV.W   R1,#SOF( _QuestEnableReg )
000FEA 8A11            6439         MOV.W   R1,[R1]
000FEC 0F02            6440         PUSH.W  R1
000FEE 9938rrrr        6442         MOV.W   R3,#SEG( _9 )
000FF2 9928rrrr        6443         MOV.W   R2,#SOF( _9 )
000FF6 0F0C            6444         PUSH.W  R2, R3
                       6446         CALL    _rs232printf
000FF8 C4rrrrrr       +6446 ;       FCALL   _rs232printf
000FFC A976            6447         ADDS.W  R7,#06H
                       6449 ; rs232cmd.c 1851                       }
000FFE FE3B            6451         BR      _258
000FFE FE3B            6451         BR      _258
001000                 6452 _249:
                       6453 ; rs232cmd.c 1852                       else
                       6454 ; rs232cmd.c 1853                       {
                       6455 ; rs232cmd.c 1854                               if (( ParCnt != 1) || ( sscanf( Cmd, "%l", &Reg) 
                            != 1))
001000 964842rr        6457         MOV.B   ES,#SEG( _ParCnt )
001004 9908rrrr        6458         MOV.W   R0,#SOF( _ParCnt )
001008 8200            6459         MOV.B   R0L,[R0]
00100A 910401          6460         CMP.B   R0L,#01H
00100D F215            6461         BNE     _250
00100F 9918rrrr        6462         MOV.W   R1,#SEG( _Cmd )
001013 9908rrrr        6463         MOV.W   R0,#SOF( _Cmd )
001017 9168rr          6464         MOV.B   R3L,#SEG( __lc_bs )
00101A 7177            6465         XOR.B   R3H,R3H
00101C 8927            6466         MOV.W   R2,R7
00101E 0F0C            6467         PUSH.W  R2, R3
001020 9938rrrr        6469         MOV.W   R3,#SEG( _221 )
001024 9928rrrr        6470         MOV.W   R2,#SOF( _221 )
001028 0F0C            6471         PUSH.W  R2, R3
                       6473         CALL    _sscanf
00102A C4rrrrrr       +6473 ;       FCALL   _sscanf
00102E 99700008        6474         ADD.W   R7,#08H
001032 99040001        6476         CMP.W   R0,#01H
001036 F306            6477         BEQ     _251
001036 F306            6477         BEQ     _251
001038                 6478 _250:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 108

ADDR   CODE            LINE SOURCELINE
                       6479 ; rs232cmd.c 1855                               {
                       6480 ; rs232cmd.c 1856                                       SCPIError = SyntaxErr;  
001038 964842rr        6482         MOV.B   ES,#SEG( _SCPIError )
00103C 9908rrrr        6483         MOV.W   R0,#SOF( _SCPIError )
001040 BA03            6484         MOV.W   [R0],#03H
                       6485 ; rs232cmd.c 1857                                       return;
001042 FE19            6487         BR      _258
                       6488 ; rs232cmd.c 1858                               }
001044                 6490 _251:
                       6491 ; rs232cmd.c 1859       
                       6492 ; rs232cmd.c 1860                               if ( Reg > 65535)
001044 9C74020000      6494         CMP.W   [R7+2],#00H
001049 FB0C            6495         BLT     _252
00104B FC04            6496         BGT     _261
00104D 9A74FFFF        6497         CMP.W   [R7],#0FFFFH
001051 F908            6498         BL      _252
001051 F90800          6498         BL      _252
001054                 6499 _261:
                       6500 ; rs232cmd.c 1861                               {
                       6501 ; rs232cmd.c 1862                                       SCPIError = DataOutOfRange;
001054 964842rr        6503         MOV.B   ES,#SEG( _SCPIError )
001058 9908rrrr        6504         MOV.W   R0,#SOF( _SCPIError )
00105C 9A080021        6505         MOV.W   [R0],#021H
                       6506 ; rs232cmd.c 1863                                       return;
001060 FE0A            6508         BR      _258
                       6509 ; rs232cmd.c 1864                               }
001062                 6511 _252:
                       6512 ; rs232cmd.c 1865       
                       6513 ; rs232cmd.c 1866                               QuestEnableReg = Reg & 0xEFFF;
001062 8C1702          6515         MOV.W   R1,[R7+2]
001065 8A07            6516         MOV.W   R0,[R7]
001067 9905EFFF        6517         AND.W   R0,#0EFFFH
00106B 964842rr        6518         MOV.B   ES,#SEG( _QuestEnableReg )
00106F 9918rrrr        6519         MOV.W   R1,#SOF( _QuestEnableReg )
001073 8A09            6520         MOV.W   [R1],R0
                       6521 ; rs232cmd.c 1867                       }
                       6522 ; rs232cmd.c 1868               }
                       6523 ; rs232cmd.c 1869       }
001076                 6525 _258:
001076 A974            6526         ADDS.W  R7,#04H
001078 D680            6528         RET
                       6530 ; rs232cmd.c 1870       
                       6531 ; rs232cmd.c 1871       /************************************************************************
                            **/
                       6532 ; rs232cmd.c 1872       /* StatusPreset                                                          
                                                                                                                             
                                                             RS232CMD.C */
                       6533 ; rs232cmd.c 1873       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6534 ; rs232cmd.c 1874       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       6535 ; rs232cmd.c 1875       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                       6536 ; rs232cmd.c 1876       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 109

ADDR   CODE            LINE SOURCELINE
                       6537 ; rs232cmd.c 1877       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       6538 ; rs232cmd.c 1878       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6539 ; rs232cmd.c 1879       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6540 ; rs232cmd.c 1880       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6541 ; rs232cmd.c 1881       /************************************************************************
                            **/
                       6542 ; rs232cmd.c 1882       void StatusPreset( void)
                       6543 ; rs232cmd.c 1883       {
                       6544         ALIGN   1
                       6546         PUBLIC  _StatusPreset
00107A                 6547 _StatusPreset:
                       6551 ; rs232cmd.c 1884               if ( CmdExecute && !SCPIError)
00107A 964842rr        6553         MOV.B   ES,#SEG( _CmdExecute )
00107E 9908rrrr        6554         MOV.W   R0,#SOF( _CmdExecute )
001082 8200            6555         MOV.B   R0L,[R0]
001084 F333            6556         BEQ     _270
001086 964842rr        6557         MOV.B   ES,#SEG( _SCPIError )
00108A 9908rrrr        6558         MOV.W   R0,#SOF( _SCPIError )
00108E 8A00            6559         MOV.W   R0,[R0]
001090 F22D            6560         BNE     _270
                       6561 ; rs232cmd.c 1885               {
                       6562 ; rs232cmd.c 1886                       if ( CmdRequest)
001092 964842rr        6564         MOV.B   ES,#SEG( _CmdRequest )
001096 9908rrrr        6565         MOV.W   R0,#SOF( _CmdRequest )
00109A 8200            6566         MOV.B   R0L,[R0]
00109C F322            6567         BEQ     _266
                       6568 ; rs232cmd.c 1887                       {
                       6569 ; rs232cmd.c 1888                               if ( ParCnt)
00109E 964842rr        6571         MOV.B   ES,#SEG( _ParCnt )
0010A2 9908rrrr        6572         MOV.W   R0,#SOF( _ParCnt )
0010A6 8200            6573         MOV.B   R0L,[R0]
0010A8 F306            6574         BEQ     _263
                       6575 ; rs232cmd.c 1889                                       SCPIError = SyntaxErr;
0010AA 964842rr        6577         MOV.B   ES,#SEG( _SCPIError )
0010AE 9908rrrr        6578         MOV.W   R0,#SOF( _SCPIError )
0010B2 BA03            6579         MOV.W   [R0],#03H
0010B4 D680            6580         RET
0010B4 D680            6580         RET
0010B6                 6581 _263:
                       6582 ; rs232cmd.c 1890                               else
                       6583 ; rs232cmd.c 1891                               {
                       6584 ; rs232cmd.c 1892                                       if ( Settings.ActivePreset)
0010B6 964842rr        6586         MOV.B   ES,#SEG( _Settings )
0010BA 9908rrrr        6587         MOV.W   R0,#SOF( _Settings )
0010BE 8A00            6588         MOV.W   R0,[R0]
0010C0 F305            6589         BEQ     _264
                       6590 ; rs232cmd.c 1893                                               rs232putchar( '0' + Settings.Acti
                            vePreset);
0010C2 910030          6592         ADD.B   R0L,#030H
                       6593         CALL    _rs232putchar
0010C5 C4rrrrrr       +6593 ;       FCALL   _rs232putchar
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 110

ADDR   CODE            LINE SOURCELINE
0010C9 FE07            6594         BR      _265
0010C9 FE0700          6594         BR      _265
0010CC                 6595 _264:
                       6596 ; rs232cmd.c 1894                                       else
                       6597 ; rs232cmd.c 1895                                               rs232puts( "OFF");
0010CC 9918rrrr        6599         MOV.W   R1,#SEG( _262 )
0010D0 9908rrrr        6600         MOV.W   R0,#SOF( _262 )
                       6601         CALL    _rs232puts
0010D4 C4rrrrrr       +6601 ;       FCALL   _rs232puts
0010D4 C4rrrrrr       +6601 ;       FCALL   _rs232puts
0010D8                 6602 _265:
                       6603 ; rs232cmd.c 1896       
                       6604 ; rs232cmd.c 1897                                       rs232putchar( '\n');
0010D8 91080A          6606         MOV.B   R0L,#0AH
                       6607         CALL    _rs232putchar
0010DB C4rrrrrr       +6607 ;       FCALL   _rs232putchar
                       6608 ; rs232cmd.c 1898                               }
                       6609 ; rs232cmd.c 1899                       }
0010DF D680            6611         RET
0010DF D68000          6611         RET
0010E2                 6612 _266:
                       6613 ; rs232cmd.c 1900                       else
                       6614 ; rs232cmd.c 1901                               SCPIError = SyntaxErr;
0010E2 964842rr        6616         MOV.B   ES,#SEG( _SCPIError )
0010E6 9908rrrr        6617         MOV.W   R0,#SOF( _SCPIError )
0010EA BA03            6618         MOV.W   [R0],#03H
                       6619 ; rs232cmd.c 1902               }
0010EC                 6621 _270:
                       6622 ; rs232cmd.c 1903       }
0010EC D680            6624         RET
                       6626 ; rs232cmd.c 1904       
                       6627 ; rs232cmd.c 1905       /************************************************************************
                            **/
                       6628 ; rs232cmd.c 1906       /* GenlockGen                                                            
                                                                                                                             
                                                             RS232CMD.C     */
                       6629 ; rs232cmd.c 1907       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6630 ; rs232cmd.c 1908       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       6631 ; rs232cmd.c 1909       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6632 ; rs232cmd.c 1910       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6633 ; rs232cmd.c 1911       /* Function:    Return the Genlock Configuration.                        
                                                                                                                    */
                       6634 ; rs232cmd.c 1912       /* Remarks:             Request only                                     
                                                                                                                             
                                                                                    */
                       6635 ; rs232cmd.c 1913       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6636 ; rs232cmd.c 1914       /* Updates:       --                                                     
                                                                                                                             
                                                                                                            */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 111

ADDR   CODE            LINE SOURCELINE
                       6637 ; rs232cmd.c 1915       /************************************************************************
                            **/
                       6638 ; rs232cmd.c 1916       void GenlockGen( void)
                       6639 ; rs232cmd.c 1917       {
                       6640         ALIGN   1
                       6642         PUBLIC  _GenlockGen
0010EE                 6643 _GenlockGen:
0010EE 0F30            6647         PUSH.W  R4, R5
                       6651 ; rs232cmd.c 1918               char code *str;
                       6652 ; rs232cmd.c 1919       
                       6653 ; rs232cmd.c 1920               if ( CmdExecute && !SCPIError)
0010F0 964842rr        6655         MOV.B   ES,#SEG( _CmdExecute )
0010F4 9908rrrr        6656         MOV.W   R0,#SOF( _CmdExecute )
0010F8 8200            6657         MOV.B   R0L,[R0]
0010FA F360            6658         BEQ     _278
0010FC 964842rr        6659         MOV.B   ES,#SEG( _SCPIError )
001100 9908rrrr        6660         MOV.W   R0,#SOF( _SCPIError )
001104 8A00            6661         MOV.W   R0,[R0]
001106 F25A            6662         BNE     _278
                       6663 ; rs232cmd.c 1921               {
                       6664 ; rs232cmd.c 1922                       if ( !CmdRequest)
001108 964842rr        6666         MOV.B   ES,#SEG( _CmdRequest )
00110C 9908rrrr        6667         MOV.W   R0,#SOF( _CmdRequest )
001110 8200            6668         MOV.B   R0L,[R0]
001112 F206            6669         BNE     _271
                       6670 ; rs232cmd.c 1923                                       SCPIError = SyntaxErr;
001114 964842rr        6672         MOV.B   ES,#SEG( _SCPIError )
001118 9908rrrr        6673         MOV.W   R0,#SOF( _SCPIError )
00111C BA03            6674         MOV.W   [R0],#03H
00111E FE4E            6675         BR      _278
00111E FE4E            6675         BR      _278
001120                 6676 _271:
                       6677 ; rs232cmd.c 1924                       else
                       6678 ; rs232cmd.c 1925                       {
                       6679 ; rs232cmd.c 1926                               if ( ParCnt)
001120 964842rr        6681         MOV.B   ES,#SEG( _ParCnt )
001124 9908rrrr        6682         MOV.W   R0,#SOF( _ParCnt )
001128 8200            6683         MOV.B   R0L,[R0]
00112A F306            6684         BEQ     _272
                       6685 ; rs232cmd.c 1927                                       SCPIError = ParNotAllowed;
00112C 964842rr        6687         MOV.B   ES,#SEG( _SCPIError )
001130 9908rrrr        6688         MOV.W   R0,#SOF( _SCPIError )
001134 BA06            6689         MOV.W   [R0],#06H
001136 FE42            6690         BR      _278
001136 FE42            6690         BR      _278
001138                 6691 _272:
                       6692 ; rs232cmd.c 1928                               else
                       6693 ; rs232cmd.c 1929                               {
                       6694 ; rs232cmd.c 1930                                       str = GenlockSystemPar[GenlockSetup.Syste
                            m].LongName;
001138 964842rr        6696         MOV.B   ES,#SEG( _GenlockSetup )
00113C 9908rrrr        6697         MOV.W   R0,#SOF( _GenlockSetup )
001140 8200            6698         MOV.B   R0L,[R0]
001142 E8000C          6699         MULU.B  R0L,#0CH
001145 8920            6700         MOV.W   R2,R0
001147 B930            6701         MOVS.W  R3,#00H
001149 9918rrrr        6702         MOV.W   R1,#SEG( _GenlockSystemPar )
00114D 9908rrrr        6703         MOV.W   R0,#SOF( _GenlockSystemPar )
001151 0902            6704         ADD.W   R0,R2
001153 1913            6705         ADDC.W  R1,R3
001155 862C43          6706         MOV.B   CS,R1L
001158 8820            6707         MOVC.W  R2,[R0+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 112

ADDR   CODE            LINE SOURCELINE
00115A 99040000        6708         CMP.W   R0,#00H
00115E F202            6709         BNE     _279
001160 A64143          6710         ADDS.B  CS,#01H
001160 A6414300        6710         ADDS.B  CS,#01H
001164                 6711 _279:
001164 8830            6712         MOVC.W  R3,[R0+]
001166 8953            6713         MOV.W   R5,R3
001168 8942            6714         MOV.W   R4,R2
                       6716 ; rs232cmd.c 1931       
                       6717 ; rs232cmd.c 1932                                       while ( *str)
00116A 866C43          6719         MOV.B   CS,R3L
00116D 8062            6720         MOVC.B  R3L,[R2+]
00116F F312            6721         BEQ     _274
00116F F31200          6721         BEQ     _274
001172                 6722 _273:
                       6723 ; rs232cmd.c 1933                                               rs232putchar( *str++);
001172 8915            6725         MOV.W   R1,R5
001174 8904            6726         MOV.W   R0,R4
001176 862C43          6727         MOV.B   CS,R1L
001179 8020            6728         MOVC.B  R1L,[R0+]
00117B 8102            6729         MOV.B   R0L,R1L
                       6730         CALL    _rs232putchar
00117D C4rrrrrr       +6730 ;       FCALL   _rs232putchar
001181 99400001        6731         ADD.W   R4,#01H
001185 99510000        6732         ADDC.W  R5,#00H
001189 8915            6736         MOV.W   R1,R5
00118B 8904            6737         MOV.W   R0,R4
00118D 862C43          6738         MOV.B   CS,R1L
001190 8020            6739         MOVC.B  R1L,[R0+]
001192 F2EF            6740         BNE     _273
001194                 6742 _274:
                       6743 ; rs232cmd.c 1934       
                       6744 ; rs232cmd.c 1935                                       rs232putchar(',');
001194 91082C          6746         MOV.B   R0L,#02CH
                       6747         CALL    _rs232putchar
001197 C4rrrrrr       +6747 ;       FCALL   _rs232putchar
                       6748 ; rs232cmd.c 1936       
                       6749 ; rs232cmd.c 1937                                       PrintSamplesToFLT( GenlockSetup.System, G
                            enlockSetup.Delay);
00119B 964842rr        6751         MOV.B   ES,#SEG( _GenlockSetup )
00119F 9908rrrr        6752         MOV.W   R0,#SOF( _GenlockSetup )
0011A3 8200            6753         MOV.B   R0L,[R0]
0011A5 964842rr        6754         MOV.B   ES,#SEG( _GenlockSetup+2 )
0011A9 9938rrrr        6755         MOV.W   R3,#SOF( _GenlockSetup+2 )
0011AD 8B23            6756         MOV.W   R2,[R3+]
0011AF 8A33            6757         MOV.W   R3,[R3]
0011B1 C5296E          6758         CALL    _PrintSamplesToFLT
                       6759 ; rs232cmd.c 1938       
                       6760 ; rs232cmd.c 1939                                       rs232putchar ( '\n');
0011B4 91080A          6762         MOV.B   R0L,#0AH
                       6763         CALL    _rs232putchar
0011B7 C4rrrrrr       +6763 ;       FCALL   _rs232putchar
                       6764 ; rs232cmd.c 1940                               }
                       6765 ; rs232cmd.c 1941                       }
                       6766 ; rs232cmd.c 1942               }
0011BC                 6768 _278:
                       6769 ; rs232cmd.c 1943       }
0011BC 2F30            6771         POP.W   R4, R5
0011BE D680            6773         RET
                       6776 ; rs232cmd.c 1944       
                       6777 ; rs232cmd.c 1945       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 113

ADDR   CODE            LINE SOURCELINE
                       6778 ; rs232cmd.c 1946       /* GenlockGenSystem                                                      
                                                                                                                             
                                             RS232CMD.C     */
                       6779 ; rs232cmd.c 1947       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6780 ; rs232cmd.c 1948       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       6781 ; rs232cmd.c 1949       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6782 ; rs232cmd.c 1950       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6783 ; rs232cmd.c 1951       /* Function:    Handle the genlock system command                        
                                                                                                                    */
                       6784 ; rs232cmd.c 1952       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6785 ; rs232cmd.c 1953       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6786 ; rs232cmd.c 1954       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       6787 ; rs232cmd.c 1955       /************************************************************************
                            **/
                       6788 ; rs232cmd.c 1956       void GenlockGenSystem( void)
                       6789 ; rs232cmd.c 1957       {
                       6790         ALIGN   1
                       6792         PUBLIC  _GenlockGenSystem
0011C0                 6793 _GenlockGenSystem:
0011C0 0F30            6797         PUSH.W  R4, R5
                       6803 ; rs232cmd.c 1958               int system;
                       6804 ; rs232cmd.c 1959               char code *str;
                       6805 ; rs232cmd.c 1960       
                       6806 ; rs232cmd.c 1961               if ( CmdExecute && !SCPIError)
0011C2 964842rr        6808         MOV.B   ES,#SEG( _CmdExecute )
0011C6 9908rrrr        6809         MOV.W   R0,#SOF( _CmdExecute )
0011CA 8200            6810         MOV.B   R0L,[R0]
0011CC F36F            6811         BEQ     _291
0011CE 964842rr        6812         MOV.B   ES,#SEG( _SCPIError )
0011D2 9908rrrr        6813         MOV.W   R0,#SOF( _SCPIError )
0011D6 8A00            6814         MOV.W   R0,[R0]
0011D8 F269            6815         BNE     _291
                       6816 ; rs232cmd.c 1962               {
                       6817 ; rs232cmd.c 1963                       if ( CmdRequest)
0011DA 964842rr        6819         MOV.B   ES,#SEG( _CmdRequest )
0011DE 9908rrrr        6820         MOV.W   R0,#SOF( _CmdRequest )
0011E2 8200            6821         MOV.B   R0L,[R0]
0011E4 F33F            6822         BEQ     _283
                       6823 ; rs232cmd.c 1964                       {
                       6824 ; rs232cmd.c 1965                               if ( ParCnt)
0011E6 964842rr        6826         MOV.B   ES,#SEG( _ParCnt )
0011EA 9908rrrr        6827         MOV.W   R0,#SOF( _ParCnt )
0011EE 8200            6828         MOV.B   R0L,[R0]
0011F0 F306            6829         BEQ     _280
                       6830 ; rs232cmd.c 1966                                       SCPIError = ParNotAllowed;
0011F2 964842rr        6832         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 114

ADDR   CODE            LINE SOURCELINE
0011F6 9908rrrr        6833         MOV.W   R0,#SOF( _SCPIError )
0011FA BA06            6834         MOV.W   [R0],#06H
0011FC FE57            6835         BR      _291
0011FC FE57            6835         BR      _291
0011FE                 6836 _280:
                       6837 ; rs232cmd.c 1967                               else
                       6838 ; rs232cmd.c 1968                               {
                       6839 ; rs232cmd.c 1969                                       str = GenlockSystemPar[GenlockSetup.Syste
                            m].LongName;
0011FE 964842rr        6841         MOV.B   ES,#SEG( _GenlockSetup )
001202 9908rrrr        6842         MOV.W   R0,#SOF( _GenlockSetup )
001206 8200            6843         MOV.B   R0L,[R0]
001208 E8000C          6844         MULU.B  R0L,#0CH
00120B 8920            6845         MOV.W   R2,R0
00120D B930            6846         MOVS.W  R3,#00H
00120F 9918rrrr        6847         MOV.W   R1,#SEG( _GenlockSystemPar )
001213 9908rrrr        6848         MOV.W   R0,#SOF( _GenlockSystemPar )
001217 0902            6849         ADD.W   R0,R2
001219 1913            6850         ADDC.W  R1,R3
00121B 862C43          6851         MOV.B   CS,R1L
00121E 8820            6852         MOVC.W  R2,[R0+]
001220 99040000        6853         CMP.W   R0,#00H
001224 F202            6854         BNE     _292
001226 A64143          6855         ADDS.B  CS,#01H
001226 A6414300        6855         ADDS.B  CS,#01H
00122A                 6856 _292:
00122A 8830            6857         MOVC.W  R3,[R0+]
00122C 8953            6858         MOV.W   R5,R3
00122E 8942            6859         MOV.W   R4,R2
                       6861 ; rs232cmd.c 1970       
                       6862 ; rs232cmd.c 1971                                       while ( *str)
001230 866C43          6864         MOV.B   CS,R3L
001233 8062            6865         MOVC.B  R3L,[R2+]
001235 F312            6866         BEQ     _282
001235 F31200          6866         BEQ     _282
001238                 6867 _281:
                       6868 ; rs232cmd.c 1972                                               rs232putchar( *str++);
001238 8915            6870         MOV.W   R1,R5
00123A 8904            6871         MOV.W   R0,R4
00123C 862C43          6872         MOV.B   CS,R1L
00123F 8020            6873         MOVC.B  R1L,[R0+]
001241 8102            6874         MOV.B   R0L,R1L
                       6875         CALL    _rs232putchar
001243 C4rrrrrr       +6875 ;       FCALL   _rs232putchar
001247 99400001        6876         ADD.W   R4,#01H
00124B 99510000        6877         ADDC.W  R5,#00H
00124F 8915            6881         MOV.W   R1,R5
001251 8904            6882         MOV.W   R0,R4
001253 862C43          6883         MOV.B   CS,R1L
001256 8020            6884         MOVC.B  R1L,[R0+]
001258 F2EF            6885         BNE     _281
00125A                 6887 _282:
                       6888 ; rs232cmd.c 1973       
                       6889 ; rs232cmd.c 1974                                       rs232putchar('\n');
00125A 91080A          6891         MOV.B   R0L,#0AH
                       6892         CALL    _rs232putchar
00125D C4rrrrrr       +6892 ;       FCALL   _rs232putchar
                       6893 ; rs232cmd.c 1975                               }
                       6894 ; rs232cmd.c 1976                       }
001261 FE25            6896         BR      _291
001261 FE2500          6896         BR      _291
001264                 6897 _283:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 115

ADDR   CODE            LINE SOURCELINE
                       6898 ; rs232cmd.c 1977                       else
                       6899 ; rs232cmd.c 1978                       {
                       6900 ; rs232cmd.c 1979                               if ( ParCnt != 1)
001264 964842rr        6902         MOV.B   ES,#SEG( _ParCnt )
001268 9908rrrr        6903         MOV.W   R0,#SOF( _ParCnt )
00126C 8200            6904         MOV.B   R0L,[R0]
00126E 910401          6905         CMP.B   R0L,#01H
001271 F307            6906         BEQ     _284
                       6907 ; rs232cmd.c 1980                                       SCPIError = SyntaxErr;
001273 964842rr        6909         MOV.B   ES,#SEG( _SCPIError )
001277 9908rrrr        6910         MOV.W   R0,#SOF( _SCPIError )
00127B BA03            6911         MOV.W   [R0],#03H
00127D FE17            6912         BR      _291
00127D FE1700          6912         BR      _291
001280                 6913 _284:
                       6914 ; rs232cmd.c 1981                               else
                       6915 ; rs232cmd.c 1982                               {
                       6916 ; rs232cmd.c 1983                                       system = FindParameter( Cmd, GenlockSyste
                            mPar);
001280 9918rrrr        6918         MOV.W   R1,#SEG( _Cmd )
001284 9908rrrr        6919         MOV.W   R0,#SOF( _Cmd )
001288 9938rrrr        6920         MOV.W   R3,#SEG( _GenlockSystemPar )
00128C 9928rrrr        6921         MOV.W   R2,#SOF( _GenlockSystemPar )
001290 C52677          6922         CALL    _FindParameter
                       6924 ; rs232cmd.c 1984               
                       6925 ; rs232cmd.c 1985                                       if ( system > -1)
001293 9904FFFF        6927         CMP.W   R0,#0FFFFH
001297 FD04            6928         BLE     _285
                       6929 ; rs232cmd.c 1986                                               SetGenlockSystem( system);
                       6931         CALL    _SetGenlockSystem
001299 C4rrrrrr       +6931 ;       FCALL   _SetGenlockSystem
00129D FE07            6933         BR      _291
00129D FE0700          6933         BR      _291
0012A0                 6934 _285:
                       6935 ; rs232cmd.c 1987                                       else
                       6936 ; rs232cmd.c 1988                                               SCPIError = DataOutOfRange;
0012A0 964842rr        6938         MOV.B   ES,#SEG( _SCPIError )
0012A4 9908rrrr        6939         MOV.W   R0,#SOF( _SCPIError )
0012A8 9A080021        6940         MOV.W   [R0],#021H
                       6941 ; rs232cmd.c 1989                               }
                       6942 ; rs232cmd.c 1990                       }
                       6943 ; rs232cmd.c 1991               }
0012AC                 6945 _291:
                       6946 ; rs232cmd.c 1992       }
0012AC 2F30            6948         POP.W   R4, R5
0012AE D680            6950         RET
                       6953 ; rs232cmd.c 1993       
                       6954 ; rs232cmd.c 1994       /************************************************************************
                            **/
                       6955 ; rs232cmd.c 1995       /* GenlockGenDelay                                                       
                                                                                                                             
                                       RS232CMD.C */
                       6956 ; rs232cmd.c 1996       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6957 ; rs232cmd.c 1997       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       6958 ; rs232cmd.c 1998       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6959 ; rs232cmd.c 1999       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 116

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                       6960 ; rs232cmd.c 2000       /* Function:    Handle the genlock timing command                        
                                                                                                                    */
                       6961 ; rs232cmd.c 2001       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6962 ; rs232cmd.c 2002       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6963 ; rs232cmd.c 2003       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       6964 ; rs232cmd.c 2004       /************************************************************************
                            **/
                       6965 ; rs232cmd.c 2005       void GenlockGenDelay( void)
                       6966 ; rs232cmd.c 2006       {
                       6967         ALIGN   1
                       6969         PUBLIC  _GenlockGenDelay
0012B0                 6970 _GenlockGenDelay:
0012B0 0F30            6974         PUSH.W  R4, R5
0012B2 A978            6976         ADDS.W  R7,#08H
                       6983 ; rs232cmd.c 2007               int field, line;
                       6984 ; rs232cmd.c 2008               float offset;
                       6985 ; rs232cmd.c 2009               long samples;
                       6986 ; rs232cmd.c 2010       
                       6987 ; rs232cmd.c 2011               if ( CmdExecute && !SCPIError)
0012B4 964842rr        6989         MOV.B   ES,#SEG( _CmdExecute )
0012B8 9908rrrr        6990         MOV.W   R0,#SOF( _CmdExecute )
0012BC 8200            6991         MOV.B   R0L,[R0]
0012BE F374            6992         BEQ     _306
0012C0 964842rr        6993         MOV.B   ES,#SEG( _SCPIError )
0012C4 9908rrrr        6994         MOV.W   R0,#SOF( _SCPIError )
0012C8 8A00            6995         MOV.W   R0,[R0]
0012CA F26E            6996         BNE     _306
                       6997 ; rs232cmd.c 2012               {
                       6998 ; rs232cmd.c 2013                       if ( CmdRequest)
0012CC 964842rr        7000         MOV.B   ES,#SEG( _CmdRequest )
0012D0 9908rrrr        7001         MOV.W   R0,#SOF( _CmdRequest )
0012D4 8200            7002         MOV.B   R0L,[R0]
0012D6 F31D            7003         BEQ     _297
                       7004 ; rs232cmd.c 2014                       {
                       7005 ; rs232cmd.c 2015                               if ( ParCnt)
0012D8 964842rr        7007         MOV.B   ES,#SEG( _ParCnt )
0012DC 9908rrrr        7008         MOV.W   R0,#SOF( _ParCnt )
0012E0 8200            7009         MOV.B   R0L,[R0]
0012E2 F306            7010         BEQ     _296
                       7011 ; rs232cmd.c 2016                                       SCPIError = ParNotAllowed;
0012E4 964842rr        7013         MOV.B   ES,#SEG( _SCPIError )
0012E8 9908rrrr        7014         MOV.W   R0,#SOF( _SCPIError )
0012EC BA06            7015         MOV.W   [R0],#06H
0012EE FE5C            7016         BR      _306
0012EE FE5C            7016         BR      _306
0012F0                 7017 _296:
                       7018 ; rs232cmd.c 2017                               else
                       7019 ; rs232cmd.c 2018                               {
                       7020 ; rs232cmd.c 2019                                       PrintSamplesToFLT( GenlockSetup.System, G
                            enlockSetup.Delay);
0012F0 964842rr        7022         MOV.B   ES,#SEG( _GenlockSetup )
0012F4 9908rrrr        7023         MOV.W   R0,#SOF( _GenlockSetup )
0012F8 8200            7024         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 117

ADDR   CODE            LINE SOURCELINE
0012FA 964842rr        7025         MOV.B   ES,#SEG( _GenlockSetup+2 )
0012FE 9938rrrr        7026         MOV.W   R3,#SOF( _GenlockSetup+2 )
001302 8B23            7027         MOV.W   R2,[R3+]
001304 8A33            7028         MOV.W   R3,[R3]
001306 C528C4          7029         CALL    _PrintSamplesToFLT
                       7030 ; rs232cmd.c 2020       
                       7031 ; rs232cmd.c 2021                                       rs232putchar ( '\n');
001309 91080A          7033         MOV.B   R0L,#0AH
                       7034         CALL    _rs232putchar
00130C C4rrrrrr       +7034 ;       FCALL   _rs232putchar
                       7035 ; rs232cmd.c 2022                               }
                       7036 ; rs232cmd.c 2023                       }
001310 FE4B            7038         BR      _306
001310 FE4B            7038         BR      _306
001312                 7039 _297:
                       7040 ; rs232cmd.c 2024                       else
                       7041 ; rs232cmd.c 2025                       {
                       7042 ; rs232cmd.c 2026                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001312 964842rr        7044         MOV.B   ES,#SEG( _ParCnt )
001316 9908rrrr        7045         MOV.W   R0,#SOF( _ParCnt )
00131A 8200            7046         MOV.B   R0L,[R0]
00131C 910403          7047         CMP.B   R0L,#03H
00131F F21F            7048         BNE     _298
001321 9168rr          7049         MOV.B   R3L,#SEG( __lc_bs )
001324 7177            7050         XOR.B   R3H,R3H
001326 8927            7051         MOV.W   R2,R7
001328 91A8rr          7052         MOV.B   R5L,#SEG( __lc_bs )
00132B 71BB            7053         XOR.B   R5H,R5H
00132D 404702          7054         LEA     R4,R7+2
001330 9128rr          7055         MOV.B   R1L,#SEG( __lc_bs )
001333 7133            7056         XOR.B   R1H,R1H
001335 400704          7057         LEA     R0,R7+4
001338 0F03            7058         PUSH.W  R0, R1
00133A 0F30            7060         PUSH.W  R4, R5
00133C 0F0C            7062         PUSH.W  R2, R3
00133E 9938rrrr        7064         MOV.W   R3,#SEG( _295 )
001342 9928rrrr        7065         MOV.W   R2,#SOF( _295 )
001346 0F0C            7066         PUSH.W  R2, R3
001348 9918rrrr        7068         MOV.W   R1,#SEG( _Cmd )
00134C 9908rrrr        7069         MOV.W   R0,#SOF( _Cmd )
                       7070         CALL    _sscanf
001350 C4rrrrrr       +7070 ;       FCALL   _sscanf
001354 99700010        7071         ADD.W   R7,#010H
001358 99040003        7073         CMP.W   R0,#03H
00135C F306            7074         BEQ     _299
00135C F306            7074         BEQ     _299
00135E                 7075 _298:
                       7076 ; rs232cmd.c 2027                                       SCPIError = SyntaxErr;
00135E 964842rr        7078         MOV.B   ES,#SEG( _SCPIError )
001362 9908rrrr        7079         MOV.W   R0,#SOF( _SCPIError )
001366 BA03            7080         MOV.W   [R0],#03H
001368 FE1F            7081         BR      _306
001368 FE1F            7081         BR      _306
00136A                 7082 _299:
                       7083 ; rs232cmd.c 2028                               else
                       7084 ; rs232cmd.c 2029                               {
                       7085 ; rs232cmd.c 2030                                       if (( samples = FLTToSamples( GenlockSetu
                            p.System, field, line, offset)) == -1)
00136A 964842rr        7087         MOV.B   ES,#SEG( _GenlockSetup )
00136E 9908rrrr        7088         MOV.W   R0,#SOF( _GenlockSetup )
001372 8200            7089         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 118

ADDR   CODE            LINE SOURCELINE
001374 8A17            7090         MOV.W   R1,[R7]
001376 8C2702          7091         MOV.W   R2,[R7+2]
001379 8C5706          7092         MOV.W   R5,[R7+6]
00137C 8C4704          7093         MOV.W   R4,[R7+4]
00137F 0F30            7094         PUSH.W  R4, R5
001381 C5264B          7096         CALL    _FLTToSamples
001384 A974            7097         ADDS.W  R7,#04H
001386 8931            7099         MOV.W   R3,R1
001388 8920            7100         MOV.W   R2,R0
00138A 9934FFFF        7101         CMP.W   R3,#0FFFFH
00138E F202            7102         BNE     _309
001390 9924FFFF        7103         CMP.W   R2,#0FFFFH
001390 9924FFFF        7103         CMP.W   R2,#0FFFFH
001394                 7104 _309:
001394 F207            7105         BNE     _300
                       7106 ; rs232cmd.c 2031                                               SCPIError = ExecErr;
001396 964842rr        7108         MOV.B   ES,#SEG( _SCPIError )
00139A 9908rrrr        7109         MOV.W   R0,#SOF( _SCPIError )
00139E 9A08001D        7110         MOV.W   [R0],#01DH
0013A2 FE02            7111         BR      _306
0013A2 FE02            7111         BR      _306
0013A4                 7112 _300:
                       7113 ; rs232cmd.c 2032                                       else
                       7114 ; rs232cmd.c 2033                                               SetGenlockDelay( samples);
                       7116         CALL    _SetGenlockDelay
0013A4 C4rrrrrr       +7116 ;       FCALL   _SetGenlockDelay
                       7117 ; rs232cmd.c 2034                               }
                       7118 ; rs232cmd.c 2035                       }
                       7119 ; rs232cmd.c 2036               }
0013A8                 7121 _306:
                       7122 ; rs232cmd.c 2037       }
0013A8 99700008        7124         ADD.W   R7,#08H
0013AC 2F30            7126         POP.W   R4, R5
0013AE D680            7128         RET
                       7130 ; rs232cmd.c 2038       
                       7131 ; rs232cmd.c 2039       /************************************************************************
                            **/
                       7132 ; rs232cmd.c 2040       /* GenlockGenCalibrateEnable                                             
                                                                                                       RS232CMD.C */
                       7133 ; rs232cmd.c 2041       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7134 ; rs232cmd.c 2042       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7135 ; rs232cmd.c 2043       /* Revised:             000622                                           
                                                                                                                             
                                                                                    */
                       7136 ; rs232cmd.c 2044       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7137 ; rs232cmd.c 2045       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7138 ; rs232cmd.c 2046       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7139 ; rs232cmd.c 2047       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 119

ADDR   CODE            LINE SOURCELINE
                       7140 ; rs232cmd.c 2048       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7141 ; rs232cmd.c 2049       /************************************************************************
                            **/
                       7142 ; rs232cmd.c 2050       void GenlockGenCalibrateEnable( void)
                       7143 ; rs232cmd.c 2051       {
                       7144         ALIGN   1
                       7146         PUBLIC  _GenlockGenCalibrateEnable
0013B0                 7147 _GenlockGenCalibrateEnable:
0013B0 0F30            7151         PUSH.W  R4, R5
                       7157 ; rs232cmd.c 2052               char code *str;
                       7158 ; rs232cmd.c 2053               int tmp;
                       7159 ; rs232cmd.c 2054       
                       7160 ; rs232cmd.c 2055               if ( CmdExecute && !SCPIError)
0013B2 964842rr        7162         MOV.B   ES,#SEG( _CmdExecute )
0013B6 9908rrrr        7163         MOV.W   R0,#SOF( _CmdExecute )
0013BA 8200            7164         MOV.B   R0L,[R0]
                       7165         BEQ     _326
0013BC F202           +7165 ;       BNE     _LG_352
0013BE D500D2         +7165 ;       JMP.L   _326
0013BE D500D200       +7165 ;       JMP.L   _326
0013C2                +7165 _LG_352:
0013C2 964842rr        7166         MOV.B   ES,#SEG( _SCPIError )
0013C6 9908rrrr        7167         MOV.W   R0,#SOF( _SCPIError )
0013CA 8A00            7168         MOV.W   R0,[R0]
                       7169         BNE     _326
0013CC F302           +7169 ;       BEQ     _LG_354
0013CE D500CA         +7169 ;       JMP.L   _326
0013CE D500CA00       +7169 ;       JMP.L   _326
0013D2                +7169 _LG_354:
                       7170 ; rs232cmd.c 2056               {
                       7171 ; rs232cmd.c 2057                       if ( CmdRequest)
0013D2 964842rr        7173         MOV.B   ES,#SEG( _CmdRequest )
0013D6 9908rrrr        7174         MOV.W   R0,#SOF( _CmdRequest )
0013DA 8200            7175         MOV.B   R0L,[R0]
0013DC F340            7176         BEQ     _316
                       7177 ; rs232cmd.c 2058                       {
                       7178 ; rs232cmd.c 2059                               if ( ParCnt)
0013DE 964842rr        7180         MOV.B   ES,#SEG( _ParCnt )
0013E2 9908rrrr        7181         MOV.W   R0,#SOF( _ParCnt )
0013E6 8200            7182         MOV.B   R0L,[R0]
0013E8 F307            7183         BEQ     _313
                       7184 ; rs232cmd.c 2060                                       SCPIError = SyntaxErr;
0013EA 964842rr        7186         MOV.B   ES,#SEG( _SCPIError )
0013EE 9908rrrr        7187         MOV.W   R0,#SOF( _SCPIError )
0013F2 BA03            7188         MOV.W   [R0],#03H
                       7189         BR      _326
0013F4 D500B7         +7189         JMP.L   _326
0013F4 D500B700       +7189         JMP.L   _326
0013F8                 7190 _313:
                       7191 ; rs232cmd.c 2061                               else
                       7192 ; rs232cmd.c 2062                               {
                       7193 ; rs232cmd.c 2063                                       str = OffOnPar[GenlockCalEnable].LongName
                            ;
0013F8 964842rr        7195         MOV.B   ES,#SEG( _GenlockCalEnable )
0013FC 9908rrrr        7196         MOV.W   R0,#SOF( _GenlockCalEnable )
001400 8200            7197         MOV.B   R0L,[R0]
001402 E8000C          7198         MULU.B  R0L,#0CH
001405 8920            7199         MOV.W   R2,R0
001407 B930            7200         MOVS.W  R3,#00H
001409 9918rrrr        7201         MOV.W   R1,#SEG( _OffOnPar )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 120

ADDR   CODE            LINE SOURCELINE
00140D 9908rrrr        7202         MOV.W   R0,#SOF( _OffOnPar )
001411 0902            7203         ADD.W   R0,R2
001413 1913            7204         ADDC.W  R1,R3
001415 862C43          7205         MOV.B   CS,R1L
001418 8820            7206         MOVC.W  R2,[R0+]
00141A 99040000        7207         CMP.W   R0,#00H
00141E F202            7208         BNE     _327
001420 A64143          7209         ADDS.B  CS,#01H
001420 A6414300        7209         ADDS.B  CS,#01H
001424                 7210 _327:
001424 8830            7211         MOVC.W  R3,[R0+]
001426 8953            7212         MOV.W   R5,R3
001428 8942            7213         MOV.W   R4,R2
                       7215 ; rs232cmd.c 2064       
                       7216 ; rs232cmd.c 2065                                       while ( *str)
00142A 866C43          7218         MOV.B   CS,R3L
00142D 8062            7219         MOVC.B  R3L,[R2+]
00142F F312            7220         BEQ     _315
00142F F31200          7220         BEQ     _315
001432                 7221 _314:
                       7222 ; rs232cmd.c 2066                                               rs232putchar( *str++);
001432 8915            7224         MOV.W   R1,R5
001434 8904            7225         MOV.W   R0,R4
001436 862C43          7226         MOV.B   CS,R1L
001439 8020            7227         MOVC.B  R1L,[R0+]
00143B 8102            7228         MOV.B   R0L,R1L
                       7229         CALL    _rs232putchar
00143D C4rrrrrr       +7229 ;       FCALL   _rs232putchar
001441 99400001        7230         ADD.W   R4,#01H
001445 99510000        7231         ADDC.W  R5,#00H
001449 8915            7235         MOV.W   R1,R5
00144B 8904            7236         MOV.W   R0,R4
00144D 862C43          7237         MOV.B   CS,R1L
001450 8020            7238         MOVC.B  R1L,[R0+]
001452 F2EF            7239         BNE     _314
001454                 7241 _315:
                       7242 ; rs232cmd.c 2067       
                       7243 ; rs232cmd.c 2068                                       rs232putchar('\n');
001454 91080A          7245         MOV.B   R0L,#0AH
                       7246         CALL    _rs232putchar
001457 C4rrrrrr       +7246 ;       FCALL   _rs232putchar
                       7247 ; rs232cmd.c 2069                               }
                       7248 ; rs232cmd.c 2070                       }
                       7250         BR      _326
00145B D50083         +7250         JMP.L   _326
00145B D50083         +7250         JMP.L   _326
00145E                 7251 _316:
                       7252 ; rs232cmd.c 2071                       else
                       7253 ; rs232cmd.c 2072                       {
                       7254 ; rs232cmd.c 2073                               if ( ParCnt != 1)
00145E 964842rr        7256         MOV.B   ES,#SEG( _ParCnt )
001462 9908rrrr        7257         MOV.W   R0,#SOF( _ParCnt )
001466 8200            7258         MOV.B   R0L,[R0]
001468 910401          7259         CMP.B   R0L,#01H
00146B F307            7260         BEQ     _317
                       7261 ; rs232cmd.c 2074                                       SCPIError = SyntaxErr;
00146D 964842rr        7263         MOV.B   ES,#SEG( _SCPIError )
001471 9908rrrr        7264         MOV.W   R0,#SOF( _SCPIError )
001475 BA03            7265         MOV.W   [R0],#03H
001477 FE76            7266         BR      _326
001477 FE7600          7266         BR      _326
00147A                 7267 _317:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 121

ADDR   CODE            LINE SOURCELINE
                       7268 ; rs232cmd.c 2075                               else
                       7269 ; rs232cmd.c 2076                               {
                       7270 ; rs232cmd.c 2077                                       tmp = FindParameter( Cmd, OffOnPar);
00147A 9918rrrr        7272         MOV.W   R1,#SEG( _Cmd )
00147E 9908rrrr        7273         MOV.W   R0,#SOF( _Cmd )
001482 9938rrrr        7274         MOV.W   R3,#SEG( _OffOnPar )
001486 9928rrrr        7275         MOV.W   R2,#SOF( _OffOnPar )
00148A C5257A          7276         CALL    _FindParameter
                       7278 ; rs232cmd.c 2078               
                       7279 ; rs232cmd.c 2079                                       if ( tmp > -1)
00148D 9904FFFF        7281         CMP.W   R0,#0FFFFH
001491 FD63            7282         BLE     _319
                       7283 ; rs232cmd.c 2080                                       {
                       7284 ; rs232cmd.c 2081                                               GenlockCalEnable = tmp;
001493 8910            7286         MOV.W   R1,R0
001495 964842rr        7287         MOV.B   ES,#SEG( _GenlockCalEnable )
001499 9928rrrr        7288         MOV.W   R2,#SOF( _GenlockCalEnable )
00149D 822A            7289         MOV.B   [R2],R1L
                       7290 ; rs232cmd.c 2082       
                       7291 ; rs232cmd.c 2083                                               if ( tmp == 0)
00149F 6900            7293         OR.W    R0,R0
0014A1 F219            7294         BNE     _318
                       7295 ; rs232cmd.c 2084                                               {
                       7296 ; rs232cmd.c 2085                                                       SetGenlockSystem( Genlock
                            Setup.System);
0014A3 964842rr        7298         MOV.B   ES,#SEG( _GenlockSetup )
0014A7 9908rrrr        7299         MOV.W   R0,#SOF( _GenlockSetup )
0014AB 8200            7300         MOV.B   R0L,[R0]
0014AD B110            7302         MOVS.B  R0H,#00H
                       7303         CALL    _SetGenlockSystem
0014AF C4rrrrrr       +7303 ;       FCALL   _SetGenlockSystem
                       7304 ; rs232cmd.c 2086       
                       7305 ; rs232cmd.c 2087                                                       SetBBSystem( BBOutput1, B
                            BSetup[BBOutput1].System);
0014B3 964842rr        7307         MOV.B   ES,#SEG( _BBSetup )
0014B7 9908rrrr        7308         MOV.W   R0,#SOF( _BBSetup )
0014BB 8200            7309         MOV.B   R0L,[R0]
0014BD 8120            7310         MOV.B   R1L,R0L
0014BF B130            7311         MOVS.B  R1H,#00H
0014C1 B900            7312         MOV.W   R0,#00H
                       7313         CALL    _SetBBSystem
0014C3 C4rrrrrr       +7313 ;       FCALL   _SetBBSystem
                       7314 ; rs232cmd.c 2088       
                       7315 ; rs232cmd.c 2089                                                       BBControlPort = 0;
0014C7 964842rr        7317         MOV.B   ES,#SEG( _BBControlPort )
0014CB 9908rrrr        7318         MOV.W   R0,#SOF( _BBControlPort )
0014CF BA00            7319         MOV.W   [R0],#00H
                       7320 ; rs232cmd.c 2090                                               }
0014D1 FE49            7322         BR      _326
0014D1 FE4900          7322         BR      _326
0014D4                 7323 _318:
                       7324 ; rs232cmd.c 2091                                               else
                       7325 ; rs232cmd.c 2092                                               {
                       7326 ; rs232cmd.c 2093                                                                                
                                                                                                                             
                                            // Force genlock internal mode
                       7327 ; rs232cmd.c 2094                                                       sio0SndCommand( 12, SPG_V
                            24_address, "GM0");
0014D4 9908000C        7329         MOV.W   R0,#0CH
0014D8 9938rrrr        7330         MOV.W   R3,#SEG( _310 )
0014DC 9928rrrr        7331         MOV.W   R2,#SOF( _310 )
0014E0 0F0C            7332         PUSH.W  R2, R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 122

ADDR   CODE            LINE SOURCELINE
0014E2 99180015        7334         MOV.W   R1,#015H
                       7335         CALL    _sio0SndCommand
0014E6 C4rrrrrr       +7335 ;       FCALL   _sio0SndCommand
0014EA A974            7336         ADDS.W  R7,#04H
                       7338 ; rs232cmd.c 2095       
                       7339 ; rs232cmd.c 2096                                                                                
                                                                                                                             
                                            // Force BB1 PAL mode
                       7340 ; rs232cmd.c 2097                                                       sio0SndCommand( 20, BB_V2
                            4_address, "HG%ld;", BBSetup[BBOutput1].Delay);
0014EC 99180034        7342         MOV.W   R1,#034H
0014F0 964842rr        7343         MOV.B   ES,#SEG( _BBSetup+2 )
0014F4 9938rrrr        7344         MOV.W   R3,#SOF( _BBSetup+2 )
0014F8 8B23            7345         MOV.W   R2,[R3+]
0014FA 8A33            7346         MOV.W   R3,[R3]
0014FC 0F0C            7347         PUSH.W  R2, R3
0014FE 9938rrrr        7349         MOV.W   R3,#SEG( _311 )
001502 9928rrrr        7350         MOV.W   R2,#SOF( _311 )
001506 0F0C            7351         PUSH.W  R2, R3
001508 99080014        7353         MOV.W   R0,#014H
                       7354         CALL    _sio0SndCommand
00150C C4rrrrrr       +7354 ;       FCALL   _sio0SndCommand
001510 99700008        7355         ADD.W   R7,#08H
                       7357 ; rs232cmd.c 2098       
                       7358 ; rs232cmd.c 2099                                                       BBControlPort = 1;       
                                                                                    // Set BB1 to F45MHz
001514 964842rr        7360         MOV.B   ES,#SEG( _BBControlPort )
001518 9908rrrr        7361         MOV.W   R0,#SOF( _BBControlPort )
00151C BA01            7362         MOV.W   [R0],#01H
                       7363 ; rs232cmd.c 2100       
                       7364 ; rs232cmd.c 2101                                                       GenlockCalValue = Calibra
                            tion.GenlockCalibration.DACUserValue;
00151E 964842rr        7366         MOV.B   ES,#SEG( _Calibration+120 )
001522 9908rrrr        7367         MOV.W   R0,#SOF( _Calibration+120 )
001526 8A00            7368         MOV.W   R0,[R0]
001528 964842rr        7369         MOV.B   ES,#SEG( _GenlockCalValue )
00152C 9918rrrr        7370         MOV.W   R1,#SOF( _GenlockCalValue )
001530 8A09            7371         MOV.W   [R1],R0
                       7372 ; rs232cmd.c 2102       
                       7373 ; rs232cmd.c 2103                                                       sio0SndCommand( 20, SPG_V
                            24_address, "GX%d;", GenlockCalValue);
001532 964842rr        7375         MOV.B   ES,#SEG( _GenlockCalValue )
001536 9908rrrr        7376         MOV.W   R0,#SOF( _GenlockCalValue )
00153A 8A00            7377         MOV.W   R0,[R0]
00153C 0F01            7378         PUSH.W  R0
00153E 9918rrrr        7380         MOV.W   R1,#SEG( _312 )
001542 9908rrrr        7381         MOV.W   R0,#SOF( _312 )
001546 0F03            7382         PUSH.W  R0, R1
001548 99080014        7384         MOV.W   R0,#014H
00154C 99180015        7385         MOV.W   R1,#015H
                       7386         CALL    _sio0SndCommand
001550 C4rrrrrr       +7386 ;       FCALL   _sio0SndCommand
001554 A976            7387         ADDS.W  R7,#06H
                       7389 ; rs232cmd.c 2104                                               }
                       7390 ; rs232cmd.c 2105                                       }
001556 FE06            7392         BR      _326
001556 FE06            7392         BR      _326
001558                 7393 _319:
                       7394 ; rs232cmd.c 2106                                       else
                       7395 ; rs232cmd.c 2107                                               SCPIError = DataOutOfRange;
001558 964842rr        7397         MOV.B   ES,#SEG( _SCPIError )
00155C 9908rrrr        7398         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 123

ADDR   CODE            LINE SOURCELINE
001560 9A080021        7399         MOV.W   [R0],#021H
                       7400 ; rs232cmd.c 2108                               }
                       7401 ; rs232cmd.c 2109                       }
                       7402 ; rs232cmd.c 2110               }
001564                 7404 _326:
                       7405 ; rs232cmd.c 2111       }
001564 2F30            7407         POP.W   R4, R5
001566 D680            7409         RET
                       7412 ; rs232cmd.c 2112       
                       7413 ; rs232cmd.c 2113       /************************************************************************
                            **/
                       7414 ; rs232cmd.c 2114       /* GenlockGenCalibrateAdjust                                             
                                                                                                       RS232CMD.C */
                       7415 ; rs232cmd.c 2115       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7416 ; rs232cmd.c 2116       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7417 ; rs232cmd.c 2117       /* Revised:             000622                                           
                                                                                                                             
                                                                                    */
                       7418 ; rs232cmd.c 2118       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7419 ; rs232cmd.c 2119       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7420 ; rs232cmd.c 2120       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7421 ; rs232cmd.c 2121       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7422 ; rs232cmd.c 2122       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7423 ; rs232cmd.c 2123       /************************************************************************
                            **/
                       7424 ; rs232cmd.c 2124       void GenlockGenCalibrateAdjust( void)
                       7425 ; rs232cmd.c 2125       {
                       7426         ALIGN   1
                       7428         PUBLIC  _GenlockGenCalibrateAdjust
001568                 7429 _GenlockGenCalibrateAdjust:
001568 0F30            7433         PUSH.W  R4, R5
                       7441 ; rs232cmd.c 2126               int tmp;
                       7442 ; rs232cmd.c 2127               UI MinVal, MaxVal;
                       7443 ; rs232cmd.c 2128       
                       7444 ; rs232cmd.c 2129               if ( CmdExecute && !SCPIError)
00156A 964842rr        7446         MOV.B   ES,#SEG( _CmdExecute )
00156E 9908rrrr        7447         MOV.W   R0,#SOF( _CmdExecute )
001572 8200            7448         MOV.B   R0L,[R0]
                       7449         BEQ     _346
001574 F202           +7449 ;       BNE     _LG_372
001576 D5009D         +7449 ;       JMP.L   _346
001576 D5009D00       +7449 ;       JMP.L   _346
00157A                +7449 _LG_372:
00157A 964842rr        7450         MOV.B   ES,#SEG( _SCPIError )
00157E 9908rrrr        7451         MOV.W   R0,#SOF( _SCPIError )
001582 8A00            7452         MOV.W   R0,[R0]
                       7453         BNE     _346
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 124

ADDR   CODE            LINE SOURCELINE
001584 F302           +7453 ;       BEQ     _LG_374
001586 D50095         +7453 ;       JMP.L   _346
001586 D5009500       +7453 ;       JMP.L   _346
00158A                +7453 _LG_374:
                       7454 ; rs232cmd.c 2130               {
                       7455 ; rs232cmd.c 2131                       if ( CmdRequest)
00158A 964842rr        7457         MOV.B   ES,#SEG( _CmdRequest )
00158E 9908rrrr        7458         MOV.W   R0,#SOF( _CmdRequest )
001592 8200            7459         MOV.B   R0L,[R0]
001594 F307            7460         BEQ     _331
                       7461 ; rs232cmd.c 2132                               SCPIError = SyntaxErr;
001596 964842rr        7463         MOV.B   ES,#SEG( _SCPIError )
00159A 9908rrrr        7464         MOV.W   R0,#SOF( _SCPIError )
00159E BA03            7465         MOV.W   [R0],#03H
                       7466         BR      _346
0015A0 D50088         +7466         JMP.L   _346
0015A0 D5008800       +7466         JMP.L   _346
0015A4                 7467 _331:
                       7468 ; rs232cmd.c 2133                       else
                       7469 ; rs232cmd.c 2134                       {
                       7470 ; rs232cmd.c 2135                               if ( ParCnt == 0)
0015A4 964842rr        7472         MOV.B   ES,#SEG( _ParCnt )
0015A8 9908rrrr        7473         MOV.W   R0,#SOF( _ParCnt )
0015AC 8200            7474         MOV.B   R0L,[R0]
0015AE F206            7475         BNE     _332
                       7476 ; rs232cmd.c 2136                                       SCPIError = SyntaxErr;
0015B0 964842rr        7478         MOV.B   ES,#SEG( _SCPIError )
0015B4 9908rrrr        7479         MOV.W   R0,#SOF( _SCPIError )
0015B8 BA03            7480         MOV.W   [R0],#03H
0015BA FE7B            7481         BR      _346
0015BA FE7B            7481         BR      _346
0015BC                 7482 _332:
                       7483 ; rs232cmd.c 2137                               else
                       7484 ; rs232cmd.c 2138                               {
                       7485 ; rs232cmd.c 2139                                       MinVal = Calibration.GenlockCalibration.D
                            ACFactValue - 150;
0015BC 964842rr        7487         MOV.B   ES,#SEG( _Calibration+118 )
0015C0 9908rrrr        7488         MOV.W   R0,#SOF( _Calibration+118 )
0015C4 8A00            7489         MOV.W   R0,[R0]
0015C6 8950            7490         MOV.W   R5,R0
0015C8 8945            7491         MOV.W   R4,R5
0015CA 99520096        7492         SUB.W   R5,#096H
                       7494 ; rs232cmd.c 2140                                       MaxVal = Calibration.GenlockCalibration.D
                            ACFactValue + 150;
0015CE 99400096        7496         ADD.W   R4,#096H
                       7498 ; rs232cmd.c 2141       
                       7499 ; rs232cmd.c 2142                                       tmp = FindParameter( Cmd, MinMaxPar);
0015D2 9938rrrr        7501         MOV.W   R3,#SEG( _MinMaxPar )
0015D6 9928rrrr        7502         MOV.W   R2,#SOF( _MinMaxPar )
0015DA 9918rrrr        7503         MOV.W   R1,#SEG( _Cmd )
0015DE 9908rrrr        7504         MOV.W   R0,#SOF( _Cmd )
0015E2 C524CE          7505         CALL    _FindParameter
                       7507 ; rs232cmd.c 2143               
                       7508 ; rs232cmd.c 2144                                       if ( tmp > -1)
0015E5 9904FFFF        7510         CMP.W   R0,#0FFFFH
0015E9 FD21            7511         BLE     _335
                       7512 ; rs232cmd.c 2145                                       {
                       7513 ; rs232cmd.c 2146                                               if ( tmp == 0)
0015EB 6900            7515         OR.W    R0,R0
0015ED F207            7516         BNE     _333
                       7517 ; rs232cmd.c 2147                                                       GenlockCalValue = MaxVal;
                            
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 125

ADDR   CODE            LINE SOURCELINE
0015EF 964842rr        7519         MOV.B   ES,#SEG( _GenlockCalValue )
0015F3 9908rrrr        7520         MOV.W   R0,#SOF( _GenlockCalValue )
0015F7 8A48            7521         MOV.W   [R0],R4
0015F9 FE06            7522         BR      _334
0015F9 FE0600          7522         BR      _334
0015FC                 7523 _333:
                       7525 ; rs232cmd.c 2148                                               else
                       7526 ; rs232cmd.c 2149                                                       GenlockCalValue = MinVal;
                            
0015FC 964842rr        7528         MOV.B   ES,#SEG( _GenlockCalValue )
001600 9908rrrr        7529         MOV.W   R0,#SOF( _GenlockCalValue )
001604 8A58            7530         MOV.W   [R0],R5
001604 8A58            7530         MOV.W   [R0],R5
001606                 7531 _334:
                       7532 ; rs232cmd.c 2150       
                       7533 ; rs232cmd.c 2151                                               sio0SndCommand( 20, SPG_V24_addre
                            ss, "GX%u;", GenlockCalValue);  
001606 99080014        7535         MOV.W   R0,#014H
00160A 99180015        7537         MOV.W   R1,#015H
00160E 964842rr        7538         MOV.B   ES,#SEG( _GenlockCalValue )
001612 9928rrrr        7539         MOV.W   R2,#SOF( _GenlockCalValue )
001616 8A22            7540         MOV.W   R2,[R2]
001618 0F04            7541         PUSH.W  R2
00161A 9938rrrr        7543         MOV.W   R3,#SEG( _330 )
00161E 9928rrrr        7544         MOV.W   R2,#SOF( _330 )
001622 0F0C            7545         PUSH.W  R2, R3
                       7547         CALL    _sio0SndCommand
001624 C4rrrrrr       +7547 ;       FCALL   _sio0SndCommand
001628 A976            7548         ADDS.W  R7,#06H
                       7550 ; rs232cmd.c 2152                                       }
00162A FE43            7552         BR      _346
00162A FE43            7552         BR      _346
00162C                 7553 _335:
                       7555 ; rs232cmd.c 2153                                       else
                       7556 ; rs232cmd.c 2154                                       {
                       7557 ; rs232cmd.c 2155                                               tmp = FindParameter( Cmd, UpDownP
                            ar);
00162C 9938rrrr        7559         MOV.W   R3,#SEG( _UpDownPar )
001630 9928rrrr        7560         MOV.W   R2,#SOF( _UpDownPar )
001634 9918rrrr        7561         MOV.W   R1,#SEG( _Cmd )
001638 9908rrrr        7562         MOV.W   R0,#SOF( _Cmd )
00163C C524A1          7563         CALL    _FindParameter
                       7565 ; rs232cmd.c 2156       
                       7566 ; rs232cmd.c 2157                                               if ( tmp > -1)
00163F 9904FFFF        7568         CMP.W   R0,#0FFFFH
001643 FD31            7569         BLE     _340
                       7570 ; rs232cmd.c 2158                                               {
                       7571 ; rs232cmd.c 2159                                                       if ( tmp == 0)
001645 6900            7573         OR.W    R0,R0
001647 F20F            7574         BNE     _336
                       7575 ; rs232cmd.c 2160                                                       {
                       7576 ; rs232cmd.c 2161                                                               if ( GenlockCalVa
                            lue > MinVal)
001649 964842rr        7578         MOV.B   ES,#SEG( _GenlockCalValue )
00164D 9908rrrr        7579         MOV.W   R0,#SOF( _GenlockCalValue )
001651 8A00            7580         MOV.W   R0,[R0]
001653 4905            7582         CMP.W   R0,R5
001655 F915            7583         BL      _339
                       7584 ; rs232cmd.c 2162                                                                       GenlockCa
                            lValue--;
001657 A90F            7586         ADDS.W  R0,#0FH
001659 964842rr        7587         MOV.B   ES,#SEG( _GenlockCalValue )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 126

ADDR   CODE            LINE SOURCELINE
00165D 9918rrrr        7588         MOV.W   R1,#SOF( _GenlockCalValue )
001661 8A09            7589         MOV.W   [R1],R0
                       7590 ; rs232cmd.c 2163                                                       }
001663 FE0E            7592         BR      _339
001663 FE0E00          7592         BR      _339
001666                 7593 _336:
                       7594 ; rs232cmd.c 2164                                                       else
                       7595 ; rs232cmd.c 2165                                                       {
                       7596 ; rs232cmd.c 2166                                                               if ( GenlockCalVa
                            lue < MaxVal)
001666 964842rr        7598         MOV.B   ES,#SEG( _GenlockCalValue )
00166A 9908rrrr        7599         MOV.W   R0,#SOF( _GenlockCalValue )
00166E 8A00            7600         MOV.W   R0,[R0]
001670 4904            7601         CMP.W   R0,R4
001672 F006            7602         BCC     _339
                       7603 ; rs232cmd.c 2167                                                                       GenlockCa
                            lValue++;
001674 A901            7605         ADDS.W  R0,#01H
001676 964842rr        7606         MOV.B   ES,#SEG( _GenlockCalValue )
00167A 9918rrrr        7607         MOV.W   R1,#SOF( _GenlockCalValue )
00167E 8A09            7608         MOV.W   [R1],R0
                       7609 ; rs232cmd.c 2168                                                       }
001680                 7611 _339:
                       7612 ; rs232cmd.c 2169       
                       7613 ; rs232cmd.c 2170                                                       sio0SndCommand( 20, SPG_V
                            24_address, "GX%u;", GenlockCalValue);
001680 99080014        7615         MOV.W   R0,#014H
001684 99180015        7616         MOV.W   R1,#015H
001688 964842rr        7617         MOV.B   ES,#SEG( _GenlockCalValue )
00168C 9928rrrr        7618         MOV.W   R2,#SOF( _GenlockCalValue )
001690 8A22            7619         MOV.W   R2,[R2]
001692 0F04            7620         PUSH.W  R2
001694 9938rrrr        7622         MOV.W   R3,#SEG( _330 )
001698 9928rrrr        7623         MOV.W   R2,#SOF( _330 )
00169C 0F0C            7624         PUSH.W  R2, R3
                       7626         CALL    _sio0SndCommand
00169E C4rrrrrr       +7626 ;       FCALL   _sio0SndCommand
0016A2 A976            7627         ADDS.W  R7,#06H
                       7629 ; rs232cmd.c 2171                                               }
0016A4 FE06            7631         BR      _346
0016A4 FE06            7631         BR      _346
0016A6                 7632 _340:
                       7633 ; rs232cmd.c 2172                                               else
                       7634 ; rs232cmd.c 2173                                                       SCPIError = DataOutOfRang
                            e;
0016A6 964842rr        7636         MOV.B   ES,#SEG( _SCPIError )
0016AA 9908rrrr        7637         MOV.W   R0,#SOF( _SCPIError )
0016AE 9A080021        7638         MOV.W   [R0],#021H
                       7639 ; rs232cmd.c 2174                                       }       
                       7640 ; rs232cmd.c 2175                               }
                       7641 ; rs232cmd.c 2176                       }
                       7642 ; rs232cmd.c 2177               }
0016B2                 7644 _346:
                       7645 ; rs232cmd.c 2178       }
0016B2 2F30            7647         POP.W   R4, R5
0016B4 D680            7649         RET
                       7651 ; rs232cmd.c 2179       
                       7652 ; rs232cmd.c 2180       /************************************************************************
                            **/
                       7653 ; rs232cmd.c 2181       /* GenlockGenCalibrateStore                                              
                                                                                                       RS232CMD.C */
                       7654 ; rs232cmd.c 2182       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 127

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                       7655 ; rs232cmd.c 2183       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7656 ; rs232cmd.c 2184       /* Revised:             000622                                           
                                                                                                                             
                                                                                    */
                       7657 ; rs232cmd.c 2185       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7658 ; rs232cmd.c 2186       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7659 ; rs232cmd.c 2187       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7660 ; rs232cmd.c 2188       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7661 ; rs232cmd.c 2189       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7662 ; rs232cmd.c 2190       /************************************************************************
                            **/
                       7663 ; rs232cmd.c 2191       void GenlockGenCalibrateStore( void)
                       7664 ; rs232cmd.c 2192       {
                       7665         ALIGN   1
                       7667         PUBLIC  _GenlockGenCalibrateStore
0016B6                 7668 _GenlockGenCalibrateStore:
                       7672 ; rs232cmd.c 2193               if ( CmdExecute && !SCPIError)
0016B6 964842rr        7674         MOV.B   ES,#SEG( _CmdExecute )
0016BA 9908rrrr        7675         MOV.W   R0,#SOF( _CmdExecute )
0016BE 8200            7676         MOV.B   R0L,[R0]
0016C0 F342            7677         BEQ     _358
0016C2 964842rr        7678         MOV.B   ES,#SEG( _SCPIError )
0016C6 9908rrrr        7679         MOV.W   R0,#SOF( _SCPIError )
0016CA 8A00            7680         MOV.W   R0,[R0]
0016CC F23C            7681         BNE     _358
                       7682 ; rs232cmd.c 2194               {
                       7683 ; rs232cmd.c 2195                       if ( CmdRequest)
0016CE 964842rr        7685         MOV.B   ES,#SEG( _CmdRequest )
0016D2 9908rrrr        7686         MOV.W   R0,#SOF( _CmdRequest )
0016D6 8200            7687         MOV.B   R0L,[R0]
0016D8 F306            7688         BEQ     _351
                       7689 ; rs232cmd.c 2196                                       SCPIError = SyntaxErr;
0016DA 964842rr        7691         MOV.B   ES,#SEG( _SCPIError )
0016DE 9908rrrr        7692         MOV.W   R0,#SOF( _SCPIError )
0016E2 BA03            7693         MOV.W   [R0],#03H
0016E4 D680            7694         RET
0016E4 D680            7694         RET
0016E6                 7695 _351:
                       7696 ; rs232cmd.c 2197                       else
                       7697 ; rs232cmd.c 2198                       {
                       7698 ; rs232cmd.c 2199                               if ( ParCnt)
0016E6 964842rr        7700         MOV.B   ES,#SEG( _ParCnt )
0016EA 9908rrrr        7701         MOV.W   R0,#SOF( _ParCnt )
0016EE 8200            7702         MOV.B   R0L,[R0]
0016F0 F306            7703         BEQ     _352
                       7704 ; rs232cmd.c 2200                                       SCPIError = ParNotAllowed;
0016F2 964842rr        7706         MOV.B   ES,#SEG( _SCPIError )
0016F6 9908rrrr        7707         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 128

ADDR   CODE            LINE SOURCELINE
0016FA BA06            7708         MOV.W   [R0],#06H
0016FC D680            7709         RET
0016FC D680            7709         RET
0016FE                 7710 _352:
                       7711 ; rs232cmd.c 2201                               else
                       7712 ; rs232cmd.c 2202                               {
                       7713 ; rs232cmd.c 2203                                       if ( GenlockCalEnable)
0016FE 964842rr        7715         MOV.B   ES,#SEG( _GenlockCalEnable )
001702 9908rrrr        7716         MOV.W   R0,#SOF( _GenlockCalEnable )
001706 8200            7717         MOV.B   R0L,[R0]
001708 F318            7718         BEQ     _353
                       7719 ; rs232cmd.c 2204                                       {
                       7720 ; rs232cmd.c 2205                                               Calibration.GenlockCalibration.DA
                            CUserValue = GenlockCalValue;
00170A 964842rr        7722         MOV.B   ES,#SEG( _GenlockCalValue )
00170E 9908rrrr        7723         MOV.W   R0,#SOF( _GenlockCalValue )
001712 8A00            7724         MOV.W   R0,[R0]
001714 964842rr        7725         MOV.B   ES,#SEG( _Calibration+120 )
001718 9918rrrr        7726         MOV.W   R1,#SOF( _Calibration+120 )
00171C 8A09            7727         MOV.W   [R1],R0
                       7728 ; rs232cmd.c 2206                                                               
                       7729 ; rs232cmd.c 2207                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
00171E 9918rrrr        7731         MOV.W   R1,#SEG( _Calibration )
001722 9908rrrr        7732         MOV.W   R0,#SOF( _Calibration )
001726 964842rr        7733         MOV.B   ES,#SEG( _CalibrationPtr )
00172A 9928rrrr        7734         MOV.W   R2,#SOF( _CalibrationPtr )
00172E 8A22            7735         MOV.W   R2,[R2]
001730 993800E0        7736         MOV.W   R3,#0E0H
                       7737         CALL    _NV_Store
001734 C4rrrrrr       +7737 ;       FCALL   _NV_Store
                       7738 ; rs232cmd.c 2208                                       }
001738 D680            7740         RET
001738 D680            7740         RET
00173A                 7741 _353:
                       7742 ; rs232cmd.c 2209                                       else
                       7743 ; rs232cmd.c 2210                                               SCPIError = ExecErr;             
                                                    
00173A 964842rr        7745         MOV.B   ES,#SEG( _SCPIError )
00173E 9908rrrr        7746         MOV.W   R0,#SOF( _SCPIError )
001742 9A08001D        7747         MOV.W   [R0],#01DH
                       7748 ; rs232cmd.c 2211                               }
                       7749 ; rs232cmd.c 2212                       }
                       7750 ; rs232cmd.c 2213               }
001746                 7752 _358:
                       7753 ; rs232cmd.c 2214       }
001746 D680            7755         RET
                       7757 ; rs232cmd.c 2215       
                       7758 ; rs232cmd.c 2216       /************************************************************************
                            **/
                       7759 ; rs232cmd.c 2217       /* BBSuffix                                                              
                                                                                                                             
                                                               RS232CMD.C   */
                       7760 ; rs232cmd.c 2218       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7761 ; rs232cmd.c 2219       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 129

ADDR   CODE            LINE SOURCELINE
                       7762 ; rs232cmd.c 2220       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7763 ; rs232cmd.c 2221       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7764 ; rs232cmd.c 2222       /* Function:    Get suffix of the Black Burst generator                  
                                                                                            */
                       7765 ; rs232cmd.c 2223       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7766 ; rs232cmd.c 2224       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7767 ; rs232cmd.c 2225       /* Updates:             Suffix                                           
                                                                                                                             
                                                                                                    */
                       7768 ; rs232cmd.c 2226       /************************************************************************
                            **/
                       7769 ; rs232cmd.c 2227       void BBGenSuffix( void)
                       7770 ; rs232cmd.c 2228       {
                       7771         ALIGN   1
                       7773         PUBLIC  _BBGenSuffix
001748                 7774 _BBGenSuffix:
                       7778 ; rs232cmd.c 2229               if ( NumSuffix > 3)
001748 964842rr        7780         MOV.B   ES,#SEG( _NumSuffix )
00174C 9908rrrr        7781         MOV.W   R0,#SOF( _NumSuffix )
001750 8A00            7782         MOV.W   R0,[R0]
001752 99040003        7783         CMP.W   R0,#03H
001756 F907            7784         BL      _359
                       7785 ; rs232cmd.c 2230                       SCPIError = HdrSuffixOutOfRange;
001758 964842rr        7787         MOV.B   ES,#SEG( _SCPIError )
00175C 9908rrrr        7788         MOV.W   R0,#SOF( _SCPIError )
001760 9A08000C        7789         MOV.W   [R0],#0CH
001764 D680            7790         RET
001764 D680            7790         RET
001766                 7791 _359:
                       7792 ; rs232cmd.c 2231               else
                       7793 ; rs232cmd.c 2232                       Suffix[0] = NumSuffix-1;
001766 A90F            7795         ADDS.W  R0,#0FH
001768 964842rr        7796         MOV.B   ES,#SEG( _Suffix )
00176C 9918rrrr        7797         MOV.W   R1,#SOF( _Suffix )
001770 8A09            7798         MOV.W   [R1],R0
001770 8A09            7798         MOV.W   [R1],R0
001772                 7799 _360:
                       7800 ; rs232cmd.c 2233       
                       7801 ; rs232cmd.c 2234       }
001772 D680            7803         RET
                       7805 ; rs232cmd.c 2235       
                       7806 ; rs232cmd.c 2236       /************************************************************************
                            **/
                       7807 ; rs232cmd.c 2237       /* BBGen                                                                 
                                                                                                                             
                                                                         RS232CMD.C */
                       7808 ; rs232cmd.c 2238       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7809 ; rs232cmd.c 2239       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 130

ADDR   CODE            LINE SOURCELINE
                       7810 ; rs232cmd.c 2240       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7811 ; rs232cmd.c 2241       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7812 ; rs232cmd.c 2242       /* Function:    Handle the Black Burst command.                          
                                                                                                                    */
                       7813 ; rs232cmd.c 2243       /* Remarks:             Request only                                     
                                                                                                                             
                                                                                    */
                       7814 ; rs232cmd.c 2244       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7815 ; rs232cmd.c 2245       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7816 ; rs232cmd.c 2246       /************************************************************************
                            **/
                       7817 ; rs232cmd.c 2247       void BBGen( void)
                       7818 ; rs232cmd.c 2248       {
                       7819         ALIGN   1
                       7821         PUBLIC  _BBGen
001774                 7822 _BBGen:
001774 0F30            7826         PUSH.W  R4, R5
                       7830 ; rs232cmd.c 2249               char code *str;
                       7831 ; rs232cmd.c 2250       
                       7832 ; rs232cmd.c 2251               if ( CmdExecute && !SCPIError)
001776 964842rr        7834         MOV.B   ES,#SEG( _CmdExecute )
00177A 9908rrrr        7835         MOV.W   R0,#SOF( _CmdExecute )
00177E 8200            7836         MOV.B   R0L,[R0]
                       7837         BEQ     _370
001780 F202           +7837 ;       BNE     _LG_404
001782 D50081         +7837 ;       JMP.L   _370
001782 D5008100       +7837 ;       JMP.L   _370
001786                +7837 _LG_404:
001786 964842rr        7838         MOV.B   ES,#SEG( _SCPIError )
00178A 9908rrrr        7839         MOV.W   R0,#SOF( _SCPIError )
00178E 8A00            7840         MOV.W   R0,[R0]
001790 F27A            7841         BNE     _370
                       7842 ; rs232cmd.c 2252               {
                       7843 ; rs232cmd.c 2253                       if ( !CmdRequest)
001792 964842rr        7845         MOV.B   ES,#SEG( _CmdRequest )
001796 9908rrrr        7846         MOV.W   R0,#SOF( _CmdRequest )
00179A 8200            7847         MOV.B   R0L,[R0]
00179C F206            7848         BNE     _363
                       7849 ; rs232cmd.c 2254                                       SCPIError = SyntaxErr;
00179E 964842rr        7851         MOV.B   ES,#SEG( _SCPIError )
0017A2 9908rrrr        7852         MOV.W   R0,#SOF( _SCPIError )
0017A6 BA03            7853         MOV.W   [R0],#03H
0017A8 FE6E            7854         BR      _370
0017A8 FE6E            7854         BR      _370
0017AA                 7855 _363:
                       7856 ; rs232cmd.c 2255                       else
                       7857 ; rs232cmd.c 2256                       {
                       7858 ; rs232cmd.c 2257                               if ( ParCnt)
0017AA 964842rr        7860         MOV.B   ES,#SEG( _ParCnt )
0017AE 9908rrrr        7861         MOV.W   R0,#SOF( _ParCnt )
0017B2 8200            7862         MOV.B   R0L,[R0]
0017B4 F306            7863         BEQ     _364
                       7864 ; rs232cmd.c 2258                                       SCPIError = ParNotAllowed;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 131

ADDR   CODE            LINE SOURCELINE
0017B6 964842rr        7866         MOV.B   ES,#SEG( _SCPIError )
0017BA 9908rrrr        7867         MOV.W   R0,#SOF( _SCPIError )
0017BE BA06            7868         MOV.W   [R0],#06H
0017C0 FE62            7869         BR      _370
0017C0 FE62            7869         BR      _370
0017C2                 7870 _364:
                       7871 ; rs232cmd.c 2259                               else
                       7872 ; rs232cmd.c 2260                               {
                       7873 ; rs232cmd.c 2261                                       str = SystemPar[BBSetup[Suffix[0]].System
                            ].LongName;
0017C2 964842rr        7875         MOV.B   ES,#SEG( _Suffix )
0017C6 9908rrrr        7876         MOV.W   R0,#SOF( _Suffix )
0017CA 8A00            7877         MOV.W   R0,[R0]
0017CC D903            7878         ASL.W   R0,#03H
0017CE B910            7879         MOVS.W  R1,#00H
0017D0 964842rr        7880         MOV.B   ES,#SEG( _BBSetup )
0017D4 8500rrrr        7881         MOV.B   R0L,[R0+SOF( _BBSetup )]
0017D8 E8000C          7882         MULU.B  R0L,#0CH
0017DB 8920            7883         MOV.W   R2,R0
0017DD B930            7884         MOVS.W  R3,#00H
0017DF 9918rrrr        7885         MOV.W   R1,#SEG( _SystemPar )
0017E3 9908rrrr        7886         MOV.W   R0,#SOF( _SystemPar )
0017E7 0902            7887         ADD.W   R0,R2
0017E9 1913            7888         ADDC.W  R1,R3
0017EB 862C43          7889         MOV.B   CS,R1L
0017EE 8820            7890         MOVC.W  R2,[R0+]
0017F0 99040000        7891         CMP.W   R0,#00H
0017F4 F202            7892         BNE     _371
0017F6 A64143          7893         ADDS.B  CS,#01H
0017F6 A6414300        7893         ADDS.B  CS,#01H
0017FA                 7894 _371:
0017FA 8830            7895         MOVC.W  R3,[R0+]
0017FC 8953            7896         MOV.W   R5,R3
0017FE 8942            7897         MOV.W   R4,R2
                       7899 ; rs232cmd.c 2262       
                       7900 ; rs232cmd.c 2263                                       while ( *str)
001800 866C43          7902         MOV.B   CS,R3L
001803 8062            7903         MOVC.B  R3L,[R2+]
001805 F312            7904         BEQ     _366
001805 F31200          7904         BEQ     _366
001808                 7905 _365:
                       7906 ; rs232cmd.c 2264                                               rs232putchar( *str++);
001808 8915            7908         MOV.W   R1,R5
00180A 8904            7909         MOV.W   R0,R4
00180C 862C43          7910         MOV.B   CS,R1L
00180F 8020            7911         MOVC.B  R1L,[R0+]
001811 8102            7912         MOV.B   R0L,R1L
                       7913         CALL    _rs232putchar
001813 C4rrrrrr       +7913 ;       FCALL   _rs232putchar
001817 99400001        7914         ADD.W   R4,#01H
00181B 99510000        7915         ADDC.W  R5,#00H
00181F 8915            7919         MOV.W   R1,R5
001821 8904            7920         MOV.W   R0,R4
001823 862C43          7921         MOV.B   CS,R1L
001826 8020            7922         MOVC.B  R1L,[R0+]
001828 F2EF            7923         BNE     _365
00182A                 7925 _366:
                       7926 ; rs232cmd.c 2265       
                       7927 ; rs232cmd.c 2266                                       rs232putchar( ',');
00182A 91082C          7929         MOV.B   R0L,#02CH
                       7930         CALL    _rs232putchar
00182D C4rrrrrr       +7930 ;       FCALL   _rs232putchar
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 132

ADDR   CODE            LINE SOURCELINE
                       7931 ; rs232cmd.c 2267       
                       7932 ; rs232cmd.c 2268                                       PrintSamplesToFLT( BBSetup[Suffix[0]].Sys
                            tem, BBSetup[Suffix[0]].Delay);
001831 964842rr        7934         MOV.B   ES,#SEG( _Suffix )
001835 9928rrrr        7935         MOV.W   R2,#SOF( _Suffix )
001839 8A22            7936         MOV.W   R2,[R2]
00183B D923            7937         ASL.W   R2,#03H
00183D 8902            7938         MOV.W   R0,R2
00183F B910            7939         MOVS.W  R1,#00H
001841 964842rr        7940         MOV.B   ES,#SEG( _BBSetup )
001845 8500rrrr        7941         MOV.B   R0L,[R0+SOF( _BBSetup )]
001849 B930            7942         MOVS.W  R3,#00H
00184B 964842rr        7943         MOV.B   ES,#SEG( _BBSetup+2 )
00184F 8D32rrrr        7944         MOV.W   R3,[R2+SOF( _BBSetup+4 )]
001853 8D22rrrr        7945         MOV.W   R2,[R2+SOF( _BBSetup+2 )]
001857 C5261B          7946         CALL    _PrintSamplesToFLT
                       7947 ; rs232cmd.c 2269       
                       7948 ; rs232cmd.c 2270                                       rs232printf( 6, ",%d\n", BBSetup[Suffix[0
                            ]].ScHPhase);
00185A B906            7950         MOV.W   R0,#06H
00185C 964842rr        7951         MOV.B   ES,#SEG( _Suffix )
001860 9918rrrr        7952         MOV.W   R1,#SOF( _Suffix )
001864 8A11            7953         MOV.W   R1,[R1]
001866 D913            7954         ASL.W   R1,#03H
001868 8921            7955         MOV.W   R2,R1
00186A B930            7956         MOVS.W  R3,#00H
00186C 964842rr        7957         MOV.B   ES,#SEG( _BBSetup+6 )
001870 8D12rrrr        7958         MOV.W   R1,[R2+SOF( _BBSetup+6 )]
001874 0F02            7959         PUSH.W  R1
001876 9938rrrr        7961         MOV.W   R3,#SEG( _362 )
00187A 9928rrrr        7962         MOV.W   R2,#SOF( _362 )
00187E 0F0C            7963         PUSH.W  R2, R3
                       7965         CALL    _rs232printf
001880 C4rrrrrr       +7965 ;       FCALL   _rs232printf
001884 A976            7966         ADDS.W  R7,#06H
                       7968 ; rs232cmd.c 2271                               }
                       7969 ; rs232cmd.c 2272                       }
                       7970 ; rs232cmd.c 2273               }
001886                 7972 _370:
                       7973 ; rs232cmd.c 2274       }
001886 2F30            7975         POP.W   R4, R5
001888 D680            7977         RET
                       7980 ; rs232cmd.c 2275       
                       7981 ; rs232cmd.c 2276       /************************************************************************
                            **/
                       7982 ; rs232cmd.c 2277       /* BBGenSystem                                                           
                                                                                                                             
                                             RS232CMD.C     */
                       7983 ; rs232cmd.c 2278       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7984 ; rs232cmd.c 2279       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       7985 ; rs232cmd.c 2280       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7986 ; rs232cmd.c 2281       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 133

ADDR   CODE            LINE SOURCELINE
                       7987 ; rs232cmd.c 2282       /* Function:    Handle the Black Burst system-command.                   
                                                                                            */
                       7988 ; rs232cmd.c 2283       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7989 ; rs232cmd.c 2284       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7990 ; rs232cmd.c 2285       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7991 ; rs232cmd.c 2286       /************************************************************************
                            **/
                       7992 ; rs232cmd.c 2287       void BBGenSystem( void)
                       7993 ; rs232cmd.c 2288       {
                       7994         ALIGN   1
                       7996         PUBLIC  _BBGenSystem
00188A                 7997 _BBGenSystem:
00188A 0F30            8001         PUSH.W  R4, R5
                       8007 ; rs232cmd.c 2289               int system;
                       8008 ; rs232cmd.c 2290               char code *str;
                       8009 ; rs232cmd.c 2291       
                       8010 ; rs232cmd.c 2292               if ( CmdExecute && !SCPIError)
00188C 964842rr        8012         MOV.B   ES,#SEG( _CmdExecute )
001890 9908rrrr        8013         MOV.W   R0,#SOF( _CmdExecute )
001894 8200            8014         MOV.B   R0L,[R0]
001896 F37B            8015         BEQ     _383
001898 964842rr        8016         MOV.B   ES,#SEG( _SCPIError )
00189C 9908rrrr        8017         MOV.W   R0,#SOF( _SCPIError )
0018A0 8A00            8018         MOV.W   R0,[R0]
0018A2 F275            8019         BNE     _383
                       8020 ; rs232cmd.c 2293               {
                       8021 ; rs232cmd.c 2294                       if ( CmdRequest)
0018A4 964842rr        8023         MOV.B   ES,#SEG( _CmdRequest )
0018A8 9908rrrr        8024         MOV.W   R0,#SOF( _CmdRequest )
0018AC 8200            8025         MOV.B   R0L,[R0]
0018AE F345            8026         BEQ     _375
                       8027 ; rs232cmd.c 2295                       {
                       8028 ; rs232cmd.c 2296                               if ( ParCnt)
0018B0 964842rr        8030         MOV.B   ES,#SEG( _ParCnt )
0018B4 9908rrrr        8031         MOV.W   R0,#SOF( _ParCnt )
0018B8 8200            8032         MOV.B   R0L,[R0]
0018BA F306            8033         BEQ     _372
                       8034 ; rs232cmd.c 2297                                       SCPIError = ParNotAllowed;
0018BC 964842rr        8036         MOV.B   ES,#SEG( _SCPIError )
0018C0 9908rrrr        8037         MOV.W   R0,#SOF( _SCPIError )
0018C4 BA06            8038         MOV.W   [R0],#06H
0018C6 FE63            8039         BR      _383
0018C6 FE63            8039         BR      _383
0018C8                 8040 _372:
                       8041 ; rs232cmd.c 2298                               else
                       8042 ; rs232cmd.c 2299                               {
                       8043 ; rs232cmd.c 2300                                       str = SystemPar[BBSetup[Suffix[0]].System
                            ].LongName;
0018C8 964842rr        8045         MOV.B   ES,#SEG( _Suffix )
0018CC 9908rrrr        8046         MOV.W   R0,#SOF( _Suffix )
0018D0 8A00            8047         MOV.W   R0,[R0]
0018D2 D903            8048         ASL.W   R0,#03H
0018D4 B910            8049         MOVS.W  R1,#00H
0018D6 964842rr        8050         MOV.B   ES,#SEG( _BBSetup )
0018DA 8500rrrr        8051         MOV.B   R0L,[R0+SOF( _BBSetup )]
0018DE E8000C          8052         MULU.B  R0L,#0CH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 134

ADDR   CODE            LINE SOURCELINE
0018E1 8920            8053         MOV.W   R2,R0
0018E3 B930            8054         MOVS.W  R3,#00H
0018E5 9918rrrr        8055         MOV.W   R1,#SEG( _SystemPar )
0018E9 9908rrrr        8056         MOV.W   R0,#SOF( _SystemPar )
0018ED 0902            8057         ADD.W   R0,R2
0018EF 1913            8058         ADDC.W  R1,R3
0018F1 862C43          8059         MOV.B   CS,R1L
0018F4 8820            8060         MOVC.W  R2,[R0+]
0018F6 99040000        8061         CMP.W   R0,#00H
0018FA F202            8062         BNE     _384
0018FC A64143          8063         ADDS.B  CS,#01H
0018FC A6414300        8063         ADDS.B  CS,#01H
001900                 8064 _384:
001900 8830            8065         MOVC.W  R3,[R0+]
001902 8953            8066         MOV.W   R5,R3
001904 8942            8067         MOV.W   R4,R2
                       8069 ; rs232cmd.c 2301       
                       8070 ; rs232cmd.c 2302                                       while ( *str)
001906 866C43          8072         MOV.B   CS,R3L
001909 8062            8073         MOVC.B  R3L,[R2+]
00190B F312            8074         BEQ     _374
00190B F31200          8074         BEQ     _374
00190E                 8075 _373:
                       8076 ; rs232cmd.c 2303                                               rs232putchar( *str++);
00190E 8915            8078         MOV.W   R1,R5
001910 8904            8079         MOV.W   R0,R4
001912 862C43          8080         MOV.B   CS,R1L
001915 8020            8081         MOVC.B  R1L,[R0+]
001917 8102            8082         MOV.B   R0L,R1L
                       8083         CALL    _rs232putchar
001919 C4rrrrrr       +8083 ;       FCALL   _rs232putchar
00191D 99400001        8084         ADD.W   R4,#01H
001921 99510000        8085         ADDC.W  R5,#00H
001925 8915            8089         MOV.W   R1,R5
001927 8904            8090         MOV.W   R0,R4
001929 862C43          8091         MOV.B   CS,R1L
00192C 8020            8092         MOVC.B  R1L,[R0+]
00192E F2EF            8093         BNE     _373
001930                 8095 _374:
                       8096 ; rs232cmd.c 2304       
                       8097 ; rs232cmd.c 2305                                       rs232putchar('\n');
001930 91080A          8099         MOV.B   R0L,#0AH
                       8100         CALL    _rs232putchar
001933 C4rrrrrr       +8100 ;       FCALL   _rs232putchar
                       8101 ; rs232cmd.c 2306                               }
                       8102 ; rs232cmd.c 2307                       }
001937 FE2B            8104         BR      _383
001937 FE2B00          8104         BR      _383
00193A                 8105 _375:
                       8106 ; rs232cmd.c 2308                       else
                       8107 ; rs232cmd.c 2309                       {
                       8108 ; rs232cmd.c 2310                               if ( ParCnt != 1)
00193A 964842rr        8110         MOV.B   ES,#SEG( _ParCnt )
00193E 9908rrrr        8111         MOV.W   R0,#SOF( _ParCnt )
001942 8200            8112         MOV.B   R0L,[R0]
001944 910401          8113         CMP.B   R0L,#01H
001947 F307            8114         BEQ     _376
                       8115 ; rs232cmd.c 2311                                       SCPIError = SyntaxErr;
001949 964842rr        8117         MOV.B   ES,#SEG( _SCPIError )
00194D 9908rrrr        8118         MOV.W   R0,#SOF( _SCPIError )
001951 BA03            8119         MOV.W   [R0],#03H
001953 FE1D            8120         BR      _383
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 135

ADDR   CODE            LINE SOURCELINE
001953 FE1D00          8120         BR      _383
001956                 8121 _376:
                       8122 ; rs232cmd.c 2312                               else
                       8123 ; rs232cmd.c 2313                               {
                       8124 ; rs232cmd.c 2314                                       system = FindParameter( Cmd, SystemPar);
001956 9918rrrr        8126         MOV.W   R1,#SEG( _Cmd )
00195A 9908rrrr        8127         MOV.W   R0,#SOF( _Cmd )
00195E 9938rrrr        8128         MOV.W   R3,#SEG( _SystemPar )
001962 9928rrrr        8129         MOV.W   R2,#SOF( _SystemPar )
001966 C5230C          8130         CALL    _FindParameter
                       8132 ; rs232cmd.c 2315       
                       8133 ; rs232cmd.c 2316                                       if ( system > -1)
001969 8910            8135         MOV.W   R1,R0
00196B 9914FFFF        8136         CMP.W   R1,#0FFFFH
00196F FD09            8139         BLE     _377
                       8140 ; rs232cmd.c 2317                                               SetBBSystem( Suffix[0], system);
001971 964842rr        8142         MOV.B   ES,#SEG( _Suffix )
001975 9908rrrr        8143         MOV.W   R0,#SOF( _Suffix )
001979 8A00            8144         MOV.W   R0,[R0]
                       8145         CALL    _SetBBSystem
00197B C4rrrrrr       +8145 ;       FCALL   _SetBBSystem
00197F FE07            8147         BR      _383
00197F FE0700          8147         BR      _383
001982                 8148 _377:
                       8149 ; rs232cmd.c 2318                                       else
                       8150 ; rs232cmd.c 2319                                               SCPIError = DataOutOfRange;
001982 964842rr        8152         MOV.B   ES,#SEG( _SCPIError )
001986 9908rrrr        8153         MOV.W   R0,#SOF( _SCPIError )
00198A 9A080021        8154         MOV.W   [R0],#021H
                       8155 ; rs232cmd.c 2320                               }
                       8156 ; rs232cmd.c 2321                       }
                       8157 ; rs232cmd.c 2322               }
00198E                 8159 _383:
                       8160 ; rs232cmd.c 2323       }
00198E 2F30            8162         POP.W   R4, R5
001990 D680            8164         RET
                       8167 ; rs232cmd.c 2324       
                       8168 ; rs232cmd.c 2325       /************************************************************************
                            **/
                       8169 ; rs232cmd.c 2326       /* BBGenDelay                                                            
                                                                                                                             
                                                     RS232CMD.C     */
                       8170 ; rs232cmd.c 2327       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8171 ; rs232cmd.c 2328       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       8172 ; rs232cmd.c 2329       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */                              
                       8173 ; rs232cmd.c 2330       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8174 ; rs232cmd.c 2331       /* Function:    Handle the Black Burst timing command.                   
                                                                                            */
                       8175 ; rs232cmd.c 2332       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 136

ADDR   CODE            LINE SOURCELINE
                       8176 ; rs232cmd.c 2333       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8177 ; rs232cmd.c 2334       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8178 ; rs232cmd.c 2335       /************************************************************************
                            **/
                       8179 ; rs232cmd.c 2336       void BBGenDelay( void)
                       8180 ; rs232cmd.c 2337       {
                       8181         ALIGN   1
                       8183         PUBLIC  _BBGenDelay
001992                 8184 _BBGenDelay:
001992 0F30            8188         PUSH.W  R4, R5
001994 A978            8190         ADDS.W  R7,#08H
                       8197 ; rs232cmd.c 2338               int field, line;
                       8198 ; rs232cmd.c 2339               float offset;
                       8199 ; rs232cmd.c 2340               long samples;
                       8200 ; rs232cmd.c 2341       
                       8201 ; rs232cmd.c 2342               if ( CmdExecute && !SCPIError)
001996 964842rr        8203         MOV.B   ES,#SEG( _CmdExecute )
00199A 9908rrrr        8204         MOV.W   R0,#SOF( _CmdExecute )
00199E 8200            8205         MOV.B   R0L,[R0]
                       8206         BEQ     _397
0019A0 F202           +8206 ;       BNE     _LG_436
0019A2 D5008E         +8206 ;       JMP.L   _397
0019A2 D5008E00       +8206 ;       JMP.L   _397
0019A6                +8206 _LG_436:
0019A6 964842rr        8207         MOV.B   ES,#SEG( _SCPIError )
0019AA 9908rrrr        8208         MOV.W   R0,#SOF( _SCPIError )
0019AE 8A00            8209         MOV.W   R0,[R0]
                       8210         BNE     _397
0019B0 F302           +8210 ;       BEQ     _LG_438
0019B2 D50086         +8210 ;       JMP.L   _397
0019B2 D5008600       +8210 ;       JMP.L   _397
0019B6                +8210 _LG_438:
                       8211 ; rs232cmd.c 2343               {
                       8212 ; rs232cmd.c 2344                       if ( CmdRequest)
0019B6 964842rr        8214         MOV.B   ES,#SEG( _CmdRequest )
0019BA 9908rrrr        8215         MOV.W   R0,#SOF( _CmdRequest )
0019BE 8200            8216         MOV.B   R0L,[R0]
0019C0 F327            8217         BEQ     _388
                       8218 ; rs232cmd.c 2345                       {
                       8219 ; rs232cmd.c 2346                               if ( ParCnt)
0019C2 964842rr        8221         MOV.B   ES,#SEG( _ParCnt )
0019C6 9908rrrr        8222         MOV.W   R0,#SOF( _ParCnt )
0019CA 8200            8223         MOV.B   R0L,[R0]
0019CC F306            8224         BEQ     _387
                       8225 ; rs232cmd.c 2347                                       SCPIError = ParNotAllowed;
0019CE 964842rr        8227         MOV.B   ES,#SEG( _SCPIError )
0019D2 9908rrrr        8228         MOV.W   R0,#SOF( _SCPIError )
0019D6 BA06            8229         MOV.W   [R0],#06H
0019D8 FE73            8230         BR      _397
0019D8 FE73            8230         BR      _397
0019DA                 8231 _387:
                       8232 ; rs232cmd.c 2348                               else
                       8233 ; rs232cmd.c 2349                               {
                       8234 ; rs232cmd.c 2350                                       PrintSamplesToFLT( BBSetup[Suffix[0]].Sys
                            tem, BBSetup[Suffix[0]].Delay);
0019DA 964842rr        8236         MOV.B   ES,#SEG( _Suffix )
0019DE 9908rrrr        8237         MOV.W   R0,#SOF( _Suffix )
0019E2 8A00            8238         MOV.W   R0,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 137

ADDR   CODE            LINE SOURCELINE
0019E4 8910            8239         MOV.W   R1,R0
0019E6 D913            8240         ASL.W   R1,#03H
0019E8 8921            8241         MOV.W   R2,R1
0019EA B930            8242         MOVS.W  R3,#00H
0019EC 964842rr        8243         MOV.B   ES,#SEG( _BBSetup )
0019F0 8502rrrr        8244         MOV.B   R0L,[R2+SOF( _BBSetup )]
0019F4 8921            8245         MOV.W   R2,R1
0019F6 B930            8246         MOVS.W  R3,#00H
0019F8 964842rr        8247         MOV.B   ES,#SEG( _BBSetup+2 )
0019FC 8D32rrrr        8248         MOV.W   R3,[R2+SOF( _BBSetup+4 )]
001A00 8D22rrrr        8249         MOV.W   R2,[R2+SOF( _BBSetup+2 )]
001A04 C52545          8250         CALL    _PrintSamplesToFLT
                       8251 ; rs232cmd.c 2351       
                       8252 ; rs232cmd.c 2352                                       rs232putchar ( '\n');
001A07 91080A          8254         MOV.B   R0L,#0AH
                       8255         CALL    _rs232putchar
001A0A C4rrrrrr       +8255 ;       FCALL   _rs232putchar
                       8256 ; rs232cmd.c 2353                               }
                       8257 ; rs232cmd.c 2354                       }
001A0E FE58            8259         BR      _397
001A0E FE58            8259         BR      _397
001A10                 8260 _388:
                       8261 ; rs232cmd.c 2355                       else
                       8262 ; rs232cmd.c 2356                       {
                       8263 ; rs232cmd.c 2357                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001A10 964842rr        8265         MOV.B   ES,#SEG( _ParCnt )
001A14 9908rrrr        8266         MOV.W   R0,#SOF( _ParCnt )
001A18 8200            8267         MOV.B   R0L,[R0]
001A1A 910403          8268         CMP.B   R0L,#03H
001A1D F21F            8269         BNE     _389
001A1F 9168rr          8270         MOV.B   R3L,#SEG( __lc_bs )
001A22 7177            8271         XOR.B   R3H,R3H
001A24 8927            8272         MOV.W   R2,R7
001A26 91A8rr          8273         MOV.B   R5L,#SEG( __lc_bs )
001A29 71BB            8274         XOR.B   R5H,R5H
001A2B 404702          8275         LEA     R4,R7+2
001A2E 9128rr          8276         MOV.B   R1L,#SEG( __lc_bs )
001A31 7133            8277         XOR.B   R1H,R1H
001A33 400704          8278         LEA     R0,R7+4
001A36 0F03            8279         PUSH.W  R0, R1
001A38 0F30            8281         PUSH.W  R4, R5
001A3A 0F0C            8283         PUSH.W  R2, R3
001A3C 9938rrrr        8285         MOV.W   R3,#SEG( _295 )
001A40 9928rrrr        8286         MOV.W   R2,#SOF( _295 )
001A44 0F0C            8287         PUSH.W  R2, R3
001A46 9918rrrr        8289         MOV.W   R1,#SEG( _Cmd )
001A4A 9908rrrr        8290         MOV.W   R0,#SOF( _Cmd )
                       8291         CALL    _sscanf
001A4E C4rrrrrr       +8291 ;       FCALL   _sscanf
001A52 99700010        8292         ADD.W   R7,#010H
001A56 99040003        8294         CMP.W   R0,#03H
001A5A F306            8295         BEQ     _390
001A5A F306            8295         BEQ     _390
001A5C                 8296 _389:
                       8297 ; rs232cmd.c 2358                                       SCPIError = SyntaxErr;
001A5C 964842rr        8299         MOV.B   ES,#SEG( _SCPIError )
001A60 9908rrrr        8300         MOV.W   R0,#SOF( _SCPIError )
001A64 BA03            8301         MOV.W   [R0],#03H
001A66 FE2C            8302         BR      _397
001A66 FE2C            8302         BR      _397
001A68                 8303 _390:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 138

ADDR   CODE            LINE SOURCELINE
                       8304 ; rs232cmd.c 2359                               else
                       8305 ; rs232cmd.c 2360                               {
                       8306 ; rs232cmd.c 2361                                       if (( samples = FLTToSamples( BBSetup[Suf
                            fix[0]].System, field, line, offset)) == -1)
001A68 964842rr        8308         MOV.B   ES,#SEG( _Suffix )
001A6C 9908rrrr        8309         MOV.W   R0,#SOF( _Suffix )
001A70 8A00            8310         MOV.W   R0,[R0]
001A72 D903            8311         ASL.W   R0,#03H
001A74 B910            8312         MOVS.W  R1,#00H
001A76 964842rr        8313         MOV.B   ES,#SEG( _BBSetup )
001A7A 8500rrrr        8314         MOV.B   R0L,[R0+SOF( _BBSetup )]
001A7E 8A17            8315         MOV.W   R1,[R7]
001A80 8C2702          8316         MOV.W   R2,[R7+2]
001A83 8C5706          8317         MOV.W   R5,[R7+6]
001A86 8C4704          8318         MOV.W   R4,[R7+4]
001A89 0F30            8319         PUSH.W  R4, R5
001A8B C522C6          8321         CALL    _FLTToSamples
001A8E A974            8322         ADDS.W  R7,#04H
001A90 8931            8324         MOV.W   R3,R1
001A92 8920            8325         MOV.W   R2,R0
001A94 8913            8326         MOV.W   R1,R3
001A96 8902            8327         MOV.W   R0,R2
001A98 9914FFFF        8328         CMP.W   R1,#0FFFFH
001A9C F202            8329         BNE     _400
001A9E 9904FFFF        8330         CMP.W   R0,#0FFFFH
001A9E 9904FFFF        8330         CMP.W   R0,#0FFFFH
001AA2                 8331 _400:
001AA2 F207            8332         BNE     _391
                       8333 ; rs232cmd.c 2362                                               SCPIError = ExecErr;
001AA4 964842rr        8335         MOV.B   ES,#SEG( _SCPIError )
001AA8 9908rrrr        8336         MOV.W   R0,#SOF( _SCPIError )
001AAC 9A08001D        8337         MOV.W   [R0],#01DH
001AB0 FE07            8338         BR      _397
001AB0 FE07            8338         BR      _397
001AB2                 8339 _391:
                       8340 ; rs232cmd.c 2363                                       else
                       8341 ; rs232cmd.c 2364                                               SetBBDelay( Suffix[0], (UL) sampl
                            es);
001AB2 964842rr        8343         MOV.B   ES,#SEG( _Suffix )
001AB6 9908rrrr        8344         MOV.W   R0,#SOF( _Suffix )
001ABA 8A00            8345         MOV.W   R0,[R0]
                       8346         CALL    _SetBBDelay
001ABC C4rrrrrr       +8346 ;       FCALL   _SetBBDelay
                       8347 ; rs232cmd.c 2365                               }
                       8348 ; rs232cmd.c 2366                       }
                       8349 ; rs232cmd.c 2367               }
001AC0                 8351 _397:
                       8352 ; rs232cmd.c 2368       }
001AC0 99700008        8354         ADD.W   R7,#08H
001AC4 2F30            8356         POP.W   R4, R5
001AC6 D680            8358         RET
                       8360 ; rs232cmd.c 2369       
                       8361 ; rs232cmd.c 2370       /************************************************************************
                            **/
                       8362 ; rs232cmd.c 2371       /* BBGenScHPhase                                                         
                                                                                                                             
                                                     RS232CMD.C     */
                       8363 ; rs232cmd.c 2372       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 139

ADDR   CODE            LINE SOURCELINE
                       8364 ; rs232cmd.c 2373       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */                      
                       8365 ; rs232cmd.c 2374       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       8366 ; rs232cmd.c 2375       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8367 ; rs232cmd.c 2376       /* Function:    Handle the Black Burst ScH-Phase command.                
                                                                                            */
                       8368 ; rs232cmd.c 2377       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       8369 ; rs232cmd.c 2378       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8370 ; rs232cmd.c 2379       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8371 ; rs232cmd.c 2380       /************************************************************************
                            **/
                       8372 ; rs232cmd.c 2381       void BBGenScHPhase( void)
                       8373 ; rs232cmd.c 2382       {
                       8374         ALIGN   1
                       8376         PUBLIC  _BBGenScHPhase
001AC8                 8377 _BBGenScHPhase:
001AC8 A97E            8381         ADDS.W  R7,#0EH
                       8384 ; rs232cmd.c 2383               int schphase;
                       8385 ; rs232cmd.c 2384       
                       8386 ; rs232cmd.c 2385               if ( CmdExecute && !SCPIError)
001ACA 964842rr        8388         MOV.B   ES,#SEG( _CmdExecute )
001ACE 9908rrrr        8389         MOV.W   R0,#SOF( _CmdExecute )
001AD2 8200            8390         MOV.B   R0L,[R0]
001AD4 F366            8391         BEQ     _412
001AD6 964842rr        8392         MOV.B   ES,#SEG( _SCPIError )
001ADA 9908rrrr        8393         MOV.W   R0,#SOF( _SCPIError )
001ADE 8A00            8394         MOV.W   R0,[R0]
001AE0 F260            8395         BNE     _412
                       8396 ; rs232cmd.c 2386               {
                       8397 ; rs232cmd.c 2387                       if ( CmdRequest)
001AE2 964842rr        8399         MOV.B   ES,#SEG( _CmdRequest )
001AE6 9908rrrr        8400         MOV.W   R0,#SOF( _CmdRequest )
001AEA 8200            8401         MOV.B   R0L,[R0]
001AEC F323            8402         BEQ     _402
                       8403 ; rs232cmd.c 2388                       {
                       8404 ; rs232cmd.c 2389                               if ( ParCnt)
001AEE 964842rr        8406         MOV.B   ES,#SEG( _ParCnt )
001AF2 9908rrrr        8407         MOV.W   R0,#SOF( _ParCnt )
001AF6 8200            8408         MOV.B   R0L,[R0]
001AF8 F306            8409         BEQ     _401
                       8410 ; rs232cmd.c 2390                                       SCPIError = ParNotAllowed;
001AFA 964842rr        8412         MOV.B   ES,#SEG( _SCPIError )
001AFE 9908rrrr        8413         MOV.W   R0,#SOF( _SCPIError )
001B02 BA06            8414         MOV.W   [R0],#06H
001B04 FE4E            8415         BR      _412
001B04 FE4E            8415         BR      _412
001B06                 8416 _401:
                       8417 ; rs232cmd.c 2391                               else
                       8418 ; rs232cmd.c 2392                                       rs232printf( 6, "%d\n", BBSetup[Suffix[0]
                            ].ScHPhase);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 140

ADDR   CODE            LINE SOURCELINE
001B06 B906            8420         MOV.W   R0,#06H
001B08 964842rr        8421         MOV.B   ES,#SEG( _Suffix )
001B0C 9918rrrr        8422         MOV.W   R1,#SOF( _Suffix )
001B10 8A11            8423         MOV.W   R1,[R1]
001B12 D913            8424         ASL.W   R1,#03H
001B14 8921            8425         MOV.W   R2,R1
001B16 B930            8426         MOVS.W  R3,#00H
001B18 964842rr        8427         MOV.B   ES,#SEG( _BBSetup+6 )
001B1C 8D12rrrr        8428         MOV.W   R1,[R2+SOF( _BBSetup+6 )]
001B20 0F02            8429         PUSH.W  R1
001B22 9938rrrr        8431         MOV.W   R3,#SEG( _9 )
001B26 9928rrrr        8432         MOV.W   R2,#SOF( _9 )
001B2A 0F0C            8433         PUSH.W  R2, R3
                       8435         CALL    _rs232printf
001B2C C4rrrrrr       +8435 ;       FCALL   _rs232printf
001B30 A976            8436         ADDS.W  R7,#06H
                       8438 ; rs232cmd.c 2393                       }
001B32 FE37            8440         BR      _412
001B32 FE37            8440         BR      _412
001B34                 8441 _402:
                       8442 ; rs232cmd.c 2394                       else
                       8443 ; rs232cmd.c 2395                       {
                       8444 ; rs232cmd.c 2396                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &schph
                            ase) != 1))
001B34 964842rr        8446         MOV.B   ES,#SEG( _ParCnt )
001B38 9908rrrr        8447         MOV.W   R0,#SOF( _ParCnt )
001B3C 8200            8448         MOV.B   R0L,[R0]
001B3E 910401          8449         CMP.B   R0L,#01H
001B41 F215            8450         BNE     _403
001B43 9918rrrr        8451         MOV.W   R1,#SEG( _Cmd )
001B47 9908rrrr        8452         MOV.W   R0,#SOF( _Cmd )
001B4B 9168rr          8453         MOV.B   R3L,#SEG( __lc_bs )
001B4E 7177            8454         XOR.B   R3H,R3H
001B50 8927            8455         MOV.W   R2,R7
001B52 0F0C            8456         PUSH.W  R2, R3
001B54 9938rrrr        8458         MOV.W   R3,#SEG( _10 )
001B58 9928rrrr        8459         MOV.W   R2,#SOF( _10 )
001B5C 0F0C            8460         PUSH.W  R2, R3
                       8462         CALL    _sscanf
001B5E C4rrrrrr       +8462 ;       FCALL   _sscanf
001B62 99700008        8463         ADD.W   R7,#08H
001B66 99040001        8465         CMP.W   R0,#01H
001B6A F306            8466         BEQ     _404
001B6A F306            8466         BEQ     _404
001B6C                 8467 _403:
                       8468 ; rs232cmd.c 2397                                       SCPIError = SyntaxErr;
001B6C 964842rr        8470         MOV.B   ES,#SEG( _SCPIError )
001B70 9908rrrr        8471         MOV.W   R0,#SOF( _SCPIError )
001B74 BA03            8472         MOV.W   [R0],#03H
001B76 FE15            8473         BR      _412
001B76 FE15            8473         BR      _412
001B78                 8474 _404:
                       8475 ; rs232cmd.c 2398                               else
                       8476 ; rs232cmd.c 2399                               {
                       8477 ; rs232cmd.c 2400                                       if (( schphase < ScHPhaseLow) || ( schpha
                            se > ScHPhaseHigh))
001B78 9A74FF4D        8479         CMP.W   [R7],#0FF4DH
001B7C FB03            8480         BLT     _405
001B7E 9A7400B4        8481         CMP.W   [R7],#0B4H
001B82 FD07            8482         BLE     _406
001B82 FD07            8482         BLE     _406
001B84                 8483 _405:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 141

ADDR   CODE            LINE SOURCELINE
                       8484 ; rs232cmd.c 2401                                               SCPIError = DataOutOfRange;
001B84 964842rr        8486         MOV.B   ES,#SEG( _SCPIError )
001B88 9908rrrr        8487         MOV.W   R0,#SOF( _SCPIError )
001B8C 9A080021        8488         MOV.W   [R0],#021H
001B90 FE08            8489         BR      _412
001B90 FE08            8489         BR      _412
001B92                 8490 _406:
                       8491 ; rs232cmd.c 2402                                       else
                       8492 ; rs232cmd.c 2403                                               SetBBScHPhase( Suffix[0], schphas
                            e);
001B92 964842rr        8494         MOV.B   ES,#SEG( _Suffix )
001B96 9908rrrr        8495         MOV.W   R0,#SOF( _Suffix )
001B9A 8A00            8496         MOV.W   R0,[R0]
001B9C 8A17            8497         MOV.W   R1,[R7]
                       8498         CALL    _SetBBScHPhase
001B9E C4rrrrrr       +8498 ;       FCALL   _SetBBScHPhase
                       8499 ; rs232cmd.c 2404                               }
                       8500 ; rs232cmd.c 2405                       }
                       8501 ; rs232cmd.c 2406               }
001BA2                 8503 _412:
                       8504 ; rs232cmd.c 2407       }
001BA2 A972            8506         ADDS.W  R7,#02H
001BA4 D680            8508         RET
                       8510 ; rs232cmd.c 2408       
                       8511 ; rs232cmd.c 2409       /************************************************************************
                            **/
                       8512 ; rs232cmd.c 2410       /* CBGen                                                                 
                                                                                                                             
                                                                               RS232CMD.C */
                       8513 ; rs232cmd.c 2411       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8514 ; rs232cmd.c 2412       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       8515 ; rs232cmd.c 2413       /* Revised:             000606                                           
                                                                                                                             
                                                                                    */
                       8516 ; rs232cmd.c 2414       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8517 ; rs232cmd.c 2415       /* Function:    Return the setting of a Analog-TPG.                      
                                                                                                            */
                       8518 ; rs232cmd.c 2416       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                       8519 ; rs232cmd.c 2417       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8520 ; rs232cmd.c 2418       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8521 ; rs232cmd.c 2419       /************************************************************************
                            ***/
                       8522 ; rs232cmd.c 2420       void CBGen( void)
                       8523 ; rs232cmd.c 2421       {
                       8524         ALIGN   1
                       8526         PUBLIC  _CBGen
001BA6                 8527 _CBGen:
001BA6 0F30            8531         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 142

ADDR   CODE            LINE SOURCELINE
                       8535 ; rs232cmd.c 2422               char code *str;
                       8536 ; rs232cmd.c 2423       
                       8537 ; rs232cmd.c 2424               if ( CmdExecute && !SCPIError)
001BA8 964842rr        8539         MOV.B   ES,#SEG( _CmdExecute )
001BAC 9908rrrr        8540         MOV.W   R0,#SOF( _CmdExecute )
001BB0 8200            8541         MOV.B   R0L,[R0]
                       8542         BEQ     _429
001BB2 F202           +8542 ;       BNE     _LG_468
001BB4 D500D4         +8542 ;       JMP.L   _429
001BB8 D500D400       +8542 ;       JMP.L   _429
001BB8                +8542 _LG_468:
001BB8 964842rr        8543         MOV.B   ES,#SEG( _SCPIError )
001BBC 9908rrrr        8544         MOV.W   R0,#SOF( _SCPIError )
001BC0 8A00            8545         MOV.W   R0,[R0]
                       8546         BNE     _429
001BC2 F302           +8546 ;       BEQ     _LG_470
001BC4 D500CC         +8546 ;       JMP.L   _429
001BC8 D500CC00       +8546 ;       JMP.L   _429
001BC8                +8546 _LG_470:
                       8547 ; rs232cmd.c 2425               {
                       8548 ; rs232cmd.c 2426                       if ( !CmdRequest)
001BC8 964842rr        8550         MOV.B   ES,#SEG( _CmdRequest )
001BCC 9908rrrr        8551         MOV.W   R0,#SOF( _CmdRequest )
001BD0 8200            8552         MOV.B   R0L,[R0]
001BD2 F207            8553         BNE     _418
                       8554 ; rs232cmd.c 2427                                       SCPIError = SyntaxErr;
001BD4 964842rr        8556         MOV.B   ES,#SEG( _SCPIError )
001BD8 9908rrrr        8557         MOV.W   R0,#SOF( _SCPIError )
001BDC BA03            8558         MOV.W   [R0],#03H
                       8559         BR      _429
001BDE D500BF         +8559         JMP.L   _429
001BDE D500BF00       +8559         JMP.L   _429
001BE2                 8560 _418:
                       8561 ; rs232cmd.c 2428                       else
                       8562 ; rs232cmd.c 2429                       {
                       8563 ; rs232cmd.c 2430                               if ( ParCnt)
001BE2 964842rr        8565         MOV.B   ES,#SEG( _ParCnt )
001BE6 9908rrrr        8566         MOV.W   R0,#SOF( _ParCnt )
001BEA 8200            8567         MOV.B   R0L,[R0]
001BEC F307            8568         BEQ     _419
                       8569 ; rs232cmd.c 2431                                       SCPIError = ParNotAllowed;
001BEE 964842rr        8571         MOV.B   ES,#SEG( _SCPIError )
001BF2 9908rrrr        8572         MOV.W   R0,#SOF( _SCPIError )
001BF6 BA06            8573         MOV.W   [R0],#06H
                       8574         BR      _429
001BF8 D500B2         +8574         JMP.L   _429
001BF8 D500B200       +8574         JMP.L   _429
001BFC                 8575 _419:
                       8576 ; rs232cmd.c 2432                               else
                       8577 ; rs232cmd.c 2433                               {
                       8578 ; rs232cmd.c 2434                                       str = CBPatternPar[CBSetup.Pattern].LongN
                            ame;
001BFC 964842rr        8580         MOV.B   ES,#SEG( _CBSetup+2 )
001C00 9908rrrr        8581         MOV.W   R0,#SOF( _CBSetup+2 )
001C04 8A00            8582         MOV.W   R0,[R0]
001C06 E900000C        8583         MULU.W  R0,#0CH
001C0A 8920            8584         MOV.W   R2,R0
001C0C B930            8585         MOVS.W  R3,#00H
001C0E 9918rrrr        8586         MOV.W   R1,#SEG( _CBPatternPar )
001C12 9908rrrr        8587         MOV.W   R0,#SOF( _CBPatternPar )
001C16 0902            8588         ADD.W   R0,R2
001C18 1913            8589         ADDC.W  R1,R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 143

ADDR   CODE            LINE SOURCELINE
001C1A 862C43          8590         MOV.B   CS,R1L
001C1D 8820            8591         MOVC.W  R2,[R0+]
001C1F 99040000        8592         CMP.W   R0,#00H
001C23 F202            8593         BNE     _430
001C25 A64143          8594         ADDS.B  CS,#01H
001C25 A64143          8594         ADDS.B  CS,#01H
001C28                 8595 _430:
001C28 8830            8596         MOVC.W  R3,[R0+]
001C2A 8953            8597         MOV.W   R5,R3
001C2C 8942            8598         MOV.W   R4,R2
                       8600 ; rs232cmd.c 2435       
                       8601 ; rs232cmd.c 2436                                       while ( *str)
001C2E 866C43          8603         MOV.B   CS,R3L
001C31 8062            8604         MOVC.B  R3L,[R2+]
001C33 F312            8605         BEQ     _421
001C33 F31200          8605         BEQ     _421
001C36                 8606 _420:
                       8607 ; rs232cmd.c 2437                                               rs232putchar( *str++);
001C36 8915            8609         MOV.W   R1,R5
001C38 8904            8610         MOV.W   R0,R4
001C3A 862C43          8611         MOV.B   CS,R1L
001C3D 8020            8612         MOVC.B  R1L,[R0+]
001C3F 8102            8613         MOV.B   R0L,R1L
                       8614         CALL    _rs232putchar
001C41 C4rrrrrr       +8614 ;       FCALL   _rs232putchar
001C45 99400001        8615         ADD.W   R4,#01H
001C49 99510000        8616         ADDC.W  R5,#00H
001C4D 8915            8620         MOV.W   R1,R5
001C4F 8904            8621         MOV.W   R0,R4
001C51 862C43          8622         MOV.B   CS,R1L
001C54 8020            8623         MOVC.B  R1L,[R0+]
001C56 F2EF            8624         BNE     _420
001C58                 8626 _421:
                       8627 ; rs232cmd.c 2438       
                       8628 ; rs232cmd.c 2439                                       rs232putchar( ',');
001C58 91082C          8630         MOV.B   R0L,#02CH
                       8631         CALL    _rs232putchar
001C5B C4rrrrrr       +8631 ;       FCALL   _rs232putchar
                       8632 ; rs232cmd.c 2440       
                       8633 ; rs232cmd.c 2441       
                       8634 ; rs232cmd.c 2442                                       str = SystemPar[CBSetup.System].LongName;
                            
001C5F 964842rr        8636         MOV.B   ES,#SEG( _CBSetup )
001C63 9908rrrr        8637         MOV.W   R0,#SOF( _CBSetup )
001C67 8200            8638         MOV.B   R0L,[R0]
001C69 E8000C          8639         MULU.B  R0L,#0CH
001C6C 8920            8640         MOV.W   R2,R0
001C6E B930            8641         MOVS.W  R3,#00H
001C70 9918rrrr        8642         MOV.W   R1,#SEG( _SystemPar )
001C74 9908rrrr        8643         MOV.W   R0,#SOF( _SystemPar )
001C78 0902            8644         ADD.W   R0,R2
001C7A 1913            8645         ADDC.W  R1,R3
001C7C 862C43          8646         MOV.B   CS,R1L
001C7F 8820            8647         MOVC.W  R2,[R0+]
001C81 99040000        8648         CMP.W   R0,#00H
001C85 F202            8649         BNE     _431
001C87 A64143          8650         ADDS.B  CS,#01H
001C87 A64143          8650         ADDS.B  CS,#01H
001C8A                 8651 _431:
001C8A 8830            8652         MOVC.W  R3,[R0+]
001C8C 8953            8653         MOV.W   R5,R3
001C8E 8942            8654         MOV.W   R4,R2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 144

ADDR   CODE            LINE SOURCELINE
                       8657 ; rs232cmd.c 2443       
                       8658 ; rs232cmd.c 2444                                       while ( *str)
001C90 866C43          8660         MOV.B   CS,R3L
001C93 8062            8661         MOVC.B  R3L,[R2+]
001C95 F312            8662         BEQ     _423
001C95 F31200          8662         BEQ     _423
001C98                 8663 _422:
                       8664 ; rs232cmd.c 2445                                               rs232putchar( *str++);
001C98 8915            8666         MOV.W   R1,R5
001C9A 8904            8667         MOV.W   R0,R4
001C9C 862C43          8668         MOV.B   CS,R1L
001C9F 8020            8669         MOVC.B  R1L,[R0+]
001CA1 8102            8670         MOV.B   R0L,R1L
                       8671         CALL    _rs232putchar
001CA3 C4rrrrrr       +8671 ;       FCALL   _rs232putchar
001CA7 99400001        8672         ADD.W   R4,#01H
001CAB 99510000        8673         ADDC.W  R5,#00H
001CAF 8915            8677         MOV.W   R1,R5
001CB1 8904            8678         MOV.W   R0,R4
001CB3 862C43          8679         MOV.B   CS,R1L
001CB6 8020            8680         MOVC.B  R1L,[R0+]
001CB8 F2EF            8681         BNE     _422
001CBA                 8683 _423:
                       8684 ; rs232cmd.c 2446       
                       8685 ; rs232cmd.c 2447                                       rs232putchar( ',');
001CBA 91082C          8687         MOV.B   R0L,#02CH
                       8688         CALL    _rs232putchar
001CBD C4rrrrrr       +8688 ;       FCALL   _rs232putchar
                       8689 ; rs232cmd.c 2448       
                       8690 ; rs232cmd.c 2449       
                       8691 ; rs232cmd.c 2450                                       PrintSamplesToFLT( CBSetup.System, CBSetu
                            p.Delay*256);
001CC1 964842rr        8693         MOV.B   ES,#SEG( _CBSetup )
001CC5 9908rrrr        8694         MOV.W   R0,#SOF( _CBSetup )
001CC9 8200            8695         MOV.B   R0L,[R0]
001CCB 964842rr        8696         MOV.B   ES,#SEG( _CBSetup+4 )
001CCF 9938rrrr        8697         MOV.W   R3,#SOF( _CBSetup+4 )
001CD3 8B23            8698         MOV.W   R2,[R3+]
001CD5 8A33            8699         MOV.W   R3,[R3]
001CD7 DD28            8700         ASL.D   R2,#08H
001CD9 C523DA          8701         CALL    _PrintSamplesToFLT
                       8702 ; rs232cmd.c 2451       
                       8703 ; rs232cmd.c 2452       
                       8704 ; rs232cmd.c 2453                                       rs232printf( 6, ",%d,", CBSetup.ScHPhase)
                            ;
001CDC B906            8706         MOV.W   R0,#06H
001CDE 964842rr        8707         MOV.B   ES,#SEG( _CBSetup+8 )
001CE2 9918rrrr        8708         MOV.W   R1,#SOF( _CBSetup+8 )
001CE6 8A11            8709         MOV.W   R1,[R1]
001CE8 0F02            8710         PUSH.W  R1
001CEA 9938rrrr        8712         MOV.W   R3,#SEG( _417 )
001CEE 9928rrrr        8713         MOV.W   R2,#SOF( _417 )
001CF2 0F0C            8714         PUSH.W  R2, R3
                       8716         CALL    _rs232printf
001CF4 C4rrrrrr       +8716 ;       FCALL   _rs232printf
001CF8 A976            8717         ADDS.W  R7,#06H
                       8719 ; rs232cmd.c 2454       
                       8720 ; rs232cmd.c 2455       
                       8721 ; rs232cmd.c 2456                                       str = EmbAudioSignalPar[CBSetup.EmbAudioS
                            ignal].LongName;
001CFA 964842rr        8723         MOV.B   ES,#SEG( _CBSetup+10 )
001CFE 9908rrrr        8724         MOV.W   R0,#SOF( _CBSetup+10 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 145

ADDR   CODE            LINE SOURCELINE
001D02 8200            8725         MOV.B   R0L,[R0]
001D04 E8000C          8726         MULU.B  R0L,#0CH
001D07 8920            8727         MOV.W   R2,R0
001D09 B930            8728         MOVS.W  R3,#00H
001D0B 9918rrrr        8729         MOV.W   R1,#SEG( _EmbAudioSignalPar )
001D0F 9908rrrr        8730         MOV.W   R0,#SOF( _EmbAudioSignalPar )
001D13 0902            8731         ADD.W   R0,R2
001D15 1913            8732         ADDC.W  R1,R3
001D17 862C43          8733         MOV.B   CS,R1L
001D1A 8820            8734         MOVC.W  R2,[R0+]
001D1C 99040000        8735         CMP.W   R0,#00H
001D20 F202            8736         BNE     _432
001D22 A64143          8737         ADDS.B  CS,#01H
001D22 A6414300        8737         ADDS.B  CS,#01H
001D26                 8738 _432:
001D26 8830            8739         MOVC.W  R3,[R0+]
001D28 8953            8740         MOV.W   R5,R3
001D2A 8942            8741         MOV.W   R4,R2
                       8744 ; rs232cmd.c 2457       
                       8745 ; rs232cmd.c 2458                                       while ( *str)
001D2C 866C43          8747         MOV.B   CS,R3L
001D2F 8062            8748         MOVC.B  R3L,[R2+]
001D31 F312            8749         BEQ     _425
001D31 F31200          8749         BEQ     _425
001D34                 8750 _424:
                       8751 ; rs232cmd.c 2459                                               rs232putchar( *str++);
001D34 8915            8753         MOV.W   R1,R5
001D36 8904            8754         MOV.W   R0,R4
001D38 862C43          8755         MOV.B   CS,R1L
001D3B 8020            8756         MOVC.B  R1L,[R0+]
001D3D 8102            8757         MOV.B   R0L,R1L
                       8758         CALL    _rs232putchar
001D3F C4rrrrrr       +8758 ;       FCALL   _rs232putchar
001D43 99400001        8759         ADD.W   R4,#01H
001D47 99510000        8760         ADDC.W  R5,#00H
001D4B 8915            8764         MOV.W   R1,R5
001D4D 8904            8765         MOV.W   R0,R4
001D4F 862C43          8766         MOV.B   CS,R1L
001D52 8020            8767         MOVC.B  R1L,[R0+]
001D54 F2EF            8768         BNE     _424
001D56                 8770 _425:
                       8771 ; rs232cmd.c 2460       
                       8772 ; rs232cmd.c 2461                                       rs232putchar( '\n');
001D56 91080A          8774         MOV.B   R0L,#0AH
                       8775         CALL    _rs232putchar
001D59 C4rrrrrr       +8775 ;       FCALL   _rs232putchar
                       8776 ; rs232cmd.c 2462                               }
                       8777 ; rs232cmd.c 2463                       }
                       8778 ; rs232cmd.c 2464               }
001D5E                 8780 _429:
                       8781 ; rs232cmd.c 2465       }
001D5E 2F30            8783         POP.W   R4, R5
001D60 D680            8785         RET
                       8788 ; rs232cmd.c 2466       
                       8789 ; rs232cmd.c 2467       /************************************************************************
                            **/
                       8790 ; rs232cmd.c 2468       /* CBGenPattern                                                          
                                                                                                                             
                                                 RS232CMD.C */
                       8791 ; rs232cmd.c 2469       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 146

ADDR   CODE            LINE SOURCELINE
                       8792 ; rs232cmd.c 2470       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       8793 ; rs232cmd.c 2471       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       8794 ; rs232cmd.c 2472       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8795 ; rs232cmd.c 2473       /* Function:    Handle the Colorbar pattern command.                     
                                                                                                    */
                       8796 ; rs232cmd.c 2474       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       8797 ; rs232cmd.c 2475       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8798 ; rs232cmd.c 2476       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8799 ; rs232cmd.c 2477       /************************************************************************
                            **/
                       8800 ; rs232cmd.c 2478       void CBGenPattern( void)
                       8801 ; rs232cmd.c 2479       {
                       8802         ALIGN   1
                       8804         PUBLIC  _CBGenPattern
001D62                 8805 _CBGenPattern:
001D62 0F30            8809         PUSH.W  R4, R5
                       8815 ; rs232cmd.c 2480               int pattern;
                       8816 ; rs232cmd.c 2481               char code *str;
                       8817 ; rs232cmd.c 2482       
                       8818 ; rs232cmd.c 2483               if ( CmdExecute && !SCPIError)
001D64 964842rr        8820         MOV.B   ES,#SEG( _CmdExecute )
001D68 9908rrrr        8821         MOV.W   R0,#SOF( _CmdExecute )
001D6C 8200            8822         MOV.B   R0L,[R0]
001D6E F377            8823         BEQ     _445
001D70 964842rr        8824         MOV.B   ES,#SEG( _SCPIError )
001D74 9908rrrr        8825         MOV.W   R0,#SOF( _SCPIError )
001D78 8A00            8826         MOV.W   R0,[R0]
001D7A F271            8827         BNE     _445
                       8828 ; rs232cmd.c 2484               {
                       8829 ; rs232cmd.c 2485                       if ( CmdRequest)
001D7C 964842rr        8831         MOV.B   ES,#SEG( _CmdRequest )
001D80 9908rrrr        8832         MOV.W   R0,#SOF( _CmdRequest )
001D84 8200            8833         MOV.B   R0L,[R0]
001D86 F33F            8834         BEQ     _436
                       8835 ; rs232cmd.c 2486                       {
                       8836 ; rs232cmd.c 2487                               if ( ParCnt)
001D88 964842rr        8838         MOV.B   ES,#SEG( _ParCnt )
001D8C 9908rrrr        8839         MOV.W   R0,#SOF( _ParCnt )
001D90 8200            8840         MOV.B   R0L,[R0]
001D92 F306            8841         BEQ     _433
                       8842 ; rs232cmd.c 2488                                       SCPIError = ParNotAllowed;
001D94 964842rr        8844         MOV.B   ES,#SEG( _SCPIError )
001D98 9908rrrr        8845         MOV.W   R0,#SOF( _SCPIError )
001D9C BA06            8846         MOV.W   [R0],#06H
001D9E FE5F            8847         BR      _445
001D9E FE5F            8847         BR      _445
001DA0                 8848 _433:
                       8849 ; rs232cmd.c 2489                               else
                       8850 ; rs232cmd.c 2490                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 147

ADDR   CODE            LINE SOURCELINE
                       8851 ; rs232cmd.c 2491                                       str = CBPatternPar[CBSetup.Pattern].LongN
                            ame;
001DA0 964842rr        8853         MOV.B   ES,#SEG( _CBSetup+2 )
001DA4 9908rrrr        8854         MOV.W   R0,#SOF( _CBSetup+2 )
001DA8 8A00            8855         MOV.W   R0,[R0]
001DAA E900000C        8856         MULU.W  R0,#0CH
001DAE 8920            8857         MOV.W   R2,R0
001DB0 B930            8858         MOVS.W  R3,#00H
001DB2 9918rrrr        8859         MOV.W   R1,#SEG( _CBPatternPar )
001DB6 9908rrrr        8860         MOV.W   R0,#SOF( _CBPatternPar )
001DBA 0902            8861         ADD.W   R0,R2
001DBC 1913            8862         ADDC.W  R1,R3
001DBE 862C43          8863         MOV.B   CS,R1L
001DC1 8820            8864         MOVC.W  R2,[R0+]
001DC3 99040000        8865         CMP.W   R0,#00H
001DC7 F202            8866         BNE     _446
001DC9 A64143          8867         ADDS.B  CS,#01H
001DC9 A64143          8867         ADDS.B  CS,#01H
001DCC                 8868 _446:
001DCC 8830            8869         MOVC.W  R3,[R0+]
001DCE 8953            8870         MOV.W   R5,R3
001DD0 8942            8871         MOV.W   R4,R2
                       8873 ; rs232cmd.c 2492       
                       8874 ; rs232cmd.c 2493                                       while ( *str)
001DD2 866C43          8876         MOV.B   CS,R3L
001DD5 8062            8877         MOVC.B  R3L,[R2+]
001DD7 F312            8878         BEQ     _435
001DD7 F31200          8878         BEQ     _435
001DDA                 8879 _434:
                       8880 ; rs232cmd.c 2494                                               rs232putchar( *str++);
001DDA 8915            8882         MOV.W   R1,R5
001DDC 8904            8883         MOV.W   R0,R4
001DDE 862C43          8884         MOV.B   CS,R1L
001DE1 8020            8885         MOVC.B  R1L,[R0+]
001DE3 8102            8886         MOV.B   R0L,R1L
                       8887         CALL    _rs232putchar
001DE5 C4rrrrrr       +8887 ;       FCALL   _rs232putchar
001DE9 99400001        8888         ADD.W   R4,#01H
001DED 99510000        8889         ADDC.W  R5,#00H
001DF1 8915            8893         MOV.W   R1,R5
001DF3 8904            8894         MOV.W   R0,R4
001DF5 862C43          8895         MOV.B   CS,R1L
001DF8 8020            8896         MOVC.B  R1L,[R0+]
001DFA F2EF            8897         BNE     _434
001DFC                 8899 _435:
                       8900 ; rs232cmd.c 2495       
                       8901 ; rs232cmd.c 2496                                       rs232putchar('\n');
001DFC 91080A          8903         MOV.B   R0L,#0AH
                       8904         CALL    _rs232putchar
001DFF C4rrrrrr       +8904 ;       FCALL   _rs232putchar
                       8905 ; rs232cmd.c 2497                               }
                       8906 ; rs232cmd.c 2498                       }
001E03 FE2D            8908         BR      _445
001E03 FE2D00          8908         BR      _445
001E06                 8909 _436:
                       8910 ; rs232cmd.c 2499                       else
                       8911 ; rs232cmd.c 2500                       {
                       8912 ; rs232cmd.c 2501                               pattern = FindParameter( Cmd, CBPatternPar);
001E06 9918rrrr        8914         MOV.W   R1,#SEG( _Cmd )
001E0A 9908rrrr        8915         MOV.W   R0,#SOF( _Cmd )
001E0E 9938rrrr        8916         MOV.W   R3,#SEG( _CBPatternPar )
001E12 9928rrrr        8917         MOV.W   R2,#SOF( _CBPatternPar )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 148

ADDR   CODE            LINE SOURCELINE
001E16 C520B4          8918         CALL    _FindParameter
                       8920 ; rs232cmd.c 2502       
                       8921 ; rs232cmd.c 2503                               if ( ParCnt != 1)
001E19 964842rr        8923         MOV.B   ES,#SEG( _ParCnt )
001E1D 9918rrrr        8924         MOV.W   R1,#SOF( _ParCnt )
001E21 8221            8925         MOV.B   R1L,[R1]
001E23 912401          8926         CMP.B   R1L,#01H
001E26 F306            8927         BEQ     _437
                       8928 ; rs232cmd.c 2504                                       SCPIError = SyntaxErr;
001E28 964842rr        8930         MOV.B   ES,#SEG( _SCPIError )
001E2C 9908rrrr        8931         MOV.W   R0,#SOF( _SCPIError )
001E30 BA03            8932         MOV.W   [R0],#03H
001E32 FE15            8933         BR      _445
001E32 FE15            8933         BR      _445
001E34                 8934 _437:
                       8936 ; rs232cmd.c 2505                               else
                       8937 ; rs232cmd.c 2506                               {
                       8938 ; rs232cmd.c 2507                                       if ( pattern > -1)
001E34 9904FFFF        8940         CMP.W   R0,#0FFFFH
001E38 FD0C            8941         BLE     _438
                       8942 ; rs232cmd.c 2508                                       {
                       8943 ; rs232cmd.c 2509                                               if ( SetCBPattern( pattern) != OK
                            )
                       8945         CALL    _SetCBPattern
001E3A C4rrrrrr       +8945 ;       FCALL   _SetCBPattern
001E3E 9904FFFF        8946         CMP.W   R0,#0FFFFH
001E42 F30D            8947         BEQ     _445
                       8948 ; rs232cmd.c 2510                                                       SCPIError = ExecErr;
001E44 964842rr        8950         MOV.B   ES,#SEG( _SCPIError )
001E48 9908rrrr        8951         MOV.W   R0,#SOF( _SCPIError )
001E4C 9A08001D        8952         MOV.W   [R0],#01DH
                       8953 ; rs232cmd.c 2511                                       }
001E50 FE06            8955         BR      _445
001E50 FE06            8955         BR      _445
001E52                 8956 _438:
                       8957 ; rs232cmd.c 2512                                       else
                       8958 ; rs232cmd.c 2513                                               SCPIError = DataOutOfRange;
001E52 964842rr        8960         MOV.B   ES,#SEG( _SCPIError )
001E56 9908rrrr        8961         MOV.W   R0,#SOF( _SCPIError )
001E5A 9A080021        8962         MOV.W   [R0],#021H
                       8963 ; rs232cmd.c 2514                               }
                       8964 ; rs232cmd.c 2515                       }
                       8965 ; rs232cmd.c 2516               }
001E5E                 8967 _445:
                       8968 ; rs232cmd.c 2517       }
001E5E 2F30            8970         POP.W   R4, R5
001E60 D680            8972         RET
                       8975 ; rs232cmd.c 2518       
                       8976 ; rs232cmd.c 2519       /************************************************************************
                            **/
                       8977 ; rs232cmd.c 2520       /* CBGenSystem                                                           
                                                                                                                             
                                             RS232CMD.C     */
                       8978 ; rs232cmd.c 2521       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8979 ; rs232cmd.c 2522       /* Author:              Kim Engedahl, DEV, 98021                         
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 149

ADDR   CODE            LINE SOURCELINE
                       8980 ; rs232cmd.c 2523       /* Revised:             000616                                           
                                                                                                                             
                                                                                    */
                       8981 ; rs232cmd.c 2524       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8982 ; rs232cmd.c 2525       /* Function:    Handle the Colobar system-command.                       
                                                                                                            */
                       8983 ; rs232cmd.c 2526       /* Remarks:             This command will possibly change pattern and/or 
                            delay if                */
                       8984 ; rs232cmd.c 2527       /*            these are not valid in the selected system                 
                                                                                    */
                       8985 ; rs232cmd.c 2528       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8986 ; rs232cmd.c 2529       /* Updates:        --                                                    
                                                                                                                             
                                                                                                            */
                       8987 ; rs232cmd.c 2530       /************************************************************************
                            **/
                       8988 ; rs232cmd.c 2531       void CBGenSystem( void)
                       8989 ; rs232cmd.c 2532       {
                       8990         ALIGN   1
                       8992         PUBLIC  _CBGenSystem
001E62                 8993 _CBGenSystem:
001E62 0F30            8997         PUSH.W  R4, R5
                       9003 ; rs232cmd.c 2533               int system;
                       9004 ; rs232cmd.c 2534               char code *str;
                       9005 ; rs232cmd.c 2535       
                       9006 ; rs232cmd.c 2536               if ( CmdExecute && !SCPIError)
001E64 964842rr        9008         MOV.B   ES,#SEG( _CmdExecute )
001E68 9908rrrr        9009         MOV.W   R0,#SOF( _CmdExecute )
001E6C 8200            9010         MOV.B   R0L,[R0]
001E6E F379            9011         BEQ     _463
001E70 964842rr        9012         MOV.B   ES,#SEG( _SCPIError )
001E74 9908rrrr        9013         MOV.W   R0,#SOF( _SCPIError )
001E78 8A00            9014         MOV.W   R0,[R0]
001E7A F273            9015         BNE     _463
                       9016 ; rs232cmd.c 2537               {
                       9017 ; rs232cmd.c 2538                       if ( CmdRequest)
001E7C 964842rr        9019         MOV.B   ES,#SEG( _CmdRequest )
001E80 9908rrrr        9020         MOV.W   R0,#SOF( _CmdRequest )
001E84 8200            9021         MOV.B   R0L,[R0]
001E86 F33F            9022         BEQ     _453
                       9023 ; rs232cmd.c 2539                       {
                       9024 ; rs232cmd.c 2540                               if ( ParCnt)
001E88 964842rr        9026         MOV.B   ES,#SEG( _ParCnt )
001E8C 9908rrrr        9027         MOV.W   R0,#SOF( _ParCnt )
001E90 8200            9028         MOV.B   R0L,[R0]
001E92 F306            9029         BEQ     _450
                       9030 ; rs232cmd.c 2541                                       SCPIError = ParNotAllowed;
001E94 964842rr        9032         MOV.B   ES,#SEG( _SCPIError )
001E98 9908rrrr        9033         MOV.W   R0,#SOF( _SCPIError )
001E9C BA06            9034         MOV.W   [R0],#06H
001E9E FE61            9035         BR      _463
001E9E FE61            9035         BR      _463
001EA0                 9036 _450:
                       9037 ; rs232cmd.c 2542                               else
                       9038 ; rs232cmd.c 2543                               {
                       9039 ; rs232cmd.c 2544                                       str = SystemPar[CBSetup.System].LongName;
                            
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 150

ADDR   CODE            LINE SOURCELINE
001EA0 964842rr        9041         MOV.B   ES,#SEG( _CBSetup )
001EA4 9908rrrr        9042         MOV.W   R0,#SOF( _CBSetup )
001EA8 8200            9043         MOV.B   R0L,[R0]
001EAA E8000C          9044         MULU.B  R0L,#0CH
001EAD 8920            9045         MOV.W   R2,R0
001EAF B930            9046         MOVS.W  R3,#00H
001EB1 9918rrrr        9047         MOV.W   R1,#SEG( _SystemPar )
001EB5 9908rrrr        9048         MOV.W   R0,#SOF( _SystemPar )
001EB9 0902            9049         ADD.W   R0,R2
001EBB 1913            9050         ADDC.W  R1,R3
001EBD 862C43          9051         MOV.B   CS,R1L
001EC0 8820            9052         MOVC.W  R2,[R0+]
001EC2 99040000        9053         CMP.W   R0,#00H
001EC6 F202            9054         BNE     _464
001EC8 A64143          9055         ADDS.B  CS,#01H
001EC8 A6414300        9055         ADDS.B  CS,#01H
001ECC                 9056 _464:
001ECC 8830            9057         MOVC.W  R3,[R0+]
001ECE 8953            9058         MOV.W   R5,R3
001ED0 8942            9059         MOV.W   R4,R2
                       9061 ; rs232cmd.c 2545       
                       9062 ; rs232cmd.c 2546                                       while ( *str)                            
                                                                             
001ED2 866C43          9064         MOV.B   CS,R3L
001ED5 8062            9065         MOVC.B  R3L,[R2+]
001ED7 F312            9066         BEQ     _452
001ED7 F31200          9066         BEQ     _452
001EDA                 9067 _451:
                       9068 ; rs232cmd.c 2547                                               rs232putchar( *str++);
001EDA 8915            9070         MOV.W   R1,R5
001EDC 8904            9071         MOV.W   R0,R4
001EDE 862C43          9072         MOV.B   CS,R1L
001EE1 8020            9073         MOVC.B  R1L,[R0+]
001EE3 8102            9074         MOV.B   R0L,R1L
                       9075         CALL    _rs232putchar
001EE5 C4rrrrrr       +9075 ;       FCALL   _rs232putchar
001EE9 99400001        9076         ADD.W   R4,#01H
001EED 99510000        9077         ADDC.W  R5,#00H
001EF1 8915            9081         MOV.W   R1,R5
001EF3 8904            9082         MOV.W   R0,R4
001EF5 862C43          9083         MOV.B   CS,R1L
001EF8 8020            9084         MOVC.B  R1L,[R0+]
001EFA F2EF            9085         BNE     _451
001EFC                 9087 _452:
                       9088 ; rs232cmd.c 2548       
                       9089 ; rs232cmd.c 2549                                       rs232putchar('\n');
001EFC 91080A          9091         MOV.B   R0L,#0AH
                       9092         CALL    _rs232putchar
001EFF C4rrrrrr       +9092 ;       FCALL   _rs232putchar
                       9093 ; rs232cmd.c 2550                               }
                       9094 ; rs232cmd.c 2551                       }
001F03 FE2F            9096         BR      _463
001F03 FE2F00          9096         BR      _463
001F06                 9097 _453:
                       9098 ; rs232cmd.c 2552                       else
                       9099 ; rs232cmd.c 2553                       {
                       9100 ; rs232cmd.c 2554                               if ( ParCnt != 1)
001F06 964842rr        9102         MOV.B   ES,#SEG( _ParCnt )
001F0A 9908rrrr        9103         MOV.W   R0,#SOF( _ParCnt )
001F0E 8200            9104         MOV.B   R0L,[R0]
001F10 910401          9105         CMP.B   R0L,#01H
001F13 F307            9106         BEQ     _454
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 151

ADDR   CODE            LINE SOURCELINE
                       9107 ; rs232cmd.c 2555                                       SCPIError = SyntaxErr;
001F15 964842rr        9109         MOV.B   ES,#SEG( _SCPIError )
001F19 9908rrrr        9110         MOV.W   R0,#SOF( _SCPIError )
001F1D BA03            9111         MOV.W   [R0],#03H
001F1F FE21            9112         BR      _463
001F1F FE2100          9112         BR      _463
001F22                 9113 _454:
                       9114 ; rs232cmd.c 2556                               else
                       9115 ; rs232cmd.c 2557                               {
                       9116 ; rs232cmd.c 2558                                       system = FindParameter( Cmd, SystemPar);
001F22 9918rrrr        9118         MOV.W   R1,#SEG( _Cmd )
001F26 9908rrrr        9119         MOV.W   R0,#SOF( _Cmd )
001F2A 9938rrrr        9120         MOV.W   R3,#SEG( _SystemPar )
001F2E 9928rrrr        9121         MOV.W   R2,#SOF( _SystemPar )
001F32 C52026          9122         CALL    _FindParameter
                       9124 ; rs232cmd.c 2559       
                       9125 ; rs232cmd.c 2560                                       if ( system == PAL_PALID)                
                                                            // If line7, (PAL w/ID) ever should
001F35 99040001        9127         CMP.W   R0,#01H
001F39 F208            9128         BNE     _455
                       9129 ; rs232cmd.c 2561                                               SCPIError = DataOutOfRange;      
                                                    //  be supported remove this exception
001F3B 964842rr        9131         MOV.B   ES,#SEG( _SCPIError )
001F3F 9908rrrr        9132         MOV.W   R0,#SOF( _SCPIError )
001F43 9A080021        9133         MOV.W   [R0],#021H
001F47 FE0D            9134         BR      _463
001F47 FE0D00          9134         BR      _463
001F4A                 9135 _455:
                       9137 ; rs232cmd.c 2562                                       else                                     
                                    
                       9138 ; rs232cmd.c 2563                                       {
                       9139 ; rs232cmd.c 2564                                               if ( system > -1)
001F4A 9904FFFF        9141         CMP.W   R0,#0FFFFH
001F4E FD03            9142         BLE     _456
                       9143 ; rs232cmd.c 2565                                                       SetCBSystem( system);
                       9145         CALL    _SetCBSystem
001F50 C4rrrrrr       +9145 ;       FCALL   _SetCBSystem
001F54 FE06            9146         BR      _463
001F54 FE06            9146         BR      _463
001F56                 9147 _456:
                       9148 ; rs232cmd.c 2566                                               else
                       9149 ; rs232cmd.c 2567                                                       SCPIError = DataOutOfRang
                            e;
001F56 964842rr        9151         MOV.B   ES,#SEG( _SCPIError )
001F5A 9908rrrr        9152         MOV.W   R0,#SOF( _SCPIError )
001F5E 9A080021        9153         MOV.W   [R0],#021H
                       9154 ; rs232cmd.c 2568                                       }
                       9155 ; rs232cmd.c 2569                               }
                       9156 ; rs232cmd.c 2570                       }
                       9157 ; rs232cmd.c 2571               }
001F62                 9159 _463:
                       9160 ; rs232cmd.c 2572       }
001F62 2F30            9162         POP.W   R4, R5
001F64 D680            9164         RET
                       9167 ; rs232cmd.c 2573       
                       9168 ; rs232cmd.c 2574       /************************************************************************
                            **/
                       9169 ; rs232cmd.c 2575       /* CBGenDelay                                                            
                                                                                                                             
                                                     RS232CMD.C */
                       9170 ; rs232cmd.c 2576       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 152

ADDR   CODE            LINE SOURCELINE
                                                    */
                       9171 ; rs232cmd.c 2577       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9172 ; rs232cmd.c 2578       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       9173 ; rs232cmd.c 2579       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9174 ; rs232cmd.c 2580       /* Function:    Handle the Colorbar delay command.                       
                                                                                                            */
                       9175 ; rs232cmd.c 2581       /* Remarks:             Delay should be multiplied/divided with/by 256 to
                             conform                */
                       9176 ; rs232cmd.c 2582       /*                                              with the black burst timi
                            ng as the functions                                                             */
                       9177 ; rs232cmd.c 2583       /*                                              PrintSamplesToFLT/FLTToSa
                            mples are common to both the CBar       */
                       9178 ; rs232cmd.c 2584       /*                                              and BB timing. The CBar t
                            iming equals 1728/1716 samples                  */
                       9179 ; rs232cmd.c 2585       /*                                              (app. 37ns/sample), while
                             the BB timing equals 1728*256/         */
                       9180 ; rs232cmd.c 2586       /*                                              1716*256 samples (app. 0.
                            14 ns/sample).                                                                                  *
                            /
                       9181 ; rs232cmd.c 2587       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9182 ; rs232cmd.c 2588       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9183 ; rs232cmd.c 2589       /************************************************************************
                            **/
                       9184 ; rs232cmd.c 2590       void CBGenDelay( void)
                       9185 ; rs232cmd.c 2591       {
                       9186         ALIGN   1
                       9188         PUBLIC  _CBGenDelay
001F66                 9189 _CBGenDelay:
001F66 0F30            9193         PUSH.W  R4, R5
001F68 A978            9195         ADDS.W  R7,#08H
                       9202 ; rs232cmd.c 2592               int field, line;
                       9203 ; rs232cmd.c 2593               float offset;
                       9204 ; rs232cmd.c 2594               long samples;
                       9205 ; rs232cmd.c 2595       
                       9206 ; rs232cmd.c 2596               if ( CmdExecute && !SCPIError)
001F6A 964842rr        9208         MOV.B   ES,#SEG( _CmdExecute )
001F6E 9908rrrr        9209         MOV.W   R0,#SOF( _CmdExecute )
001F72 8200            9210         MOV.B   R0L,[R0]
001F74 F37A            9211         BEQ     _478
001F76 964842rr        9212         MOV.B   ES,#SEG( _SCPIError )
001F7A 9908rrrr        9213         MOV.W   R0,#SOF( _SCPIError )
001F7E 8A00            9214         MOV.W   R0,[R0]
001F80 F274            9215         BNE     _478
                       9216 ; rs232cmd.c 2597               {
                       9217 ; rs232cmd.c 2598                       if ( CmdRequest)
001F82 964842rr        9219         MOV.B   ES,#SEG( _CmdRequest )
001F86 9908rrrr        9220         MOV.W   R0,#SOF( _CmdRequest )
001F8A 8200            9221         MOV.B   R0L,[R0]
001F8C F31E            9222         BEQ     _469
                       9223 ; rs232cmd.c 2599                       {
                       9224 ; rs232cmd.c 2600                               if ( ParCnt)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 153

ADDR   CODE            LINE SOURCELINE
001F8E 964842rr        9226         MOV.B   ES,#SEG( _ParCnt )
001F92 9908rrrr        9227         MOV.W   R0,#SOF( _ParCnt )
001F96 8200            9228         MOV.B   R0L,[R0]
001F98 F306            9229         BEQ     _468
                       9230 ; rs232cmd.c 2601                                       SCPIError = ParNotAllowed;
001F9A 964842rr        9232         MOV.B   ES,#SEG( _SCPIError )
001F9E 9908rrrr        9233         MOV.W   R0,#SOF( _SCPIError )
001FA2 BA06            9234         MOV.W   [R0],#06H
001FA4 FE62            9235         BR      _478
001FA4 FE62            9235         BR      _478
001FA6                 9236 _468:
                       9237 ; rs232cmd.c 2602                               else
                       9238 ; rs232cmd.c 2603                               {
                       9239 ; rs232cmd.c 2604                                       PrintSamplesToFLT( CBSetup.System, CBSetu
                            p.Delay*256);
001FA6 964842rr        9241         MOV.B   ES,#SEG( _CBSetup )
001FAA 9908rrrr        9242         MOV.W   R0,#SOF( _CBSetup )
001FAE 8200            9243         MOV.B   R0L,[R0]
001FB0 964842rr        9244         MOV.B   ES,#SEG( _CBSetup+4 )
001FB4 9938rrrr        9245         MOV.W   R3,#SOF( _CBSetup+4 )
001FB8 8B23            9246         MOV.W   R2,[R3+]
001FBA 8A33            9247         MOV.W   R3,[R3]
001FBC DD28            9248         ASL.D   R2,#08H
001FBE C52268          9249         CALL    _PrintSamplesToFLT
                       9250 ; rs232cmd.c 2605       
                       9251 ; rs232cmd.c 2606                                       rs232putchar ( '\n');
001FC1 91080A          9253         MOV.B   R0L,#0AH
                       9254         CALL    _rs232putchar
001FC4 C4rrrrrr       +9254 ;       FCALL   _rs232putchar
                       9255 ; rs232cmd.c 2607                               }
                       9256 ; rs232cmd.c 2608                       }
001FC8 FE50            9258         BR      _478
001FC8 FE50            9258         BR      _478
001FCA                 9259 _469:
                       9260 ; rs232cmd.c 2609                       else
                       9261 ; rs232cmd.c 2610                       {
                       9262 ; rs232cmd.c 2611                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001FCA 964842rr        9264         MOV.B   ES,#SEG( _ParCnt )
001FCE 9908rrrr        9265         MOV.W   R0,#SOF( _ParCnt )
001FD2 8200            9266         MOV.B   R0L,[R0]
001FD4 910403          9267         CMP.B   R0L,#03H
001FD7 F21F            9268         BNE     _470
001FD9 9168rr          9269         MOV.B   R3L,#SEG( __lc_bs )
001FDC 7177            9270         XOR.B   R3H,R3H
001FDE 8927            9271         MOV.W   R2,R7
001FE0 91A8rr          9272         MOV.B   R5L,#SEG( __lc_bs )
001FE3 71BB            9273         XOR.B   R5H,R5H
001FE5 404702          9274         LEA     R4,R7+2
001FE8 9128rr          9275         MOV.B   R1L,#SEG( __lc_bs )
001FEB 7133            9276         XOR.B   R1H,R1H
001FED 400704          9277         LEA     R0,R7+4
001FF0 0F03            9278         PUSH.W  R0, R1
001FF2 0F30            9280         PUSH.W  R4, R5
001FF4 0F0C            9282         PUSH.W  R2, R3
001FF6 9938rrrr        9284         MOV.W   R3,#SEG( _295 )
001FFA 9928rrrr        9285         MOV.W   R2,#SOF( _295 )
001FFE 0F0C            9286         PUSH.W  R2, R3
002000 9918rrrr        9288         MOV.W   R1,#SEG( _Cmd )
002004 9908rrrr        9289         MOV.W   R0,#SOF( _Cmd )
                       9290         CALL    _sscanf
002008 C4rrrrrr       +9290 ;       FCALL   _sscanf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 154

ADDR   CODE            LINE SOURCELINE
00200C 99700010        9291         ADD.W   R7,#010H
002010 99040003        9293         CMP.W   R0,#03H
002014 F306            9294         BEQ     _471
002014 F306            9294         BEQ     _471
002016                 9295 _470:
                       9296 ; rs232cmd.c 2612                                       SCPIError = SyntaxErr;
002016 964842rr        9298         MOV.B   ES,#SEG( _SCPIError )
00201A 9908rrrr        9299         MOV.W   R0,#SOF( _SCPIError )
00201E BA03            9300         MOV.W   [R0],#03H
002020 FE24            9301         BR      _478
002020 FE24            9301         BR      _478
002022                 9302 _471:
                       9303 ; rs232cmd.c 2613                               else
                       9304 ; rs232cmd.c 2614                               {
                       9305 ; rs232cmd.c 2615                                       if (( samples = FLTToSamples( CBSetup.Sys
                            tem, field, line, offset)) == -1)
002022 964842rr        9307         MOV.B   ES,#SEG( _CBSetup )
002026 9908rrrr        9308         MOV.W   R0,#SOF( _CBSetup )
00202A 8200            9309         MOV.B   R0L,[R0]
00202C 8A17            9310         MOV.W   R1,[R7]
00202E 8C2702          9311         MOV.W   R2,[R7+2]
002031 8C5706          9312         MOV.W   R5,[R7+6]
002034 8C4704          9313         MOV.W   R4,[R7+4]
002037 0F30            9314         PUSH.W  R4, R5
002039 C51FEF          9316         CALL    _FLTToSamples
00203C A974            9317         ADDS.W  R7,#04H
00203E 8931            9319         MOV.W   R3,R1
002040 8920            9320         MOV.W   R2,R0
002042 9934FFFF        9321         CMP.W   R3,#0FFFFH
002046 F202            9322         BNE     _481
002048 9924FFFF        9323         CMP.W   R2,#0FFFFH
002048 9924FFFF        9323         CMP.W   R2,#0FFFFH
00204C                 9324 _481:
00204C F207            9325         BNE     _472
                       9326 ; rs232cmd.c 2616                                               SCPIError = ExecErr;
00204E 964842rr        9328         MOV.B   ES,#SEG( _SCPIError )
002052 9908rrrr        9329         MOV.W   R0,#SOF( _SCPIError )
002056 9A08001D        9330         MOV.W   [R0],#01DH
00205A FE07            9331         BR      _478
00205A FE07            9331         BR      _478
00205C                 9332 _472:
                       9333 ; rs232cmd.c 2617                                       else            
                       9334 ; rs232cmd.c 2618                                               SetCBDelay( samples/256);
00205C B930            9336         MOV.W   R3,#00H
00205E 99280100        9337         MOV.W   R2,#0100H
002062 C4rrrrrr        9338         FCALL   __SDIVL
                       9339         CALL    _SetCBDelay
002066 C4rrrrrr       +9339 ;       FCALL   _SetCBDelay
                       9340 ; rs232cmd.c 2619                               }
                       9341 ; rs232cmd.c 2620                       }
                       9342 ; rs232cmd.c 2621               }
00206A                 9344 _478:
                       9345 ; rs232cmd.c 2622       }
00206A 99700008        9347         ADD.W   R7,#08H
00206E 2F30            9349         POP.W   R4, R5
002070 D680            9351         RET
                       9353 ; rs232cmd.c 2623       
                       9354 ; rs232cmd.c 2624       /************************************************************************
                            **/
                       9355 ; rs232cmd.c 2625       /* CBGenScHPhase                                                         
                                                                                                                             
                                                     RS232CMD.C     */
                       9356 ; rs232cmd.c 2626       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 155

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                       9357 ; rs232cmd.c 2627       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9358 ; rs232cmd.c 2628       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       9359 ; rs232cmd.c 2629       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9360 ; rs232cmd.c 2630       /* Function:    Handle the Colorbar ScH-Phase-command.                   
                                                                                            */
                       9361 ; rs232cmd.c 2631       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9362 ; rs232cmd.c 2632       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9363 ; rs232cmd.c 2633       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9364 ; rs232cmd.c 2634       /************************************************************************
                            **/
                       9365 ; rs232cmd.c 2635       void CBGenScHPhase( void)
                       9366 ; rs232cmd.c 2636       {
                       9367         ALIGN   1
                       9369         PUBLIC  _CBGenScHPhase
002072                 9370 _CBGenScHPhase:
002072 A97E            9374         ADDS.W  R7,#0EH
                       9377 ; rs232cmd.c 2637               int schphase;
                       9378 ; rs232cmd.c 2638       
                       9379 ; rs232cmd.c 2639               if ( CmdExecute && !SCPIError)
002074 964842rr        9381         MOV.B   ES,#SEG( _CmdExecute )
002078 9908rrrr        9382         MOV.W   R0,#SOF( _CmdExecute )
00207C 8200            9383         MOV.B   R0L,[R0]
00207E F35A            9384         BEQ     _493
002080 964842rr        9385         MOV.B   ES,#SEG( _SCPIError )
002084 9908rrrr        9386         MOV.W   R0,#SOF( _SCPIError )
002088 8A00            9387         MOV.W   R0,[R0]
00208A F254            9388         BNE     _493
                       9389 ; rs232cmd.c 2640               {
                       9390 ; rs232cmd.c 2641                       if ( CmdRequest)
00208C 964842rr        9392         MOV.B   ES,#SEG( _CmdRequest )
002090 9908rrrr        9393         MOV.W   R0,#SOF( _CmdRequest )
002094 8200            9394         MOV.B   R0L,[R0]
002096 F31C            9395         BEQ     _483
                       9396 ; rs232cmd.c 2642                       {
                       9397 ; rs232cmd.c 2643                               if ( ParCnt)
002098 964842rr        9399         MOV.B   ES,#SEG( _ParCnt )
00209C 9908rrrr        9400         MOV.W   R0,#SOF( _ParCnt )
0020A0 8200            9401         MOV.B   R0L,[R0]
0020A2 F306            9402         BEQ     _482
                       9403 ; rs232cmd.c 2644                                       SCPIError = ParNotAllowed;
0020A4 964842rr        9405         MOV.B   ES,#SEG( _SCPIError )
0020A8 9908rrrr        9406         MOV.W   R0,#SOF( _SCPIError )
0020AC BA06            9407         MOV.W   [R0],#06H
0020AE FE42            9408         BR      _493
0020AE FE42            9408         BR      _493
0020B0                 9409 _482:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 156

ADDR   CODE            LINE SOURCELINE
                       9410 ; rs232cmd.c 2645                               else
                       9411 ; rs232cmd.c 2646                                       rs232printf( 6, "%d\n", CBSetup.ScHPhase)
                            ;
0020B0 B906            9413         MOV.W   R0,#06H
0020B2 964842rr        9414         MOV.B   ES,#SEG( _CBSetup+8 )
0020B6 9918rrrr        9415         MOV.W   R1,#SOF( _CBSetup+8 )
0020BA 8A11            9416         MOV.W   R1,[R1]
0020BC 0F02            9417         PUSH.W  R1
0020BE 9938rrrr        9419         MOV.W   R3,#SEG( _9 )
0020C2 9928rrrr        9420         MOV.W   R2,#SOF( _9 )
0020C6 0F0C            9421         PUSH.W  R2, R3
                       9423         CALL    _rs232printf
0020C8 C4rrrrrr       +9423 ;       FCALL   _rs232printf
0020CC A976            9424         ADDS.W  R7,#06H
                       9426 ; rs232cmd.c 2647                       }
0020CE FE32            9428         BR      _493
0020CE FE32            9428         BR      _493
0020D0                 9429 _483:
                       9430 ; rs232cmd.c 2648                       else
                       9431 ; rs232cmd.c 2649                       {
                       9432 ; rs232cmd.c 2650                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &schph
                            ase) != 1))
0020D0 964842rr        9434         MOV.B   ES,#SEG( _ParCnt )
0020D4 9908rrrr        9435         MOV.W   R0,#SOF( _ParCnt )
0020D8 8200            9436         MOV.B   R0L,[R0]
0020DA 910401          9437         CMP.B   R0L,#01H
0020DD F215            9438         BNE     _484
0020DF 9918rrrr        9439         MOV.W   R1,#SEG( _Cmd )
0020E3 9908rrrr        9440         MOV.W   R0,#SOF( _Cmd )
0020E7 9168rr          9441         MOV.B   R3L,#SEG( __lc_bs )
0020EA 7177            9442         XOR.B   R3H,R3H
0020EC 8927            9443         MOV.W   R2,R7
0020EE 0F0C            9444         PUSH.W  R2, R3
0020F0 9938rrrr        9446         MOV.W   R3,#SEG( _10 )
0020F4 9928rrrr        9447         MOV.W   R2,#SOF( _10 )
0020F8 0F0C            9448         PUSH.W  R2, R3
                       9450         CALL    _sscanf
0020FA C4rrrrrr       +9450 ;       FCALL   _sscanf
0020FE 99700008        9451         ADD.W   R7,#08H
002102 99040001        9453         CMP.W   R0,#01H
002106 F306            9454         BEQ     _485
002106 F306            9454         BEQ     _485
002108                 9455 _484:
                       9456 ; rs232cmd.c 2651                                       SCPIError = SyntaxErr;
002108 964842rr        9458         MOV.B   ES,#SEG( _SCPIError )
00210C 9908rrrr        9459         MOV.W   R0,#SOF( _SCPIError )
002110 BA03            9460         MOV.W   [R0],#03H
002112 FE10            9461         BR      _493
002112 FE10            9461         BR      _493
002114                 9462 _485:
                       9463 ; rs232cmd.c 2652                               else
                       9464 ; rs232cmd.c 2653                               {
                       9465 ; rs232cmd.c 2654                                       if (( schphase < ScHPhaseLow) || ( schpha
                            se > ScHPhaseHigh))
002114 9A74FF4D        9467         CMP.W   [R7],#0FF4DH
002118 FB03            9468         BLT     _486
00211A 9A7400B4        9469         CMP.W   [R7],#0B4H
00211E FD07            9470         BLE     _487
00211E FD07            9470         BLE     _487
002120                 9471 _486:
                       9472 ; rs232cmd.c 2655                                               SCPIError = DataOutOfRange;
002120 964842rr        9474         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 157

ADDR   CODE            LINE SOURCELINE
002124 9908rrrr        9475         MOV.W   R0,#SOF( _SCPIError )
002128 9A080021        9476         MOV.W   [R0],#021H
00212C FE03            9477         BR      _493
00212C FE03            9477         BR      _493
00212E                 9478 _487:
                       9479 ; rs232cmd.c 2656                                       else
                       9480 ; rs232cmd.c 2657                                               SetCBScHPhase( schphase);
00212E 8A07            9482         MOV.W   R0,[R7]
                       9483         CALL    _SetCBScHPhase
002130 C4rrrrrr       +9483 ;       FCALL   _SetCBScHPhase
                       9484 ; rs232cmd.c 2658                               }
                       9485 ; rs232cmd.c 2659                       }
                       9486 ; rs232cmd.c 2660               }
002134                 9488 _493:
                       9489 ; rs232cmd.c 2661       }
002134 A972            9491         ADDS.W  R7,#02H
002136 D680            9493         RET
                       9495 ; rs232cmd.c 2662       
                       9496 ; rs232cmd.c 2663       /************************************************************************
                            **/
                       9497 ; rs232cmd.c 2664       /* CBGenEmbAudioSignal                                                   
                                                                                                                             
                            RS232CMD.C      */
                       9498 ; rs232cmd.c 2665       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9499 ; rs232cmd.c 2666       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9500 ; rs232cmd.c 2667       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       9501 ; rs232cmd.c 2668       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9502 ; rs232cmd.c 2669       /* Function:    Handle the Colorbar embedded audio signal                
                                                                                            */
                       9503 ; rs232cmd.c 2670       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9504 ; rs232cmd.c 2671       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9505 ; rs232cmd.c 2672       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9506 ; rs232cmd.c 2673       /************************************************************************
                            **/
                       9507 ; rs232cmd.c 2674       void CBGenEmbAudioSignal( void)
                       9508 ; rs232cmd.c 2675       {
                       9509         ALIGN   1
                       9511         PUBLIC  _CBGenEmbAudioSignal
002138                 9512 _CBGenEmbAudioSignal:
002138 0F30            9516         PUSH.W  R4, R5
                       9522 ; rs232cmd.c 2676               int signal;
                       9523 ; rs232cmd.c 2677               char code *str;
                       9524 ; rs232cmd.c 2678       
                       9525 ; rs232cmd.c 2679               if ( CmdExecute && !SCPIError)
00213A 964842rr        9527         MOV.B   ES,#SEG( _CmdExecute )
00213E 9908rrrr        9528         MOV.W   R0,#SOF( _CmdExecute )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 158

ADDR   CODE            LINE SOURCELINE
002142 8200            9529         MOV.B   R0L,[R0]
002144 F36F            9530         BEQ     _509
002146 964842rr        9531         MOV.B   ES,#SEG( _SCPIError )
00214A 9908rrrr        9532         MOV.W   R0,#SOF( _SCPIError )
00214E 8A00            9533         MOV.W   R0,[R0]
002150 F269            9534         BNE     _509
                       9535 ; rs232cmd.c 2680               {
                       9536 ; rs232cmd.c 2681                       if ( CmdRequest)
002152 964842rr        9538         MOV.B   ES,#SEG( _CmdRequest )
002156 9908rrrr        9539         MOV.W   R0,#SOF( _CmdRequest )
00215A 8200            9540         MOV.B   R0L,[R0]
00215C F33F            9541         BEQ     _501
                       9542 ; rs232cmd.c 2682                       {
                       9543 ; rs232cmd.c 2683                               if ( ParCnt)
00215E 964842rr        9545         MOV.B   ES,#SEG( _ParCnt )
002162 9908rrrr        9546         MOV.W   R0,#SOF( _ParCnt )
002166 8200            9547         MOV.B   R0L,[R0]
002168 F306            9548         BEQ     _498
                       9549 ; rs232cmd.c 2684                                       SCPIError = ParNotAllowed;
00216A 964842rr        9551         MOV.B   ES,#SEG( _SCPIError )
00216E 9908rrrr        9552         MOV.W   R0,#SOF( _SCPIError )
002172 BA06            9553         MOV.W   [R0],#06H
002174 FE57            9554         BR      _509
002174 FE57            9554         BR      _509
002176                 9555 _498:
                       9556 ; rs232cmd.c 2685                               else
                       9557 ; rs232cmd.c 2686                               {
                       9558 ; rs232cmd.c 2687                                       str = EmbAudioSignalPar[CBSetup.EmbAudioS
                            ignal].LongName;
002176 964842rr        9560         MOV.B   ES,#SEG( _CBSetup+10 )
00217A 9908rrrr        9561         MOV.W   R0,#SOF( _CBSetup+10 )
00217E 8200            9562         MOV.B   R0L,[R0]
002180 E8000C          9563         MULU.B  R0L,#0CH
002183 8920            9564         MOV.W   R2,R0
002185 B930            9565         MOVS.W  R3,#00H
002187 9918rrrr        9566         MOV.W   R1,#SEG( _EmbAudioSignalPar )
00218B 9908rrrr        9567         MOV.W   R0,#SOF( _EmbAudioSignalPar )
00218F 0902            9568         ADD.W   R0,R2
002191 1913            9569         ADDC.W  R1,R3
002193 862C43          9570         MOV.B   CS,R1L
002196 8820            9571         MOVC.W  R2,[R0+]
002198 99040000        9572         CMP.W   R0,#00H
00219C F202            9573         BNE     _510
00219E A64143          9574         ADDS.B  CS,#01H
00219E A6414300        9574         ADDS.B  CS,#01H
0021A2                 9575 _510:
0021A2 8830            9576         MOVC.W  R3,[R0+]
0021A4 8953            9577         MOV.W   R5,R3
0021A6 8942            9578         MOV.W   R4,R2
                       9580 ; rs232cmd.c 2688       
                       9581 ; rs232cmd.c 2689                                       while ( *str)
0021A8 866C43          9583         MOV.B   CS,R3L
0021AB 8062            9584         MOVC.B  R3L,[R2+]
0021AD F312            9585         BEQ     _500
0021AD F31200          9585         BEQ     _500
0021B0                 9586 _499:
                       9587 ; rs232cmd.c 2690                                               rs232putchar( *str++);
0021B0 8915            9589         MOV.W   R1,R5
0021B2 8904            9590         MOV.W   R0,R4
0021B4 862C43          9591         MOV.B   CS,R1L
0021B7 8020            9592         MOVC.B  R1L,[R0+]
0021B9 8102            9593         MOV.B   R0L,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 159

ADDR   CODE            LINE SOURCELINE
                       9594         CALL    _rs232putchar
0021BB C4rrrrrr       +9594 ;       FCALL   _rs232putchar
0021BF 99400001        9595         ADD.W   R4,#01H
0021C3 99510000        9596         ADDC.W  R5,#00H
0021C7 8915            9600         MOV.W   R1,R5
0021C9 8904            9601         MOV.W   R0,R4
0021CB 862C43          9602         MOV.B   CS,R1L
0021CE 8020            9603         MOVC.B  R1L,[R0+]
0021D0 F2EF            9604         BNE     _499
0021D2                 9606 _500:
                       9607 ; rs232cmd.c 2691       
                       9608 ; rs232cmd.c 2692                                       rs232putchar('\n');
0021D2 91080A          9610         MOV.B   R0L,#0AH
                       9611         CALL    _rs232putchar
0021D5 C4rrrrrr       +9611 ;       FCALL   _rs232putchar
                       9612 ; rs232cmd.c 2693                               }
                       9613 ; rs232cmd.c 2694                       }
0021D9 FE25            9615         BR      _509
0021D9 FE2500          9615         BR      _509
0021DC                 9616 _501:
                       9617 ; rs232cmd.c 2695                       else
                       9618 ; rs232cmd.c 2696                       {
                       9619 ; rs232cmd.c 2697                               if ( ParCnt != 1)
0021DC 964842rr        9621         MOV.B   ES,#SEG( _ParCnt )
0021E0 9908rrrr        9622         MOV.W   R0,#SOF( _ParCnt )
0021E4 8200            9623         MOV.B   R0L,[R0]
0021E6 910401          9624         CMP.B   R0L,#01H
0021E9 F307            9625         BEQ     _502
                       9626 ; rs232cmd.c 2698                                       SCPIError = SyntaxErr;
0021EB 964842rr        9628         MOV.B   ES,#SEG( _SCPIError )
0021EF 9908rrrr        9629         MOV.W   R0,#SOF( _SCPIError )
0021F3 BA03            9630         MOV.W   [R0],#03H
0021F5 FE17            9631         BR      _509
0021F5 FE1700          9631         BR      _509
0021F8                 9632 _502:
                       9633 ; rs232cmd.c 2699                               else
                       9634 ; rs232cmd.c 2700                               {
                       9635 ; rs232cmd.c 2701                                       signal = FindParameter( Cmd, EmbAudioSign
                            alPar);
0021F8 9918rrrr        9637         MOV.W   R1,#SEG( _Cmd )
0021FC 9908rrrr        9638         MOV.W   R0,#SOF( _Cmd )
002200 9938rrrr        9639         MOV.W   R3,#SEG( _EmbAudioSignalPar )
002204 9928rrrr        9640         MOV.W   R2,#SOF( _EmbAudioSignalPar )
002208 C51EBB          9641         CALL    _FindParameter
                       9643 ; rs232cmd.c 2702               
                       9644 ; rs232cmd.c 2703                                       if ( signal > -1)
00220B 9904FFFF        9646         CMP.W   R0,#0FFFFH
00220F FD04            9647         BLE     _503
                       9649 ; rs232cmd.c 2704                                               SetCBEmbAudioSignal( signal);
                       9651         CALL    _SetCBEmbAudioSignal
002211 C4rrrrrr       +9651 ;       FCALL   _SetCBEmbAudioSignal
002215 FE07            9652         BR      _509
002215 FE0700          9652         BR      _509
002218                 9653 _503:
                       9654 ; rs232cmd.c 2705                                       else
                       9655 ; rs232cmd.c 2706                                               SCPIError = DataOutOfRange;
002218 964842rr        9657         MOV.B   ES,#SEG( _SCPIError )
00221C 9908rrrr        9658         MOV.W   R0,#SOF( _SCPIError )
002220 9A080021        9659         MOV.W   [R0],#021H
                       9660 ; rs232cmd.c 2707                               }
                       9661 ; rs232cmd.c 2708                       }
                       9662 ; rs232cmd.c 2709               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 160

ADDR   CODE            LINE SOURCELINE
002224                 9664 _509:
                       9665 ; rs232cmd.c 2710       }
002224 2F30            9667         POP.W   R4, R5
002226 D680            9669         RET
                       9672 ; rs232cmd.c 2711       
                       9673 ; rs232cmd.c 2712       /************************************************************************
                            **/
                       9674 ; rs232cmd.c 2713       /* AudioGenOutput                                                        
                                                                                                                             
                                                 RS232CMD.C */
                       9675 ; rs232cmd.c 2714       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9676 ; rs232cmd.c 2715       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                       9677 ; rs232cmd.c 2716       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                       9678 ; rs232cmd.c 2717       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9679 ; rs232cmd.c 2718       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                       9680 ; rs232cmd.c 2719       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9681 ; rs232cmd.c 2720       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9682 ; rs232cmd.c 2721       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9683 ; rs232cmd.c 2722       /************************************************************************
                            **/
                       9684 ; rs232cmd.c 2723       void AudioGenOutput( void)
                       9685 ; rs232cmd.c 2724       {
                       9686         ALIGN   1
                       9688         PUBLIC  _AudioGenOutput
002228                 9689 _AudioGenOutput:
002228 0F30            9693         PUSH.W  R4, R5
                       9699 ; rs232cmd.c 2725               int output;
                       9700 ; rs232cmd.c 2726               char code *str;
                       9701 ; rs232cmd.c 2727       
                       9702 ; rs232cmd.c 2728               if ( CmdExecute && !SCPIError)
00222A 964842rr        9704         MOV.B   ES,#SEG( _CmdExecute )
00222E 9908rrrr        9705         MOV.W   R0,#SOF( _CmdExecute )
002232 8200            9706         MOV.B   R0L,[R0]
002234 F377            9707         BEQ     _525
002236 964842rr        9708         MOV.B   ES,#SEG( _SCPIError )
00223A 9908rrrr        9709         MOV.W   R0,#SOF( _SCPIError )
00223E 8A00            9710         MOV.W   R0,[R0]
002240 F271            9711         BNE     _525
                       9712 ; rs232cmd.c 2729               {
                       9713 ; rs232cmd.c 2730                       if ( CmdRequest)
002242 964842rr        9715         MOV.B   ES,#SEG( _CmdRequest )
002246 9908rrrr        9716         MOV.W   R0,#SOF( _CmdRequest )
00224A 8200            9717         MOV.B   R0L,[R0]
00224C F33F            9718         BEQ     _516
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 161

ADDR   CODE            LINE SOURCELINE
                       9719 ; rs232cmd.c 2731                       {
                       9720 ; rs232cmd.c 2732                               if ( ParCnt)
00224E 964842rr        9722         MOV.B   ES,#SEG( _ParCnt )
002252 9908rrrr        9723         MOV.W   R0,#SOF( _ParCnt )
002256 8200            9724         MOV.B   R0L,[R0]
002258 F306            9725         BEQ     _513
                       9726 ; rs232cmd.c 2733                                       SCPIError = ParNotAllowed;
00225A 964842rr        9728         MOV.B   ES,#SEG( _SCPIError )
00225E 9908rrrr        9729         MOV.W   R0,#SOF( _SCPIError )
002262 BA06            9730         MOV.W   [R0],#06H
002264 FE5F            9731         BR      _525
002264 FE5F            9731         BR      _525
002266                 9732 _513:
                       9733 ; rs232cmd.c 2734                               else
                       9734 ; rs232cmd.c 2735                               {
                       9735 ; rs232cmd.c 2736                                       str = AudioOutputPar[AudioOutput].LongNam
                            e;
002266 964842rr        9737         MOV.B   ES,#SEG( _AudioOutput )
00226A 9908rrrr        9738         MOV.W   R0,#SOF( _AudioOutput )
00226E 8A00            9739         MOV.W   R0,[R0]
002270 E900000C        9740         MULU.W  R0,#0CH
002274 8920            9741         MOV.W   R2,R0
002276 B930            9742         MOVS.W  R3,#00H
002278 9918rrrr        9743         MOV.W   R1,#SEG( _AudioOutputPar )
00227C 9908rrrr        9744         MOV.W   R0,#SOF( _AudioOutputPar )
002280 0902            9745         ADD.W   R0,R2
002282 1913            9746         ADDC.W  R1,R3
002284 862C43          9747         MOV.B   CS,R1L
002287 8820            9748         MOVC.W  R2,[R0+]
002289 99040000        9749         CMP.W   R0,#00H
00228D F202            9750         BNE     _526
00228F A64143          9751         ADDS.B  CS,#01H
00228F A64143          9751         ADDS.B  CS,#01H
002292                 9752 _526:
002292 8830            9753         MOVC.W  R3,[R0+]
002294 8953            9754         MOV.W   R5,R3
002296 8942            9755         MOV.W   R4,R2
                       9757 ; rs232cmd.c 2737       
                       9758 ; rs232cmd.c 2738                                       while ( *str)
002298 866C43          9760         MOV.B   CS,R3L
00229B 8062            9761         MOVC.B  R3L,[R2+]
00229D F312            9762         BEQ     _515
00229D F31200          9762         BEQ     _515
0022A0                 9763 _514:
                       9764 ; rs232cmd.c 2739                                               rs232putchar( *str++);
0022A0 8915            9766         MOV.W   R1,R5
0022A2 8904            9767         MOV.W   R0,R4
0022A4 862C43          9768         MOV.B   CS,R1L
0022A7 8020            9769         MOVC.B  R1L,[R0+]
0022A9 8102            9770         MOV.B   R0L,R1L
                       9771         CALL    _rs232putchar
0022AB C4rrrrrr       +9771 ;       FCALL   _rs232putchar
0022AF 99400001        9772         ADD.W   R4,#01H
0022B3 99510000        9773         ADDC.W  R5,#00H
0022B7 8915            9777         MOV.W   R1,R5
0022B9 8904            9778         MOV.W   R0,R4
0022BB 862C43          9779         MOV.B   CS,R1L
0022BE 8020            9780         MOVC.B  R1L,[R0+]
0022C0 F2EF            9781         BNE     _514
0022C2                 9783 _515:
                       9784 ; rs232cmd.c 2740       
                       9785 ; rs232cmd.c 2741                                       rs232putchar('\n');
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 162

ADDR   CODE            LINE SOURCELINE
0022C2 91080A          9787         MOV.B   R0L,#0AH
                       9788         CALL    _rs232putchar
0022C5 C4rrrrrr       +9788 ;       FCALL   _rs232putchar
                       9789 ; rs232cmd.c 2742                               }
                       9790 ; rs232cmd.c 2743                       }
0022C9 FE2D            9792         BR      _525
0022C9 FE2D00          9792         BR      _525
0022CC                 9793 _516:
                       9794 ; rs232cmd.c 2744                       else
                       9795 ; rs232cmd.c 2745                       {
                       9796 ; rs232cmd.c 2746                               if ( ParCnt != 1)
0022CC 964842rr        9798         MOV.B   ES,#SEG( _ParCnt )
0022D0 9908rrrr        9799         MOV.W   R0,#SOF( _ParCnt )
0022D4 8200            9800         MOV.B   R0L,[R0]
0022D6 910401          9801         CMP.B   R0L,#01H
0022D9 F307            9802         BEQ     _517
                       9803 ; rs232cmd.c 2747                                       SCPIError = SyntaxErr;
0022DB 964842rr        9805         MOV.B   ES,#SEG( _SCPIError )
0022DF 9908rrrr        9806         MOV.W   R0,#SOF( _SCPIError )
0022E3 BA03            9807         MOV.W   [R0],#03H
0022E5 FE1F            9808         BR      _525
0022E5 FE1F00          9808         BR      _525
0022E8                 9809 _517:
                       9810 ; rs232cmd.c 2748                               else
                       9811 ; rs232cmd.c 2749                               {
                       9812 ; rs232cmd.c 2750                                       output = FindParameter( Cmd, AudioOutputP
                            ar);
0022E8 9918rrrr        9814         MOV.W   R1,#SEG( _Cmd )
0022EC 9908rrrr        9815         MOV.W   R0,#SOF( _Cmd )
0022F0 9938rrrr        9816         MOV.W   R3,#SEG( _AudioOutputPar )
0022F4 9928rrrr        9817         MOV.W   R2,#SOF( _AudioOutputPar )
0022F8 C51E43          9818         CALL    _FindParameter
                       9820 ; rs232cmd.c 2751               
                       9821 ; rs232cmd.c 2752                                       if ( output > -1)
0022FB 9904FFFF        9823         CMP.W   R0,#0FFFFH
0022FF FD0C            9824         BLE     _518
                       9825 ; rs232cmd.c 2753                                       {
                       9826 ; rs232cmd.c 2754                                               if ( SetAudioOutput( output) == F
                            AIL)
                       9828         CALL    _SetAudioOutput
002301 C4rrrrrr       +9828 ;       FCALL   _SetAudioOutput
002305 6900            9830         OR.W    R0,R0
002307 F20E            9831         BNE     _525
                       9832 ; rs232cmd.c 2755                                                       SCPIError = ExecErr;
002309 964842rr        9834         MOV.B   ES,#SEG( _SCPIError )
00230D 9908rrrr        9835         MOV.W   R0,#SOF( _SCPIError )
002311 9A08001D        9836         MOV.W   [R0],#01DH
                       9837 ; rs232cmd.c 2756                                       }
002315 FE07            9839         BR      _525
002315 FE0700          9839         BR      _525
002318                 9840 _518:
                       9841 ; rs232cmd.c 2757                                       else
                       9842 ; rs232cmd.c 2758                                               SCPIError = DataOutOfRange;
002318 964842rr        9844         MOV.B   ES,#SEG( _SCPIError )
00231C 9908rrrr        9845         MOV.W   R0,#SOF( _SCPIError )
002320 9A080021        9846         MOV.W   [R0],#021H
                       9847 ; rs232cmd.c 2759                               }
                       9848 ; rs232cmd.c 2760                       }
                       9849 ; rs232cmd.c 2761               }
002324                 9851 _525:
                       9852 ; rs232cmd.c 2762       }
002324 2F30            9854         POP.W   R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 163

ADDR   CODE            LINE SOURCELINE
002326 D680            9856         RET
                       9859 ; rs232cmd.c 2763       
                       9860 ; rs232cmd.c 2764       /************************************************************************
                            **/
                       9861 ; rs232cmd.c 2765       /* AudioGenAnalog                                                        
                                                                                                                             
                                                 RS232CMD.C */
                       9862 ; rs232cmd.c 2766       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9863 ; rs232cmd.c 2767       /* Author:              Kim Engedahl, DEV, 000526                        
                                                                                                                             
                                    */
                       9864 ; rs232cmd.c 2768       /* Revised:             000705                                           
                                                                                                                             
                                                                                    */
                       9865 ; rs232cmd.c 2769       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9866 ; rs232cmd.c 2770       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                       9867 ; rs232cmd.c 2771       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                       9868 ; rs232cmd.c 2772       /* Returns:       --                                                     
                                                                                                                             
                                                                                                            */
                       9869 ; rs232cmd.c 2773       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9870 ; rs232cmd.c 2774       /************************************************************************
                            **/
                       9871 ; rs232cmd.c 2775       void AudioGenAnalog( void)
                       9872 ; rs232cmd.c 2776       {
                       9873         ALIGN   1
                       9875         PUBLIC  _AudioGenAnalog
002328                 9876 _AudioGenAnalog:
002328 0F70            9880         PUSH.W  R4, R5, R6
                       9886 ; rs232cmd.c 2777               char code *str;
                       9887 ; rs232cmd.c 2778               int level;
                       9888 ; rs232cmd.c 2779       
                       9889 ; rs232cmd.c 2780               if ( CmdExecute && !SCPIError)
00232A 964842rr        9891         MOV.B   ES,#SEG( _CmdExecute )
00232E 9908rrrr        9892         MOV.W   R0,#SOF( _CmdExecute )
002332 8200            9893         MOV.B   R0L,[R0]
                       9894         BEQ     _601
002334 F202           +9894 ;       BNE     _LG_604
002336 D500F6         +9894 ;       JMP.L   _601
00233A D500F600       +9894 ;       JMP.L   _601
00233A                +9894 _LG_604:
00233A 964842rr        9895         MOV.B   ES,#SEG( _SCPIError )
00233E 9908rrrr        9896         MOV.W   R0,#SOF( _SCPIError )
002342 8A00            9897         MOV.W   R0,[R0]
                       9898         BNE     _601
002344 F302           +9898 ;       BEQ     _LG_606
002346 D500EE         +9898 ;       JMP.L   _601
00234A D500EE00       +9898 ;       JMP.L   _601
00234A                +9898 _LG_606:
                       9899 ; rs232cmd.c 2781               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 164

ADDR   CODE            LINE SOURCELINE
                       9900 ; rs232cmd.c 2782                       if ( !CmdRequest)
00234A 964842rr        9902         MOV.B   ES,#SEG( _CmdRequest )
00234E 9908rrrr        9903         MOV.W   R0,#SOF( _CmdRequest )
002352 8200            9904         MOV.B   R0L,[R0]
002354 F207            9905         BNE     _530
                       9906 ; rs232cmd.c 2783                                       SCPIError = SyntaxErr;
002356 964842rr        9908         MOV.B   ES,#SEG( _SCPIError )
00235A 9908rrrr        9909         MOV.W   R0,#SOF( _SCPIError )
00235E BA03            9910         MOV.W   [R0],#03H
                       9911         BR      _601
002360 D500E1         +9911         JMP.L   _601
002360 D500E100       +9911         JMP.L   _601
002364                 9912 _530:
                       9914 ; rs232cmd.c 2784                       else
                       9915 ; rs232cmd.c 2785                       {
                       9916 ; rs232cmd.c 2786                               if ( ParCnt)
002364 964842rr        9918         MOV.B   ES,#SEG( _ParCnt )
002368 9908rrrr        9919         MOV.W   R0,#SOF( _ParCnt )
00236C 8200            9920         MOV.B   R0L,[R0]
00236E F307            9921         BEQ     _531
                       9922 ; rs232cmd.c 2787                                       SCPIError = ParNotAllowed;
002370 964842rr        9924         MOV.B   ES,#SEG( _SCPIError )
002374 9908rrrr        9925         MOV.W   R0,#SOF( _SCPIError )
002378 BA06            9926         MOV.W   [R0],#06H
                       9927         BR      _601
00237A D500D4         +9927         JMP.L   _601
00237A D500D400       +9927         JMP.L   _601
00237E                 9928 _531:
000000                 9930 RS232CMD_IR     SEGMENT HCODE INSEGMENT ROMDATA
000000                 9931         RSEG    RS232CMD_IR
                       9932         ALIGN   1
000000                 9933 __swtable603:
000000 rrrrrrrrrrrrrr  9934         DW      SOF _534,SEG _534
       rrrrrrrrrrrrrr       
       rrrr                 
000004 rrrrrrrrrrrrrr  9935         DW      SOF _535,SEG _535
       rrrrrrrrrrrrrr       
       rrrr                 
000008 rrrrrrrrrrrrrr  9936         DW      SOF _536,SEG _536
       rrrrrrrrrrrrrr       
       rrrr                 
00000C rrrrrrrrrrrrrr  9937         DW      SOF _537,SEG _537
       rrrrrrrrrrrrrr       
       rrrr                 
000010 rrrrrrrrrrrrrr  9938         DW      SOF _538,SEG _538
       rrrrrrrrrrrrrr       
       rrrr                 
000014 rrrrrrrrrrrrrr  9939         DW      SOF _539,SEG _539
       rrrrrrrrrrrrrr       
       rrrr                 
000018 rrrrrrrrrrrrrr  9940         DW      SOF _540,SEG _540
       rrrrrrrrrrrrrr       
       rrrr                 
00001C rrrrrrrrrrrrrr  9941         DW      SOF _541,SEG _541
       rrrrrrrrrrrrrr       
       rrrr                 
000020 rrrrrrrrrrrrrr  9942         DW      SOF _542,SEG _542
       rrrrrrrrrrrrrr       
       rrrr                 
000024 rrrrrrrrrrrrrr  9943         DW      SOF _543,SEG _543
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 165

ADDR   CODE            LINE SOURCELINE
000028 rrrrrrrrrrrrrr  9944         DW      SOF _544,SEG _544
       rrrrrrrrrrrrrr       
       rrrr                 
00002C rrrrrrrrrrrrrr  9945         DW      SOF _545,SEG _545
       rrrrrrrrrrrrrr       
       rrrr                 
000030 rrrrrrrrrrrrrr  9946         DW      SOF _546,SEG _546
       rrrrrrrrrrrrrr       
       rrrr                 
000034 rrrrrrrrrrrrrr  9947         DW      SOF _547,SEG _547
       rrrrrrrrrrrrrr       
       rrrr                 
000038 rrrrrrrrrrrrrr  9948         DW      SOF _548,SEG _548
       rrrrrrrrrrrrrr       
       rrrr                 
00003C rrrrrrrrrrrrrr  9949         DW      SOF _549,SEG _549
       rrrrrrrrrrrrrr       
       rrrr                 
000040 rrrrrrrrrrrrrr  9950         DW      SOF _550,SEG _550
       rrrrrrrrrrrrrr       
       rrrr                 
000044 rrrrrrrrrrrrrr  9951         DW      SOF _551,SEG _551
       rrrrrrrrrrrrrr       
       rrrr                 
000048 rrrrrrrrrrrrrr  9952         DW      SOF _552,SEG _552
       rrrrrrrrrrrrrr       
       rrrr                 
00004C rrrrrrrrrrrrrr  9953         DW      SOF _553,SEG _553
       rrrrrrrrrrrrrr       
       rrrr                 
000050 rrrrrrrrrrrrrr  9954         DW      SOF _554,SEG _554
       rrrrrrrrrrrrrr       
       rrrr                 
000054 rrrrrrrrrrrrrr  9955         DW      SOF _555,SEG _555
       rrrrrrrrrrrrrr       
       rrrr                 
000058 rrrrrrrrrrrrrr  9956         DW      SOF _556,SEG _556
       rrrrrrrrrrrrrr       
       rrrr                 
00005C rrrrrrrrrrrrrr  9957         DW      SOF _557,SEG _557
       rrrrrrrrrrrrrr       
       rrrr                 
000060 rrrrrrrrrrrrrr  9958         DW      SOF _558,SEG _558
       rrrrrrrrrrrrrr       
       rrrr                 
000064 rrrrrrrrrrrrrr  9959         DW      SOF _559,SEG _559
       rrrrrrrrrrrrrr       
       rrrr                 
000068 rrrrrrrrrrrrrr  9960         DW      SOF _560,SEG _560
       rrrrrrrrrrrrrr       
       rrrr                 
00006C rrrrrrrrrrrrrr  9961         DW      SOF _561,SEG _561
       rrrrrrrrrrrrrr       
       rrrr                 
000070 rrrrrrrrrrrrrr  9962         DW      SOF _562,SEG _562
       rrrrrrrrrrrrrr       
       rrrr                 
000074 rrrrrrrrrrrrrr  9963         DW      SOF _563,SEG _563
       rrrrrrrrrrrrrr       
       rrrr                 
00237E                 9964         RSEG    RS232CMD_PR
                       9966 ; rs232cmd.c 2788                               else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 166

ADDR   CODE            LINE SOURCELINE
                       9967 ; rs232cmd.c 2789                               {
                       9968 ; rs232cmd.c 2790                                       str = AudioSignalPar[AudioSetup[AnalogAud
                            io].Signal].LongName;
00237E 964842rr        9970         MOV.B   ES,#SEG( _AudioSetup+2 )
002382 9908rrrr        9971         MOV.W   R0,#SOF( _AudioSetup+2 )
002386 8A00            9972         MOV.W   R0,[R0]
002388 E900000C        9973         MULU.W  R0,#0CH
00238C 8920            9974         MOV.W   R2,R0
00238E B930            9975         MOVS.W  R3,#00H
002390 9918rrrr        9976         MOV.W   R1,#SEG( _AudioSignalPar )
002394 9908rrrr        9977         MOV.W   R0,#SOF( _AudioSignalPar )
002398 0902            9978         ADD.W   R0,R2
00239A 1913            9979         ADDC.W  R1,R3
00239C 862C43          9980         MOV.B   CS,R1L
00239F 8820            9981         MOVC.W  R2,[R0+]
0023A1 99040000        9982         CMP.W   R0,#00H
0023A5 F202            9983         BNE     _602
0023A7 A64143          9984         ADDS.B  CS,#01H
0023A7 A64143          9984         ADDS.B  CS,#01H
0023AA                 9985 _602:
0023AA 8830            9986         MOVC.W  R3,[R0+]
0023AC 8953            9987         MOV.W   R5,R3
0023AE 8942            9988         MOV.W   R4,R2
                       9990 ; rs232cmd.c 2791       
                       9991 ; rs232cmd.c 2792                                       while ( *str)
0023B0 866C43          9993         MOV.B   CS,R3L
0023B3 8062            9994         MOVC.B  R3L,[R2+]
0023B5 F312            9995         BEQ     _533
0023B5 F31200          9995         BEQ     _533
0023B8                 9996 _532:
                       9997 ; rs232cmd.c 2793                                               rs232putchar( *str++);
0023B8 8915            9999         MOV.W   R1,R5
0023BA 8904           10000         MOV.W   R0,R4
0023BC 862C43         10001         MOV.B   CS,R1L
0023BF 8020           10002         MOVC.B  R1L,[R0+]
0023C1 8102           10003         MOV.B   R0L,R1L
                      10004         CALL    _rs232putchar
0023C3 C4rrrrrr       +10004 ;       FCALL   _rs232putchar
0023C7 99400001       10005         ADD.W   R4,#01H
0023CB 99510000       10006         ADDC.W  R5,#00H
0023CF 8915           10010         MOV.W   R1,R5
0023D1 8904           10011         MOV.W   R0,R4
0023D3 862C43         10012         MOV.B   CS,R1L
0023D6 8020           10013         MOVC.B  R1L,[R0+]
0023D8 F2EF           10014         BNE     _532
0023DA                10016 _533:
                      10017 ; rs232cmd.c 2794       
                      10018 ; rs232cmd.c 2795                                       rs232putchar(',');
0023DA 91082C         10020         MOV.B   R0L,#02CH
                      10021         CALL    _rs232putchar
0023DD C4rrrrrr       +10021 ;       FCALL   _rs232putchar
                      10022 ; rs232cmd.c 2796       
                      10023 ; rs232cmd.c 2797                                       str = NULL;
0023E1 B950           10025         MOV.W   R5,#00H
0023E3 B940           10026         MOV.W   R4,#00H
                      10029 ; rs232cmd.c 2798       
                      10030 ; rs232cmd.c 2799                                       switch ( AudioSetup[AnalogAudio].Level)
0023E5 964842rr       10032         MOV.B   ES,#SEG( _AudioSetup+4 )
0023E9 9908rrrr       10033         MOV.W   R0,#SOF( _AudioSetup+4 )
0023ED 8A00           10034         MOV.W   R0,[R0]
0023EF A90F           10035         ADDS.W  R0,#0FH
0023F1 9904001D       10036         CMP.W   R0,#01DH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 167

ADDR   CODE            LINE SOURCELINE
0023F5 F85D           10037         BG      _564
0023F7 D902           10038         ASL.W   R0,#02H
0023F9 964843rr       10039         MOV.B   CS,#SEG( __swtable603 )
0023FD 9900rrrr       10040         ADD.W   R0,#SOF( __swtable603 )
002401 8810           10041         MOVC.W  R1,[R0+]
002403 0F02           10042         PUSH.W  R1
002405 8810           10043         MOVC.W  R1,[R0+]
002407 0F02           10044         PUSH.W  R1
002409 D680           10045         RET
                      10046 ; rs232cmd.c 2800                                       {
                      10047 ; rs232cmd.c 2801                                               case P10dBm:
00240C                10049 _534:
                      10050 ; rs232cmd.c 2802                                                       level = 10;
00240C 9968000A       10052         MOV.W   R6,#0AH
                      10055 ; rs232cmd.c 2803                                                       break;
002410 FE6E           10057         BR      _596
                      10058 ; rs232cmd.c 2804       
                      10059 ; rs232cmd.c 2805                                               case P8dBm:
002412                10061 _535:
                      10062 ; rs232cmd.c 2806                                                       level = 8;
002412 99680008       10064         MOV.W   R6,#08H
                      10067 ; rs232cmd.c 2807                                                       break;
002416 FE6B           10069         BR      _596
                      10070 ; rs232cmd.c 2808       
                      10071 ; rs232cmd.c 2809                                               case P7dBm:
002418                10073 _536:
                      10074 ; rs232cmd.c 2810                                                       level = 7;
002418 B967           10076         MOV.W   R6,#07H
                      10079 ; rs232cmd.c 2811                                                       break;
00241A FE69           10081         BR      _596
                      10082 ; rs232cmd.c 2812       
                      10083 ; rs232cmd.c 2813                                               case P6dBm:
00241C                10085 _537:
                      10086 ; rs232cmd.c 2814                                                       level = 6;
00241C B966           10088         MOV.W   R6,#06H
                      10091 ; rs232cmd.c 2815                                                       break;
00241E FE67           10093         BR      _596
                      10094 ; rs232cmd.c 2816       
                      10095 ; rs232cmd.c 2817                                               case P5dBm:
002420                10097 _538:
                      10098 ; rs232cmd.c 2818                                                       level = 5;
002420 B965           10100         MOV.W   R6,#05H
                      10103 ; rs232cmd.c 2819                                                       break;
002422 FE65           10105         BR      _596
                      10106 ; rs232cmd.c 2820       
                      10107 ; rs232cmd.c 2821                                               case P4dBm:
002424                10109 _539:
                      10110 ; rs232cmd.c 2822                                                       level = 4;
002424 B964           10112         MOV.W   R6,#04H
                      10115 ; rs232cmd.c 2823                                                       break;
002426 FE63           10117         BR      _596
                      10118 ; rs232cmd.c 2824       
                      10119 ; rs232cmd.c 2825                                               case P3dBm:
002428                10121 _540:
                      10122 ; rs232cmd.c 2826                                                       level = 3;
002428 B963           10124         MOV.W   R6,#03H
                      10127 ; rs232cmd.c 2827                                                       break;
00242A FE61           10129         BR      _596
                      10130 ; rs232cmd.c 2828       
                      10131 ; rs232cmd.c 2829                                               case P2dBm:
00242C                10133 _541:
                      10134 ; rs232cmd.c 2830                                                       level = 2;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 168

ADDR   CODE            LINE SOURCELINE
00242C B962           10136         MOV.W   R6,#02H
                      10139 ; rs232cmd.c 2831                                                       break;
00242E FE5F           10141         BR      _596
                      10142 ; rs232cmd.c 2832       
                      10143 ; rs232cmd.c 2833                                               case P1dBm:
002430                10145 _542:
                      10146 ; rs232cmd.c 2834                                                       level = 1;
002430 B961           10148         MOV.W   R6,#01H
                      10151 ; rs232cmd.c 2835                                                       break;
002432 FE5D           10153         BR      _596
                      10154 ; rs232cmd.c 2836       
                      10155 ; rs232cmd.c 2837                                               case M0dBm:
002434                10157 _543:
                      10158 ; rs232cmd.c 2838                                                       level = 0;
002434 B960           10160         MOV.W   R6,#00H
                      10163 ; rs232cmd.c 2839                                                       break;
002436 FE5B           10165         BR      _596
                      10166 ; rs232cmd.c 2840       
                      10167 ; rs232cmd.c 2841                                               case M1dBm:
002438                10169 _544:
                      10170 ; rs232cmd.c 2842                                                       level = -1;
002438 9968FFFF       10172         MOV.W   R6,#0FFFFH
                      10175 ; rs232cmd.c 2843                                                       break;
00243C FE58           10177         BR      _596
                      10178 ; rs232cmd.c 2844       
                      10179 ; rs232cmd.c 2845                                               case M2dBm:
00243E                10181 _545:
                      10182 ; rs232cmd.c 2846                                                       level = -2;
00243E 9968FFFE       10184         MOV.W   R6,#0FFFEH
                      10187 ; rs232cmd.c 2847                                                       break;
002442 FE55           10189         BR      _596
                      10190 ; rs232cmd.c 2848       
                      10191 ; rs232cmd.c 2849                                               case M3dBm:
002444                10193 _546:
                      10194 ; rs232cmd.c 2850                                                       level = -3;
002444 9968FFFD       10196         MOV.W   R6,#0FFFDH
                      10199 ; rs232cmd.c 2851                                                       break;
002448 FE52           10201         BR      _596
                      10202 ; rs232cmd.c 2852       
                      10203 ; rs232cmd.c 2853                                               case M4dBm:
00244A                10205 _547:
                      10206 ; rs232cmd.c 2854                                                       level = -4;
00244A 9968FFFC       10208         MOV.W   R6,#0FFFCH
                      10211 ; rs232cmd.c 2855                                                       break;
00244E FE4F           10213         BR      _596
                      10214 ; rs232cmd.c 2856       
                      10215 ; rs232cmd.c 2857                                               case M5dBm:
002450                10217 _548:
                      10218 ; rs232cmd.c 2858                                                       level = -5;
002450 9968FFFB       10220         MOV.W   R6,#0FFFBH
                      10223 ; rs232cmd.c 2859                                                       break;
002454 FE4C           10225         BR      _596
                      10226 ; rs232cmd.c 2860       
                      10227 ; rs232cmd.c 2861                                               case M6dBm:
002456                10229 _549:
                      10230 ; rs232cmd.c 2862                                                       level = -6;
002456 9968FFFA       10232         MOV.W   R6,#0FFFAH
                      10235 ; rs232cmd.c 2863                                                       break;
00245A FE49           10237         BR      _596
                      10238 ; rs232cmd.c 2864       
                      10239 ; rs232cmd.c 2865                                               case M7dBm:
00245C                10241 _550:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 169

ADDR   CODE            LINE SOURCELINE
                      10242 ; rs232cmd.c 2866                                                       level = -7;
00245C 9968FFF9       10244         MOV.W   R6,#0FFF9H
                      10247 ; rs232cmd.c 2867                                                       break;
002460 FE46           10249         BR      _596
                      10250 ; rs232cmd.c 2868       
                      10251 ; rs232cmd.c 2869                                               case M8dBm:
002462                10253 _551:
                      10254 ; rs232cmd.c 2870                                                       level = -8;
002462 9968FFF8       10256         MOV.W   R6,#0FFF8H
                      10259 ; rs232cmd.c 2871                                                       break;
002466 FE43           10261         BR      _596
                      10262 ; rs232cmd.c 2872       
                      10263 ; rs232cmd.c 2873                                               case M9dBm:
002468                10265 _552:
                      10266 ; rs232cmd.c 2874                                                       level = -9;
002468 9968FFF7       10268         MOV.W   R6,#0FFF7H
                      10271 ; rs232cmd.c 2875                                                       break;
00246C FE40           10273         BR      _596
                      10274 ; rs232cmd.c 2876       
                      10275 ; rs232cmd.c 2877                                               case M10dBm:
00246E                10277 _553:
                      10278 ; rs232cmd.c 2878                                                       level = -10;
00246E 9968FFF6       10280         MOV.W   R6,#0FFF6H
                      10283 ; rs232cmd.c 2879                                                       break;
002472 FE3D           10285         BR      _596
                      10286 ; rs232cmd.c 2880       
                      10287 ; rs232cmd.c 2881                                               case M11dBm:
002474                10289 _554:
                      10290 ; rs232cmd.c 2882                                                       level = -11;
002474 9968FFF5       10292         MOV.W   R6,#0FFF5H
                      10295 ; rs232cmd.c 2883                                                       break;
002478 FE3A           10297         BR      _596
                      10298 ; rs232cmd.c 2884       
                      10299 ; rs232cmd.c 2885                                               case M12dBm:
00247A                10301 _555:
                      10302 ; rs232cmd.c 2886                                                       level = -12;
00247A 9968FFF4       10304         MOV.W   R6,#0FFF4H
                      10307 ; rs232cmd.c 2887                                                       break;
00247E FE37           10309         BR      _596
                      10310 ; rs232cmd.c 2888       
                      10311 ; rs232cmd.c 2889                                               case M15dBm:
002480                10313 _556:
                      10314 ; rs232cmd.c 2890                                                       level = -15;
002480 9968FFF1       10316         MOV.W   R6,#0FFF1H
                      10319 ; rs232cmd.c 2891                                                       break;
002484 FE34           10321         BR      _596
                      10322 ; rs232cmd.c 2892       
                      10323 ; rs232cmd.c 2893                                               case M18dBm:
002486                10325 _557:
                      10326 ; rs232cmd.c 2894                                                       level = -18;
002486 9968FFEE       10328         MOV.W   R6,#0FFEEH
                      10331 ; rs232cmd.c 2895                                                       break;
00248A FE31           10333         BR      _596
                      10334 ; rs232cmd.c 2896       
                      10335 ; rs232cmd.c 2897                                               case M21dBm:
00248C                10337 _558:
                      10338 ; rs232cmd.c 2898                                                       level = -21;
00248C 9968FFEB       10340         MOV.W   R6,#0FFEBH
                      10343 ; rs232cmd.c 2899                                                       break;
002490 FE2E           10345         BR      _596
                      10346 ; rs232cmd.c 2900       
                      10347 ; rs232cmd.c 2901                                               case M24dBm:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 170

ADDR   CODE            LINE SOURCELINE
002492                10349 _559:
                      10350 ; rs232cmd.c 2902                                                       level = -24;
002492 9968FFE8       10352         MOV.W   R6,#0FFE8H
                      10355 ; rs232cmd.c 2903                                                       break;
002496 FE2B           10357         BR      _596
                      10358 ; rs232cmd.c 2904       
                      10359 ; rs232cmd.c 2905                                               case M27dBm:
002498                10361 _560:
                      10362 ; rs232cmd.c 2906                                                       level = -27;
002498 9968FFE5       10364         MOV.W   R6,#0FFE5H
                      10367 ; rs232cmd.c 2907                                                       break;
00249C FE28           10369         BR      _596
                      10370 ; rs232cmd.c 2908       
                      10371 ; rs232cmd.c 2909                                               case M30dBm:
00249E                10373 _561:
                      10374 ; rs232cmd.c 2910                                                       level = -30;
00249E 9968FFE2       10376         MOV.W   R6,#0FFE2H
                      10379 ; rs232cmd.c 2911                                                       break;
0024A2 FE25           10381         BR      _596
                      10382 ; rs232cmd.c 2912       
                      10383 ; rs232cmd.c 2913                                               case M33dBm:
0024A4                10385 _562:
                      10386 ; rs232cmd.c 2914                                                       level = -33;
0024A4 9968FFDF       10388         MOV.W   R6,#0FFDFH
                      10391 ; rs232cmd.c 2915                                                       break;
0024A8 FE22           10393         BR      _596
                      10394 ; rs232cmd.c 2916       
                      10395 ; rs232cmd.c 2917                                               case M36dBm:
0024AA                10397 _563:
                      10398 ; rs232cmd.c 2918                                                       level = -36;
0024AA 9968FFDC       10400         MOV.W   R6,#0FFDCH
                      10403 ; rs232cmd.c 2919                                                       break;
0024AE FE1F           10405         BR      _596
                      10406 ; rs232cmd.c 2920       
                      10407 ; rs232cmd.c 2921                                               default:
0024B0                10409 _564:
                      10410 ; rs232cmd.c 2922                                                       str = SILENCEParTxt;
0024B0 9958rrrr       10412         MOV.W   R5,#SEG( _SILENCEParTxt )
0024B4 9948rrrr       10413         MOV.W   R4,#SOF( _SILENCEParTxt )
                      10416 ; rs232cmd.c 2923       
                      10417 ; rs232cmd.c 2924                                                       while ( *str)
0024B8 8915           10419         MOV.W   R1,R5
0024BA 8904           10420         MOV.W   R0,R4
0024BC 862C43         10421         MOV.B   CS,R1L
0024BF 8020           10422         MOVC.B  R1L,[R0+]
0024C1 F312           10423         BEQ     _566
0024C1 F31200         10423         BEQ     _566
0024C4                10424 _565:
                      10425 ; rs232cmd.c 2925                                                               rs232putchar( *st
                            r++);
0024C4 8915           10427         MOV.W   R1,R5
0024C6 8904           10428         MOV.W   R0,R4
0024C8 862C43         10429         MOV.B   CS,R1L
0024CB 8020           10430         MOVC.B  R1L,[R0+]
0024CD 8102           10431         MOV.B   R0L,R1L
                      10432         CALL    _rs232putchar
0024CF C4rrrrrr       +10432 ;       FCALL   _rs232putchar
0024D3 99400001       10433         ADD.W   R4,#01H
0024D7 99510000       10434         ADDC.W  R5,#00H
0024DB 8915           10438         MOV.W   R1,R5
0024DD 8904           10439         MOV.W   R0,R4
0024DF 862C43         10440         MOV.B   CS,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 171

ADDR   CODE            LINE SOURCELINE
0024E2 8020           10441         MOVC.B  R1L,[R0+]
0024E4 F2EF           10442         BNE     _565
0024E6                10444 _566:
                      10445 ; rs232cmd.c 2926       
                      10446 ; rs232cmd.c 2927                                                       rs232putchar(',');
0024E6 91082C         10448         MOV.B   R0L,#02CH
                      10449         CALL    _rs232putchar
0024E9 C4rrrrrr       +10449 ;       FCALL   _rs232putchar
                      10450 ; rs232cmd.c 2928                                                       break;
                      10451 ; rs232cmd.c 2929                                               }
0024EE                10453 _596:
                      10454 ; rs232cmd.c 2930       
                      10455 ; rs232cmd.c 2931                                       if ( str == NULL)
0024EE 6954           10457         OR.W    R5,R4
0024F0 F20A           10458         BNE     _597
                      10459 ; rs232cmd.c 2932                                               rs232printf( 6, "%d,", level);
0024F2 B906           10461         MOV.W   R0,#06H
0024F4 0F40           10462         PUSH.W  R6
0024F6 9938rrrr       10465         MOV.W   R3,#SEG( _529 )
0024FA 9928rrrr       10466         MOV.W   R2,#SOF( _529 )
0024FE 0F0C           10467         PUSH.W  R2, R3
                      10469         CALL    _rs232printf
002500 C4rrrrrr       +10469 ;       FCALL   _rs232printf
002504 A976           10470         ADDS.W  R7,#06H
002506                10472 _597:
                      10473 ; rs232cmd.c 2933       
                      10474 ; rs232cmd.c 2934                                       rs232printf( 6, "%d\n", AudioSetup[Analog
                            Audio].Click);                  
002506 B906           10476         MOV.W   R0,#06H
002508 964842rr       10477         MOV.B   ES,#SEG( _AudioSetup+12 )
00250C 9918rrrr       10478         MOV.W   R1,#SOF( _AudioSetup+12 )
002510 8A11           10479         MOV.W   R1,[R1]
002512 0F02           10480         PUSH.W  R1
002514 9938rrrr       10482         MOV.W   R3,#SEG( _9 )
002518 9928rrrr       10483         MOV.W   R2,#SOF( _9 )
00251C 0F0C           10484         PUSH.W  R2, R3
                      10486         CALL    _rs232printf
00251E C4rrrrrr       +10486 ;       FCALL   _rs232printf
002522 A976           10487         ADDS.W  R7,#06H
                      10489 ; rs232cmd.c 2935                               }
                      10490 ; rs232cmd.c 2936                       }
                      10491 ; rs232cmd.c 2937               }
002524                10493 _601:
                      10494 ; rs232cmd.c 2938       }
002524 2F70           10496         POP.W   R4, R5, R6
002526 D680           10498         RET
                      10501 ; rs232cmd.c 2939       
                      10502 ; rs232cmd.c 2940       /************************************************************************
                            **/
                      10503 ; rs232cmd.c 2941       /* AudioGenAnalogSignal                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      10504 ; rs232cmd.c 2942       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10505 ; rs232cmd.c 2943       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      10506 ; rs232cmd.c 2944       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      10507 ; rs232cmd.c 2945       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 172

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                      10508 ; rs232cmd.c 2946       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      10509 ; rs232cmd.c 2947       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      10510 ; rs232cmd.c 2948       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      10511 ; rs232cmd.c 2949       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      10512 ; rs232cmd.c 2950       /************************************************************************
                            **/
                      10513 ; rs232cmd.c 2951       void AudioGenAnalogSignal( void)
                      10514 ; rs232cmd.c 2952       {
                      10515         ALIGN   1
                      10517         PUBLIC  _AudioGenAnalogSignal
002528                10518 _AudioGenAnalogSignal:
002528 0F30           10522         PUSH.W  R4, R5
                      10528 ; rs232cmd.c 2953               int signal;
                      10529 ; rs232cmd.c 2954               char code *str;
                      10530 ; rs232cmd.c 2955       
                      10531 ; rs232cmd.c 2956               if ( CmdExecute && !SCPIError)
00252A 964842rr       10533         MOV.B   ES,#SEG( _CmdExecute )
00252E 9908rrrr       10534         MOV.W   R0,#SOF( _CmdExecute )
002532 8200           10535         MOV.B   R0L,[R0]
002534 F379           10536         BEQ     _616
002536 964842rr       10537         MOV.B   ES,#SEG( _SCPIError )
00253A 9908rrrr       10538         MOV.W   R0,#SOF( _SCPIError )
00253E 8A00           10539         MOV.W   R0,[R0]
002540 F273           10540         BNE     _616
                      10541 ; rs232cmd.c 2957               {
                      10542 ; rs232cmd.c 2958                       if ( CmdRequest)
002542 964842rr       10544         MOV.B   ES,#SEG( _CmdRequest )
002546 9908rrrr       10545         MOV.W   R0,#SOF( _CmdRequest )
00254A 8200           10546         MOV.B   R0L,[R0]
00254C F33F           10547         BEQ     _607
                      10548 ; rs232cmd.c 2959                       {
                      10549 ; rs232cmd.c 2960                               if ( ParCnt)
00254E 964842rr       10551         MOV.B   ES,#SEG( _ParCnt )
002552 9908rrrr       10552         MOV.W   R0,#SOF( _ParCnt )
002556 8200           10553         MOV.B   R0L,[R0]
002558 F306           10554         BEQ     _604
                      10555 ; rs232cmd.c 2961                                       SCPIError = ParNotAllowed;
00255A 964842rr       10557         MOV.B   ES,#SEG( _SCPIError )
00255E 9908rrrr       10558         MOV.W   R0,#SOF( _SCPIError )
002562 BA06           10559         MOV.W   [R0],#06H
002564 FE61           10560         BR      _616
002564 FE61           10560         BR      _616
002566                10561 _604:
                      10562 ; rs232cmd.c 2962                               else
                      10563 ; rs232cmd.c 2963                               {
                      10564 ; rs232cmd.c 2964                                       str = AudioSignalPar[AudioSetup[AnalogAud
                            io].Signal].LongName;
002566 964842rr       10566         MOV.B   ES,#SEG( _AudioSetup+2 )
00256A 9908rrrr       10567         MOV.W   R0,#SOF( _AudioSetup+2 )
00256E 8A00           10568         MOV.W   R0,[R0]
002570 E900000C       10569         MULU.W  R0,#0CH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 173

ADDR   CODE            LINE SOURCELINE
002574 8920           10570         MOV.W   R2,R0
002576 B930           10571         MOVS.W  R3,#00H
002578 9918rrrr       10572         MOV.W   R1,#SEG( _AudioSignalPar )
00257C 9908rrrr       10573         MOV.W   R0,#SOF( _AudioSignalPar )
002580 0902           10574         ADD.W   R0,R2
002582 1913           10575         ADDC.W  R1,R3
002584 862C43         10576         MOV.B   CS,R1L
002587 8820           10577         MOVC.W  R2,[R0+]
002589 99040000       10578         CMP.W   R0,#00H
00258D F202           10579         BNE     _617
00258F A64143         10580         ADDS.B  CS,#01H
00258F A64143         10580         ADDS.B  CS,#01H
002592                10581 _617:
002592 8830           10582         MOVC.W  R3,[R0+]
002594 8953           10583         MOV.W   R5,R3
002596 8942           10584         MOV.W   R4,R2
                      10586 ; rs232cmd.c 2965       
                      10587 ; rs232cmd.c 2966                                       while ( *str)
002598 866C43         10589         MOV.B   CS,R3L
00259B 8062           10590         MOVC.B  R3L,[R2+]
00259D F312           10591         BEQ     _606
00259D F31200         10591         BEQ     _606
0025A0                10592 _605:
                      10593 ; rs232cmd.c 2967                                               rs232putchar( *str++);
0025A0 8915           10595         MOV.W   R1,R5
0025A2 8904           10596         MOV.W   R0,R4
0025A4 862C43         10597         MOV.B   CS,R1L
0025A7 8020           10598         MOVC.B  R1L,[R0+]
0025A9 8102           10599         MOV.B   R0L,R1L
                      10600         CALL    _rs232putchar
0025AB C4rrrrrr       +10600 ;       FCALL   _rs232putchar
0025AF 99400001       10601         ADD.W   R4,#01H
0025B3 99510000       10602         ADDC.W  R5,#00H
0025B7 8915           10606         MOV.W   R1,R5
0025B9 8904           10607         MOV.W   R0,R4
0025BB 862C43         10608         MOV.B   CS,R1L
0025BE 8020           10609         MOVC.B  R1L,[R0+]
0025C0 F2EF           10610         BNE     _605
0025C2                10612 _606:
                      10613 ; rs232cmd.c 2968       
                      10614 ; rs232cmd.c 2969                                       rs232putchar('\n');
0025C2 91080A         10616         MOV.B   R0L,#0AH
                      10617         CALL    _rs232putchar
0025C5 C4rrrrrr       +10617 ;       FCALL   _rs232putchar
                      10618 ; rs232cmd.c 2970                               }
                      10619 ; rs232cmd.c 2971                       }
0025C9 FE2F           10621         BR      _616
0025C9 FE2F00         10621         BR      _616
0025CC                10622 _607:
                      10623 ; rs232cmd.c 2972                       else
                      10624 ; rs232cmd.c 2973                       {
                      10625 ; rs232cmd.c 2974                               if ( ParCnt != 1)
0025CC 964842rr       10627         MOV.B   ES,#SEG( _ParCnt )
0025D0 9908rrrr       10628         MOV.W   R0,#SOF( _ParCnt )
0025D4 8200           10629         MOV.B   R0L,[R0]
0025D6 910401         10630         CMP.B   R0L,#01H
0025D9 F307           10631         BEQ     _608
                      10632 ; rs232cmd.c 2975                                       SCPIError = SyntaxErr;
0025DB 964842rr       10634         MOV.B   ES,#SEG( _SCPIError )
0025DF 9908rrrr       10635         MOV.W   R0,#SOF( _SCPIError )
0025E3 BA03           10636         MOV.W   [R0],#03H
0025E5 FE21           10637         BR      _616
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 174

ADDR   CODE            LINE SOURCELINE
0025E5 FE2100         10637         BR      _616
0025E8                10638 _608:
                      10639 ; rs232cmd.c 2976                               else
                      10640 ; rs232cmd.c 2977                               {
                      10641 ; rs232cmd.c 2978                                       signal = FindParameter( Cmd, AudioSignalP
                            ar);
0025E8 9918rrrr       10643         MOV.W   R1,#SEG( _Cmd )
0025EC 9908rrrr       10644         MOV.W   R0,#SOF( _Cmd )
0025F0 9938rrrr       10645         MOV.W   R3,#SEG( _AudioSignalPar )
0025F4 9928rrrr       10646         MOV.W   R2,#SOF( _AudioSignalPar )
0025F8 C51CC3         10647         CALL    _FindParameter
                      10649 ; rs232cmd.c 2979               
                      10650 ; rs232cmd.c 2980                                       if ( signal > -1)
0025FB 8910           10652         MOV.W   R1,R0
0025FD 9914FFFF       10653         CMP.W   R1,#0FFFFH
002601 FD0D           10656         BLE     _609
                      10657 ; rs232cmd.c 2981                                       {
                      10658 ; rs232cmd.c 2982                                               if ( SetAudioSignal( AnalogAudio,
                             signal) == FAIL)
002603 B900           10660         MOV.W   R0,#00H
                      10661         CALL    _SetAudioSignal
002605 C4rrrrrr       +10661 ;       FCALL   _SetAudioSignal
002609 6900           10663         OR.W    R0,R0
00260B F20E           10664         BNE     _616
                      10665 ; rs232cmd.c 2983                                                               SCPIError = ExecE
                            rr;
00260D 964842rr       10667         MOV.B   ES,#SEG( _SCPIError )
002611 9908rrrr       10668         MOV.W   R0,#SOF( _SCPIError )
002615 9A08001D       10669         MOV.W   [R0],#01DH
                      10670 ; rs232cmd.c 2984                                       }
002619 FE07           10672         BR      _616
002619 FE0700         10672         BR      _616
00261C                10673 _609:
                      10674 ; rs232cmd.c 2985                                       else
                      10675 ; rs232cmd.c 2986                                               SCPIError = DataOutOfRange;
00261C 964842rr       10677         MOV.B   ES,#SEG( _SCPIError )
002620 9908rrrr       10678         MOV.W   R0,#SOF( _SCPIError )
002624 9A080021       10679         MOV.W   [R0],#021H
                      10680 ; rs232cmd.c 2987                               }
                      10681 ; rs232cmd.c 2988                       }
                      10682 ; rs232cmd.c 2989               }
002628                10684 _616:
                      10685 ; rs232cmd.c 2990       }
002628 2F30           10687         POP.W   R4, R5
00262A D680           10689         RET
                      10692 ; rs232cmd.c 2991       
                      10693 ; rs232cmd.c 2992       /************************************************************************
                            **/
                      10694 ; rs232cmd.c 2993       /* AudioGenAnalogLevel                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      10695 ; rs232cmd.c 2994       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10696 ; rs232cmd.c 2995       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      10697 ; rs232cmd.c 2996       /* Revised:             000705                                           
                                                                                                                             
                                                                                    */
                      10698 ; rs232cmd.c 2997       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 175

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                      10699 ; rs232cmd.c 2998       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      10700 ; rs232cmd.c 2999       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      10701 ; rs232cmd.c 3000       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      10702 ; rs232cmd.c 3001       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      10703 ; rs232cmd.c 3002       /************************************************************************
                            **/
                      10704 ; rs232cmd.c 3003       void AudioGenAnalogLevel( void)
                      10705 ; rs232cmd.c 3004       {
                      10706         ALIGN   1
                      10708         PUBLIC  _AudioGenAnalogLevel
00262C                10709 _AudioGenAnalogLevel:
000078                10713         RSEG    RS232CMD_IR
                      10714         ALIGN   1
000078                10715 __swtable758:
000078 rrrrrrrrrrrrrr 10716         DW      SOF _653,SEG _653
       rrrrrrrrrrrrrr       
       rrrr                 
00007C rrrrrrrrrrrrrr 10717         DW      SOF _621,SEG _621
       rrrrrrrrrrrrrr       
       rrrr                 
000080 rrrrrrrrrrrrrr 10718         DW      SOF _622,SEG _622
       rrrrrrrrrrrrrr       
       rrrr                 
000084 rrrrrrrrrrrrrr 10719         DW      SOF _623,SEG _623
       rrrrrrrrrrrrrr       
       rrrr                 
000088 rrrrrrrrrrrrrr 10720         DW      SOF _624,SEG _624
       rrrrrrrrrrrrrr       
       rrrr                 
00008C rrrrrrrrrrrrrr 10721         DW      SOF _625,SEG _625
       rrrrrrrrrrrrrr       
       rrrr                 
000090 rrrrrrrrrrrrrr 10722         DW      SOF _626,SEG _626
       rrrrrrrrrrrrrr       
       rrrr                 
000094 rrrrrrrrrrrrrr 10723         DW      SOF _627,SEG _627
       rrrrrrrrrrrrrr       
       rrrr                 
000098 rrrrrrrrrrrrrr 10724         DW      SOF _628,SEG _628
       rrrrrrrrrrrrrr       
       rrrr                 
00009C rrrrrrrrrrrrrr 10725         DW      SOF _629,SEG _629
       rrrrrrrrrrrrrr       
       rrrr                 
0000A0 rrrrrrrrrrrrrr 10726         DW      SOF _630,SEG _630
       rrrrrrrrrrrrrr       
       rrrr                 
0000A4 rrrrrrrrrrrrrr 10727         DW      SOF _631,SEG _631
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 176

ADDR   CODE            LINE SOURCELINE
0000A8 rrrrrrrrrrrrrr 10728         DW      SOF _632,SEG _632
       rrrrrrrrrrrrrr       
       rrrr                 
0000AC rrrrrrrrrrrrrr 10729         DW      SOF _633,SEG _633
       rrrrrrrrrrrrrr       
       rrrr                 
0000B0 rrrrrrrrrrrrrr 10730         DW      SOF _634,SEG _634
       rrrrrrrrrrrrrr       
       rrrr                 
0000B4 rrrrrrrrrrrrrr 10731         DW      SOF _635,SEG _635
       rrrrrrrrrrrrrr       
       rrrr                 
0000B8 rrrrrrrrrrrrrr 10732         DW      SOF _636,SEG _636
       rrrrrrrrrrrrrr       
       rrrr                 
0000BC rrrrrrrrrrrrrr 10733         DW      SOF _637,SEG _637
       rrrrrrrrrrrrrr       
       rrrr                 
0000C0 rrrrrrrrrrrrrr 10734         DW      SOF _638,SEG _638
       rrrrrrrrrrrrrr       
       rrrr                 
0000C4 rrrrrrrrrrrrrr 10735         DW      SOF _639,SEG _639
       rrrrrrrrrrrrrr       
       rrrr                 
0000C8 rrrrrrrrrrrrrr 10736         DW      SOF _640,SEG _640
       rrrrrrrrrrrrrr       
       rrrr                 
0000CC rrrrrrrrrrrrrr 10737         DW      SOF _641,SEG _641
       rrrrrrrrrrrrrr       
       rrrr                 
0000D0 rrrrrrrrrrrrrr 10738         DW      SOF _642,SEG _642
       rrrrrrrrrrrrrr       
       rrrr                 
0000D4 rrrrrrrrrrrrrr 10739         DW      SOF _643,SEG _643
       rrrrrrrrrrrrrr       
       rrrr                 
0000D8 rrrrrrrrrrrrrr 10740         DW      SOF _644,SEG _644
       rrrrrrrrrrrrrr       
       rrrr                 
0000DC rrrrrrrrrrrrrr 10741         DW      SOF _645,SEG _645
       rrrrrrrrrrrrrr       
       rrrr                 
0000E0 rrrrrrrrrrrrrr 10742         DW      SOF _646,SEG _646
       rrrrrrrrrrrrrr       
       rrrr                 
0000E4 rrrrrrrrrrrrrr 10743         DW      SOF _647,SEG _647
       rrrrrrrrrrrrrr       
       rrrr                 
0000E8 rrrrrrrrrrrrrr 10744         DW      SOF _648,SEG _648
       rrrrrrrrrrrrrr       
       rrrr                 
0000EC rrrrrrrrrrrrrr 10745         DW      SOF _649,SEG _649
       rrrrrrrrrrrrrr       
       rrrr                 
00262C                10746         RSEG    RS232CMD_PR
00262C 0F30           10747         PUSH.W  R4, R5
00262E A97E           10749         ADDS.W  R7,#0EH
                      10754 ; rs232cmd.c 3005               code char *str;
                      10755 ; rs232cmd.c 3006               int level;
                      10756 ; rs232cmd.c 3007       
                      10757 ; rs232cmd.c 3008               if ( CmdExecute && !SCPIError)
002630 964842rr       10759         MOV.B   ES,#SEG( _CmdExecute )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 177

ADDR   CODE            LINE SOURCELINE
002634 9908rrrr       10760         MOV.W   R0,#SOF( _CmdExecute )
002638 8200           10761         MOV.B   R0L,[R0]
                      10762         BEQ     _757
00263A F202           +10762 ;       BNE     _LG_646
00263C D50165         +10762 ;       JMP.L   _757
002640 D5016500       +10762 ;       JMP.L   _757
002640                +10762 _LG_646:
002640 964842rr       10763         MOV.B   ES,#SEG( _SCPIError )
002644 9908rrrr       10764         MOV.W   R0,#SOF( _SCPIError )
002648 8A00           10765         MOV.W   R0,[R0]
                      10766         BNE     _757
00264A F302           +10766 ;       BEQ     _LG_648
00264C D5015D         +10766 ;       JMP.L   _757
002650 D5015D00       +10766 ;       JMP.L   _757
002650                +10766 _LG_648:
                      10767 ; rs232cmd.c 3009               {
                      10768 ; rs232cmd.c 3010                       if ( CmdRequest)
002650 964842rr       10770         MOV.B   ES,#SEG( _CmdRequest )
002654 9908rrrr       10771         MOV.W   R0,#SOF( _CmdRequest )
002658 8200           10772         MOV.B   R0L,[R0]
                      10773         BEQ     _683
00265A F202           +10773 ;       BNE     _LG_650
00265C D5009F         +10773 ;       JMP.L   _683
002660 D5009F00       +10773 ;       JMP.L   _683
002660                +10773 _LG_650:
                      10774 ; rs232cmd.c 3011                       {
                      10775 ; rs232cmd.c 3012                               if ( ParCnt)
002660 964842rr       10777         MOV.B   ES,#SEG( _ParCnt )
002664 9908rrrr       10778         MOV.W   R0,#SOF( _ParCnt )
002668 8200           10779         MOV.B   R0L,[R0]
00266A F307           10780         BEQ     _620
                      10781 ; rs232cmd.c 3013                                       SCPIError = ParNotAllowed;
00266C 964842rr       10783         MOV.B   ES,#SEG( _SCPIError )
002670 9908rrrr       10784         MOV.W   R0,#SOF( _SCPIError )
002674 BA06           10785         MOV.W   [R0],#06H
                      10786         BR      _757
002676 D50148         +10786         JMP.L   _757
002676 D5014800       +10786         JMP.L   _757
00267A                10787 _620:
                      10788 ; rs232cmd.c 3014                               else
                      10789 ; rs232cmd.c 3015                               {
                      10790 ; rs232cmd.c 3016                                       switch ( AudioSetup[AnalogAudio].Level)
00267A 964842rr       10792         MOV.B   ES,#SEG( _AudioSetup+4 )
00267E 9908rrrr       10793         MOV.W   R0,#SOF( _AudioSetup+4 )
002682 8A00           10794         MOV.W   R0,[R0]
002684 A90F           10795         ADDS.W  R0,#0FH
002686 9904001D       10796         CMP.W   R0,#01DH
00268A F859           10797         BG      _650
00268C D902           10798         ASL.W   R0,#02H
00268E 964843rr       10799         MOV.B   CS,#SEG( __swtable758 )
002692 9900rrrr       10800         ADD.W   R0,#SOF( __swtable758 )
002696 8810           10801         MOVC.W  R1,[R0+]
002698 0F02           10802         PUSH.W  R1
00269A 8810           10803         MOVC.W  R1,[R0+]
00269C 0F02           10804         PUSH.W  R1
00269E D680           10805         RET
                      10806 ; rs232cmd.c 3017                                       {
                      10807 ; rs232cmd.c 3018                                               case P10dBm:
                      10808 ; rs232cmd.c 3019                                                       level = 10;
                      10809 ; rs232cmd.c 3020                                                       break;
                      10810 ; rs232cmd.c 3021       
                      10811 ; rs232cmd.c 3022                                               case P8dBm:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 178

ADDR   CODE            LINE SOURCELINE
0026A0                10813 _621:
                      10814 ; rs232cmd.c 3023                                                       level = 8;
0026A0 9A780008       10816         MOV.W   [R7],#08H
                      10817 ; rs232cmd.c 3024                                                       break;
0026A4 FE6E           10819         BR      _682
                      10820 ; rs232cmd.c 3025       
                      10821 ; rs232cmd.c 3026                                               case P7dBm:
0026A6                10823 _622:
                      10824 ; rs232cmd.c 3027                                                       level = 7;
0026A6 BA77           10826         MOV.W   [R7],#07H
                      10827 ; rs232cmd.c 3028                                                       break;
0026A8 FE6C           10829         BR      _682
                      10830 ; rs232cmd.c 3029       
                      10831 ; rs232cmd.c 3030                                               case P6dBm:
0026AA                10833 _623:
                      10834 ; rs232cmd.c 3031                                                       level = 6;
0026AA BA76           10836         MOV.W   [R7],#06H
                      10837 ; rs232cmd.c 3032                                                       break;
0026AC FE6A           10839         BR      _682
                      10840 ; rs232cmd.c 3033       
                      10841 ; rs232cmd.c 3034                                               case P5dBm:
0026AE                10843 _624:
                      10844 ; rs232cmd.c 3035                                                       level = 5;
0026AE BA75           10846         MOV.W   [R7],#05H
                      10847 ; rs232cmd.c 3036                                                       break;
0026B0 FE68           10849         BR      _682
                      10850 ; rs232cmd.c 3037       
                      10851 ; rs232cmd.c 3038                                               case P4dBm:
0026B2                10853 _625:
                      10854 ; rs232cmd.c 3039                                                       level = 4;
0026B2 BA74           10856         MOV.W   [R7],#04H
                      10857 ; rs232cmd.c 3040                                                       break;
0026B4 FE66           10859         BR      _682
                      10860 ; rs232cmd.c 3041       
                      10861 ; rs232cmd.c 3042                                               case P3dBm:
0026B6                10863 _626:
                      10864 ; rs232cmd.c 3043                                                       level = 3;
0026B6 BA73           10866         MOV.W   [R7],#03H
                      10867 ; rs232cmd.c 3044                                                       break;
0026B8 FE64           10869         BR      _682
                      10870 ; rs232cmd.c 3045       
                      10871 ; rs232cmd.c 3046                                               case P2dBm:
0026BA                10873 _627:
                      10874 ; rs232cmd.c 3047                                                       level = 2;
0026BA BA72           10876         MOV.W   [R7],#02H
                      10877 ; rs232cmd.c 3048                                                       break;
0026BC FE62           10879         BR      _682
                      10880 ; rs232cmd.c 3049       
                      10881 ; rs232cmd.c 3050                                               case P1dBm:
0026BE                10883 _628:
                      10884 ; rs232cmd.c 3051                                                       level = 1;
0026BE BA71           10886         MOV.W   [R7],#01H
                      10887 ; rs232cmd.c 3052                                                       break;
0026C0 FE60           10889         BR      _682
                      10890 ; rs232cmd.c 3053       
                      10891 ; rs232cmd.c 3054                                               case M0dBm:
0026C2                10893 _629:
                      10894 ; rs232cmd.c 3055                                                       level = 0;
0026C2 BA70           10896         MOV.W   [R7],#00H
                      10897 ; rs232cmd.c 3056                                                       break;
0026C4 FE5E           10899         BR      _682
                      10900 ; rs232cmd.c 3057       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 179

ADDR   CODE            LINE SOURCELINE
                      10901 ; rs232cmd.c 3058                                               case M1dBm:
0026C6                10903 _630:
                      10904 ; rs232cmd.c 3059                                                       level = -1;
0026C6 9A78FFFF       10906         MOV.W   [R7],#0FFFFH
                      10907 ; rs232cmd.c 3060                                                       break;
0026CA FE5B           10909         BR      _682
                      10910 ; rs232cmd.c 3061       
                      10911 ; rs232cmd.c 3062                                               case M2dBm:
0026CC                10913 _631:
                      10914 ; rs232cmd.c 3063                                                       level = -2;
0026CC 9A78FFFE       10916         MOV.W   [R7],#0FFFEH
                      10917 ; rs232cmd.c 3064                                                       break;
0026D0 FE58           10919         BR      _682
                      10920 ; rs232cmd.c 3065       
                      10921 ; rs232cmd.c 3066                                               case M3dBm:
0026D2                10923 _632:
                      10924 ; rs232cmd.c 3067                                                       level = -3;
0026D2 9A78FFFD       10926         MOV.W   [R7],#0FFFDH
                      10927 ; rs232cmd.c 3068                                                       break;
0026D6 FE55           10929         BR      _682
                      10930 ; rs232cmd.c 3069       
                      10931 ; rs232cmd.c 3070                                               case M4dBm:
0026D8                10933 _633:
                      10934 ; rs232cmd.c 3071                                                       level = -4;
0026D8 9A78FFFC       10936         MOV.W   [R7],#0FFFCH
                      10937 ; rs232cmd.c 3072                                                       break;
0026DC FE52           10939         BR      _682
                      10940 ; rs232cmd.c 3073       
                      10941 ; rs232cmd.c 3074                                               case M5dBm:
0026DE                10943 _634:
                      10944 ; rs232cmd.c 3075                                                       level = -5;
0026DE 9A78FFFB       10946         MOV.W   [R7],#0FFFBH
                      10947 ; rs232cmd.c 3076                                                       break;
0026E2 FE4F           10949         BR      _682
                      10950 ; rs232cmd.c 3077       
                      10951 ; rs232cmd.c 3078                                               case M6dBm:
0026E4                10953 _635:
                      10954 ; rs232cmd.c 3079                                                       level = -6;
0026E4 9A78FFFA       10956         MOV.W   [R7],#0FFFAH
                      10957 ; rs232cmd.c 3080                                                       break;
0026E8 FE4C           10959         BR      _682
                      10960 ; rs232cmd.c 3081       
                      10961 ; rs232cmd.c 3082                                               case M7dBm:
0026EA                10963 _636:
                      10964 ; rs232cmd.c 3083                                                       level = -7;
0026EA 9A78FFF9       10966         MOV.W   [R7],#0FFF9H
                      10967 ; rs232cmd.c 3084                                                       break;
0026EE FE49           10969         BR      _682
                      10970 ; rs232cmd.c 3085       
                      10971 ; rs232cmd.c 3086                                               case M8dBm:
0026F0                10973 _637:
                      10974 ; rs232cmd.c 3087                                                       level = -8;
0026F0 9A78FFF8       10976         MOV.W   [R7],#0FFF8H
                      10977 ; rs232cmd.c 3088                                                       break;
0026F4 FE46           10979         BR      _682
                      10980 ; rs232cmd.c 3089       
                      10981 ; rs232cmd.c 3090                                               case M9dBm:
0026F6                10983 _638:
                      10984 ; rs232cmd.c 3091                                                       level = -9;
0026F6 9A78FFF7       10986         MOV.W   [R7],#0FFF7H
                      10987 ; rs232cmd.c 3092                                                       break;
0026FA FE43           10989         BR      _682
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 180

ADDR   CODE            LINE SOURCELINE
                      10990 ; rs232cmd.c 3093       
                      10991 ; rs232cmd.c 3094                                               case M10dBm:
0026FC                10993 _639:
                      10994 ; rs232cmd.c 3095                                                       level = -10;
0026FC 9A78FFF6       10996         MOV.W   [R7],#0FFF6H
                      10997 ; rs232cmd.c 3096                                                       break;
002700 FE40           10999         BR      _682
                      11000 ; rs232cmd.c 3097       
                      11001 ; rs232cmd.c 3098                                               case M11dBm:
002702                11003 _640:
                      11004 ; rs232cmd.c 3099                                                       level = -11;
002702 9A78FFF5       11006         MOV.W   [R7],#0FFF5H
                      11007 ; rs232cmd.c 3100                                                       break;
002706 FE3D           11009         BR      _682
                      11010 ; rs232cmd.c 3101       
                      11011 ; rs232cmd.c 3102                                               case M12dBm:
002708                11013 _641:
                      11014 ; rs232cmd.c 3103                                                       level = -12;
002708 9A78FFF4       11016         MOV.W   [R7],#0FFF4H
                      11017 ; rs232cmd.c 3104                                                       break;
00270C FE3A           11019         BR      _682
                      11020 ; rs232cmd.c 3105       
                      11021 ; rs232cmd.c 3106                                               case M15dBm:
00270E                11023 _642:
                      11024 ; rs232cmd.c 3107                                                       level = -15;
00270E 9A78FFF1       11026         MOV.W   [R7],#0FFF1H
                      11027 ; rs232cmd.c 3108                                                       break;
002712 FE37           11029         BR      _682
                      11030 ; rs232cmd.c 3109       
                      11031 ; rs232cmd.c 3110                                               case M18dBm:
002714                11033 _643:
                      11034 ; rs232cmd.c 3111                                                       level = -18;
002714 9A78FFEE       11036         MOV.W   [R7],#0FFEEH
                      11037 ; rs232cmd.c 3112                                                       break;
002718 FE34           11039         BR      _682
                      11040 ; rs232cmd.c 3113       
                      11041 ; rs232cmd.c 3114                                               case M21dBm:
00271A                11043 _644:
                      11044 ; rs232cmd.c 3115                                                       level = -21;
00271A 9A78FFEB       11046         MOV.W   [R7],#0FFEBH
                      11047 ; rs232cmd.c 3116                                                       break;
00271E FE31           11049         BR      _682
                      11050 ; rs232cmd.c 3117       
                      11051 ; rs232cmd.c 3118                                               case M24dBm:
002720                11053 _645:
                      11054 ; rs232cmd.c 3119                                                       level = -24;
002720 9A78FFE8       11056         MOV.W   [R7],#0FFE8H
                      11057 ; rs232cmd.c 3120                                                       break;
002724 FE2E           11059         BR      _682
                      11060 ; rs232cmd.c 3121       
                      11061 ; rs232cmd.c 3122                                               case M27dBm:
002726                11063 _646:
                      11064 ; rs232cmd.c 3123                                                       level = -27;
002726 9A78FFE5       11066         MOV.W   [R7],#0FFE5H
                      11067 ; rs232cmd.c 3124                                                       break;
00272A FE2B           11069         BR      _682
                      11070 ; rs232cmd.c 3125       
                      11071 ; rs232cmd.c 3126                                               case M30dBm:
00272C                11073 _647:
                      11074 ; rs232cmd.c 3127                                                       level = -30;
00272C 9A78FFE2       11076         MOV.W   [R7],#0FFE2H
                      11077 ; rs232cmd.c 3128                                                       break;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 181

ADDR   CODE            LINE SOURCELINE
002730 FE28           11079         BR      _682
                      11080 ; rs232cmd.c 3129       
                      11081 ; rs232cmd.c 3130                                               case M33dBm:
002732                11083 _648:
                      11084 ; rs232cmd.c 3131                                                       level = -33;
002732 9A78FFDF       11086         MOV.W   [R7],#0FFDFH
                      11087 ; rs232cmd.c 3132                                                       break;
002736 FE25           11089         BR      _682
                      11090 ; rs232cmd.c 3133       
                      11091 ; rs232cmd.c 3134                                               case M36dBm:
002738                11093 _649:
                      11094 ; rs232cmd.c 3135                                                       level = -36;
002738 9A78FFDC       11096         MOV.W   [R7],#0FFDCH
                      11097 ; rs232cmd.c 3136                                                       break;
00273C FE22           11099         BR      _682
                      11100 ; rs232cmd.c 3137       
                      11101 ; rs232cmd.c 3138                                               default:
00273E                11103 _650:
                      11104 ; rs232cmd.c 3139                                                       str = SILENCEParTxt;
00273E 9958rrrr       11106         MOV.W   R5,#SEG( _SILENCEParTxt )
002742 9948rrrr       11107         MOV.W   R4,#SOF( _SILENCEParTxt )
                      11109 ; rs232cmd.c 3140       
                      11110 ; rs232cmd.c 3141                                                       while ( *str)
002746 964843rr       11112         MOV.B   CS,#SEG( _SILENCEParTxt )
00274A 9908rrrr       11113         MOV.W   R0,#SOF( _SILENCEParTxt )
00274E 8020           11114         MOVC.B  R1L,[R0+]
002750 F311           11115         BEQ     _652
002750 F311           11115         BEQ     _652
002752                11116 _651:
                      11117 ; rs232cmd.c 3142                                                               rs232putchar( *st
                            r++);
002752 8915           11119         MOV.W   R1,R5
002754 8904           11120         MOV.W   R0,R4
002756 862C43         11121         MOV.B   CS,R1L
002759 8020           11122         MOVC.B  R1L,[R0+]
00275B 8102           11123         MOV.B   R0L,R1L
                      11124         CALL    _rs232putchar
00275D C4rrrrrr       +11124 ;       FCALL   _rs232putchar
002761 99400001       11125         ADD.W   R4,#01H
002765 99510000       11126         ADDC.W  R5,#00H
002769 8915           11130         MOV.W   R1,R5
00276B 8904           11131         MOV.W   R0,R4
00276D 862C43         11132         MOV.B   CS,R1L
002770 8020           11133         MOVC.B  R1L,[R0+]
002772 F2EF           11134         BNE     _651
002774                11136 _652:
                      11137 ; rs232cmd.c 3143       
                      11138 ; rs232cmd.c 3144                                                       rs232putchar('\n');
002774 91080A         11140         MOV.B   R0L,#0AH
                      11141         CALL    _rs232putchar
002777 C4rrrrrr       +11141 ;       FCALL   _rs232putchar
                      11142 ; rs232cmd.c 3145                                                       return;
                      11144         BR      _757
00277B D500C5         +11144         JMP.L   _757
00277E                11146 _653:
00277E 9A78000A       11148         MOV.W   [R7],#0AH
                      11149 ; rs232cmd.c 3146                                               }
002782                11151 _682:
                      11152 ; rs232cmd.c 3147       
                      11153 ; rs232cmd.c 3148                                       rs232printf( 6, "%d\n", level);
002782 B906           11155         MOV.W   R0,#06H
002784 8A17           11156         MOV.W   R1,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 182

ADDR   CODE            LINE SOURCELINE
002786 0F02           11157         PUSH.W  R1
002788 9938rrrr       11159         MOV.W   R3,#SEG( _9 )
00278C 9928rrrr       11160         MOV.W   R2,#SOF( _9 )
002790 0F0C           11161         PUSH.W  R2, R3
                      11163         CALL    _rs232printf
002792 C4rrrrrr       +11163 ;       FCALL   _rs232printf
002796 A976           11164         ADDS.W  R7,#06H
0000F0                11165         RSEG    RS232CMD_IR
                      11166         ALIGN   1
0000F0                11167 __swtable763:
0000F0 rrrrrrrrrrrrrr 11168         DW      SOF _716,SEG _716
       rrrrrrrrrrrrrr       
       rrrr                 
0000F4 rrrrrrrrrrrrrr 11169         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0000F8 rrrrrrrrrrrrrr 11170         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0000FC rrrrrrrrrrrrrr 11171         DW      SOF _715,SEG _715
       rrrrrrrrrrrrrr       
       rrrr                 
000100 rrrrrrrrrrrrrr 11172         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000104 rrrrrrrrrrrrrr 11173         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000108 rrrrrrrrrrrrrr 11174         DW      SOF _714,SEG _714
       rrrrrrrrrrrrrr       
       rrrr                 
00010C rrrrrrrrrrrrrr 11175         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000110 rrrrrrrrrrrrrr 11176         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000114 rrrrrrrrrrrrrr 11177         DW      SOF _713,SEG _713
       rrrrrrrrrrrrrr       
       rrrr                 
000118 rrrrrrrrrrrrrr 11178         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
00011C rrrrrrrrrrrrrr 11179         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000120 rrrrrrrrrrrrrr 11180         DW      SOF _712,SEG _712
       rrrrrrrrrrrrrr       
       rrrr                 
000124 rrrrrrrrrrrrrr 11181         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000128 rrrrrrrrrrrrrr 11182         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
00012C rrrrrrrrrrrrrr 11183         DW      SOF _711,SEG _711
       rrrrrrrrrrrrrr       
       rrrr                 
000130 rrrrrrrrrrrrrr 11184         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 183

ADDR   CODE            LINE SOURCELINE
000134 rrrrrrrrrrrrrr 11185         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000138 rrrrrrrrrrrrrr 11186         DW      SOF _710,SEG _710
       rrrrrrrrrrrrrr       
       rrrr                 
00013C rrrrrrrrrrrrrr 11187         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000140 rrrrrrrrrrrrrr 11188         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000144 rrrrrrrrrrrrrr 11189         DW      SOF _709,SEG _709
       rrrrrrrrrrrrrr       
       rrrr                 
000148 rrrrrrrrrrrrrr 11190         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
00014C rrrrrrrrrrrrrr 11191         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000150 rrrrrrrrrrrrrr 11192         DW      SOF _708,SEG _708
       rrrrrrrrrrrrrr       
       rrrr                 
000154 rrrrrrrrrrrrrr 11193         DW      SOF _707,SEG _707
       rrrrrrrrrrrrrr       
       rrrr                 
000158 rrrrrrrrrrrrrr 11194         DW      SOF _706,SEG _706
       rrrrrrrrrrrrrr       
       rrrr                 
00015C rrrrrrrrrrrrrr 11195         DW      SOF _705,SEG _705
       rrrrrrrrrrrrrr       
       rrrr                 
000160 rrrrrrrrrrrrrr 11196         DW      SOF _704,SEG _704
       rrrrrrrrrrrrrr       
       rrrr                 
000164 rrrrrrrrrrrrrr 11197         DW      SOF _703,SEG _703
       rrrrrrrrrrrrrr       
       rrrr                 
000168 rrrrrrrrrrrrrr 11198         DW      SOF _702,SEG _702
       rrrrrrrrrrrrrr       
       rrrr                 
00016C rrrrrrrrrrrrrr 11199         DW      SOF _701,SEG _701
       rrrrrrrrrrrrrr       
       rrrr                 
000170 rrrrrrrrrrrrrr 11200         DW      SOF _700,SEG _700
       rrrrrrrrrrrrrr       
       rrrr                 
000174 rrrrrrrrrrrrrr 11201         DW      SOF _699,SEG _699
       rrrrrrrrrrrrrr       
       rrrr                 
000178 rrrrrrrrrrrrrr 11202         DW      SOF _698,SEG _698
       rrrrrrrrrrrrrr       
       rrrr                 
00017C rrrrrrrrrrrrrr 11203         DW      SOF _697,SEG _697
       rrrrrrrrrrrrrr       
       rrrr                 
000180 rrrrrrrrrrrrrr 11204         DW      SOF _696,SEG _696
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 184

ADDR   CODE            LINE SOURCELINE
000184 rrrrrrrrrrrrrr 11205         DW      SOF _695,SEG _695
       rrrrrrrrrrrrrr       
       rrrr                 
000188 rrrrrrrrrrrrrr 11206         DW      SOF _694,SEG _694
       rrrrrrrrrrrrrr       
       rrrr                 
00018C rrrrrrrrrrrrrr 11207         DW      SOF _693,SEG _693
       rrrrrrrrrrrrrr       
       rrrr                 
000190 rrrrrrrrrrrrrr 11208         DW      SOF _692,SEG _692
       rrrrrrrrrrrrrr       
       rrrr                 
000194 rrrrrrrrrrrrrr 11209         DW      SOF _691,SEG _691
       rrrrrrrrrrrrrr       
       rrrr                 
000198 rrrrrrrrrrrrrr 11210         DW      SOF _690,SEG _690
       rrrrrrrrrrrrrr       
       rrrr                 
00019C rrrrrrrrrrrrrr 11211         DW      SOF _689,SEG _689
       rrrrrrrrrrrrrr       
       rrrr                 
0001A0 rrrrrrrrrrrrrr 11212         DW      SOF _688,SEG _688
       rrrrrrrrrrrrrr       
       rrrr                 
0001A4 rrrrrrrrrrrrrr 11213         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0001A8 rrrrrrrrrrrrrr 11214         DW      SOF _718,SEG _718
       rrrrrrrrrrrrrr       
       rrrr                 
002798                11215         RSEG    RS232CMD_PR
                      11217 ; rs232cmd.c 3149                               }
                      11218 ; rs232cmd.c 3150                       }
                      11220         BR      _757
002798 D500B7         +11220         JMP.L   _757
002798 D500B700       +11220         JMP.L   _757
00279C                11221 _683:
                      11222 ; rs232cmd.c 3151                       else
                      11223 ; rs232cmd.c 3152                       {
                      11224 ; rs232cmd.c 3153                               if ( ParCnt != 1)
00279C 964842rr       11226         MOV.B   ES,#SEG( _ParCnt )
0027A0 9908rrrr       11227         MOV.W   R0,#SOF( _ParCnt )
0027A4 8200           11228         MOV.B   R0L,[R0]
0027A6 910401         11229         CMP.B   R0L,#01H
0027A9 F307           11230         BEQ     _684
                      11231 ; rs232cmd.c 3154                                       SCPIError = SyntaxErr;
0027AB 964842rr       11233         MOV.B   ES,#SEG( _SCPIError )
0027AF 9908rrrr       11234         MOV.W   R0,#SOF( _SCPIError )
0027B3 BA03           11235         MOV.W   [R0],#03H
                      11236         BR      _757
0027B5 D500A8         +11236         JMP.L   _757
0027B5 D500A8         +11236         JMP.L   _757
0027B8                11237 _684:
                      11238 ; rs232cmd.c 3155                               else
                      11239 ; rs232cmd.c 3156                               {
                      11240 ; rs232cmd.c 3157                                       level = FindParameter( Cmd, AnalogLevelPa
                            r);
0027B8 9938rrrr       11242         MOV.W   R3,#SEG( _AnalogLevelPar )
0027BC 9928rrrr       11243         MOV.W   R2,#SOF( _AnalogLevelPar )
0027C0 9918rrrr       11244         MOV.W   R1,#SEG( _Cmd )
0027C4 9908rrrr       11245         MOV.W   R0,#SOF( _Cmd )
0027C8 C51BDB         11246         CALL    _FindParameter
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 185

ADDR   CODE            LINE SOURCELINE
0027CB 8A0F           11247         MOV.W   [R7],R0
                      11248 ; rs232cmd.c 3158               
                      11249 ; rs232cmd.c 3159                                       if ( level > -1)
0027CD 9A74FFFF       11251         CMP.W   [R7],#0FFFFH
0027D1 FD04           11252         BLE     _685
                      11253 ; rs232cmd.c 3160                                               level = AnalogSilence;
0027D3 9A78001F       11255         MOV.W   [R7],#01FH
                      11256         BR      _749
0027D7 D5008B         +11256         JMP.L   _749
0027D7 D5008B         +11256         JMP.L   _749
0027DA                11257 _685:
                      11258 ; rs232cmd.c 3161                                       else
                      11259 ; rs232cmd.c 3162                                       {
                      11260 ; rs232cmd.c 3163                                               if (( ParCnt != 1) || ( sscanf( C
                            md, "%d", &level) != 1))
0027DA 964842rr       11262         MOV.B   ES,#SEG( _ParCnt )
0027DE 9908rrrr       11263         MOV.W   R0,#SOF( _ParCnt )
0027E2 8200           11264         MOV.B   R0L,[R0]
0027E4 910401         11265         CMP.B   R0L,#01H
0027E7 F215           11266         BNE     _686
0027E9 9128rr         11267         MOV.B   R1L,#SEG( __lc_bs )
0027EC 7133           11268         XOR.B   R1H,R1H
0027EE 8907           11269         MOV.W   R0,R7
0027F0 0F03           11270         PUSH.W  R0, R1
0027F2 9918rrrr       11272         MOV.W   R1,#SEG( _10 )
0027F6 9908rrrr       11273         MOV.W   R0,#SOF( _10 )
0027FA 0F03           11274         PUSH.W  R0, R1
0027FC 9918rrrr       11276         MOV.W   R1,#SEG( _Cmd )
002800 9908rrrr       11277         MOV.W   R0,#SOF( _Cmd )
                      11278         CALL    _sscanf
002804 C4rrrrrr       +11278 ;       FCALL   _sscanf
002808 99700008       11279         ADD.W   R7,#08H
00280C 99040001       11281         CMP.W   R0,#01H
002810 F306           11282         BEQ     _687
002810 F306           11282         BEQ     _687
002812                11283 _686:
                      11284 ; rs232cmd.c 3164                                                       SCPIError = SyntaxErr;
002812 964842rr       11286         MOV.B   ES,#SEG( _SCPIError )
002816 9908rrrr       11287         MOV.W   R0,#SOF( _SCPIError )
00281A BA03           11288         MOV.W   [R0],#03H
00281C FE69           11289         BR      _749
00281C FE69           11289         BR      _749
00281E                11290 _687:
                      11291 ; rs232cmd.c 3165                                               else
                      11292 ; rs232cmd.c 3166                                               {
                      11293 ; rs232cmd.c 3167                                                       switch ( level)
00281E 8A17           11295         MOV.W   R1,[R7]
002820 99100024       11296         ADD.W   R1,#024H
002824 9914002E       11297         CMP.W   R1,#02EH
002828 F85B           11298         BG      _717
00282A D912           11299         ASL.W   R1,#02H
00282C 964843rr       11300         MOV.B   CS,#SEG( __swtable763 )
002830 9910rrrr       11301         ADD.W   R1,#SOF( __swtable763 )
002834 8801           11302         MOVC.W  R0,[R1+]
002836 0F01           11303         PUSH.W  R0
002838 8801           11304         MOVC.W  R0,[R1+]
00283A 0F01           11305         PUSH.W  R0
00283C D680           11306         RET
                      11307 ; rs232cmd.c 3168                                                       {
                      11308 ; rs232cmd.c 3169                                                               case 10:
                      11309 ; rs232cmd.c 3170                                                                       level = P
                            10dBm;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 186

ADDR   CODE            LINE SOURCELINE
                      11310 ; rs232cmd.c 3171                                                                       break;
                      11311 ; rs232cmd.c 3172       
                      11312 ; rs232cmd.c 3173                                                               case 8:
00283E                11314 _688:
                      11315 ; rs232cmd.c 3174                                                                       level = P
                            8dBm;
00283E BA72           11317         MOV.W   [R7],#02H
                      11318 ; rs232cmd.c 3175                                                                       break;
002840 FE57           11320         BR      _749
                      11321 ; rs232cmd.c 3176       
                      11322 ; rs232cmd.c 3177                                                               case 7:
002842                11324 _689:
                      11325 ; rs232cmd.c 3178                                                                       level = P
                            7dBm;
002842 BA73           11327         MOV.W   [R7],#03H
                      11328 ; rs232cmd.c 3179                                                                       break;
002844 FE55           11330         BR      _749
                      11331 ; rs232cmd.c 3180       
                      11332 ; rs232cmd.c 3181                                                               case 6:
002846                11334 _690:
                      11335 ; rs232cmd.c 3182                                                                       level = P
                            6dBm;
002846 BA74           11337         MOV.W   [R7],#04H
                      11338 ; rs232cmd.c 3183                                                                       break;
002848 FE53           11340         BR      _749
                      11341 ; rs232cmd.c 3184       
                      11342 ; rs232cmd.c 3185                                                               case 5:
00284A                11344 _691:
                      11345 ; rs232cmd.c 3186                                                                       level = P
                            5dBm;
00284A BA75           11347         MOV.W   [R7],#05H
                      11348 ; rs232cmd.c 3187                                                                       break;
00284C FE51           11350         BR      _749
                      11351 ; rs232cmd.c 3188       
                      11352 ; rs232cmd.c 3189                                                               case 4:
00284E                11354 _692:
                      11355 ; rs232cmd.c 3190                                                                       level = P
                            4dBm;
00284E BA76           11357         MOV.W   [R7],#06H
                      11358 ; rs232cmd.c 3191                                                                       break;
002850 FE4F           11360         BR      _749
                      11361 ; rs232cmd.c 3192       
                      11362 ; rs232cmd.c 3193                                                               case 3:
002852                11364 _693:
                      11365 ; rs232cmd.c 3194                                                                       level = P
                            3dBm;
002852 BA77           11367         MOV.W   [R7],#07H
                      11368 ; rs232cmd.c 3195                                                                       break;
002854 FE4D           11370         BR      _749
                      11371 ; rs232cmd.c 3196       
                      11372 ; rs232cmd.c 3197                                                               case 2:
002856                11374 _694:
                      11375 ; rs232cmd.c 3198                                                                       level = P
                            2dBm;
002856 9A780008       11377         MOV.W   [R7],#08H
                      11378 ; rs232cmd.c 3199                                                                       break;
00285A FE4A           11380         BR      _749
                      11381 ; rs232cmd.c 3200       
                      11382 ; rs232cmd.c 3201                                                               case 1:
00285C                11384 _695:
                      11385 ; rs232cmd.c 3202                                                                       level = P
                            1dBm;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 187

ADDR   CODE            LINE SOURCELINE
00285C 9A780009       11387         MOV.W   [R7],#09H
                      11388 ; rs232cmd.c 3203                                                                       break;
002860 FE47           11390         BR      _749
                      11391 ; rs232cmd.c 3204       
                      11392 ; rs232cmd.c 3205                                                               case 0:
002862                11394 _696:
                      11395 ; rs232cmd.c 3206                                                                       level = M
                            0dBm;
002862 9A78000A       11397         MOV.W   [R7],#0AH
                      11398 ; rs232cmd.c 3207                                                                       break;
002866 FE44           11400         BR      _749
                      11401 ; rs232cmd.c 3208       
                      11402 ; rs232cmd.c 3209                                                               case -1:
002868                11404 _697:
                      11405 ; rs232cmd.c 3210                                                                       level = M
                            1dBm;
002868 9A78000B       11407         MOV.W   [R7],#0BH
                      11408 ; rs232cmd.c 3211                                                                       break;
00286C FE41           11410         BR      _749
                      11411 ; rs232cmd.c 3212       
                      11412 ; rs232cmd.c 3213                                                               case -2:
00286E                11414 _698:
                      11415 ; rs232cmd.c 3214                                                                       level = M
                            2dBm;
00286E 9A78000C       11417         MOV.W   [R7],#0CH
                      11418 ; rs232cmd.c 3215                                                                       break;
002872 FE3E           11420         BR      _749
                      11421 ; rs232cmd.c 3216       
                      11422 ; rs232cmd.c 3217                                                               case -3:
002874                11424 _699:
                      11425 ; rs232cmd.c 3218                                                                       level = M
                            3dBm;
002874 9A78000D       11427         MOV.W   [R7],#0DH
                      11428 ; rs232cmd.c 3219                                                                       break;
002878 FE3B           11430         BR      _749
                      11431 ; rs232cmd.c 3220       
                      11432 ; rs232cmd.c 3221                                                               case -4:
00287A                11434 _700:
                      11435 ; rs232cmd.c 3222                                                                       level = M
                            4dBm;
00287A 9A78000E       11437         MOV.W   [R7],#0EH
                      11438 ; rs232cmd.c 3223                                                                       break;
00287E FE38           11440         BR      _749
                      11441 ; rs232cmd.c 3224       
                      11442 ; rs232cmd.c 3225                                                               case -5:
002880                11444 _701:
                      11445 ; rs232cmd.c 3226                                                                       level = M
                            5dBm;
002880 9A78000F       11447         MOV.W   [R7],#0FH
                      11448 ; rs232cmd.c 3227                                                                       break;
002884 FE35           11450         BR      _749
                      11451 ; rs232cmd.c 3228       
                      11452 ; rs232cmd.c 3229                                                               case -6:
002886                11454 _702:
                      11455 ; rs232cmd.c 3230                                                                       level = M
                            6dBm;
002886 9A780010       11457         MOV.W   [R7],#010H
                      11458 ; rs232cmd.c 3231                                                                       break;
00288A FE32           11460         BR      _749
                      11461 ; rs232cmd.c 3232       
                      11462 ; rs232cmd.c 3233                                                               case -7:
00288C                11464 _703:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 188

ADDR   CODE            LINE SOURCELINE
                      11465 ; rs232cmd.c 3234                                                                       level = M
                            7dBm;
00288C 9A780011       11467         MOV.W   [R7],#011H
                      11468 ; rs232cmd.c 3235                                                                       break;
002890 FE2F           11470         BR      _749
                      11471 ; rs232cmd.c 3236       
                      11472 ; rs232cmd.c 3237                                                               case -8:
002892                11474 _704:
                      11475 ; rs232cmd.c 3238                                                                       level = M
                            8dBm;
002892 9A780012       11477         MOV.W   [R7],#012H
                      11478 ; rs232cmd.c 3239                                                                       break;
002896 FE2C           11480         BR      _749
                      11481 ; rs232cmd.c 3240       
                      11482 ; rs232cmd.c 3241                                                               case -9:
002898                11484 _705:
                      11485 ; rs232cmd.c 3242                                                                       level = M
                            9dBm;
002898 9A780013       11487         MOV.W   [R7],#013H
                      11488 ; rs232cmd.c 3243                                                                       break;
00289C FE29           11490         BR      _749
                      11491 ; rs232cmd.c 3244       
                      11492 ; rs232cmd.c 3245                                                               case -10:
00289E                11494 _706:
                      11495 ; rs232cmd.c 3246                                                                       level = M
                            10dBm;
00289E 9A780014       11497         MOV.W   [R7],#014H
                      11498 ; rs232cmd.c 3247                                                                       break;
0028A2 FE26           11500         BR      _749
                      11501 ; rs232cmd.c 3248       
                      11502 ; rs232cmd.c 3249                                                               case -11:
0028A4                11504 _707:
                      11505 ; rs232cmd.c 3250                                                                       level = M
                            11dBm;
0028A4 9A780015       11507         MOV.W   [R7],#015H
                      11508 ; rs232cmd.c 3251                                                                       break;
0028A8 FE23           11510         BR      _749
                      11511 ; rs232cmd.c 3252       
                      11512 ; rs232cmd.c 3253                                                               case -12:
0028AA                11514 _708:
                      11515 ; rs232cmd.c 3254                                                                       level = M
                            12dBm;
0028AA 9A780016       11517         MOV.W   [R7],#016H
                      11518 ; rs232cmd.c 3255                                                                       break;
0028AE FE20           11520         BR      _749
                      11521 ; rs232cmd.c 3256       
                      11522 ; rs232cmd.c 3257                                                               case -15:
0028B0                11524 _709:
                      11525 ; rs232cmd.c 3258                                                                       level = M
                            15dBm;
0028B0 9A780017       11527         MOV.W   [R7],#017H
                      11528 ; rs232cmd.c 3259                                                                       break;
0028B4 FE1D           11530         BR      _749
                      11531 ; rs232cmd.c 3260       
                      11532 ; rs232cmd.c 3261                                                               case -18:
0028B6                11534 _710:
                      11535 ; rs232cmd.c 3262                                                                       level = M
                            18dBm;
0028B6 9A780018       11537         MOV.W   [R7],#018H
                      11538 ; rs232cmd.c 3263                                                                       break;
0028BA FE1A           11540         BR      _749
                      11541 ; rs232cmd.c 3264       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 189

ADDR   CODE            LINE SOURCELINE
                      11542 ; rs232cmd.c 3265                                                               case -21:
0028BC                11544 _711:
                      11545 ; rs232cmd.c 3266                                                                       level = M
                            21dBm;
0028BC 9A780019       11547         MOV.W   [R7],#019H
                      11548 ; rs232cmd.c 3267                                                                       break;
0028C0 FE17           11550         BR      _749
                      11551 ; rs232cmd.c 3268       
                      11552 ; rs232cmd.c 3269                                                               case -24:
0028C2                11554 _712:
                      11555 ; rs232cmd.c 3270                                                                       level = M
                            24dBm;
0028C2 9A78001A       11557         MOV.W   [R7],#01AH
                      11558 ; rs232cmd.c 3271                                                                       break;
0028C6 FE14           11560         BR      _749
                      11561 ; rs232cmd.c 3272       
                      11562 ; rs232cmd.c 3273                                                               case -27:
0028C8                11564 _713:
                      11565 ; rs232cmd.c 3274                                                                       level = M
                            27dBm;
0028C8 9A78001B       11567         MOV.W   [R7],#01BH
                      11568 ; rs232cmd.c 3275                                                                       break;
0028CC FE11           11570         BR      _749
                      11571 ; rs232cmd.c 3276       
                      11572 ; rs232cmd.c 3277                                                               case -30:
0028CE                11574 _714:
                      11575 ; rs232cmd.c 3278                                                                       level = M
                            30dBm;
0028CE 9A78001C       11577         MOV.W   [R7],#01CH
                      11578 ; rs232cmd.c 3279                                                                       break;
0028D2 FE0E           11580         BR      _749
                      11581 ; rs232cmd.c 3280       
                      11582 ; rs232cmd.c 3281                                                               case -33:
0028D4                11584 _715:
                      11585 ; rs232cmd.c 3282                                                                       level = M
                            33dBm;
0028D4 9A78001D       11587         MOV.W   [R7],#01DH
                      11588 ; rs232cmd.c 3283                                                                       break;
0028D8 FE0B           11590         BR      _749
                      11591 ; rs232cmd.c 3284       
                      11592 ; rs232cmd.c 3285                                                               case -36:
0028DA                11594 _716:
                      11595 ; rs232cmd.c 3286                                                                       level = M
                            36dBm;
0028DA 9A78001E       11597         MOV.W   [R7],#01EH
                      11598 ; rs232cmd.c 3287                                                                       break;
0028DE FE08           11600         BR      _749
                      11601 ; rs232cmd.c 3288       
                      11602 ; rs232cmd.c 3289                                                               default:
0028E0                11604 _717:
                      11605 ; rs232cmd.c 3290                                                                       SCPIError
                             = DataOutOfRange;
0028E0 964842rr       11607         MOV.B   ES,#SEG( _SCPIError )
0028E4 9908rrrr       11608         MOV.W   R0,#SOF( _SCPIError )
0028E8 9A080021       11609         MOV.W   [R0],#021H
                      11610 ; rs232cmd.c 3291                                                                       return;
0028EC FE0D           11612         BR      _757
0028EE                11614 _718:
0028EE BA71           11616         MOV.W   [R7],#01H
                      11617 ; rs232cmd.c 3292                                                       }
                      11618 ; rs232cmd.c 3293                                               }
                      11619 ; rs232cmd.c 3294                                       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 190

ADDR   CODE            LINE SOURCELINE
0028F0                11621 _749:
                      11622 ; rs232cmd.c 3295       
                      11623 ; rs232cmd.c 3296                                       if ( SetAudioLevel( AnalogAudio, level) =
                            = FAIL)
0028F0 B900           11625         MOV.W   R0,#00H
0028F2 8A17           11626         MOV.W   R1,[R7]
                      11627         CALL    _SetAudioLevel
0028F4 C4rrrrrr       +11627 ;       FCALL   _SetAudioLevel
0028F8 6900           11628         OR.W    R0,R0
0028FA F206           11629         BNE     _757
                      11630 ; rs232cmd.c 3297                                               SCPIError = ExecErr;
0028FC 964842rr       11632         MOV.B   ES,#SEG( _SCPIError )
002900 9908rrrr       11633         MOV.W   R0,#SOF( _SCPIError )
002904 9A08001D       11634         MOV.W   [R0],#01DH
                      11635 ; rs232cmd.c 3298                               }
                      11636 ; rs232cmd.c 3299                       }
                      11637 ; rs232cmd.c 3300               }
                      11638 ; rs232cmd.c 3301       }
002908                11640 _757:
002908 A972           11641         ADDS.W  R7,#02H
00290A 2F30           11643         POP.W   R4, R5
00290C D680           11645         RET
                      11648 ; rs232cmd.c 3302       
                      11649 ; rs232cmd.c 3303       /************************************************************************
                            **/
                      11650 ; rs232cmd.c 3304       /* AudioGenAnalogClick                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      11651 ; rs232cmd.c 3305       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11652 ; rs232cmd.c 3306       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      11653 ; rs232cmd.c 3307       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      11654 ; rs232cmd.c 3308       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11655 ; rs232cmd.c 3309       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      11656 ; rs232cmd.c 3310       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      11657 ; rs232cmd.c 3311       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      11658 ; rs232cmd.c 3312       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      11659 ; rs232cmd.c 3313       /************************************************************************
                            **/
                      11660 ; rs232cmd.c 3314       void AudioGenAnalogClick( void)
                      11661 ; rs232cmd.c 3315       {
                      11662         ALIGN   1
                      11664         PUBLIC  _AudioGenAnalogClick
00290E                11665 _AudioGenAnalogClick:
00290E A97E           11669         ADDS.W  R7,#0EH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 191

ADDR   CODE            LINE SOURCELINE
                      11672 ; rs232cmd.c 3316               int click;
                      11673 ; rs232cmd.c 3317       
                      11674 ; rs232cmd.c 3318               if ( CmdExecute && !SCPIError)
002910 964842rr       11676         MOV.B   ES,#SEG( _CmdExecute )
002914 9908rrrr       11677         MOV.W   R0,#SOF( _CmdExecute )
002918 8200           11678         MOV.B   R0L,[R0]
00291A F363           11679         BEQ     _776
00291C 964842rr       11680         MOV.B   ES,#SEG( _SCPIError )
002920 9908rrrr       11681         MOV.W   R0,#SOF( _SCPIError )
002924 8A00           11682         MOV.W   R0,[R0]
002926 F25D           11683         BNE     _776
                      11684 ; rs232cmd.c 3319               {
                      11685 ; rs232cmd.c 3320                       if ( CmdRequest)
002928 964842rr       11687         MOV.B   ES,#SEG( _CmdRequest )
00292C 9908rrrr       11688         MOV.W   R0,#SOF( _CmdRequest )
002930 8200           11689         MOV.B   R0L,[R0]
002932 F31C           11690         BEQ     _765
                      11691 ; rs232cmd.c 3321                       {
                      11692 ; rs232cmd.c 3322                               if ( ParCnt)
002934 964842rr       11694         MOV.B   ES,#SEG( _ParCnt )
002938 9908rrrr       11695         MOV.W   R0,#SOF( _ParCnt )
00293C 8200           11696         MOV.B   R0L,[R0]
00293E F306           11697         BEQ     _764
                      11698 ; rs232cmd.c 3323                                       SCPIError = ParNotAllowed;
002940 964842rr       11700         MOV.B   ES,#SEG( _SCPIError )
002944 9908rrrr       11701         MOV.W   R0,#SOF( _SCPIError )
002948 BA06           11702         MOV.W   [R0],#06H
00294A FE4B           11703         BR      _776
00294A FE4B           11703         BR      _776
00294C                11704 _764:
                      11705 ; rs232cmd.c 3324                               else
                      11706 ; rs232cmd.c 3325                                       rs232printf( 6, "%d\n", AudioSetup[Analog
                            Audio].Click);
00294C B906           11708         MOV.W   R0,#06H
00294E 964842rr       11709         MOV.B   ES,#SEG( _AudioSetup+12 )
002952 9918rrrr       11710         MOV.W   R1,#SOF( _AudioSetup+12 )
002956 8A11           11711         MOV.W   R1,[R1]
002958 0F02           11712         PUSH.W  R1
00295A 9938rrrr       11714         MOV.W   R3,#SEG( _9 )
00295E 9928rrrr       11715         MOV.W   R2,#SOF( _9 )
002962 0F0C           11716         PUSH.W  R2, R3
                      11718         CALL    _rs232printf
002964 C4rrrrrr       +11718 ;       FCALL   _rs232printf
002968 A976           11719         ADDS.W  R7,#06H
                      11721 ; rs232cmd.c 3326                       }
00296A FE3B           11723         BR      _776
00296A FE3B           11723         BR      _776
00296C                11724 _765:
                      11725 ; rs232cmd.c 3327                       else
                      11726 ; rs232cmd.c 3328                       {
                      11727 ; rs232cmd.c 3329                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &click
                            ) != 1))
00296C 964842rr       11729         MOV.B   ES,#SEG( _ParCnt )
002970 9908rrrr       11730         MOV.W   R0,#SOF( _ParCnt )
002974 8200           11731         MOV.B   R0L,[R0]
002976 910401         11732         CMP.B   R0L,#01H
002979 F215           11733         BNE     _766
00297B 9918rrrr       11734         MOV.W   R1,#SEG( _Cmd )
00297F 9908rrrr       11735         MOV.W   R0,#SOF( _Cmd )
002983 9168rr         11736         MOV.B   R3L,#SEG( __lc_bs )
002986 7177           11737         XOR.B   R3H,R3H
002988 8927           11738         MOV.W   R2,R7
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 192

ADDR   CODE            LINE SOURCELINE
00298A 0F0C           11739         PUSH.W  R2, R3
00298C 9938rrrr       11741         MOV.W   R3,#SEG( _10 )
002990 9928rrrr       11742         MOV.W   R2,#SOF( _10 )
002994 0F0C           11743         PUSH.W  R2, R3
                      11745         CALL    _sscanf
002996 C4rrrrrr       +11745 ;       FCALL   _sscanf
00299A 99700008       11746         ADD.W   R7,#08H
00299E 99040001       11748         CMP.W   R0,#01H
0029A2 F306           11749         BEQ     _767
0029A2 F306           11749         BEQ     _767
0029A4                11750 _766:
                      11751 ; rs232cmd.c 3330                                       SCPIError = SyntaxErr;
0029A4 964842rr       11753         MOV.B   ES,#SEG( _SCPIError )
0029A8 9908rrrr       11754         MOV.W   R0,#SOF( _SCPIError )
0029AC BA03           11755         MOV.W   [R0],#03H
0029AE FE19           11756         BR      _776
0029AE FE19           11756         BR      _776
0029B0                11757 _767:
                      11758 ; rs232cmd.c 3331                               else {
                      11759 ; rs232cmd.c 3332                                       if (( click != click1s) && ( click != cli
                            ck3s))
0029B0 9A740001       11761         CMP.W   [R7],#01H
0029B4 F30A           11762         BEQ     _769
0029B6 9A740003       11763         CMP.W   [R7],#03H
0029BA F307           11764         BEQ     _769
                      11765 ; rs232cmd.c 3333                                               SCPIError = DataOutOfRange;
0029BC 964842rr       11767         MOV.B   ES,#SEG( _SCPIError )
0029C0 9908rrrr       11768         MOV.W   R0,#SOF( _SCPIError )
0029C4 9A080021       11769         MOV.W   [R0],#021H
0029C8 FE0C           11770         BR      _776
0029C8 FE0C           11770         BR      _776
0029CA                11771 _769:
                      11772 ; rs232cmd.c 3334                                       else
                      11773 ; rs232cmd.c 3335                                       {
                      11774 ; rs232cmd.c 3336                                               if ( SetAudioClick( AnalogAudio, 
                            click) == FAIL)
0029CA B900           11776         MOV.W   R0,#00H
0029CC 8A17           11777         MOV.W   R1,[R7]
                      11778         CALL    _SetAudioClick
0029CE C4rrrrrr       +11778 ;       FCALL   _SetAudioClick
0029D2 6900           11779         OR.W    R0,R0
0029D4 F206           11780         BNE     _776
                      11781 ; rs232cmd.c 3337                                                       SCPIError = ExecErr;
0029D6 964842rr       11783         MOV.B   ES,#SEG( _SCPIError )
0029DA 9908rrrr       11784         MOV.W   R0,#SOF( _SCPIError )
0029DE 9A08001D       11785         MOV.W   [R0],#01DH
                      11786 ; rs232cmd.c 3338                                       }
                      11787 ; rs232cmd.c 3339                               }
                      11788 ; rs232cmd.c 3340                       }
                      11789 ; rs232cmd.c 3341               }
0029E2                11791 _776:
                      11792 ; rs232cmd.c 3342       }
0029E2 A972           11794         ADDS.W  R7,#02H
0029E4 D680           11796         RET
                      11798 ; rs232cmd.c 3343       
                      11799 ; rs232cmd.c 3344       
                      11800 ; rs232cmd.c 3345       /************************************************************************
                            **/
                      11801 ; rs232cmd.c 3346       /* AudioGenAESEBU                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      11802 ; rs232cmd.c 3347       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 193

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                      11803 ; rs232cmd.c 3348       /* Author:              Kim Engedahl, DEV, 000526                        
                                                                                                                             
                                    */
                      11804 ; rs232cmd.c 3349       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                      11805 ; rs232cmd.c 3350       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11806 ; rs232cmd.c 3351       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      11807 ; rs232cmd.c 3352       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                      11808 ; rs232cmd.c 3353       /* Returns:       --                                                     
                                                                                                                             
                                                                                                            */
                      11809 ; rs232cmd.c 3354       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      11810 ; rs232cmd.c 3355       /************************************************************************
                            **/
                      11811 ; rs232cmd.c 3356       void AudioGenAESEBU( void)
                      11812 ; rs232cmd.c 3357       {
                      11813         ALIGN   1
                      11815         PUBLIC  _AudioGenAESEBU
0029E6                11816 _AudioGenAESEBU:
0029E6 0F70           11820         PUSH.W  R4, R5, R6
                      11826 ; rs232cmd.c 3358               char code *str;
                      11827 ; rs232cmd.c 3359               int level;
                      11828 ; rs232cmd.c 3360       
                      11829 ; rs232cmd.c 3361               if ( CmdExecute && !SCPIError)
0029E8 964842rr       11831         MOV.B   ES,#SEG( _CmdExecute )
0029EC 9908rrrr       11832         MOV.W   R0,#SOF( _CmdExecute )
0029F0 8200           11833         MOV.B   R0L,[R0]
                      11834         BEQ     _811
0029F2 F202           +11834 ;       BNE     _LG_690
0029F4 D50136         +11834 ;       JMP.L   _811
0029F8 D5013600       +11834 ;       JMP.L   _811
0029F8                +11834 _LG_690:
0029F8 964842rr       11835         MOV.B   ES,#SEG( _SCPIError )
0029FC 9908rrrr       11836         MOV.W   R0,#SOF( _SCPIError )
002A00 8A00           11837         MOV.W   R0,[R0]
                      11838         BNE     _811
002A02 F302           +11838 ;       BEQ     _LG_692
002A04 D5012E         +11838 ;       JMP.L   _811
002A08 D5012E00       +11838 ;       JMP.L   _811
002A08                +11838 _LG_692:
                      11839 ; rs232cmd.c 3362               {
                      11840 ; rs232cmd.c 3363                       if ( !CmdRequest)
002A08 964842rr       11842         MOV.B   ES,#SEG( _CmdRequest )
002A0C 9908rrrr       11843         MOV.W   R0,#SOF( _CmdRequest )
002A10 8200           11844         MOV.B   R0L,[R0]
002A12 F207           11845         BNE     _782
                      11846 ; rs232cmd.c 3364                                       SCPIError = SyntaxErr;
002A14 964842rr       11848         MOV.B   ES,#SEG( _SCPIError )
002A18 9908rrrr       11849         MOV.W   R0,#SOF( _SCPIError )
002A1C BA03           11850         MOV.W   [R0],#03H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 194

ADDR   CODE            LINE SOURCELINE
                      11851         BR      _811
002A1E D50121         +11851         JMP.L   _811
002A1E D5012100       +11851         JMP.L   _811
002A22                11852 _782:
                      11854 ; rs232cmd.c 3365                       else
                      11855 ; rs232cmd.c 3366                       {
                      11856 ; rs232cmd.c 3367                               if ( ParCnt)
002A22 964842rr       11858         MOV.B   ES,#SEG( _ParCnt )
002A26 9908rrrr       11859         MOV.W   R0,#SOF( _ParCnt )
002A2A 8200           11860         MOV.B   R0L,[R0]
002A2C F307           11861         BEQ     _783
                      11862 ; rs232cmd.c 3368                                       SCPIError = ParNotAllowed;
002A2E 964842rr       11864         MOV.B   ES,#SEG( _SCPIError )
002A32 9908rrrr       11865         MOV.W   R0,#SOF( _SCPIError )
002A36 BA06           11866         MOV.W   [R0],#06H
                      11867         BR      _811
002A38 D50114         +11867         JMP.L   _811
002A38 D5011400       +11867         JMP.L   _811
002A3C                11868 _783:
                      11871 ; rs232cmd.c 3369                               else
                      11872 ; rs232cmd.c 3370                               {
                      11873 ; rs232cmd.c 3371                                       str = AESEBUSystemPar[AudioSetup[AESEBUAu
                            dio].System].LongName;
002A3C 964842rr       11875         MOV.B   ES,#SEG( _AudioSetup+14 )
002A40 9908rrrr       11876         MOV.W   R0,#SOF( _AudioSetup+14 )
002A44 8A00           11877         MOV.W   R0,[R0]
002A46 E900000C       11878         MULU.W  R0,#0CH
002A4A 8920           11879         MOV.W   R2,R0
002A4C B930           11880         MOVS.W  R3,#00H
002A4E 9918rrrr       11881         MOV.W   R1,#SEG( _AESEBUSystemPar )
002A52 9908rrrr       11882         MOV.W   R0,#SOF( _AESEBUSystemPar )
002A56 0902           11883         ADD.W   R0,R2
002A58 1913           11884         ADDC.W  R1,R3
002A5A 862C43         11885         MOV.B   CS,R1L
002A5D 8820           11886         MOVC.W  R2,[R0+]
002A5F 99040000       11887         CMP.W   R0,#00H
002A63 F202           11888         BNE     _812
002A65 A64143         11889         ADDS.B  CS,#01H
002A65 A64143         11889         ADDS.B  CS,#01H
002A68                11890 _812:
002A68 8830           11891         MOVC.W  R3,[R0+]
002A6A 8953           11892         MOV.W   R5,R3
002A6C 8942           11893         MOV.W   R4,R2
                      11895 ; rs232cmd.c 3372       
                      11896 ; rs232cmd.c 3373                                       while ( *str)
002A6E 866C43         11898         MOV.B   CS,R3L
002A71 8062           11899         MOVC.B  R3L,[R2+]
002A73 F312           11900         BEQ     _785
002A73 F31200         11900         BEQ     _785
002A76                11901 _784:
                      11902 ; rs232cmd.c 3374                                               rs232putchar( *str++);
002A76 8915           11904         MOV.W   R1,R5
002A78 8904           11905         MOV.W   R0,R4
002A7A 862C43         11906         MOV.B   CS,R1L
002A7D 8020           11907         MOVC.B  R1L,[R0+]
002A7F 8102           11908         MOV.B   R0L,R1L
                      11909         CALL    _rs232putchar
002A81 C4rrrrrr       +11909 ;       FCALL   _rs232putchar
002A85 99400001       11910         ADD.W   R4,#01H
002A89 99510000       11911         ADDC.W  R5,#00H
002A8D 8915           11915         MOV.W   R1,R5
002A8F 8904           11916         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 195

ADDR   CODE            LINE SOURCELINE
002A91 862C43         11917         MOV.B   CS,R1L
002A94 8020           11918         MOVC.B  R1L,[R0+]
002A96 F2EF           11919         BNE     _784
002A98                11921 _785:
                      11922 ; rs232cmd.c 3375       
                      11923 ; rs232cmd.c 3376                                       rs232putchar( ',');
002A98 91082C         11925         MOV.B   R0L,#02CH
                      11926         CALL    _rs232putchar
002A9B C4rrrrrr       +11926 ;       FCALL   _rs232putchar
                      11927 ; rs232cmd.c 3377       
                      11928 ; rs232cmd.c 3378                                       str = AudioSignalPar[AudioSetup[AESEBUAud
                            io].Signal].LongName;
002A9F 964842rr       11930         MOV.B   ES,#SEG( _AudioSetup+16 )
002AA3 9908rrrr       11931         MOV.W   R0,#SOF( _AudioSetup+16 )
002AA7 8A00           11932         MOV.W   R0,[R0]
002AA9 E900000C       11933         MULU.W  R0,#0CH
002AAD B910           11934         MOVS.W  R1,#00H
002AAF 9958rrrr       11935         MOV.W   R5,#SEG( _AudioSignalPar )
002AB3 9948rrrr       11936         MOV.W   R4,#SOF( _AudioSignalPar )
002AB7 0940           11938         ADD.W   R4,R0
002AB9 1951           11939         ADDC.W  R5,R1
002ABB 86AC43         11940         MOV.B   CS,R5L
002ABE 8804           11941         MOVC.W  R0,[R4+]
002AC0 99440000       11942         CMP.W   R4,#00H
002AC4 F202           11943         BNE     _813
002AC6 A64143         11944         ADDS.B  CS,#01H
002AC6 A6414300       11944         ADDS.B  CS,#01H
002ACA                11945 _813:
002ACA 8814           11946         MOVC.W  R1,[R4+]
002ACC 8951           11947         MOV.W   R5,R1
002ACE 8940           11948         MOV.W   R4,R0
                      11950 ; rs232cmd.c 3379       
                      11951 ; rs232cmd.c 3380                                       while ( *str)
002AD0 862C43         11953         MOV.B   CS,R1L
002AD3 8020           11954         MOVC.B  R1L,[R0+]
002AD5 F312           11955         BEQ     _787
002AD5 F31200         11955         BEQ     _787
002AD8                11956 _786:
                      11957 ; rs232cmd.c 3381                                               rs232putchar( *str++);
002AD8 8915           11959         MOV.W   R1,R5
002ADA 8904           11960         MOV.W   R0,R4
002ADC 862C43         11961         MOV.B   CS,R1L
002ADF 8020           11962         MOVC.B  R1L,[R0+]
002AE1 8102           11963         MOV.B   R0L,R1L
                      11964         CALL    _rs232putchar
002AE3 C4rrrrrr       +11964 ;       FCALL   _rs232putchar
002AE7 99400001       11965         ADD.W   R4,#01H
002AEB 99510000       11966         ADDC.W  R5,#00H
002AEF 8915           11970         MOV.W   R1,R5
002AF1 8904           11971         MOV.W   R0,R4
002AF3 862C43         11972         MOV.B   CS,R1L
002AF6 8020           11973         MOVC.B  R1L,[R0+]
002AF8 F2EF           11974         BNE     _786
002AFA                11976 _787:
002AFA 91082C         11977         MOV.B   R0L,#02CH
                      11978 ; rs232cmd.c 3382       
                      11979 ; rs232cmd.c 3383                                       rs232putchar( ',');
                      11981         CALL    _rs232putchar
002AFD C4rrrrrr       +11981 ;       FCALL   _rs232putchar
                      11982 ; rs232cmd.c 3384       
                      11983 ; rs232cmd.c 3385                                       str = NULL;
002B01 B950           11985         MOV.W   R5,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 196

ADDR   CODE            LINE SOURCELINE
002B03 B940           11986         MOV.W   R4,#00H
                      11989 ; rs232cmd.c 3386       
                      11990 ; rs232cmd.c 3387                                       switch ( AudioSetup[AESEBUAudio].Level)
002B05 964842rr       11992         MOV.B   ES,#SEG( _AudioSetup+18 )
002B09 9908rrrr       11993         MOV.W   R0,#SOF( _AudioSetup+18 )
002B0D 8A00           11994         MOV.W   R0,[R0]
002B0F 99040000       11995         CMP.W   R0,#00H
002B13 F314           11996         BEQ     _788
002B15 99040001       11997         CMP.W   R0,#01H
002B19 F313           11998         BEQ     _789
002B1B 99040002       11999         CMP.W   R0,#02H
002B1F F313           12000         BEQ     _790
002B21 99040003       12001         CMP.W   R0,#03H
002B25 F313           12002         BEQ     _791
002B27 99040004       12003         CMP.W   R0,#04H
002B2B F313           12004         BEQ     _792
002B2D 99040005       12005         CMP.W   R0,#05H
002B31 F313           12006         BEQ     _793
002B33 99040006       12007         CMP.W   R0,#06H
002B37 F313           12008         BEQ     _794
002B39 FE15           12009         BR      _795
                      12010 ; rs232cmd.c 3388                                       {
                      12011 ; rs232cmd.c 3389                                               case M0dBFS:
002B3C                12013 _788:
                      12014 ; rs232cmd.c 3390                                                       level = 0;
002B3C B960           12016         MOV.W   R6,#00H
                      12019 ; rs232cmd.c 3391                                                       break;
002B3E FE31           12021         BR      _804
                      12022 ; rs232cmd.c 3392       
                      12023 ; rs232cmd.c 3393                                               case M9dBFS:
002B40                12025 _789:
                      12026 ; rs232cmd.c 3394                                                       level = -9;
002B40 9968FFF7       12028         MOV.W   R6,#0FFF7H
                      12031 ; rs232cmd.c 3395                                                       break;
002B44 FE2E           12033         BR      _804
                      12034 ; rs232cmd.c 3396       
                      12035 ; rs232cmd.c 3397                                               case M12dBFS:
002B46                12037 _790:
                      12038 ; rs232cmd.c 3398                                                       level = -12;
002B46 9968FFF4       12040         MOV.W   R6,#0FFF4H
                      12043 ; rs232cmd.c 3399                                                       break;
002B4A FE2B           12045         BR      _804
                      12046 ; rs232cmd.c 3400       
                      12047 ; rs232cmd.c 3401                                               case M15dBFS:
002B4C                12049 _791:
                      12050 ; rs232cmd.c 3402                                                       level = -15;
002B4C 9968FFF1       12052         MOV.W   R6,#0FFF1H
                      12055 ; rs232cmd.c 3403                                                       break;
002B50 FE28           12057         BR      _804
                      12058 ; rs232cmd.c 3404       
                      12059 ; rs232cmd.c 3405                                               case M16dBFS:
002B52                12061 _792:
                      12062 ; rs232cmd.c 3406                                                       level = -16;
002B52 9968FFF0       12064         MOV.W   R6,#0FFF0H
                      12067 ; rs232cmd.c 3407                                                       break;
002B56 FE25           12069         BR      _804
                      12070 ; rs232cmd.c 3408       
                      12071 ; rs232cmd.c 3409                                               case M18dBFS:
002B58                12073 _793:
                      12074 ; rs232cmd.c 3410                                                       level = -18;
002B58 9968FFEE       12076         MOV.W   R6,#0FFEEH
                      12079 ; rs232cmd.c 3411                                                       break;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 197

ADDR   CODE            LINE SOURCELINE
002B5C FE22           12081         BR      _804
                      12082 ; rs232cmd.c 3412       
                      12083 ; rs232cmd.c 3413                                               case M21dBFS:
002B5E                12085 _794:
                      12086 ; rs232cmd.c 3414                                                       level = -21;
002B5E 9968FFEB       12088         MOV.W   R6,#0FFEBH
                      12091 ; rs232cmd.c 3415                                                       break;
002B62 FE1F           12093         BR      _804
                      12094 ; rs232cmd.c 3416       
                      12095 ; rs232cmd.c 3417                                               default:
002B64                12097 _795:
                      12098 ; rs232cmd.c 3418                                                       str = SILENCEParTxt;
002B64 9958rrrr       12100         MOV.W   R5,#SEG( _SILENCEParTxt )
002B68 9948rrrr       12101         MOV.W   R4,#SOF( _SILENCEParTxt )
                      12104 ; rs232cmd.c 3419       
                      12105 ; rs232cmd.c 3420                                                       while ( *str)
002B6C 8915           12107         MOV.W   R1,R5
002B6E 8904           12108         MOV.W   R0,R4
002B70 862C43         12109         MOV.B   CS,R1L
002B73 8020           12110         MOVC.B  R1L,[R0+]
002B75 F312           12111         BEQ     _797
002B75 F31200         12111         BEQ     _797
002B78                12112 _796:
                      12113 ; rs232cmd.c 3421                                                               rs232putchar( *st
                            r++);
002B78 8915           12115         MOV.W   R1,R5
002B7A 8904           12116         MOV.W   R0,R4
002B7C 862C43         12117         MOV.B   CS,R1L
002B7F 8020           12118         MOVC.B  R1L,[R0+]
002B81 8102           12119         MOV.B   R0L,R1L
                      12120         CALL    _rs232putchar
002B83 C4rrrrrr       +12120 ;       FCALL   _rs232putchar
002B87 99400001       12121         ADD.W   R4,#01H
002B8B 99510000       12122         ADDC.W  R5,#00H
002B8F 8915           12126         MOV.W   R1,R5
002B91 8904           12127         MOV.W   R0,R4
002B93 862C43         12128         MOV.B   CS,R1L
002B96 8020           12129         MOVC.B  R1L,[R0+]
002B98 F2EF           12130         BNE     _796
002B9A                12132 _797:
002B9A 91082C         12133         MOV.B   R0L,#02CH
                      12134 ; rs232cmd.c 3422       
                      12135 ; rs232cmd.c 3423                                                       rs232putchar( ',');
                      12137         CALL    _rs232putchar
002B9D C4rrrrrr       +12137 ;       FCALL   _rs232putchar
                      12138 ; rs232cmd.c 3424                                                       break;
                      12139 ; rs232cmd.c 3425                                               }
002BA2                12141 _804:
                      12142 ; rs232cmd.c 3426       
                      12143 ; rs232cmd.c 3427                                       if ( str == NULL)
002BA2 6954           12145         OR.W    R5,R4
002BA4 F20A           12146         BNE     _805
                      12147 ; rs232cmd.c 3428                                               rs232printf( 6, "%d,", level);
002BA6 B906           12149         MOV.W   R0,#06H
002BA8 0F40           12150         PUSH.W  R6
002BAA 9938rrrr       12153         MOV.W   R3,#SEG( _529 )
002BAE 9928rrrr       12154         MOV.W   R2,#SOF( _529 )
002BB2 0F0C           12155         PUSH.W  R2, R3
                      12157         CALL    _rs232printf
002BB4 C4rrrrrr       +12157 ;       FCALL   _rs232printf
002BB8 A976           12158         ADDS.W  R7,#06H
002BBA                12160 _805:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 198

ADDR   CODE            LINE SOURCELINE
                      12161 ; rs232cmd.c 3429       
                      12162 ; rs232cmd.c 3430                                       rs232printf( 6, "%.1f,", AudioSetup[AESEB
                            UAudio].Timing);
002BBA 964842rr       12164         MOV.B   ES,#SEG( _AudioSetup+20 )
002BBE 9918rrrr       12165         MOV.W   R1,#SOF( _AudioSetup+20 )
002BC2 8B01           12166         MOV.W   R0,[R1+]
002BC4 8A11           12167         MOV.W   R1,[R1]
002BC6 C4rrrrrr       12168         FCALL   __SPF2DPF
002BCA 0F0F           12169         PUSH.W  R0, R1, R2, R3
002BCC 9918rrrr       12171         MOV.W   R1,#SEG( _781 )
002BD0 9908rrrr       12172         MOV.W   R0,#SOF( _781 )
002BD4 0F03           12173         PUSH.W  R0, R1
002BD6 B906           12175         MOV.W   R0,#06H
                      12176         CALL    _rs232printf
002BD8 C4rrrrrr       +12176 ;       FCALL   _rs232printf
002BDC 9970000C       12177         ADD.W   R7,#0CH
                      12179 ; rs232cmd.c 3431       
                      12180 ; rs232cmd.c 3432                                       str = AudioFrequencyPar[AudioSetup[AESEBU
                            Audio].Frequency].LongName;
002BE0 964842rr       12182         MOV.B   ES,#SEG( _AudioSetup+24 )
002BE4 9908rrrr       12183         MOV.W   R0,#SOF( _AudioSetup+24 )
002BE8 8A00           12184         MOV.W   R0,[R0]
002BEA E900000C       12185         MULU.W  R0,#0CH
002BEE 8920           12186         MOV.W   R2,R0
002BF0 B930           12187         MOVS.W  R3,#00H
002BF2 9918rrrr       12188         MOV.W   R1,#SEG( _AudioFrequencyPar )
002BF6 9908rrrr       12189         MOV.W   R0,#SOF( _AudioFrequencyPar )
002BFA 0902           12190         ADD.W   R0,R2
002BFC 1913           12191         ADDC.W  R1,R3
002BFE 862C43         12192         MOV.B   CS,R1L
002C01 8840           12193         MOVC.W  R4,[R0+]
002C03 99040000       12194         CMP.W   R0,#00H
002C07 F202           12195         BNE     _814
002C09 A64143         12196         ADDS.B  CS,#01H
002C09 A64143         12196         ADDS.B  CS,#01H
002C0C                12197 _814:
002C0C 8850           12198         MOVC.W  R5,[R0+]
                      12201 ; rs232cmd.c 3433       
                      12202 ; rs232cmd.c 3434                                       while ( *str)
002C0E 8915           12204         MOV.W   R1,R5
002C10 8904           12205         MOV.W   R0,R4
002C12 862C43         12206         MOV.B   CS,R1L
002C15 8020           12207         MOVC.B  R1L,[R0+]
002C17 F312           12208         BEQ     _807
002C17 F31200         12208         BEQ     _807
002C1A                12209 _806:
                      12210 ; rs232cmd.c 3435                                               rs232putchar( *str++);
002C1A 8915           12212         MOV.W   R1,R5
002C1C 8904           12213         MOV.W   R0,R4
002C1E 862C43         12214         MOV.B   CS,R1L
002C21 8020           12215         MOVC.B  R1L,[R0+]
002C23 8102           12216         MOV.B   R0L,R1L
                      12217         CALL    _rs232putchar
002C25 C4rrrrrr       +12217 ;       FCALL   _rs232putchar
002C29 99400001       12218         ADD.W   R4,#01H
002C2D 99510000       12219         ADDC.W  R5,#00H
002C31 8915           12223         MOV.W   R1,R5
002C33 8904           12224         MOV.W   R0,R4
002C35 862C43         12225         MOV.B   CS,R1L
002C38 8020           12226         MOVC.B  R1L,[R0+]
002C3A F2EF           12227         BNE     _806
002C3C                12229 _807:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 199

ADDR   CODE            LINE SOURCELINE
                      12230 ; rs232cmd.c 3436       
                      12231 ; rs232cmd.c 3437                                       rs232putchar( ',');
002C3C 91082C         12233         MOV.B   R0L,#02CH
                      12234         CALL    _rs232putchar
002C3F C4rrrrrr       +12234 ;       FCALL   _rs232putchar
                      12235 ; rs232cmd.c 3438       
                      12236 ; rs232cmd.c 3439                                       rs232printf( 6, "%d\n", AudioSetup[AESEBU
                            Audio].Click);
002C43 964842rr       12238         MOV.B   ES,#SEG( _AudioSetup+26 )
002C47 9908rrrr       12239         MOV.W   R0,#SOF( _AudioSetup+26 )
002C4B 8A00           12240         MOV.W   R0,[R0]
002C4D 0F01           12241         PUSH.W  R0
002C4F 9918rrrr       12243         MOV.W   R1,#SEG( _9 )
002C53 9908rrrr       12244         MOV.W   R0,#SOF( _9 )
002C57 0F03           12245         PUSH.W  R0, R1
002C59 B906           12247         MOV.W   R0,#06H
                      12248         CALL    _rs232printf
002C5B C4rrrrrr       +12248 ;       FCALL   _rs232printf
002C5F A976           12249         ADDS.W  R7,#06H
                      12251 ; rs232cmd.c 3440                               }
                      12252 ; rs232cmd.c 3441                       }
                      12253 ; rs232cmd.c 3442               }
002C62                12255 _811:
                      12256 ; rs232cmd.c 3443       }
002C62 2F70           12258         POP.W   R4, R5, R6
002C64 D680           12260         RET
                      12263 ; rs232cmd.c 3444       
                      12264 ; rs232cmd.c 3445       /************************************************************************
                            **/
                      12265 ; rs232cmd.c 3446       /* AudioGenAESEBUSystem                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      12266 ; rs232cmd.c 3447       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12267 ; rs232cmd.c 3448       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      12268 ; rs232cmd.c 3449       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      12269 ; rs232cmd.c 3450       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12270 ; rs232cmd.c 3451       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12271 ; rs232cmd.c 3452       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12272 ; rs232cmd.c 3453       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12273 ; rs232cmd.c 3454       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12274 ; rs232cmd.c 3455       /************************************************************************
                            **/
                      12275 ; rs232cmd.c 3456       void AudioGenAESEBUSystem( void)
                      12276 ; rs232cmd.c 3457       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 200

ADDR   CODE            LINE SOURCELINE
                      12277         ALIGN   1
                      12279         PUBLIC  _AudioGenAESEBUSystem
002C66                12280 _AudioGenAESEBUSystem:
002C66 0F30           12284         PUSH.W  R4, R5
                      12290 ; rs232cmd.c 3458               int system;
                      12291 ; rs232cmd.c 3459               char code *str;
                      12292 ; rs232cmd.c 3460       
                      12293 ; rs232cmd.c 3461               if ( CmdExecute && !SCPIError)
002C68 964842rr       12295         MOV.B   ES,#SEG( _CmdExecute )
002C6C 9908rrrr       12296         MOV.W   R0,#SOF( _CmdExecute )
002C70 8200           12297         MOV.B   R0L,[R0]
002C72 F379           12298         BEQ     _827
002C74 964842rr       12299         MOV.B   ES,#SEG( _SCPIError )
002C78 9908rrrr       12300         MOV.W   R0,#SOF( _SCPIError )
002C7C 8A00           12301         MOV.W   R0,[R0]
002C7E F273           12302         BNE     _827
                      12303 ; rs232cmd.c 3462               {
                      12304 ; rs232cmd.c 3463                       if ( CmdRequest)
002C80 964842rr       12306         MOV.B   ES,#SEG( _CmdRequest )
002C84 9908rrrr       12307         MOV.W   R0,#SOF( _CmdRequest )
002C88 8200           12308         MOV.B   R0L,[R0]
002C8A F33F           12309         BEQ     _818
                      12310 ; rs232cmd.c 3464                       {
                      12311 ; rs232cmd.c 3465                               if ( ParCnt)
002C8C 964842rr       12313         MOV.B   ES,#SEG( _ParCnt )
002C90 9908rrrr       12314         MOV.W   R0,#SOF( _ParCnt )
002C94 8200           12315         MOV.B   R0L,[R0]
002C96 F306           12316         BEQ     _815
                      12317 ; rs232cmd.c 3466                                       SCPIError = ParNotAllowed;
002C98 964842rr       12319         MOV.B   ES,#SEG( _SCPIError )
002C9C 9908rrrr       12320         MOV.W   R0,#SOF( _SCPIError )
002CA0 BA06           12321         MOV.W   [R0],#06H
002CA2 FE61           12322         BR      _827
002CA2 FE61           12322         BR      _827
002CA4                12323 _815:
                      12324 ; rs232cmd.c 3467                               else
                      12325 ; rs232cmd.c 3468                               {
                      12326 ; rs232cmd.c 3469                                       str = AESEBUSystemPar[AudioSetup[AESEBUAu
                            dio].System].LongName;
002CA4 964842rr       12328         MOV.B   ES,#SEG( _AudioSetup+14 )
002CA8 9908rrrr       12329         MOV.W   R0,#SOF( _AudioSetup+14 )
002CAC 8A00           12330         MOV.W   R0,[R0]
002CAE E900000C       12331         MULU.W  R0,#0CH
002CB2 8920           12332         MOV.W   R2,R0
002CB4 B930           12333         MOVS.W  R3,#00H
002CB6 9918rrrr       12334         MOV.W   R1,#SEG( _AESEBUSystemPar )
002CBA 9908rrrr       12335         MOV.W   R0,#SOF( _AESEBUSystemPar )
002CBE 0902           12336         ADD.W   R0,R2
002CC0 1913           12337         ADDC.W  R1,R3
002CC2 862C43         12338         MOV.B   CS,R1L
002CC5 8820           12339         MOVC.W  R2,[R0+]
002CC7 99040000       12340         CMP.W   R0,#00H
002CCB F202           12341         BNE     _828
002CCD A64143         12342         ADDS.B  CS,#01H
002CCD A64143         12342         ADDS.B  CS,#01H
002CD0                12343 _828:
002CD0 8830           12344         MOVC.W  R3,[R0+]
002CD2 8953           12345         MOV.W   R5,R3
002CD4 8942           12346         MOV.W   R4,R2
                      12348 ; rs232cmd.c 3470       
                      12349 ; rs232cmd.c 3471                                       while ( *str)
002CD6 866C43         12351         MOV.B   CS,R3L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 201

ADDR   CODE            LINE SOURCELINE
002CD9 8062           12352         MOVC.B  R3L,[R2+]
002CDB F312           12353         BEQ     _817
002CDB F31200         12353         BEQ     _817
002CDE                12354 _816:
                      12355 ; rs232cmd.c 3472                                               rs232putchar( *str++);
002CDE 8915           12357         MOV.W   R1,R5
002CE0 8904           12358         MOV.W   R0,R4
002CE2 862C43         12359         MOV.B   CS,R1L
002CE5 8020           12360         MOVC.B  R1L,[R0+]
002CE7 8102           12361         MOV.B   R0L,R1L
                      12362         CALL    _rs232putchar
002CE9 C4rrrrrr       +12362 ;       FCALL   _rs232putchar
002CED 99400001       12363         ADD.W   R4,#01H
002CF1 99510000       12364         ADDC.W  R5,#00H
002CF5 8915           12368         MOV.W   R1,R5
002CF7 8904           12369         MOV.W   R0,R4
002CF9 862C43         12370         MOV.B   CS,R1L
002CFC 8020           12371         MOVC.B  R1L,[R0+]
002CFE F2EF           12372         BNE     _816
002D00                12374 _817:
                      12375 ; rs232cmd.c 3473       
                      12376 ; rs232cmd.c 3474                                       rs232putchar('\n');
002D00 91080A         12378         MOV.B   R0L,#0AH
                      12379         CALL    _rs232putchar
002D03 C4rrrrrr       +12379 ;       FCALL   _rs232putchar
                      12380 ; rs232cmd.c 3475                               }
                      12381 ; rs232cmd.c 3476                       }
002D07 FE2F           12383         BR      _827
002D07 FE2F00         12383         BR      _827
002D0A                12384 _818:
                      12385 ; rs232cmd.c 3477                       else
                      12386 ; rs232cmd.c 3478                       {
                      12387 ; rs232cmd.c 3479                               if ( ParCnt != 1)
002D0A 964842rr       12389         MOV.B   ES,#SEG( _ParCnt )
002D0E 9908rrrr       12390         MOV.W   R0,#SOF( _ParCnt )
002D12 8200           12391         MOV.B   R0L,[R0]
002D14 910401         12392         CMP.B   R0L,#01H
002D17 F307           12393         BEQ     _819
                      12394 ; rs232cmd.c 3480                                       SCPIError = SyntaxErr;
002D19 964842rr       12396         MOV.B   ES,#SEG( _SCPIError )
002D1D 9908rrrr       12397         MOV.W   R0,#SOF( _SCPIError )
002D21 BA03           12398         MOV.W   [R0],#03H
002D23 FE21           12399         BR      _827
002D23 FE2100         12399         BR      _827
002D26                12400 _819:
                      12401 ; rs232cmd.c 3481                               else
                      12402 ; rs232cmd.c 3482                               {
                      12403 ; rs232cmd.c 3483                                       system = FindParameter( Cmd, AESEBUSystem
                            Par);
002D26 9918rrrr       12405         MOV.W   R1,#SEG( _Cmd )
002D2A 9908rrrr       12406         MOV.W   R0,#SOF( _Cmd )
002D2E 9938rrrr       12407         MOV.W   R3,#SEG( _AESEBUSystemPar )
002D32 9928rrrr       12408         MOV.W   R2,#SOF( _AESEBUSystemPar )
002D36 C51924         12409         CALL    _FindParameter
                      12411 ; rs232cmd.c 3484               
                      12412 ; rs232cmd.c 3485                                       if ( system > -1)
002D39 8910           12414         MOV.W   R1,R0
002D3B 9914FFFF       12415         CMP.W   R1,#0FFFFH
002D3F FD0D           12418         BLE     _820
                      12419 ; rs232cmd.c 3486                                       {
                      12420 ; rs232cmd.c 3487                                               if ( SetAudioSystem( AESEBUAudio,
                             system) == FAIL)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 202

ADDR   CODE            LINE SOURCELINE
002D41 B901           12422         MOV.W   R0,#01H
                      12423         CALL    _SetAudioSystem
002D43 C4rrrrrr       +12423 ;       FCALL   _SetAudioSystem
002D47 6900           12425         OR.W    R0,R0
002D49 F20E           12426         BNE     _827
                      12427 ; rs232cmd.c 3488                                                       SCPIError = ExecErr;
002D4B 964842rr       12429         MOV.B   ES,#SEG( _SCPIError )
002D4F 9908rrrr       12430         MOV.W   R0,#SOF( _SCPIError )
002D53 9A08001D       12431         MOV.W   [R0],#01DH
                      12432 ; rs232cmd.c 3489                                       }
002D57 FE07           12434         BR      _827
002D57 FE0700         12434         BR      _827
002D5A                12435 _820:
                      12436 ; rs232cmd.c 3490                                       else
                      12437 ; rs232cmd.c 3491                                               SCPIError = DataOutOfRange;
002D5A 964842rr       12439         MOV.B   ES,#SEG( _SCPIError )
002D5E 9908rrrr       12440         MOV.W   R0,#SOF( _SCPIError )
002D62 9A080021       12441         MOV.W   [R0],#021H
                      12442 ; rs232cmd.c 3492                               }
                      12443 ; rs232cmd.c 3493                       }
                      12444 ; rs232cmd.c 3494               }
002D66                12446 _827:
                      12447 ; rs232cmd.c 3495       }
002D66 2F30           12449         POP.W   R4, R5
002D68 D680           12451         RET
                      12454 ; rs232cmd.c 3496       
                      12455 ; rs232cmd.c 3497       /************************************************************************
                            **/
                      12456 ; rs232cmd.c 3498       /* AudioGenAESEBUSignal                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      12457 ; rs232cmd.c 3499       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12458 ; rs232cmd.c 3500       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      12459 ; rs232cmd.c 3501       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      12460 ; rs232cmd.c 3502       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12461 ; rs232cmd.c 3503       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12462 ; rs232cmd.c 3504       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12463 ; rs232cmd.c 3505       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12464 ; rs232cmd.c 3506       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12465 ; rs232cmd.c 3507       /************************************************************************
                            **/
                      12466 ; rs232cmd.c 3508       void AudioGenAESEBUSignal( void)
                      12467 ; rs232cmd.c 3509       {
                      12468         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 203

ADDR   CODE            LINE SOURCELINE
                      12470         PUBLIC  _AudioGenAESEBUSignal
002D6A                12471 _AudioGenAESEBUSignal:
002D6A 0F30           12475         PUSH.W  R4, R5
                      12481 ; rs232cmd.c 3510               int signal;
                      12482 ; rs232cmd.c 3511               char code *str;
                      12483 ; rs232cmd.c 3512       
                      12484 ; rs232cmd.c 3513               if ( CmdExecute && !SCPIError)
002D6C 964842rr       12486         MOV.B   ES,#SEG( _CmdExecute )
002D70 9908rrrr       12487         MOV.W   R0,#SOF( _CmdExecute )
002D74 8200           12488         MOV.B   R0L,[R0]
002D76 F379           12489         BEQ     _843
002D78 964842rr       12490         MOV.B   ES,#SEG( _SCPIError )
002D7C 9908rrrr       12491         MOV.W   R0,#SOF( _SCPIError )
002D80 8A00           12492         MOV.W   R0,[R0]
002D82 F273           12493         BNE     _843
                      12494 ; rs232cmd.c 3514               {
                      12495 ; rs232cmd.c 3515                       if ( CmdRequest)
002D84 964842rr       12497         MOV.B   ES,#SEG( _CmdRequest )
002D88 9908rrrr       12498         MOV.W   R0,#SOF( _CmdRequest )
002D8C 8200           12499         MOV.B   R0L,[R0]
002D8E F33F           12500         BEQ     _834
                      12501 ; rs232cmd.c 3516                       {
                      12502 ; rs232cmd.c 3517                               if ( ParCnt)
002D90 964842rr       12504         MOV.B   ES,#SEG( _ParCnt )
002D94 9908rrrr       12505         MOV.W   R0,#SOF( _ParCnt )
002D98 8200           12506         MOV.B   R0L,[R0]
002D9A F306           12507         BEQ     _831
                      12508 ; rs232cmd.c 3518                                       SCPIError = ParNotAllowed;
002D9C 964842rr       12510         MOV.B   ES,#SEG( _SCPIError )
002DA0 9908rrrr       12511         MOV.W   R0,#SOF( _SCPIError )
002DA4 BA06           12512         MOV.W   [R0],#06H
002DA6 FE61           12513         BR      _843
002DA6 FE61           12513         BR      _843
002DA8                12514 _831:
                      12515 ; rs232cmd.c 3519                               else
                      12516 ; rs232cmd.c 3520                               {
                      12517 ; rs232cmd.c 3521                                       str = AudioSignalPar[AudioSetup[AESEBUAud
                            io].Signal].LongName;
002DA8 964842rr       12519         MOV.B   ES,#SEG( _AudioSetup+16 )
002DAC 9908rrrr       12520         MOV.W   R0,#SOF( _AudioSetup+16 )
002DB0 8A00           12521         MOV.W   R0,[R0]
002DB2 E900000C       12522         MULU.W  R0,#0CH
002DB6 8920           12523         MOV.W   R2,R0
002DB8 B930           12524         MOVS.W  R3,#00H
002DBA 9918rrrr       12525         MOV.W   R1,#SEG( _AudioSignalPar )
002DBE 9908rrrr       12526         MOV.W   R0,#SOF( _AudioSignalPar )
002DC2 0902           12527         ADD.W   R0,R2
002DC4 1913           12528         ADDC.W  R1,R3
002DC6 862C43         12529         MOV.B   CS,R1L
002DC9 8820           12530         MOVC.W  R2,[R0+]
002DCB 99040000       12531         CMP.W   R0,#00H
002DCF F202           12532         BNE     _844
002DD1 A64143         12533         ADDS.B  CS,#01H
002DD1 A64143         12533         ADDS.B  CS,#01H
002DD4                12534 _844:
002DD4 8830           12535         MOVC.W  R3,[R0+]
002DD6 8953           12536         MOV.W   R5,R3
002DD8 8942           12537         MOV.W   R4,R2
                      12539 ; rs232cmd.c 3522       
                      12540 ; rs232cmd.c 3523                                       while ( *str)
002DDA 866C43         12542         MOV.B   CS,R3L
002DDD 8062           12543         MOVC.B  R3L,[R2+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 204

ADDR   CODE            LINE SOURCELINE
002DDF F312           12544         BEQ     _833
002DDF F31200         12544         BEQ     _833
002DE2                12545 _832:
                      12546 ; rs232cmd.c 3524                                               rs232putchar( *str++);
002DE2 8915           12548         MOV.W   R1,R5
002DE4 8904           12549         MOV.W   R0,R4
002DE6 862C43         12550         MOV.B   CS,R1L
002DE9 8020           12551         MOVC.B  R1L,[R0+]
002DEB 8102           12552         MOV.B   R0L,R1L
                      12553         CALL    _rs232putchar
002DED C4rrrrrr       +12553 ;       FCALL   _rs232putchar
002DF1 99400001       12554         ADD.W   R4,#01H
002DF5 99510000       12555         ADDC.W  R5,#00H
002DF9 8915           12559         MOV.W   R1,R5
002DFB 8904           12560         MOV.W   R0,R4
002DFD 862C43         12561         MOV.B   CS,R1L
002E00 8020           12562         MOVC.B  R1L,[R0+]
002E02 F2EF           12563         BNE     _832
002E04                12565 _833:
                      12566 ; rs232cmd.c 3525       
                      12567 ; rs232cmd.c 3526                                       rs232putchar('\n');
002E04 91080A         12569         MOV.B   R0L,#0AH
                      12570         CALL    _rs232putchar
002E07 C4rrrrrr       +12570 ;       FCALL   _rs232putchar
                      12571 ; rs232cmd.c 3527                               }
                      12572 ; rs232cmd.c 3528                       }
002E0B FE2F           12574         BR      _843
002E0B FE2F00         12574         BR      _843
002E0E                12575 _834:
                      12576 ; rs232cmd.c 3529                       else
                      12577 ; rs232cmd.c 3530                       {
                      12578 ; rs232cmd.c 3531                               if ( ParCnt != 1)
002E0E 964842rr       12580         MOV.B   ES,#SEG( _ParCnt )
002E12 9908rrrr       12581         MOV.W   R0,#SOF( _ParCnt )
002E16 8200           12582         MOV.B   R0L,[R0]
002E18 910401         12583         CMP.B   R0L,#01H
002E1B F307           12584         BEQ     _835
                      12585 ; rs232cmd.c 3532                                       SCPIError = SyntaxErr;
002E1D 964842rr       12587         MOV.B   ES,#SEG( _SCPIError )
002E21 9908rrrr       12588         MOV.W   R0,#SOF( _SCPIError )
002E25 BA03           12589         MOV.W   [R0],#03H
002E27 FE21           12590         BR      _843
002E27 FE2100         12590         BR      _843
002E2A                12591 _835:
                      12592 ; rs232cmd.c 3533                               else
                      12593 ; rs232cmd.c 3534                               {
                      12594 ; rs232cmd.c 3535                                       signal = FindParameter( Cmd, AudioSignalP
                            ar);
002E2A 9918rrrr       12596         MOV.W   R1,#SEG( _Cmd )
002E2E 9908rrrr       12597         MOV.W   R0,#SOF( _Cmd )
002E32 9938rrrr       12598         MOV.W   R3,#SEG( _AudioSignalPar )
002E36 9928rrrr       12599         MOV.W   R2,#SOF( _AudioSignalPar )
002E3A C518A2         12600         CALL    _FindParameter
                      12602 ; rs232cmd.c 3536               
                      12603 ; rs232cmd.c 3537                                       if ( signal > -1)
002E3D 8910           12605         MOV.W   R1,R0
002E3F 9914FFFF       12606         CMP.W   R1,#0FFFFH
002E43 FD0D           12609         BLE     _836
                      12610 ; rs232cmd.c 3538                                       {
                      12611 ; rs232cmd.c 3539                                               if ( SetAudioSignal( AESEBUAudio,
                             signal) == FAIL)
002E45 B901           12613         MOV.W   R0,#01H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 205

ADDR   CODE            LINE SOURCELINE
                      12614         CALL    _SetAudioSignal
002E47 C4rrrrrr       +12614 ;       FCALL   _SetAudioSignal
002E4B 6900           12616         OR.W    R0,R0
002E4D F20E           12617         BNE     _843
                      12618 ; rs232cmd.c 3540                                                       SCPIError = ExecErr;
002E4F 964842rr       12620         MOV.B   ES,#SEG( _SCPIError )
002E53 9908rrrr       12621         MOV.W   R0,#SOF( _SCPIError )
002E57 9A08001D       12622         MOV.W   [R0],#01DH
                      12623 ; rs232cmd.c 3541                                       }
002E5B FE07           12625         BR      _843
002E5B FE0700         12625         BR      _843
002E5E                12626 _836:
                      12627 ; rs232cmd.c 3542                                       else
                      12628 ; rs232cmd.c 3543                                               SCPIError = DataOutOfRange;
002E5E 964842rr       12630         MOV.B   ES,#SEG( _SCPIError )
002E62 9908rrrr       12631         MOV.W   R0,#SOF( _SCPIError )
002E66 9A080021       12632         MOV.W   [R0],#021H
                      12633 ; rs232cmd.c 3544                               }
                      12634 ; rs232cmd.c 3545                       }
                      12635 ; rs232cmd.c 3546               }
002E6A                12637 _843:
                      12638 ; rs232cmd.c 3547       }
002E6A 2F30           12640         POP.W   R4, R5
002E6C D680           12642         RET
                      12645 ; rs232cmd.c 3548       
                      12646 ; rs232cmd.c 3549       /************************************************************************
                            **/
                      12647 ; rs232cmd.c 3550       /* AudioGenAESEBULevel                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      12648 ; rs232cmd.c 3551       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12649 ; rs232cmd.c 3552       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      12650 ; rs232cmd.c 3553       /* Revised:             0000628                                          
                                                                                                                             
                                                                                    */
                      12651 ; rs232cmd.c 3554       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12652 ; rs232cmd.c 3555       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12653 ; rs232cmd.c 3556       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12654 ; rs232cmd.c 3557       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12655 ; rs232cmd.c 3558       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12656 ; rs232cmd.c 3559       /************************************************************************
                            **/
                      12657 ; rs232cmd.c 3560       void AudioGenAESEBULevel( void)
                      12658 ; rs232cmd.c 3561       {
                      12659         ALIGN   1
                      12661         PUBLIC  _AudioGenAESEBULevel
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 206

ADDR   CODE            LINE SOURCELINE
002E6E                12662 _AudioGenAESEBULevel:
002E6E 0F30           12666         PUSH.W  R4, R5
002E70 A97E           12668         ADDS.W  R7,#0EH
                      12673 ; rs232cmd.c 3562               code char *str;
                      12674 ; rs232cmd.c 3563               int level;
                      12675 ; rs232cmd.c 3564       
                      12676 ; rs232cmd.c 3565               if ( CmdExecute && !SCPIError)
002E72 964842rr       12678         MOV.B   ES,#SEG( _CmdExecute )
002E76 9908rrrr       12679         MOV.W   R0,#SOF( _CmdExecute )
002E7A 8200           12680         MOV.B   R0L,[R0]
                      12681         BEQ     _892
002E7C F202           +12681 ;       BNE     _LG_776
002E7E D500EC         +12681 ;       JMP.L   _892
002E82 D500EC00       +12681 ;       JMP.L   _892
002E82                +12681 _LG_776:
002E82 964842rr       12682         MOV.B   ES,#SEG( _SCPIError )
002E86 9908rrrr       12683         MOV.W   R0,#SOF( _SCPIError )
002E8A 8A00           12684         MOV.W   R0,[R0]
                      12685         BNE     _892
002E8C F302           +12685 ;       BEQ     _LG_778
002E8E D500E4         +12685 ;       JMP.L   _892
002E92 D500E400       +12685 ;       JMP.L   _892
002E92                +12685 _LG_778:
                      12686 ; rs232cmd.c 3566               {
                      12687 ; rs232cmd.c 3567                       if ( CmdRequest)
002E92 964842rr       12689         MOV.B   ES,#SEG( _CmdRequest )
002E96 9908rrrr       12690         MOV.W   R0,#SOF( _CmdRequest )
002E9A 8200           12691         MOV.B   R0L,[R0]
002E9C F367           12692         BEQ     _864
                      12693 ; rs232cmd.c 3568                       {
                      12694 ; rs232cmd.c 3569                               if ( ParCnt)
002E9E 964842rr       12696         MOV.B   ES,#SEG( _ParCnt )
002EA2 9908rrrr       12697         MOV.W   R0,#SOF( _ParCnt )
002EA6 8200           12698         MOV.B   R0L,[R0]
002EA8 F307           12699         BEQ     _847
                      12700 ; rs232cmd.c 3570                                       SCPIError = ParNotAllowed;
002EAA 964842rr       12702         MOV.B   ES,#SEG( _SCPIError )
002EAE 9908rrrr       12703         MOV.W   R0,#SOF( _SCPIError )
002EB2 BA06           12704         MOV.W   [R0],#06H
                      12705         BR      _892
002EB4 D500D1         +12705         JMP.L   _892
002EB4 D500D100       +12705         JMP.L   _892
002EB8                12706 _847:
                      12707 ; rs232cmd.c 3571                               else
                      12708 ; rs232cmd.c 3572                               {
                      12709 ; rs232cmd.c 3573                                       switch ( AudioSetup[AESEBUAudio].Level)
002EB8 964842rr       12711         MOV.B   ES,#SEG( _AudioSetup+18 )
002EBC 9908rrrr       12712         MOV.W   R0,#SOF( _AudioSetup+18 )
002EC0 8A00           12713         MOV.W   R0,[R0]
002EC2 99040000       12714         CMP.W   R0,#00H
002EC6 F345           12715         BEQ     _857
002EC8 99040001       12716         CMP.W   R0,#01H
002ECC F310           12717         BEQ     _848
002ECE 99040002       12718         CMP.W   R0,#02H
002ED2 F310           12719         BEQ     _849
002ED4 99040003       12720         CMP.W   R0,#03H
002ED8 F310           12721         BEQ     _850
002EDA 99040004       12722         CMP.W   R0,#04H
002EDE F310           12723         BEQ     _851
002EE0 99040005       12724         CMP.W   R0,#05H
002EE4 F310           12725         BEQ     _852
002EE6 99040006       12726         CMP.W   R0,#06H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 207

ADDR   CODE            LINE SOURCELINE
002EEA F310           12727         BEQ     _853
002EEC FE12           12728         BR      _854
                      12729 ; rs232cmd.c 3574                                       {
                      12730 ; rs232cmd.c 3575                                               case M0dBFS:
                      12731 ; rs232cmd.c 3576                                                       level = 0;
                      12732 ; rs232cmd.c 3577                                                       break;
                      12733 ; rs232cmd.c 3578       
                      12734 ; rs232cmd.c 3579                                               case M9dBFS:
002EEE                12736 _848:
                      12737 ; rs232cmd.c 3580                                                       level = -9;
002EEE 9A78FFF7       12739         MOV.W   [R7],#0FFF7H
                      12740 ; rs232cmd.c 3581                                                       break;
002EF2 FE30           12742         BR      _863
                      12743 ; rs232cmd.c 3582       
                      12744 ; rs232cmd.c 3583                                               case M12dBFS:
002EF4                12746 _849:
                      12747 ; rs232cmd.c 3584                                                       level = -12;
002EF4 9A78FFF4       12749         MOV.W   [R7],#0FFF4H
                      12750 ; rs232cmd.c 3585                                                       break;
002EF8 FE2D           12752         BR      _863
                      12753 ; rs232cmd.c 3586       
                      12754 ; rs232cmd.c 3587                                               case M15dBFS:
002EFA                12756 _850:
                      12757 ; rs232cmd.c 3588                                                       level = -15;
002EFA 9A78FFF1       12759         MOV.W   [R7],#0FFF1H
                      12760 ; rs232cmd.c 3589                                                       break;
002EFE FE2A           12762         BR      _863
                      12763 ; rs232cmd.c 3590       
                      12764 ; rs232cmd.c 3591                                               case M16dBFS:
002F00                12766 _851:
                      12767 ; rs232cmd.c 3592                                                       level = -16;
002F00 9A78FFF0       12769         MOV.W   [R7],#0FFF0H
                      12770 ; rs232cmd.c 3593                                                       break;
002F04 FE27           12772         BR      _863
                      12773 ; rs232cmd.c 3594       
                      12774 ; rs232cmd.c 3595                                               case M18dBFS:
002F06                12776 _852:
                      12777 ; rs232cmd.c 3596                                                       level = -18;
002F06 9A78FFEE       12779         MOV.W   [R7],#0FFEEH
                      12780 ; rs232cmd.c 3597                                                       break;
002F0A FE24           12782         BR      _863
                      12783 ; rs232cmd.c 3598       
                      12784 ; rs232cmd.c 3599                                               case M21dBFS:
002F0C                12786 _853:
                      12787 ; rs232cmd.c 3600                                                       level = -21;
002F0C 9A78FFEB       12789         MOV.W   [R7],#0FFEBH
                      12790 ; rs232cmd.c 3601                                                       break;
002F10 FE21           12792         BR      _863
                      12793 ; rs232cmd.c 3602       
                      12794 ; rs232cmd.c 3603                                               default:
002F12                12796 _854:
                      12797 ; rs232cmd.c 3604                                                       str = SILENCEParTxt;
002F12 9958rrrr       12799         MOV.W   R5,#SEG( _SILENCEParTxt )
002F16 9948rrrr       12800         MOV.W   R4,#SOF( _SILENCEParTxt )
                      12802 ; rs232cmd.c 3605       
                      12803 ; rs232cmd.c 3606                                                       while ( *str)
002F1A 964843rr       12805         MOV.B   CS,#SEG( _SILENCEParTxt )
002F1E 9908rrrr       12806         MOV.W   R0,#SOF( _SILENCEParTxt )
002F22 8020           12807         MOVC.B  R1L,[R0+]
002F24 F311           12808         BEQ     _856
002F24 F311           12808         BEQ     _856
002F26                12809 _855:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 208

ADDR   CODE            LINE SOURCELINE
                      12810 ; rs232cmd.c 3607                                                               rs232putchar( *st
                            r++);
002F26 8915           12812         MOV.W   R1,R5
002F28 8904           12813         MOV.W   R0,R4
002F2A 862C43         12814         MOV.B   CS,R1L
002F2D 8020           12815         MOVC.B  R1L,[R0+]
002F2F 8102           12816         MOV.B   R0L,R1L
                      12817         CALL    _rs232putchar
002F31 C4rrrrrr       +12817 ;       FCALL   _rs232putchar
002F35 99400001       12818         ADD.W   R4,#01H
002F39 99510000       12819         ADDC.W  R5,#00H
002F3D 8915           12823         MOV.W   R1,R5
002F3F 8904           12824         MOV.W   R0,R4
002F41 862C43         12825         MOV.B   CS,R1L
002F44 8020           12826         MOVC.B  R1L,[R0+]
002F46 F2EF           12827         BNE     _855
002F48                12829 _856:
                      12830 ; rs232cmd.c 3608       
                      12831 ; rs232cmd.c 3609                                                       rs232putchar('\n');
002F48 91080A         12833         MOV.B   R0L,#0AH
                      12834         CALL    _rs232putchar
002F4B C4rrrrrr       +12834 ;       FCALL   _rs232putchar
                      12835 ; rs232cmd.c 3610                                                       return;
                      12837         BR      _892
002F4F D50083         +12837         JMP.L   _892
002F52                12839 _857:
002F52 BA70           12841         MOV.W   [R7],#00H
                      12842 ; rs232cmd.c 3611                                               }
002F54                12844 _863:
                      12845 ; rs232cmd.c 3612       
                      12846 ; rs232cmd.c 3613                                       rs232printf( 6, "%d\n", level);
002F54 B906           12848         MOV.W   R0,#06H
002F56 8A17           12849         MOV.W   R1,[R7]
002F58 0F02           12850         PUSH.W  R1
002F5A 9938rrrr       12852         MOV.W   R3,#SEG( _9 )
002F5E 9928rrrr       12853         MOV.W   R2,#SOF( _9 )
002F62 0F0C           12854         PUSH.W  R2, R3
                      12856         CALL    _rs232printf
002F64 C4rrrrrr       +12856 ;       FCALL   _rs232printf
002F68 A976           12857         ADDS.W  R7,#06H
                      12859 ; rs232cmd.c 3614                               }
                      12860 ; rs232cmd.c 3615                       }
002F6A FE76           12862         BR      _892
002F6A FE76           12862         BR      _892
002F6C                12863 _864:
                      12864 ; rs232cmd.c 3616                       else
                      12865 ; rs232cmd.c 3617                       {
                      12866 ; rs232cmd.c 3618                               if ( ParCnt != 1)
002F6C 964842rr       12868         MOV.B   ES,#SEG( _ParCnt )
002F70 9908rrrr       12869         MOV.W   R0,#SOF( _ParCnt )
002F74 8200           12870         MOV.B   R0L,[R0]
002F76 910401         12871         CMP.B   R0L,#01H
002F79 F307           12872         BEQ     _865
                      12873 ; rs232cmd.c 3619                                       SCPIError = SyntaxErr;
002F7B 964842rr       12875         MOV.B   ES,#SEG( _SCPIError )
002F7F 9908rrrr       12876         MOV.W   R0,#SOF( _SCPIError )
002F83 BA03           12877         MOV.W   [R0],#03H
002F85 FE69           12878         BR      _892
002F85 FE6900         12878         BR      _892
002F88                12879 _865:
                      12880 ; rs232cmd.c 3620                               else
                      12881 ; rs232cmd.c 3621                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 209

ADDR   CODE            LINE SOURCELINE
                      12882 ; rs232cmd.c 3622                                       level = FindParameter( Cmd, AESEBULevelPa
                            r);
002F88 9938rrrr       12884         MOV.W   R3,#SEG( _AESEBULevelPar )
002F8C 9928rrrr       12885         MOV.W   R2,#SOF( _AESEBULevelPar )
002F90 9918rrrr       12886         MOV.W   R1,#SEG( _Cmd )
002F94 9908rrrr       12887         MOV.W   R0,#SOF( _Cmd )
002F98 C517F3         12888         CALL    _FindParameter
002F9B 8A0F           12889         MOV.W   [R7],R0
                      12890 ; rs232cmd.c 3623               
                      12891 ; rs232cmd.c 3624                                       if ( level > -1)
002F9D 9A74FFFF       12893         CMP.W   [R7],#0FFFFH
002FA1 FD03           12894         BLE     _866
                      12895 ; rs232cmd.c 3625                                               level = AESEBUSilence;
002FA3 BA77           12897         MOV.W   [R7],#07H
002FA5 FE4D           12898         BR      _884
002FA5 FE4D00         12898         BR      _884
002FA8                12899 _866:
                      12900 ; rs232cmd.c 3626                                       else
                      12901 ; rs232cmd.c 3627                                       {
                      12902 ; rs232cmd.c 3628                                               if (( ParCnt != 1) || ( sscanf( C
                            md, "%d", &level) != 1))
002FA8 964842rr       12904         MOV.B   ES,#SEG( _ParCnt )
002FAC 9908rrrr       12905         MOV.W   R0,#SOF( _ParCnt )
002FB0 8200           12906         MOV.B   R0L,[R0]
002FB2 910401         12907         CMP.B   R0L,#01H
002FB5 F215           12908         BNE     _867
002FB7 9128rr         12909         MOV.B   R1L,#SEG( __lc_bs )
002FBA 7133           12910         XOR.B   R1H,R1H
002FBC 8907           12911         MOV.W   R0,R7
002FBE 0F03           12912         PUSH.W  R0, R1
002FC0 9918rrrr       12914         MOV.W   R1,#SEG( _10 )
002FC4 9908rrrr       12915         MOV.W   R0,#SOF( _10 )
002FC8 0F03           12916         PUSH.W  R0, R1
002FCA 9918rrrr       12918         MOV.W   R1,#SEG( _Cmd )
002FCE 9908rrrr       12919         MOV.W   R0,#SOF( _Cmd )
                      12920         CALL    _sscanf
002FD2 C4rrrrrr       +12920 ;       FCALL   _sscanf
002FD6 99700008       12921         ADD.W   R7,#08H
002FDA 99040001       12923         CMP.W   R0,#01H
002FDE F306           12924         BEQ     _868
002FDE F306           12924         BEQ     _868
002FE0                12925 _867:
                      12926 ; rs232cmd.c 3629                                                       SCPIError = SyntaxErr;
002FE0 964842rr       12928         MOV.B   ES,#SEG( _SCPIError )
002FE4 9908rrrr       12929         MOV.W   R0,#SOF( _SCPIError )
002FE8 BA03           12930         MOV.W   [R0],#03H
002FEA FE2A           12931         BR      _884
002FEA FE2A           12931         BR      _884
002FEC                12932 _868:
                      12933 ; rs232cmd.c 3630                                               else {
                      12934 ; rs232cmd.c 3631                                                       switch ( level)
002FEC 9A740000       12936         CMP.W   [R7],#00H
002FF0 F326           12937         BEQ     _876
002FF2 9A74FFF7       12938         CMP.W   [R7],#0FFF7H
002FF6 F310           12939         BEQ     _869
002FF8 9A74FFF4       12940         CMP.W   [R7],#0FFF4H
002FFC F30F           12941         BEQ     _870
002FFE 9A74FFF1       12942         CMP.W   [R7],#0FFF1H
003002 F30E           12943         BEQ     _871
003004 9A74FFF0       12944         CMP.W   [R7],#0FFF0H
003008 F30D           12945         BEQ     _872
00300A 9A74FFEE       12946         CMP.W   [R7],#0FFEEH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 210

ADDR   CODE            LINE SOURCELINE
00300E F30C           12947         BEQ     _873
003010 9A74FFEB       12948         CMP.W   [R7],#0FFEBH
003014 F30B           12949         BEQ     _874
003016 FE0C           12950         BR      _875
                      12951 ; rs232cmd.c 3632                                                       {
                      12952 ; rs232cmd.c 3633                                                               case 0:
                      12953 ; rs232cmd.c 3634                                                                       level = M
                            0dBFS;
                      12954 ; rs232cmd.c 3635                                                                       break;
                      12955 ; rs232cmd.c 3636       
                      12956 ; rs232cmd.c 3637                                                               case -9:
003018                12958 _869:
                      12959 ; rs232cmd.c 3638                                                                       level = M
                            9dBFS;
003018 BA71           12961         MOV.W   [R7],#01H
                      12962 ; rs232cmd.c 3639                                                                       break;
00301A FE12           12964         BR      _884
                      12965 ; rs232cmd.c 3640       
                      12966 ; rs232cmd.c 3641                                                               case -12:
00301C                12968 _870:
                      12969 ; rs232cmd.c 3642                                                                       level = M
                            12dBFS;
00301C BA72           12971         MOV.W   [R7],#02H
                      12972 ; rs232cmd.c 3643                                                                       break;
00301E FE10           12974         BR      _884
                      12975 ; rs232cmd.c 3644       
                      12976 ; rs232cmd.c 3645                                                               case -15:
003020                12978 _871:
                      12979 ; rs232cmd.c 3646                                                                       level = M
                            15dBFS;
003020 BA73           12981         MOV.W   [R7],#03H
                      12982 ; rs232cmd.c 3647                                                                       break;
003022 FE0E           12984         BR      _884
                      12985 ; rs232cmd.c 3648       
                      12986 ; rs232cmd.c 3649                                                               case -16:
003024                12988 _872:
                      12989 ; rs232cmd.c 3650                                                                       level = M
                            16dBFS;
003024 BA74           12991         MOV.W   [R7],#04H
                      12992 ; rs232cmd.c 3651                                                                       break;
003026 FE0C           12994         BR      _884
                      12995 ; rs232cmd.c 3652       
                      12996 ; rs232cmd.c 3653                                                               case -18:
003028                12998 _873:
                      12999 ; rs232cmd.c 3654                                                                       level = M
                            18dBFS;
003028 BA75           13001         MOV.W   [R7],#05H
                      13002 ; rs232cmd.c 3655                                                                       break;
00302A FE0A           13004         BR      _884
                      13005 ; rs232cmd.c 3656       
                      13006 ; rs232cmd.c 3657                                                               case -21:
00302C                13008 _874:
                      13009 ; rs232cmd.c 3658                                                                       level = M
                            21dBFS;
00302C BA76           13011         MOV.W   [R7],#06H
                      13012 ; rs232cmd.c 3659                                                                       break;
00302E FE08           13014         BR      _884
                      13015 ; rs232cmd.c 3660       
                      13016 ; rs232cmd.c 3661                                                               default:
003030                13018 _875:
                      13019 ; rs232cmd.c 3662                                                                       SCPIError
                             = DataOutOfRange;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 211

ADDR   CODE            LINE SOURCELINE
003030 964842rr       13021         MOV.B   ES,#SEG( _SCPIError )
003034 9908rrrr       13022         MOV.W   R0,#SOF( _SCPIError )
003038 9A080021       13023         MOV.W   [R0],#021H
                      13024 ; rs232cmd.c 3663                                                                       return;
00303C FE0D           13026         BR      _892
00303E                13028 _876:
00303E BA70           13030         MOV.W   [R7],#00H
                      13031 ; rs232cmd.c 3664                                                       }
                      13032 ; rs232cmd.c 3665                                               }
                      13033 ; rs232cmd.c 3666                                       }
003040                13035 _884:
                      13036 ; rs232cmd.c 3667       
                      13037 ; rs232cmd.c 3668                                       if ( SetAudioLevel( AESEBUAudio, level) =
                            = FAIL)
003040 B901           13039         MOV.W   R0,#01H
003042 8A17           13040         MOV.W   R1,[R7]
                      13041         CALL    _SetAudioLevel
003044 C4rrrrrr       +13041 ;       FCALL   _SetAudioLevel
003048 6900           13042         OR.W    R0,R0
00304A F206           13043         BNE     _892
                      13044 ; rs232cmd.c 3669                                               SCPIError = ExecErr;
00304C 964842rr       13046         MOV.B   ES,#SEG( _SCPIError )
003050 9908rrrr       13047         MOV.W   R0,#SOF( _SCPIError )
003054 9A08001D       13048         MOV.W   [R0],#01DH
                      13049 ; rs232cmd.c 3670                               }
                      13050 ; rs232cmd.c 3671                       }
                      13051 ; rs232cmd.c 3672               }
                      13052 ; rs232cmd.c 3673       }
003058                13054 _892:
003058 A972           13055         ADDS.W  R7,#02H
00305A 2F30           13057         POP.W   R4, R5
00305C D680           13059         RET
                      13062 ; rs232cmd.c 3674       
                      13063 ; rs232cmd.c 3675       /************************************************************************
                            **/
                      13064 ; rs232cmd.c 3676       /* AudioGenAESEBUTiming                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      13065 ; rs232cmd.c 3677       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13066 ; rs232cmd.c 3678       /* Author:              Kim Engedahl, DEV, 000616                        
                                                                                                                             
                                    */
                      13067 ; rs232cmd.c 3679       /* Revised:             000616                                           
                                                                                                                             
                                                                                    */
                      13068 ; rs232cmd.c 3680       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13069 ; rs232cmd.c 3681       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13070 ; rs232cmd.c 3682       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13071 ; rs232cmd.c 3683       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 212

ADDR   CODE            LINE SOURCELINE
                      13072 ; rs232cmd.c 3684       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13073 ; rs232cmd.c 3685       /************************************************************************
                            **/
                      13074 ; rs232cmd.c 3686       void AudioGenAESEBUTiming( void)
                      13075 ; rs232cmd.c 3687       {
                      13076         ALIGN   1
                      13078         PUBLIC  _AudioGenAESEBUTiming
00305E                13079 _AudioGenAESEBUTiming:
00305E 0F70           13083         PUSH.W  R4, R5, R6
003060 99720014       13085         SUB.W   R7,#014H
                      13090 ; rs232cmd.c 3688               float timing;
                      13091 ; rs232cmd.c 3689               int tmp;
                      13092 ; rs232cmd.c 3690       
                      13093 ; rs232cmd.c 3691               if ( CmdExecute && !SCPIError)
003064 964842rr       13095         MOV.B   ES,#SEG( _CmdExecute )
003068 9908rrrr       13096         MOV.W   R0,#SOF( _CmdExecute )
00306C 8200           13097         MOV.B   R0L,[R0]
                      13098         BEQ     _914
00306E F202           +13098 ;       BNE     _LG_826
003070 D500A9         +13098 ;       JMP.L   _914
003074 D500A900       +13098 ;       JMP.L   _914
003074                +13098 _LG_826:
003074 964842rr       13099         MOV.B   ES,#SEG( _SCPIError )
003078 9908rrrr       13100         MOV.W   R0,#SOF( _SCPIError )
00307C 8A00           13101         MOV.W   R0,[R0]
                      13102         BNE     _914
00307E F302           +13102 ;       BEQ     _LG_828
003080 D500A1         +13102 ;       JMP.L   _914
003084 D500A100       +13102 ;       JMP.L   _914
003084                +13102 _LG_828:
                      13103 ; rs232cmd.c 3692               {
                      13104 ; rs232cmd.c 3693                       if ( CmdRequest)
003084 964842rr       13106         MOV.B   ES,#SEG( _CmdRequest )
003088 9908rrrr       13107         MOV.W   R0,#SOF( _CmdRequest )
00308C 8200           13108         MOV.B   R0L,[R0]
00308E F321           13109         BEQ     _903
                      13110 ; rs232cmd.c 3694                       {
                      13111 ; rs232cmd.c 3695                               if ( ParCnt)
003090 964842rr       13113         MOV.B   ES,#SEG( _ParCnt )
003094 9908rrrr       13114         MOV.W   R0,#SOF( _ParCnt )
003098 8200           13115         MOV.B   R0L,[R0]
00309A F307           13116         BEQ     _902
                      13117 ; rs232cmd.c 3696                                       SCPIError = ParNotAllowed;
00309C 964842rr       13119         MOV.B   ES,#SEG( _SCPIError )
0030A0 9908rrrr       13120         MOV.W   R0,#SOF( _SCPIError )
0030A4 BA06           13121         MOV.W   [R0],#06H
                      13122         BR      _914
0030A6 D5008E         +13122         JMP.L   _914
0030A6 D5008E00       +13122         JMP.L   _914
0030AA                13123 _902:
                      13124 ; rs232cmd.c 3697                               else
                      13125 ; rs232cmd.c 3698                                       rs232printf( 6, "%.1f\n", AudioSetup[AESE
                            BUAudio].Timing);
0030AA 964842rr       13127         MOV.B   ES,#SEG( _AudioSetup+20 )
0030AE 9918rrrr       13128         MOV.W   R1,#SOF( _AudioSetup+20 )
0030B2 8B01           13129         MOV.W   R0,[R1+]
0030B4 8A11           13130         MOV.W   R1,[R1]
0030B6 C4rrrrrr       13131         FCALL   __SPF2DPF
0030BA 0F0F           13132         PUSH.W  R0, R1, R2, R3
0030BC 9918rrrr       13134         MOV.W   R1,#SEG( _897 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 213

ADDR   CODE            LINE SOURCELINE
0030C0 9908rrrr       13135         MOV.W   R0,#SOF( _897 )
0030C4 0F03           13136         PUSH.W  R0, R1
0030C6 B906           13138         MOV.W   R0,#06H
                      13139         CALL    _rs232printf
0030C8 C4rrrrrr       +13139 ;       FCALL   _rs232printf
0030CC 9970000C       13140         ADD.W   R7,#0CH
                      13142 ; rs232cmd.c 3699                       }
0030D0 FE79           13144         BR      _914
0030D0 FE79           13144         BR      _914
0030D2                13145 _903:
                      13146 ; rs232cmd.c 3700                       else
                      13147 ; rs232cmd.c 3701                       {
                      13148 ; rs232cmd.c 3702                               if (( ParCnt != 1) || ( sscanf( Cmd, "%f", &timin
                            g) != 1))
0030D2 964842rr       13150         MOV.B   ES,#SEG( _ParCnt )
0030D6 9908rrrr       13151         MOV.W   R0,#SOF( _ParCnt )
0030DA 8200           13152         MOV.B   R0L,[R0]
0030DC 910401         13153         CMP.B   R0L,#01H
0030DF F216           13154         BNE     _904
0030E1 9918rrrr       13155         MOV.W   R1,#SEG( _Cmd )
0030E5 9908rrrr       13156         MOV.W   R0,#SOF( _Cmd )
0030E9 9168rr         13157         MOV.B   R3L,#SEG( __lc_bs )
0030EC 7177           13158         XOR.B   R3H,R3H
0030EE 402710         13159         LEA     R2,R7+16
0030F1 0F0C           13160         PUSH.W  R2, R3
0030F3 9938rrrr       13162         MOV.W   R3,#SEG( _898 )
0030F7 9928rrrr       13163         MOV.W   R2,#SOF( _898 )
0030FB 0F0C           13164         PUSH.W  R2, R3
                      13166         CALL    _sscanf
0030FD C4rrrrrr       +13166 ;       FCALL   _sscanf
003101 99700008       13167         ADD.W   R7,#08H
003105 99040001       13169         CMP.W   R0,#01H
003109 F307           13170         BEQ     _905
003109 F30700         13170         BEQ     _905
00310C                13171 _904:
                      13172 ; rs232cmd.c 3703                                       SCPIError = SyntaxErr;
00310C 964842rr       13174         MOV.B   ES,#SEG( _SCPIError )
003110 9908rrrr       13175         MOV.W   R0,#SOF( _SCPIError )
003114 BA03           13176         MOV.W   [R0],#03H
003116 FE56           13177         BR      _914
003116 FE56           13177         BR      _914
003118                13178 _905:
                      13179 ; rs232cmd.c 3704                               else
                      13180 ; rs232cmd.c 3705                               {
                      13181 ; rs232cmd.c 3706                                       tmp = (int)(( timing / 0.8) + 0.5 - ( 1*(
                             timing < 0)));
003118 8C1712         13183         MOV.W   R1,[R7+18]
00311B 8C0710         13184         MOV.W   R0,[R7+16]
00311E C4rrrrrr       13185         FCALL   __SPF2DPF
003122 9C780E3FE9     13186         MOV.W   [R7+14],#03FE9H
003127 9C780C9999     13187         MOV.W   [R7+12],#09999H
00312C 9C780A9999     13188         MOV.W   [R7+10],#09999H
003131 9C7808999A     13189         MOV.W   [R7+8],#0999AH
003136 406708         13190         LEA     R6,R7+8
003139 C4rrrrrr       13191         FCALL   __DIV_DPF
00313D 9C780E3FE0     13192         MOV.W   [R7+14],#03FE0H
003142 BC700C         13193         MOV.W   [R7+12],#00H
003145 BC700A         13194         MOV.W   [R7+10],#00H
003148 BC7008         13195         MOV.W   [R7+8],#00H
00314B 406708         13196         LEA     R6,R7+8
00314E C4rrrrrr       13197         FCALL   __ADD_DPF
003152 8C3F06         13198         MOV.W   [R7+6],R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 214

ADDR   CODE            LINE SOURCELINE
003155 8C2F04         13199         MOV.W   [R7+4],R2
003158 8C1F02         13200         MOV.W   [R7+2],R1
00315B 8A0F           13201         MOV.W   [R7],R0
00315D 8C1712         13202         MOV.W   R1,[R7+18]
003160 8C0710         13203         MOV.W   R0,[R7+16]
003163 B930           13204         MOV.W   R3,#00H
003165 B920           13205         MOV.W   R2,#00H
003167 C4rrrrrr       13206         FCALL   __CMP_SPF
00316B 9104FF         13207         CMP.B   R0L,#0FFH
00316E F206           13208         BNE     _917
003170 B900           13209         MOVS.W  R0,#00H
003172 B910           13210         MOVS.W  R1,#00H
003174 B920           13211         MOVS.W  R2,#00H
003176 99383FF0       13212         MOV.W   R3,#03FF0H
00317A FE04           13213         BR      _918
00317A FE04           13213         BR      _918
00317C                13214 _917:
00317C B900           13215         MOVS.W  R0,#00H
00317E B910           13216         MOVS.W  R1,#00H
003180 B920           13217         MOVS.W  R2,#00H
003182 B930           13218         MOVS.W  R3,#00H
003182 B930           13218         MOVS.W  R3,#00H
003184                13219 _918:
003184 8967           13220         MOV.W   R6,R7
003186 C4rrrrrr       13221         FCALL   __SUBR_DPF
00318A C4rrrrrr       13222         FCALL   __DPF2S
                      13224 ; rs232cmd.c 3707       
                      13225 ; rs232cmd.c 3708                                       if (( tmp < -12) || ( tmp > 13))
00318E 9904FFF4       13227         CMP.W   R0,#0FFF4H
003192 FB03           13228         BLT     _906
003194 9904000D       13229         CMP.W   R0,#0DH
003198 FD07           13230         BLE     _907
003198 FD07           13230         BLE     _907
00319A                13231 _906:
                      13232 ; rs232cmd.c 3709                                               SCPIError = DataOutOfRange;
00319A 964842rr       13234         MOV.B   ES,#SEG( _SCPIError )
00319E 9908rrrr       13235         MOV.W   R0,#SOF( _SCPIError )
0031A2 9A080021       13236         MOV.W   [R0],#021H
0031A6 FE0E           13237         BR      _914
0031A6 FE0E           13237         BR      _914
0031A8                13238 _907:
                      13239 ; rs232cmd.c 3710                                       else
                      13240 ; rs232cmd.c 3711                                       {
                      13241 ; rs232cmd.c 3712                                               if ( SetAudioTiming( AESEBUAudio,
                             timing) == FAIL)
0031A8 B901           13243         MOV.W   R0,#01H
0031AA 8C3712         13245         MOV.W   R3,[R7+18]
0031AD 8C2710         13246         MOV.W   R2,[R7+16]
                      13247         CALL    _SetAudioTiming
0031B0 C4rrrrrr       +13247 ;       FCALL   _SetAudioTiming
0031B4 6900           13248         OR.W    R0,R0
0031B6 F206           13249         BNE     _914
                      13250 ; rs232cmd.c 3713                                                       SCPIError = ExecErr;
0031B8 964842rr       13252         MOV.B   ES,#SEG( _SCPIError )
0031BC 9908rrrr       13253         MOV.W   R0,#SOF( _SCPIError )
0031C0 9A08001D       13254         MOV.W   [R0],#01DH
                      13255 ; rs232cmd.c 3714                                       }
                      13256 ; rs232cmd.c 3715                               }
                      13257 ; rs232cmd.c 3716                       }
                      13258 ; rs232cmd.c 3717               }
0031C4                13260 _914:
                      13261 ; rs232cmd.c 3718       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 215

ADDR   CODE            LINE SOURCELINE
0031C4 99700014       13263         ADD.W   R7,#014H
0031C8 2F70           13265         POP.W   R4, R5, R6
0031CA D680           13267         RET
                      13269 ; rs232cmd.c 3719       
                      13270 ; rs232cmd.c 3720       /************************************************************************
                            **/
                      13271 ; rs232cmd.c 3721       /* AudioGenAESEBUWordClock                                               
                                                                                                                 RS232CMD.C *
                            /
                      13272 ; rs232cmd.c 3722       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13273 ; rs232cmd.c 3723       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13274 ; rs232cmd.c 3724       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      13275 ; rs232cmd.c 3725       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13276 ; rs232cmd.c 3726       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13277 ; rs232cmd.c 3727       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13278 ; rs232cmd.c 3728       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13279 ; rs232cmd.c 3729       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13280 ; rs232cmd.c 3730       /************************************************************************
                            **/
                      13281 ; rs232cmd.c 3731       void AudioGenAESEBUWordClock( void)
                      13282 ; rs232cmd.c 3732       {
                      13283         ALIGN   1
                      13285         PUBLIC  _AudioGenAESEBUWordClock
0031CC                13286 _AudioGenAESEBUWordClock:
0031CC 0F30           13290         PUSH.W  R4, R5
                      13296 ; rs232cmd.c 3733               int frequency;
                      13297 ; rs232cmd.c 3734               char code *str;
                      13298 ; rs232cmd.c 3735       
                      13299 ; rs232cmd.c 3736               if ( CmdExecute && !SCPIError)
0031CE 964842rr       13301         MOV.B   ES,#SEG( _CmdExecute )
0031D2 9908rrrr       13302         MOV.W   R0,#SOF( _CmdExecute )
0031D6 8200           13303         MOV.B   R0L,[R0]
0031D8 F379           13304         BEQ     _933
0031DA 964842rr       13305         MOV.B   ES,#SEG( _SCPIError )
0031DE 9908rrrr       13306         MOV.W   R0,#SOF( _SCPIError )
0031E2 8A00           13307         MOV.W   R0,[R0]
0031E4 F273           13308         BNE     _933
                      13309 ; rs232cmd.c 3737               {
                      13310 ; rs232cmd.c 3738                       if ( CmdRequest)
0031E6 964842rr       13312         MOV.B   ES,#SEG( _CmdRequest )
0031EA 9908rrrr       13313         MOV.W   R0,#SOF( _CmdRequest )
0031EE 8200           13314         MOV.B   R0L,[R0]
0031F0 F33F           13315         BEQ     _924
                      13316 ; rs232cmd.c 3739                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 216

ADDR   CODE            LINE SOURCELINE
                      13317 ; rs232cmd.c 3740                               if ( ParCnt)
0031F2 964842rr       13319         MOV.B   ES,#SEG( _ParCnt )
0031F6 9908rrrr       13320         MOV.W   R0,#SOF( _ParCnt )
0031FA 8200           13321         MOV.B   R0L,[R0]
0031FC F306           13322         BEQ     _921
                      13323 ; rs232cmd.c 3741                                       SCPIError = ParNotAllowed;
0031FE 964842rr       13325         MOV.B   ES,#SEG( _SCPIError )
003202 9908rrrr       13326         MOV.W   R0,#SOF( _SCPIError )
003206 BA06           13327         MOV.W   [R0],#06H
003208 FE61           13328         BR      _933
003208 FE61           13328         BR      _933
00320A                13329 _921:
                      13330 ; rs232cmd.c 3742                               else
                      13331 ; rs232cmd.c 3743                               {
                      13332 ; rs232cmd.c 3744                                       str = AudioFrequencyPar[AudioSetup[AESEBU
                            Audio].Frequency].LongName;
00320A 964842rr       13334         MOV.B   ES,#SEG( _AudioSetup+24 )
00320E 9908rrrr       13335         MOV.W   R0,#SOF( _AudioSetup+24 )
003212 8A00           13336         MOV.W   R0,[R0]
003214 E900000C       13337         MULU.W  R0,#0CH
003218 8920           13338         MOV.W   R2,R0
00321A B930           13339         MOVS.W  R3,#00H
00321C 9918rrrr       13340         MOV.W   R1,#SEG( _AudioFrequencyPar )
003220 9908rrrr       13341         MOV.W   R0,#SOF( _AudioFrequencyPar )
003224 0902           13342         ADD.W   R0,R2
003226 1913           13343         ADDC.W  R1,R3
003228 862C43         13344         MOV.B   CS,R1L
00322B 8820           13345         MOVC.W  R2,[R0+]
00322D 99040000       13346         CMP.W   R0,#00H
003231 F202           13347         BNE     _934
003233 A64143         13348         ADDS.B  CS,#01H
003233 A64143         13348         ADDS.B  CS,#01H
003236                13349 _934:
003236 8830           13350         MOVC.W  R3,[R0+]
003238 8953           13351         MOV.W   R5,R3
00323A 8942           13352         MOV.W   R4,R2
                      13354 ; rs232cmd.c 3745       
                      13355 ; rs232cmd.c 3746                                       while ( *str)
00323C 866C43         13357         MOV.B   CS,R3L
00323F 8062           13358         MOVC.B  R3L,[R2+]
003241 F312           13359         BEQ     _923
003241 F31200         13359         BEQ     _923
003244                13360 _922:
                      13361 ; rs232cmd.c 3747                                               rs232putchar( *str++);
003244 8915           13363         MOV.W   R1,R5
003246 8904           13364         MOV.W   R0,R4
003248 862C43         13365         MOV.B   CS,R1L
00324B 8020           13366         MOVC.B  R1L,[R0+]
00324D 8102           13367         MOV.B   R0L,R1L
                      13368         CALL    _rs232putchar
00324F C4rrrrrr       +13368 ;       FCALL   _rs232putchar
003253 99400001       13369         ADD.W   R4,#01H
003257 99510000       13370         ADDC.W  R5,#00H
00325B 8915           13374         MOV.W   R1,R5
00325D 8904           13375         MOV.W   R0,R4
00325F 862C43         13376         MOV.B   CS,R1L
003262 8020           13377         MOVC.B  R1L,[R0+]
003264 F2EF           13378         BNE     _922
003266                13380 _923:
                      13381 ; rs232cmd.c 3748       
                      13382 ; rs232cmd.c 3749                                       rs232putchar('\n');
003266 91080A         13384         MOV.B   R0L,#0AH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 217

ADDR   CODE            LINE SOURCELINE
                      13385         CALL    _rs232putchar
003269 C4rrrrrr       +13385 ;       FCALL   _rs232putchar
                      13386 ; rs232cmd.c 3750                               }
                      13387 ; rs232cmd.c 3751                       }
00326D FE2F           13389         BR      _933
00326D FE2F00         13389         BR      _933
003270                13390 _924:
                      13391 ; rs232cmd.c 3752                       else
                      13392 ; rs232cmd.c 3753                       {
                      13393 ; rs232cmd.c 3754                               if ( ParCnt != 1)
003270 964842rr       13395         MOV.B   ES,#SEG( _ParCnt )
003274 9908rrrr       13396         MOV.W   R0,#SOF( _ParCnt )
003278 8200           13397         MOV.B   R0L,[R0]
00327A 910401         13398         CMP.B   R0L,#01H
00327D F307           13399         BEQ     _925
                      13400 ; rs232cmd.c 3755                                       SCPIError = SyntaxErr;
00327F 964842rr       13402         MOV.B   ES,#SEG( _SCPIError )
003283 9908rrrr       13403         MOV.W   R0,#SOF( _SCPIError )
003287 BA03           13404         MOV.W   [R0],#03H
003289 FE21           13405         BR      _933
003289 FE2100         13405         BR      _933
00328C                13406 _925:
                      13407 ; rs232cmd.c 3756                               else
                      13408 ; rs232cmd.c 3757                               {
                      13409 ; rs232cmd.c 3758                                       frequency = FindParameter( Cmd, AudioFreq
                            uencyPar);
00328C 9918rrrr       13411         MOV.W   R1,#SEG( _Cmd )
003290 9908rrrr       13412         MOV.W   R0,#SOF( _Cmd )
003294 9938rrrr       13413         MOV.W   R3,#SEG( _AudioFrequencyPar )
003298 9928rrrr       13414         MOV.W   R2,#SOF( _AudioFrequencyPar )
00329C C51671         13415         CALL    _FindParameter
                      13417 ; rs232cmd.c 3759               
                      13418 ; rs232cmd.c 3760                                       if ( frequency > -1)
00329F 8910           13420         MOV.W   R1,R0
0032A1 9914FFFF       13421         CMP.W   R1,#0FFFFH
0032A5 FD0D           13424         BLE     _926
                      13425 ; rs232cmd.c 3761                                       {
                      13426 ; rs232cmd.c 3762                                               if ( SetAudioWordClock( AESEBUAud
                            io, frequency) == FAIL)
0032A7 B901           13428         MOV.W   R0,#01H
                      13429         CALL    _SetAudioWordClock
0032A9 C4rrrrrr       +13429 ;       FCALL   _SetAudioWordClock
0032AD 6900           13431         OR.W    R0,R0
0032AF F20E           13432         BNE     _933
                      13433 ; rs232cmd.c 3763                                                       SCPIError = ExecErr;
0032B1 964842rr       13435         MOV.B   ES,#SEG( _SCPIError )
0032B5 9908rrrr       13436         MOV.W   R0,#SOF( _SCPIError )
0032B9 9A08001D       13437         MOV.W   [R0],#01DH
                      13438 ; rs232cmd.c 3764                                       }
0032BD FE07           13440         BR      _933
0032BD FE0700         13440         BR      _933
0032C0                13441 _926:
                      13442 ; rs232cmd.c 3765                                       else
                      13443 ; rs232cmd.c 3766                                               SCPIError = DataOutOfRange;
0032C0 964842rr       13445         MOV.B   ES,#SEG( _SCPIError )
0032C4 9908rrrr       13446         MOV.W   R0,#SOF( _SCPIError )
0032C8 9A080021       13447         MOV.W   [R0],#021H
                      13448 ; rs232cmd.c 3767                               }
                      13449 ; rs232cmd.c 3768                       }
                      13450 ; rs232cmd.c 3769               }
0032CC                13452 _933:
                      13453 ; rs232cmd.c 3770       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 218

ADDR   CODE            LINE SOURCELINE
0032CC 2F30           13455         POP.W   R4, R5
0032CE D680           13457         RET
                      13460 ; rs232cmd.c 3771       
                      13461 ; rs232cmd.c 3772       /************************************************************************
                            **/
                      13462 ; rs232cmd.c 3773       /* AudioGenAESEBUClick                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      13463 ; rs232cmd.c 3774       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13464 ; rs232cmd.c 3775       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13465 ; rs232cmd.c 3776       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      13466 ; rs232cmd.c 3777       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13467 ; rs232cmd.c 3778       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13468 ; rs232cmd.c 3779       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13469 ; rs232cmd.c 3780       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13470 ; rs232cmd.c 3781       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13471 ; rs232cmd.c 3782       /************************************************************************
                            **/
                      13472 ; rs232cmd.c 3783       void AudioGenAESEBUClick( void)
                      13473 ; rs232cmd.c 3784       {
                      13474         ALIGN   1
                      13476         PUBLIC  _AudioGenAESEBUClick
0032D0                13477 _AudioGenAESEBUClick:
0032D0 A97E           13481         ADDS.W  R7,#0EH
                      13484 ; rs232cmd.c 3785               int click;
                      13485 ; rs232cmd.c 3786       
                      13486 ; rs232cmd.c 3787               if ( CmdExecute && !SCPIError)
0032D2 964842rr       13488         MOV.B   ES,#SEG( _CmdExecute )
0032D6 9908rrrr       13489         MOV.W   R0,#SOF( _CmdExecute )
0032DA 8200           13490         MOV.B   R0L,[R0]
0032DC F363           13491         BEQ     _949
0032DE 964842rr       13492         MOV.B   ES,#SEG( _SCPIError )
0032E2 9908rrrr       13493         MOV.W   R0,#SOF( _SCPIError )
0032E6 8A00           13494         MOV.W   R0,[R0]
0032E8 F25D           13495         BNE     _949
                      13496 ; rs232cmd.c 3788               {
                      13497 ; rs232cmd.c 3789                       if ( CmdRequest)
0032EA 964842rr       13499         MOV.B   ES,#SEG( _CmdRequest )
0032EE 9908rrrr       13500         MOV.W   R0,#SOF( _CmdRequest )
0032F2 8200           13501         MOV.B   R0L,[R0]
0032F4 F31C           13502         BEQ     _938
                      13503 ; rs232cmd.c 3790                       {
                      13504 ; rs232cmd.c 3791                               if ( ParCnt)
0032F6 964842rr       13506         MOV.B   ES,#SEG( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 219

ADDR   CODE            LINE SOURCELINE
0032FA 9908rrrr       13507         MOV.W   R0,#SOF( _ParCnt )
0032FE 8200           13508         MOV.B   R0L,[R0]
003300 F306           13509         BEQ     _937
                      13510 ; rs232cmd.c 3792                                       SCPIError = ParNotAllowed;
003302 964842rr       13512         MOV.B   ES,#SEG( _SCPIError )
003306 9908rrrr       13513         MOV.W   R0,#SOF( _SCPIError )
00330A BA06           13514         MOV.W   [R0],#06H
00330C FE4B           13515         BR      _949
00330C FE4B           13515         BR      _949
00330E                13516 _937:
                      13517 ; rs232cmd.c 3793                               else
                      13518 ; rs232cmd.c 3794                                       rs232printf( 6, "%d\n", AudioSetup[AESEBU
                            Audio].Click);
00330E B906           13520         MOV.W   R0,#06H
003310 964842rr       13521         MOV.B   ES,#SEG( _AudioSetup+26 )
003314 9918rrrr       13522         MOV.W   R1,#SOF( _AudioSetup+26 )
003318 8A11           13523         MOV.W   R1,[R1]
00331A 0F02           13524         PUSH.W  R1
00331C 9938rrrr       13526         MOV.W   R3,#SEG( _9 )
003320 9928rrrr       13527         MOV.W   R2,#SOF( _9 )
003324 0F0C           13528         PUSH.W  R2, R3
                      13530         CALL    _rs232printf
003326 C4rrrrrr       +13530 ;       FCALL   _rs232printf
00332A A976           13531         ADDS.W  R7,#06H
                      13533 ; rs232cmd.c 3795                       }
00332C FE3B           13535         BR      _949
00332C FE3B           13535         BR      _949
00332E                13536 _938:
                      13537 ; rs232cmd.c 3796                       else
                      13538 ; rs232cmd.c 3797                       {
                      13539 ; rs232cmd.c 3798                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &click
                            ) != 1))
00332E 964842rr       13541         MOV.B   ES,#SEG( _ParCnt )
003332 9908rrrr       13542         MOV.W   R0,#SOF( _ParCnt )
003336 8200           13543         MOV.B   R0L,[R0]
003338 910401         13544         CMP.B   R0L,#01H
00333B F215           13545         BNE     _939
00333D 9918rrrr       13546         MOV.W   R1,#SEG( _Cmd )
003341 9908rrrr       13547         MOV.W   R0,#SOF( _Cmd )
003345 9168rr         13548         MOV.B   R3L,#SEG( __lc_bs )
003348 7177           13549         XOR.B   R3H,R3H
00334A 8927           13550         MOV.W   R2,R7
00334C 0F0C           13551         PUSH.W  R2, R3
00334E 9938rrrr       13553         MOV.W   R3,#SEG( _10 )
003352 9928rrrr       13554         MOV.W   R2,#SOF( _10 )
003356 0F0C           13555         PUSH.W  R2, R3
                      13557         CALL    _sscanf
003358 C4rrrrrr       +13557 ;       FCALL   _sscanf
00335C 99700008       13558         ADD.W   R7,#08H
003360 99040001       13560         CMP.W   R0,#01H
003364 F306           13561         BEQ     _940
003364 F306           13561         BEQ     _940
003366                13562 _939:
                      13563 ; rs232cmd.c 3799                                       SCPIError = SyntaxErr;
003366 964842rr       13565         MOV.B   ES,#SEG( _SCPIError )
00336A 9908rrrr       13566         MOV.W   R0,#SOF( _SCPIError )
00336E BA03           13567         MOV.W   [R0],#03H
003370 FE19           13568         BR      _949
003370 FE19           13568         BR      _949
003372                13569 _940:
                      13570 ; rs232cmd.c 3800                               else
                      13571 ; rs232cmd.c 3801                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 220

ADDR   CODE            LINE SOURCELINE
                      13572 ; rs232cmd.c 3802                                       if (( click != click1s) && ( click != cli
                            ck3s))
003372 9A740001       13574         CMP.W   [R7],#01H
003376 F30A           13575         BEQ     _942
003378 9A740003       13576         CMP.W   [R7],#03H
00337C F307           13577         BEQ     _942
                      13578 ; rs232cmd.c 3803                                               SCPIError = DataOutOfRange;
00337E 964842rr       13580         MOV.B   ES,#SEG( _SCPIError )
003382 9908rrrr       13581         MOV.W   R0,#SOF( _SCPIError )
003386 9A080021       13582         MOV.W   [R0],#021H
00338A FE0C           13583         BR      _949
00338A FE0C           13583         BR      _949
00338C                13584 _942:
                      13585 ; rs232cmd.c 3804                                       else
                      13586 ; rs232cmd.c 3805                                       {
                      13587 ; rs232cmd.c 3806                                               if ( SetAudioClick( AESEBUAudio, 
                            click) == FAIL)
00338C B901           13589         MOV.W   R0,#01H
00338E 8A17           13590         MOV.W   R1,[R7]
                      13591         CALL    _SetAudioClick
003390 C4rrrrrr       +13591 ;       FCALL   _SetAudioClick
003394 6900           13592         OR.W    R0,R0
003396 F206           13593         BNE     _949
                      13594 ; rs232cmd.c 3807                                                       SCPIError = ExecErr;
003398 964842rr       13596         MOV.B   ES,#SEG( _SCPIError )
00339C 9908rrrr       13597         MOV.W   R0,#SOF( _SCPIError )
0033A0 9A08001D       13598         MOV.W   [R0],#01DH
                      13599 ; rs232cmd.c 3808                                       }
                      13600 ; rs232cmd.c 3809                               }
                      13601 ; rs232cmd.c 3810                       }
                      13602 ; rs232cmd.c 3811               }
0033A4                13604 _949:
                      13605 ; rs232cmd.c 3812       }
0033A4 A972           13607         ADDS.W  R7,#02H
0033A6 D680           13609         RET
                      13611 ; rs232cmd.c 3813       
                      13612 ; rs232cmd.c 3814       /************************************************************************
                            **/
                      13613 ; rs232cmd.c 3815       /* FactPassword                                                          
                                                                                                                             
                                                 RS232CMD.C */
                      13614 ; rs232cmd.c 3816       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13615 ; rs232cmd.c 3817       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13616 ; rs232cmd.c 3818       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      13617 ; rs232cmd.c 3819       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13618 ; rs232cmd.c 3820       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13619 ; rs232cmd.c 3821       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 221

ADDR   CODE            LINE SOURCELINE
                      13620 ; rs232cmd.c 3822       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13621 ; rs232cmd.c 3823       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13622 ; rs232cmd.c 3824       /************************************************************************
                            **/
                      13623 ; rs232cmd.c 3825       void FactPassword( void)
                      13624 ; rs232cmd.c 3826       {
                      13625         ALIGN   1
                      13627         PUBLIC  _FactPassword
0033A8                13628 _FactPassword:
                      13632 ; rs232cmd.c 3827               if ( CmdExecute && !SCPIError)
0033A8 964842rr       13634         MOV.B   ES,#SEG( _CmdExecute )
0033AC 9908rrrr       13635         MOV.W   R0,#SOF( _CmdExecute )
0033B0 8200           13636         MOV.B   R0L,[R0]
0033B2 F365           13637         BEQ     _970
0033B4 964842rr       13638         MOV.B   ES,#SEG( _SCPIError )
0033B8 9908rrrr       13639         MOV.W   R0,#SOF( _SCPIError )
0033BC 8A00           13640         MOV.W   R0,[R0]
0033BE F25F           13641         BNE     _970
                      13642 ; rs232cmd.c 3828               {
                      13643 ; rs232cmd.c 3829                       if ( CmdRequest)
0033C0 964842rr       13645         MOV.B   ES,#SEG( _CmdRequest )
0033C4 9908rrrr       13646         MOV.W   R0,#SOF( _CmdRequest )
0033C8 8200           13647         MOV.B   R0L,[R0]
0033CA F320           13648         BEQ     _959
                      13649 ; rs232cmd.c 3830                       {
                      13650 ; rs232cmd.c 3831                               if ( ParCnt)
0033CC 964842rr       13652         MOV.B   ES,#SEG( _ParCnt )
0033D0 9908rrrr       13653         MOV.W   R0,#SOF( _ParCnt )
0033D4 8200           13654         MOV.B   R0L,[R0]
0033D6 F306           13655         BEQ     _957
                      13656 ; rs232cmd.c 3832                                       SCPIError = ParNotAllowed;
0033D8 964842rr       13658         MOV.B   ES,#SEG( _SCPIError )
0033DC 9908rrrr       13659         MOV.W   R0,#SOF( _SCPIError )
0033E0 BA06           13660         MOV.W   [R0],#06H
0033E2 D680           13661         RET
0033E2 D680           13661         RET
0033E4                13662 _957:
                      13663 ; rs232cmd.c 3833                               else
                      13664 ; rs232cmd.c 3834                               {
                      13665 ; rs232cmd.c 3835                                       if ( PasswordProtected)
0033E4 964842rr       13667         MOV.B   ES,#SEG( _PasswordProtected )
0033E8 9908rrrr       13668         MOV.W   R0,#SOF( _PasswordProtected )
0033EC 8A00           13669         MOV.W   R0,[R0]
0033EE F307           13670         BEQ     _958
                      13671 ; rs232cmd.c 3836                                               rs232puts( "ON\n");
0033F0 9918rrrr       13673         MOV.W   R1,#SEG( _954 )
0033F4 9908rrrr       13674         MOV.W   R0,#SOF( _954 )
                      13675         CALL    _rs232puts
0033F8 C4rrrrrr       +13675 ;       FCALL   _rs232puts
0033FC D680           13676         RET
0033FC D680           13676         RET
0033FE                13677 _958:
                      13678 ; rs232cmd.c 3837                                       else
                      13679 ; rs232cmd.c 3838                                               rs232puts( "OFF\n");
0033FE 9918rrrr       13681         MOV.W   R1,#SEG( _955 )
003402 9908rrrr       13682         MOV.W   R0,#SOF( _955 )
                      13683         CALL    _rs232puts
003406 C4rrrrrr       +13683 ;       FCALL   _rs232puts
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 222

ADDR   CODE            LINE SOURCELINE
                      13684 ; rs232cmd.c 3839                               }
                      13685 ; rs232cmd.c 3840                       }
00340A D680           13687         RET
00340A D680           13687         RET
00340C                13688 _959:
                      13689 ; rs232cmd.c 3841                       else
                      13690 ; rs232cmd.c 3842                       {
                      13691 ; rs232cmd.c 3843                               if ( ParCnt != 1)
00340C 964842rr       13693         MOV.B   ES,#SEG( _ParCnt )
003410 9908rrrr       13694         MOV.W   R0,#SOF( _ParCnt )
003414 8200           13695         MOV.B   R0L,[R0]
003416 910401         13696         CMP.B   R0L,#01H
003419 F307           13697         BEQ     _960
                      13698 ; rs232cmd.c 3844                                       SCPIError = SyntaxErr;
00341B 964842rr       13700         MOV.B   ES,#SEG( _SCPIError )
00341F 9908rrrr       13701         MOV.W   R0,#SOF( _SCPIError )
003423 BA03           13702         MOV.W   [R0],#03H
003425 D680           13703         RET
003425 D68000         13703         RET
003428                13704 _960:
                      13705 ; rs232cmd.c 3845                               else
                      13706 ; rs232cmd.c 3846                               {
                      13707 ; rs232cmd.c 3847                                       if ( !strcmp( Cmd, "ON"))
003428 9938rrrr       13709         MOV.W   R3,#SEG( _956 )
00342C 9928rrrr       13710         MOV.W   R2,#SOF( _956 )
003430 9918rrrr       13711         MOV.W   R1,#SEG( _Cmd )
003434 9908rrrr       13712         MOV.W   R0,#SOF( _Cmd )
                      13713         CALL    _strcmp
003438 C4rrrrrr       +13713 ;       FCALL   _strcmp
00343C 6900           13714         OR.W    R0,R0
00343E F207           13715         BNE     _961
                      13716 ; rs232cmd.c 3848                                               PasswordProtected = true;
003440 964842rr       13718         MOV.B   ES,#SEG( _PasswordProtected )
003444 9908rrrr       13719         MOV.W   R0,#SOF( _PasswordProtected )
003448 9A08FFFF       13720         MOV.W   [R0],#0FFFFH
00344C D680           13721         RET
00344C D680           13721         RET
00344E                13722 _961:
                      13723 ; rs232cmd.c 3849                                       else
                      13724 ; rs232cmd.c 3850                                               if ( !Cstrcmp( Cmd, PasswordText)
                            )
00344E 9938rrrr       13726         MOV.W   R3,#SEG( _PasswordText )
003452 9928rrrr       13727         MOV.W   R2,#SOF( _PasswordText )
003456 9918rrrr       13728         MOV.W   R1,#SEG( _Cmd )
00345A 9908rrrr       13729         MOV.W   R0,#SOF( _Cmd )
                      13730         CALL    _Cstrcmp
00345E C4rrrrrr       +13730 ;       FCALL   _Cstrcmp
003462 6900           13731         OR.W    R0,R0
003464 F206           13732         BNE     _962
                      13733 ; rs232cmd.c 3851                                                       PasswordProtected = false
                            ;
003466 964842rr       13735         MOV.B   ES,#SEG( _PasswordProtected )
00346A 9908rrrr       13736         MOV.W   R0,#SOF( _PasswordProtected )
00346E BA00           13737         MOV.W   [R0],#00H
003470 D680           13738         RET
003470 D680           13738         RET
003472                13739 _962:
                      13740 ; rs232cmd.c 3852                                       else
                      13741 ; rs232cmd.c 3853                                               SCPIError = IllegalParValue;
003472 964842rr       13743         MOV.B   ES,#SEG( _SCPIError )
003476 9908rrrr       13744         MOV.W   R0,#SOF( _SCPIError )
00347A 9A080023       13745         MOV.W   [R0],#023H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 223

ADDR   CODE            LINE SOURCELINE
                      13746 ; rs232cmd.c 3854                               }
                      13747 ; rs232cmd.c 3855                       }
                      13748 ; rs232cmd.c 3856               }
00347E                13750 _970:
                      13751 ; rs232cmd.c 3857       }
00347E D680           13753         RET
                      13755 ; rs232cmd.c 3858       
                      13756 ; rs232cmd.c 3859       /************************************************************************
                            **/
                      13757 ; rs232cmd.c 3860       /* FactReset                                                             
                                                                                                                             
                                                         RS232CMD.C */
                      13758 ; rs232cmd.c 3861       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13759 ; rs232cmd.c 3862       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                      13760 ; rs232cmd.c 3863       /* Revised:       000620                                                 
                                                                                                                             
                                                                                    */
                      13761 ; rs232cmd.c 3864       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13762 ; rs232cmd.c 3865       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13763 ; rs232cmd.c 3866       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13764 ; rs232cmd.c 3867       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13765 ; rs232cmd.c 3868       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13766 ; rs232cmd.c 3869       /************************************************************************
                            **/
                      13767 ; rs232cmd.c 3870       void FactReset( void)
                      13768 ; rs232cmd.c 3871       {
                      13769         ALIGN   1
                      13771         PUBLIC  _FactReset
003480                13772 _FactReset:
003480 0F10           13776         PUSH.W  R4
                      13780 ; rs232cmd.c 3872               int i;
                      13781 ; rs232cmd.c 3873       
                      13782 ; rs232cmd.c 3874               if ( !PasswordProtected)
003482 964842rr       13784         MOV.B   ES,#SEG( _PasswordProtected )
003486 9908rrrr       13785         MOV.W   R0,#SOF( _PasswordProtected )
00348A 8A00           13786         MOV.W   R0,[R0]
00348C F24E           13787         BNE     _979
                      13788 ; rs232cmd.c 3875               {
                      13789 ; rs232cmd.c 3876                       if ( CmdExecute && !SCPIError)
00348E 964842rr       13791         MOV.B   ES,#SEG( _CmdExecute )
003492 9908rrrr       13792         MOV.W   R0,#SOF( _CmdExecute )
003496 8200           13793         MOV.B   R0L,[R0]
003498 F348           13794         BEQ     _979
00349A 964842rr       13795         MOV.B   ES,#SEG( _SCPIError )
00349E 9908rrrr       13796         MOV.W   R0,#SOF( _SCPIError )
0034A2 8A00           13797         MOV.W   R0,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 224

ADDR   CODE            LINE SOURCELINE
0034A4 F242           13798         BNE     _979
                      13799 ; rs232cmd.c 3877                       {
                      13800 ; rs232cmd.c 3878                               if ( CmdRequest)
0034A6 964842rr       13802         MOV.B   ES,#SEG( _CmdRequest )
0034AA 9908rrrr       13803         MOV.W   R0,#SOF( _CmdRequest )
0034AE 8200           13804         MOV.B   R0L,[R0]
0034B0 F306           13805         BEQ     _972
                      13806 ; rs232cmd.c 3879                                               SCPIError = SyntaxErr;
0034B2 964842rr       13808         MOV.B   ES,#SEG( _SCPIError )
0034B6 9908rrrr       13809         MOV.W   R0,#SOF( _SCPIError )
0034BA BA03           13810         MOV.W   [R0],#03H
0034BC FE36           13811         BR      _979
0034BC FE36           13811         BR      _979
0034BE                13812 _972:
                      13813 ; rs232cmd.c 3880                               else
                      13814 ; rs232cmd.c 3881                               {
                      13815 ; rs232cmd.c 3882                                       if ( ParCnt)
0034BE 964842rr       13817         MOV.B   ES,#SEG( _ParCnt )
0034C2 9908rrrr       13818         MOV.W   R0,#SOF( _ParCnt )
0034C6 8200           13819         MOV.B   R0L,[R0]
0034C8 F306           13820         BEQ     _973
                      13821 ; rs232cmd.c 3883                                               SCPIError = SyntaxErr;
0034CA 964842rr       13823         MOV.B   ES,#SEG( _SCPIError )
0034CE 9908rrrr       13824         MOV.W   R0,#SOF( _SCPIError )
0034D2 BA03           13825         MOV.W   [R0],#03H
0034D4 FE2A           13826         BR      _979
0034D4 FE2A           13826         BR      _979
0034D6                13827 _973:
                      13828 ; rs232cmd.c 3884                                       else
                      13829 ; rs232cmd.c 3885                                       {
                      13830 ; rs232cmd.c 3886                                               GenlockDefaults();               
                                            // 
                      13832         CALL    _GenlockDefaults
0034D6 C4rrrrrr       +13832 ;       FCALL   _GenlockDefaults
                      13833 ; rs232cmd.c 3887                                               GenlockInit();                   
                                                    // init the genlock setup
                      13835         CALL    _GenlockInit
0034DA C4rrrrrr       +13835 ;       FCALL   _GenlockInit
                      13836 ; rs232cmd.c 3888       
                      13837 ; rs232cmd.c 3889                                               BBDefaults();                    
                                                            // 
                      13839         CALL    _BBDefaults
0034DE C4rrrrrr       +13839 ;       FCALL   _BBDefaults
                      13840 ; rs232cmd.c 3890                                               BBInit();                        
                                                                            // init the black burst setups
                      13842         CALL    _BBInit
0034E2 C4rrrrrr       +13842 ;       FCALL   _BBInit
                      13843 ; rs232cmd.c 3891       
                      13844 ; rs232cmd.c 3892                                               CBDefaults();                    
                                                            //
                      13846         CALL    _CBDefaults
0034E6 C4rrrrrr       +13846 ;       FCALL   _CBDefaults
                      13847 ; rs232cmd.c 3893                                               CBInit();                        
                                                                            // init the colorbar generator (PAL,EBU ColorBar)
                            
                      13849         CALL    _CBInit
0034EA C4rrrrrr       +13849 ;       FCALL   _CBInit
                      13850 ; rs232cmd.c 3894       
                      13851 ; rs232cmd.c 3895                                               AudioDefaults();                 
                                                    //
                      13853         CALL    _AudioDefaults
0034EE C4rrrrrr       +13853 ;       FCALL   _AudioDefaults
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 225

ADDR   CODE            LINE SOURCELINE
                      13854 ; rs232cmd.c 3896                                               AudioInit();                     
                                                            // init the audio setup, (this includes an AudioTimer)           
                                            
                      13856         CALL    _AudioInit
0034F2 C4rrrrrr       +13856 ;       FCALL   _AudioInit
                      13857 ; rs232cmd.c 3897       
                      13858 ; rs232cmd.c 3898       
                      13859 ; rs232cmd.c 3899                                               for ( i = 1; i <= NoOfPresets; i+
                            +)
0034F6 B941           13861         MOV.W   R4,#01H
0034F8                13863 _974:
                      13864 ; rs232cmd.c 3900                                                       StorePreset( i);
0034F8 8904           13866         MOV.W   R0,R4
                      13869         CALL    _StorePreset
0034FA C4rrrrrr       +13869 ;       FCALL   _StorePreset
0034FE A941           13873         ADDS.W  R4,#01H
003500 99440004       13876         CMP.W   R4,#04H
003504 FDF9           13877         BLE     _974
                      13878 ; rs232cmd.c 3901       
                      13879 ; rs232cmd.c 3902                                               Settings.ActivePreset = 0;
003506 964842rr       13881         MOV.B   ES,#SEG( _Settings )
00350A 9908rrrr       13882         MOV.W   R0,#SOF( _Settings )
00350E BA00           13883         MOV.W   [R0],#00H
                      13884 ; rs232cmd.c 3903                                               NV_Store( &Settings, SettingsPtr,
                             sizeof( Settings));
003510 9918rrrr       13886         MOV.W   R1,#SEG( _Settings )
003514 9908rrrr       13887         MOV.W   R0,#SOF( _Settings )
003518 964842rr       13888         MOV.B   ES,#SEG( _SettingsPtr )
00351C 9928rrrr       13889         MOV.W   R2,#SOF( _SettingsPtr )
003520 8A22           13890         MOV.W   R2,[R2]
003522 9938004A       13891         MOV.W   R3,#04AH
                      13892         CALL    _NV_Store
003526 C4rrrrrr       +13892 ;       FCALL   _NV_Store
                      13893 ; rs232cmd.c 3904                                       }
                      13894 ; rs232cmd.c 3905                               }
                      13895 ; rs232cmd.c 3906                       }
                      13896 ; rs232cmd.c 3907               }
00352A                13898 _979:
                      13899 ; rs232cmd.c 3908       }
00352A 2F10           13901         POP.W   R4
00352C D680           13903         RET
                      13906 ; rs232cmd.c 3909       
                      13907 ; rs232cmd.c 3910       /************************************************************************
                            **/
                      13908 ; rs232cmd.c 3911       /* FactV24Command                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      13909 ; rs232cmd.c 3912       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13910 ; rs232cmd.c 3913       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13911 ; rs232cmd.c 3914       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      13912 ; rs232cmd.c 3915       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 226

ADDR   CODE            LINE SOURCELINE
                      13913 ; rs232cmd.c 3916       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13914 ; rs232cmd.c 3917       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13915 ; rs232cmd.c 3918       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13916 ; rs232cmd.c 3919       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13917 ; rs232cmd.c 3920       /************************************************************************
                            **/
                      13918 ; rs232cmd.c 3921       void FactV24Command( void)
                      13919 ; rs232cmd.c 3922       {
                      13920         ALIGN   1
                      13922         PUBLIC  _FactV24Command
00352E                13923 _FactV24Command:
00352E 0F30           13927         PUSH.W  R4, R5
003530 9972003E       13929         SUB.W   R7,#03EH
                      13935 ; rs232cmd.c 3923               UC address;
                      13936 ; rs232cmd.c 3924               char command[30], result[30];;
                      13937 ; rs232cmd.c 3925       
                      13938 ; rs232cmd.c 3926               if ( !PasswordProtected)
003534 964842rr       13940         MOV.B   ES,#SEG( _PasswordProtected )
003538 9908rrrr       13941         MOV.W   R0,#SOF( _PasswordProtected )
00353C 8A00           13942         MOV.W   R0,[R0]
                      13943         BNE     _996
00353E F302           +13943 ;       BEQ     _LG_912
003540 D50084         +13943 ;       JMP.L   _996
003544 D5008400       +13943 ;       JMP.L   _996
003544                +13943 _LG_912:
                      13944 ; rs232cmd.c 3927               {
                      13945 ; rs232cmd.c 3928                       if ( CmdExecute && !SCPIError)
003544 964842rr       13947         MOV.B   ES,#SEG( _CmdExecute )
003548 9908rrrr       13948         MOV.W   R0,#SOF( _CmdExecute )
00354C 8200           13949         MOV.B   R0L,[R0]
00354E F37D           13950         BEQ     _996
003550 964842rr       13951         MOV.B   ES,#SEG( _SCPIError )
003554 9908rrrr       13952         MOV.W   R0,#SOF( _SCPIError )
003558 8A00           13953         MOV.W   R0,[R0]
00355A F277           13954         BNE     _996
                      13955 ; rs232cmd.c 3929                       {
                      13956 ; rs232cmd.c 3930                               if ( CmdRequest)
00355C 964842rr       13958         MOV.B   ES,#SEG( _CmdRequest )
003560 9908rrrr       13959         MOV.W   R0,#SOF( _CmdRequest )
003564 8200           13960         MOV.B   R0L,[R0]
003566 F306           13961         BEQ     _984
                      13962 ; rs232cmd.c 3931                                       SCPIError = SyntaxErr;
003568 964842rr       13964         MOV.B   ES,#SEG( _SCPIError )
00356C 9908rrrr       13965         MOV.W   R0,#SOF( _SCPIError )
003570 BA03           13966         MOV.W   [R0],#03H
003572 FE6B           13967         BR      _996
003572 FE6B           13967         BR      _996
003574                13968 _984:
                      13969 ; rs232cmd.c 3932                               else
                      13970 ; rs232cmd.c 3933                               {
                      13971 ; rs232cmd.c 3934                                       if (( ParCnt != 2) || ( sscanf( Cmd, "%d,
                            %s", &address, command) != 2))
003574 964842rr       13973         MOV.B   ES,#SEG( _ParCnt )
003578 9908rrrr       13974         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 227

ADDR   CODE            LINE SOURCELINE
00357C 8200           13975         MOV.B   R0L,[R0]
00357E 910402         13976         CMP.B   R0L,#02H
003581 F21A           13977         BNE     _985
003583 9918rrrr       13978         MOV.W   R1,#SEG( _Cmd )
003587 9908rrrr       13979         MOV.W   R0,#SOF( _Cmd )
00358B 9168rr         13980         MOV.B   R3L,#SEG( __lc_bs )
00358E 7177           13981         XOR.B   R3H,R3H
003590 8927           13982         MOV.W   R2,R7
003592 91A8rr         13983         MOV.B   R5L,#SEG( __lc_bs )
003595 71BB           13984         XOR.B   R5H,R5H
003597 404702         13985         LEA     R4,R7+2
00359A 0F30           13986         PUSH.W  R4, R5
00359C 0F0C           13988         PUSH.W  R2, R3
00359E 9938rrrr       13990         MOV.W   R3,#SEG( _981 )
0035A2 9928rrrr       13991         MOV.W   R2,#SOF( _981 )
0035A6 0F0C           13992         PUSH.W  R2, R3
                      13994         CALL    _sscanf
0035A8 C4rrrrrr       +13994 ;       FCALL   _sscanf
0035AC 9970000C       13995         ADD.W   R7,#0CH
0035B0 99040002       13997         CMP.W   R0,#02H
0035B4 F306           13998         BEQ     _986
0035B4 F306           13998         BEQ     _986
0035B6                13999 _985:
                      14000 ; rs232cmd.c 3935                                               SCPIError = SyntaxErr;
0035B6 964842rr       14002         MOV.B   ES,#SEG( _SCPIError )
0035BA 9908rrrr       14003         MOV.W   R0,#SOF( _SCPIError )
0035BE BA03           14004         MOV.W   [R0],#03H
0035C0 FE44           14005         BR      _996
0035C0 FE44           14005         BR      _996
0035C2                14006 _986:
                      14007 ; rs232cmd.c 3936                                       else
                      14008 ; rs232cmd.c 3937                                       {
                      14009 ; rs232cmd.c 3938                                               if ( command[2] == '?')
0035C2 9474043F       14011         CMP.B   [R7+4],#03FH
0035C6 F227           14012         BNE     _988
                      14013 ; rs232cmd.c 3939                                               {
                      14014 ; rs232cmd.c 3940                                                       if ( sio0SndRequest( 12, 
                            address, result, "%s", command) == OK)
0035C8 9908000C       14016         MOV.W   R0,#0CH
0035CC 8227           14017         MOV.B   R1L,[R7]
0035CE B130           14018         MOVS.B  R1H,#00H
0035D0 91A8rr         14019         MOV.B   R5L,#SEG( __lc_bs )
0035D3 71BB           14020         XOR.B   R5H,R5H
0035D5 404720         14021         LEA     R4,R7+32
0035D8 9168rr         14022         MOV.B   R3L,#SEG( __lc_bs )
0035DB 7177           14023         XOR.B   R3H,R3H
0035DD 402702         14024         LEA     R2,R7+2
0035E0 0F0C           14025         PUSH.W  R2, R3
0035E2 9938rrrr       14027         MOV.W   R3,#SEG( _982 )
0035E6 9928rrrr       14028         MOV.W   R2,#SOF( _982 )
0035EA 0F0C           14029         PUSH.W  R2, R3
0035EC 8935           14031         MOV.W   R3,R5
0035EE 8924           14032         MOV.W   R2,R4
                      14033         CALL    _sio0SndRequest
0035F0 C4rrrrrr       +14033 ;       FCALL   _sio0SndRequest
0035F4 99700008       14034         ADD.W   R7,#08H
0035F8 9904FFFF       14036         CMP.W   R0,#0FFFFH
0035FC F205           14037         BNE     _987
                      14038 ; rs232cmd.c 3941                                                               rs232puts( result
                            );
0035FE 8915           14040         MOV.W   R1,R5
003600 8904           14041         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 228

ADDR   CODE            LINE SOURCELINE
                      14042         CALL    _rs232puts
003602 C4rrrrrr       +14042 ;       FCALL   _rs232puts
003606 FE21           14043         BR      _996
003606 FE21           14043         BR      _996
003608                14044 _987:
                      14045 ; rs232cmd.c 3942                                                       else
                      14046 ; rs232cmd.c 3943                                                               SCPIError = ExecE
                            rr;
003608 964842rr       14048         MOV.B   ES,#SEG( _SCPIError )
00360C 9908rrrr       14049         MOV.W   R0,#SOF( _SCPIError )
003610 9A08001D       14050         MOV.W   [R0],#01DH
                      14051 ; rs232cmd.c 3944                                               }
003614 FE1A           14053         BR      _996
003614 FE1A           14053         BR      _996
003616                14054 _988:
                      14055 ; rs232cmd.c 3945                                               else
                      14056 ; rs232cmd.c 3946                                               {
                      14057 ; rs232cmd.c 3947                                                       if ( sio0SndCommand( 20, 
                            address, "%s;", command) == FAIL)
003616 99080014       14059         MOV.W   R0,#014H
00361A 8227           14060         MOV.B   R1L,[R7]
00361C B130           14061         MOVS.B  R1H,#00H
00361E 9168rr         14062         MOV.B   R3L,#SEG( __lc_bs )
003621 7177           14063         XOR.B   R3H,R3H
003623 402702         14064         LEA     R2,R7+2
003626 0F0C           14065         PUSH.W  R2, R3
003628 9938rrrr       14067         MOV.W   R3,#SEG( _983 )
00362C 9928rrrr       14068         MOV.W   R2,#SOF( _983 )
003630 0F0C           14069         PUSH.W  R2, R3
                      14071         CALL    _sio0SndCommand
003632 C4rrrrrr       +14071 ;       FCALL   _sio0SndCommand
003636 99700008       14072         ADD.W   R7,#08H
00363A 6900           14074         OR.W    R0,R0
00363C F206           14075         BNE     _996
                      14076 ; rs232cmd.c 3948                                                               SCPIError = ExecE
                            rr;
00363E 964842rr       14078         MOV.B   ES,#SEG( _SCPIError )
003642 9908rrrr       14079         MOV.W   R0,#SOF( _SCPIError )
003646 9A08001D       14080         MOV.W   [R0],#01DH
                      14081 ; rs232cmd.c 3949                                               }
                      14082 ; rs232cmd.c 3950                                       }
                      14083 ; rs232cmd.c 3951                               }
                      14084 ; rs232cmd.c 3952                       }
                      14085 ; rs232cmd.c 3953               }
00364A                14087 _996:
                      14088 ; rs232cmd.c 3954       }
00364A 9970003E       14090         ADD.W   R7,#03EH
00364E 2F30           14092         POP.W   R4, R5
003650 D680           14094         RET
                      14096 ; rs232cmd.c 3955       
                      14097 ; rs232cmd.c 3956       /************************************************************************
                            **/
                      14098 ; rs232cmd.c 3957       /* FactV24Transparent                                                    
                                                                                                                             
                                RS232CMD.C  */
                      14099 ; rs232cmd.c 3958       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14100 ; rs232cmd.c 3959       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 229

ADDR   CODE            LINE SOURCELINE
                      14101 ; rs232cmd.c 3960       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      14102 ; rs232cmd.c 3961       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14103 ; rs232cmd.c 3962       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14104 ; rs232cmd.c 3963       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14105 ; rs232cmd.c 3964       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14106 ; rs232cmd.c 3965       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14107 ; rs232cmd.c 3966       /************************************************************************
                            **/
                      14108 ; rs232cmd.c 3967       void FactV24Transparent( void)
                      14109 ; rs232cmd.c 3968       {
                      14110         ALIGN   1
                      14112         PUBLIC  _FactV24Transparent
003652                14113 _FactV24Transparent:
                      14119 ; rs232cmd.c 3969               int unit;
                      14120 ; rs232cmd.c 3970       
                      14121 ; rs232cmd.c 3971               if ( !PasswordProtected)
003652 964842rr       14123         MOV.B   ES,#SEG( _PasswordProtected )
003656 9908rrrr       14124         MOV.W   R0,#SOF( _PasswordProtected )
00365A 8A00           14125         MOV.W   R0,[R0]
00365C F22E           14126         BNE     _1007
                      14127 ; rs232cmd.c 3972               {
                      14128 ; rs232cmd.c 3973                       if ( CmdExecute && !SCPIError)
00365E 964842rr       14130         MOV.B   ES,#SEG( _CmdExecute )
003662 9908rrrr       14131         MOV.W   R0,#SOF( _CmdExecute )
003666 8200           14132         MOV.B   R0L,[R0]
003668 F328           14133         BEQ     _1007
00366A 964842rr       14134         MOV.B   ES,#SEG( _SCPIError )
00366E 9908rrrr       14135         MOV.W   R0,#SOF( _SCPIError )
003672 8A00           14136         MOV.W   R0,[R0]
003674 F222           14137         BNE     _1007
                      14138 ; rs232cmd.c 3974                       {
                      14139 ; rs232cmd.c 3975                               if ( CmdRequest)
003676 964842rr       14141         MOV.B   ES,#SEG( _CmdRequest )
00367A 9908rrrr       14142         MOV.W   R0,#SOF( _CmdRequest )
00367E 8200           14143         MOV.B   R0L,[R0]
003680 F306           14144         BEQ     _1001
                      14145 ; rs232cmd.c 3976                                       SCPIError = SyntaxErr;
003682 964842rr       14147         MOV.B   ES,#SEG( _SCPIError )
003686 9908rrrr       14148         MOV.W   R0,#SOF( _SCPIError )
00368A BA03           14149         MOV.W   [R0],#03H
00368C D680           14150         RET
00368C D680           14150         RET
00368E                14151 _1001:
                      14152 ; rs232cmd.c 3977                               else
                      14153 ; rs232cmd.c 3978                               {
                      14154 ; rs232cmd.c 3979                                       unit = FindParameter( Cmd, UnitPar);
00368E 9918rrrr       14156         MOV.W   R1,#SEG( _Cmd )
003692 9908rrrr       14157         MOV.W   R0,#SOF( _Cmd )
003696 9938rrrr       14158         MOV.W   R3,#SEG( _UnitPar )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 230

ADDR   CODE            LINE SOURCELINE
00369A 9928rrrr       14159         MOV.W   R2,#SOF( _UnitPar )
00369E C51470         14160         CALL    _FindParameter
                      14162 ; rs232cmd.c 3980               
                      14163 ; rs232cmd.c 3981                                       if ( unit > -1)
0036A1 9904FFFF       14165         CMP.W   R0,#0FFFFH
0036A5 FD04           14166         BLE     _1002
                      14167 ; rs232cmd.c 3982                                               BBSPGCommunication( unit);
                      14169         CALL    _BBSPGCommunication
0036A7 C4rrrrrr       +14169 ;       FCALL   _BBSPGCommunication
0036AB D680           14171         RET
0036AB D68000         14171         RET
0036AE                14172 _1002:
                      14173 ; rs232cmd.c 3983                                       else
                      14174 ; rs232cmd.c 3984                                               SCPIError = DataOutOfRange;
0036AE 964842rr       14176         MOV.B   ES,#SEG( _SCPIError )
0036B2 9908rrrr       14177         MOV.W   R0,#SOF( _SCPIError )
0036B6 9A080021       14178         MOV.W   [R0],#021H
                      14179 ; rs232cmd.c 3985                               }
                      14180 ; rs232cmd.c 3986                       }
                      14181 ; rs232cmd.c 3987               }
0036BA                14183 _1007:
                      14184 ; rs232cmd.c 3988       }
0036BA D680           14186         RET
                      14188 ; rs232cmd.c 3989       
                      14189 ; rs232cmd.c 3990       /************************************************************************
                            **/
                      14190 ; rs232cmd.c 3991       /* FactChecksumCode                                                      
                                                                                                                             
                                         RS232CMD.C */
                      14191 ; rs232cmd.c 3992       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14192 ; rs232cmd.c 3993       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14193 ; rs232cmd.c 3994       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14194 ; rs232cmd.c 3995       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14195 ; rs232cmd.c 3996       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14196 ; rs232cmd.c 3997       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14197 ; rs232cmd.c 3998       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14198 ; rs232cmd.c 3999       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14199 ; rs232cmd.c 4000       /************************************************************************
                            **/
                      14200 ; rs232cmd.c 4001       void FactChecksumCode( void)
                      14201 ; rs232cmd.c 4002       {
                      14202         ALIGN   1
                      14204         PUBLIC  _FactChecksumCode
0036BC                14205 _FactChecksumCode:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 231

ADDR   CODE            LINE SOURCELINE
0036BC 0F30           14209         PUSH.W  R4, R5
0036BE 9972001E       14211         SUB.W   R7,#01EH
                      14214 ; rs232cmd.c 4003               char buffer[30];
                      14215 ; rs232cmd.c 4004       
                      14216 ; rs232cmd.c 4005               if ( CmdExecute && !SCPIError)
0036C2 964842rr       14218         MOV.B   ES,#SEG( _CmdExecute )
0036C6 9908rrrr       14219         MOV.W   R0,#SOF( _CmdExecute )
0036CA 8200           14220         MOV.B   R0L,[R0]
0036CC F338           14221         BEQ     _1015
0036CE 964842rr       14222         MOV.B   ES,#SEG( _SCPIError )
0036D2 9908rrrr       14223         MOV.W   R0,#SOF( _SCPIError )
0036D6 8A00           14224         MOV.W   R0,[R0]
0036D8 F232           14225         BNE     _1015
                      14226 ; rs232cmd.c 4006               {
                      14227 ; rs232cmd.c 4007                       if ( CmdRequest)
0036DA 964842rr       14229         MOV.B   ES,#SEG( _CmdRequest )
0036DE 9908rrrr       14230         MOV.W   R0,#SOF( _CmdRequest )
0036E2 8200           14231         MOV.B   R0L,[R0]
0036E4 F327           14232         BEQ     _1011
                      14233 ; rs232cmd.c 4008                       {
                      14234 ; rs232cmd.c 4009                               if ( ParCnt)
0036E6 964842rr       14236         MOV.B   ES,#SEG( _ParCnt )
0036EA 9908rrrr       14237         MOV.W   R0,#SOF( _ParCnt )
0036EE 8200           14238         MOV.B   R0L,[R0]
0036F0 F306           14239         BEQ     _1010
                      14240 ; rs232cmd.c 4010                                       SCPIError = SyntaxErr;
0036F2 964842rr       14242         MOV.B   ES,#SEG( _SCPIError )
0036F6 9908rrrr       14243         MOV.W   R0,#SOF( _SCPIError )
0036FA BA03           14244         MOV.W   [R0],#03H
0036FC FE20           14245         BR      _1015
0036FC FE20           14245         BR      _1015
0036FE                14246 _1010:
                      14247 ; rs232cmd.c 4011                               else
                      14248 ; rs232cmd.c 4012                               {               
                      14249 ; rs232cmd.c 4013                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfPROMCode, StartOfPROMCode+SizeOfPROMCode-1));
0036FE B910           14251         MOV.W   R1,#00H
003700 B900           14252         MOV.W   R0,#00H
003702 B933           14253         MOV.W   R3,#03H
003704 9928FFFF       14254         MOV.W   R2,#0FFFFH
                      14255         CALL    _ROMChecksum
003708 C4rrrrrr       +14255 ;       FCALL   _ROMChecksum
00370C 91A8rr         14256         MOV.B   R5L,#SEG( __lc_bs )
00370F 71BB           14257         XOR.B   R5H,R5H
003711 8947           14258         MOV.W   R4,R7
003713 0F01           14259         PUSH.W  R0
003715 9918rrrr       14261         MOV.W   R1,#SEG( _1009 )
003719 9908rrrr       14262         MOV.W   R0,#SOF( _1009 )
00371D 0F03           14263         PUSH.W  R0, R1
00371F 8915           14265         MOV.W   R1,R5
003721 8904           14266         MOV.W   R0,R4
                      14267         CALL    _sprintf
003723 C4rrrrrr       +14267 ;       FCALL   _sprintf
003727 A976           14268         ADDS.W  R7,#06H
                      14270 ; rs232cmd.c 4014                                       rs232puts( buffer);
003729 8915           14272         MOV.W   R1,R5
00372B 8904           14273         MOV.W   R0,R4
                      14274         CALL    _rs232puts
00372D C4rrrrrr       +14274 ;       FCALL   _rs232puts
                      14275 ; rs232cmd.c 4015                               }
                      14276 ; rs232cmd.c 4016                       }
003731 FE06           14278         BR      _1015
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 232

ADDR   CODE            LINE SOURCELINE
003731 FE0600         14278         BR      _1015
003734                14279 _1011:
                      14280 ; rs232cmd.c 4017                       else
                      14281 ; rs232cmd.c 4018                               SCPIError = SyntaxErr;
003734 964842rr       14283         MOV.B   ES,#SEG( _SCPIError )
003738 9908rrrr       14284         MOV.W   R0,#SOF( _SCPIError )
00373C BA03           14285         MOV.W   [R0],#03H
                      14286 ; rs232cmd.c 4019               }
00373E                14288 _1015:
                      14289 ; rs232cmd.c 4020       }
00373E 9970001E       14291         ADD.W   R7,#01EH
003742 2F30           14293         POP.W   R4, R5
003744 D680           14295         RET
                      14297 ; rs232cmd.c 4021       
                      14298 ; rs232cmd.c 4022       /************************************************************************
                            **/
                      14299 ; rs232cmd.c 4023       /* FactChecksumPLD                                                       
                                                                                                                             
                                         RS232CMD.C */
                      14300 ; rs232cmd.c 4024       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14301 ; rs232cmd.c 4025       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14302 ; rs232cmd.c 4026       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14303 ; rs232cmd.c 4027       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14304 ; rs232cmd.c 4028       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14305 ; rs232cmd.c 4029       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14306 ; rs232cmd.c 4030       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14307 ; rs232cmd.c 4031       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14308 ; rs232cmd.c 4032       /************************************************************************
                            **/
                      14309 ; rs232cmd.c 4033       void FactChecksumPLD( void)
                      14310 ; rs232cmd.c 4034       {
                      14311         ALIGN   1
                      14313         PUBLIC  _FactChecksumPLD
003746                14314 _FactChecksumPLD:
003746 0F30           14318         PUSH.W  R4, R5
003748 9972001E       14320         SUB.W   R7,#01EH
                      14323 ; rs232cmd.c 4035               char buffer[30];
                      14324 ; rs232cmd.c 4036       
                      14325 ; rs232cmd.c 4037               if ( CmdExecute && !SCPIError)
00374C 964842rr       14327         MOV.B   ES,#SEG( _CmdExecute )
003750 9908rrrr       14328         MOV.W   R0,#SOF( _CmdExecute )
003754 8200           14329         MOV.B   R0L,[R0]
003756 F338           14330         BEQ     _1021
003758 964842rr       14331         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 233

ADDR   CODE            LINE SOURCELINE
00375C 9908rrrr       14332         MOV.W   R0,#SOF( _SCPIError )
003760 8A00           14333         MOV.W   R0,[R0]
003762 F232           14334         BNE     _1021
                      14335 ; rs232cmd.c 4038               {
                      14336 ; rs232cmd.c 4039                       if ( CmdRequest)
003764 964842rr       14338         MOV.B   ES,#SEG( _CmdRequest )
003768 9908rrrr       14339         MOV.W   R0,#SOF( _CmdRequest )
00376C 8200           14340         MOV.B   R0L,[R0]
00376E F327           14341         BEQ     _1017
                      14342 ; rs232cmd.c 4040                       {
                      14343 ; rs232cmd.c 4041                               if ( ParCnt)
003770 964842rr       14345         MOV.B   ES,#SEG( _ParCnt )
003774 9908rrrr       14346         MOV.W   R0,#SOF( _ParCnt )
003778 8200           14347         MOV.B   R0L,[R0]
00377A F306           14348         BEQ     _1016
                      14349 ; rs232cmd.c 4042                                       SCPIError = SyntaxErr;
00377C 964842rr       14351         MOV.B   ES,#SEG( _SCPIError )
003780 9908rrrr       14352         MOV.W   R0,#SOF( _SCPIError )
003784 BA03           14353         MOV.W   [R0],#03H
003786 FE20           14354         BR      _1021
003786 FE20           14354         BR      _1021
003788                14355 _1016:
                      14356 ; rs232cmd.c 4043                               else
                      14357 ; rs232cmd.c 4044                               {               
                      14358 ; rs232cmd.c 4045                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfPLDCode, StartOfPLDCode+SizeOfPLDCode-1));
003788 B914           14360         MOV.W   R1,#04H
00378A B900           14361         MOV.W   R0,#00H
00378C B934           14362         MOV.W   R3,#04H
00378E 99289FFF       14363         MOV.W   R2,#09FFFH
                      14364         CALL    _ROMChecksum
003792 C4rrrrrr       +14364 ;       FCALL   _ROMChecksum
003796 91A8rr         14365         MOV.B   R5L,#SEG( __lc_bs )
003799 71BB           14366         XOR.B   R5H,R5H
00379B 8947           14367         MOV.W   R4,R7
00379D 0F01           14368         PUSH.W  R0
00379F 9918rrrr       14370         MOV.W   R1,#SEG( _1009 )
0037A3 9908rrrr       14371         MOV.W   R0,#SOF( _1009 )
0037A7 0F03           14372         PUSH.W  R0, R1
0037A9 8915           14374         MOV.W   R1,R5
0037AB 8904           14375         MOV.W   R0,R4
                      14376         CALL    _sprintf
0037AD C4rrrrrr       +14376 ;       FCALL   _sprintf
0037B1 A976           14377         ADDS.W  R7,#06H
                      14379 ; rs232cmd.c 4046                                       rs232puts( buffer);
0037B3 8915           14381         MOV.W   R1,R5
0037B5 8904           14382         MOV.W   R0,R4
                      14383         CALL    _rs232puts
0037B7 C4rrrrrr       +14383 ;       FCALL   _rs232puts
                      14384 ; rs232cmd.c 4047                               }
                      14385 ; rs232cmd.c 4048                       }
0037BB FE06           14387         BR      _1021
0037BB FE0600         14387         BR      _1021
0037BE                14388 _1017:
                      14389 ; rs232cmd.c 4049                       else
                      14390 ; rs232cmd.c 4050                               SCPIError = SyntaxErr;
0037BE 964842rr       14392         MOV.B   ES,#SEG( _SCPIError )
0037C2 9908rrrr       14393         MOV.W   R0,#SOF( _SCPIError )
0037C6 BA03           14394         MOV.W   [R0],#03H
                      14395 ; rs232cmd.c 4051               }
0037C8                14397 _1021:
                      14398 ; rs232cmd.c 4052       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 234

ADDR   CODE            LINE SOURCELINE
0037C8 9970001E       14400         ADD.W   R7,#01EH
0037CC 2F30           14402         POP.W   R4, R5
0037CE D680           14404         RET
                      14406 ; rs232cmd.c 4053       
                      14407 ; rs232cmd.c 4054       /************************************************************************
                            **/
                      14408 ; rs232cmd.c 4055       /* FactChecksumEmbAudio                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      14409 ; rs232cmd.c 4056       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14410 ; rs232cmd.c 4057       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14411 ; rs232cmd.c 4058       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14412 ; rs232cmd.c 4059       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14413 ; rs232cmd.c 4060       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14414 ; rs232cmd.c 4061       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14415 ; rs232cmd.c 4062       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14416 ; rs232cmd.c 4063       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14417 ; rs232cmd.c 4064       /************************************************************************
                            **/
                      14418 ; rs232cmd.c 4065       void FactChecksumEmbAudio( void)
                      14419 ; rs232cmd.c 4066       {
                      14420         ALIGN   1
                      14422         PUBLIC  _FactChecksumEmbAudio
0037D0                14423 _FactChecksumEmbAudio:
0037D0 0F30           14427         PUSH.W  R4, R5
0037D2 9972001E       14429         SUB.W   R7,#01EH
                      14432 ; rs232cmd.c 4067               char buffer[30];
                      14433 ; rs232cmd.c 4068       
                      14434 ; rs232cmd.c 4069               if ( CmdExecute && !SCPIError)
0037D6 964842rr       14436         MOV.B   ES,#SEG( _CmdExecute )
0037DA 9908rrrr       14437         MOV.W   R0,#SOF( _CmdExecute )
0037DE 8200           14438         MOV.B   R0L,[R0]
0037E0 F339           14439         BEQ     _1027
0037E2 964842rr       14440         MOV.B   ES,#SEG( _SCPIError )
0037E6 9908rrrr       14441         MOV.W   R0,#SOF( _SCPIError )
0037EA 8A00           14442         MOV.W   R0,[R0]
0037EC F233           14443         BNE     _1027
                      14444 ; rs232cmd.c 4070               {
                      14445 ; rs232cmd.c 4071                       if ( CmdRequest)
0037EE 964842rr       14447         MOV.B   ES,#SEG( _CmdRequest )
0037F2 9908rrrr       14448         MOV.W   R0,#SOF( _CmdRequest )
0037F6 8200           14449         MOV.B   R0L,[R0]
0037F8 F328           14450         BEQ     _1023
                      14451 ; rs232cmd.c 4072                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 235

ADDR   CODE            LINE SOURCELINE
                      14452 ; rs232cmd.c 4073                               if ( ParCnt)
0037FA 964842rr       14454         MOV.B   ES,#SEG( _ParCnt )
0037FE 9908rrrr       14455         MOV.W   R0,#SOF( _ParCnt )
003802 8200           14456         MOV.B   R0L,[R0]
003804 F306           14457         BEQ     _1022
                      14458 ; rs232cmd.c 4074                                       SCPIError = SyntaxErr;
003806 964842rr       14460         MOV.B   ES,#SEG( _SCPIError )
00380A 9908rrrr       14461         MOV.W   R0,#SOF( _SCPIError )
00380E BA03           14462         MOV.W   [R0],#03H
003810 FE21           14463         BR      _1027
003810 FE21           14463         BR      _1027
003812                14464 _1022:
                      14465 ; rs232cmd.c 4075                               else
                      14466 ; rs232cmd.c 4076                               {               
                      14467 ; rs232cmd.c 4077                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfEmbAudioCode, StartOfEmbAudioCode+SizeOfEmbAudioCode-1));
003812 B914           14469         MOV.W   R1,#04H
003814 9908A000       14470         MOV.W   R0,#0A000H
003818 B934           14471         MOV.W   R3,#04H
00381A 9928C3FF       14472         MOV.W   R2,#0C3FFH
                      14473         CALL    _ROMChecksum
00381E C4rrrrrr       +14473 ;       FCALL   _ROMChecksum
003822 91A8rr         14474         MOV.B   R5L,#SEG( __lc_bs )
003825 71BB           14475         XOR.B   R5H,R5H
003827 8947           14476         MOV.W   R4,R7
003829 0F01           14477         PUSH.W  R0
00382B 9918rrrr       14479         MOV.W   R1,#SEG( _1009 )
00382F 9908rrrr       14480         MOV.W   R0,#SOF( _1009 )
003833 0F03           14481         PUSH.W  R0, R1
003835 8915           14483         MOV.W   R1,R5
003837 8904           14484         MOV.W   R0,R4
                      14485         CALL    _sprintf
003839 C4rrrrrr       +14485 ;       FCALL   _sprintf
00383D A976           14486         ADDS.W  R7,#06H
                      14488 ; rs232cmd.c 4078                                       rs232puts( buffer);
00383F 8915           14490         MOV.W   R1,R5
003841 8904           14491         MOV.W   R0,R4
                      14492         CALL    _rs232puts
003843 C4rrrrrr       +14492 ;       FCALL   _rs232puts
                      14493 ; rs232cmd.c 4079                               }
                      14494 ; rs232cmd.c 4080                       }
003847 FE06           14496         BR      _1027
003847 FE0600         14496         BR      _1027
00384A                14497 _1023:
                      14498 ; rs232cmd.c 4081                       else
                      14499 ; rs232cmd.c 4082                               SCPIError = SyntaxErr;
00384A 964842rr       14501         MOV.B   ES,#SEG( _SCPIError )
00384E 9908rrrr       14502         MOV.W   R0,#SOF( _SCPIError )
003852 BA03           14503         MOV.W   [R0],#03H
                      14504 ; rs232cmd.c 4083               }
003854                14506 _1027:
                      14507 ; rs232cmd.c 4084       }
003854 9970001E       14509         ADD.W   R7,#01EH
003858 2F30           14511         POP.W   R4, R5
00385A D680           14513         RET
                      14515 ; rs232cmd.c 4085       
                      14516 ; rs232cmd.c 4086       /************************************************************************
                            **/
                      14517 ; rs232cmd.c 4087       /* FactChecksumPattern                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      14518 ; rs232cmd.c 4088       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 236

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                      14519 ; rs232cmd.c 4089       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14520 ; rs232cmd.c 4090       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14521 ; rs232cmd.c 4091       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14522 ; rs232cmd.c 4092       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14523 ; rs232cmd.c 4093       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14524 ; rs232cmd.c 4094       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14525 ; rs232cmd.c 4095       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14526 ; rs232cmd.c 4096       /************************************************************************
                            **/
                      14527 ; rs232cmd.c 4097       void FactChecksumPattern( void)
                      14528 ; rs232cmd.c 4098       {
                      14529         ALIGN   1
                      14531         PUBLIC  _FactChecksumPattern
00385C                14532 _FactChecksumPattern:
00385C 0F30           14536         PUSH.W  R4, R5
00385E 9972001E       14538         SUB.W   R7,#01EH
                      14541 ; rs232cmd.c 4099               char buffer[30];
                      14542 ; rs232cmd.c 4100       
                      14543 ; rs232cmd.c 4101               if ( CmdExecute && !SCPIError)
003862 964842rr       14545         MOV.B   ES,#SEG( _CmdExecute )
003866 9908rrrr       14546         MOV.W   R0,#SOF( _CmdExecute )
00386A 8200           14547         MOV.B   R0L,[R0]
00386C F338           14548         BEQ     _1033
00386E 964842rr       14549         MOV.B   ES,#SEG( _SCPIError )
003872 9908rrrr       14550         MOV.W   R0,#SOF( _SCPIError )
003876 8A00           14551         MOV.W   R0,[R0]
003878 F232           14552         BNE     _1033
                      14553 ; rs232cmd.c 4102               {
                      14554 ; rs232cmd.c 4103                       if ( CmdRequest)
00387A 964842rr       14556         MOV.B   ES,#SEG( _CmdRequest )
00387E 9908rrrr       14557         MOV.W   R0,#SOF( _CmdRequest )
003882 8200           14558         MOV.B   R0L,[R0]
003884 F327           14559         BEQ     _1029
                      14560 ; rs232cmd.c 4104                       {
                      14561 ; rs232cmd.c 4105                               if ( ParCnt)
003886 964842rr       14563         MOV.B   ES,#SEG( _ParCnt )
00388A 9908rrrr       14564         MOV.W   R0,#SOF( _ParCnt )
00388E 8200           14565         MOV.B   R0L,[R0]
003890 F306           14566         BEQ     _1028
                      14567 ; rs232cmd.c 4106                                       SCPIError = SyntaxErr;
003892 964842rr       14569         MOV.B   ES,#SEG( _SCPIError )
003896 9908rrrr       14570         MOV.W   R0,#SOF( _SCPIError )
00389A BA03           14571         MOV.W   [R0],#03H
00389C FE20           14572         BR      _1033
00389C FE20           14572         BR      _1033
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 237

ADDR   CODE            LINE SOURCELINE
00389E                14573 _1028:
                      14574 ; rs232cmd.c 4107                               else
                      14575 ; rs232cmd.c 4108                               {               
                      14576 ; rs232cmd.c 4109                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfCBVideoCode, StartOfCBVideoCode+SizeOfCBVideoCode-1));
00389E B915           14578         MOV.W   R1,#05H
0038A0 B900           14579         MOV.W   R0,#00H
0038A2 B937           14580         MOV.W   R3,#07H
0038A4 9928FFFF       14581         MOV.W   R2,#0FFFFH
                      14582         CALL    _ROMChecksum
0038A8 C4rrrrrr       +14582 ;       FCALL   _ROMChecksum
0038AC 91A8rr         14583         MOV.B   R5L,#SEG( __lc_bs )
0038AF 71BB           14584         XOR.B   R5H,R5H
0038B1 8947           14585         MOV.W   R4,R7
0038B3 0F01           14586         PUSH.W  R0
0038B5 9918rrrr       14588         MOV.W   R1,#SEG( _1009 )
0038B9 9908rrrr       14589         MOV.W   R0,#SOF( _1009 )
0038BD 0F03           14590         PUSH.W  R0, R1
0038BF 8915           14592         MOV.W   R1,R5
0038C1 8904           14593         MOV.W   R0,R4
                      14594         CALL    _sprintf
0038C3 C4rrrrrr       +14594 ;       FCALL   _sprintf
0038C7 A976           14595         ADDS.W  R7,#06H
                      14597 ; rs232cmd.c 4110                                       rs232puts( buffer);
0038C9 8915           14599         MOV.W   R1,R5
0038CB 8904           14600         MOV.W   R0,R4
                      14601         CALL    _rs232puts
0038CD C4rrrrrr       +14601 ;       FCALL   _rs232puts
                      14602 ; rs232cmd.c 4111                               }
                      14603 ; rs232cmd.c 4112                       }
0038D1 FE06           14605         BR      _1033
0038D1 FE0600         14605         BR      _1033
0038D4                14606 _1029:
                      14607 ; rs232cmd.c 4113                       else
                      14608 ; rs232cmd.c 4114                               SCPIError = SyntaxErr;
0038D4 964842rr       14610         MOV.B   ES,#SEG( _SCPIError )
0038D8 9908rrrr       14611         MOV.W   R0,#SOF( _SCPIError )
0038DC BA03           14612         MOV.W   [R0],#03H
                      14613 ; rs232cmd.c 4115               }
0038DE                14615 _1033:
                      14616 ; rs232cmd.c 4116       }
0038DE 9970001E       14618         ADD.W   R7,#01EH
0038E2 2F30           14620         POP.W   R4, R5
0038E4 D680           14622         RET
                      14624 ; rs232cmd.c 4117       
                      14625 ; rs232cmd.c 4118       /************************************************************************
                            **/
                      14626 ; rs232cmd.c 4119       /* FactChecksumRange                                                     
                                                                                                                             
                                RS232CMD.C  */
                      14627 ; rs232cmd.c 4120       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14628 ; rs232cmd.c 4121       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14629 ; rs232cmd.c 4122       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14630 ; rs232cmd.c 4123       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 238

ADDR   CODE            LINE SOURCELINE
                                                    */
                      14631 ; rs232cmd.c 4124       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14632 ; rs232cmd.c 4125       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14633 ; rs232cmd.c 4126       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14634 ; rs232cmd.c 4127       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14635 ; rs232cmd.c 4128       /************************************************************************
                            **/
                      14636 ; rs232cmd.c 4129       void FactChecksumRange( void)
                      14637 ; rs232cmd.c 4130       {
                      14638         ALIGN   1
                      14640         PUBLIC  _FactChecksumRange
0038E6                14641 _FactChecksumRange:
0038E6 0F30           14645         PUSH.W  R4, R5
0038E8 99720026       14647         SUB.W   R7,#026H
                      14652 ; rs232cmd.c 4131               UL StartAddr, EndAddr;
                      14653 ; rs232cmd.c 4132       
                      14654 ; rs232cmd.c 4133               char buffer[30];
                      14655 ; rs232cmd.c 4134       
                      14656 ; rs232cmd.c 4135               if ( CmdExecute && !SCPIError)
0038EC 964842rr       14658         MOV.B   ES,#SEG( _CmdExecute )
0038F0 9908rrrr       14659         MOV.W   R0,#SOF( _CmdExecute )
0038F4 8200           14660         MOV.B   R0L,[R0]
0038F6 F354           14661         BEQ     _1041
0038F8 964842rr       14662         MOV.B   ES,#SEG( _SCPIError )
0038FC 9908rrrr       14663         MOV.W   R0,#SOF( _SCPIError )
003900 8A00           14664         MOV.W   R0,[R0]
003902 F24E           14665         BNE     _1041
                      14666 ; rs232cmd.c 4136               {
                      14667 ; rs232cmd.c 4137                       if ( CmdRequest)
003904 964842rr       14669         MOV.B   ES,#SEG( _CmdRequest )
003908 9908rrrr       14670         MOV.W   R0,#SOF( _CmdRequest )
00390C 8200           14671         MOV.B   R0L,[R0]
00390E F343           14672         BEQ     _1037
                      14673 ; rs232cmd.c 4138                       {
                      14674 ; rs232cmd.c 4139                               if (( ParCnt != 2) || (( sscanf( Cmd, "%lu,%lu", 
                            &StartAddr, &EndAddr)) != 2))
003910 964842rr       14676         MOV.B   ES,#SEG( _ParCnt )
003914 9908rrrr       14677         MOV.W   R0,#SOF( _ParCnt )
003918 8200           14678         MOV.B   R0L,[R0]
00391A 910402         14679         CMP.B   R0L,#02H
00391D F21A           14680         BNE     _1035
00391F 9918rrrr       14681         MOV.W   R1,#SEG( _Cmd )
003923 9908rrrr       14682         MOV.W   R0,#SOF( _Cmd )
003927 9168rr         14683         MOV.B   R3L,#SEG( __lc_bs )
00392A 7177           14684         XOR.B   R3H,R3H
00392C 8927           14685         MOV.W   R2,R7
00392E 91A8rr         14686         MOV.B   R5L,#SEG( __lc_bs )
003931 71BB           14687         XOR.B   R5H,R5H
003933 404704         14688         LEA     R4,R7+4
003936 0F30           14689         PUSH.W  R4, R5
003938 0F0C           14691         PUSH.W  R2, R3
00393A 9938rrrr       14693         MOV.W   R3,#SEG( _1034 )
00393E 9928rrrr       14694         MOV.W   R2,#SOF( _1034 )
003942 0F0C           14695         PUSH.W  R2, R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 239

ADDR   CODE            LINE SOURCELINE
                      14697         CALL    _sscanf
003944 C4rrrrrr       +14697 ;       FCALL   _sscanf
003948 9970000C       14698         ADD.W   R7,#0CH
00394C 99040002       14700         CMP.W   R0,#02H
003950 F306           14701         BEQ     _1036
003950 F306           14701         BEQ     _1036
003952                14702 _1035:
                      14703 ; rs232cmd.c 4140                                       SCPIError = SyntaxErr;
003952 964842rr       14705         MOV.B   ES,#SEG( _SCPIError )
003956 9908rrrr       14706         MOV.W   R0,#SOF( _SCPIError )
00395A BA03           14707         MOV.W   [R0],#03H
00395C FE21           14708         BR      _1041
00395C FE21           14708         BR      _1041
00395E                14709 _1036:
                      14710 ; rs232cmd.c 4141                               else
                      14711 ; rs232cmd.c 4142                               {
                      14712 ; rs232cmd.c 4143                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtAddr, EndAddr));
00395E 8C1702         14714         MOV.W   R1,[R7+2]
003961 8A07           14715         MOV.W   R0,[R7]
003963 8C3706         14716         MOV.W   R3,[R7+6]
003966 8C2704         14717         MOV.W   R2,[R7+4]
                      14718         CALL    _ROMChecksum
003969 C4rrrrrr       +14718 ;       FCALL   _ROMChecksum
00396D 91A8rr         14719         MOV.B   R5L,#SEG( __lc_bs )
003970 71BB           14720         XOR.B   R5H,R5H
003972 404708         14721         LEA     R4,R7+8
003975 0F01           14722         PUSH.W  R0
003977 9918rrrr       14724         MOV.W   R1,#SEG( _1009 )
00397B 9908rrrr       14725         MOV.W   R0,#SOF( _1009 )
00397F 0F03           14726         PUSH.W  R0, R1
003981 8915           14728         MOV.W   R1,R5
003983 8904           14729         MOV.W   R0,R4
                      14730         CALL    _sprintf
003985 C4rrrrrr       +14730 ;       FCALL   _sprintf
003989 A976           14731         ADDS.W  R7,#06H
                      14733 ; rs232cmd.c 4144                                       rs232puts( buffer);
00398B 8915           14735         MOV.W   R1,R5
00398D 8904           14736         MOV.W   R0,R4
                      14737         CALL    _rs232puts
00398F C4rrrrrr       +14737 ;       FCALL   _rs232puts
                      14738 ; rs232cmd.c 4145                               }
                      14739 ; rs232cmd.c 4146                       }
003993 FE06           14741         BR      _1041
003993 FE0600         14741         BR      _1041
003996                14742 _1037:
                      14743 ; rs232cmd.c 4147                       else
                      14744 ; rs232cmd.c 4148                               SCPIError = SyntaxErr;
003996 964842rr       14746         MOV.B   ES,#SEG( _SCPIError )
00399A 9908rrrr       14747         MOV.W   R0,#SOF( _SCPIError )
00399E BA03           14748         MOV.W   [R0],#03H
                      14749 ; rs232cmd.c 4149               }
0039A0                14751 _1041:
                      14752 ; rs232cmd.c 4150       }
0039A0 99700026       14754         ADD.W   R7,#026H
0039A4 2F30           14756         POP.W   R4, R5
0039A6 D680           14758         RET
                      14760 ; rs232cmd.c 4151       
                      14761 ; rs232cmd.c 4152       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 240

ADDR   CODE            LINE SOURCELINE
                      14762 ; rs232cmd.c 4153       /* FactMainVersion                                                       
                                                                                                                             
                                         RS232CMD.C */
                      14763 ; rs232cmd.c 4154       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14764 ; rs232cmd.c 4155       /* Author:              Kim Engedahl, DEV, 000620                        
                                                                                                                             
                                    */
                      14765 ; rs232cmd.c 4156       /* Revised:       000620                                                 
                                                                                                                             
                                                                                    */
                      14766 ; rs232cmd.c 4157       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14767 ; rs232cmd.c 4158       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14768 ; rs232cmd.c 4159       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14769 ; rs232cmd.c 4160       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14770 ; rs232cmd.c 4161       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14771 ; rs232cmd.c 4162       /************************************************************************
                            **/
                      14772 ; rs232cmd.c 4163       void FactMainVersion( void)
                      14773 ; rs232cmd.c 4164       {
                      14774         ALIGN   1
                      14776         PUBLIC  _FactMainVersion
0039A8                14777 _FactMainVersion:
0039A8 0F30           14781         PUSH.W  R4, R5
0039AA 99720014       14783         SUB.W   R7,#014H
                      14786 ; rs232cmd.c 4165               char buffer[20];
                      14787 ; rs232cmd.c 4166       
                      14788 ; rs232cmd.c 4167               if ( CmdExecute && !SCPIError)
0039AE 964842rr       14790         MOV.B   ES,#SEG( _CmdExecute )
0039B2 9908rrrr       14791         MOV.W   R0,#SOF( _CmdExecute )
0039B6 8200           14792         MOV.B   R0L,[R0]
0039B8 F333           14793         BEQ     _1049
0039BA 964842rr       14794         MOV.B   ES,#SEG( _SCPIError )
0039BE 9908rrrr       14795         MOV.W   R0,#SOF( _SCPIError )
0039C2 8A00           14796         MOV.W   R0,[R0]
0039C4 F22D           14797         BNE     _1049
                      14798 ; rs232cmd.c 4168               {
                      14799 ; rs232cmd.c 4169                       if ( CmdRequest)
0039C6 964842rr       14801         MOV.B   ES,#SEG( _CmdRequest )
0039CA 9908rrrr       14802         MOV.W   R0,#SOF( _CmdRequest )
0039CE 8200           14803         MOV.B   R0L,[R0]
0039D0 F322           14804         BEQ     _1045
                      14805 ; rs232cmd.c 4170                       {
                      14806 ; rs232cmd.c 4171                               if ( ParCnt)
0039D2 964842rr       14808         MOV.B   ES,#SEG( _ParCnt )
0039D6 9908rrrr       14809         MOV.W   R0,#SOF( _ParCnt )
0039DA 8200           14810         MOV.B   R0L,[R0]
0039DC F306           14811         BEQ     _1044
                      14812 ; rs232cmd.c 4172                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 241

ADDR   CODE            LINE SOURCELINE
0039DE 964842rr       14814         MOV.B   ES,#SEG( _SCPIError )
0039E2 9908rrrr       14815         MOV.W   R0,#SOF( _SCPIError )
0039E6 BA03           14816         MOV.W   [R0],#03H
0039E8 FE1B           14817         BR      _1049
0039E8 FE1B           14817         BR      _1049
0039EA                14818 _1044:
                      14819 ; rs232cmd.c 4173                               else
                      14820 ; rs232cmd.c 4174                               {
                      14821 ; rs232cmd.c 4175                                       sprintf( buffer, "%u\n", MasterSWVersion)
                            ;
0039EA 91A8rr         14823         MOV.B   R5L,#SEG( __lc_bs )
0039ED 71BB           14824         XOR.B   R5H,R5H
0039EF 8947           14825         MOV.W   R4,R7
0039F1 9908000A       14826         MOV.W   R0,#0AH
0039F5 0F01           14827         PUSH.W  R0
0039F7 9918rrrr       14829         MOV.W   R1,#SEG( _1009 )
0039FB 9908rrrr       14830         MOV.W   R0,#SOF( _1009 )
0039FF 0F03           14831         PUSH.W  R0, R1
003A01 8915           14833         MOV.W   R1,R5
003A03 8904           14834         MOV.W   R0,R4
                      14835         CALL    _sprintf
003A05 C4rrrrrr       +14835 ;       FCALL   _sprintf
003A09 A976           14836         ADDS.W  R7,#06H
                      14838 ; rs232cmd.c 4176                                       rs232puts( buffer);
003A0B 8915           14840         MOV.W   R1,R5
003A0D 8904           14841         MOV.W   R0,R4
                      14842         CALL    _rs232puts
003A0F C4rrrrrr       +14842 ;       FCALL   _rs232puts
                      14843 ; rs232cmd.c 4177                               }
                      14844 ; rs232cmd.c 4178                       }
003A13 FE06           14846         BR      _1049
003A13 FE0600         14846         BR      _1049
003A16                14847 _1045:
                      14848 ; rs232cmd.c 4179                       else
                      14849 ; rs232cmd.c 4180                               SCPIError = SyntaxErr;
003A16 964842rr       14851         MOV.B   ES,#SEG( _SCPIError )
003A1A 9908rrrr       14852         MOV.W   R0,#SOF( _SCPIError )
003A1E BA03           14853         MOV.W   [R0],#03H
                      14854 ; rs232cmd.c 4181               }
003A20                14856 _1049:
                      14857 ; rs232cmd.c 4182       }
003A20 99700014       14859         ADD.W   R7,#014H
003A24 2F30           14861         POP.W   R4, R5
003A26 D680           14863         RET
                      14865 ; rs232cmd.c 4183       
                      14866 ; rs232cmd.c 4184       /************************************************************************
                            **/
                      14867 ; rs232cmd.c 4185       /* FactMainIDNCompany                                                    
                                                                                                                             
                                RS232CMD.C  */
                      14868 ; rs232cmd.c 4186       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14869 ; rs232cmd.c 4187       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      14870 ; rs232cmd.c 4188       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      14871 ; rs232cmd.c 4189       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 242

ADDR   CODE            LINE SOURCELINE
                                                    */
                      14872 ; rs232cmd.c 4190       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14873 ; rs232cmd.c 4191       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14874 ; rs232cmd.c 4192       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14875 ; rs232cmd.c 4193       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14876 ; rs232cmd.c 4194       /************************************************************************
                            **/
                      14877 ; rs232cmd.c 4195       void FactMainIDNCompany( void)
                      14878 ; rs232cmd.c 4196       {
                      14879         ALIGN   1
                      14881         PUBLIC  _FactMainIDNCompany
003A28                14882 _FactMainIDNCompany:
003A28 0F70           14886         PUSH.W  R4, R5, R6
003A2A 99720022       14888         SUB.W   R7,#022H
                      14891 ; rs232cmd.c 4197               char Company[33];
                      14892 ; rs232cmd.c 4198       
                      14893 ; rs232cmd.c 4199               if ( CmdExecute && !SCPIError)
003A2E 964842rr       14895         MOV.B   ES,#SEG( _CmdExecute )
003A32 9908rrrr       14896         MOV.W   R0,#SOF( _CmdExecute )
003A36 8200           14897         MOV.B   R0L,[R0]
003A38 F364           14898         BEQ     _1060
003A3A 964842rr       14899         MOV.B   ES,#SEG( _SCPIError )
003A3E 9908rrrr       14900         MOV.W   R0,#SOF( _SCPIError )
003A42 8A00           14901         MOV.W   R0,[R0]
003A44 F25E           14902         BNE     _1060
                      14903 ; rs232cmd.c 4200               {
                      14904 ; rs232cmd.c 4201                       if ( CmdRequest)
003A46 964842rr       14906         MOV.B   ES,#SEG( _CmdRequest )
003A4A 9908rrrr       14907         MOV.W   R0,#SOF( _CmdRequest )
003A4E 8200           14908         MOV.B   R0L,[R0]
003A50 F317           14909         BEQ     _1052
                      14910 ; rs232cmd.c 4202                       {
                      14911 ; rs232cmd.c 4203                               if ( ParCnt)
003A52 964842rr       14913         MOV.B   ES,#SEG( _ParCnt )
003A56 9908rrrr       14914         MOV.W   R0,#SOF( _ParCnt )
003A5A 8200           14915         MOV.B   R0L,[R0]
003A5C F306           14916         BEQ     _1051
                      14917 ; rs232cmd.c 4204                                       SCPIError = SyntaxErr;
003A5E 964842rr       14919         MOV.B   ES,#SEG( _SCPIError )
003A62 9908rrrr       14920         MOV.W   R0,#SOF( _SCPIError )
003A66 BA03           14921         MOV.W   [R0],#03H
003A68 FE4C           14922         BR      _1060
003A68 FE4C           14922         BR      _1060
003A6A                14923 _1051:
                      14924 ; rs232cmd.c 4205                               else
                      14925 ; rs232cmd.c 4206                               {
                      14926 ; rs232cmd.c 4207                                       rs232puts( Calibration.Company);
003A6A 9918rrrr       14928         MOV.W   R1,#SEG( _Calibration )
003A6E 9908rrrr       14929         MOV.W   R0,#SOF( _Calibration )
                      14930         CALL    _rs232puts
003A72 C4rrrrrr       +14930 ;       FCALL   _rs232puts
                      14931 ; rs232cmd.c 4208                                       rs232putchar( '\n');
003A76 91080A         14933         MOV.B   R0L,#0AH
                      14934         CALL    _rs232putchar
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 243

ADDR   CODE            LINE SOURCELINE
003A79 C4rrrrrr       +14934 ;       FCALL   _rs232putchar
                      14935 ; rs232cmd.c 4209                               }
                      14936 ; rs232cmd.c 4210                       }
003A7D FE42           14938         BR      _1060
003A7D FE4200         14938         BR      _1060
003A80                14939 _1052:
                      14940 ; rs232cmd.c 4211                       else
                      14941 ; rs232cmd.c 4212                       {
                      14942 ; rs232cmd.c 4213                               if ( !PasswordProtected)
003A80 964842rr       14944         MOV.B   ES,#SEG( _PasswordProtected )
003A84 9908rrrr       14945         MOV.W   R0,#SOF( _PasswordProtected )
003A88 8A00           14946         MOV.W   R0,[R0]
003A8A F23B           14947         BNE     _1060
                      14948 ; rs232cmd.c 4214                               {
                      14949 ; rs232cmd.c 4215                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%32
                            s", Company) != 1))
003A8C 964842rr       14951         MOV.B   ES,#SEG( _ParCnt )
003A90 9908rrrr       14952         MOV.W   R0,#SOF( _ParCnt )
003A94 8200           14953         MOV.B   R0L,[R0]
003A96 910401         14954         CMP.B   R0L,#01H
003A99 F217           14955         BNE     _1053
003A9B 9918rrrr       14956         MOV.W   R1,#SEG( _Cmd )
003A9F 9908rrrr       14957         MOV.W   R0,#SOF( _Cmd )
003AA3 91A8rr         14958         MOV.B   R5L,#SEG( __lc_bs )
003AA6 71BB           14959         XOR.B   R5H,R5H
003AA8 8947           14960         MOV.W   R4,R7
003AAA 8935           14961         MOV.W   R3,R5
003AAC 8924           14962         MOV.W   R2,R4
003AAE 0F0C           14963         PUSH.W  R2, R3
003AB0 9938rrrr       14965         MOV.W   R3,#SEG( _1050 )
003AB4 9928rrrr       14966         MOV.W   R2,#SOF( _1050 )
003AB8 0F0C           14967         PUSH.W  R2, R3
                      14969         CALL    _sscanf
003ABA C4rrrrrr       +14969 ;       FCALL   _sscanf
003ABE 99700008       14970         ADD.W   R7,#08H
003AC2 99040001       14972         CMP.W   R0,#01H
003AC6 F306           14973         BEQ     _1054
003AC6 F306           14973         BEQ     _1054
003AC8                14974 _1053:
                      14975 ; rs232cmd.c 4216                                               SCPIError = SyntaxErr;
003AC8 964842rr       14977         MOV.B   ES,#SEG( _SCPIError )
003ACC 9908rrrr       14978         MOV.W   R0,#SOF( _SCPIError )
003AD0 BA03           14979         MOV.W   [R0],#03H
003AD2 FE17           14980         BR      _1060
003AD2 FE17           14980         BR      _1060
003AD4                14981 _1054:
                      14982 ; rs232cmd.c 4217                                       else
                      14983 ; rs232cmd.c 4218                                       {
                      14984 ; rs232cmd.c 4219                                               strncpy( Calibration.Company, Com
                            pany, 32);
003AD4 99680020       14986         MOV.W   R6,#020H
003AD8 9918rrrr       14987         MOV.W   R1,#SEG( _Calibration )
003ADC 9908rrrr       14988         MOV.W   R0,#SOF( _Calibration )
003AE0 8935           14989         MOV.W   R3,R5
003AE2 8924           14990         MOV.W   R2,R4
                      14991         CALL    _strncpy
003AE4 C4rrrrrr       +14991 ;       FCALL   _strncpy
                      14992 ; rs232cmd.c 4220       
                      14993 ; rs232cmd.c 4221                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003AE8 964842rr       14995         MOV.B   ES,#SEG( _CalibrationPtr )
003AEC 9928rrrr       14996         MOV.W   R2,#SOF( _CalibrationPtr )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 244

ADDR   CODE            LINE SOURCELINE
003AF0 8A22           14997         MOV.W   R2,[R2]
003AF2 993800E0       14998         MOV.W   R3,#0E0H
003AF6 9918rrrr       14999         MOV.W   R1,#SEG( _Calibration )
003AFA 9908rrrr       15000         MOV.W   R0,#SOF( _Calibration )
                      15001         CALL    _NV_Store
003AFE C4rrrrrr       +15001 ;       FCALL   _NV_Store
                      15002 ; rs232cmd.c 4222                                       }
                      15003 ; rs232cmd.c 4223                               }
                      15004 ; rs232cmd.c 4224                       }
                      15005 ; rs232cmd.c 4225               }
003B02                15007 _1060:
                      15008 ; rs232cmd.c 4226       }
003B02 99700022       15010         ADD.W   R7,#022H
003B06 2F70           15012         POP.W   R4, R5, R6
003B08 D680           15014         RET
                      15016 ; rs232cmd.c 4227       
                      15017 ; rs232cmd.c 4228       /************************************************************************
                            **/
                      15018 ; rs232cmd.c 4229       /* FactMainIDNType                                                       
                                                                                                                             
                                         RS232CMD.C */
                      15019 ; rs232cmd.c 4230       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15020 ; rs232cmd.c 4231       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15021 ; rs232cmd.c 4232       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      15022 ; rs232cmd.c 4233       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15023 ; rs232cmd.c 4234       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15024 ; rs232cmd.c 4235       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15025 ; rs232cmd.c 4236       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15026 ; rs232cmd.c 4237       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15027 ; rs232cmd.c 4238       /************************************************************************
                            **/
                      15028 ; rs232cmd.c 4239       void FactMainIDNType( void)
                      15029 ; rs232cmd.c 4240       {
                      15030         ALIGN   1
                      15032         PUBLIC  _FactMainIDNType
003B0A                15033 _FactMainIDNType:
003B0A 0F70           15037         PUSH.W  R4, R5, R6
003B0C 99720022       15039         SUB.W   R7,#022H
                      15042 ; rs232cmd.c 4241               char Type[33];
                      15043 ; rs232cmd.c 4242       
                      15044 ; rs232cmd.c 4243               if ( CmdExecute && !SCPIError)
003B10 964842rr       15046         MOV.B   ES,#SEG( _CmdExecute )
003B14 9908rrrr       15047         MOV.W   R0,#SOF( _CmdExecute )
003B18 8200           15048         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 245

ADDR   CODE            LINE SOURCELINE
003B1A F364           15049         BEQ     _1072
003B1C 964842rr       15050         MOV.B   ES,#SEG( _SCPIError )
003B20 9908rrrr       15051         MOV.W   R0,#SOF( _SCPIError )
003B24 8A00           15052         MOV.W   R0,[R0]
003B26 F25E           15053         BNE     _1072
                      15054 ; rs232cmd.c 4244               {
                      15055 ; rs232cmd.c 4245                       if ( CmdRequest)
003B28 964842rr       15057         MOV.B   ES,#SEG( _CmdRequest )
003B2C 9908rrrr       15058         MOV.W   R0,#SOF( _CmdRequest )
003B30 8200           15059         MOV.B   R0L,[R0]
003B32 F317           15060         BEQ     _1064
                      15061 ; rs232cmd.c 4246                       {
                      15062 ; rs232cmd.c 4247                               if ( ParCnt)
003B34 964842rr       15064         MOV.B   ES,#SEG( _ParCnt )
003B38 9908rrrr       15065         MOV.W   R0,#SOF( _ParCnt )
003B3C 8200           15066         MOV.B   R0L,[R0]
003B3E F306           15067         BEQ     _1063
                      15068 ; rs232cmd.c 4248                                       SCPIError = SyntaxErr;
003B40 964842rr       15070         MOV.B   ES,#SEG( _SCPIError )
003B44 9908rrrr       15071         MOV.W   R0,#SOF( _SCPIError )
003B48 BA03           15072         MOV.W   [R0],#03H
003B4A FE4C           15073         BR      _1072
003B4A FE4C           15073         BR      _1072
003B4C                15074 _1063:
                      15075 ; rs232cmd.c 4249                               else
                      15076 ; rs232cmd.c 4250                               {
                      15077 ; rs232cmd.c 4251                                       rs232puts( Calibration.Type);
003B4C 9918rrrr       15079         MOV.W   R1,#SEG( _Calibration+33 )
003B50 9908rrrr       15080         MOV.W   R0,#SOF( _Calibration+33 )
                      15081         CALL    _rs232puts
003B54 C4rrrrrr       +15081 ;       FCALL   _rs232puts
                      15082 ; rs232cmd.c 4252                                       rs232putchar( '\n');
003B58 91080A         15084         MOV.B   R0L,#0AH
                      15085         CALL    _rs232putchar
003B5B C4rrrrrr       +15085 ;       FCALL   _rs232putchar
                      15086 ; rs232cmd.c 4253                               }
                      15087 ; rs232cmd.c 4254                       }
003B5F FE42           15089         BR      _1072
003B5F FE4200         15089         BR      _1072
003B62                15090 _1064:
                      15091 ; rs232cmd.c 4255                       else
                      15092 ; rs232cmd.c 4256                       {
                      15093 ; rs232cmd.c 4257                               if ( !PasswordProtected)
003B62 964842rr       15095         MOV.B   ES,#SEG( _PasswordProtected )
003B66 9908rrrr       15096         MOV.W   R0,#SOF( _PasswordProtected )
003B6A 8A00           15097         MOV.W   R0,[R0]
003B6C F23B           15098         BNE     _1072
                      15099 ; rs232cmd.c 4258                               {
                      15100 ; rs232cmd.c 4259                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%32
                            s", Type) != 1))
003B6E 964842rr       15102         MOV.B   ES,#SEG( _ParCnt )
003B72 9908rrrr       15103         MOV.W   R0,#SOF( _ParCnt )
003B76 8200           15104         MOV.B   R0L,[R0]
003B78 910401         15105         CMP.B   R0L,#01H
003B7B F217           15106         BNE     _1065
003B7D 9918rrrr       15107         MOV.W   R1,#SEG( _Cmd )
003B81 9908rrrr       15108         MOV.W   R0,#SOF( _Cmd )
003B85 91A8rr         15109         MOV.B   R5L,#SEG( __lc_bs )
003B88 71BB           15110         XOR.B   R5H,R5H
003B8A 8947           15111         MOV.W   R4,R7
003B8C 8935           15112         MOV.W   R3,R5
003B8E 8924           15113         MOV.W   R2,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 246

ADDR   CODE            LINE SOURCELINE
003B90 0F0C           15114         PUSH.W  R2, R3
003B92 9938rrrr       15116         MOV.W   R3,#SEG( _1050 )
003B96 9928rrrr       15117         MOV.W   R2,#SOF( _1050 )
003B9A 0F0C           15118         PUSH.W  R2, R3
                      15120         CALL    _sscanf
003B9C C4rrrrrr       +15120 ;       FCALL   _sscanf
003BA0 99700008       15121         ADD.W   R7,#08H
003BA4 99040001       15123         CMP.W   R0,#01H
003BA8 F306           15124         BEQ     _1066
003BA8 F306           15124         BEQ     _1066
003BAA                15125 _1065:
                      15126 ; rs232cmd.c 4260                                               SCPIError = SyntaxErr;
003BAA 964842rr       15128         MOV.B   ES,#SEG( _SCPIError )
003BAE 9908rrrr       15129         MOV.W   R0,#SOF( _SCPIError )
003BB2 BA03           15130         MOV.W   [R0],#03H
003BB4 FE17           15131         BR      _1072
003BB4 FE17           15131         BR      _1072
003BB6                15132 _1066:
                      15133 ; rs232cmd.c 4261                                       else
                      15134 ; rs232cmd.c 4262                                       {
                      15135 ; rs232cmd.c 4263                                               strncpy( Calibration.Type, Type, 
                            32);
003BB6 9918rrrr       15137         MOV.W   R1,#SEG( _Calibration+33 )
003BBA 9908rrrr       15138         MOV.W   R0,#SOF( _Calibration+33 )
003BBE 99680020       15139         MOV.W   R6,#020H
003BC2 8935           15140         MOV.W   R3,R5
003BC4 8924           15141         MOV.W   R2,R4
                      15142         CALL    _strncpy
003BC6 C4rrrrrr       +15142 ;       FCALL   _strncpy
                      15143 ; rs232cmd.c 4264       
                      15144 ; rs232cmd.c 4265                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003BCA 9918rrrr       15146         MOV.W   R1,#SEG( _Calibration )
003BCE 9908rrrr       15147         MOV.W   R0,#SOF( _Calibration )
003BD2 964842rr       15148         MOV.B   ES,#SEG( _CalibrationPtr )
003BD6 9928rrrr       15149         MOV.W   R2,#SOF( _CalibrationPtr )
003BDA 8A22           15150         MOV.W   R2,[R2]
003BDC 993800E0       15151         MOV.W   R3,#0E0H
                      15152         CALL    _NV_Store
003BE0 C4rrrrrr       +15152 ;       FCALL   _NV_Store
                      15153 ; rs232cmd.c 4266                                       }
                      15154 ; rs232cmd.c 4267                               }
                      15155 ; rs232cmd.c 4268                       }
                      15156 ; rs232cmd.c 4269               }
003BE4                15158 _1072:
                      15159 ; rs232cmd.c 4270       }
003BE4 99700022       15161         ADD.W   R7,#022H
003BE8 2F70           15163         POP.W   R4, R5, R6
003BEA D680           15165         RET
                      15167 ; rs232cmd.c 4271       
                      15168 ; rs232cmd.c 4272       /************************************************************************
                            **/
                      15169 ; rs232cmd.c 4273       /* FactMainIDNNumber                                                     
                                                                                                                         RS23
                            2CMD.C  */
                      15170 ; rs232cmd.c 4274       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15171 ; rs232cmd.c 4275       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 247

ADDR   CODE            LINE SOURCELINE
                      15172 ; rs232cmd.c 4276       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      15173 ; rs232cmd.c 4277       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15174 ; rs232cmd.c 4278       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15175 ; rs232cmd.c 4279       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15176 ; rs232cmd.c 4280       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15177 ; rs232cmd.c 4281       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15178 ; rs232cmd.c 4282       /************************************************************************
                            **/
                      15179 ; rs232cmd.c 4283       void FactMainIDNKUNumber( void)
                      15180 ; rs232cmd.c 4284       {
                      15181         ALIGN   1
                      15183         PUBLIC  _FactMainIDNKUNumber
003BEC                15184 _FactMainIDNKUNumber:
003BEC 0F70           15188         PUSH.W  R4, R5, R6
003BEE 9972000A       15190         SUB.W   R7,#0AH
                      15194 ; rs232cmd.c 4285               char KUNumber[9];
                      15195 ; rs232cmd.c 4286       
                      15196 ; rs232cmd.c 4287               if ( CmdExecute && !SCPIError)
003BF2 964842rr       15198         MOV.B   ES,#SEG( _CmdExecute )
003BF6 9908rrrr       15199         MOV.W   R0,#SOF( _CmdExecute )
003BFA 8200           15200         MOV.B   R0L,[R0]
003BFC F364           15201         BEQ     _1085
003BFE 964842rr       15202         MOV.B   ES,#SEG( _SCPIError )
003C02 9908rrrr       15203         MOV.W   R0,#SOF( _SCPIError )
003C06 8A00           15204         MOV.W   R0,[R0]
003C08 F25E           15205         BNE     _1085
                      15206 ; rs232cmd.c 4288               {
                      15207 ; rs232cmd.c 4289                       if ( CmdRequest)
003C0A 964842rr       15209         MOV.B   ES,#SEG( _CmdRequest )
003C0E 9908rrrr       15210         MOV.W   R0,#SOF( _CmdRequest )
003C12 8200           15211         MOV.B   R0L,[R0]
003C14 F317           15212         BEQ     _1077
                      15213 ; rs232cmd.c 4290                       {
                      15214 ; rs232cmd.c 4291                               if ( ParCnt)
003C16 964842rr       15216         MOV.B   ES,#SEG( _ParCnt )
003C1A 9908rrrr       15217         MOV.W   R0,#SOF( _ParCnt )
003C1E 8200           15218         MOV.B   R0L,[R0]
003C20 F306           15219         BEQ     _1076
                      15220 ; rs232cmd.c 4292                                       SCPIError = SyntaxErr;
003C22 964842rr       15222         MOV.B   ES,#SEG( _SCPIError )
003C26 9908rrrr       15223         MOV.W   R0,#SOF( _SCPIError )
003C2A BA03           15224         MOV.W   [R0],#03H
003C2C FE4C           15225         BR      _1085
003C2C FE4C           15225         BR      _1085
003C2E                15226 _1076:
                      15227 ; rs232cmd.c 4293                               else
                      15228 ; rs232cmd.c 4294                               {
                      15229 ; rs232cmd.c 4295                                       rs232puts( Calibration.KUNumber);
003C2E 9918rrrr       15231         MOV.W   R1,#SEG( _Calibration+66 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 248

ADDR   CODE            LINE SOURCELINE
003C32 9908rrrr       15232         MOV.W   R0,#SOF( _Calibration+66 )
                      15233         CALL    _rs232puts
003C36 C4rrrrrr       +15233 ;       FCALL   _rs232puts
                      15234 ; rs232cmd.c 4296                                       rs232putchar( '\n');
003C3A 91080A         15236         MOV.B   R0L,#0AH
                      15237         CALL    _rs232putchar
003C3D C4rrrrrr       +15237 ;       FCALL   _rs232putchar
                      15238 ; rs232cmd.c 4297                               }
                      15239 ; rs232cmd.c 4298                       }
003C41 FE42           15241         BR      _1085
003C41 FE4200         15241         BR      _1085
003C44                15242 _1077:
                      15243 ; rs232cmd.c 4299                       else
                      15244 ; rs232cmd.c 4300                       {
                      15245 ; rs232cmd.c 4301                               if ( !PasswordProtected)
003C44 964842rr       15247         MOV.B   ES,#SEG( _PasswordProtected )
003C48 9908rrrr       15248         MOV.W   R0,#SOF( _PasswordProtected )
003C4C 8A00           15249         MOV.W   R0,[R0]
003C4E F23B           15250         BNE     _1085
                      15251 ; rs232cmd.c 4302                               {
                      15252 ; rs232cmd.c 4303                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%8s
                            ", KUNumber) != 1))
003C50 964842rr       15254         MOV.B   ES,#SEG( _ParCnt )
003C54 9908rrrr       15255         MOV.W   R0,#SOF( _ParCnt )
003C58 8200           15256         MOV.B   R0L,[R0]
003C5A 910401         15257         CMP.B   R0L,#01H
003C5D F217           15258         BNE     _1078
003C5F 9918rrrr       15259         MOV.W   R1,#SEG( _Cmd )
003C63 9908rrrr       15260         MOV.W   R0,#SOF( _Cmd )
003C67 91A8rr         15261         MOV.B   R5L,#SEG( __lc_bs )
003C6A 71BB           15262         XOR.B   R5H,R5H
003C6C 8947           15263         MOV.W   R4,R7
003C6E 8935           15264         MOV.W   R3,R5
003C70 8924           15265         MOV.W   R2,R4
003C72 0F0C           15266         PUSH.W  R2, R3
003C74 9938rrrr       15268         MOV.W   R3,#SEG( _1075 )
003C78 9928rrrr       15269         MOV.W   R2,#SOF( _1075 )
003C7C 0F0C           15270         PUSH.W  R2, R3
                      15272         CALL    _sscanf
003C7E C4rrrrrr       +15272 ;       FCALL   _sscanf
003C82 99700008       15273         ADD.W   R7,#08H
003C86 99040001       15275         CMP.W   R0,#01H
003C8A F306           15276         BEQ     _1079
003C8A F306           15276         BEQ     _1079
003C8C                15277 _1078:
                      15278 ; rs232cmd.c 4304                                               SCPIError = SyntaxErr;
003C8C 964842rr       15280         MOV.B   ES,#SEG( _SCPIError )
003C90 9908rrrr       15281         MOV.W   R0,#SOF( _SCPIError )
003C94 BA03           15282         MOV.W   [R0],#03H
003C96 FE17           15283         BR      _1085
003C96 FE17           15283         BR      _1085
003C98                15284 _1079:
                      15285 ; rs232cmd.c 4305                                       else
                      15286 ; rs232cmd.c 4306                                       {
                      15287 ; rs232cmd.c 4307                                               strncpy( Calibration.KUNumber, KU
                            Number, 9);
003C98 9918rrrr       15289         MOV.W   R1,#SEG( _Calibration+66 )
003C9C 9908rrrr       15290         MOV.W   R0,#SOF( _Calibration+66 )
003CA0 99680009       15291         MOV.W   R6,#09H
003CA4 8935           15292         MOV.W   R3,R5
003CA6 8924           15293         MOV.W   R2,R4
                      15294         CALL    _strncpy
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 249

ADDR   CODE            LINE SOURCELINE
003CA8 C4rrrrrr       +15294 ;       FCALL   _strncpy
                      15295 ; rs232cmd.c 4308       
                      15296 ; rs232cmd.c 4309                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003CAC 9918rrrr       15298         MOV.W   R1,#SEG( _Calibration )
003CB0 9908rrrr       15299         MOV.W   R0,#SOF( _Calibration )
003CB4 964842rr       15300         MOV.B   ES,#SEG( _CalibrationPtr )
003CB8 9928rrrr       15301         MOV.W   R2,#SOF( _CalibrationPtr )
003CBC 8A22           15302         MOV.W   R2,[R2]
003CBE 993800E0       15303         MOV.W   R3,#0E0H
                      15304         CALL    _NV_Store
003CC2 C4rrrrrr       +15304 ;       FCALL   _NV_Store
                      15305 ; rs232cmd.c 4310                                       }
                      15306 ; rs232cmd.c 4311                               }
                      15307 ; rs232cmd.c 4312                       }
                      15308 ; rs232cmd.c 4313               }
003CC6                15310 _1085:
                      15311 ; rs232cmd.c 4314       }
003CC6 9970000A       15313         ADD.W   R7,#0AH
003CCA 2F70           15315         POP.W   R4, R5, R6
003CCC D680           15317         RET
                      15319 ; rs232cmd.c 4315       
                      15320 ; rs232cmd.c 4316       /************************************************************************
                            **/
                      15321 ; rs232cmd.c 4317       /* FactMainIDNSWRevision                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      15322 ; rs232cmd.c 4318       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15323 ; rs232cmd.c 4319       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15324 ; rs232cmd.c 4320       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      15325 ; rs232cmd.c 4321       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15326 ; rs232cmd.c 4322       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15327 ; rs232cmd.c 4323       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15328 ; rs232cmd.c 4324       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15329 ; rs232cmd.c 4325       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15330 ; rs232cmd.c 4326       /************************************************************************
                            **/
                      15331 ; rs232cmd.c 4327       void FactMainIDNSWRevision( void)
                      15332 ; rs232cmd.c 4328       {
                      15333         ALIGN   1
                      15335         PUBLIC  _FactMainIDNSWRevision
003CCE                15336 _FactMainIDNSWRevision:
003CCE 0F70           15340         PUSH.W  R4, R5, R6
003CD0 9972000A       15342         SUB.W   R7,#0AH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 250

ADDR   CODE            LINE SOURCELINE
                      15345 ; rs232cmd.c 4329               char SWRevision[9];
                      15346 ; rs232cmd.c 4330       
                      15347 ; rs232cmd.c 4331               if ( CmdExecute && !SCPIError)
003CD4 964842rr       15349         MOV.B   ES,#SEG( _CmdExecute )
003CD8 9908rrrr       15350         MOV.W   R0,#SOF( _CmdExecute )
003CDC 8200           15351         MOV.B   R0L,[R0]
003CDE F364           15352         BEQ     _1097
003CE0 964842rr       15353         MOV.B   ES,#SEG( _SCPIError )
003CE4 9908rrrr       15354         MOV.W   R0,#SOF( _SCPIError )
003CE8 8A00           15355         MOV.W   R0,[R0]
003CEA F25E           15356         BNE     _1097
                      15357 ; rs232cmd.c 4332               {
                      15358 ; rs232cmd.c 4333                       if ( CmdRequest)
003CEC 964842rr       15360         MOV.B   ES,#SEG( _CmdRequest )
003CF0 9908rrrr       15361         MOV.W   R0,#SOF( _CmdRequest )
003CF4 8200           15362         MOV.B   R0L,[R0]
003CF6 F317           15363         BEQ     _1089
                      15364 ; rs232cmd.c 4334                       {
                      15365 ; rs232cmd.c 4335                               if ( ParCnt)
003CF8 964842rr       15367         MOV.B   ES,#SEG( _ParCnt )
003CFC 9908rrrr       15368         MOV.W   R0,#SOF( _ParCnt )
003D00 8200           15369         MOV.B   R0L,[R0]
003D02 F306           15370         BEQ     _1088
                      15371 ; rs232cmd.c 4336                                       SCPIError = SyntaxErr;
003D04 964842rr       15373         MOV.B   ES,#SEG( _SCPIError )
003D08 9908rrrr       15374         MOV.W   R0,#SOF( _SCPIError )
003D0C BA03           15375         MOV.W   [R0],#03H
003D0E FE4C           15376         BR      _1097
003D0E FE4C           15376         BR      _1097
003D10                15377 _1088:
                      15378 ; rs232cmd.c 4337                               else
                      15379 ; rs232cmd.c 4338                               {
                      15380 ; rs232cmd.c 4339                                       rs232puts( Calibration.SWRevision);
003D10 9918rrrr       15382         MOV.W   R1,#SEG( _Calibration+75 )
003D14 9908rrrr       15383         MOV.W   R0,#SOF( _Calibration+75 )
                      15384         CALL    _rs232puts
003D18 C4rrrrrr       +15384 ;       FCALL   _rs232puts
                      15385 ; rs232cmd.c 4340                                       rs232putchar( '\n');
003D1C 91080A         15387         MOV.B   R0L,#0AH
                      15388         CALL    _rs232putchar
003D1F C4rrrrrr       +15388 ;       FCALL   _rs232putchar
                      15389 ; rs232cmd.c 4341                               }
                      15390 ; rs232cmd.c 4342                       }
003D23 FE42           15392         BR      _1097
003D23 FE4200         15392         BR      _1097
003D26                15393 _1089:
                      15394 ; rs232cmd.c 4343                       else
                      15395 ; rs232cmd.c 4344                       {
                      15396 ; rs232cmd.c 4345                               if ( !PasswordProtected)
003D26 964842rr       15398         MOV.B   ES,#SEG( _PasswordProtected )
003D2A 9908rrrr       15399         MOV.W   R0,#SOF( _PasswordProtected )
003D2E 8A00           15400         MOV.W   R0,[R0]
003D30 F23B           15401         BNE     _1097
                      15402 ; rs232cmd.c 4346                               {
                      15403 ; rs232cmd.c 4347                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%8s
                            ", SWRevision) != 1))
003D32 964842rr       15405         MOV.B   ES,#SEG( _ParCnt )
003D36 9908rrrr       15406         MOV.W   R0,#SOF( _ParCnt )
003D3A 8200           15407         MOV.B   R0L,[R0]
003D3C 910401         15408         CMP.B   R0L,#01H
003D3F F217           15409         BNE     _1090
003D41 9918rrrr       15410         MOV.W   R1,#SEG( _Cmd )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 251

ADDR   CODE            LINE SOURCELINE
003D45 9908rrrr       15411         MOV.W   R0,#SOF( _Cmd )
003D49 91A8rr         15412         MOV.B   R5L,#SEG( __lc_bs )
003D4C 71BB           15413         XOR.B   R5H,R5H
003D4E 8947           15414         MOV.W   R4,R7
003D50 8935           15415         MOV.W   R3,R5
003D52 8924           15416         MOV.W   R2,R4
003D54 0F0C           15417         PUSH.W  R2, R3
003D56 9938rrrr       15419         MOV.W   R3,#SEG( _1075 )
003D5A 9928rrrr       15420         MOV.W   R2,#SOF( _1075 )
003D5E 0F0C           15421         PUSH.W  R2, R3
                      15423         CALL    _sscanf
003D60 C4rrrrrr       +15423 ;       FCALL   _sscanf
003D64 99700008       15424         ADD.W   R7,#08H
003D68 99040001       15426         CMP.W   R0,#01H
003D6C F306           15427         BEQ     _1091
003D6C F306           15427         BEQ     _1091
003D6E                15428 _1090:
                      15429 ; rs232cmd.c 4348                                               SCPIError = SyntaxErr;
003D6E 964842rr       15431         MOV.B   ES,#SEG( _SCPIError )
003D72 9908rrrr       15432         MOV.W   R0,#SOF( _SCPIError )
003D76 BA03           15433         MOV.W   [R0],#03H
003D78 FE17           15434         BR      _1097
003D78 FE17           15434         BR      _1097
003D7A                15435 _1091:
                      15436 ; rs232cmd.c 4349                                       else
                      15437 ; rs232cmd.c 4350                                       {
                      15438 ; rs232cmd.c 4351                                               strncpy( Calibration.SWRevision, 
                            SWRevision, 8);
003D7A 9918rrrr       15440         MOV.W   R1,#SEG( _Calibration+75 )
003D7E 9908rrrr       15441         MOV.W   R0,#SOF( _Calibration+75 )
003D82 99680008       15442         MOV.W   R6,#08H
003D86 8935           15443         MOV.W   R3,R5
003D88 8924           15444         MOV.W   R2,R4
                      15445         CALL    _strncpy
003D8A C4rrrrrr       +15445 ;       FCALL   _strncpy
                      15446 ; rs232cmd.c 4352       
                      15447 ; rs232cmd.c 4353                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003D8E 9918rrrr       15449         MOV.W   R1,#SEG( _Calibration )
003D92 9908rrrr       15450         MOV.W   R0,#SOF( _Calibration )
003D96 964842rr       15451         MOV.B   ES,#SEG( _CalibrationPtr )
003D9A 9928rrrr       15452         MOV.W   R2,#SOF( _CalibrationPtr )
003D9E 8A22           15453         MOV.W   R2,[R2]
003DA0 993800E0       15454         MOV.W   R3,#0E0H
                      15455         CALL    _NV_Store
003DA4 C4rrrrrr       +15455 ;       FCALL   _NV_Store
                      15456 ; rs232cmd.c 4354                                       }
                      15457 ; rs232cmd.c 4355                               }
                      15458 ; rs232cmd.c 4356                       }
                      15459 ; rs232cmd.c 4357               }
003DA8                15461 _1097:
                      15462 ; rs232cmd.c 4358       }
003DA8 9970000A       15464         ADD.W   R7,#0AH
003DAC 2F70           15466         POP.W   R4, R5, R6
003DAE D680           15468         RET
                      15470 ; rs232cmd.c 4359       
                      15471 ; rs232cmd.c 4360       /************************************************************************
                            **/
                      15472 ; rs232cmd.c 4361       /* FactMainSystem                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      15473 ; rs232cmd.c 4362       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 252

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                      15474 ; rs232cmd.c 4363       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                      15475 ; rs232cmd.c 4364       /* Revised:       000617                                                 
                                                                                                                             
                                                                                    */
                      15476 ; rs232cmd.c 4365       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15477 ; rs232cmd.c 4366       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15478 ; rs232cmd.c 4367       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15479 ; rs232cmd.c 4368       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15480 ; rs232cmd.c 4369       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15481 ; rs232cmd.c 4370       /************************************************************************
                            **/
                      15482 ; rs232cmd.c 4371       void FactMainSystem( void)
                      15483 ; rs232cmd.c 4372       {
                      15484         ALIGN   1
                      15486         PUBLIC  _FactMainSystem
003DB0                15487 _FactMainSystem:
003DB0 0F30           15491         PUSH.W  R4, R5
                      15497 ; rs232cmd.c 4373               int system;
                      15498 ; rs232cmd.c 4374               char code *str;
                      15499 ; rs232cmd.c 4375       
                      15500 ; rs232cmd.c 4376               if ( CmdExecute && !SCPIError)
003DB2 964842rr       15502         MOV.B   ES,#SEG( _CmdExecute )
003DB6 9908rrrr       15503         MOV.W   R0,#SOF( _CmdExecute )
003DBA 8200           15504         MOV.B   R0L,[R0]
                      15505         BEQ     _1113
003DBC F202           +15505 ;       BNE     _LG_1046
003DBE D5008C         +15505 ;       JMP.L   _1113
003DC2 D5008C00       +15505 ;       JMP.L   _1113
003DC2                +15505 _LG_1046:
003DC2 964842rr       15506         MOV.B   ES,#SEG( _SCPIError )
003DC6 9908rrrr       15507         MOV.W   R0,#SOF( _SCPIError )
003DCA 8A00           15508         MOV.W   R0,[R0]
                      15509         BNE     _1113
003DCC F302           +15509 ;       BEQ     _LG_1048
003DCE D50084         +15509 ;       JMP.L   _1113
003DD2 D5008400       +15509 ;       JMP.L   _1113
003DD2                +15509 _LG_1048:
                      15510 ; rs232cmd.c 4377               {
                      15511 ; rs232cmd.c 4378                       if ( CmdRequest)
003DD2 964842rr       15513         MOV.B   ES,#SEG( _CmdRequest )
003DD6 9908rrrr       15514         MOV.W   R0,#SOF( _CmdRequest )
003DDA 8200           15515         MOV.B   R0L,[R0]
003DDC F33F           15516         BEQ     _1103
                      15517 ; rs232cmd.c 4379                       {
                      15518 ; rs232cmd.c 4380                               if ( ParCnt)
003DDE 964842rr       15520         MOV.B   ES,#SEG( _ParCnt )
003DE2 9908rrrr       15521         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 253

ADDR   CODE            LINE SOURCELINE
003DE6 8200           15522         MOV.B   R0L,[R0]
003DE8 F306           15523         BEQ     _1100
                      15524 ; rs232cmd.c 4381                                       SCPIError = ParNotAllowed;
003DEA 964842rr       15526         MOV.B   ES,#SEG( _SCPIError )
003DEE 9908rrrr       15527         MOV.W   R0,#SOF( _SCPIError )
003DF2 BA06           15528         MOV.W   [R0],#06H
003DF4 FE71           15529         BR      _1113
003DF4 FE71           15529         BR      _1113
003DF6                15530 _1100:
                      15531 ; rs232cmd.c 4382                               else
                      15532 ; rs232cmd.c 4383                               {
                      15533 ; rs232cmd.c 4384                                       str = SystemPar[Calibration.ResetSystem].
                            LongName;
003DF6 964842rr       15535         MOV.B   ES,#SEG( _Calibration+97 )
003DFA 9908rrrr       15536         MOV.W   R0,#SOF( _Calibration+97 )
003DFE 8200           15537         MOV.B   R0L,[R0]
003E00 E8000C         15538         MULU.B  R0L,#0CH
003E03 8920           15539         MOV.W   R2,R0
003E05 B930           15540         MOVS.W  R3,#00H
003E07 9918rrrr       15541         MOV.W   R1,#SEG( _SystemPar )
003E0B 9908rrrr       15542         MOV.W   R0,#SOF( _SystemPar )
003E0F 0902           15543         ADD.W   R0,R2
003E11 1913           15544         ADDC.W  R1,R3
003E13 862C43         15545         MOV.B   CS,R1L
003E16 8820           15546         MOVC.W  R2,[R0+]
003E18 99040000       15547         CMP.W   R0,#00H
003E1C F202           15548         BNE     _1114
003E1E A64143         15549         ADDS.B  CS,#01H
003E1E A6414300       15549         ADDS.B  CS,#01H
003E22                15550 _1114:
003E22 8830           15551         MOVC.W  R3,[R0+]
003E24 8953           15552         MOV.W   R5,R3
003E26 8942           15553         MOV.W   R4,R2
                      15555 ; rs232cmd.c 4385       
                      15556 ; rs232cmd.c 4386                                       while ( *str)
003E28 866C43         15558         MOV.B   CS,R3L
003E2B 8062           15559         MOVC.B  R3L,[R2+]
003E2D F312           15560         BEQ     _1102
003E2D F31200         15560         BEQ     _1102
003E30                15561 _1101:
                      15562 ; rs232cmd.c 4387                                               rs232putchar( *str++);
003E30 8915           15564         MOV.W   R1,R5
003E32 8904           15565         MOV.W   R0,R4
003E34 862C43         15566         MOV.B   CS,R1L
003E37 8020           15567         MOVC.B  R1L,[R0+]
003E39 8102           15568         MOV.B   R0L,R1L
                      15569         CALL    _rs232putchar
003E3B C4rrrrrr       +15569 ;       FCALL   _rs232putchar
003E3F 99400001       15570         ADD.W   R4,#01H
003E43 99510000       15571         ADDC.W  R5,#00H
003E47 8915           15575         MOV.W   R1,R5
003E49 8904           15576         MOV.W   R0,R4
003E4B 862C43         15577         MOV.B   CS,R1L
003E4E 8020           15578         MOVC.B  R1L,[R0+]
003E50 F2EF           15579         BNE     _1101
003E52                15581 _1102:
                      15582 ; rs232cmd.c 4388       
                      15583 ; rs232cmd.c 4389                                       rs232putchar('\n');
003E52 91080A         15585         MOV.B   R0L,#0AH
                      15586         CALL    _rs232putchar
003E55 C4rrrrrr       +15586 ;       FCALL   _rs232putchar
                      15587 ; rs232cmd.c 4390                               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 254

ADDR   CODE            LINE SOURCELINE
                      15588 ; rs232cmd.c 4391                       }
003E59 FE3F           15590         BR      _1113
003E59 FE3F00         15590         BR      _1113
003E5C                15591 _1103:
                      15592 ; rs232cmd.c 4392                       else
                      15593 ; rs232cmd.c 4393                       {
                      15594 ; rs232cmd.c 4394                               if ( ParCnt != 1)
003E5C 964842rr       15596         MOV.B   ES,#SEG( _ParCnt )
003E60 9908rrrr       15597         MOV.W   R0,#SOF( _ParCnt )
003E64 8200           15598         MOV.B   R0L,[R0]
003E66 910401         15599         CMP.B   R0L,#01H
003E69 F307           15600         BEQ     _1104
                      15601 ; rs232cmd.c 4395                                       SCPIError = SyntaxErr;
003E6B 964842rr       15603         MOV.B   ES,#SEG( _SCPIError )
003E6F 9908rrrr       15604         MOV.W   R0,#SOF( _SCPIError )
003E73 BA03           15605         MOV.W   [R0],#03H
003E75 FE31           15606         BR      _1113
003E75 FE3100         15606         BR      _1113
003E78                15607 _1104:
                      15608 ; rs232cmd.c 4396                               else
                      15609 ; rs232cmd.c 4397                               {
                      15610 ; rs232cmd.c 4398                                       system = FindParameter( Cmd, SystemPar);
003E78 9918rrrr       15612         MOV.W   R1,#SEG( _Cmd )
003E7C 9908rrrr       15613         MOV.W   R0,#SOF( _Cmd )
003E80 9938rrrr       15614         MOV.W   R3,#SEG( _SystemPar )
003E84 9928rrrr       15615         MOV.W   R2,#SOF( _SystemPar )
003E88 C5107B         15616         CALL    _FindParameter
                      15618 ; rs232cmd.c 4399       
                      15619 ; rs232cmd.c 4400                                       if ( system == PAL_PALID)                
                                                            // If line7, (PAL w/ID), ever should
003E8B 99040001       15621         CMP.W   R0,#01H
003E8F F208           15622         BNE     _1105
                      15623 ; rs232cmd.c 4401                                               SCPIError = DataOutOfRange;      
                                                    //  be supported remove this exception
003E91 964842rr       15625         MOV.B   ES,#SEG( _SCPIError )
003E95 9908rrrr       15626         MOV.W   R0,#SOF( _SCPIError )
003E99 9A080021       15627         MOV.W   [R0],#021H
003E9D FE1D           15628         BR      _1113
003E9D FE1D00         15628         BR      _1113
003EA0                15629 _1105:
                      15631 ; rs232cmd.c 4402                                       else                                     
                                    
                      15632 ; rs232cmd.c 4403                                       {       
                      15633 ; rs232cmd.c 4404                                               if ( system > -1)
003EA0 9904FFFF       15635         CMP.W   R0,#0FFFFH
003EA4 FD13           15636         BLE     _1106
                      15637 ; rs232cmd.c 4405                                               {
                      15638 ; rs232cmd.c 4406                                                       Calibration.ResetSystem =
                             system;
003EA6 964842rr       15640         MOV.B   ES,#SEG( _Calibration+97 )
003EAA 9918rrrr       15641         MOV.W   R1,#SOF( _Calibration+97 )
003EAE 8209           15642         MOV.B   [R1],R0L
                      15643 ; rs232cmd.c 4407       
                      15644 ; rs232cmd.c 4408                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
003EB0 9918rrrr       15646         MOV.W   R1,#SEG( _Calibration )
003EB4 9908rrrr       15647         MOV.W   R0,#SOF( _Calibration )
003EB8 964842rr       15648         MOV.B   ES,#SEG( _CalibrationPtr )
003EBC 9928rrrr       15649         MOV.W   R2,#SOF( _CalibrationPtr )
003EC0 8A22           15650         MOV.W   R2,[R2]
003EC2 993800E0       15651         MOV.W   R3,#0E0H
                      15652         CALL    _NV_Store
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 255

ADDR   CODE            LINE SOURCELINE
003EC6 C4rrrrrr       +15652 ;       FCALL   _NV_Store
                      15653 ; rs232cmd.c 4409                                               }
003ECA FE06           15655         BR      _1113
003ECA FE06           15655         BR      _1113
003ECC                15656 _1106:
                      15657 ; rs232cmd.c 4410                                               else
                      15658 ; rs232cmd.c 4411                                                       SCPIError = DataOutOfRang
                            e;
003ECC 964842rr       15660         MOV.B   ES,#SEG( _SCPIError )
003ED0 9908rrrr       15661         MOV.W   R0,#SOF( _SCPIError )
003ED4 9A080021       15662         MOV.W   [R0],#021H
                      15663 ; rs232cmd.c 4412                                       }
                      15664 ; rs232cmd.c 4413                               }
                      15665 ; rs232cmd.c 4414                       }
                      15666 ; rs232cmd.c 4415               }
003ED8                15668 _1113:
                      15669 ; rs232cmd.c 4416       }
003ED8 2F30           15671         POP.W   R4, R5
003EDA D680           15673         RET
                      15676 ; rs232cmd.c 4417       
                      15677 ; rs232cmd.c 4418       /************************************************************************
                            **/
                      15678 ; rs232cmd.c 4419       /* FactMainFMSDateProd                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      15679 ; rs232cmd.c 4420       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15680 ; rs232cmd.c 4421       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15681 ; rs232cmd.c 4422       /* Revised:       0006014                                                
                                                                                                                             
                                                                                    */
                      15682 ; rs232cmd.c 4423       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15683 ; rs232cmd.c 4424       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15684 ; rs232cmd.c 4425       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15685 ; rs232cmd.c 4426       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15686 ; rs232cmd.c 4427       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15687 ; rs232cmd.c 4428       /************************************************************************
                            **/
                      15688 ; rs232cmd.c 4429       void FactMainFMSDateProd( void)
                      15689 ; rs232cmd.c 4430       {
                      15690         ALIGN   1
                      15692         PUBLIC  _FactMainFMSDateProd
003EDC                15693 _FactMainFMSDateProd:
003EDC 0F30           15697         PUSH.W  R4, R5
003EDE 9972001A       15699         SUB.W   R7,#01AH
                      15705 ; rs232cmd.c 4431               UI year, month, day;
                      15706 ; rs232cmd.c 4432               char buffer[20];
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 256

ADDR   CODE            LINE SOURCELINE
                      15707 ; rs232cmd.c 4433       
                      15708 ; rs232cmd.c 4434               if ( CmdExecute && !SCPIError)
003EE2 964842rr       15710         MOV.B   ES,#SEG( _CmdExecute )
003EE6 9908rrrr       15711         MOV.W   R0,#SOF( _CmdExecute )
003EEA 8200           15712         MOV.B   R0L,[R0]
                      15713         BEQ     _1129
003EEC F202           +15713 ;       BNE     _LG_1066
003EEE D500C7         +15713 ;       JMP.L   _1129
003EF2 D500C700       +15713 ;       JMP.L   _1129
003EF2                +15713 _LG_1066:
003EF2 964842rr       15714         MOV.B   ES,#SEG( _SCPIError )
003EF6 9908rrrr       15715         MOV.W   R0,#SOF( _SCPIError )
003EFA 8A00           15716         MOV.W   R0,[R0]
                      15717         BNE     _1129
003EFC F302           +15717 ;       BEQ     _LG_1068
003EFE D500BF         +15717 ;       JMP.L   _1129
003F02 D500BF00       +15717 ;       JMP.L   _1129
003F02                +15717 _LG_1068:
                      15718 ; rs232cmd.c 4435               {
                      15719 ; rs232cmd.c 4436                       if ( CmdRequest)
003F02 964842rr       15721         MOV.B   ES,#SEG( _CmdRequest )
003F06 9908rrrr       15722         MOV.W   R0,#SOF( _CmdRequest )
003F0A 8200           15723         MOV.B   R0L,[R0]
003F0C F35A           15724         BEQ     _1119
                      15725 ; rs232cmd.c 4437                       {
                      15726 ; rs232cmd.c 4438                               if ( ParCnt)
003F0E 964842rr       15728         MOV.B   ES,#SEG( _ParCnt )
003F12 9908rrrr       15729         MOV.W   R0,#SOF( _ParCnt )
003F16 8200           15730         MOV.B   R0L,[R0]
003F18 F307           15731         BEQ     _1118
                      15732 ; rs232cmd.c 4439                                       SCPIError = SyntaxErr;
003F1A 964842rr       15734         MOV.B   ES,#SEG( _SCPIError )
003F1E 9908rrrr       15735         MOV.W   R0,#SOF( _SCPIError )
003F22 BA03           15736         MOV.W   [R0],#03H
                      15737         BR      _1129
003F24 D500AC         +15737         JMP.L   _1129
003F24 D500AC00       +15737         JMP.L   _1129
003F28                15738 _1118:
                      15739 ; rs232cmd.c 4440                               else
                      15740 ; rs232cmd.c 4441                               {
                      15741 ; rs232cmd.c 4442                                       day = Calibration.ProdDate % 100;
003F28 964842rr       15743         MOV.B   ES,#SEG( _Calibration+98 )
003F2C 9918rrrr       15744         MOV.W   R1,#SOF( _Calibration+98 )
003F30 8B01           15745         MOV.W   R0,[R1+]
003F32 8A11           15746         MOV.W   R1,[R1]
003F34 B930           15747         MOV.W   R3,#00H
003F36 99280064       15748         MOV.W   R2,#064H
003F3A 964842rr       15749         MOV.B   ES,#SEG( _Calibration+98 )
003F3E 9948rrrr       15750         MOV.W   R4,#SOF( _Calibration+98 )
003F42 8B0C           15751         MOV.W   [R4+],R0
003F44 8A1C           15752         MOV.W   [R4],R1
003F46 C4rrrrrr       15753         FCALL   __UMODL
003F4A 8C0F04         15754         MOV.W   [R7+4],R0
003F4D 964842rr       15755         MOV.B   ES,#SEG( _Calibration+98 )
003F51 9918rrrr       15756         MOV.W   R1,#SOF( _Calibration+98 )
003F55 8B01           15757         MOV.W   R0,[R1+]
003F57 8A11           15758         MOV.W   R1,[R1]
                      15759 ; rs232cmd.c 4443                                       month = ( Calibration.ProdDate / 100) % 1
                            00;
003F59 B930           15761         MOV.W   R3,#00H
003F5B 99280064       15762         MOV.W   R2,#064H
003F5F 8953           15763         MOV.W   R5,R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 257

ADDR   CODE            LINE SOURCELINE
003F61 8942           15764         MOV.W   R4,R2
003F63 C4rrrrrr       15765         FCALL   __UDIVL
003F67 8935           15766         MOV.W   R3,R5
003F69 8924           15767         MOV.W   R2,R4
003F6B C4rrrrrr       15768         FCALL   __UMODL
003F6F 8C0F02         15769         MOV.W   [R7+2],R0
                      15770 ; rs232cmd.c 4444                                       year = ( Calibration.ProdDate / 10000);
003F72 B930           15772         MOV.W   R3,#00H
003F74 99282710       15773         MOV.W   R2,#02710H
003F78 964842rr       15774         MOV.B   ES,#SEG( _Calibration+98 )
003F7C 9918rrrr       15775         MOV.W   R1,#SOF( _Calibration+98 )
003F80 8B01           15776         MOV.W   R0,[R1+]
003F82 8A11           15777         MOV.W   R1,[R1]
003F84 C4rrrrrr       15778         FCALL   __UDIVL
003F88 8A0F           15779         MOV.W   [R7],R0
                      15780 ; rs232cmd.c 4445       
                      15781 ; rs232cmd.c 4446                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
003F8A 91A8rr         15783         MOV.B   R5L,#SEG( __lc_bs )
003F8D 71BB           15784         XOR.B   R5H,R5H
003F8F 404706         15785         LEA     R4,R7+6
003F92 8C0704         15786         MOV.W   R0,[R7+4]
003F95 0F01           15787         PUSH.W  R0
003F97 8C0704         15789         MOV.W   R0,[R7+4]
003F9A 0F01           15790         PUSH.W  R0
003F9C 8C0704         15792         MOV.W   R0,[R7+4]
003F9F 0F01           15793         PUSH.W  R0
003FA1 9918rrrr       15795         MOV.W   R1,#SEG( _183 )
003FA5 9908rrrr       15796         MOV.W   R0,#SOF( _183 )
003FA9 0F03           15797         PUSH.W  R0, R1
003FAB 8915           15799         MOV.W   R1,R5
003FAD 8904           15800         MOV.W   R0,R4
                      15801         CALL    _sprintf
003FAF C4rrrrrr       +15801 ;       FCALL   _sprintf
003FB3 9970000A       15802         ADD.W   R7,#0AH
                      15804 ; rs232cmd.c 4447       
                      15805 ; rs232cmd.c 4448                                       rs232puts( buffer);
003FB7 8915           15807         MOV.W   R1,R5
003FB9 8904           15808         MOV.W   R0,R4
                      15809         CALL    _rs232puts
003FBB C4rrrrrr       +15809 ;       FCALL   _rs232puts
                      15810 ; rs232cmd.c 4449                               }
                      15811 ; rs232cmd.c 4450                       }
003FBF FE5F           15813         BR      _1129
003FBF FE5F00         15813         BR      _1129
003FC2                15814 _1119:
                      15815 ; rs232cmd.c 4451                       else
                      15816 ; rs232cmd.c 4452                       {
                      15817 ; rs232cmd.c 4453                               if ( !PasswordProtected)
003FC2 964842rr       15819         MOV.B   ES,#SEG( _PasswordProtected )
003FC6 9908rrrr       15820         MOV.W   R0,#SOF( _PasswordProtected )
003FCA 8A00           15821         MOV.W   R0,[R0]
003FCC F258           15822         BNE     _1129
                      15823 ; rs232cmd.c 4454                               {
                      15824 ; rs232cmd.c 4455                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
003FCE 964842rr       15826         MOV.B   ES,#SEG( _ParCnt )
003FD2 9908rrrr       15827         MOV.W   R0,#SOF( _ParCnt )
003FD6 8200           15828         MOV.B   R0L,[R0]
003FD8 910403         15829         CMP.B   R0L,#03H
003FDB F21F           15830         BNE     _1120
003FDD 9168rr         15831         MOV.B   R3L,#SEG( __lc_bs )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 258

ADDR   CODE            LINE SOURCELINE
003FE0 7177           15832         XOR.B   R3H,R3H
003FE2 8927           15833         MOV.W   R2,R7
003FE4 91A8rr         15834         MOV.B   R5L,#SEG( __lc_bs )
003FE7 71BB           15835         XOR.B   R5H,R5H
003FE9 404702         15836         LEA     R4,R7+2
003FEC 9128rr         15837         MOV.B   R1L,#SEG( __lc_bs )
003FEF 7133           15838         XOR.B   R1H,R1H
003FF1 400704         15839         LEA     R0,R7+4
003FF4 0F03           15840         PUSH.W  R0, R1
003FF6 0F30           15842         PUSH.W  R4, R5
003FF8 0F0C           15844         PUSH.W  R2, R3
003FFA 9938rrrr       15846         MOV.W   R3,#SEG( _184 )
003FFE 9928rrrr       15847         MOV.W   R2,#SOF( _184 )
004002 0F0C           15848         PUSH.W  R2, R3
004004 9918rrrr       15850         MOV.W   R1,#SEG( _Cmd )
004008 9908rrrr       15851         MOV.W   R0,#SOF( _Cmd )
                      15852         CALL    _sscanf
00400C C4rrrrrr       +15852 ;       FCALL   _sscanf
004010 99700010       15853         ADD.W   R7,#010H
004014 99040003       15855         CMP.W   R0,#03H
004018 F306           15856         BEQ     _1121
004018 F306           15856         BEQ     _1121
00401A                15857 _1120:
                      15858 ; rs232cmd.c 4456                                               SCPIError = SyntaxErr;
00401A 964842rr       15860         MOV.B   ES,#SEG( _SCPIError )
00401E 9908rrrr       15861         MOV.W   R0,#SOF( _SCPIError )
004022 BA03           15862         MOV.W   [R0],#03H
004024 FE2C           15863         BR      _1129
004024 FE2C           15863         BR      _1129
004026                15864 _1121:
                      15865 ; rs232cmd.c 4457                                       else
                      15866 ; rs232cmd.c 4458                                       {
                      15867 ; rs232cmd.c 4459                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
004026 8A07           15869         MOV.W   R0,[R7]
004028 8C1702         15870         MOV.W   R1,[R7+2]
00402B 8C2704         15871         MOV.W   R2,[R7+4]
                      15872         CALL    _ValidateDate
00402E C4rrrrrr       +15872 ;       FCALL   _ValidateDate
004032 6900           15873         OR.W    R0,R0
004034 F207           15874         BNE     _1122
                      15875 ; rs232cmd.c 4460                                                       SCPIError = ExecErr;
004036 964842rr       15877         MOV.B   ES,#SEG( _SCPIError )
00403A 9908rrrr       15878         MOV.W   R0,#SOF( _SCPIError )
00403E 9A08001D       15879         MOV.W   [R0],#01DH
004042 FE1D           15880         BR      _1129
004042 FE1D           15880         BR      _1129
004044                15881 _1122:
                      15882 ; rs232cmd.c 4461                                               else
                      15883 ; rs232cmd.c 4462                                               {
                      15884 ; rs232cmd.c 4463                                                       Calibration.ProdDate = da
                            y + 100*month + 10000*year;
004044 8C0702         15886         MOV.W   R0,[R7+2]
004047 E9000064       15887         MULU.W  R0,#064H
00404B 0C0704         15888         ADD.W   R0,[R7+4]
00404E 8A27           15889         MOV.W   R2,[R7]
004050 E9202710       15890         MULU.W  R2,#02710H
004054 0902           15891         ADD.W   R0,R2
004056 B910           15892         MOVS.W  R1,#00H
004058 964842rr       15893         MOV.B   ES,#SEG( _Calibration+98 )
00405C 9928rrrr       15894         MOV.W   R2,#SOF( _Calibration+98 )
004060 8B0A           15895         MOV.W   [R2+],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 259

ADDR   CODE            LINE SOURCELINE
004062 8A1A           15896         MOV.W   [R2],R1
                      15897 ; rs232cmd.c 4464                                               
                      15898 ; rs232cmd.c 4465                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
004064 9918rrrr       15900         MOV.W   R1,#SEG( _Calibration )
004068 9908rrrr       15901         MOV.W   R0,#SOF( _Calibration )
00406C 964842rr       15902         MOV.B   ES,#SEG( _CalibrationPtr )
004070 9928rrrr       15903         MOV.W   R2,#SOF( _CalibrationPtr )
004074 8A22           15904         MOV.W   R2,[R2]
004076 993800E0       15905         MOV.W   R3,#0E0H
                      15906         CALL    _NV_Store
00407A C4rrrrrr       +15906 ;       FCALL   _NV_Store
                      15907 ; rs232cmd.c 4466                                               }
                      15908 ; rs232cmd.c 4467                                       }                               
                      15909 ; rs232cmd.c 4468                               }
                      15910 ; rs232cmd.c 4469                       }
                      15911 ; rs232cmd.c 4470               }
00407E                15913 _1129:
                      15914 ; rs232cmd.c 4471       }
00407E 9970001A       15916         ADD.W   R7,#01AH
004082 2F30           15918         POP.W   R4, R5
004084 D680           15920         RET
                      15922 ; rs232cmd.c 4472       
                      15923 ; rs232cmd.c 4473       /************************************************************************
                            **/
                      15924 ; rs232cmd.c 4474       /* FactMainFMSDateUpd                                                    
                                                                                                                             
                                RS232CMD.C  */
                      15925 ; rs232cmd.c 4475       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15926 ; rs232cmd.c 4476       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15927 ; rs232cmd.c 4477       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      15928 ; rs232cmd.c 4478       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15929 ; rs232cmd.c 4479       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15930 ; rs232cmd.c 4480       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15931 ; rs232cmd.c 4481       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15932 ; rs232cmd.c 4482       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15933 ; rs232cmd.c 4483       /************************************************************************
                            **/
                      15934 ; rs232cmd.c 4484       void FactMainFMSDateUpd( void)
                      15935 ; rs232cmd.c 4485       {
                      15936         ALIGN   1
                      15938         PUBLIC  _FactMainFMSDateUpd
004086                15939 _FactMainFMSDateUpd:
004086 0F30           15943         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 260

ADDR   CODE            LINE SOURCELINE
004088 9972001A       15945         SUB.W   R7,#01AH
                      15951 ; rs232cmd.c 4486               UI year, month, day;
                      15952 ; rs232cmd.c 4487               char buffer[20];
                      15953 ; rs232cmd.c 4488       
                      15954 ; rs232cmd.c 4489               if ( CmdExecute && !SCPIError)
00408C 964842rr       15956         MOV.B   ES,#SEG( _CmdExecute )
004090 9908rrrr       15957         MOV.W   R0,#SOF( _CmdExecute )
004094 8200           15958         MOV.B   R0L,[R0]
                      15959         BEQ     _1143
004096 F202           +15959 ;       BNE     _LG_1082
004098 D500C7         +15959 ;       JMP.L   _1143
00409C D500C700       +15959 ;       JMP.L   _1143
00409C                +15959 _LG_1082:
00409C 964842rr       15960         MOV.B   ES,#SEG( _SCPIError )
0040A0 9908rrrr       15961         MOV.W   R0,#SOF( _SCPIError )
0040A4 8A00           15962         MOV.W   R0,[R0]
                      15963         BNE     _1143
0040A6 F302           +15963 ;       BEQ     _LG_1084
0040A8 D500BF         +15963 ;       JMP.L   _1143
0040AC D500BF00       +15963 ;       JMP.L   _1143
0040AC                +15963 _LG_1084:
                      15964 ; rs232cmd.c 4490               {
                      15965 ; rs232cmd.c 4491                       if ( CmdRequest)
0040AC 964842rr       15967         MOV.B   ES,#SEG( _CmdRequest )
0040B0 9908rrrr       15968         MOV.W   R0,#SOF( _CmdRequest )
0040B4 8200           15969         MOV.B   R0L,[R0]
0040B6 F35A           15970         BEQ     _1133
                      15971 ; rs232cmd.c 4492                       {
                      15972 ; rs232cmd.c 4493                               if ( ParCnt)
0040B8 964842rr       15974         MOV.B   ES,#SEG( _ParCnt )
0040BC 9908rrrr       15975         MOV.W   R0,#SOF( _ParCnt )
0040C0 8200           15976         MOV.B   R0L,[R0]
0040C2 F307           15977         BEQ     _1132
                      15978 ; rs232cmd.c 4494                                       SCPIError = SyntaxErr;
0040C4 964842rr       15980         MOV.B   ES,#SEG( _SCPIError )
0040C8 9908rrrr       15981         MOV.W   R0,#SOF( _SCPIError )
0040CC BA03           15982         MOV.W   [R0],#03H
                      15983         BR      _1143
0040CE D500AC         +15983         JMP.L   _1143
0040CE D500AC00       +15983         JMP.L   _1143
0040D2                15984 _1132:
                      15985 ; rs232cmd.c 4495                               else
                      15986 ; rs232cmd.c 4496                               {
                      15987 ; rs232cmd.c 4497                                       day = Calibration.UpdateDate % 100;
0040D2 964842rr       15989         MOV.B   ES,#SEG( _Calibration+102 )
0040D6 9918rrrr       15990         MOV.W   R1,#SOF( _Calibration+102 )
0040DA 8B01           15991         MOV.W   R0,[R1+]
0040DC 8A11           15992         MOV.W   R1,[R1]
0040DE B930           15993         MOV.W   R3,#00H
0040E0 99280064       15994         MOV.W   R2,#064H
0040E4 964842rr       15995         MOV.B   ES,#SEG( _Calibration+102 )
0040E8 9948rrrr       15996         MOV.W   R4,#SOF( _Calibration+102 )
0040EC 8B0C           15997         MOV.W   [R4+],R0
0040EE 8A1C           15998         MOV.W   [R4],R1
0040F0 C4rrrrrr       15999         FCALL   __UMODL
0040F4 8C0F04         16000         MOV.W   [R7+4],R0
0040F7 964842rr       16001         MOV.B   ES,#SEG( _Calibration+102 )
0040FB 9918rrrr       16002         MOV.W   R1,#SOF( _Calibration+102 )
0040FF 8B01           16003         MOV.W   R0,[R1+]
004101 8A11           16004         MOV.W   R1,[R1]
                      16005 ; rs232cmd.c 4498                                       month = ( Calibration.UpdateDate / 100) %
                             100;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 261

ADDR   CODE            LINE SOURCELINE
004103 B930           16007         MOV.W   R3,#00H
004105 99280064       16008         MOV.W   R2,#064H
004109 8953           16009         MOV.W   R5,R3
00410B 8942           16010         MOV.W   R4,R2
00410D C4rrrrrr       16011         FCALL   __UDIVL
004111 8935           16012         MOV.W   R3,R5
004113 8924           16013         MOV.W   R2,R4
004115 C4rrrrrr       16014         FCALL   __UMODL
004119 8C0F02         16015         MOV.W   [R7+2],R0
                      16016 ; rs232cmd.c 4499                                       year = ( Calibration.UpdateDate / 10000);
                            
00411C B930           16018         MOV.W   R3,#00H
00411E 99282710       16019         MOV.W   R2,#02710H
004122 964842rr       16020         MOV.B   ES,#SEG( _Calibration+102 )
004126 9918rrrr       16021         MOV.W   R1,#SOF( _Calibration+102 )
00412A 8B01           16022         MOV.W   R0,[R1+]
00412C 8A11           16023         MOV.W   R1,[R1]
00412E C4rrrrrr       16024         FCALL   __UDIVL
004132 8A0F           16025         MOV.W   [R7],R0
                      16026 ; rs232cmd.c 4500       
                      16027 ; rs232cmd.c 4501                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
004134 91A8rr         16029         MOV.B   R5L,#SEG( __lc_bs )
004137 71BB           16030         XOR.B   R5H,R5H
004139 404706         16031         LEA     R4,R7+6
00413C 8C0704         16032         MOV.W   R0,[R7+4]
00413F 0F01           16033         PUSH.W  R0
004141 8C0704         16035         MOV.W   R0,[R7+4]
004144 0F01           16036         PUSH.W  R0
004146 8C0704         16038         MOV.W   R0,[R7+4]
004149 0F01           16039         PUSH.W  R0
00414B 9918rrrr       16041         MOV.W   R1,#SEG( _183 )
00414F 9908rrrr       16042         MOV.W   R0,#SOF( _183 )
004153 0F03           16043         PUSH.W  R0, R1
004155 8915           16045         MOV.W   R1,R5
004157 8904           16046         MOV.W   R0,R4
                      16047         CALL    _sprintf
004159 C4rrrrrr       +16047 ;       FCALL   _sprintf
00415D 9970000A       16048         ADD.W   R7,#0AH
                      16050 ; rs232cmd.c 4502       
                      16051 ; rs232cmd.c 4503                                       rs232puts( buffer);
004161 8915           16053         MOV.W   R1,R5
004163 8904           16054         MOV.W   R0,R4
                      16055         CALL    _rs232puts
004165 C4rrrrrr       +16055 ;       FCALL   _rs232puts
                      16056 ; rs232cmd.c 4504                               }
                      16057 ; rs232cmd.c 4505                       }
004169 FE5F           16059         BR      _1143
004169 FE5F00         16059         BR      _1143
00416C                16060 _1133:
                      16061 ; rs232cmd.c 4506                       else
                      16062 ; rs232cmd.c 4507                       {
                      16063 ; rs232cmd.c 4508                               if ( !PasswordProtected)
00416C 964842rr       16065         MOV.B   ES,#SEG( _PasswordProtected )
004170 9908rrrr       16066         MOV.W   R0,#SOF( _PasswordProtected )
004174 8A00           16067         MOV.W   R0,[R0]
004176 F258           16068         BNE     _1143
                      16069 ; rs232cmd.c 4509                               {
                      16070 ; rs232cmd.c 4510                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
004178 964842rr       16072         MOV.B   ES,#SEG( _ParCnt )
00417C 9908rrrr       16073         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 262

ADDR   CODE            LINE SOURCELINE
004180 8200           16074         MOV.B   R0L,[R0]
004182 910403         16075         CMP.B   R0L,#03H
004185 F21F           16076         BNE     _1134
004187 9168rr         16077         MOV.B   R3L,#SEG( __lc_bs )
00418A 7177           16078         XOR.B   R3H,R3H
00418C 8927           16079         MOV.W   R2,R7
00418E 91A8rr         16080         MOV.B   R5L,#SEG( __lc_bs )
004191 71BB           16081         XOR.B   R5H,R5H
004193 404702         16082         LEA     R4,R7+2
004196 9128rr         16083         MOV.B   R1L,#SEG( __lc_bs )
004199 7133           16084         XOR.B   R1H,R1H
00419B 400704         16085         LEA     R0,R7+4
00419E 0F03           16086         PUSH.W  R0, R1
0041A0 0F30           16088         PUSH.W  R4, R5
0041A2 0F0C           16090         PUSH.W  R2, R3
0041A4 9938rrrr       16092         MOV.W   R3,#SEG( _184 )
0041A8 9928rrrr       16093         MOV.W   R2,#SOF( _184 )
0041AC 0F0C           16094         PUSH.W  R2, R3
0041AE 9918rrrr       16096         MOV.W   R1,#SEG( _Cmd )
0041B2 9908rrrr       16097         MOV.W   R0,#SOF( _Cmd )
                      16098         CALL    _sscanf
0041B6 C4rrrrrr       +16098 ;       FCALL   _sscanf
0041BA 99700010       16099         ADD.W   R7,#010H
0041BE 99040003       16101         CMP.W   R0,#03H
0041C2 F306           16102         BEQ     _1135
0041C2 F306           16102         BEQ     _1135
0041C4                16103 _1134:
                      16104 ; rs232cmd.c 4511                                               SCPIError = SyntaxErr;
0041C4 964842rr       16106         MOV.B   ES,#SEG( _SCPIError )
0041C8 9908rrrr       16107         MOV.W   R0,#SOF( _SCPIError )
0041CC BA03           16108         MOV.W   [R0],#03H
0041CE FE2C           16109         BR      _1143
0041CE FE2C           16109         BR      _1143
0041D0                16110 _1135:
                      16111 ; rs232cmd.c 4512                                       else
                      16112 ; rs232cmd.c 4513                                       {
                      16113 ; rs232cmd.c 4514                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
0041D0 8A07           16115         MOV.W   R0,[R7]
0041D2 8C1702         16116         MOV.W   R1,[R7+2]
0041D5 8C2704         16117         MOV.W   R2,[R7+4]
                      16118         CALL    _ValidateDate
0041D8 C4rrrrrr       +16118 ;       FCALL   _ValidateDate
0041DC 6900           16119         OR.W    R0,R0
0041DE F207           16120         BNE     _1136
                      16121 ; rs232cmd.c 4515                                                       SCPIError = ExecErr;
0041E0 964842rr       16123         MOV.B   ES,#SEG( _SCPIError )
0041E4 9908rrrr       16124         MOV.W   R0,#SOF( _SCPIError )
0041E8 9A08001D       16125         MOV.W   [R0],#01DH
0041EC FE1D           16126         BR      _1143
0041EC FE1D           16126         BR      _1143
0041EE                16127 _1136:
                      16128 ; rs232cmd.c 4516                                               else
                      16129 ; rs232cmd.c 4517                                               {
                      16130 ; rs232cmd.c 4518                                                       Calibration.UpdateDate = 
                            day + 100*month + 10000*year;
0041EE 8C0702         16132         MOV.W   R0,[R7+2]
0041F1 E9000064       16133         MULU.W  R0,#064H
0041F5 0C0704         16134         ADD.W   R0,[R7+4]
0041F8 8A27           16135         MOV.W   R2,[R7]
0041FA E9202710       16136         MULU.W  R2,#02710H
0041FE 0902           16137         ADD.W   R0,R2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 263

ADDR   CODE            LINE SOURCELINE
004200 B910           16138         MOVS.W  R1,#00H
004202 964842rr       16139         MOV.B   ES,#SEG( _Calibration+102 )
004206 9928rrrr       16140         MOV.W   R2,#SOF( _Calibration+102 )
00420A 8B0A           16141         MOV.W   [R2+],R0
00420C 8A1A           16142         MOV.W   [R2],R1
                      16143 ; rs232cmd.c 4519                                               
                      16144 ; rs232cmd.c 4520                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
00420E 9918rrrr       16146         MOV.W   R1,#SEG( _Calibration )
004212 9908rrrr       16147         MOV.W   R0,#SOF( _Calibration )
004216 964842rr       16148         MOV.B   ES,#SEG( _CalibrationPtr )
00421A 9928rrrr       16149         MOV.W   R2,#SOF( _CalibrationPtr )
00421E 8A22           16150         MOV.W   R2,[R2]
004220 993800E0       16151         MOV.W   R3,#0E0H
                      16152         CALL    _NV_Store
004224 C4rrrrrr       +16152 ;       FCALL   _NV_Store
                      16153 ; rs232cmd.c 4521                                               }
                      16154 ; rs232cmd.c 4522                                       }                               
                      16155 ; rs232cmd.c 4523                               }
                      16156 ; rs232cmd.c 4524                       }
                      16157 ; rs232cmd.c 4525               }
004228                16159 _1143:
                      16160 ; rs232cmd.c 4526       }
004228 9970001A       16162         ADD.W   R7,#01AH
00422C 2F30           16164         POP.W   R4, R5
00422E D680           16166         RET
                      16168 ; rs232cmd.c 4527       
                      16169 ; rs232cmd.c 4528       /************************************************************************
                            **/
                      16170 ; rs232cmd.c 4529       /* FactGenlockGenDate                                                    
                                                                                                                             
                                RS232CMD.C  */
                      16171 ; rs232cmd.c 4530       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16172 ; rs232cmd.c 4531       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      16173 ; rs232cmd.c 4532       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      16174 ; rs232cmd.c 4533       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16175 ; rs232cmd.c 4534       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16176 ; rs232cmd.c 4535       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16177 ; rs232cmd.c 4536       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16178 ; rs232cmd.c 4537       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16179 ; rs232cmd.c 4538       /************************************************************************
                            **/
                      16180 ; rs232cmd.c 4539       void FactGenlockGenDate( void)
                      16181 ; rs232cmd.c 4540       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 264

ADDR   CODE            LINE SOURCELINE
                      16182         ALIGN   1
                      16184         PUBLIC  _FactGenlockGenDate
004230                16185 _FactGenlockGenDate:
004230 0F30           16189         PUSH.W  R4, R5
004232 9972001A       16191         SUB.W   R7,#01AH
                      16197 ; rs232cmd.c 4541               UI year, month, day;
                      16198 ; rs232cmd.c 4542               char buffer[20];
                      16199 ; rs232cmd.c 4543       
                      16200 ; rs232cmd.c 4544               if ( CmdExecute && !SCPIError)
004236 964842rr       16202         MOV.B   ES,#SEG( _CmdExecute )
00423A 9908rrrr       16203         MOV.W   R0,#SOF( _CmdExecute )
00423E 8200           16204         MOV.B   R0L,[R0]
                      16205         BEQ     _1157
004240 F202           +16205 ;       BNE     _LG_1098
004242 D500C7         +16205 ;       JMP.L   _1157
004246 D500C700       +16205 ;       JMP.L   _1157
004246                +16205 _LG_1098:
004246 964842rr       16206         MOV.B   ES,#SEG( _SCPIError )
00424A 9908rrrr       16207         MOV.W   R0,#SOF( _SCPIError )
00424E 8A00           16208         MOV.W   R0,[R0]
                      16209         BNE     _1157
004250 F302           +16209 ;       BEQ     _LG_1100
004252 D500BF         +16209 ;       JMP.L   _1157
004256 D500BF00       +16209 ;       JMP.L   _1157
004256                +16209 _LG_1100:
                      16210 ; rs232cmd.c 4545               {
                      16211 ; rs232cmd.c 4546                       if ( CmdRequest)
004256 964842rr       16213         MOV.B   ES,#SEG( _CmdRequest )
00425A 9908rrrr       16214         MOV.W   R0,#SOF( _CmdRequest )
00425E 8200           16215         MOV.B   R0L,[R0]
004260 F35A           16216         BEQ     _1147
                      16217 ; rs232cmd.c 4547                       {
                      16218 ; rs232cmd.c 4548                               if ( ParCnt)
004262 964842rr       16220         MOV.B   ES,#SEG( _ParCnt )
004266 9908rrrr       16221         MOV.W   R0,#SOF( _ParCnt )
00426A 8200           16222         MOV.B   R0L,[R0]
00426C F307           16223         BEQ     _1146
                      16224 ; rs232cmd.c 4549                                       SCPIError = SyntaxErr;
00426E 964842rr       16226         MOV.B   ES,#SEG( _SCPIError )
004272 9908rrrr       16227         MOV.W   R0,#SOF( _SCPIError )
004276 BA03           16228         MOV.W   [R0],#03H
                      16229         BR      _1157
004278 D500AC         +16229         JMP.L   _1157
004278 D500AC00       +16229         JMP.L   _1157
00427C                16230 _1146:
                      16231 ; rs232cmd.c 4550                               else
                      16232 ; rs232cmd.c 4551                               {
                      16233 ; rs232cmd.c 4552                                       day = Calibration.GenlockCalibration.Date
                             % 100;
00427C 964842rr       16235         MOV.B   ES,#SEG( _Calibration+106 )
004280 9918rrrr       16236         MOV.W   R1,#SOF( _Calibration+106 )
004284 8B01           16237         MOV.W   R0,[R1+]
004286 8A11           16238         MOV.W   R1,[R1]
004288 B930           16239         MOV.W   R3,#00H
00428A 99280064       16240         MOV.W   R2,#064H
00428E 964842rr       16241         MOV.B   ES,#SEG( _Calibration+106 )
004292 9948rrrr       16242         MOV.W   R4,#SOF( _Calibration+106 )
004296 8B0C           16243         MOV.W   [R4+],R0
004298 8A1C           16244         MOV.W   [R4],R1
00429A C4rrrrrr       16245         FCALL   __UMODL
00429E 8C0F04         16246         MOV.W   [R7+4],R0
0042A1 964842rr       16247         MOV.B   ES,#SEG( _Calibration+106 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 265

ADDR   CODE            LINE SOURCELINE
0042A5 9918rrrr       16248         MOV.W   R1,#SOF( _Calibration+106 )
0042A9 8B01           16249         MOV.W   R0,[R1+]
0042AB 8A11           16250         MOV.W   R1,[R1]
                      16251 ; rs232cmd.c 4553                                       month = ( Calibration.GenlockCalibration.
                            Date / 100) % 100;
0042AD B930           16253         MOV.W   R3,#00H
0042AF 99280064       16254         MOV.W   R2,#064H
0042B3 8953           16255         MOV.W   R5,R3
0042B5 8942           16256         MOV.W   R4,R2
0042B7 C4rrrrrr       16257         FCALL   __UDIVL
0042BB 8935           16258         MOV.W   R3,R5
0042BD 8924           16259         MOV.W   R2,R4
0042BF C4rrrrrr       16260         FCALL   __UMODL
0042C3 8C0F02         16261         MOV.W   [R7+2],R0
                      16262 ; rs232cmd.c 4554                                       year = ( Calibration.GenlockCalibration.D
                            ate / 10000);
0042C6 B930           16264         MOV.W   R3,#00H
0042C8 99282710       16265         MOV.W   R2,#02710H
0042CC 964842rr       16266         MOV.B   ES,#SEG( _Calibration+106 )
0042D0 9918rrrr       16267         MOV.W   R1,#SOF( _Calibration+106 )
0042D4 8B01           16268         MOV.W   R0,[R1+]
0042D6 8A11           16269         MOV.W   R1,[R1]
0042D8 C4rrrrrr       16270         FCALL   __UDIVL
0042DC 8A0F           16271         MOV.W   [R7],R0
                      16272 ; rs232cmd.c 4555       
                      16273 ; rs232cmd.c 4556                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
0042DE 91A8rr         16275         MOV.B   R5L,#SEG( __lc_bs )
0042E1 71BB           16276         XOR.B   R5H,R5H
0042E3 404706         16277         LEA     R4,R7+6
0042E6 8C0704         16278         MOV.W   R0,[R7+4]
0042E9 0F01           16279         PUSH.W  R0
0042EB 8C0704         16281         MOV.W   R0,[R7+4]
0042EE 0F01           16282         PUSH.W  R0
0042F0 8C0704         16284         MOV.W   R0,[R7+4]
0042F3 0F01           16285         PUSH.W  R0
0042F5 9918rrrr       16287         MOV.W   R1,#SEG( _183 )
0042F9 9908rrrr       16288         MOV.W   R0,#SOF( _183 )
0042FD 0F03           16289         PUSH.W  R0, R1
0042FF 8915           16291         MOV.W   R1,R5
004301 8904           16292         MOV.W   R0,R4
                      16293         CALL    _sprintf
004303 C4rrrrrr       +16293 ;       FCALL   _sprintf
004307 9970000A       16294         ADD.W   R7,#0AH
                      16296 ; rs232cmd.c 4557       
                      16297 ; rs232cmd.c 4558                                       rs232puts( buffer);
00430B 8915           16299         MOV.W   R1,R5
00430D 8904           16300         MOV.W   R0,R4
                      16301         CALL    _rs232puts
00430F C4rrrrrr       +16301 ;       FCALL   _rs232puts
                      16302 ; rs232cmd.c 4559                               }
                      16303 ; rs232cmd.c 4560                       }
004313 FE5F           16305         BR      _1157
004313 FE5F00         16305         BR      _1157
004316                16306 _1147:
                      16307 ; rs232cmd.c 4561                       else
                      16308 ; rs232cmd.c 4562                       {
                      16309 ; rs232cmd.c 4563                               if ( !PasswordProtected)
004316 964842rr       16311         MOV.B   ES,#SEG( _PasswordProtected )
00431A 9908rrrr       16312         MOV.W   R0,#SOF( _PasswordProtected )
00431E 8A00           16313         MOV.W   R0,[R0]
004320 F258           16314         BNE     _1157
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 266

ADDR   CODE            LINE SOURCELINE
                      16315 ; rs232cmd.c 4564                               {
                      16316 ; rs232cmd.c 4565                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
004322 964842rr       16318         MOV.B   ES,#SEG( _ParCnt )
004326 9908rrrr       16319         MOV.W   R0,#SOF( _ParCnt )
00432A 8200           16320         MOV.B   R0L,[R0]
00432C 910403         16321         CMP.B   R0L,#03H
00432F F21F           16322         BNE     _1148
004331 9168rr         16323         MOV.B   R3L,#SEG( __lc_bs )
004334 7177           16324         XOR.B   R3H,R3H
004336 8927           16325         MOV.W   R2,R7
004338 91A8rr         16326         MOV.B   R5L,#SEG( __lc_bs )
00433B 71BB           16327         XOR.B   R5H,R5H
00433D 404702         16328         LEA     R4,R7+2
004340 9128rr         16329         MOV.B   R1L,#SEG( __lc_bs )
004343 7133           16330         XOR.B   R1H,R1H
004345 400704         16331         LEA     R0,R7+4
004348 0F03           16332         PUSH.W  R0, R1
00434A 0F30           16334         PUSH.W  R4, R5
00434C 0F0C           16336         PUSH.W  R2, R3
00434E 9938rrrr       16338         MOV.W   R3,#SEG( _184 )
004352 9928rrrr       16339         MOV.W   R2,#SOF( _184 )
004356 0F0C           16340         PUSH.W  R2, R3
004358 9918rrrr       16342         MOV.W   R1,#SEG( _Cmd )
00435C 9908rrrr       16343         MOV.W   R0,#SOF( _Cmd )
                      16344         CALL    _sscanf
004360 C4rrrrrr       +16344 ;       FCALL   _sscanf
004364 99700010       16345         ADD.W   R7,#010H
004368 99040003       16347         CMP.W   R0,#03H
00436C F306           16348         BEQ     _1149
00436C F306           16348         BEQ     _1149
00436E                16349 _1148:
                      16350 ; rs232cmd.c 4566                                               SCPIError = SyntaxErr;
00436E 964842rr       16352         MOV.B   ES,#SEG( _SCPIError )
004372 9908rrrr       16353         MOV.W   R0,#SOF( _SCPIError )
004376 BA03           16354         MOV.W   [R0],#03H
004378 FE2C           16355         BR      _1157
004378 FE2C           16355         BR      _1157
00437A                16356 _1149:
                      16357 ; rs232cmd.c 4567                                       else
                      16358 ; rs232cmd.c 4568                                       {
                      16359 ; rs232cmd.c 4569                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
00437A 8A07           16361         MOV.W   R0,[R7]
00437C 8C1702         16362         MOV.W   R1,[R7+2]
00437F 8C2704         16363         MOV.W   R2,[R7+4]
                      16364         CALL    _ValidateDate
004382 C4rrrrrr       +16364 ;       FCALL   _ValidateDate
004386 6900           16365         OR.W    R0,R0
004388 F207           16366         BNE     _1150
                      16367 ; rs232cmd.c 4570                                                       SCPIError = ExecErr;
00438A 964842rr       16369         MOV.B   ES,#SEG( _SCPIError )
00438E 9908rrrr       16370         MOV.W   R0,#SOF( _SCPIError )
004392 9A08001D       16371         MOV.W   [R0],#01DH
004396 FE1D           16372         BR      _1157
004396 FE1D           16372         BR      _1157
004398                16373 _1150:
                      16374 ; rs232cmd.c 4571                                               else
                      16375 ; rs232cmd.c 4572                                               {
                      16376 ; rs232cmd.c 4573                                                       Calibration.GenlockCalibr
                            ation.Date = day + 100*month + 10000*year;
004398 8C0702         16378         MOV.W   R0,[R7+2]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 267

ADDR   CODE            LINE SOURCELINE
00439B E9000064       16379         MULU.W  R0,#064H
00439F 0C0704         16380         ADD.W   R0,[R7+4]
0043A2 8A27           16381         MOV.W   R2,[R7]
0043A4 E9202710       16382         MULU.W  R2,#02710H
0043A8 0902           16383         ADD.W   R0,R2
0043AA B910           16384         MOVS.W  R1,#00H
0043AC 964842rr       16385         MOV.B   ES,#SEG( _Calibration+106 )
0043B0 9928rrrr       16386         MOV.W   R2,#SOF( _Calibration+106 )
0043B4 8B0A           16387         MOV.W   [R2+],R0
0043B6 8A1A           16388         MOV.W   [R2],R1
                      16389 ; rs232cmd.c 4574                                               
                      16390 ; rs232cmd.c 4575                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
0043B8 9918rrrr       16392         MOV.W   R1,#SEG( _Calibration )
0043BC 9908rrrr       16393         MOV.W   R0,#SOF( _Calibration )
0043C0 964842rr       16394         MOV.B   ES,#SEG( _CalibrationPtr )
0043C4 9928rrrr       16395         MOV.W   R2,#SOF( _CalibrationPtr )
0043C8 8A22           16396         MOV.W   R2,[R2]
0043CA 993800E0       16397         MOV.W   R3,#0E0H
                      16398         CALL    _NV_Store
0043CE C4rrrrrr       +16398 ;       FCALL   _NV_Store
                      16399 ; rs232cmd.c 4576                                               }
                      16400 ; rs232cmd.c 4577                                       }                               
                      16401 ; rs232cmd.c 4578                               }
                      16402 ; rs232cmd.c 4579                       }
                      16403 ; rs232cmd.c 4580               }
0043D2                16405 _1157:
                      16406 ; rs232cmd.c 4581       }
0043D2 9970001A       16408         ADD.W   R7,#01AH
0043D6 2F30           16410         POP.W   R4, R5
0043D8 D680           16412         RET
                      16414 ; rs232cmd.c 4582       
                      16415 ; rs232cmd.c 4583       /************************************************************************
                            **/
                      16416 ; rs232cmd.c 4584       /* FactGenlockGenVersion                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      16417 ; rs232cmd.c 4585       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16418 ; rs232cmd.c 4586       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16419 ; rs232cmd.c 4587       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      16420 ; rs232cmd.c 4588       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16421 ; rs232cmd.c 4589       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16422 ; rs232cmd.c 4590       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16423 ; rs232cmd.c 4591       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 268

ADDR   CODE            LINE SOURCELINE
                      16424 ; rs232cmd.c 4592       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16425 ; rs232cmd.c 4593       /************************************************************************
                            **/
                      16426 ; rs232cmd.c 4594       void FactGenlockGenVersion( void)
                      16427 ; rs232cmd.c 4595       {
                      16428         ALIGN   1
                      16430         PUBLIC  _FactGenlockGenVersion
0043DA                16431 _FactGenlockGenVersion:
0043DA 0F30           16435         PUSH.W  R4, R5
0043DC 9972000A       16437         SUB.W   R7,#0AH
                      16441 ; rs232cmd.c 4596               char result[10];
                      16442 ; rs232cmd.c 4597       
                      16443 ; rs232cmd.c 4598               if ( CmdExecute && !SCPIError)
0043E0 964842rr       16445         MOV.B   ES,#SEG( _CmdExecute )
0043E4 9908rrrr       16446         MOV.W   R0,#SOF( _CmdExecute )
0043E8 8200           16447         MOV.B   R0L,[R0]
0043EA F337           16448         BEQ     _1167
0043EC 964842rr       16449         MOV.B   ES,#SEG( _SCPIError )
0043F0 9908rrrr       16450         MOV.W   R0,#SOF( _SCPIError )
0043F4 8A00           16451         MOV.W   R0,[R0]
0043F6 F231           16452         BNE     _1167
                      16453 ; rs232cmd.c 4599               {
                      16454 ; rs232cmd.c 4600                       if ( CmdRequest)
0043F8 964842rr       16456         MOV.B   ES,#SEG( _CmdRequest )
0043FC 9908rrrr       16457         MOV.W   R0,#SOF( _CmdRequest )
004400 8200           16458         MOV.B   R0L,[R0]
004402 F326           16459         BEQ     _1162
                      16460 ; rs232cmd.c 4601                       {
                      16461 ; rs232cmd.c 4602                               if ( ParCnt)
004404 964842rr       16463         MOV.B   ES,#SEG( _ParCnt )
004408 9908rrrr       16464         MOV.W   R0,#SOF( _ParCnt )
00440C 8200           16465         MOV.B   R0L,[R0]
00440E F306           16466         BEQ     _1160
                      16467 ; rs232cmd.c 4603                                       SCPIError = SyntaxErr;
004410 964842rr       16469         MOV.B   ES,#SEG( _SCPIError )
004414 9908rrrr       16470         MOV.W   R0,#SOF( _SCPIError )
004418 BA03           16471         MOV.W   [R0],#03H
00441A FE1F           16472         BR      _1167
00441A FE1F           16472         BR      _1167
00441C                16473 _1160:
                      16474 ; rs232cmd.c 4604                               else
                      16475 ; rs232cmd.c 4605                               {
                      16476 ; rs232cmd.c 4606                                       if ( GenlockVersion( result) == OK)
00441C 91A8rr         16478         MOV.B   R5L,#SEG( __lc_bs )
00441F 71BB           16479         XOR.B   R5H,R5H
004421 8947           16480         MOV.W   R4,R7
004423 8915           16481         MOV.W   R1,R5
004425 8904           16482         MOV.W   R0,R4
                      16483         CALL    _GenlockVersion
004427 C4rrrrrr       +16483 ;       FCALL   _GenlockVersion
00442B 9904FFFF       16484         CMP.W   R0,#0FFFFH
00442F F209           16485         BNE     _1161
                      16486 ; rs232cmd.c 4607                                       {
                      16487 ; rs232cmd.c 4608                                               rs232puts( result);
004431 8915           16489         MOV.W   R1,R5
004433 8904           16490         MOV.W   R0,R4
                      16491         CALL    _rs232puts
004435 C4rrrrrr       +16491 ;       FCALL   _rs232puts
                      16492 ; rs232cmd.c 4609                                               rs232putchar( '\n');
004439 91080A         16494         MOV.B   R0L,#0AH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 269

ADDR   CODE            LINE SOURCELINE
                      16495         CALL    _rs232putchar
00443C C4rrrrrr       +16495 ;       FCALL   _rs232putchar
                      16496 ; rs232cmd.c 4610                                       }
004440 FE0C           16498         BR      _1167
004440 FE0C           16498         BR      _1167
004442                16499 _1161:
                      16500 ; rs232cmd.c 4611                                       else
                      16501 ; rs232cmd.c 4612                                               SCPIError = ExecErr;             
                                    
004442 964842rr       16503         MOV.B   ES,#SEG( _SCPIError )
004446 9908rrrr       16504         MOV.W   R0,#SOF( _SCPIError )
00444A 9A08001D       16505         MOV.W   [R0],#01DH
                      16506 ; rs232cmd.c 4613                               }
                      16507 ; rs232cmd.c 4614                       }
00444E FE05           16509         BR      _1167
00444E FE05           16509         BR      _1167
004450                16510 _1162:
                      16511 ; rs232cmd.c 4615                       else
                      16512 ; rs232cmd.c 4616                               SCPIError = SyntaxErr;
004450 964842rr       16514         MOV.B   ES,#SEG( _SCPIError )
004454 9908rrrr       16515         MOV.W   R0,#SOF( _SCPIError )
004458 BA03           16516         MOV.W   [R0],#03H
                      16517 ; rs232cmd.c 4617               }
00445A                16519 _1167:
                      16520 ; rs232cmd.c 4618       }
00445A 9970000A       16522         ADD.W   R7,#0AH
00445E 2F30           16524         POP.W   R4, R5
004460 D680           16526         RET
                      16528 ; rs232cmd.c 4619       
                      16529 ; rs232cmd.c 4620       /************************************************************************
                            **/
                      16530 ; rs232cmd.c 4621       /* FactGenlockGenFRefDate                                                
                                                                                                                         RS23
                            2CMD.C  */
                      16531 ; rs232cmd.c 4622       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16532 ; rs232cmd.c 4623       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16533 ; rs232cmd.c 4624       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16534 ; rs232cmd.c 4625       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16535 ; rs232cmd.c 4626       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16536 ; rs232cmd.c 4627       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16537 ; rs232cmd.c 4628       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16538 ; rs232cmd.c 4629       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16539 ; rs232cmd.c 4630       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 270

ADDR   CODE            LINE SOURCELINE
                      16540 ; rs232cmd.c 4631       void FactGenlockGenFRefDate( void)
                      16541 ; rs232cmd.c 4632       {
                      16542         ALIGN   1
                      16544         PUBLIC  _FactGenlockGenFRefDate
004462                16545 _FactGenlockGenFRefDate:
004462 0F30           16549         PUSH.W  R4, R5
004464 9972001A       16551         SUB.W   R7,#01AH
                      16557 ; rs232cmd.c 4633               UI year, month, day;
                      16558 ; rs232cmd.c 4634               char buffer[20];
                      16559 ; rs232cmd.c 4635       
                      16560 ; rs232cmd.c 4636               if ( CmdExecute && !SCPIError)
004468 964842rr       16562         MOV.B   ES,#SEG( _CmdExecute )
00446C 9908rrrr       16563         MOV.W   R0,#SOF( _CmdExecute )
004470 8200           16564         MOV.B   R0L,[R0]
                      16565         BEQ     _1182
004472 F202           +16565 ;       BNE     _LG_1124
004474 D500C7         +16565 ;       JMP.L   _1182
004478 D500C700       +16565 ;       JMP.L   _1182
004478                +16565 _LG_1124:
004478 964842rr       16566         MOV.B   ES,#SEG( _SCPIError )
00447C 9908rrrr       16567         MOV.W   R0,#SOF( _SCPIError )
004480 8A00           16568         MOV.W   R0,[R0]
                      16569         BNE     _1182
004482 F302           +16569 ;       BEQ     _LG_1126
004484 D500BF         +16569 ;       JMP.L   _1182
004488 D500BF00       +16569 ;       JMP.L   _1182
004488                +16569 _LG_1126:
                      16570 ; rs232cmd.c 4637               {
                      16571 ; rs232cmd.c 4638                       if ( CmdRequest)
004488 964842rr       16573         MOV.B   ES,#SEG( _CmdRequest )
00448C 9908rrrr       16574         MOV.W   R0,#SOF( _CmdRequest )
004490 8200           16575         MOV.B   R0L,[R0]
004492 F35A           16576         BEQ     _1172
                      16577 ; rs232cmd.c 4639                       {
                      16578 ; rs232cmd.c 4640                               if ( ParCnt)
004494 964842rr       16580         MOV.B   ES,#SEG( _ParCnt )
004498 9908rrrr       16581         MOV.W   R0,#SOF( _ParCnt )
00449C 8200           16582         MOV.B   R0L,[R0]
00449E F307           16583         BEQ     _1171
                      16584 ; rs232cmd.c 4641                                       SCPIError = SyntaxErr;
0044A0 964842rr       16586         MOV.B   ES,#SEG( _SCPIError )
0044A4 9908rrrr       16587         MOV.W   R0,#SOF( _SCPIError )
0044A8 BA03           16588         MOV.W   [R0],#03H
                      16589         BR      _1182
0044AA D500AC         +16589         JMP.L   _1182
0044AA D500AC00       +16589         JMP.L   _1182
0044AE                16590 _1171:
                      16591 ; rs232cmd.c 4642                               else
                      16592 ; rs232cmd.c 4643                               {
                      16593 ; rs232cmd.c 4644                                       day = Calibration.GenlockCalibration.DACF
                            actDate % 100;
0044AE 964842rr       16595         MOV.B   ES,#SEG( _Calibration+110 )
0044B2 9918rrrr       16596         MOV.W   R1,#SOF( _Calibration+110 )
0044B6 8B01           16597         MOV.W   R0,[R1+]
0044B8 8A11           16598         MOV.W   R1,[R1]
0044BA B930           16599         MOV.W   R3,#00H
0044BC 99280064       16600         MOV.W   R2,#064H
0044C0 964842rr       16601         MOV.B   ES,#SEG( _Calibration+110 )
0044C4 9948rrrr       16602         MOV.W   R4,#SOF( _Calibration+110 )
0044C8 8B0C           16603         MOV.W   [R4+],R0
0044CA 8A1C           16604         MOV.W   [R4],R1
0044CC C4rrrrrr       16605         FCALL   __UMODL
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 271

ADDR   CODE            LINE SOURCELINE
0044D0 8C0F04         16606         MOV.W   [R7+4],R0
0044D3 964842rr       16607         MOV.B   ES,#SEG( _Calibration+110 )
0044D7 9918rrrr       16608         MOV.W   R1,#SOF( _Calibration+110 )
0044DB 8B01           16609         MOV.W   R0,[R1+]
0044DD 8A11           16610         MOV.W   R1,[R1]
                      16611 ; rs232cmd.c 4645                                       month = ( Calibration.GenlockCalibration.
                            DACFactDate / 100) % 100;
0044DF B930           16613         MOV.W   R3,#00H
0044E1 99280064       16614         MOV.W   R2,#064H
0044E5 8953           16615         MOV.W   R5,R3
0044E7 8942           16616         MOV.W   R4,R2
0044E9 C4rrrrrr       16617         FCALL   __UDIVL
0044ED 8935           16618         MOV.W   R3,R5
0044EF 8924           16619         MOV.W   R2,R4
0044F1 C4rrrrrr       16620         FCALL   __UMODL
0044F5 8C0F02         16621         MOV.W   [R7+2],R0
                      16622 ; rs232cmd.c 4646                                       year = ( Calibration.GenlockCalibration.D
                            ACFactDate / 10000);
0044F8 B930           16624         MOV.W   R3,#00H
0044FA 99282710       16625         MOV.W   R2,#02710H
0044FE 964842rr       16626         MOV.B   ES,#SEG( _Calibration+110 )
004502 9918rrrr       16627         MOV.W   R1,#SOF( _Calibration+110 )
004506 8B01           16628         MOV.W   R0,[R1+]
004508 8A11           16629         MOV.W   R1,[R1]
00450A C4rrrrrr       16630         FCALL   __UDIVL
00450E 8A0F           16631         MOV.W   [R7],R0
                      16632 ; rs232cmd.c 4647       
                      16633 ; rs232cmd.c 4648                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
004510 91A8rr         16635         MOV.B   R5L,#SEG( __lc_bs )
004513 71BB           16636         XOR.B   R5H,R5H
004515 404706         16637         LEA     R4,R7+6
004518 8C0704         16638         MOV.W   R0,[R7+4]
00451B 0F01           16639         PUSH.W  R0
00451D 8C0704         16641         MOV.W   R0,[R7+4]
004520 0F01           16642         PUSH.W  R0
004522 8C0704         16644         MOV.W   R0,[R7+4]
004525 0F01           16645         PUSH.W  R0
004527 9918rrrr       16647         MOV.W   R1,#SEG( _1169 )
00452B 9908rrrr       16648         MOV.W   R0,#SOF( _1169 )
00452F 0F03           16649         PUSH.W  R0, R1
004531 8915           16651         MOV.W   R1,R5
004533 8904           16652         MOV.W   R0,R4
                      16653         CALL    _sprintf
004535 C4rrrrrr       +16653 ;       FCALL   _sprintf
004539 9970000A       16654         ADD.W   R7,#0AH
                      16656 ; rs232cmd.c 4649       
                      16657 ; rs232cmd.c 4650                                       rs232puts( buffer);
00453D 8915           16659         MOV.W   R1,R5
00453F 8904           16660         MOV.W   R0,R4
                      16661         CALL    _rs232puts
004541 C4rrrrrr       +16661 ;       FCALL   _rs232puts
                      16662 ; rs232cmd.c 4651                               }
                      16663 ; rs232cmd.c 4652                       }
004545 FE5F           16665         BR      _1182
004545 FE5F00         16665         BR      _1182
004548                16666 _1172:
                      16667 ; rs232cmd.c 4653                       else
                      16668 ; rs232cmd.c 4654                       {
                      16669 ; rs232cmd.c 4655                               if ( !PasswordProtected)
004548 964842rr       16671         MOV.B   ES,#SEG( _PasswordProtected )
00454C 9908rrrr       16672         MOV.W   R0,#SOF( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 272

ADDR   CODE            LINE SOURCELINE
004550 8A00           16673         MOV.W   R0,[R0]
004552 F258           16674         BNE     _1182
                      16675 ; rs232cmd.c 4656                               {
                      16676 ; rs232cmd.c 4657                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
004554 964842rr       16678         MOV.B   ES,#SEG( _ParCnt )
004558 9908rrrr       16679         MOV.W   R0,#SOF( _ParCnt )
00455C 8200           16680         MOV.B   R0L,[R0]
00455E 910403         16681         CMP.B   R0L,#03H
004561 F21F           16682         BNE     _1173
004563 9168rr         16683         MOV.B   R3L,#SEG( __lc_bs )
004566 7177           16684         XOR.B   R3H,R3H
004568 8927           16685         MOV.W   R2,R7
00456A 91A8rr         16686         MOV.B   R5L,#SEG( __lc_bs )
00456D 71BB           16687         XOR.B   R5H,R5H
00456F 404702         16688         LEA     R4,R7+2
004572 9128rr         16689         MOV.B   R1L,#SEG( __lc_bs )
004575 7133           16690         XOR.B   R1H,R1H
004577 400704         16691         LEA     R0,R7+4
00457A 0F03           16692         PUSH.W  R0, R1
00457C 0F30           16694         PUSH.W  R4, R5
00457E 0F0C           16696         PUSH.W  R2, R3
004580 9938rrrr       16698         MOV.W   R3,#SEG( _1170 )
004584 9928rrrr       16699         MOV.W   R2,#SOF( _1170 )
004588 0F0C           16700         PUSH.W  R2, R3
00458A 9918rrrr       16702         MOV.W   R1,#SEG( _Cmd )
00458E 9908rrrr       16703         MOV.W   R0,#SOF( _Cmd )
                      16704         CALL    _sscanf
004592 C4rrrrrr       +16704 ;       FCALL   _sscanf
004596 99700010       16705         ADD.W   R7,#010H
00459A 99040003       16707         CMP.W   R0,#03H
00459E F306           16708         BEQ     _1174
00459E F306           16708         BEQ     _1174
0045A0                16709 _1173:
                      16710 ; rs232cmd.c 4658                                               SCPIError = SyntaxErr;
0045A0 964842rr       16712         MOV.B   ES,#SEG( _SCPIError )
0045A4 9908rrrr       16713         MOV.W   R0,#SOF( _SCPIError )
0045A8 BA03           16714         MOV.W   [R0],#03H
0045AA FE2C           16715         BR      _1182
0045AA FE2C           16715         BR      _1182
0045AC                16716 _1174:
                      16717 ; rs232cmd.c 4659                                       else
                      16718 ; rs232cmd.c 4660                                       {
                      16719 ; rs232cmd.c 4661                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
0045AC 8A07           16721         MOV.W   R0,[R7]
0045AE 8C1702         16722         MOV.W   R1,[R7+2]
0045B1 8C2704         16723         MOV.W   R2,[R7+4]
                      16724         CALL    _ValidateDate
0045B4 C4rrrrrr       +16724 ;       FCALL   _ValidateDate
0045B8 6900           16725         OR.W    R0,R0
0045BA F207           16726         BNE     _1175
                      16727 ; rs232cmd.c 4662                                                       SCPIError = ExecErr;
0045BC 964842rr       16729         MOV.B   ES,#SEG( _SCPIError )
0045C0 9908rrrr       16730         MOV.W   R0,#SOF( _SCPIError )
0045C4 9A08001D       16731         MOV.W   [R0],#01DH
0045C8 FE1D           16732         BR      _1182
0045C8 FE1D           16732         BR      _1182
0045CA                16733 _1175:
                      16734 ; rs232cmd.c 4663                                               else
                      16735 ; rs232cmd.c 4664                                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 273

ADDR   CODE            LINE SOURCELINE
                      16736 ; rs232cmd.c 4665                                                       Calibration.GenlockCalibr
                            ation.DACFactDate = day + 100*month + 10000*year;
0045CA 8C0702         16738         MOV.W   R0,[R7+2]
0045CD E9000064       16739         MULU.W  R0,#064H
0045D1 0C0704         16740         ADD.W   R0,[R7+4]
0045D4 8A27           16741         MOV.W   R2,[R7]
0045D6 E9202710       16742         MULU.W  R2,#02710H
0045DA 0902           16743         ADD.W   R0,R2
0045DC B910           16744         MOVS.W  R1,#00H
0045DE 964842rr       16745         MOV.B   ES,#SEG( _Calibration+110 )
0045E2 9928rrrr       16746         MOV.W   R2,#SOF( _Calibration+110 )
0045E6 8B0A           16747         MOV.W   [R2+],R0
0045E8 8A1A           16748         MOV.W   [R2],R1
                      16749 ; rs232cmd.c 4666                                               
                      16750 ; rs232cmd.c 4667                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
0045EA 9918rrrr       16752         MOV.W   R1,#SEG( _Calibration )
0045EE 9908rrrr       16753         MOV.W   R0,#SOF( _Calibration )
0045F2 964842rr       16754         MOV.B   ES,#SEG( _CalibrationPtr )
0045F6 9928rrrr       16755         MOV.W   R2,#SOF( _CalibrationPtr )
0045FA 8A22           16756         MOV.W   R2,[R2]
0045FC 993800E0       16757         MOV.W   R3,#0E0H
                      16758         CALL    _NV_Store
004600 C4rrrrrr       +16758 ;       FCALL   _NV_Store
                      16759 ; rs232cmd.c 4668                                               }
                      16760 ; rs232cmd.c 4669                                       }                               
                      16761 ; rs232cmd.c 4670                               }
                      16762 ; rs232cmd.c 4671                       }
                      16763 ; rs232cmd.c 4672               }
004604                16765 _1182:
                      16766 ; rs232cmd.c 4673       }
004604 9970001A       16768         ADD.W   R7,#01AH
004608 2F30           16770         POP.W   R4, R5
00460A D680           16772         RET
                      16774 ; rs232cmd.c 4674       
                      16775 ; rs232cmd.c 4675       /************************************************************************
                            **/
                      16776 ; rs232cmd.c 4676       /* FactGenlockGenFRefDAC                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      16777 ; rs232cmd.c 4677       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16778 ; rs232cmd.c 4678       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16779 ; rs232cmd.c 4679       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16780 ; rs232cmd.c 4680       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16781 ; rs232cmd.c 4681       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16782 ; rs232cmd.c 4682       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 274

ADDR   CODE            LINE SOURCELINE
                      16783 ; rs232cmd.c 4683       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16784 ; rs232cmd.c 4684       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16785 ; rs232cmd.c 4685       /************************************************************************
                            **/
                      16786 ; rs232cmd.c 4686       void FactGenlockGenFRefDAC( void)
                      16787 ; rs232cmd.c 4687       {
                      16788         ALIGN   1
                      16790         PUBLIC  _FactGenlockGenFRefDAC
00460C                16791 _FactGenlockGenFRefDAC:
00460C 0F30           16795         PUSH.W  R4, R5
00460E 99720016       16797         SUB.W   R7,#016H
                      16801 ; rs232cmd.c 4688               char buffer[20];
                      16802 ; rs232cmd.c 4689               UI DACValue;
                      16803 ; rs232cmd.c 4690       
                      16804 ; rs232cmd.c 4691               if ( CmdExecute && !SCPIError)
004612 964842rr       16806         MOV.B   ES,#SEG( _CmdExecute )
004616 9908rrrr       16807         MOV.W   R0,#SOF( _CmdExecute )
00461A 8200           16808         MOV.B   R0L,[R0]
00461C F36E           16809         BEQ     _1195
00461E 964842rr       16810         MOV.B   ES,#SEG( _SCPIError )
004622 9908rrrr       16811         MOV.W   R0,#SOF( _SCPIError )
004626 8A00           16812         MOV.W   R0,[R0]
004628 F268           16813         BNE     _1195
                      16814 ; rs232cmd.c 4692               {
                      16815 ; rs232cmd.c 4693                       if ( CmdRequest)
00462A 964842rr       16817         MOV.B   ES,#SEG( _CmdRequest )
00462E 9908rrrr       16818         MOV.W   R0,#SOF( _CmdRequest )
004632 8200           16819         MOV.B   R0L,[R0]
004634 F325           16820         BEQ     _1187
                      16821 ; rs232cmd.c 4694                       {
                      16822 ; rs232cmd.c 4695                               if ( ParCnt)
004636 964842rr       16824         MOV.B   ES,#SEG( _ParCnt )
00463A 9908rrrr       16825         MOV.W   R0,#SOF( _ParCnt )
00463E 8200           16826         MOV.B   R0L,[R0]
004640 F306           16827         BEQ     _1186
                      16828 ; rs232cmd.c 4696                                       SCPIError = SyntaxErr;
004642 964842rr       16830         MOV.B   ES,#SEG( _SCPIError )
004646 9908rrrr       16831         MOV.W   R0,#SOF( _SCPIError )
00464A BA03           16832         MOV.W   [R0],#03H
00464C FE56           16833         BR      _1195
00464C FE56           16833         BR      _1195
00464E                16834 _1186:
                      16835 ; rs232cmd.c 4697                               else
                      16836 ; rs232cmd.c 4698                               {
                      16837 ; rs232cmd.c 4699                                       sprintf( buffer, "%u\n", Calibration.Genl
                            ockCalibration.DACFactValue);
00464E 91A8rr         16839         MOV.B   R5L,#SEG( __lc_bs )
004651 71BB           16840         XOR.B   R5H,R5H
004653 8947           16841         MOV.W   R4,R7
004655 964842rr       16842         MOV.B   ES,#SEG( _Calibration+118 )
004659 9908rrrr       16843         MOV.W   R0,#SOF( _Calibration+118 )
00465D 8A00           16844         MOV.W   R0,[R0]
00465F 0F01           16845         PUSH.W  R0
004661 9918rrrr       16847         MOV.W   R1,#SEG( _1009 )
004665 9908rrrr       16848         MOV.W   R0,#SOF( _1009 )
004669 0F03           16849         PUSH.W  R0, R1
00466B 8915           16851         MOV.W   R1,R5
00466D 8904           16852         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 275

ADDR   CODE            LINE SOURCELINE
                      16853         CALL    _sprintf
00466F C4rrrrrr       +16853 ;       FCALL   _sprintf
004673 A976           16854         ADDS.W  R7,#06H
                      16856 ; rs232cmd.c 4700       
                      16857 ; rs232cmd.c 4701                                       rs232puts( buffer);
004675 8915           16859         MOV.W   R1,R5
004677 8904           16860         MOV.W   R0,R4
                      16861         CALL    _rs232puts
004679 C4rrrrrr       +16861 ;       FCALL   _rs232puts
                      16862 ; rs232cmd.c 4702                               }
                      16863 ; rs232cmd.c 4703                       }
00467D FE3E           16865         BR      _1195
00467D FE3E00         16865         BR      _1195
004680                16866 _1187:
                      16867 ; rs232cmd.c 4704                       else
                      16868 ; rs232cmd.c 4705                       {
                      16869 ; rs232cmd.c 4706                               if ( !PasswordProtected)
004680 964842rr       16871         MOV.B   ES,#SEG( _PasswordProtected )
004684 9908rrrr       16872         MOV.W   R0,#SOF( _PasswordProtected )
004688 8A00           16873         MOV.W   R0,[R0]
00468A F237           16874         BNE     _1195
                      16875 ; rs232cmd.c 4707                               {
                      16876 ; rs232cmd.c 4708                                       if (( ParCnt != 1) || (( sscanf( Cmd, "%u
                            ", &DACValue)) != 1))
00468C 964842rr       16878         MOV.B   ES,#SEG( _ParCnt )
004690 9908rrrr       16879         MOV.W   R0,#SOF( _ParCnt )
004694 8200           16880         MOV.B   R0L,[R0]
004696 910401         16881         CMP.B   R0L,#01H
004699 F216           16882         BNE     _1188
00469B 9918rrrr       16883         MOV.W   R1,#SEG( _Cmd )
00469F 9908rrrr       16884         MOV.W   R0,#SOF( _Cmd )
0046A3 9168rr         16885         MOV.B   R3L,#SEG( __lc_bs )
0046A6 7177           16886         XOR.B   R3H,R3H
0046A8 402714         16887         LEA     R2,R7+20
0046AB 0F0C           16888         PUSH.W  R2, R3
0046AD 9938rrrr       16890         MOV.W   R3,#SEG( _1185 )
0046B1 9928rrrr       16891         MOV.W   R2,#SOF( _1185 )
0046B5 0F0C           16892         PUSH.W  R2, R3
                      16894         CALL    _sscanf
0046B7 C4rrrrrr       +16894 ;       FCALL   _sscanf
0046BB 99700008       16895         ADD.W   R7,#08H
0046BF 99040001       16897         CMP.W   R0,#01H
0046C3 F307           16898         BEQ     _1189
0046C3 F30700         16898         BEQ     _1189
0046C6                16899 _1188:
                      16900 ; rs232cmd.c 4709                                               SCPIError = SyntaxErr;
0046C6 964842rr       16902         MOV.B   ES,#SEG( _SCPIError )
0046CA 9908rrrr       16903         MOV.W   R0,#SOF( _SCPIError )
0046CE BA03           16904         MOV.W   [R0],#03H
0046D0 FE14           16905         BR      _1195
0046D0 FE14           16905         BR      _1195
0046D2                16906 _1189:
                      16907 ; rs232cmd.c 4710                                       else
                      16908 ; rs232cmd.c 4711                                       {
                      16909 ; rs232cmd.c 4712                                               Calibration.GenlockCalibration.DA
                            CFactValue = DACValue;
0046D2 8C0714         16911         MOV.W   R0,[R7+20]
0046D5 964842rr       16912         MOV.B   ES,#SEG( _Calibration+118 )
0046D9 9918rrrr       16913         MOV.W   R1,#SOF( _Calibration+118 )
0046DD 8A09           16914         MOV.W   [R1],R0
                      16915 ; rs232cmd.c 4713                                                               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 276

ADDR   CODE            LINE SOURCELINE
                      16916 ; rs232cmd.c 4714                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0046DF 9918rrrr       16918         MOV.W   R1,#SEG( _Calibration )
0046E3 9908rrrr       16919         MOV.W   R0,#SOF( _Calibration )
0046E7 964842rr       16920         MOV.B   ES,#SEG( _CalibrationPtr )
0046EB 9928rrrr       16921         MOV.W   R2,#SOF( _CalibrationPtr )
0046EF 8A22           16922         MOV.W   R2,[R2]
0046F1 993800E0       16923         MOV.W   R3,#0E0H
                      16924         CALL    _NV_Store
0046F5 C4rrrrrr       +16924 ;       FCALL   _NV_Store
                      16925 ; rs232cmd.c 4715                                       }
                      16926 ; rs232cmd.c 4716                               }
                      16927 ; rs232cmd.c 4717                       }
                      16928 ; rs232cmd.c 4718               }
0046FA                16930 _1195:
                      16931 ; rs232cmd.c 4719       }
0046FA 99700016       16933         ADD.W   R7,#016H
0046FE 2F30           16935         POP.W   R4, R5
004700 D680           16937         RET
                      16939 ; rs232cmd.c 4720       
                      16940 ; rs232cmd.c 4721       /************************************************************************
                            **/
                      16941 ; rs232cmd.c 4722       /* FactGenlockGenURefDate                                                
                                                                                                                         RS23
                            2CMD.C  */
                      16942 ; rs232cmd.c 4723       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16943 ; rs232cmd.c 4724       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16944 ; rs232cmd.c 4725       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16945 ; rs232cmd.c 4726       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16946 ; rs232cmd.c 4727       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16947 ; rs232cmd.c 4728       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16948 ; rs232cmd.c 4729       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16949 ; rs232cmd.c 4730       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16950 ; rs232cmd.c 4731       /************************************************************************
                            **/
                      16951 ; rs232cmd.c 4732       void FactGenlockGenURefDate( void)
                      16952 ; rs232cmd.c 4733       {
                      16953         ALIGN   1
                      16955         PUBLIC  _FactGenlockGenURefDate
004702                16956 _FactGenlockGenURefDate:
004702 0F30           16960         PUSH.W  R4, R5
004704 9972001A       16962         SUB.W   R7,#01AH
                      16968 ; rs232cmd.c 4734               UI year, month, day;
                      16969 ; rs232cmd.c 4735               char buffer[20];
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 277

ADDR   CODE            LINE SOURCELINE
                      16970 ; rs232cmd.c 4736       
                      16971 ; rs232cmd.c 4737               if ( CmdExecute && !SCPIError)
004708 964842rr       16973         MOV.B   ES,#SEG( _CmdExecute )
00470C 9908rrrr       16974         MOV.W   R0,#SOF( _CmdExecute )
004710 8200           16975         MOV.B   R0L,[R0]
                      16976         BEQ     _1208
004712 F202           +16976 ;       BNE     _LG_1154
004714 D500C1         +16976 ;       JMP.L   _1208
004718 D500C100       +16976 ;       JMP.L   _1208
004718                +16976 _LG_1154:
004718 964842rr       16977         MOV.B   ES,#SEG( _SCPIError )
00471C 9908rrrr       16978         MOV.W   R0,#SOF( _SCPIError )
004720 8A00           16979         MOV.W   R0,[R0]
                      16980         BNE     _1208
004722 F302           +16980 ;       BEQ     _LG_1156
004724 D500B9         +16980 ;       JMP.L   _1208
004728 D500B900       +16980 ;       JMP.L   _1208
004728                +16980 _LG_1156:
                      16981 ; rs232cmd.c 4738               {
                      16982 ; rs232cmd.c 4739                       if ( CmdRequest)
004728 964842rr       16984         MOV.B   ES,#SEG( _CmdRequest )
00472C 9908rrrr       16985         MOV.W   R0,#SOF( _CmdRequest )
004730 8200           16986         MOV.B   R0L,[R0]
004732 F35A           16987         BEQ     _1199
                      16988 ; rs232cmd.c 4740                       {
                      16989 ; rs232cmd.c 4741                               if ( ParCnt)
004734 964842rr       16991         MOV.B   ES,#SEG( _ParCnt )
004738 9908rrrr       16992         MOV.W   R0,#SOF( _ParCnt )
00473C 8200           16993         MOV.B   R0L,[R0]
00473E F307           16994         BEQ     _1198
                      16995 ; rs232cmd.c 4742                                       SCPIError = SyntaxErr;
004740 964842rr       16997         MOV.B   ES,#SEG( _SCPIError )
004744 9908rrrr       16998         MOV.W   R0,#SOF( _SCPIError )
004748 BA03           16999         MOV.W   [R0],#03H
                      17000         BR      _1208
00474A D500A6         +17000         JMP.L   _1208
00474A D500A600       +17000         JMP.L   _1208
00474E                17001 _1198:
                      17002 ; rs232cmd.c 4743                               else
                      17003 ; rs232cmd.c 4744                               {
                      17004 ; rs232cmd.c 4745                                       day = Calibration.GenlockCalibration.DACU
                            serDate % 100;
00474E 964842rr       17006         MOV.B   ES,#SEG( _Calibration+114 )
004752 9918rrrr       17007         MOV.W   R1,#SOF( _Calibration+114 )
004756 8B01           17008         MOV.W   R0,[R1+]
004758 8A11           17009         MOV.W   R1,[R1]
00475A B930           17010         MOV.W   R3,#00H
00475C 99280064       17011         MOV.W   R2,#064H
004760 964842rr       17012         MOV.B   ES,#SEG( _Calibration+114 )
004764 9948rrrr       17013         MOV.W   R4,#SOF( _Calibration+114 )
004768 8B0C           17014         MOV.W   [R4+],R0
00476A 8A1C           17015         MOV.W   [R4],R1
00476C C4rrrrrr       17016         FCALL   __UMODL
004770 8C0F04         17017         MOV.W   [R7+4],R0
004773 964842rr       17018         MOV.B   ES,#SEG( _Calibration+114 )
004777 9918rrrr       17019         MOV.W   R1,#SOF( _Calibration+114 )
00477B 8B01           17020         MOV.W   R0,[R1+]
00477D 8A11           17021         MOV.W   R1,[R1]
                      17022 ; rs232cmd.c 4746                                       month = ( Calibration.GenlockCalibration.
                            DACUserDate / 100) % 100;
00477F B930           17024         MOV.W   R3,#00H
004781 99280064       17025         MOV.W   R2,#064H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 278

ADDR   CODE            LINE SOURCELINE
004785 8953           17026         MOV.W   R5,R3
004787 8942           17027         MOV.W   R4,R2
004789 C4rrrrrr       17028         FCALL   __UDIVL
00478D 8935           17029         MOV.W   R3,R5
00478F 8924           17030         MOV.W   R2,R4
004791 C4rrrrrr       17031         FCALL   __UMODL
004795 8C0F02         17032         MOV.W   [R7+2],R0
                      17033 ; rs232cmd.c 4747                                       year = ( Calibration.GenlockCalibration.D
                            ACUserDate / 10000);
004798 B930           17035         MOV.W   R3,#00H
00479A 99282710       17036         MOV.W   R2,#02710H
00479E 964842rr       17037         MOV.B   ES,#SEG( _Calibration+114 )
0047A2 9918rrrr       17038         MOV.W   R1,#SOF( _Calibration+114 )
0047A6 8B01           17039         MOV.W   R0,[R1+]
0047A8 8A11           17040         MOV.W   R1,[R1]
0047AA C4rrrrrr       17041         FCALL   __UDIVL
0047AE 8A0F           17042         MOV.W   [R7],R0
                      17043 ; rs232cmd.c 4748       
                      17044 ; rs232cmd.c 4749                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
0047B0 91A8rr         17046         MOV.B   R5L,#SEG( __lc_bs )
0047B3 71BB           17047         XOR.B   R5H,R5H
0047B5 404706         17048         LEA     R4,R7+6
0047B8 8C0704         17049         MOV.W   R0,[R7+4]
0047BB 0F01           17050         PUSH.W  R0
0047BD 8C0704         17052         MOV.W   R0,[R7+4]
0047C0 0F01           17053         PUSH.W  R0
0047C2 8C0704         17055         MOV.W   R0,[R7+4]
0047C5 0F01           17056         PUSH.W  R0
0047C7 9918rrrr       17058         MOV.W   R1,#SEG( _1169 )
0047CB 9908rrrr       17059         MOV.W   R0,#SOF( _1169 )
0047CF 0F03           17060         PUSH.W  R0, R1
0047D1 8915           17062         MOV.W   R1,R5
0047D3 8904           17063         MOV.W   R0,R4
                      17064         CALL    _sprintf
0047D5 C4rrrrrr       +17064 ;       FCALL   _sprintf
0047D9 9970000A       17065         ADD.W   R7,#0AH
                      17067 ; rs232cmd.c 4750       
                      17068 ; rs232cmd.c 4751                                       rs232puts( buffer);
0047DD 8915           17070         MOV.W   R1,R5
0047DF 8904           17071         MOV.W   R0,R4
                      17072         CALL    _rs232puts
0047E1 C4rrrrrr       +17072 ;       FCALL   _rs232puts
                      17073 ; rs232cmd.c 4752                               }
                      17074 ; rs232cmd.c 4753                       }
0047E5 FE59           17076         BR      _1208
0047E5 FE5900         17076         BR      _1208
0047E8                17077 _1199:
                      17078 ; rs232cmd.c 4754                       else
                      17079 ; rs232cmd.c 4755                       {
                      17080 ; rs232cmd.c 4756                               if (( ParCnt != 3) || (( sscanf( Cmd, "%u,%u,%u",
                             &year, &month, &day)) != 3))
0047E8 964842rr       17082         MOV.B   ES,#SEG( _ParCnt )
0047EC 9908rrrr       17083         MOV.W   R0,#SOF( _ParCnt )
0047F0 8200           17084         MOV.B   R0L,[R0]
0047F2 910403         17085         CMP.B   R0L,#03H
0047F5 F21F           17086         BNE     _1200
0047F7 9168rr         17087         MOV.B   R3L,#SEG( __lc_bs )
0047FA 7177           17088         XOR.B   R3H,R3H
0047FC 8927           17089         MOV.W   R2,R7
0047FE 91A8rr         17090         MOV.B   R5L,#SEG( __lc_bs )
004801 71BB           17091         XOR.B   R5H,R5H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 279

ADDR   CODE            LINE SOURCELINE
004803 404702         17092         LEA     R4,R7+2
004806 9128rr         17093         MOV.B   R1L,#SEG( __lc_bs )
004809 7133           17094         XOR.B   R1H,R1H
00480B 400704         17095         LEA     R0,R7+4
00480E 0F03           17096         PUSH.W  R0, R1
004810 0F30           17098         PUSH.W  R4, R5
004812 0F0C           17100         PUSH.W  R2, R3
004814 9938rrrr       17102         MOV.W   R3,#SEG( _1170 )
004818 9928rrrr       17103         MOV.W   R2,#SOF( _1170 )
00481C 0F0C           17104         PUSH.W  R2, R3
00481E 9918rrrr       17106         MOV.W   R1,#SEG( _Cmd )
004822 9908rrrr       17107         MOV.W   R0,#SOF( _Cmd )
                      17108         CALL    _sscanf
004826 C4rrrrrr       +17108 ;       FCALL   _sscanf
00482A 99700010       17109         ADD.W   R7,#010H
00482E 99040003       17111         CMP.W   R0,#03H
004832 F306           17112         BEQ     _1201
004832 F306           17112         BEQ     _1201
004834                17113 _1200:
                      17114 ; rs232cmd.c 4757                                       SCPIError = SyntaxErr;
004834 964842rr       17116         MOV.B   ES,#SEG( _SCPIError )
004838 9908rrrr       17117         MOV.W   R0,#SOF( _SCPIError )
00483C BA03           17118         MOV.W   [R0],#03H
00483E FE2C           17119         BR      _1208
00483E FE2C           17119         BR      _1208
004840                17120 _1201:
                      17121 ; rs232cmd.c 4758                               else
                      17122 ; rs232cmd.c 4759                               {
                      17123 ; rs232cmd.c 4760                                       if ( ValidateDate( year, month, day) == F
                            AIL)
004840 8A07           17125         MOV.W   R0,[R7]
004842 8C1702         17126         MOV.W   R1,[R7+2]
004845 8C2704         17127         MOV.W   R2,[R7+4]
                      17128         CALL    _ValidateDate
004848 C4rrrrrr       +17128 ;       FCALL   _ValidateDate
00484C 6900           17129         OR.W    R0,R0
00484E F207           17130         BNE     _1202
                      17131 ; rs232cmd.c 4761                                               SCPIError = ExecErr;
004850 964842rr       17133         MOV.B   ES,#SEG( _SCPIError )
004854 9908rrrr       17134         MOV.W   R0,#SOF( _SCPIError )
004858 9A08001D       17135         MOV.W   [R0],#01DH
00485C FE1D           17136         BR      _1208
00485C FE1D           17136         BR      _1208
00485E                17137 _1202:
                      17138 ; rs232cmd.c 4762                                       else
                      17139 ; rs232cmd.c 4763                                       {
                      17140 ; rs232cmd.c 4764                                               Calibration.GenlockCalibration.DA
                            CUserDate = day + 100*month + 10000*year;
00485E 8C0702         17142         MOV.W   R0,[R7+2]
004861 E9000064       17143         MULU.W  R0,#064H
004865 0C0704         17144         ADD.W   R0,[R7+4]
004868 8A27           17145         MOV.W   R2,[R7]
00486A E9202710       17146         MULU.W  R2,#02710H
00486E 0902           17147         ADD.W   R0,R2
004870 B910           17148         MOVS.W  R1,#00H
004872 964842rr       17149         MOV.B   ES,#SEG( _Calibration+114 )
004876 9928rrrr       17150         MOV.W   R2,#SOF( _Calibration+114 )
00487A 8B0A           17151         MOV.W   [R2+],R0
00487C 8A1A           17152         MOV.W   [R2],R1
                      17153 ; rs232cmd.c 4765                                               
                      17154 ; rs232cmd.c 4766                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 280

ADDR   CODE            LINE SOURCELINE
00487E 9918rrrr       17156         MOV.W   R1,#SEG( _Calibration )
004882 9908rrrr       17157         MOV.W   R0,#SOF( _Calibration )
004886 964842rr       17158         MOV.B   ES,#SEG( _CalibrationPtr )
00488A 9928rrrr       17159         MOV.W   R2,#SOF( _CalibrationPtr )
00488E 8A22           17160         MOV.W   R2,[R2]
004890 993800E0       17161         MOV.W   R3,#0E0H
                      17162         CALL    _NV_Store
004894 C4rrrrrr       +17162 ;       FCALL   _NV_Store
                      17163 ; rs232cmd.c 4767                                       }                               
                      17164 ; rs232cmd.c 4768                               }
                      17165 ; rs232cmd.c 4769                       }
                      17166 ; rs232cmd.c 4770               }
004898                17168 _1208:
                      17169 ; rs232cmd.c 4771       }
004898 9970001A       17171         ADD.W   R7,#01AH
00489C 2F30           17173         POP.W   R4, R5
00489E D680           17175         RET
                      17177 ; rs232cmd.c 4772       
                      17178 ; rs232cmd.c 4773       /************************************************************************
                            **/
                      17179 ; rs232cmd.c 4774       /* FactGenlockGenURefDAC                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      17180 ; rs232cmd.c 4775       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17181 ; rs232cmd.c 4776       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      17182 ; rs232cmd.c 4777       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17183 ; rs232cmd.c 4778       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17184 ; rs232cmd.c 4779       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17185 ; rs232cmd.c 4780       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17186 ; rs232cmd.c 4781       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17187 ; rs232cmd.c 4782       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17188 ; rs232cmd.c 4783       /************************************************************************
                            **/
                      17189 ; rs232cmd.c 4784       void FactGenlockGenURefDAC( void)
                      17190 ; rs232cmd.c 4785       {
                      17191         ALIGN   1
                      17193         PUBLIC  _FactGenlockGenURefDAC
0048A0                17194 _FactGenlockGenURefDAC:
0048A0 0F30           17198         PUSH.W  R4, R5
0048A2 99720016       17200         SUB.W   R7,#016H
                      17204 ; rs232cmd.c 4786               char buffer[20];
                      17205 ; rs232cmd.c 4787               UI DACValue;
                      17206 ; rs232cmd.c 4788       
                      17207 ; rs232cmd.c 4789               if ( CmdExecute && !SCPIError)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 281

ADDR   CODE            LINE SOURCELINE
0048A6 964842rr       17209         MOV.B   ES,#SEG( _CmdExecute )
0048AA 9908rrrr       17210         MOV.W   R0,#SOF( _CmdExecute )
0048AE 8200           17211         MOV.B   R0L,[R0]
0048B0 F368           17212         BEQ     _1219
0048B2 964842rr       17213         MOV.B   ES,#SEG( _SCPIError )
0048B6 9908rrrr       17214         MOV.W   R0,#SOF( _SCPIError )
0048BA 8A00           17215         MOV.W   R0,[R0]
0048BC F262           17216         BNE     _1219
                      17217 ; rs232cmd.c 4790               {
                      17218 ; rs232cmd.c 4791                       if ( CmdRequest)
0048BE 964842rr       17220         MOV.B   ES,#SEG( _CmdRequest )
0048C2 9908rrrr       17221         MOV.W   R0,#SOF( _CmdRequest )
0048C6 8200           17222         MOV.B   R0L,[R0]
0048C8 F325           17223         BEQ     _1212
                      17224 ; rs232cmd.c 4792                       {
                      17225 ; rs232cmd.c 4793                               if ( ParCnt)
0048CA 964842rr       17227         MOV.B   ES,#SEG( _ParCnt )
0048CE 9908rrrr       17228         MOV.W   R0,#SOF( _ParCnt )
0048D2 8200           17229         MOV.B   R0L,[R0]
0048D4 F306           17230         BEQ     _1211
                      17231 ; rs232cmd.c 4794                                       SCPIError = SyntaxErr;
0048D6 964842rr       17233         MOV.B   ES,#SEG( _SCPIError )
0048DA 9908rrrr       17234         MOV.W   R0,#SOF( _SCPIError )
0048DE BA03           17235         MOV.W   [R0],#03H
0048E0 FE50           17236         BR      _1219
0048E0 FE50           17236         BR      _1219
0048E2                17237 _1211:
                      17238 ; rs232cmd.c 4795                               else
                      17239 ; rs232cmd.c 4796                               {
                      17240 ; rs232cmd.c 4797                                       sprintf( buffer, "%u\n", Calibration.Genl
                            ockCalibration.DACUserValue);
0048E2 91A8rr         17242         MOV.B   R5L,#SEG( __lc_bs )
0048E5 71BB           17243         XOR.B   R5H,R5H
0048E7 8947           17244         MOV.W   R4,R7
0048E9 964842rr       17245         MOV.B   ES,#SEG( _Calibration+120 )
0048ED 9908rrrr       17246         MOV.W   R0,#SOF( _Calibration+120 )
0048F1 8A00           17247         MOV.W   R0,[R0]
0048F3 0F01           17248         PUSH.W  R0
0048F5 9918rrrr       17250         MOV.W   R1,#SEG( _1009 )
0048F9 9908rrrr       17251         MOV.W   R0,#SOF( _1009 )
0048FD 0F03           17252         PUSH.W  R0, R1
0048FF 8915           17254         MOV.W   R1,R5
004901 8904           17255         MOV.W   R0,R4
                      17256         CALL    _sprintf
004903 C4rrrrrr       +17256 ;       FCALL   _sprintf
004907 A976           17257         ADDS.W  R7,#06H
                      17259 ; rs232cmd.c 4798       
                      17260 ; rs232cmd.c 4799                                       rs232puts( buffer);
004909 8915           17262         MOV.W   R1,R5
00490B 8904           17263         MOV.W   R0,R4
                      17264         CALL    _rs232puts
00490D C4rrrrrr       +17264 ;       FCALL   _rs232puts
                      17265 ; rs232cmd.c 4800                               }
                      17266 ; rs232cmd.c 4801                       }
004911 FE38           17268         BR      _1219
004911 FE3800         17268         BR      _1219
004914                17269 _1212:
                      17270 ; rs232cmd.c 4802                       else
                      17271 ; rs232cmd.c 4803                       {
                      17272 ; rs232cmd.c 4804                               if (( ParCnt != 1) || (( sscanf( Cmd, "%u", &DACV
                            alue)) != 1))
004914 964842rr       17274         MOV.B   ES,#SEG( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 282

ADDR   CODE            LINE SOURCELINE
004918 9908rrrr       17275         MOV.W   R0,#SOF( _ParCnt )
00491C 8200           17276         MOV.B   R0L,[R0]
00491E 910401         17277         CMP.B   R0L,#01H
004921 F216           17278         BNE     _1213
004923 9918rrrr       17279         MOV.W   R1,#SEG( _Cmd )
004927 9908rrrr       17280         MOV.W   R0,#SOF( _Cmd )
00492B 9168rr         17281         MOV.B   R3L,#SEG( __lc_bs )
00492E 7177           17282         XOR.B   R3H,R3H
004930 402714         17283         LEA     R2,R7+20
004933 0F0C           17284         PUSH.W  R2, R3
004935 9938rrrr       17286         MOV.W   R3,#SEG( _1185 )
004939 9928rrrr       17287         MOV.W   R2,#SOF( _1185 )
00493D 0F0C           17288         PUSH.W  R2, R3
                      17290         CALL    _sscanf
00493F C4rrrrrr       +17290 ;       FCALL   _sscanf
004943 99700008       17291         ADD.W   R7,#08H
004947 99040001       17293         CMP.W   R0,#01H
00494B F307           17294         BEQ     _1214
00494B F30700         17294         BEQ     _1214
00494E                17295 _1213:
                      17296 ; rs232cmd.c 4805                                       SCPIError = SyntaxErr;
00494E 964842rr       17298         MOV.B   ES,#SEG( _SCPIError )
004952 9908rrrr       17299         MOV.W   R0,#SOF( _SCPIError )
004956 BA03           17300         MOV.W   [R0],#03H
004958 FE14           17301         BR      _1219
004958 FE14           17301         BR      _1219
00495A                17302 _1214:
                      17303 ; rs232cmd.c 4806                               else
                      17304 ; rs232cmd.c 4807                               {
                      17305 ; rs232cmd.c 4808                                       Calibration.GenlockCalibration.DACUserVal
                            ue = DACValue;
00495A 8C0714         17307         MOV.W   R0,[R7+20]
00495D 964842rr       17308         MOV.B   ES,#SEG( _Calibration+120 )
004961 9918rrrr       17309         MOV.W   R1,#SOF( _Calibration+120 )
004965 8A09           17310         MOV.W   [R1],R0
                      17311 ; rs232cmd.c 4809                                                               
                      17312 ; rs232cmd.c 4810                                       NV_Store( &Calibration, CalibrationPtr, s
                            izeof( Calibration));
004967 9918rrrr       17314         MOV.W   R1,#SEG( _Calibration )
00496B 9908rrrr       17315         MOV.W   R0,#SOF( _Calibration )
00496F 964842rr       17316         MOV.B   ES,#SEG( _CalibrationPtr )
004973 9928rrrr       17317         MOV.W   R2,#SOF( _CalibrationPtr )
004977 8A22           17318         MOV.W   R2,[R2]
004979 993800E0       17319         MOV.W   R3,#0E0H
                      17320         CALL    _NV_Store
00497D C4rrrrrr       +17320 ;       FCALL   _NV_Store
                      17321 ; rs232cmd.c 4811                               }
                      17322 ; rs232cmd.c 4812                       }
                      17323 ; rs232cmd.c 4813               }
004982                17325 _1219:
                      17326 ; rs232cmd.c 4814       }
004982 99700016       17328         ADD.W   R7,#016H
004986 2F30           17330         POP.W   R4, R5
004988 D680           17332         RET
                      17334 ; rs232cmd.c 4815       
                      17335 ; rs232cmd.c 4816       /************************************************************************
                            **/
                      17336 ; rs232cmd.c 4817       /* FactGenlockGenHPHZero                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      17337 ; rs232cmd.c 4818       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 283

ADDR   CODE            LINE SOURCELINE
                                                    */
                      17338 ; rs232cmd.c 4819       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      17339 ; rs232cmd.c 4820       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17340 ; rs232cmd.c 4821       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17341 ; rs232cmd.c 4822       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17342 ; rs232cmd.c 4823       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17343 ; rs232cmd.c 4824       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17344 ; rs232cmd.c 4825       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17345 ; rs232cmd.c 4826       /************************************************************************
                            **/
                      17346 ; rs232cmd.c 4827       void FactGenlockGenHPHZero( void)
                      17347 ; rs232cmd.c 4828       {
                      17348         ALIGN   1
                      17350         PUBLIC  _FactGenlockGenHPHZero
00498A                17351 _FactGenlockGenHPHZero:
00498A 0F30           17355         PUSH.W  R4, R5
00498C 99720026       17357         SUB.W   R7,#026H
                      17362 ; rs232cmd.c 4829               char buffer[30];
                      17363 ; rs232cmd.c 4830               UL HPHZeroG, HPHZeroM;
                      17364 ; rs232cmd.c 4831       
                      17365 ; rs232cmd.c 4832               if ( CmdExecute && !SCPIError)
004990 964842rr       17367         MOV.B   ES,#SEG( _CmdExecute )
004994 9908rrrr       17368         MOV.W   R0,#SOF( _CmdExecute )
004998 8200           17369         MOV.B   R0L,[R0]
                      17370         BEQ     _1232
00499A F202           +17370 ;       BNE     _LG_1180
00499C D5008A         +17370 ;       JMP.L   _1232
0049A0 D5008A00       +17370 ;       JMP.L   _1232
0049A0                +17370 _LG_1180:
0049A0 964842rr       17371         MOV.B   ES,#SEG( _SCPIError )
0049A4 9908rrrr       17372         MOV.W   R0,#SOF( _SCPIError )
0049A8 8A00           17373         MOV.W   R0,[R0]
                      17374         BNE     _1232
0049AA F302           +17374 ;       BEQ     _LG_1182
0049AC D50082         +17374 ;       JMP.L   _1232
0049B0 D5008200       +17374 ;       JMP.L   _1232
0049B0                +17374 _LG_1182:
                      17375 ; rs232cmd.c 4833               {
                      17376 ; rs232cmd.c 4834                       if ( CmdRequest)
0049B0 964842rr       17378         MOV.B   ES,#SEG( _CmdRequest )
0049B4 9908rrrr       17379         MOV.W   R0,#SOF( _CmdRequest )
0049B8 8200           17380         MOV.B   R0L,[R0]
0049BA F32E           17381         BEQ     _1224
                      17382 ; rs232cmd.c 4835                       {
                      17383 ; rs232cmd.c 4836                               if ( ParCnt)
0049BC 964842rr       17385         MOV.B   ES,#SEG( _ParCnt )
0049C0 9908rrrr       17386         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 284

ADDR   CODE            LINE SOURCELINE
0049C4 8200           17387         MOV.B   R0L,[R0]
0049C6 F306           17388         BEQ     _1223
                      17389 ; rs232cmd.c 4837                                       SCPIError = SyntaxErr;
0049C8 964842rr       17391         MOV.B   ES,#SEG( _SCPIError )
0049CC 9908rrrr       17392         MOV.W   R0,#SOF( _SCPIError )
0049D0 BA03           17393         MOV.W   [R0],#03H
0049D2 FE6F           17394         BR      _1232
0049D2 FE6F           17394         BR      _1232
0049D4                17395 _1223:
                      17396 ; rs232cmd.c 4838                               else
                      17397 ; rs232cmd.c 4839                               {
                      17398 ; rs232cmd.c 4840                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .GenlockCalibration.HPHZeroG, 
                      17399 ; rs232cmd.c 4841                                                                                
                                                                                                Calibration.GenlockCalibratio
                            n.HPHZeroM);
0049D4 91A8rr         17401         MOV.B   R5L,#SEG( __lc_bs )
0049D7 71BB           17402         XOR.B   R5H,R5H
0049D9 8947           17403         MOV.W   R4,R7
0049DB 964842rr       17404         MOV.B   ES,#SEG( _Calibration+122 )
0049DF 9918rrrr       17405         MOV.W   R1,#SOF( _Calibration+122 )
0049E3 8B01           17406         MOV.W   R0,[R1+]
0049E5 8A11           17407         MOV.W   R1,[R1]
0049E7 964842rr       17408         MOV.B   ES,#SEG( _Calibration+130 )
0049EB 9938rrrr       17409         MOV.W   R3,#SOF( _Calibration+130 )
0049EF 8B23           17410         MOV.W   R2,[R3+]
0049F1 8A33           17411         MOV.W   R3,[R3]
0049F3 0F0C           17412         PUSH.W  R2, R3
0049F5 0F03           17414         PUSH.W  R0, R1
0049F7 9918rrrr       17416         MOV.W   R1,#SEG( _1222 )
0049FB 9908rrrr       17417         MOV.W   R0,#SOF( _1222 )
0049FF 0F03           17418         PUSH.W  R0, R1
004A01 8915           17420         MOV.W   R1,R5
004A03 8904           17421         MOV.W   R0,R4
                      17422         CALL    _sprintf
004A05 C4rrrrrr       +17422 ;       FCALL   _sprintf
004A09 9970000C       17423         ADD.W   R7,#0CH
                      17425 ; rs232cmd.c 4842                                       rs232puts( buffer);
004A0D 8915           17427         MOV.W   R1,R5
004A0F 8904           17428         MOV.W   R0,R4
                      17429         CALL    _rs232puts
004A11 C4rrrrrr       +17429 ;       FCALL   _rs232puts
                      17430 ; rs232cmd.c 4843                               }
                      17431 ; rs232cmd.c 4844                       }
004A15 FE4E           17433         BR      _1232
004A15 FE4E00         17433         BR      _1232
004A18                17434 _1224:
                      17435 ; rs232cmd.c 4845                       else
                      17436 ; rs232cmd.c 4846                       {
                      17437 ; rs232cmd.c 4847                               if ( !PasswordProtected)
004A18 964842rr       17439         MOV.B   ES,#SEG( _PasswordProtected )
004A1C 9908rrrr       17440         MOV.W   R0,#SOF( _PasswordProtected )
004A20 8A00           17441         MOV.W   R0,[R0]
004A22 F247           17442         BNE     _1232
                      17443 ; rs232cmd.c 4848                               {
                      17444 ; rs232cmd.c 4849                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &HPHZeroG, &HPHZeroM)) != 2))
004A24 964842rr       17446         MOV.B   ES,#SEG( _ParCnt )
004A28 9908rrrr       17447         MOV.W   R0,#SOF( _ParCnt )
004A2C 8200           17448         MOV.B   R0L,[R0]
004A2E 910402         17449         CMP.B   R0L,#02H
004A31 F21B           17450         BNE     _1225
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 285

ADDR   CODE            LINE SOURCELINE
004A33 9918rrrr       17451         MOV.W   R1,#SEG( _Cmd )
004A37 9908rrrr       17452         MOV.W   R0,#SOF( _Cmd )
004A3B 9168rr         17453         MOV.B   R3L,#SEG( __lc_bs )
004A3E 7177           17454         XOR.B   R3H,R3H
004A40 40271E         17455         LEA     R2,R7+30
004A43 91A8rr         17456         MOV.B   R5L,#SEG( __lc_bs )
004A46 71BB           17457         XOR.B   R5H,R5H
004A48 404722         17458         LEA     R4,R7+34
004A4B 0F30           17459         PUSH.W  R4, R5
004A4D 0F0C           17461         PUSH.W  R2, R3
004A4F 9938rrrr       17463         MOV.W   R3,#SEG( _1034 )
004A53 9928rrrr       17464         MOV.W   R2,#SOF( _1034 )
004A57 0F0C           17465         PUSH.W  R2, R3
                      17467         CALL    _sscanf
004A59 C4rrrrrr       +17467 ;       FCALL   _sscanf
004A5D 9970000C       17468         ADD.W   R7,#0CH
004A61 99040002       17470         CMP.W   R0,#02H
004A65 F307           17471         BEQ     _1226
004A65 F30700         17471         BEQ     _1226
004A68                17472 _1225:
                      17473 ; rs232cmd.c 4850                                               SCPIError = SyntaxErr;
004A68 964842rr       17475         MOV.B   ES,#SEG( _SCPIError )
004A6C 9908rrrr       17476         MOV.W   R0,#SOF( _SCPIError )
004A70 BA03           17477         MOV.W   [R0],#03H
004A72 FE1F           17478         BR      _1232
004A72 FE1F           17478         BR      _1232
004A74                17479 _1226:
                      17480 ; rs232cmd.c 4851                                       else
                      17481 ; rs232cmd.c 4852                                       {
                      17482 ; rs232cmd.c 4853                                               Calibration.GenlockCalibration.HP
                            HZeroG = HPHZeroG;
004A74 8C1720         17484         MOV.W   R1,[R7+32]
004A77 8C071E         17485         MOV.W   R0,[R7+30]
004A7A 964842rr       17486         MOV.B   ES,#SEG( _Calibration+122 )
004A7E 9928rrrr       17487         MOV.W   R2,#SOF( _Calibration+122 )
004A82 8B0A           17488         MOV.W   [R2+],R0
004A84 8A1A           17489         MOV.W   [R2],R1
                      17490 ; rs232cmd.c 4854                                               Calibration.GenlockCalibration.HP
                            HZeroM = HPHZeroM;
004A86 8C1724         17492         MOV.W   R1,[R7+36]
004A89 8C0722         17493         MOV.W   R0,[R7+34]
004A8C 964842rr       17494         MOV.B   ES,#SEG( _Calibration+130 )
004A90 9928rrrr       17495         MOV.W   R2,#SOF( _Calibration+130 )
004A94 8B0A           17496         MOV.W   [R2+],R0
004A96 8A1A           17497         MOV.W   [R2],R1
                      17498 ; rs232cmd.c 4855                                       
                      17499 ; rs232cmd.c 4856                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
004A98 9918rrrr       17501         MOV.W   R1,#SEG( _Calibration )
004A9C 9908rrrr       17502         MOV.W   R0,#SOF( _Calibration )
004AA0 964842rr       17503         MOV.B   ES,#SEG( _CalibrationPtr )
004AA4 9928rrrr       17504         MOV.W   R2,#SOF( _CalibrationPtr )
004AA8 8A22           17505         MOV.W   R2,[R2]
004AAA 993800E0       17506         MOV.W   R3,#0E0H
                      17507         CALL    _NV_Store
004AAE C4rrrrrr       +17507 ;       FCALL   _NV_Store
                      17508 ; rs232cmd.c 4857                                       }
                      17509 ; rs232cmd.c 4858                               }
                      17510 ; rs232cmd.c 4859                       }
                      17511 ; rs232cmd.c 4860               }
004AB2                17513 _1232:
                      17514 ; rs232cmd.c 4861       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 286

ADDR   CODE            LINE SOURCELINE
004AB2 99700026       17516         ADD.W   R7,#026H
004AB6 2F30           17518         POP.W   R4, R5
004AB8 D680           17520         RET
                      17522 ; rs232cmd.c 4862       
                      17523 ; rs232cmd.c 4863       /************************************************************************
                            **/
                      17524 ; rs232cmd.c 4864       /* FactGenlockGenPhase                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      17525 ; rs232cmd.c 4865       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17526 ; rs232cmd.c 4866       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      17527 ; rs232cmd.c 4867       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17528 ; rs232cmd.c 4868       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17529 ; rs232cmd.c 4869       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17530 ; rs232cmd.c 4870       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17531 ; rs232cmd.c 4871       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17532 ; rs232cmd.c 4872       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17533 ; rs232cmd.c 4873       /************************************************************************
                            **/
                      17534 ; rs232cmd.c 4874       void FactGenlockGenPhase( void)
                      17535 ; rs232cmd.c 4875       {
                      17536         ALIGN   1
                      17538         PUBLIC  _FactGenlockGenPhase
004ABA                17539 _FactGenlockGenPhase:
004ABA 0F30           17543         PUSH.W  R4, R5
004ABC 99720026       17545         SUB.W   R7,#026H
                      17550 ; rs232cmd.c 4876               char buffer[30];
                      17551 ; rs232cmd.c 4877               UL PhaseG, PhaseM;
                      17552 ; rs232cmd.c 4878       
                      17553 ; rs232cmd.c 4879               if ( CmdExecute && !SCPIError)
004AC0 964842rr       17555         MOV.B   ES,#SEG( _CmdExecute )
004AC4 9908rrrr       17556         MOV.W   R0,#SOF( _CmdExecute )
004AC8 8200           17557         MOV.B   R0L,[R0]
                      17558         BEQ     _1244
004ACA F202           +17558 ;       BNE     _LG_1194
004ACC D5008A         +17558 ;       JMP.L   _1244
004AD0 D5008A00       +17558 ;       JMP.L   _1244
004AD0                +17558 _LG_1194:
004AD0 964842rr       17559         MOV.B   ES,#SEG( _SCPIError )
004AD4 9908rrrr       17560         MOV.W   R0,#SOF( _SCPIError )
004AD8 8A00           17561         MOV.W   R0,[R0]
                      17562         BNE     _1244
004ADA F302           +17562 ;       BEQ     _LG_1196
004ADC D50082         +17562 ;       JMP.L   _1244
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 287

ADDR   CODE            LINE SOURCELINE
004AE0 D5008200       +17562 ;       JMP.L   _1244
004AE0                +17562 _LG_1196:
                      17563 ; rs232cmd.c 4880               {
                      17564 ; rs232cmd.c 4881                       if ( CmdRequest)
004AE0 964842rr       17566         MOV.B   ES,#SEG( _CmdRequest )
004AE4 9908rrrr       17567         MOV.W   R0,#SOF( _CmdRequest )
004AE8 8200           17568         MOV.B   R0L,[R0]
004AEA F32E           17569         BEQ     _1236
                      17570 ; rs232cmd.c 4882                       {
                      17571 ; rs232cmd.c 4883                               if ( ParCnt)
004AEC 964842rr       17573         MOV.B   ES,#SEG( _ParCnt )
004AF0 9908rrrr       17574         MOV.W   R0,#SOF( _ParCnt )
004AF4 8200           17575         MOV.B   R0L,[R0]
004AF6 F306           17576         BEQ     _1235
                      17577 ; rs232cmd.c 4884                                       SCPIError = SyntaxErr;
004AF8 964842rr       17579         MOV.B   ES,#SEG( _SCPIError )
004AFC 9908rrrr       17580         MOV.W   R0,#SOF( _SCPIError )
004B00 BA03           17581         MOV.W   [R0],#03H
004B02 FE6F           17582         BR      _1244
004B02 FE6F           17582         BR      _1244
004B04                17583 _1235:
                      17584 ; rs232cmd.c 4885                               else
                      17585 ; rs232cmd.c 4886                               {
                      17586 ; rs232cmd.c 4887                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .GenlockCalibration.PhaseG, 
                      17587 ; rs232cmd.c 4888                                                                                
                                                                                                Calibration.GenlockCalibratio
                            n.PhaseM);
004B04 91A8rr         17589         MOV.B   R5L,#SEG( __lc_bs )
004B07 71BB           17590         XOR.B   R5H,R5H
004B09 8947           17591         MOV.W   R4,R7
004B0B 964842rr       17592         MOV.B   ES,#SEG( _Calibration+126 )
004B0F 9918rrrr       17593         MOV.W   R1,#SOF( _Calibration+126 )
004B13 8B01           17594         MOV.W   R0,[R1+]
004B15 8A11           17595         MOV.W   R1,[R1]
004B17 964842rr       17596         MOV.B   ES,#SEG( _Calibration+134 )
004B1B 9938rrrr       17597         MOV.W   R3,#SOF( _Calibration+134 )
004B1F 8B23           17598         MOV.W   R2,[R3+]
004B21 8A33           17599         MOV.W   R3,[R3]
004B23 0F0C           17600         PUSH.W  R2, R3
004B25 0F03           17602         PUSH.W  R0, R1
004B27 9918rrrr       17604         MOV.W   R1,#SEG( _1222 )
004B2B 9908rrrr       17605         MOV.W   R0,#SOF( _1222 )
004B2F 0F03           17606         PUSH.W  R0, R1
004B31 8915           17608         MOV.W   R1,R5
004B33 8904           17609         MOV.W   R0,R4
                      17610         CALL    _sprintf
004B35 C4rrrrrr       +17610 ;       FCALL   _sprintf
004B39 9970000C       17611         ADD.W   R7,#0CH
                      17613 ; rs232cmd.c 4889                                       rs232puts( buffer);
004B3D 8915           17615         MOV.W   R1,R5
004B3F 8904           17616         MOV.W   R0,R4
                      17617         CALL    _rs232puts
004B41 C4rrrrrr       +17617 ;       FCALL   _rs232puts
                      17618 ; rs232cmd.c 4890                               }
                      17619 ; rs232cmd.c 4891                       }
004B45 FE4E           17621         BR      _1244
004B45 FE4E00         17621         BR      _1244
004B48                17622 _1236:
                      17623 ; rs232cmd.c 4892                       else
                      17624 ; rs232cmd.c 4893                       {
                      17625 ; rs232cmd.c 4894                               if ( !PasswordProtected)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 288

ADDR   CODE            LINE SOURCELINE
004B48 964842rr       17627         MOV.B   ES,#SEG( _PasswordProtected )
004B4C 9908rrrr       17628         MOV.W   R0,#SOF( _PasswordProtected )
004B50 8A00           17629         MOV.W   R0,[R0]
004B52 F247           17630         BNE     _1244
                      17631 ; rs232cmd.c 4895                               {
                      17632 ; rs232cmd.c 4896                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
004B54 964842rr       17634         MOV.B   ES,#SEG( _ParCnt )
004B58 9908rrrr       17635         MOV.W   R0,#SOF( _ParCnt )
004B5C 8200           17636         MOV.B   R0L,[R0]
004B5E 910402         17637         CMP.B   R0L,#02H
004B61 F21B           17638         BNE     _1237
004B63 9918rrrr       17639         MOV.W   R1,#SEG( _Cmd )
004B67 9908rrrr       17640         MOV.W   R0,#SOF( _Cmd )
004B6B 9168rr         17641         MOV.B   R3L,#SEG( __lc_bs )
004B6E 7177           17642         XOR.B   R3H,R3H
004B70 40271E         17643         LEA     R2,R7+30
004B73 91A8rr         17644         MOV.B   R5L,#SEG( __lc_bs )
004B76 71BB           17645         XOR.B   R5H,R5H
004B78 404722         17646         LEA     R4,R7+34
004B7B 0F30           17647         PUSH.W  R4, R5
004B7D 0F0C           17649         PUSH.W  R2, R3
004B7F 9938rrrr       17651         MOV.W   R3,#SEG( _1034 )
004B83 9928rrrr       17652         MOV.W   R2,#SOF( _1034 )
004B87 0F0C           17653         PUSH.W  R2, R3
                      17655         CALL    _sscanf
004B89 C4rrrrrr       +17655 ;       FCALL   _sscanf
004B8D 9970000C       17656         ADD.W   R7,#0CH
004B91 99040002       17658         CMP.W   R0,#02H
004B95 F307           17659         BEQ     _1238
004B95 F30700         17659         BEQ     _1238
004B98                17660 _1237:
                      17661 ; rs232cmd.c 4897                                               SCPIError = SyntaxErr;
004B98 964842rr       17663         MOV.B   ES,#SEG( _SCPIError )
004B9C 9908rrrr       17664         MOV.W   R0,#SOF( _SCPIError )
004BA0 BA03           17665         MOV.W   [R0],#03H
004BA2 FE1F           17666         BR      _1244
004BA2 FE1F           17666         BR      _1244
004BA4                17667 _1238:
                      17668 ; rs232cmd.c 4898                                       else
                      17669 ; rs232cmd.c 4899                                       {
                      17670 ; rs232cmd.c 4900                                               Calibration.GenlockCalibration.Ph
                            aseG = PhaseG;
004BA4 8C1720         17672         MOV.W   R1,[R7+32]
004BA7 8C071E         17673         MOV.W   R0,[R7+30]
004BAA 964842rr       17674         MOV.B   ES,#SEG( _Calibration+126 )
004BAE 9928rrrr       17675         MOV.W   R2,#SOF( _Calibration+126 )
004BB2 8B0A           17676         MOV.W   [R2+],R0
004BB4 8A1A           17677         MOV.W   [R2],R1
                      17678 ; rs232cmd.c 4901                                               Calibration.GenlockCalibration.Ph
                            aseM = PhaseM;
004BB6 8C1724         17680         MOV.W   R1,[R7+36]
004BB9 8C0722         17681         MOV.W   R0,[R7+34]
004BBC 964842rr       17682         MOV.B   ES,#SEG( _Calibration+134 )
004BC0 9928rrrr       17683         MOV.W   R2,#SOF( _Calibration+134 )
004BC4 8B0A           17684         MOV.W   [R2+],R0
004BC6 8A1A           17685         MOV.W   [R2],R1
                      17686 ; rs232cmd.c 4902                                       
                      17687 ; rs232cmd.c 4903                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
004BC8 9918rrrr       17689         MOV.W   R1,#SEG( _Calibration )
004BCC 9908rrrr       17690         MOV.W   R0,#SOF( _Calibration )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 289

ADDR   CODE            LINE SOURCELINE
004BD0 964842rr       17691         MOV.B   ES,#SEG( _CalibrationPtr )
004BD4 9928rrrr       17692         MOV.W   R2,#SOF( _CalibrationPtr )
004BD8 8A22           17693         MOV.W   R2,[R2]
004BDA 993800E0       17694         MOV.W   R3,#0E0H
                      17695         CALL    _NV_Store
004BDE C4rrrrrr       +17695 ;       FCALL   _NV_Store
                      17696 ; rs232cmd.c 4904                                       }
                      17697 ; rs232cmd.c 4905                               }
                      17698 ; rs232cmd.c 4906                       }
                      17699 ; rs232cmd.c 4907               }
004BE2                17701 _1244:
                      17702 ; rs232cmd.c 4908       }
004BE2 99700026       17704         ADD.W   R7,#026H
004BE6 2F30           17706         POP.W   R4, R5
004BE8 D680           17708         RET
                      17710 ; rs232cmd.c 4909       
                      17711 ; rs232cmd.c 4910       /************************************************************************
                            **/
                      17712 ; rs232cmd.c 4911       /* FactBBGenDate                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      17713 ; rs232cmd.c 4912       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17714 ; rs232cmd.c 4913       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      17715 ; rs232cmd.c 4914       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17716 ; rs232cmd.c 4915       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17717 ; rs232cmd.c 4916       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17718 ; rs232cmd.c 4917       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17719 ; rs232cmd.c 4918       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17720 ; rs232cmd.c 4919       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17721 ; rs232cmd.c 4920       /************************************************************************
                            **/
                      17722 ; rs232cmd.c 4921       void FactBBGenDate( void)
                      17723 ; rs232cmd.c 4922       {
                      17724         ALIGN   1
                      17726         PUBLIC  _FactBBGenDate
004BEA                17727 _FactBBGenDate:
004BEA 0F30           17731         PUSH.W  R4, R5
004BEC 9972001E       17733         SUB.W   R7,#01EH
                      17739 ; rs232cmd.c 4923               UI year, month, day;
                      17740 ; rs232cmd.c 4924               char buffer[20];
                      17741 ; rs232cmd.c 4925       
                      17742 ; rs232cmd.c 4926               if ( CmdExecute && !SCPIError)
004BF0 964842rr       17744         MOV.B   ES,#SEG( _CmdExecute )
004BF4 9908rrrr       17745         MOV.W   R0,#SOF( _CmdExecute )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 290

ADDR   CODE            LINE SOURCELINE
004BF8 8200           17746         MOV.B   R0L,[R0]
                      17747         BEQ     _1258
004BFA F202           +17747 ;       BNE     _LG_1208
004BFC D500D0         +17747 ;       JMP.L   _1258
004C00 D500D000       +17747 ;       JMP.L   _1258
004C00                +17747 _LG_1208:
004C00 964842rr       17748         MOV.B   ES,#SEG( _SCPIError )
004C04 9908rrrr       17749         MOV.W   R0,#SOF( _SCPIError )
004C08 8A00           17750         MOV.W   R0,[R0]
                      17751         BNE     _1258
004C0A F302           +17751 ;       BEQ     _LG_1210
004C0C D500C8         +17751 ;       JMP.L   _1258
004C10 D500C800       +17751 ;       JMP.L   _1258
004C10                +17751 _LG_1210:
                      17752 ; rs232cmd.c 4927               {
                      17753 ; rs232cmd.c 4928                       if ( CmdRequest)
004C10 964842rr       17755         MOV.B   ES,#SEG( _CmdRequest )
004C14 9908rrrr       17756         MOV.W   R0,#SOF( _CmdRequest )
004C18 8200           17757         MOV.B   R0L,[R0]
004C1A F358           17758         BEQ     _1248
                      17759 ; rs232cmd.c 4929                       {
                      17760 ; rs232cmd.c 4930                               if ( ParCnt)
004C1C 964842rr       17762         MOV.B   ES,#SEG( _ParCnt )
004C20 9908rrrr       17763         MOV.W   R0,#SOF( _ParCnt )
004C24 8200           17764         MOV.B   R0L,[R0]
004C26 F307           17765         BEQ     _1247
                      17766 ; rs232cmd.c 4931                                       SCPIError = SyntaxErr;
004C28 964842rr       17768         MOV.B   ES,#SEG( _SCPIError )
004C2C 9908rrrr       17769         MOV.W   R0,#SOF( _SCPIError )
004C30 BA03           17770         MOV.W   [R0],#03H
                      17771         BR      _1258
004C32 D500B5         +17771         JMP.L   _1258
004C32 D500B500       +17771         JMP.L   _1258
004C36                17772 _1247:
                      17773 ; rs232cmd.c 4932                               else
                      17774 ; rs232cmd.c 4933                               {
                      17775 ; rs232cmd.c 4934                                       day = Calibration.BBCalibration[Suffix[0]
                            ].Date % 100;
004C36 964842rr       17777         MOV.B   ES,#SEG( _Suffix )
004C3A 9908rrrr       17778         MOV.W   R0,#SOF( _Suffix )
004C3E 8A00           17779         MOV.W   R0,[R0]
004C40 E9000014       17780         MULU.W  R0,#014H
004C44 B910           17781         MOVS.W  R1,#00H
004C46 964842rr       17782         MOV.B   ES,#SEG( _Calibration+138 )
004C4A 8D10rrrr       17783         MOV.W   R1,[R0+SOF( _Calibration+140 )]
004C4E 8D00rrrr       17784         MOV.W   R0,[R0+SOF( _Calibration+138 )]
004C52 B930           17785         MOV.W   R3,#00H
004C54 99280064       17786         MOV.W   R2,#064H
004C58 8C1F02         17787         MOV.W   [R7+2],R1
004C5B 8A0F           17788         MOV.W   [R7],R0
004C5D C4rrrrrr       17789         FCALL   __UMODL
004C61 8C0F08         17790         MOV.W   [R7+8],R0
                      17791 ; rs232cmd.c 4935                                       month = ( Calibration.BBCalibration[Suffi
                            x[0]].Date / 100) % 100;
004C64 B930           17793         MOV.W   R3,#00H
004C66 99280064       17794         MOV.W   R2,#064H
004C6A 8953           17795         MOV.W   R5,R3
004C6C 8942           17796         MOV.W   R4,R2
004C6E 8C1702         17797         MOV.W   R1,[R7+2]
004C71 8A07           17798         MOV.W   R0,[R7]
004C73 C4rrrrrr       17799         FCALL   __UDIVL
004C77 8935           17800         MOV.W   R3,R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 291

ADDR   CODE            LINE SOURCELINE
004C79 8924           17801         MOV.W   R2,R4
004C7B C4rrrrrr       17802         FCALL   __UMODL
004C7F 8C0F06         17803         MOV.W   [R7+6],R0
                      17804 ; rs232cmd.c 4936                                       year = ( Calibration.BBCalibration[Suffix
                            [0]].Date / 10000);
004C82 B930           17806         MOV.W   R3,#00H
004C84 99282710       17807         MOV.W   R2,#02710H
004C88 8C1702         17808         MOV.W   R1,[R7+2]
004C8B 8A07           17809         MOV.W   R0,[R7]
004C8D C4rrrrrr       17810         FCALL   __UDIVL
004C91 8C0F04         17811         MOV.W   [R7+4],R0
                      17812 ; rs232cmd.c 4937       
                      17813 ; rs232cmd.c 4938                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
004C94 91A8rr         17815         MOV.B   R5L,#SEG( __lc_bs )
004C97 71BB           17816         XOR.B   R5H,R5H
004C99 40470A         17817         LEA     R4,R7+10
004C9C 8C0708         17818         MOV.W   R0,[R7+8]
004C9F 0F01           17819         PUSH.W  R0
004CA1 8C0708         17821         MOV.W   R0,[R7+8]
004CA4 0F01           17822         PUSH.W  R0
004CA6 8C0708         17824         MOV.W   R0,[R7+8]
004CA9 0F01           17825         PUSH.W  R0
004CAB 9918rrrr       17827         MOV.W   R1,#SEG( _1169 )
004CAF 9908rrrr       17828         MOV.W   R0,#SOF( _1169 )
004CB3 0F03           17829         PUSH.W  R0, R1
004CB5 8915           17831         MOV.W   R1,R5
004CB7 8904           17832         MOV.W   R0,R4
                      17833         CALL    _sprintf
004CB9 C4rrrrrr       +17833 ;       FCALL   _sprintf
004CBD 9970000A       17834         ADD.W   R7,#0AH
                      17836 ; rs232cmd.c 4939       
                      17837 ; rs232cmd.c 4940                                       rs232puts( buffer);
004CC1 8915           17839         MOV.W   R1,R5
004CC3 8904           17840         MOV.W   R0,R4
                      17841         CALL    _rs232puts
004CC5 C4rrrrrr       +17841 ;       FCALL   _rs232puts
                      17842 ; rs232cmd.c 4941                               }
                      17843 ; rs232cmd.c 4942                       }
004CC9 FE6A           17845         BR      _1258
004CC9 FE6A00         17845         BR      _1258
004CCC                17846 _1248:
                      17847 ; rs232cmd.c 4943                       else
                      17848 ; rs232cmd.c 4944                       {
                      17849 ; rs232cmd.c 4945                               if ( !PasswordProtected)
004CCC 964842rr       17851         MOV.B   ES,#SEG( _PasswordProtected )
004CD0 9908rrrr       17852         MOV.W   R0,#SOF( _PasswordProtected )
004CD4 8A00           17853         MOV.W   R0,[R0]
004CD6 F263           17854         BNE     _1258
                      17855 ; rs232cmd.c 4946                               {
                      17856 ; rs232cmd.c 4947                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
004CD8 964842rr       17858         MOV.B   ES,#SEG( _ParCnt )
004CDC 9908rrrr       17859         MOV.W   R0,#SOF( _ParCnt )
004CE0 8200           17860         MOV.B   R0L,[R0]
004CE2 910403         17861         CMP.B   R0L,#03H
004CE5 F220           17862         BNE     _1249
004CE7 9168rr         17863         MOV.B   R3L,#SEG( __lc_bs )
004CEA 7177           17864         XOR.B   R3H,R3H
004CEC 402704         17865         LEA     R2,R7+4
004CEF 91A8rr         17866         MOV.B   R5L,#SEG( __lc_bs )
004CF2 71BB           17867         XOR.B   R5H,R5H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 292

ADDR   CODE            LINE SOURCELINE
004CF4 404706         17868         LEA     R4,R7+6
004CF7 9128rr         17869         MOV.B   R1L,#SEG( __lc_bs )
004CFA 7133           17870         XOR.B   R1H,R1H
004CFC 400708         17871         LEA     R0,R7+8
004CFF 0F03           17872         PUSH.W  R0, R1
004D01 0F30           17874         PUSH.W  R4, R5
004D03 0F0C           17876         PUSH.W  R2, R3
004D05 9938rrrr       17878         MOV.W   R3,#SEG( _1170 )
004D09 9928rrrr       17879         MOV.W   R2,#SOF( _1170 )
004D0D 0F0C           17880         PUSH.W  R2, R3
004D0F 9918rrrr       17882         MOV.W   R1,#SEG( _Cmd )
004D13 9908rrrr       17883         MOV.W   R0,#SOF( _Cmd )
                      17884         CALL    _sscanf
004D17 C4rrrrrr       +17884 ;       FCALL   _sscanf
004D1B 99700010       17885         ADD.W   R7,#010H
004D1F 99040003       17887         CMP.W   R0,#03H
004D23 F307           17888         BEQ     _1250
004D23 F30700         17888         BEQ     _1250
004D26                17889 _1249:
                      17890 ; rs232cmd.c 4948                                               SCPIError = SyntaxErr;
004D26 964842rr       17892         MOV.B   ES,#SEG( _SCPIError )
004D2A 9908rrrr       17893         MOV.W   R0,#SOF( _SCPIError )
004D2E BA03           17894         MOV.W   [R0],#03H
004D30 FE36           17895         BR      _1258
004D30 FE36           17895         BR      _1258
004D32                17896 _1250:
                      17897 ; rs232cmd.c 4949                                       else
                      17898 ; rs232cmd.c 4950                                       {
                      17899 ; rs232cmd.c 4951                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
004D32 8C0704         17901         MOV.W   R0,[R7+4]
004D35 8C1706         17902         MOV.W   R1,[R7+6]
004D38 8C2708         17903         MOV.W   R2,[R7+8]
                      17904         CALL    _ValidateDate
004D3B C4rrrrrr       +17904 ;       FCALL   _ValidateDate
004D3F 6900           17905         OR.W    R0,R0
004D41 F208           17906         BNE     _1251
                      17907 ; rs232cmd.c 4952                                                       SCPIError = ExecErr;
004D43 964842rr       17909         MOV.B   ES,#SEG( _SCPIError )
004D47 9908rrrr       17910         MOV.W   R0,#SOF( _SCPIError )
004D4B 9A08001D       17911         MOV.W   [R0],#01DH
004D4F FE27           17912         BR      _1258
004D4F FE2700         17912         BR      _1258
004D52                17913 _1251:
                      17914 ; rs232cmd.c 4953                                               else
                      17915 ; rs232cmd.c 4954                                               {
                      17916 ; rs232cmd.c 4955                                                       Calibration.BBCalibration
                            [Suffix[0]].Date = day + 100*month + 10000*year;
004D52 8C0706         17918         MOV.W   R0,[R7+6]
004D55 E9000064       17919         MULU.W  R0,#064H
004D59 0C0708         17920         ADD.W   R0,[R7+8]
004D5C 8C2704         17921         MOV.W   R2,[R7+4]
004D5F E9202710       17922         MULU.W  R2,#02710H
004D63 0902           17923         ADD.W   R0,R2
004D65 B910           17924         MOVS.W  R1,#00H
004D67 964842rr       17925         MOV.B   ES,#SEG( _Suffix )
004D6B 9928rrrr       17926         MOV.W   R2,#SOF( _Suffix )
004D6F 8A22           17927         MOV.W   R2,[R2]
004D71 E9200014       17928         MULU.W  R2,#014H
004D75 B930           17929         MOVS.W  R3,#00H
004D77 964842rr       17930         MOV.B   ES,#SEG( _Calibration+138 )
004D7B 8D0Arrrr       17931         MOV.W   [R2+SOF( _Calibration+138 )],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 293

ADDR   CODE            LINE SOURCELINE
004D7F 8D1Arrrr       17932         MOV.W   [R2+SOF( _Calibration+140 )],R1
                      17933 ; rs232cmd.c 4956                                               
                      17934 ; rs232cmd.c 4957                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
004D83 9918rrrr       17936         MOV.W   R1,#SEG( _Calibration )
004D87 9908rrrr       17937         MOV.W   R0,#SOF( _Calibration )
004D8B 964842rr       17938         MOV.B   ES,#SEG( _CalibrationPtr )
004D8F 9928rrrr       17939         MOV.W   R2,#SOF( _CalibrationPtr )
004D93 8A22           17940         MOV.W   R2,[R2]
004D95 993800E0       17941         MOV.W   R3,#0E0H
                      17942         CALL    _NV_Store
004D99 C4rrrrrr       +17942 ;       FCALL   _NV_Store
                      17943 ; rs232cmd.c 4958                                               }
                      17944 ; rs232cmd.c 4959                                       }                               
                      17945 ; rs232cmd.c 4960                               }
                      17946 ; rs232cmd.c 4961                       }
                      17947 ; rs232cmd.c 4962               }
004D9E                17949 _1258:
                      17950 ; rs232cmd.c 4963       }
004D9E 9970001E       17952         ADD.W   R7,#01EH
004DA2 2F30           17954         POP.W   R4, R5
004DA4 D680           17956         RET
                      17958 ; rs232cmd.c 4964       
                      17959 ; rs232cmd.c 4965       /************************************************************************
                            **/
                      17960 ; rs232cmd.c 4966       /* FactBBGenVersion                                                      
                                                                                                                             
                                         RS232CMD.C */
                      17961 ; rs232cmd.c 4967       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17962 ; rs232cmd.c 4968       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      17963 ; rs232cmd.c 4969       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      17964 ; rs232cmd.c 4970       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17965 ; rs232cmd.c 4971       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17966 ; rs232cmd.c 4972       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17967 ; rs232cmd.c 4973       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17968 ; rs232cmd.c 4974       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17969 ; rs232cmd.c 4975       /************************************************************************
                            **/
                      17970 ; rs232cmd.c 4976       void FactBBGenVersion( void)
                      17971 ; rs232cmd.c 4977       {
                      17972         ALIGN   1
                      17974         PUBLIC  _FactBBGenVersion
004DA6                17975 _FactBBGenVersion:
004DA6 0F30           17979         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 294

ADDR   CODE            LINE SOURCELINE
004DA8 9972000A       17981         SUB.W   R7,#0AH
                      17984 ; rs232cmd.c 4978               char result[10];
                      17985 ; rs232cmd.c 4979       
                      17986 ; rs232cmd.c 4980               if ( CmdExecute && !SCPIError)
004DAC 964842rr       17988         MOV.B   ES,#SEG( _CmdExecute )
004DB0 9908rrrr       17989         MOV.W   R0,#SOF( _CmdExecute )
004DB4 8200           17990         MOV.B   R0L,[R0]
004DB6 F33D           17991         BEQ     _1269
004DB8 964842rr       17992         MOV.B   ES,#SEG( _SCPIError )
004DBC 9908rrrr       17993         MOV.W   R0,#SOF( _SCPIError )
004DC0 8A00           17994         MOV.W   R0,[R0]
004DC2 F237           17995         BNE     _1269
                      17996 ; rs232cmd.c 4981               {
                      17997 ; rs232cmd.c 4982                       if ( CmdRequest)
004DC4 964842rr       17999         MOV.B   ES,#SEG( _CmdRequest )
004DC8 9908rrrr       18000         MOV.W   R0,#SOF( _CmdRequest )
004DCC 8200           18001         MOV.B   R0L,[R0]
004DCE F32C           18002         BEQ     _1264
                      18003 ; rs232cmd.c 4983                       {
                      18004 ; rs232cmd.c 4984                               if ( ParCnt || Suffix[0])
004DD0 964842rr       18006         MOV.B   ES,#SEG( _ParCnt )
004DD4 9908rrrr       18007         MOV.W   R0,#SOF( _ParCnt )
004DD8 8200           18008         MOV.B   R0L,[R0]
004DDA F206           18009         BNE     _1261
004DDC 964842rr       18010         MOV.B   ES,#SEG( _Suffix )
004DE0 9908rrrr       18011         MOV.W   R0,#SOF( _Suffix )
004DE4 8A00           18012         MOV.W   R0,[R0]
004DE6 F306           18013         BEQ     _1262
004DE6 F306           18013         BEQ     _1262
004DE8                18014 _1261:
                      18015 ; rs232cmd.c 4985                                       SCPIError = SyntaxErr;
004DE8 964842rr       18017         MOV.B   ES,#SEG( _SCPIError )
004DEC 9908rrrr       18018         MOV.W   R0,#SOF( _SCPIError )
004DF0 BA03           18019         MOV.W   [R0],#03H
004DF2 FE1F           18020         BR      _1269
004DF2 FE1F           18020         BR      _1269
004DF4                18021 _1262:
                      18022 ; rs232cmd.c 4986                               else
                      18023 ; rs232cmd.c 4987                               {
                      18024 ; rs232cmd.c 4988                                       if ( BBVersion( result) == OK)
004DF4 91A8rr         18026         MOV.B   R5L,#SEG( __lc_bs )
004DF7 71BB           18027         XOR.B   R5H,R5H
004DF9 8947           18028         MOV.W   R4,R7
004DFB 8915           18029         MOV.W   R1,R5
004DFD 8904           18030         MOV.W   R0,R4
                      18031         CALL    _BBVersion
004DFF C4rrrrrr       +18031 ;       FCALL   _BBVersion
004E03 9904FFFF       18032         CMP.W   R0,#0FFFFH
004E07 F209           18033         BNE     _1263
                      18034 ; rs232cmd.c 4989                                       {
                      18035 ; rs232cmd.c 4990                                               rs232puts( result);
004E09 8915           18037         MOV.W   R1,R5
004E0B 8904           18038         MOV.W   R0,R4
                      18039         CALL    _rs232puts
004E0D C4rrrrrr       +18039 ;       FCALL   _rs232puts
                      18040 ; rs232cmd.c 4991                                               rs232putchar( '\n');
004E11 91080A         18042         MOV.B   R0L,#0AH
                      18043         CALL    _rs232putchar
004E14 C4rrrrrr       +18043 ;       FCALL   _rs232putchar
                      18044 ; rs232cmd.c 4992                                       }
004E18 FE0C           18046         BR      _1269
004E18 FE0C           18046         BR      _1269
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 295

ADDR   CODE            LINE SOURCELINE
004E1A                18047 _1263:
                      18048 ; rs232cmd.c 4993                                       else
                      18049 ; rs232cmd.c 4994                                               SCPIError = ExecErr;             
                                    
004E1A 964842rr       18051         MOV.B   ES,#SEG( _SCPIError )
004E1E 9908rrrr       18052         MOV.W   R0,#SOF( _SCPIError )
004E22 9A08001D       18053         MOV.W   [R0],#01DH
                      18054 ; rs232cmd.c 4995                               }
                      18055 ; rs232cmd.c 4996                       }
004E26 FE05           18057         BR      _1269
004E26 FE05           18057         BR      _1269
004E28                18058 _1264:
                      18059 ; rs232cmd.c 4997                       else
                      18060 ; rs232cmd.c 4998                               SCPIError = SyntaxErr;
004E28 964842rr       18062         MOV.B   ES,#SEG( _SCPIError )
004E2C 9908rrrr       18063         MOV.W   R0,#SOF( _SCPIError )
004E30 BA03           18064         MOV.W   [R0],#03H
                      18065 ; rs232cmd.c 4999               }
004E32                18067 _1269:
                      18068 ; rs232cmd.c 5000       }
004E32 9970000A       18070         ADD.W   R7,#0AH
004E36 2F30           18072         POP.W   R4, R5
004E38 D680           18074         RET
                      18076 ; rs232cmd.c 5001       
                      18077 ; rs232cmd.c 5002       /************************************************************************
                            **/
                      18078 ; rs232cmd.c 5003       /* FactBBGenSignal                                                       
                                                                                                                             
                                         RS232CMD.C */
                      18079 ; rs232cmd.c 5004       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18080 ; rs232cmd.c 5005       /* Author:              Kim Engedahl, DEV, 000503                        
                                                                                                                             
                                    */
                      18081 ; rs232cmd.c 5006       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      18082 ; rs232cmd.c 5007       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18083 ; rs232cmd.c 5008       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18084 ; rs232cmd.c 5009       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18085 ; rs232cmd.c 5010       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18086 ; rs232cmd.c 5011       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18087 ; rs232cmd.c 5012       /************************************************************************
                            **/
                      18088 ; rs232cmd.c 5013       void FactBBGenSignal( void)
                      18089 ; rs232cmd.c 5014       {
                      18090         ALIGN   1
                      18092         PUBLIC  _FactBBGenSignal
004E3A                18093 _FactBBGenSignal:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 296

ADDR   CODE            LINE SOURCELINE
                      18099 ; rs232cmd.c 5015               int signal;
                      18100 ; rs232cmd.c 5016       
                      18101 ; rs232cmd.c 5017               if ( CmdExecute && !SCPIError)
004E3A 964842rr       18103         MOV.B   ES,#SEG( _CmdExecute )
004E3E 9908rrrr       18104         MOV.W   R0,#SOF( _CmdExecute )
004E42 8200           18105         MOV.B   R0L,[R0]
004E44 F349           18106         BEQ     _1282
004E46 964842rr       18107         MOV.B   ES,#SEG( _SCPIError )
004E4A 9908rrrr       18108         MOV.W   R0,#SOF( _SCPIError )
004E4E 8A00           18109         MOV.W   R0,[R0]
004E50 F243           18110         BNE     _1282
                      18111 ; rs232cmd.c 5018               {
                      18112 ; rs232cmd.c 5019                       if ( CmdRequest)
004E52 964842rr       18114         MOV.B   ES,#SEG( _CmdRequest )
004E56 9908rrrr       18115         MOV.W   R0,#SOF( _CmdRequest )
004E5A 8200           18116         MOV.B   R0L,[R0]
004E5C F306           18117         BEQ     _1271
                      18118 ; rs232cmd.c 5020                               SCPIError = SyntaxErr;
004E5E 964842rr       18120         MOV.B   ES,#SEG( _SCPIError )
004E62 9908rrrr       18121         MOV.W   R0,#SOF( _SCPIError )
004E66 BA03           18122         MOV.W   [R0],#03H
004E68 D680           18123         RET
004E68 D680           18123         RET
004E6A                18124 _1271:
                      18125 ; rs232cmd.c 5021                       else
                      18126 ; rs232cmd.c 5022                       {
                      18127 ; rs232cmd.c 5023                               if ( !PasswordProtected)
004E6A 964842rr       18129         MOV.B   ES,#SEG( _PasswordProtected )
004E6E 9908rrrr       18130         MOV.W   R0,#SOF( _PasswordProtected )
004E72 8A00           18131         MOV.W   R0,[R0]
004E74 F231           18132         BNE     _1282
                      18133 ; rs232cmd.c 5024                               {
                      18134 ; rs232cmd.c 5025                                       if ( ParCnt != 1)
004E76 964842rr       18136         MOV.B   ES,#SEG( _ParCnt )
004E7A 9908rrrr       18137         MOV.W   R0,#SOF( _ParCnt )
004E7E 8200           18138         MOV.B   R0L,[R0]
004E80 910401         18139         CMP.B   R0L,#01H
004E83 F307           18140         BEQ     _1272
                      18141 ; rs232cmd.c 5026                                               SCPIError = SyntaxErr;
004E85 964842rr       18143         MOV.B   ES,#SEG( _SCPIError )
004E89 9908rrrr       18144         MOV.W   R0,#SOF( _SCPIError )
004E8D BA03           18145         MOV.W   [R0],#03H
004E8F D680           18146         RET
004E8F D68000         18146         RET
004E92                18147 _1272:
                      18148 ; rs232cmd.c 5027                                       else
                      18149 ; rs232cmd.c 5028                                       {
                      18150 ; rs232cmd.c 5029                                               signal = FindParameter( Cmd, Fact
                            BBGenSignalPar);
004E92 9918rrrr       18152         MOV.W   R1,#SEG( _Cmd )
004E96 9908rrrr       18153         MOV.W   R0,#SOF( _Cmd )
004E9A 9938rrrr       18154         MOV.W   R3,#SEG( _FactBBGenSignalPar )
004E9E 9928rrrr       18155         MOV.W   R2,#SOF( _FactBBGenSignalPar )
004EA2 C5086E         18156         CALL    _FindParameter
                      18158 ; rs232cmd.c 5030               
                      18159 ; rs232cmd.c 5031                                               switch ( signal)
004EA5 99040000       18161         CMP.W   R0,#00H
004EA9 F305           18162         BEQ     _1273
004EAB 99040001       18163         CMP.W   R0,#01H
004EAF F308           18164         BEQ     _1274
004EB1 FE0D           18165         BR      _1275
                      18166 ; rs232cmd.c 5032                                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 297

ADDR   CODE            LINE SOURCELINE
                      18167 ; rs232cmd.c 5033                                                       case 0:
004EB4                18169 _1273:
                      18170 ; rs232cmd.c 5034                                                               BBControlPort = 0
                            ;
004EB4 964842rr       18172         MOV.B   ES,#SEG( _BBControlPort )
004EB8 9908rrrr       18173         MOV.W   R0,#SOF( _BBControlPort )
004EBC BA00           18174         MOV.W   [R0],#00H
                      18175 ; rs232cmd.c 5035                                                               break;
004EBE D680           18177         RET
                      18178 ; rs232cmd.c 5036       
                      18179 ; rs232cmd.c 5037                                                       case 1:
004EC0                18181 _1274:
                      18182 ; rs232cmd.c 5038                                                               BBControlPort = 1
                            ;
004EC0 964842rr       18184         MOV.B   ES,#SEG( _BBControlPort )
004EC4 9908rrrr       18185         MOV.W   R0,#SOF( _BBControlPort )
004EC8 BA01           18186         MOV.W   [R0],#01H
                      18187 ; rs232cmd.c 5039                                                               break;
004ECA D680           18189         RET
                      18190 ; rs232cmd.c 5040       
                      18191 ; rs232cmd.c 5041                                                       default:
004ECC                18193 _1275:
                      18194 ; rs232cmd.c 5042                                                               SCPIError = DataO
                            utOfRange;
004ECC 964842rr       18196         MOV.B   ES,#SEG( _SCPIError )
004ED0 9908rrrr       18197         MOV.W   R0,#SOF( _SCPIError )
004ED4 9A080021       18198         MOV.W   [R0],#021H
                      18199 ; rs232cmd.c 5043                                                               break;
                      18200 ; rs232cmd.c 5044                                               }
                      18201 ; rs232cmd.c 5045                                       }
                      18202 ; rs232cmd.c 5046                               }
                      18203 ; rs232cmd.c 5047                       }
                      18204 ; rs232cmd.c 5048               }
004ED8                18206 _1282:
                      18207 ; rs232cmd.c 5049       }
004ED8 D680           18209         RET
                      18212 ; rs232cmd.c 5050       
                      18213 ; rs232cmd.c 5051       /************************************************************************
                            **/
                      18214 ; rs232cmd.c 5052       /* FactBBGenPhase                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      18215 ; rs232cmd.c 5053       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18216 ; rs232cmd.c 5054       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18217 ; rs232cmd.c 5055       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18218 ; rs232cmd.c 5056       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18219 ; rs232cmd.c 5057       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18220 ; rs232cmd.c 5058       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 298

ADDR   CODE            LINE SOURCELINE
                      18221 ; rs232cmd.c 5059       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18222 ; rs232cmd.c 5060       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18223 ; rs232cmd.c 5061       /************************************************************************
                            **/
                      18224 ; rs232cmd.c 5062       void FactBBGenPhase( void)
                      18225 ; rs232cmd.c 5063       {
                      18226         ALIGN   1
                      18228         PUBLIC  _FactBBGenPhase
004EDA                18229 _FactBBGenPhase:
004EDA 0F30           18233         PUSH.W  R4, R5
004EDC 99720026       18235         SUB.W   R7,#026H
                      18240 ; rs232cmd.c 5064               char buffer[30];
                      18241 ; rs232cmd.c 5065               UL PhaseG, PhaseM;
                      18242 ; rs232cmd.c 5066       
                      18243 ; rs232cmd.c 5067               if ( CmdExecute && !SCPIError)
004EE0 964842rr       18245         MOV.B   ES,#SEG( _CmdExecute )
004EE4 9908rrrr       18246         MOV.W   R0,#SOF( _CmdExecute )
004EE8 8200           18247         MOV.B   R0L,[R0]
                      18248         BEQ     _1293
004EEA F202           +18248 ;       BNE     _LG_1250
004EEC D5009A         +18248 ;       JMP.L   _1293
004EF0 D5009A00       +18248 ;       JMP.L   _1293
004EF0                +18248 _LG_1250:
004EF0 964842rr       18249         MOV.B   ES,#SEG( _SCPIError )
004EF4 9908rrrr       18250         MOV.W   R0,#SOF( _SCPIError )
004EF8 8A00           18251         MOV.W   R0,[R0]
                      18252         BNE     _1293
004EFA F302           +18252 ;       BEQ     _LG_1252
004EFC D50092         +18252 ;       JMP.L   _1293
004F00 D5009200       +18252 ;       JMP.L   _1293
004F00                +18252 _LG_1252:
                      18253 ; rs232cmd.c 5068               {
                      18254 ; rs232cmd.c 5069                       if ( CmdRequest)
004F00 964842rr       18256         MOV.B   ES,#SEG( _CmdRequest )
004F04 9908rrrr       18257         MOV.W   R0,#SOF( _CmdRequest )
004F08 8200           18258         MOV.B   R0L,[R0]
004F0A F336           18259         BEQ     _1285
                      18260 ; rs232cmd.c 5070                       {
                      18261 ; rs232cmd.c 5071                               if ( ParCnt)
004F0C 964842rr       18263         MOV.B   ES,#SEG( _ParCnt )
004F10 9908rrrr       18264         MOV.W   R0,#SOF( _ParCnt )
004F14 8200           18265         MOV.B   R0L,[R0]
004F16 F306           18266         BEQ     _1284
                      18267 ; rs232cmd.c 5072                                       SCPIError = SyntaxErr;
004F18 964842rr       18269         MOV.B   ES,#SEG( _SCPIError )
004F1C 9908rrrr       18270         MOV.W   R0,#SOF( _SCPIError )
004F20 BA03           18271         MOV.W   [R0],#03H
004F22 FE7F           18272         BR      _1293
004F22 FE7F           18272         BR      _1293
004F24                18273 _1284:
                      18274 ; rs232cmd.c 5073                               else
                      18275 ; rs232cmd.c 5074                               {
                      18276 ; rs232cmd.c 5075                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .BBCalibration[Suffix[0]].PhaseG, 
                      18277 ; rs232cmd.c 5076                                                                                
                                                                                                Calibration.BBCalibration[Suf
                            fix[0]].PhaseM);
004F24 91A8rr         18279         MOV.B   R5L,#SEG( __lc_bs )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 299

ADDR   CODE            LINE SOURCELINE
004F27 71BB           18280         XOR.B   R5H,R5H
004F29 8947           18281         MOV.W   R4,R7
004F2B 964842rr       18282         MOV.B   ES,#SEG( _Suffix )
004F2F 9908rrrr       18283         MOV.W   R0,#SOF( _Suffix )
004F33 8A00           18284         MOV.W   R0,[R0]
004F35 E9000014       18285         MULU.W  R0,#014H
004F39 B910           18286         MOVS.W  R1,#00H
004F3B 964842rr       18287         MOV.B   ES,#SEG( _Calibration+142 )
004F3F 8D20rrrr       18288         MOV.W   R2,[R0+SOF( _Calibration+142 )]
004F43 8D30rrrr       18289         MOV.W   R3,[R0+SOF( _Calibration+144 )]
004F47 964842rr       18290         MOV.B   ES,#SEG( _Calibration+148 )
004F4B 8D10rrrr       18291         MOV.W   R1,[R0+SOF( _Calibration+150 )]
004F4F 8D00rrrr       18292         MOV.W   R0,[R0+SOF( _Calibration+148 )]
004F53 0F03           18293         PUSH.W  R0, R1
004F55 0F0C           18295         PUSH.W  R2, R3
004F57 9918rrrr       18297         MOV.W   R1,#SEG( _1222 )
004F5B 9908rrrr       18298         MOV.W   R0,#SOF( _1222 )
004F5F 0F03           18299         PUSH.W  R0, R1
004F61 8915           18301         MOV.W   R1,R5
004F63 8904           18302         MOV.W   R0,R4
                      18303         CALL    _sprintf
004F65 C4rrrrrr       +18303 ;       FCALL   _sprintf
004F69 9970000C       18304         ADD.W   R7,#0CH
                      18306 ; rs232cmd.c 5077                                       rs232puts( buffer);
004F6D 8915           18308         MOV.W   R1,R5
004F6F 8904           18309         MOV.W   R0,R4
                      18310         CALL    _rs232puts
004F71 C4rrrrrr       +18310 ;       FCALL   _rs232puts
                      18311 ; rs232cmd.c 5078                               }
                      18312 ; rs232cmd.c 5079                       }
004F75 FE56           18314         BR      _1293
004F75 FE5600         18314         BR      _1293
004F78                18315 _1285:
                      18316 ; rs232cmd.c 5080                       else
                      18317 ; rs232cmd.c 5081                       {
                      18318 ; rs232cmd.c 5082                               if ( !PasswordProtected)
004F78 964842rr       18320         MOV.B   ES,#SEG( _PasswordProtected )
004F7C 9908rrrr       18321         MOV.W   R0,#SOF( _PasswordProtected )
004F80 8A00           18322         MOV.W   R0,[R0]
004F82 F24F           18323         BNE     _1293
                      18324 ; rs232cmd.c 5083                               {
                      18325 ; rs232cmd.c 5084                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
004F84 964842rr       18327         MOV.B   ES,#SEG( _ParCnt )
004F88 9908rrrr       18328         MOV.W   R0,#SOF( _ParCnt )
004F8C 8200           18329         MOV.B   R0L,[R0]
004F8E 910402         18330         CMP.B   R0L,#02H
004F91 F21B           18331         BNE     _1286
004F93 9918rrrr       18332         MOV.W   R1,#SEG( _Cmd )
004F97 9908rrrr       18333         MOV.W   R0,#SOF( _Cmd )
004F9B 9168rr         18334         MOV.B   R3L,#SEG( __lc_bs )
004F9E 7177           18335         XOR.B   R3H,R3H
004FA0 40271E         18336         LEA     R2,R7+30
004FA3 91A8rr         18337         MOV.B   R5L,#SEG( __lc_bs )
004FA6 71BB           18338         XOR.B   R5H,R5H
004FA8 404722         18339         LEA     R4,R7+34
004FAB 0F30           18340         PUSH.W  R4, R5
004FAD 0F0C           18342         PUSH.W  R2, R3
004FAF 9938rrrr       18344         MOV.W   R3,#SEG( _1034 )
004FB3 9928rrrr       18345         MOV.W   R2,#SOF( _1034 )
004FB7 0F0C           18346         PUSH.W  R2, R3
                      18348         CALL    _sscanf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 300

ADDR   CODE            LINE SOURCELINE
004FB9 C4rrrrrr       +18348 ;       FCALL   _sscanf
004FBD 9970000C       18349         ADD.W   R7,#0CH
004FC1 99040002       18351         CMP.W   R0,#02H
004FC5 F307           18352         BEQ     _1287
004FC5 F30700         18352         BEQ     _1287
004FC8                18353 _1286:
                      18354 ; rs232cmd.c 5085                                               SCPIError = SyntaxErr;
004FC8 964842rr       18356         MOV.B   ES,#SEG( _SCPIError )
004FCC 9908rrrr       18357         MOV.W   R0,#SOF( _SCPIError )
004FD0 BA03           18358         MOV.W   [R0],#03H
004FD2 FE27           18359         BR      _1293
004FD2 FE27           18359         BR      _1293
004FD4                18360 _1287:
                      18361 ; rs232cmd.c 5086                                       else
                      18362 ; rs232cmd.c 5087                                       {
                      18363 ; rs232cmd.c 5088                                               Calibration.BBCalibration[Suffix[
                            0]].PhaseG = PhaseG;
004FD4 964842rr       18365         MOV.B   ES,#SEG( _Suffix )
004FD8 9908rrrr       18366         MOV.W   R0,#SOF( _Suffix )
004FDC 8A00           18367         MOV.W   R0,[R0]
004FDE E9000014       18368         MULU.W  R0,#014H
004FE2 B910           18369         MOVS.W  R1,#00H
004FE4 8C3720         18370         MOV.W   R3,[R7+32]
004FE7 8C271E         18371         MOV.W   R2,[R7+30]
004FEA 964842rr       18372         MOV.B   ES,#SEG( _Calibration+142 )
004FEE 8D28rrrr       18373         MOV.W   [R0+SOF( _Calibration+142 )],R2
004FF2 8D38rrrr       18374         MOV.W   [R0+SOF( _Calibration+144 )],R3
                      18375 ; rs232cmd.c 5089                                               Calibration.BBCalibration[Suffix[
                            0]].PhaseM = PhaseM;
004FF6 8C3724         18377         MOV.W   R3,[R7+36]
004FF9 8C2722         18378         MOV.W   R2,[R7+34]
004FFC 964842rr       18379         MOV.B   ES,#SEG( _Calibration+148 )
005000 8D28rrrr       18380         MOV.W   [R0+SOF( _Calibration+148 )],R2
005004 8D38rrrr       18381         MOV.W   [R0+SOF( _Calibration+150 )],R3
                      18382 ; rs232cmd.c 5090                                       
                      18383 ; rs232cmd.c 5091                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005008 9918rrrr       18385         MOV.W   R1,#SEG( _Calibration )
00500C 9908rrrr       18386         MOV.W   R0,#SOF( _Calibration )
005010 964842rr       18387         MOV.B   ES,#SEG( _CalibrationPtr )
005014 9928rrrr       18388         MOV.W   R2,#SOF( _CalibrationPtr )
005018 8A22           18389         MOV.W   R2,[R2]
00501A 993800E0       18390         MOV.W   R3,#0E0H
                      18391         CALL    _NV_Store
00501E C4rrrrrr       +18391 ;       FCALL   _NV_Store
                      18392 ; rs232cmd.c 5092                                       }
                      18393 ; rs232cmd.c 5093                               }
                      18394 ; rs232cmd.c 5094                       }
                      18395 ; rs232cmd.c 5095               }
005022                18397 _1293:
                      18398 ; rs232cmd.c 5096       }
005022 99700026       18400         ADD.W   R7,#026H
005026 2F30           18402         POP.W   R4, R5
005028 D680           18404         RET
                      18406 ; rs232cmd.c 5097       
                      18407 ; rs232cmd.c 5098       /************************************************************************
                            **/
                      18408 ; rs232cmd.c 5099       /* FactBBGenScHPhase                                                     
                                                                                                                             
                                RS232CMD.C  */
                      18409 ; rs232cmd.c 5100       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 301

ADDR   CODE            LINE SOURCELINE
                                                    */
                      18410 ; rs232cmd.c 5101       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18411 ; rs232cmd.c 5102       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18412 ; rs232cmd.c 5103       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18413 ; rs232cmd.c 5104       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18414 ; rs232cmd.c 5105       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18415 ; rs232cmd.c 5106       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18416 ; rs232cmd.c 5107       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18417 ; rs232cmd.c 5108       /************************************************************************
                            **/
                      18418 ; rs232cmd.c 5109       void FactBBGenScHPhase( void)
                      18419 ; rs232cmd.c 5110       {
                      18420         ALIGN   1
                      18422         PUBLIC  _FactBBGenScHPhase
00502A                18423 _FactBBGenScHPhase:
00502A 0F30           18427         PUSH.W  R4, R5
00502C 99720022       18429         SUB.W   R7,#022H
                      18434 ; rs232cmd.c 5111               char buffer[30];
                      18435 ; rs232cmd.c 5112               UI ScHPhaseG, ScHPhaseM;
                      18436 ; rs232cmd.c 5113       
                      18437 ; rs232cmd.c 5114               if ( CmdExecute && !SCPIError)
005030 964842rr       18439         MOV.B   ES,#SEG( _CmdExecute )
005034 9908rrrr       18440         MOV.W   R0,#SOF( _CmdExecute )
005038 8200           18441         MOV.B   R0L,[R0]
                      18442         BEQ     _1307
00503A F202           +18442 ;       BNE     _LG_1264
00503C D50097         +18442 ;       JMP.L   _1307
005040 D5009700       +18442 ;       JMP.L   _1307
005040                +18442 _LG_1264:
005040 964842rr       18443         MOV.B   ES,#SEG( _SCPIError )
005044 9908rrrr       18444         MOV.W   R0,#SOF( _SCPIError )
005048 8A00           18445         MOV.W   R0,[R0]
                      18446         BNE     _1307
00504A F302           +18446 ;       BEQ     _LG_1266
00504C D5008F         +18446 ;       JMP.L   _1307
005050 D5008F00       +18446 ;       JMP.L   _1307
005050                +18446 _LG_1266:
                      18447 ; rs232cmd.c 5115               {
                      18448 ; rs232cmd.c 5116                       if ( CmdRequest)
005050 964842rr       18450         MOV.B   ES,#SEG( _CmdRequest )
005054 9908rrrr       18451         MOV.W   R0,#SOF( _CmdRequest )
005058 8200           18452         MOV.B   R0L,[R0]
00505A F332           18453         BEQ     _1299
                      18454 ; rs232cmd.c 5117                       {
                      18455 ; rs232cmd.c 5118                               if ( ParCnt)
00505C 964842rr       18457         MOV.B   ES,#SEG( _ParCnt )
005060 9908rrrr       18458         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 302

ADDR   CODE            LINE SOURCELINE
005064 8200           18459         MOV.B   R0L,[R0]
005066 F306           18460         BEQ     _1298
                      18461 ; rs232cmd.c 5119                                       SCPIError = SyntaxErr;
005068 964842rr       18463         MOV.B   ES,#SEG( _SCPIError )
00506C 9908rrrr       18464         MOV.W   R0,#SOF( _SCPIError )
005070 BA03           18465         MOV.W   [R0],#03H
005072 FE7C           18466         BR      _1307
005072 FE7C           18466         BR      _1307
005074                18467 _1298:
                      18468 ; rs232cmd.c 5120                               else
                      18469 ; rs232cmd.c 5121                               {
                      18470 ; rs232cmd.c 5122                                       sprintf( buffer, "%u,%u\n", Calibration.B
                            BCalibration[Suffix[0]].ScHPhaseG, 
                      18471 ; rs232cmd.c 5123                                                                                
                                                                                        Calibration.BBCalibration[Suffix[0]].
                            ScHPhaseM);
005074 91A8rr         18473         MOV.B   R5L,#SEG( __lc_bs )
005077 71BB           18474         XOR.B   R5H,R5H
005079 8947           18475         MOV.W   R4,R7
00507B 964842rr       18476         MOV.B   ES,#SEG( _Suffix )
00507F 9908rrrr       18477         MOV.W   R0,#SOF( _Suffix )
005083 8A00           18478         MOV.W   R0,[R0]
005085 E9000014       18479         MULU.W  R0,#014H
005089 B910           18480         MOVS.W  R1,#00H
00508B 964842rr       18481         MOV.B   ES,#SEG( _Calibration+146 )
00508F 8D20rrrr       18482         MOV.W   R2,[R0+SOF( _Calibration+146 )]
005093 964842rr       18483         MOV.B   ES,#SEG( _Calibration+152 )
005097 8D00rrrr       18484         MOV.W   R0,[R0+SOF( _Calibration+152 )]
00509B 0F01           18485         PUSH.W  R0
00509D 0F04           18487         PUSH.W  R2
00509F 9918rrrr       18489         MOV.W   R1,#SEG( _1296 )
0050A3 9908rrrr       18490         MOV.W   R0,#SOF( _1296 )
0050A7 0F03           18491         PUSH.W  R0, R1
0050A9 8915           18493         MOV.W   R1,R5
0050AB 8904           18494         MOV.W   R0,R4
                      18495         CALL    _sprintf
0050AD C4rrrrrr       +18495 ;       FCALL   _sprintf
0050B1 99700008       18496         ADD.W   R7,#08H
                      18498 ; rs232cmd.c 5124                                       rs232puts( buffer);
0050B5 8915           18500         MOV.W   R1,R5
0050B7 8904           18501         MOV.W   R0,R4
                      18502         CALL    _rs232puts
0050B9 C4rrrrrr       +18502 ;       FCALL   _rs232puts
                      18503 ; rs232cmd.c 5125                               }
                      18504 ; rs232cmd.c 5126                       }
0050BD FE57           18506         BR      _1307
0050BD FE5700         18506         BR      _1307
0050C0                18507 _1299:
                      18508 ; rs232cmd.c 5127                       else
                      18509 ; rs232cmd.c 5128                       {
                      18510 ; rs232cmd.c 5129                               if ( !PasswordProtected)
0050C0 964842rr       18512         MOV.B   ES,#SEG( _PasswordProtected )
0050C4 9908rrrr       18513         MOV.W   R0,#SOF( _PasswordProtected )
0050C8 8A00           18514         MOV.W   R0,[R0]
0050CA F250           18515         BNE     _1307
                      18516 ; rs232cmd.c 5130                               {
                      18517 ; rs232cmd.c 5131                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ScHPhaseG, &ScHPhaseM)) != 2))
0050CC 964842rr       18519         MOV.B   ES,#SEG( _ParCnt )
0050D0 9908rrrr       18520         MOV.W   R0,#SOF( _ParCnt )
0050D4 8200           18521         MOV.B   R0L,[R0]
0050D6 910402         18522         CMP.B   R0L,#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 303

ADDR   CODE            LINE SOURCELINE
0050D9 F21B           18523         BNE     _1300
0050DB 9918rrrr       18524         MOV.W   R1,#SEG( _Cmd )
0050DF 9908rrrr       18525         MOV.W   R0,#SOF( _Cmd )
0050E3 9168rr         18526         MOV.B   R3L,#SEG( __lc_bs )
0050E6 7177           18527         XOR.B   R3H,R3H
0050E8 40271E         18528         LEA     R2,R7+30
0050EB 91A8rr         18529         MOV.B   R5L,#SEG( __lc_bs )
0050EE 71BB           18530         XOR.B   R5H,R5H
0050F0 404720         18531         LEA     R4,R7+32
0050F3 0F30           18532         PUSH.W  R4, R5
0050F5 0F0C           18534         PUSH.W  R2, R3
0050F7 9938rrrr       18536         MOV.W   R3,#SEG( _1297 )
0050FB 9928rrrr       18537         MOV.W   R2,#SOF( _1297 )
0050FF 0F0C           18538         PUSH.W  R2, R3
                      18540         CALL    _sscanf
005101 C4rrrrrr       +18540 ;       FCALL   _sscanf
005105 9970000C       18541         ADD.W   R7,#0CH
005109 99040002       18543         CMP.W   R0,#02H
00510D F307           18544         BEQ     _1301
00510D F30700         18544         BEQ     _1301
005110                18545 _1300:
                      18546 ; rs232cmd.c 5132                                               SCPIError = SyntaxErr;
005110 964842rr       18548         MOV.B   ES,#SEG( _SCPIError )
005114 9908rrrr       18549         MOV.W   R0,#SOF( _SCPIError )
005118 BA03           18550         MOV.W   [R0],#03H
00511A FE28           18551         BR      _1307
00511A FE28           18551         BR      _1307
00511C                18552 _1301:
                      18553 ; rs232cmd.c 5133                                       else
                      18554 ; rs232cmd.c 5134                                       {
                      18555 ; rs232cmd.c 5135                                               Calibration.BBCalibration[Suffix[
                            0]].ScHPhaseG = ScHPhaseG;
00511C 964842rr       18557         MOV.B   ES,#SEG( _Suffix )
005120 9908rrrr       18558         MOV.W   R0,#SOF( _Suffix )
005124 8A00           18559         MOV.W   R0,[R0]
005126 E9000014       18560         MULU.W  R0,#014H
00512A B910           18561         MOVS.W  R1,#00H
00512C 8C271E         18562         MOV.W   R2,[R7+30]
00512F 964842rr       18563         MOV.B   ES,#SEG( _Calibration+146 )
005133 8D28rrrr       18564         MOV.W   [R0+SOF( _Calibration+146 )],R2
                      18565 ; rs232cmd.c 5136                                               Calibration.BBCalibration[Suffix[
                            0]].ScHPhaseM = ScHPhaseM;
005137 964842rr       18567         MOV.B   ES,#SEG( _Suffix )
00513B 9908rrrr       18568         MOV.W   R0,#SOF( _Suffix )
00513F 8A00           18569         MOV.W   R0,[R0]
005141 E9000014       18570         MULU.W  R0,#014H
005145 B910           18571         MOVS.W  R1,#00H
005147 8C2720         18572         MOV.W   R2,[R7+32]
00514A 964842rr       18573         MOV.B   ES,#SEG( _Calibration+152 )
00514E 8D28rrrr       18574         MOV.W   [R0+SOF( _Calibration+152 )],R2
                      18575 ; rs232cmd.c 5137                                       
                      18576 ; rs232cmd.c 5138                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005152 9918rrrr       18578         MOV.W   R1,#SEG( _Calibration )
005156 9908rrrr       18579         MOV.W   R0,#SOF( _Calibration )
00515A 964842rr       18580         MOV.B   ES,#SEG( _CalibrationPtr )
00515E 9928rrrr       18581         MOV.W   R2,#SOF( _CalibrationPtr )
005162 8A22           18582         MOV.W   R2,[R2]
005164 993800E0       18583         MOV.W   R3,#0E0H
                      18584         CALL    _NV_Store
005168 C4rrrrrr       +18584 ;       FCALL   _NV_Store
                      18585 ; rs232cmd.c 5139                                       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 304

ADDR   CODE            LINE SOURCELINE
                      18586 ; rs232cmd.c 5140                               }
                      18587 ; rs232cmd.c 5141                       }
                      18588 ; rs232cmd.c 5142               }
00516C                18590 _1307:
                      18591 ; rs232cmd.c 5143       }
00516C 99700022       18593         ADD.W   R7,#022H
005170 2F30           18595         POP.W   R4, R5
005172 D680           18597         RET
                      18599 ; rs232cmd.c 5144       
                      18600 ; rs232cmd.c 5145       /************************************************************************
                            **/
                      18601 ; rs232cmd.c 5146       /* FactBBGenDAC                                                          
                                                                                                                             
                                                 RS232CMD.C */
                      18602 ; rs232cmd.c 5147       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18603 ; rs232cmd.c 5148       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18604 ; rs232cmd.c 5149       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18605 ; rs232cmd.c 5150       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18606 ; rs232cmd.c 5151       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18607 ; rs232cmd.c 5152       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18608 ; rs232cmd.c 5153       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18609 ; rs232cmd.c 5154       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18610 ; rs232cmd.c 5155       /************************************************************************
                            **/
                      18611 ; rs232cmd.c 5156       void FactBBGenDAC( void)
                      18612 ; rs232cmd.c 5157       {
                      18613         ALIGN   1
                      18615         PUBLIC  _FactBBGenDAC
005174                18616 _FactBBGenDAC:
005174 0F30           18620         PUSH.W  R4, R5
005176 99720024       18622         SUB.W   R7,#024H
                      18628 ; rs232cmd.c 5158               char buffer[30];
                      18629 ; rs232cmd.c 5159               UI DACGain, DACOffset, DACLevel;
                      18630 ; rs232cmd.c 5160       
                      18631 ; rs232cmd.c 5161               if ( CmdExecute && !SCPIError)
00517A 964842rr       18633         MOV.B   ES,#SEG( _CmdExecute )
00517E 9908rrrr       18634         MOV.W   R0,#SOF( _CmdExecute )
005182 8200           18635         MOV.B   R0L,[R0]
                      18636         BEQ     _1319
005184 F202           +18636 ;       BNE     _LG_1278
005186 D500A3         +18636 ;       JMP.L   _1319
00518A D500A300       +18636 ;       JMP.L   _1319
00518A                +18636 _LG_1278:
00518A 964842rr       18637         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 305

ADDR   CODE            LINE SOURCELINE
00518E 9908rrrr       18638         MOV.W   R0,#SOF( _SCPIError )
005192 8A00           18639         MOV.W   R0,[R0]
                      18640         BNE     _1319
005194 F302           +18640 ;       BEQ     _LG_1280
005196 D5009B         +18640 ;       JMP.L   _1319
00519A D5009B00       +18640 ;       JMP.L   _1319
00519A                +18640 _LG_1280:
                      18641 ; rs232cmd.c 5162               {
                      18642 ; rs232cmd.c 5163                       if ( CmdRequest)
00519A 964842rr       18644         MOV.B   ES,#SEG( _CmdRequest )
00519E 9908rrrr       18645         MOV.W   R0,#SOF( _CmdRequest )
0051A2 8200           18646         MOV.B   R0L,[R0]
0051A4 F33B           18647         BEQ     _1311
                      18648 ; rs232cmd.c 5164                       {
                      18649 ; rs232cmd.c 5165                               if ( ParCnt)
0051A6 964842rr       18651         MOV.B   ES,#SEG( _ParCnt )
0051AA 9908rrrr       18652         MOV.W   R0,#SOF( _ParCnt )
0051AE 8200           18653         MOV.B   R0L,[R0]
0051B0 F307           18654         BEQ     _1310
                      18655 ; rs232cmd.c 5166                                       SCPIError = SyntaxErr;
0051B2 964842rr       18657         MOV.B   ES,#SEG( _SCPIError )
0051B6 9908rrrr       18658         MOV.W   R0,#SOF( _SCPIError )
0051BA BA03           18659         MOV.W   [R0],#03H
                      18660         BR      _1319
0051BC D50088         +18660         JMP.L   _1319
0051BC D5008800       +18660         JMP.L   _1319
0051C0                18661 _1310:
                      18662 ; rs232cmd.c 5167                               else
                      18663 ; rs232cmd.c 5168                               {
                      18664 ; rs232cmd.c 5169                                       sprintf( buffer, "%u,%u,%u\n", Calibratio
                            n.BBCalibration[Suffix[0]].DACGain, 
                      18665 ; rs232cmd.c 5170                                                                                
                                                                                                 Calibration.BBCalibration[Su
                            ffix[0]].DACOffset,
                      18666 ; rs232cmd.c 5171                                                                                
                                                                                                 Calibration.BBCalibration[Su
                            ffix[0]].DACLevel);
0051C0 91A8rr         18668         MOV.B   R5L,#SEG( __lc_bs )
0051C3 71BB           18669         XOR.B   R5H,R5H
0051C5 8947           18670         MOV.W   R4,R7
0051C7 964842rr       18671         MOV.B   ES,#SEG( _Suffix )
0051CB 9908rrrr       18672         MOV.W   R0,#SOF( _Suffix )
0051CF 8A00           18673         MOV.W   R0,[R0]
0051D1 E9000014       18674         MULU.W  R0,#014H
0051D5 B910           18675         MOVS.W  R1,#00H
0051D7 964842rr       18676         MOV.B   ES,#SEG( _Calibration+154 )
0051DB 8540rrrr       18677         MOV.B   R2L,[R0+SOF( _Calibration+154 )]
0051DF B150           18678         MOVS.B  R2H,#00H
0051E1 964842rr       18679         MOV.B   ES,#SEG( _Calibration+155 )
0051E5 8560rrrr       18680         MOV.B   R3L,[R0+SOF( _Calibration+155 )]
0051E9 B170           18681         MOVS.B  R3H,#00H
0051EB 964842rr       18682         MOV.B   ES,#SEG( _Calibration+156 )
0051EF 8500rrrr       18683         MOV.B   R0L,[R0+SOF( _Calibration+156 )]
0051F3 B110           18684         MOVS.B  R0H,#00H
0051F5 0F01           18685         PUSH.W  R0
0051F7 0F08           18687         PUSH.W  R3
0051F9 0F04           18689         PUSH.W  R2
0051FB 9918rrrr       18691         MOV.W   R1,#SEG( _1169 )
0051FF 9908rrrr       18692         MOV.W   R0,#SOF( _1169 )
005203 0F03           18693         PUSH.W  R0, R1
005205 8915           18695         MOV.W   R1,R5
005207 8904           18696         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 306

ADDR   CODE            LINE SOURCELINE
                      18697         CALL    _sprintf
005209 C4rrrrrr       +18697 ;       FCALL   _sprintf
00520D 9970000A       18698         ADD.W   R7,#0AH
                      18700 ; rs232cmd.c 5172                                       rs232puts( buffer);
005211 8915           18702         MOV.W   R1,R5
005213 8904           18703         MOV.W   R0,R4
                      18704         CALL    _rs232puts
005215 C4rrrrrr       +18704 ;       FCALL   _rs232puts
                      18705 ; rs232cmd.c 5173                               }
                      18706 ; rs232cmd.c 5174                       }
005219 FE5A           18708         BR      _1319
005219 FE5A00         18708         BR      _1319
00521C                18709 _1311:
                      18710 ; rs232cmd.c 5175                       else
                      18711 ; rs232cmd.c 5176                       {
                      18712 ; rs232cmd.c 5177                               if ( !PasswordProtected)
00521C 964842rr       18714         MOV.B   ES,#SEG( _PasswordProtected )
005220 9908rrrr       18715         MOV.W   R0,#SOF( _PasswordProtected )
005224 8A00           18716         MOV.W   R0,[R0]
005226 F253           18717         BNE     _1319
                      18718 ; rs232cmd.c 5178                               {
                      18719 ; rs232cmd.c 5179                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &DACGain, &DACOffset, &DACLevel)) != 3))
005228 964842rr       18721         MOV.B   ES,#SEG( _ParCnt )
00522C 9908rrrr       18722         MOV.W   R0,#SOF( _ParCnt )
005230 8200           18723         MOV.B   R0L,[R0]
005232 910403         18724         CMP.B   R0L,#03H
005235 F220           18725         BNE     _1312
005237 9168rr         18726         MOV.B   R3L,#SEG( __lc_bs )
00523A 7177           18727         XOR.B   R3H,R3H
00523C 40271E         18728         LEA     R2,R7+30
00523F 91A8rr         18729         MOV.B   R5L,#SEG( __lc_bs )
005242 71BB           18730         XOR.B   R5H,R5H
005244 404720         18731         LEA     R4,R7+32
005247 9128rr         18732         MOV.B   R1L,#SEG( __lc_bs )
00524A 7133           18733         XOR.B   R1H,R1H
00524C 400722         18734         LEA     R0,R7+34
00524F 0F03           18735         PUSH.W  R0, R1
005251 0F30           18737         PUSH.W  R4, R5
005253 0F0C           18739         PUSH.W  R2, R3
005255 9938rrrr       18741         MOV.W   R3,#SEG( _1170 )
005259 9928rrrr       18742         MOV.W   R2,#SOF( _1170 )
00525D 0F0C           18743         PUSH.W  R2, R3
00525F 9918rrrr       18745         MOV.W   R1,#SEG( _Cmd )
005263 9908rrrr       18746         MOV.W   R0,#SOF( _Cmd )
                      18747         CALL    _sscanf
005267 C4rrrrrr       +18747 ;       FCALL   _sscanf
00526B 99700010       18748         ADD.W   R7,#010H
00526F 99040003       18750         CMP.W   R0,#03H
005273 F307           18751         BEQ     _1313
005273 F30700         18751         BEQ     _1313
005276                18752 _1312:
                      18753 ; rs232cmd.c 5180                                               SCPIError = SyntaxErr;
005276 964842rr       18755         MOV.B   ES,#SEG( _SCPIError )
00527A 9908rrrr       18756         MOV.W   R0,#SOF( _SCPIError )
00527E BA03           18757         MOV.W   [R0],#03H
005280 FE26           18758         BR      _1319
005280 FE26           18758         BR      _1319
005282                18759 _1313:
                      18760 ; rs232cmd.c 5181                                       else
                      18761 ; rs232cmd.c 5182                                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 307

ADDR   CODE            LINE SOURCELINE
                      18762 ; rs232cmd.c 5183                                               Calibration.BBCalibration[Suffix[
                            0]].DACGain = DACGain;
005282 8C271E         18764         MOV.W   R2,[R7+30]
005285 964842rr       18765         MOV.B   ES,#SEG( _Suffix )
005289 9908rrrr       18766         MOV.W   R0,#SOF( _Suffix )
00528D 8A00           18767         MOV.W   R0,[R0]
00528F E9000014       18768         MULU.W  R0,#014H
005293 B910           18769         MOVS.W  R1,#00H
005295 964842rr       18770         MOV.B   ES,#SEG( _Calibration+154 )
005299 8548rrrr       18771         MOV.B   [R0+SOF( _Calibration+154 )],R2L
                      18772 ; rs232cmd.c 5184                                               Calibration.BBCalibration[Suffix[
                            0]].DACOffset = DACOffset;
00529D 8C2720         18774         MOV.W   R2,[R7+32]
0052A0 964842rr       18775         MOV.B   ES,#SEG( _Calibration+155 )
0052A4 8548rrrr       18776         MOV.B   [R0+SOF( _Calibration+155 )],R2L
                      18777 ; rs232cmd.c 5185                                               Calibration.BBCalibration[Suffix[
                            0]].DACLevel = DACLevel;        
0052A8 8C2722         18779         MOV.W   R2,[R7+34]
0052AB 964842rr       18780         MOV.B   ES,#SEG( _Calibration+156 )
0052AF 8548rrrr       18781         MOV.B   [R0+SOF( _Calibration+156 )],R2L
                      18782 ; rs232cmd.c 5186                                                               
                      18783 ; rs232cmd.c 5187                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0052B3 9918rrrr       18785         MOV.W   R1,#SEG( _Calibration )
0052B7 9908rrrr       18786         MOV.W   R0,#SOF( _Calibration )
0052BB 964842rr       18787         MOV.B   ES,#SEG( _CalibrationPtr )
0052BF 9928rrrr       18788         MOV.W   R2,#SOF( _CalibrationPtr )
0052C3 8A22           18789         MOV.W   R2,[R2]
0052C5 993800E0       18790         MOV.W   R3,#0E0H
                      18791         CALL    _NV_Store
0052C9 C4rrrrrr       +18791 ;       FCALL   _NV_Store
                      18792 ; rs232cmd.c 5188                                       }
                      18793 ; rs232cmd.c 5189                               }
                      18794 ; rs232cmd.c 5190                       }
                      18795 ; rs232cmd.c 5191               }
0052CE                18797 _1319:
                      18798 ; rs232cmd.c 5192       }
0052CE 99700024       18800         ADD.W   R7,#024H
0052D2 2F30           18802         POP.W   R4, R5
0052D4 D680           18804         RET
                      18806 ; rs232cmd.c 5193       
                      18807 ; rs232cmd.c 5194       /************************************************************************
                            **/
                      18808 ; rs232cmd.c 5195       /* FactCBGenDate                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      18809 ; rs232cmd.c 5196       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18810 ; rs232cmd.c 5197       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18811 ; rs232cmd.c 5198       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18812 ; rs232cmd.c 5199       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 308

ADDR   CODE            LINE SOURCELINE
                      18813 ; rs232cmd.c 5200       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18814 ; rs232cmd.c 5201       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18815 ; rs232cmd.c 5202       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18816 ; rs232cmd.c 5203       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18817 ; rs232cmd.c 5204       /************************************************************************
                            **/
                      18818 ; rs232cmd.c 5205       void FactCBGenDate( void)
                      18819 ; rs232cmd.c 5206       {
                      18820         ALIGN   1
                      18822         PUBLIC  _FactCBGenDate
0052D6                18823 _FactCBGenDate:
0052D6 0F30           18827         PUSH.W  R4, R5
0052D8 9972001A       18829         SUB.W   R7,#01AH
                      18835 ; rs232cmd.c 5207               UI year, month, day;
                      18836 ; rs232cmd.c 5208               char buffer[20];
                      18837 ; rs232cmd.c 5209       
                      18838 ; rs232cmd.c 5210               if ( CmdExecute && !SCPIError)
0052DC 964842rr       18840         MOV.B   ES,#SEG( _CmdExecute )
0052E0 9908rrrr       18841         MOV.W   R0,#SOF( _CmdExecute )
0052E4 8200           18842         MOV.B   R0L,[R0]
                      18843         BEQ     _1333
0052E6 F202           +18843 ;       BNE     _LG_1292
0052E8 D500C7         +18843 ;       JMP.L   _1333
0052EC D500C700       +18843 ;       JMP.L   _1333
0052EC                +18843 _LG_1292:
0052EC 964842rr       18844         MOV.B   ES,#SEG( _SCPIError )
0052F0 9908rrrr       18845         MOV.W   R0,#SOF( _SCPIError )
0052F4 8A00           18846         MOV.W   R0,[R0]
                      18847         BNE     _1333
0052F6 F302           +18847 ;       BEQ     _LG_1294
0052F8 D500BF         +18847 ;       JMP.L   _1333
0052FC D500BF00       +18847 ;       JMP.L   _1333
0052FC                +18847 _LG_1294:
                      18848 ; rs232cmd.c 5211               {
                      18849 ; rs232cmd.c 5212                       if ( CmdRequest)
0052FC 964842rr       18851         MOV.B   ES,#SEG( _CmdRequest )
005300 9908rrrr       18852         MOV.W   R0,#SOF( _CmdRequest )
005304 8200           18853         MOV.B   R0L,[R0]
005306 F35A           18854         BEQ     _1323
                      18855 ; rs232cmd.c 5213                       {
                      18856 ; rs232cmd.c 5214                               if ( ParCnt)
005308 964842rr       18858         MOV.B   ES,#SEG( _ParCnt )
00530C 9908rrrr       18859         MOV.W   R0,#SOF( _ParCnt )
005310 8200           18860         MOV.B   R0L,[R0]
005312 F307           18861         BEQ     _1322
                      18862 ; rs232cmd.c 5215                                       SCPIError = SyntaxErr;
005314 964842rr       18864         MOV.B   ES,#SEG( _SCPIError )
005318 9908rrrr       18865         MOV.W   R0,#SOF( _SCPIError )
00531C BA03           18866         MOV.W   [R0],#03H
                      18867         BR      _1333
00531E D500AC         +18867         JMP.L   _1333
00531E D500AC00       +18867         JMP.L   _1333
005322                18868 _1322:
                      18869 ; rs232cmd.c 5216                               else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 309

ADDR   CODE            LINE SOURCELINE
                      18870 ; rs232cmd.c 5217                               {
                      18871 ; rs232cmd.c 5218                                       day = Calibration.CBCalibration.Date % 10
                            0;
005322 964842rr       18873         MOV.B   ES,#SEG( _Calibration+198 )
005326 9918rrrr       18874         MOV.W   R1,#SOF( _Calibration+198 )
00532A 8B01           18875         MOV.W   R0,[R1+]
00532C 8A11           18876         MOV.W   R1,[R1]
00532E B930           18877         MOV.W   R3,#00H
005330 99280064       18878         MOV.W   R2,#064H
005334 964842rr       18879         MOV.B   ES,#SEG( _Calibration+198 )
005338 9948rrrr       18880         MOV.W   R4,#SOF( _Calibration+198 )
00533C 8B0C           18881         MOV.W   [R4+],R0
00533E 8A1C           18882         MOV.W   [R4],R1
005340 C4rrrrrr       18883         FCALL   __UMODL
005344 8C0F04         18884         MOV.W   [R7+4],R0
005347 964842rr       18885         MOV.B   ES,#SEG( _Calibration+198 )
00534B 9918rrrr       18886         MOV.W   R1,#SOF( _Calibration+198 )
00534F 8B01           18887         MOV.W   R0,[R1+]
005351 8A11           18888         MOV.W   R1,[R1]
                      18889 ; rs232cmd.c 5219                                       month = ( Calibration.CBCalibration.Date 
                            / 100) % 100;
005353 B930           18891         MOV.W   R3,#00H
005355 99280064       18892         MOV.W   R2,#064H
005359 8953           18893         MOV.W   R5,R3
00535B 8942           18894         MOV.W   R4,R2
00535D C4rrrrrr       18895         FCALL   __UDIVL
005361 8935           18896         MOV.W   R3,R5
005363 8924           18897         MOV.W   R2,R4
005365 C4rrrrrr       18898         FCALL   __UMODL
005369 8C0F02         18899         MOV.W   [R7+2],R0
                      18900 ; rs232cmd.c 5220                                       year = ( Calibration.CBCalibration.Date /
                             10000);
00536C B930           18902         MOV.W   R3,#00H
00536E 99282710       18903         MOV.W   R2,#02710H
005372 964842rr       18904         MOV.B   ES,#SEG( _Calibration+198 )
005376 9918rrrr       18905         MOV.W   R1,#SOF( _Calibration+198 )
00537A 8B01           18906         MOV.W   R0,[R1+]
00537C 8A11           18907         MOV.W   R1,[R1]
00537E C4rrrrrr       18908         FCALL   __UDIVL
005382 8A0F           18909         MOV.W   [R7],R0
                      18910 ; rs232cmd.c 5221       
                      18911 ; rs232cmd.c 5222                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
005384 91A8rr         18913         MOV.B   R5L,#SEG( __lc_bs )
005387 71BB           18914         XOR.B   R5H,R5H
005389 404706         18915         LEA     R4,R7+6
00538C 8C0704         18916         MOV.W   R0,[R7+4]
00538F 0F01           18917         PUSH.W  R0
005391 8C0704         18919         MOV.W   R0,[R7+4]
005394 0F01           18920         PUSH.W  R0
005396 8C0704         18922         MOV.W   R0,[R7+4]
005399 0F01           18923         PUSH.W  R0
00539B 9918rrrr       18925         MOV.W   R1,#SEG( _1169 )
00539F 9908rrrr       18926         MOV.W   R0,#SOF( _1169 )
0053A3 0F03           18927         PUSH.W  R0, R1
0053A5 8915           18929         MOV.W   R1,R5
0053A7 8904           18930         MOV.W   R0,R4
                      18931         CALL    _sprintf
0053A9 C4rrrrrr       +18931 ;       FCALL   _sprintf
0053AD 9970000A       18932         ADD.W   R7,#0AH
                      18934 ; rs232cmd.c 5223       
                      18935 ; rs232cmd.c 5224                                       rs232puts( buffer);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 310

ADDR   CODE            LINE SOURCELINE
0053B1 8915           18937         MOV.W   R1,R5
0053B3 8904           18938         MOV.W   R0,R4
                      18939         CALL    _rs232puts
0053B5 C4rrrrrr       +18939 ;       FCALL   _rs232puts
                      18940 ; rs232cmd.c 5225                               }
                      18941 ; rs232cmd.c 5226                       }
0053B9 FE5F           18943         BR      _1333
0053B9 FE5F00         18943         BR      _1333
0053BC                18944 _1323:
                      18945 ; rs232cmd.c 5227                       else
                      18946 ; rs232cmd.c 5228                       {
                      18947 ; rs232cmd.c 5229                               if ( !PasswordProtected)
0053BC 964842rr       18949         MOV.B   ES,#SEG( _PasswordProtected )
0053C0 9908rrrr       18950         MOV.W   R0,#SOF( _PasswordProtected )
0053C4 8A00           18951         MOV.W   R0,[R0]
0053C6 F258           18952         BNE     _1333
                      18953 ; rs232cmd.c 5230                               {
                      18954 ; rs232cmd.c 5231                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
0053C8 964842rr       18956         MOV.B   ES,#SEG( _ParCnt )
0053CC 9908rrrr       18957         MOV.W   R0,#SOF( _ParCnt )
0053D0 8200           18958         MOV.B   R0L,[R0]
0053D2 910403         18959         CMP.B   R0L,#03H
0053D5 F21F           18960         BNE     _1324
0053D7 9168rr         18961         MOV.B   R3L,#SEG( __lc_bs )
0053DA 7177           18962         XOR.B   R3H,R3H
0053DC 8927           18963         MOV.W   R2,R7
0053DE 91A8rr         18964         MOV.B   R5L,#SEG( __lc_bs )
0053E1 71BB           18965         XOR.B   R5H,R5H
0053E3 404702         18966         LEA     R4,R7+2
0053E6 9128rr         18967         MOV.B   R1L,#SEG( __lc_bs )
0053E9 7133           18968         XOR.B   R1H,R1H
0053EB 400704         18969         LEA     R0,R7+4
0053EE 0F03           18970         PUSH.W  R0, R1
0053F0 0F30           18972         PUSH.W  R4, R5
0053F2 0F0C           18974         PUSH.W  R2, R3
0053F4 9938rrrr       18976         MOV.W   R3,#SEG( _1170 )
0053F8 9928rrrr       18977         MOV.W   R2,#SOF( _1170 )
0053FC 0F0C           18978         PUSH.W  R2, R3
0053FE 9918rrrr       18980         MOV.W   R1,#SEG( _Cmd )
005402 9908rrrr       18981         MOV.W   R0,#SOF( _Cmd )
                      18982         CALL    _sscanf
005406 C4rrrrrr       +18982 ;       FCALL   _sscanf
00540A 99700010       18983         ADD.W   R7,#010H
00540E 99040003       18985         CMP.W   R0,#03H
005412 F306           18986         BEQ     _1325
005412 F306           18986         BEQ     _1325
005414                18987 _1324:
                      18988 ; rs232cmd.c 5232                                               SCPIError = SyntaxErr;
005414 964842rr       18990         MOV.B   ES,#SEG( _SCPIError )
005418 9908rrrr       18991         MOV.W   R0,#SOF( _SCPIError )
00541C BA03           18992         MOV.W   [R0],#03H
00541E FE2C           18993         BR      _1333
00541E FE2C           18993         BR      _1333
005420                18994 _1325:
                      18995 ; rs232cmd.c 5233                                       else
                      18996 ; rs232cmd.c 5234                                       {
                      18997 ; rs232cmd.c 5235                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
005420 8A07           18999         MOV.W   R0,[R7]
005422 8C1702         19000         MOV.W   R1,[R7+2]
005425 8C2704         19001         MOV.W   R2,[R7+4]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 311

ADDR   CODE            LINE SOURCELINE
                      19002         CALL    _ValidateDate
005428 C4rrrrrr       +19002 ;       FCALL   _ValidateDate
00542C 6900           19003         OR.W    R0,R0
00542E F207           19004         BNE     _1326
                      19005 ; rs232cmd.c 5236                                                       SCPIError = ExecErr;
005430 964842rr       19007         MOV.B   ES,#SEG( _SCPIError )
005434 9908rrrr       19008         MOV.W   R0,#SOF( _SCPIError )
005438 9A08001D       19009         MOV.W   [R0],#01DH
00543C FE1D           19010         BR      _1333
00543C FE1D           19010         BR      _1333
00543E                19011 _1326:
                      19012 ; rs232cmd.c 5237                                               else
                      19013 ; rs232cmd.c 5238                                               {
                      19014 ; rs232cmd.c 5239                                                       Calibration.CBCalibration
                            .Date = day + 100*month + 10000*year;
00543E 8C0702         19016         MOV.W   R0,[R7+2]
005441 E9000064       19017         MULU.W  R0,#064H
005445 0C0704         19018         ADD.W   R0,[R7+4]
005448 8A27           19019         MOV.W   R2,[R7]
00544A E9202710       19020         MULU.W  R2,#02710H
00544E 0902           19021         ADD.W   R0,R2
005450 B910           19022         MOVS.W  R1,#00H
005452 964842rr       19023         MOV.B   ES,#SEG( _Calibration+198 )
005456 9928rrrr       19024         MOV.W   R2,#SOF( _Calibration+198 )
00545A 8B0A           19025         MOV.W   [R2+],R0
00545C 8A1A           19026         MOV.W   [R2],R1
                      19027 ; rs232cmd.c 5240                                               
                      19028 ; rs232cmd.c 5241                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
00545E 9918rrrr       19030         MOV.W   R1,#SEG( _Calibration )
005462 9908rrrr       19031         MOV.W   R0,#SOF( _Calibration )
005466 964842rr       19032         MOV.B   ES,#SEG( _CalibrationPtr )
00546A 9928rrrr       19033         MOV.W   R2,#SOF( _CalibrationPtr )
00546E 8A22           19034         MOV.W   R2,[R2]
005470 993800E0       19035         MOV.W   R3,#0E0H
                      19036         CALL    _NV_Store
005474 C4rrrrrr       +19036 ;       FCALL   _NV_Store
                      19037 ; rs232cmd.c 5242                                               }
                      19038 ; rs232cmd.c 5243                                       }                               
                      19039 ; rs232cmd.c 5244                               }
                      19040 ; rs232cmd.c 5245                       }
                      19041 ; rs232cmd.c 5246               }
005478                19043 _1333:
                      19044 ; rs232cmd.c 5247       }
005478 9970001A       19046         ADD.W   R7,#01AH
00547C 2F30           19048         POP.W   R4, R5
00547E D680           19050         RET
                      19052 ; rs232cmd.c 5248       
                      19053 ; rs232cmd.c 5249       /************************************************************************
                            **/
                      19054 ; rs232cmd.c 5250       /* FactCBGenAGain                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19055 ; rs232cmd.c 5251       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19056 ; rs232cmd.c 5252       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 312

ADDR   CODE            LINE SOURCELINE
                      19057 ; rs232cmd.c 5253       /* Revised:       000705,                                                
                                                                                                                             
                                                                                    */
                      19058 ; rs232cmd.c 5254       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19059 ; rs232cmd.c 5255       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19060 ; rs232cmd.c 5256       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19061 ; rs232cmd.c 5257       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19062 ; rs232cmd.c 5258       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19063 ; rs232cmd.c 5259       /************************************************************************
                            **/
                      19064 ; rs232cmd.c 5260       void FactCBGenAGain( void)
                      19065 ; rs232cmd.c 5261       {
                      19066         ALIGN   1
                      19068         PUBLIC  _FactCBGenAGain
005480                19069 _FactCBGenAGain:
005480 0F30           19073         PUSH.W  R4, R5
005482 99720018       19075         SUB.W   R7,#018H
                      19080 ; rs232cmd.c 5262               char buffer[20];
                      19081 ; rs232cmd.c 5263               UC GainG, GainM;
                      19082 ; rs232cmd.c 5264       
                      19083 ; rs232cmd.c 5265               if ( CmdExecute && !SCPIError)
005486 964842rr       19085         MOV.B   ES,#SEG( _CmdExecute )
00548A 9908rrrr       19086         MOV.W   R0,#SOF( _CmdExecute )
00548E 8200           19087         MOV.B   R0L,[R0]
                      19088         BEQ     _1347
005490 F202           +19088 ;       BNE     _LG_1308
005492 D50095         +19088 ;       JMP.L   _1347
005496 D5009500       +19088 ;       JMP.L   _1347
005496                +19088 _LG_1308:
005496 964842rr       19089         MOV.B   ES,#SEG( _SCPIError )
00549A 9908rrrr       19090         MOV.W   R0,#SOF( _SCPIError )
00549E 8A00           19091         MOV.W   R0,[R0]
                      19092         BNE     _1347
0054A0 F302           +19092 ;       BEQ     _LG_1310
0054A2 D5008D         +19092 ;       JMP.L   _1347
0054A6 D5008D00       +19092 ;       JMP.L   _1347
0054A6                +19092 _LG_1310:
                      19093 ; rs232cmd.c 5266               {
                      19094 ; rs232cmd.c 5267                       if ( CmdRequest)
0054A6 964842rr       19096         MOV.B   ES,#SEG( _CmdRequest )
0054AA 9908rrrr       19097         MOV.W   R0,#SOF( _CmdRequest )
0054AE 8200           19098         MOV.B   R0L,[R0]
0054B0 F32E           19099         BEQ     _1337
                      19100 ; rs232cmd.c 5268                       {
                      19101 ; rs232cmd.c 5269                               if ( ParCnt)
0054B2 964842rr       19103         MOV.B   ES,#SEG( _ParCnt )
0054B6 9908rrrr       19104         MOV.W   R0,#SOF( _ParCnt )
0054BA 8200           19105         MOV.B   R0L,[R0]
0054BC F306           19106         BEQ     _1336
                      19107 ; rs232cmd.c 5270                                       SCPIError = SyntaxErr;
0054BE 964842rr       19109         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 313

ADDR   CODE            LINE SOURCELINE
0054C2 9908rrrr       19110         MOV.W   R0,#SOF( _SCPIError )
0054C6 BA03           19111         MOV.W   [R0],#03H
0054C8 FE7A           19112         BR      _1347
0054C8 FE7A           19112         BR      _1347
0054CA                19113 _1336:
                      19114 ; rs232cmd.c 5271                               else
                      19115 ; rs232cmd.c 5272                               {
                      19116 ; rs232cmd.c 5273                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.GainG, 
                      19117 ; rs232cmd.c 5274                                                                                
                                                                                        Calibration.CBCalibration.GainM);
0054CA 91A8rr         19119         MOV.B   R5L,#SEG( __lc_bs )
0054CD 71BB           19120         XOR.B   R5H,R5H
0054CF 8947           19121         MOV.W   R4,R7
0054D1 964842rr       19122         MOV.B   ES,#SEG( _Calibration+213 )
0054D5 9908rrrr       19123         MOV.W   R0,#SOF( _Calibration+213 )
0054D9 8200           19124         MOV.B   R0L,[R0]
0054DB B110           19125         MOVS.B  R0H,#00H
0054DD 964842rr       19126         MOV.B   ES,#SEG( _Calibration+215 )
0054E1 9918rrrr       19127         MOV.W   R1,#SOF( _Calibration+215 )
0054E5 8221           19128         MOV.B   R1L,[R1]
0054E7 B130           19129         MOVS.B  R1H,#00H
0054E9 0F02           19130         PUSH.W  R1
0054EB 0F01           19132         PUSH.W  R0
0054ED 9918rrrr       19134         MOV.W   R1,#SEG( _1296 )
0054F1 9908rrrr       19135         MOV.W   R0,#SOF( _1296 )
0054F5 0F03           19136         PUSH.W  R0, R1
0054F7 8915           19138         MOV.W   R1,R5
0054F9 8904           19139         MOV.W   R0,R4
                      19140         CALL    _sprintf
0054FB C4rrrrrr       +19140 ;       FCALL   _sprintf
0054FF 99700008       19141         ADD.W   R7,#08H
                      19143 ; rs232cmd.c 5275                                       rs232puts( buffer);
005503 8915           19145         MOV.W   R1,R5
005505 8904           19146         MOV.W   R0,R4
                      19147         CALL    _rs232puts
005507 C4rrrrrr       +19147 ;       FCALL   _rs232puts
                      19148 ; rs232cmd.c 5276                               }
                      19149 ; rs232cmd.c 5277                       }
00550B FE59           19151         BR      _1347
00550B FE5900         19151         BR      _1347
00550E                19152 _1337:
                      19153 ; rs232cmd.c 5278                       else
                      19154 ; rs232cmd.c 5279                       {
                      19155 ; rs232cmd.c 5280                               if ( !PasswordProtected)
00550E 964842rr       19157         MOV.B   ES,#SEG( _PasswordProtected )
005512 9908rrrr       19158         MOV.W   R0,#SOF( _PasswordProtected )
005516 8A00           19159         MOV.W   R0,[R0]
005518 F252           19160         BNE     _1347
                      19161 ; rs232cmd.c 5281                               {
                      19162 ; rs232cmd.c 5282                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &GainG, &GainM)) != 2))
00551A 964842rr       19164         MOV.B   ES,#SEG( _ParCnt )
00551E 9908rrrr       19165         MOV.W   R0,#SOF( _ParCnt )
005522 8200           19166         MOV.B   R0L,[R0]
005524 910402         19167         CMP.B   R0L,#02H
005527 F21B           19168         BNE     _1338
005529 9918rrrr       19169         MOV.W   R1,#SEG( _Cmd )
00552D 9908rrrr       19170         MOV.W   R0,#SOF( _Cmd )
005531 9168rr         19171         MOV.B   R3L,#SEG( __lc_bs )
005534 7177           19172         XOR.B   R3H,R3H
005536 402714         19173         LEA     R2,R7+20
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 314

ADDR   CODE            LINE SOURCELINE
005539 91A8rr         19174         MOV.B   R5L,#SEG( __lc_bs )
00553C 71BB           19175         XOR.B   R5H,R5H
00553E 404716         19176         LEA     R4,R7+22
005541 0F30           19177         PUSH.W  R4, R5
005543 0F0C           19179         PUSH.W  R2, R3
005545 9938rrrr       19181         MOV.W   R3,#SEG( _1297 )
005549 9928rrrr       19182         MOV.W   R2,#SOF( _1297 )
00554D 0F0C           19183         PUSH.W  R2, R3
                      19185         CALL    _sscanf
00554F C4rrrrrr       +19185 ;       FCALL   _sscanf
005553 9970000C       19186         ADD.W   R7,#0CH
005557 99040002       19188         CMP.W   R0,#02H
00555B F307           19189         BEQ     _1339
00555B F30700         19189         BEQ     _1339
00555E                19190 _1338:
                      19191 ; rs232cmd.c 5283                                               SCPIError = SyntaxErr;
00555E 964842rr       19193         MOV.B   ES,#SEG( _SCPIError )
005562 9908rrrr       19194         MOV.W   R0,#SOF( _SCPIError )
005566 BA03           19195         MOV.W   [R0],#03H
005568 FE2A           19196         BR      _1347
005568 FE2A           19196         BR      _1347
00556A                19197 _1339:
                      19198 ; rs232cmd.c 5284                                       else
                      19199 ; rs232cmd.c 5285                                       {
                      19200 ; rs232cmd.c 5286                                               Calibration.CBCalibration.GainG =
                             GainG;
00556A 840714         19202         MOV.B   R0L,[R7+20]
00556D 964842rr       19203         MOV.B   ES,#SEG( _Calibration+213 )
005571 9918rrrr       19204         MOV.W   R1,#SOF( _Calibration+213 )
005575 8209           19205         MOV.B   [R1],R0L
                      19206 ; rs232cmd.c 5287                                               Calibration.CBCalibration.GainM =
                             GainM;
005577 840716         19208         MOV.B   R0L,[R7+22]
00557A 964842rr       19209         MOV.B   ES,#SEG( _Calibration+215 )
00557E 9918rrrr       19210         MOV.W   R1,#SOF( _Calibration+215 )
005582 8209           19211         MOV.B   [R1],R0L
                      19212 ; rs232cmd.c 5288                                                                                
                                                                                                                             
                                                                                                                            
                      19213 ; rs232cmd.c 5289                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005584 9918rrrr       19215         MOV.W   R1,#SEG( _Calibration )
005588 9908rrrr       19216         MOV.W   R0,#SOF( _Calibration )
00558C 964842rr       19217         MOV.B   ES,#SEG( _CalibrationPtr )
005590 9928rrrr       19218         MOV.W   R2,#SOF( _CalibrationPtr )
005594 8A22           19219         MOV.W   R2,[R2]
005596 993800E0       19220         MOV.W   R3,#0E0H
                      19221         CALL    _NV_Store
00559A C4rrrrrr       +19221 ;       FCALL   _NV_Store
                      19222 ; rs232cmd.c 5290       
                      19223 ; rs232cmd.c 5291                                               if ( CBSetup.System < NTSC)
00559E 964842rr       19225         MOV.B   ES,#SEG( _CBSetup )
0055A2 9908rrrr       19226         MOV.W   R0,#SOF( _CBSetup )
0055A6 8200           19227         MOV.B   R0L,[R0]
0055A8 910402         19228         CMP.B   R0L,#02H
0055AB F005           19229         BCC     _1340
                      19230 ; rs232cmd.c 5292                                                       WriteCBGain( GainG);
0055AD 840714         19232         MOV.B   R0L,[R7+20]
                      19233         CALL    _WriteCBGain
0055B0 C4rrrrrr       +19233 ;       FCALL   _WriteCBGain
0055B4 FE04           19234         BR      _1347
0055B4 FE04           19234         BR      _1347
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 315

ADDR   CODE            LINE SOURCELINE
0055B6                19235 _1340:
                      19236 ; rs232cmd.c 5293                                               else
                      19237 ; rs232cmd.c 5294                                                       WriteCBGain( GainM);
0055B6 840716         19239         MOV.B   R0L,[R7+22]
                      19240         CALL    _WriteCBGain
0055B9 C4rrrrrr       +19240 ;       FCALL   _WriteCBGain
                      19241 ; rs232cmd.c 5295                                       }
                      19242 ; rs232cmd.c 5296                               }
                      19243 ; rs232cmd.c 5297                       }
                      19244 ; rs232cmd.c 5298               }
0055BE                19246 _1347:
                      19247 ; rs232cmd.c 5299       }
0055BE 99700018       19249         ADD.W   R7,#018H
0055C2 2F30           19251         POP.W   R4, R5
0055C4 D680           19253         RET
                      19255 ; rs232cmd.c 5300       
                      19256 ; rs232cmd.c 5301       /************************************************************************
                            **/
                      19257 ; rs232cmd.c 5302       /* FactCBGenCGain                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19258 ; rs232cmd.c 5303       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19259 ; rs232cmd.c 5304       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19260 ; rs232cmd.c 5305       /* Revised:       000705,                                                
                                                                                                                             
                                                                                    */
                      19261 ; rs232cmd.c 5306       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19262 ; rs232cmd.c 5307       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19263 ; rs232cmd.c 5308       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19264 ; rs232cmd.c 5309       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19265 ; rs232cmd.c 5310       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19266 ; rs232cmd.c 5311       /************************************************************************
                            **/
                      19267 ; rs232cmd.c 5312       void FactCBGenCGain( void)
                      19268 ; rs232cmd.c 5313       {
                      19269         ALIGN   1
                      19271         PUBLIC  _FactCBGenCGain
0055C6                19272 _FactCBGenCGain:
0055C6 0F30           19276         PUSH.W  R4, R5
0055C8 99720018       19278         SUB.W   R7,#018H
                      19283 ; rs232cmd.c 5314               char buffer[20];
                      19284 ; rs232cmd.c 5315               UC ChromaGainG, ChromaGainM;
                      19285 ; rs232cmd.c 5316       
                      19286 ; rs232cmd.c 5317               if ( CmdExecute && !SCPIError)
0055CC 964842rr       19288         MOV.B   ES,#SEG( _CmdExecute )
0055D0 9908rrrr       19289         MOV.W   R0,#SOF( _CmdExecute )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 316

ADDR   CODE            LINE SOURCELINE
0055D4 8200           19290         MOV.B   R0L,[R0]
                      19291         BEQ     _1362
0055D6 F202           +19291 ;       BNE     _LG_1324
0055D8 D50095         +19291 ;       JMP.L   _1362
0055DC D5009500       +19291 ;       JMP.L   _1362
0055DC                +19291 _LG_1324:
0055DC 964842rr       19292         MOV.B   ES,#SEG( _SCPIError )
0055E0 9908rrrr       19293         MOV.W   R0,#SOF( _SCPIError )
0055E4 8A00           19294         MOV.W   R0,[R0]
                      19295         BNE     _1362
0055E6 F302           +19295 ;       BEQ     _LG_1326
0055E8 D5008D         +19295 ;       JMP.L   _1362
0055EC D5008D00       +19295 ;       JMP.L   _1362
0055EC                +19295 _LG_1326:
                      19296 ; rs232cmd.c 5318               {
                      19297 ; rs232cmd.c 5319                       if ( CmdRequest)
0055EC 964842rr       19299         MOV.B   ES,#SEG( _CmdRequest )
0055F0 9908rrrr       19300         MOV.W   R0,#SOF( _CmdRequest )
0055F4 8200           19301         MOV.B   R0L,[R0]
0055F6 F32E           19302         BEQ     _1352
                      19303 ; rs232cmd.c 5320                       {
                      19304 ; rs232cmd.c 5321                               if ( ParCnt)
0055F8 964842rr       19306         MOV.B   ES,#SEG( _ParCnt )
0055FC 9908rrrr       19307         MOV.W   R0,#SOF( _ParCnt )
005600 8200           19308         MOV.B   R0L,[R0]
005602 F306           19309         BEQ     _1351
                      19310 ; rs232cmd.c 5322                                       SCPIError = SyntaxErr;
005604 964842rr       19312         MOV.B   ES,#SEG( _SCPIError )
005608 9908rrrr       19313         MOV.W   R0,#SOF( _SCPIError )
00560C BA03           19314         MOV.W   [R0],#03H
00560E FE7A           19315         BR      _1362
00560E FE7A           19315         BR      _1362
005610                19316 _1351:
                      19317 ; rs232cmd.c 5323                               else
                      19318 ; rs232cmd.c 5324                               {
                      19319 ; rs232cmd.c 5325                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.ChromaGainG, 
                      19320 ; rs232cmd.c 5326                                                                                
                                                                                        Calibration.CBCalibration.ChromaGainM
                            );
005610 91A8rr         19322         MOV.B   R5L,#SEG( __lc_bs )
005613 71BB           19323         XOR.B   R5H,R5H
005615 8947           19324         MOV.W   R4,R7
005617 964842rr       19325         MOV.B   ES,#SEG( _Calibration+214 )
00561B 9908rrrr       19326         MOV.W   R0,#SOF( _Calibration+214 )
00561F 8200           19327         MOV.B   R0L,[R0]
005621 B110           19328         MOVS.B  R0H,#00H
005623 964842rr       19329         MOV.B   ES,#SEG( _Calibration+216 )
005627 9918rrrr       19330         MOV.W   R1,#SOF( _Calibration+216 )
00562B 8221           19331         MOV.B   R1L,[R1]
00562D B130           19332         MOVS.B  R1H,#00H
00562F 0F02           19333         PUSH.W  R1
005631 0F01           19335         PUSH.W  R0
005633 9918rrrr       19337         MOV.W   R1,#SEG( _1296 )
005637 9908rrrr       19338         MOV.W   R0,#SOF( _1296 )
00563B 0F03           19339         PUSH.W  R0, R1
00563D 8915           19341         MOV.W   R1,R5
00563F 8904           19342         MOV.W   R0,R4
                      19343         CALL    _sprintf
005641 C4rrrrrr       +19343 ;       FCALL   _sprintf
005645 99700008       19344         ADD.W   R7,#08H
                      19346 ; rs232cmd.c 5327                                       rs232puts( buffer);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 317

ADDR   CODE            LINE SOURCELINE
005649 8915           19348         MOV.W   R1,R5
00564B 8904           19349         MOV.W   R0,R4
                      19350         CALL    _rs232puts
00564D C4rrrrrr       +19350 ;       FCALL   _rs232puts
                      19351 ; rs232cmd.c 5328                               }
                      19352 ; rs232cmd.c 5329                       }
005651 FE59           19354         BR      _1362
005651 FE5900         19354         BR      _1362
005654                19355 _1352:
                      19356 ; rs232cmd.c 5330                       else
                      19357 ; rs232cmd.c 5331                       {
                      19358 ; rs232cmd.c 5332                               if ( !PasswordProtected)
005654 964842rr       19360         MOV.B   ES,#SEG( _PasswordProtected )
005658 9908rrrr       19361         MOV.W   R0,#SOF( _PasswordProtected )
00565C 8A00           19362         MOV.W   R0,[R0]
00565E F252           19363         BNE     _1362
                      19364 ; rs232cmd.c 5333                               {
                      19365 ; rs232cmd.c 5334                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ChromaGainG, &ChromaGainM)) != 2))
005660 964842rr       19367         MOV.B   ES,#SEG( _ParCnt )
005664 9908rrrr       19368         MOV.W   R0,#SOF( _ParCnt )
005668 8200           19369         MOV.B   R0L,[R0]
00566A 910402         19370         CMP.B   R0L,#02H
00566D F21B           19371         BNE     _1353
00566F 9918rrrr       19372         MOV.W   R1,#SEG( _Cmd )
005673 9908rrrr       19373         MOV.W   R0,#SOF( _Cmd )
005677 9168rr         19374         MOV.B   R3L,#SEG( __lc_bs )
00567A 7177           19375         XOR.B   R3H,R3H
00567C 402714         19376         LEA     R2,R7+20
00567F 91A8rr         19377         MOV.B   R5L,#SEG( __lc_bs )
005682 71BB           19378         XOR.B   R5H,R5H
005684 404716         19379         LEA     R4,R7+22
005687 0F30           19380         PUSH.W  R4, R5
005689 0F0C           19382         PUSH.W  R2, R3
00568B 9938rrrr       19384         MOV.W   R3,#SEG( _1297 )
00568F 9928rrrr       19385         MOV.W   R2,#SOF( _1297 )
005693 0F0C           19386         PUSH.W  R2, R3
                      19388         CALL    _sscanf
005695 C4rrrrrr       +19388 ;       FCALL   _sscanf
005699 9970000C       19389         ADD.W   R7,#0CH
00569D 99040002       19391         CMP.W   R0,#02H
0056A1 F307           19392         BEQ     _1354
0056A1 F30700         19392         BEQ     _1354
0056A4                19393 _1353:
                      19394 ; rs232cmd.c 5335                                               SCPIError = SyntaxErr;
0056A4 964842rr       19396         MOV.B   ES,#SEG( _SCPIError )
0056A8 9908rrrr       19397         MOV.W   R0,#SOF( _SCPIError )
0056AC BA03           19398         MOV.W   [R0],#03H
0056AE FE2A           19399         BR      _1362
0056AE FE2A           19399         BR      _1362
0056B0                19400 _1354:
                      19401 ; rs232cmd.c 5336                                       else
                      19402 ; rs232cmd.c 5337                                       {
                      19403 ; rs232cmd.c 5338                                               Calibration.CBCalibration.ChromaG
                            ainG = ChromaGainG;
0056B0 840714         19405         MOV.B   R0L,[R7+20]
0056B3 964842rr       19406         MOV.B   ES,#SEG( _Calibration+214 )
0056B7 9918rrrr       19407         MOV.W   R1,#SOF( _Calibration+214 )
0056BB 8209           19408         MOV.B   [R1],R0L
                      19409 ; rs232cmd.c 5339                                               Calibration.CBCalibration.ChromaG
                            ainM = ChromaGainM;
0056BD 840716         19411         MOV.B   R0L,[R7+22]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 318

ADDR   CODE            LINE SOURCELINE
0056C0 964842rr       19412         MOV.B   ES,#SEG( _Calibration+216 )
0056C4 9918rrrr       19413         MOV.W   R1,#SOF( _Calibration+216 )
0056C8 8209           19414         MOV.B   [R1],R0L
                      19415 ; rs232cmd.c 5340                                                                                
                                                                                                                             
                                                                                                                            
                      19416 ; rs232cmd.c 5341                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0056CA 9918rrrr       19418         MOV.W   R1,#SEG( _Calibration )
0056CE 9908rrrr       19419         MOV.W   R0,#SOF( _Calibration )
0056D2 964842rr       19420         MOV.B   ES,#SEG( _CalibrationPtr )
0056D6 9928rrrr       19421         MOV.W   R2,#SOF( _CalibrationPtr )
0056DA 8A22           19422         MOV.W   R2,[R2]
0056DC 993800E0       19423         MOV.W   R3,#0E0H
                      19424         CALL    _NV_Store
0056E0 C4rrrrrr       +19424 ;       FCALL   _NV_Store
                      19425 ; rs232cmd.c 5342       
                      19426 ; rs232cmd.c 5343                                               if ( CBSetup.System < NTSC)
0056E4 964842rr       19428         MOV.B   ES,#SEG( _CBSetup )
0056E8 9908rrrr       19429         MOV.W   R0,#SOF( _CBSetup )
0056EC 8200           19430         MOV.B   R0L,[R0]
0056EE 910402         19431         CMP.B   R0L,#02H
0056F1 F005           19432         BCC     _1355
                      19433 ; rs232cmd.c 5344                                                       WriteCBChromaGain( Chroma
                            GainG);
0056F3 840714         19435         MOV.B   R0L,[R7+20]
                      19436         CALL    _WriteCBChromaGain
0056F6 C4rrrrrr       +19436 ;       FCALL   _WriteCBChromaGain
0056FA FE04           19437         BR      _1362
0056FA FE04           19437         BR      _1362
0056FC                19438 _1355:
                      19439 ; rs232cmd.c 5345                                               else
                      19440 ; rs232cmd.c 5346                                                       WriteCBChromaGain( Chroma
                            GainM);
0056FC 840716         19442         MOV.B   R0L,[R7+22]
                      19443         CALL    _WriteCBChromaGain
0056FF C4rrrrrr       +19443 ;       FCALL   _WriteCBChromaGain
                      19444 ; rs232cmd.c 5347                                       }
                      19445 ; rs232cmd.c 5348                               }
                      19446 ; rs232cmd.c 5349                       }
                      19447 ; rs232cmd.c 5350               }
005704                19449 _1362:
                      19450 ; rs232cmd.c 5351       }
005704 99700018       19452         ADD.W   R7,#018H
005708 2F30           19454         POP.W   R4, R5
00570A D680           19456         RET
                      19458 ; rs232cmd.c 5352       
                      19459 ; rs232cmd.c 5353       /************************************************************************
                            **/
                      19460 ; rs232cmd.c 5354       /* FactCBGenPhase                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19461 ; rs232cmd.c 5355       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19462 ; rs232cmd.c 5356       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19463 ; rs232cmd.c 5357       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      19464 ; rs232cmd.c 5358       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 319

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                      19465 ; rs232cmd.c 5359       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19466 ; rs232cmd.c 5360       /* Remarks:             PAL range: 0-4*625*1728, NTSC range: 0-2*525*1716
                                                                            */
                      19467 ; rs232cmd.c 5361       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19468 ; rs232cmd.c 5362       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19469 ; rs232cmd.c 5363       /************************************************************************
                            **/
                      19470 ; rs232cmd.c 5364       void FactCBGenPhase( void)
                      19471 ; rs232cmd.c 5365       {
                      19472         ALIGN   1
                      19474         PUBLIC  _FactCBGenPhase
00570C                19475 _FactCBGenPhase:
00570C 0F30           19479         PUSH.W  R4, R5
00570E 99720026       19481         SUB.W   R7,#026H
                      19486 ; rs232cmd.c 5366               char buffer[30];
                      19487 ; rs232cmd.c 5367               UL PhaseG, PhaseM;
                      19488 ; rs232cmd.c 5368       
                      19489 ; rs232cmd.c 5369               if ( CmdExecute && !SCPIError)
005712 964842rr       19491         MOV.B   ES,#SEG( _CmdExecute )
005716 9908rrrr       19492         MOV.W   R0,#SOF( _CmdExecute )
00571A 8200           19493         MOV.B   R0L,[R0]
                      19494         BEQ     _1375
00571C F202           +19494 ;       BNE     _LG_1340
00571E D50092         +19494 ;       JMP.L   _1375
005722 D5009200       +19494 ;       JMP.L   _1375
005722                +19494 _LG_1340:
005722 964842rr       19495         MOV.B   ES,#SEG( _SCPIError )
005726 9908rrrr       19496         MOV.W   R0,#SOF( _SCPIError )
00572A 8A00           19497         MOV.W   R0,[R0]
                      19498         BNE     _1375
00572C F302           +19498 ;       BEQ     _LG_1342
00572E D5008A         +19498 ;       JMP.L   _1375
005732 D5008A00       +19498 ;       JMP.L   _1375
005732                +19498 _LG_1342:
                      19499 ; rs232cmd.c 5370               {
                      19500 ; rs232cmd.c 5371                       if ( CmdRequest)
005732 964842rr       19502         MOV.B   ES,#SEG( _CmdRequest )
005736 9908rrrr       19503         MOV.W   R0,#SOF( _CmdRequest )
00573A 8200           19504         MOV.B   R0L,[R0]
00573C F32E           19505         BEQ     _1367
                      19506 ; rs232cmd.c 5372                       {
                      19507 ; rs232cmd.c 5373                               if ( ParCnt)
00573E 964842rr       19509         MOV.B   ES,#SEG( _ParCnt )
005742 9908rrrr       19510         MOV.W   R0,#SOF( _ParCnt )
005746 8200           19511         MOV.B   R0L,[R0]
005748 F306           19512         BEQ     _1366
                      19513 ; rs232cmd.c 5374                                       SCPIError = SyntaxErr;
00574A 964842rr       19515         MOV.B   ES,#SEG( _SCPIError )
00574E 9908rrrr       19516         MOV.W   R0,#SOF( _SCPIError )
005752 BA03           19517         MOV.W   [R0],#03H
005754 FE77           19518         BR      _1375
005754 FE77           19518         BR      _1375
005756                19519 _1366:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 320

ADDR   CODE            LINE SOURCELINE
                      19520 ; rs232cmd.c 5375                               else
                      19521 ; rs232cmd.c 5376                               {
                      19522 ; rs232cmd.c 5377                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .CBCalibration.PhaseG, 
                      19523 ; rs232cmd.c 5378                                                                                
                                                                                                Calibration.CBCalibration.Pha
                            seM);
005756 91A8rr         19525         MOV.B   R5L,#SEG( __lc_bs )
005759 71BB           19526         XOR.B   R5H,R5H
00575B 8947           19527         MOV.W   R4,R7
00575D 964842rr       19528         MOV.B   ES,#SEG( _Calibration+202 )
005761 9918rrrr       19529         MOV.W   R1,#SOF( _Calibration+202 )
005765 8B01           19530         MOV.W   R0,[R1+]
005767 8A11           19531         MOV.W   R1,[R1]
005769 964842rr       19532         MOV.B   ES,#SEG( _Calibration+208 )
00576D 9938rrrr       19533         MOV.W   R3,#SOF( _Calibration+208 )
005771 8B23           19534         MOV.W   R2,[R3+]
005773 8A33           19535         MOV.W   R3,[R3]
005775 0F0C           19536         PUSH.W  R2, R3
005777 0F03           19538         PUSH.W  R0, R1
005779 9918rrrr       19540         MOV.W   R1,#SEG( _1222 )
00577D 9908rrrr       19541         MOV.W   R0,#SOF( _1222 )
005781 0F03           19542         PUSH.W  R0, R1
005783 8915           19544         MOV.W   R1,R5
005785 8904           19545         MOV.W   R0,R4
                      19546         CALL    _sprintf
005787 C4rrrrrr       +19546 ;       FCALL   _sprintf
00578B 9970000C       19547         ADD.W   R7,#0CH
                      19549 ; rs232cmd.c 5379                                       rs232puts( buffer);
00578F 8915           19551         MOV.W   R1,R5
005791 8904           19552         MOV.W   R0,R4
                      19553         CALL    _rs232puts
005793 C4rrrrrr       +19553 ;       FCALL   _rs232puts
                      19554 ; rs232cmd.c 5380                               }
                      19555 ; rs232cmd.c 5381                       }
005797 FE56           19557         BR      _1375
005797 FE5600         19557         BR      _1375
00579A                19558 _1367:
                      19559 ; rs232cmd.c 5382                       else
                      19560 ; rs232cmd.c 5383                       {
                      19561 ; rs232cmd.c 5384                               if ( !PasswordProtected)
00579A 964842rr       19563         MOV.B   ES,#SEG( _PasswordProtected )
00579E 9908rrrr       19564         MOV.W   R0,#SOF( _PasswordProtected )
0057A2 8A00           19565         MOV.W   R0,[R0]
0057A4 F24F           19566         BNE     _1375
                      19567 ; rs232cmd.c 5385                               {
                      19568 ; rs232cmd.c 5386                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
0057A6 964842rr       19570         MOV.B   ES,#SEG( _ParCnt )
0057AA 9908rrrr       19571         MOV.W   R0,#SOF( _ParCnt )
0057AE 8200           19572         MOV.B   R0L,[R0]
0057B0 910402         19573         CMP.B   R0L,#02H
0057B3 F21B           19574         BNE     _1368
0057B5 9918rrrr       19575         MOV.W   R1,#SEG( _Cmd )
0057B9 9908rrrr       19576         MOV.W   R0,#SOF( _Cmd )
0057BD 9168rr         19577         MOV.B   R3L,#SEG( __lc_bs )
0057C0 7177           19578         XOR.B   R3H,R3H
0057C2 40271E         19579         LEA     R2,R7+30
0057C5 91A8rr         19580         MOV.B   R5L,#SEG( __lc_bs )
0057C8 71BB           19581         XOR.B   R5H,R5H
0057CA 404722         19582         LEA     R4,R7+34
0057CD 0F30           19583         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 321

ADDR   CODE            LINE SOURCELINE
0057CF 0F0C           19585         PUSH.W  R2, R3
0057D1 9938rrrr       19587         MOV.W   R3,#SEG( _1034 )
0057D5 9928rrrr       19588         MOV.W   R2,#SOF( _1034 )
0057D9 0F0C           19589         PUSH.W  R2, R3
                      19591         CALL    _sscanf
0057DB C4rrrrrr       +19591 ;       FCALL   _sscanf
0057DF 9970000C       19592         ADD.W   R7,#0CH
0057E3 99040002       19594         CMP.W   R0,#02H
0057E7 F307           19595         BEQ     _1369
0057E7 F30700         19595         BEQ     _1369
0057EA                19596 _1368:
                      19597 ; rs232cmd.c 5387                                               SCPIError = SyntaxErr;
0057EA 964842rr       19599         MOV.B   ES,#SEG( _SCPIError )
0057EE 9908rrrr       19600         MOV.W   R0,#SOF( _SCPIError )
0057F2 BA03           19601         MOV.W   [R0],#03H
0057F4 FE27           19602         BR      _1375
0057F4 FE27           19602         BR      _1375
0057F6                19603 _1369:
                      19604 ; rs232cmd.c 5388                                       else
                      19605 ; rs232cmd.c 5389                                       {
                      19606 ; rs232cmd.c 5390                                               Calibration.CBCalibration.PhaseG 
                            = PhaseG;
0057F6 8C1720         19608         MOV.W   R1,[R7+32]
0057F9 8C071E         19609         MOV.W   R0,[R7+30]
0057FC 964842rr       19610         MOV.B   ES,#SEG( _Calibration+202 )
005800 9928rrrr       19611         MOV.W   R2,#SOF( _Calibration+202 )
005804 8B0A           19612         MOV.W   [R2+],R0
005806 8A1A           19613         MOV.W   [R2],R1
                      19614 ; rs232cmd.c 5391                                               Calibration.CBCalibration.PhaseM 
                            = PhaseM;
005808 8C1724         19616         MOV.W   R1,[R7+36]
00580B 8C0722         19617         MOV.W   R0,[R7+34]
00580E 964842rr       19618         MOV.B   ES,#SEG( _Calibration+208 )
005812 9928rrrr       19619         MOV.W   R2,#SOF( _Calibration+208 )
005816 8B0A           19620         MOV.W   [R2+],R0
005818 8A1A           19621         MOV.W   [R2],R1
                      19622 ; rs232cmd.c 5392                                       
                      19623 ; rs232cmd.c 5393                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
00581A 9918rrrr       19625         MOV.W   R1,#SEG( _Calibration )
00581E 9908rrrr       19626         MOV.W   R0,#SOF( _Calibration )
005822 964842rr       19627         MOV.B   ES,#SEG( _CalibrationPtr )
005826 9928rrrr       19628         MOV.W   R2,#SOF( _CalibrationPtr )
00582A 8A22           19629         MOV.W   R2,[R2]
00582C 993800E0       19630         MOV.W   R3,#0E0H
                      19631         CALL    _NV_Store
005830 C4rrrrrr       +19631 ;       FCALL   _NV_Store
                      19632 ; rs232cmd.c 5394       
                      19633 ; rs232cmd.c 5395                                               SetCBDelay( CBSetup.Delay);
005834 964842rr       19635         MOV.B   ES,#SEG( _CBSetup+4 )
005838 9918rrrr       19636         MOV.W   R1,#SOF( _CBSetup+4 )
00583C 8B01           19637         MOV.W   R0,[R1+]
00583E 8A11           19638         MOV.W   R1,[R1]
                      19639         CALL    _SetCBDelay
005840 C4rrrrrr       +19639 ;       FCALL   _SetCBDelay
                      19640 ; rs232cmd.c 5396                                       }
                      19641 ; rs232cmd.c 5397                               }
                      19642 ; rs232cmd.c 5398                       }
                      19643 ; rs232cmd.c 5399               }
005844                19645 _1375:
                      19646 ; rs232cmd.c 5400       }
005844 99700026       19648         ADD.W   R7,#026H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 322

ADDR   CODE            LINE SOURCELINE
005848 2F30           19650         POP.W   R4, R5
00584A D680           19652         RET
                      19654 ; rs232cmd.c 5401       
                      19655 ; rs232cmd.c 5402       /************************************************************************
                            **/
                      19656 ; rs232cmd.c 5403       /* FactCBGenScHPhase                                                     
                                                                                                                             
                                RS232CMD.C  */
                      19657 ; rs232cmd.c 5404       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19658 ; rs232cmd.c 5405       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19659 ; rs232cmd.c 5406       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      19660 ; rs232cmd.c 5407       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19661 ; rs232cmd.c 5408       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19662 ; rs232cmd.c 5409       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19663 ; rs232cmd.c 5410       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19664 ; rs232cmd.c 5411       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19665 ; rs232cmd.c 5412       /************************************************************************
                            **/
                      19666 ; rs232cmd.c 5413       void FactCBGenScHPhase( void)
                      19667 ; rs232cmd.c 5414       {
                      19668         ALIGN   1
                      19670         PUBLIC  _FactCBGenScHPhase
00584C                19671 _FactCBGenScHPhase:
00584C 0F30           19675         PUSH.W  R4, R5
00584E 99720022       19677         SUB.W   R7,#022H
                      19682 ; rs232cmd.c 5415               char buffer[30];
                      19683 ; rs232cmd.c 5416               UC ScHPhaseG, ScHPhaseM;
                      19684 ; rs232cmd.c 5417       
                      19685 ; rs232cmd.c 5418               if ( CmdExecute && !SCPIError)
005852 964842rr       19687         MOV.B   ES,#SEG( _CmdExecute )
005856 9908rrrr       19688         MOV.W   R0,#SOF( _CmdExecute )
00585A 8200           19689         MOV.B   R0L,[R0]
                      19690         BEQ     _1387
00585C F202           +19690 ;       BNE     _LG_1354
00585E D5008C         +19690 ;       JMP.L   _1387
005862 D5008C00       +19690 ;       JMP.L   _1387
005862                +19690 _LG_1354:
005862 964842rr       19691         MOV.B   ES,#SEG( _SCPIError )
005866 9908rrrr       19692         MOV.W   R0,#SOF( _SCPIError )
00586A 8A00           19693         MOV.W   R0,[R0]
                      19694         BNE     _1387
00586C F302           +19694 ;       BEQ     _LG_1356
00586E D50084         +19694 ;       JMP.L   _1387
005872 D5008400       +19694 ;       JMP.L   _1387
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 323

ADDR   CODE            LINE SOURCELINE
005872                +19694 _LG_1356:
                      19695 ; rs232cmd.c 5419               {
                      19696 ; rs232cmd.c 5420                       if ( CmdRequest)
005872 964842rr       19698         MOV.B   ES,#SEG( _CmdRequest )
005876 9908rrrr       19699         MOV.W   R0,#SOF( _CmdRequest )
00587A 8200           19700         MOV.B   R0L,[R0]
00587C F32E           19701         BEQ     _1379
                      19702 ; rs232cmd.c 5421                       {
                      19703 ; rs232cmd.c 5422                               if ( ParCnt)
00587E 964842rr       19705         MOV.B   ES,#SEG( _ParCnt )
005882 9908rrrr       19706         MOV.W   R0,#SOF( _ParCnt )
005886 8200           19707         MOV.B   R0L,[R0]
005888 F306           19708         BEQ     _1378
                      19709 ; rs232cmd.c 5423                                       SCPIError = SyntaxErr;
00588A 964842rr       19711         MOV.B   ES,#SEG( _SCPIError )
00588E 9908rrrr       19712         MOV.W   R0,#SOF( _SCPIError )
005892 BA03           19713         MOV.W   [R0],#03H
005894 FE71           19714         BR      _1387
005894 FE71           19714         BR      _1387
005896                19715 _1378:
                      19716 ; rs232cmd.c 5424                               else
                      19717 ; rs232cmd.c 5425                               {
                      19718 ; rs232cmd.c 5426                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.ScHPhaseG, 
                      19719 ; rs232cmd.c 5427                                                                                
                                                                                        Calibration.CBCalibration.ScHPhaseM);
                            
005896 91A8rr         19721         MOV.B   R5L,#SEG( __lc_bs )
005899 71BB           19722         XOR.B   R5H,R5H
00589B 8947           19723         MOV.W   R4,R7
00589D 964842rr       19724         MOV.B   ES,#SEG( _Calibration+206 )
0058A1 9908rrrr       19725         MOV.W   R0,#SOF( _Calibration+206 )
0058A5 8200           19726         MOV.B   R0L,[R0]
0058A7 B110           19727         MOVS.B  R0H,#00H
0058A9 964842rr       19728         MOV.B   ES,#SEG( _Calibration+212 )
0058AD 9918rrrr       19729         MOV.W   R1,#SOF( _Calibration+212 )
0058B1 8221           19730         MOV.B   R1L,[R1]
0058B3 B130           19731         MOVS.B  R1H,#00H
0058B5 0F02           19732         PUSH.W  R1
0058B7 0F01           19734         PUSH.W  R0
0058B9 9918rrrr       19736         MOV.W   R1,#SEG( _1296 )
0058BD 9908rrrr       19737         MOV.W   R0,#SOF( _1296 )
0058C1 0F03           19738         PUSH.W  R0, R1
0058C3 8915           19740         MOV.W   R1,R5
0058C5 8904           19741         MOV.W   R0,R4
                      19742         CALL    _sprintf
0058C7 C4rrrrrr       +19742 ;       FCALL   _sprintf
0058CB 99700008       19743         ADD.W   R7,#08H
                      19745 ; rs232cmd.c 5428                                       rs232puts( buffer);
0058CF 8915           19747         MOV.W   R1,R5
0058D1 8904           19748         MOV.W   R0,R4
                      19749         CALL    _rs232puts
0058D3 C4rrrrrr       +19749 ;       FCALL   _rs232puts
                      19750 ; rs232cmd.c 5429                               }
                      19751 ; rs232cmd.c 5430                       }
0058D7 FE50           19753         BR      _1387
0058D7 FE5000         19753         BR      _1387
0058DA                19754 _1379:
                      19755 ; rs232cmd.c 5431                       else
                      19756 ; rs232cmd.c 5432                       {
                      19757 ; rs232cmd.c 5433                               if ( !PasswordProtected)
0058DA 964842rr       19759         MOV.B   ES,#SEG( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 324

ADDR   CODE            LINE SOURCELINE
0058DE 9908rrrr       19760         MOV.W   R0,#SOF( _PasswordProtected )
0058E2 8A00           19761         MOV.W   R0,[R0]
0058E4 F249           19762         BNE     _1387
                      19763 ; rs232cmd.c 5434                               {
                      19764 ; rs232cmd.c 5435                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ScHPhaseG, &ScHPhaseM)) != 2))
0058E6 964842rr       19766         MOV.B   ES,#SEG( _ParCnt )
0058EA 9908rrrr       19767         MOV.W   R0,#SOF( _ParCnt )
0058EE 8200           19768         MOV.B   R0L,[R0]
0058F0 910402         19769         CMP.B   R0L,#02H
0058F3 F21B           19770         BNE     _1380
0058F5 9918rrrr       19771         MOV.W   R1,#SEG( _Cmd )
0058F9 9908rrrr       19772         MOV.W   R0,#SOF( _Cmd )
0058FD 9168rr         19773         MOV.B   R3L,#SEG( __lc_bs )
005900 7177           19774         XOR.B   R3H,R3H
005902 40271E         19775         LEA     R2,R7+30
005905 91A8rr         19776         MOV.B   R5L,#SEG( __lc_bs )
005908 71BB           19777         XOR.B   R5H,R5H
00590A 404720         19778         LEA     R4,R7+32
00590D 0F30           19779         PUSH.W  R4, R5
00590F 0F0C           19781         PUSH.W  R2, R3
005911 9938rrrr       19783         MOV.W   R3,#SEG( _1297 )
005915 9928rrrr       19784         MOV.W   R2,#SOF( _1297 )
005919 0F0C           19785         PUSH.W  R2, R3
                      19787         CALL    _sscanf
00591B C4rrrrrr       +19787 ;       FCALL   _sscanf
00591F 9970000C       19788         ADD.W   R7,#0CH
005923 99040002       19790         CMP.W   R0,#02H
005927 F307           19791         BEQ     _1381
005927 F30700         19791         BEQ     _1381
00592A                19792 _1380:
                      19793 ; rs232cmd.c 5436                                               SCPIError = SyntaxErr;
00592A 964842rr       19795         MOV.B   ES,#SEG( _SCPIError )
00592E 9908rrrr       19796         MOV.W   R0,#SOF( _SCPIError )
005932 BA03           19797         MOV.W   [R0],#03H
005934 FE21           19798         BR      _1387
005934 FE21           19798         BR      _1387
005936                19799 _1381:
                      19800 ; rs232cmd.c 5437                                       else
                      19801 ; rs232cmd.c 5438                                       {
                      19802 ; rs232cmd.c 5439                                               Calibration.CBCalibration.ScHPhas
                            eG = ScHPhaseG;
005936 84071E         19804         MOV.B   R0L,[R7+30]
005939 964842rr       19805         MOV.B   ES,#SEG( _Calibration+206 )
00593D 9918rrrr       19806         MOV.W   R1,#SOF( _Calibration+206 )
005941 8209           19807         MOV.B   [R1],R0L
                      19808 ; rs232cmd.c 5440                                               Calibration.CBCalibration.ScHPhas
                            eM = ScHPhaseM;
005943 840720         19810         MOV.B   R0L,[R7+32]
005946 964842rr       19811         MOV.B   ES,#SEG( _Calibration+212 )
00594A 9918rrrr       19812         MOV.W   R1,#SOF( _Calibration+212 )
00594E 8209           19813         MOV.B   [R1],R0L
                      19814 ; rs232cmd.c 5441                                       
                      19815 ; rs232cmd.c 5442                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005950 9918rrrr       19817         MOV.W   R1,#SEG( _Calibration )
005954 9908rrrr       19818         MOV.W   R0,#SOF( _Calibration )
005958 964842rr       19819         MOV.B   ES,#SEG( _CalibrationPtr )
00595C 9928rrrr       19820         MOV.W   R2,#SOF( _CalibrationPtr )
005960 8A22           19821         MOV.W   R2,[R2]
005962 993800E0       19822         MOV.W   R3,#0E0H
                      19823         CALL    _NV_Store
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 325

ADDR   CODE            LINE SOURCELINE
005966 C4rrrrrr       +19823 ;       FCALL   _NV_Store
                      19824 ; rs232cmd.c 5443       
                      19825 ; rs232cmd.c 5444                                               SetCBScHPhase( CBSetup.ScHPhase);
                            
00596A 964842rr       19827         MOV.B   ES,#SEG( _CBSetup+8 )
00596E 9908rrrr       19828         MOV.W   R0,#SOF( _CBSetup+8 )
005972 8A00           19829         MOV.W   R0,[R0]
                      19830         CALL    _SetCBScHPhase
005974 C4rrrrrr       +19830 ;       FCALL   _SetCBScHPhase
                      19831 ; rs232cmd.c 5445                                       }
                      19832 ; rs232cmd.c 5446                               }
                      19833 ; rs232cmd.c 5447                       }
                      19834 ; rs232cmd.c 5448               }
005978                19836 _1387:
                      19837 ; rs232cmd.c 5449       }
005978 99700022       19839         ADD.W   R7,#022H
00597C 2F30           19841         POP.W   R4, R5
00597E D680           19843         RET
                      19845 ; rs232cmd.c 5450       
                      19846 ; rs232cmd.c 5451       /************************************************************************
                            **/
                      19847 ; rs232cmd.c 5452       /* FactAudioGenStatus                                                    
                                                                                                                             
                                RS232CMD.C  */
                      19848 ; rs232cmd.c 5453       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19849 ; rs232cmd.c 5454       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      19850 ; rs232cmd.c 5455       /* Revised:       000625                                                 
                                                                                                                             
                                                                                    */
                      19851 ; rs232cmd.c 5456       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19852 ; rs232cmd.c 5457       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19853 ; rs232cmd.c 5458       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                      19854 ; rs232cmd.c 5459       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19855 ; rs232cmd.c 5460       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19856 ; rs232cmd.c 5461       /************************************************************************
                            **/
                      19857 ; rs232cmd.c 5462       void FactAudioGenStatus( void)
                      19858 ; rs232cmd.c 5463       {
                      19859         ALIGN   1
                      19861         PUBLIC  _FactAudioGenStatus
005980                19862 _FactAudioGenStatus:
005980 0F30           19866         PUSH.W  R4, R5
005982 99720014       19868         SUB.W   R7,#014H
                      19871 ; rs232cmd.c 5464               char buffer[20];
                      19872 ; rs232cmd.c 5465       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 326

ADDR   CODE            LINE SOURCELINE
                      19873 ; rs232cmd.c 5466               if ( CmdExecute && !SCPIError)
005986 964842rr       19875         MOV.B   ES,#SEG( _CmdExecute )
00598A 9908rrrr       19876         MOV.W   R0,#SOF( _CmdExecute )
00598E 8200           19877         MOV.B   R0L,[R0]
005990 F337           19878         BEQ     _1395
005992 964842rr       19879         MOV.B   ES,#SEG( _SCPIError )
005996 9908rrrr       19880         MOV.W   R0,#SOF( _SCPIError )
00599A 8A00           19881         MOV.W   R0,[R0]
00599C F231           19882         BNE     _1395
                      19883 ; rs232cmd.c 5467               {
                      19884 ; rs232cmd.c 5468                       if ( CmdRequest)
00599E 964842rr       19886         MOV.B   ES,#SEG( _CmdRequest )
0059A2 9908rrrr       19887         MOV.W   R0,#SOF( _CmdRequest )
0059A6 8200           19888         MOV.B   R0L,[R0]
0059A8 F326           19889         BEQ     _1391
                      19890 ; rs232cmd.c 5469                       {
                      19891 ; rs232cmd.c 5470                               if ( ParCnt)
0059AA 964842rr       19893         MOV.B   ES,#SEG( _ParCnt )
0059AE 9908rrrr       19894         MOV.W   R0,#SOF( _ParCnt )
0059B2 8200           19895         MOV.B   R0L,[R0]
0059B4 F306           19896         BEQ     _1390
                      19897 ; rs232cmd.c 5471                                       SCPIError = SyntaxErr;
0059B6 964842rr       19899         MOV.B   ES,#SEG( _SCPIError )
0059BA 9908rrrr       19900         MOV.W   R0,#SOF( _SCPIError )
0059BE BA03           19901         MOV.W   [R0],#03H
0059C0 FE1F           19902         BR      _1395
0059C0 FE1F           19902         BR      _1395
0059C2                19903 _1390:
                      19904 ; rs232cmd.c 5472                               else
                      19905 ; rs232cmd.c 5473                               {
                      19906 ; rs232cmd.c 5474                                       sprintf( buffer, "%u\n", 0, AudioStatus()
                            );
                      19908         CALL    _AudioStatus
0059C2 C4rrrrrr       +19908 ;       FCALL   _AudioStatus
0059C6 B110           19909         MOVS.B  R0H,#00H
0059C8 91A8rr         19910         MOV.B   R5L,#SEG( __lc_bs )
0059CB 71BB           19911         XOR.B   R5H,R5H
0059CD 8947           19912         MOV.W   R4,R7
0059CF 0F01           19913         PUSH.W  R0
0059D1 B900           19915         MOV.W   R0,#00H
0059D3 0F01           19916         PUSH.W  R0
0059D5 9918rrrr       19918         MOV.W   R1,#SEG( _1009 )
0059D9 9908rrrr       19919         MOV.W   R0,#SOF( _1009 )
0059DD 0F03           19920         PUSH.W  R0, R1
0059DF 8915           19922         MOV.W   R1,R5
0059E1 8904           19923         MOV.W   R0,R4
                      19924         CALL    _sprintf
0059E3 C4rrrrrr       +19924 ;       FCALL   _sprintf
0059E7 99700008       19925         ADD.W   R7,#08H
                      19927 ; rs232cmd.c 5475                                       rs232puts( buffer);
0059EB 8915           19929         MOV.W   R1,R5
0059ED 8904           19930         MOV.W   R0,R4
                      19931         CALL    _rs232puts
0059EF C4rrrrrr       +19931 ;       FCALL   _rs232puts
                      19932 ; rs232cmd.c 5476                               }
                      19933 ; rs232cmd.c 5477                       }
0059F3 FE06           19935         BR      _1395
0059F3 FE0600         19935         BR      _1395
0059F6                19936 _1391:
                      19937 ; rs232cmd.c 5478                       else
                      19938 ; rs232cmd.c 5479                               SCPIError = SyntaxErr;
0059F6 964842rr       19940         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 327

ADDR   CODE            LINE SOURCELINE
0059FA 9908rrrr       19941         MOV.W   R0,#SOF( _SCPIError )
0059FE BA03           19942         MOV.W   [R0],#03H
                      19943 ; rs232cmd.c 5480               }
005A00                19945 _1395:
                      19946 ; rs232cmd.c 5481       }
005A00 99700014       19948         ADD.W   R7,#014H
005A04 2F30           19950         POP.W   R4, R5
005A06 D680           19952         RET
                      19954 ; rs232cmd.c 5482       
                      19955 ; rs232cmd.c 5483       /************************************************************************
                            **/
                      19956 ; rs232cmd.c 5484       /* FactAudioGenDate                                                      
                                                                                                                             
                                         RS232CMD.C */
                      19957 ; rs232cmd.c 5485       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19958 ; rs232cmd.c 5486       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19959 ; rs232cmd.c 5487       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      19960 ; rs232cmd.c 5488       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19961 ; rs232cmd.c 5489       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19962 ; rs232cmd.c 5490       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19963 ; rs232cmd.c 5491       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19964 ; rs232cmd.c 5492       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19965 ; rs232cmd.c 5493       /************************************************************************
                            **/
                      19966 ; rs232cmd.c 5494       void FactAudioGenDate( void)
                      19967 ; rs232cmd.c 5495       {
                      19968         ALIGN   1
                      19970         PUBLIC  _FactAudioGenDate
005A08                19971 _FactAudioGenDate:
005A08 0F30           19975         PUSH.W  R4, R5
005A0A 9972001A       19977         SUB.W   R7,#01AH
                      19983 ; rs232cmd.c 5496               UI year, month, day;
                      19984 ; rs232cmd.c 5497               char buffer[20];
                      19985 ; rs232cmd.c 5498       
                      19986 ; rs232cmd.c 5499               if ( CmdExecute && !SCPIError)
005A0E 964842rr       19988         MOV.B   ES,#SEG( _CmdExecute )
005A12 9908rrrr       19989         MOV.W   R0,#SOF( _CmdExecute )
005A16 8200           19990         MOV.B   R0L,[R0]
                      19991         BEQ     _1407
005A18 F202           +19991 ;       BNE     _LG_1376
005A1A D500C7         +19991 ;       JMP.L   _1407
005A1E D500C700       +19991 ;       JMP.L   _1407
005A1E                +19991 _LG_1376:
005A1E 964842rr       19992         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 328

ADDR   CODE            LINE SOURCELINE
005A22 9908rrrr       19993         MOV.W   R0,#SOF( _SCPIError )
005A26 8A00           19994         MOV.W   R0,[R0]
                      19995         BNE     _1407
005A28 F302           +19995 ;       BEQ     _LG_1378
005A2A D500BF         +19995 ;       JMP.L   _1407
005A2E D500BF00       +19995 ;       JMP.L   _1407
005A2E                +19995 _LG_1378:
                      19996 ; rs232cmd.c 5500               {
                      19997 ; rs232cmd.c 5501                       if ( CmdRequest)
005A2E 964842rr       19999         MOV.B   ES,#SEG( _CmdRequest )
005A32 9908rrrr       20000         MOV.W   R0,#SOF( _CmdRequest )
005A36 8200           20001         MOV.B   R0L,[R0]
005A38 F35A           20002         BEQ     _1397
                      20003 ; rs232cmd.c 5502                       {
                      20004 ; rs232cmd.c 5503                               if ( ParCnt)
005A3A 964842rr       20006         MOV.B   ES,#SEG( _ParCnt )
005A3E 9908rrrr       20007         MOV.W   R0,#SOF( _ParCnt )
005A42 8200           20008         MOV.B   R0L,[R0]
005A44 F307           20009         BEQ     _1396
                      20010 ; rs232cmd.c 5504                                       SCPIError = SyntaxErr;
005A46 964842rr       20012         MOV.B   ES,#SEG( _SCPIError )
005A4A 9908rrrr       20013         MOV.W   R0,#SOF( _SCPIError )
005A4E BA03           20014         MOV.W   [R0],#03H
                      20015         BR      _1407
005A50 D500AC         +20015         JMP.L   _1407
005A50 D500AC00       +20015         JMP.L   _1407
005A54                20016 _1396:
                      20017 ; rs232cmd.c 5505                               else
                      20018 ; rs232cmd.c 5506                               {
                      20019 ; rs232cmd.c 5507                                       day = Calibration.AudioCalibration.Date %
                             100;
005A54 964842rr       20021         MOV.B   ES,#SEG( _Calibration+218 )
005A58 9918rrrr       20022         MOV.W   R1,#SOF( _Calibration+218 )
005A5C 8B01           20023         MOV.W   R0,[R1+]
005A5E 8A11           20024         MOV.W   R1,[R1]
005A60 B930           20025         MOV.W   R3,#00H
005A62 99280064       20026         MOV.W   R2,#064H
005A66 964842rr       20027         MOV.B   ES,#SEG( _Calibration+218 )
005A6A 9948rrrr       20028         MOV.W   R4,#SOF( _Calibration+218 )
005A6E 8B0C           20029         MOV.W   [R4+],R0
005A70 8A1C           20030         MOV.W   [R4],R1
005A72 C4rrrrrr       20031         FCALL   __UMODL
005A76 8C0F04         20032         MOV.W   [R7+4],R0
005A79 964842rr       20033         MOV.B   ES,#SEG( _Calibration+218 )
005A7D 9918rrrr       20034         MOV.W   R1,#SOF( _Calibration+218 )
005A81 8B01           20035         MOV.W   R0,[R1+]
005A83 8A11           20036         MOV.W   R1,[R1]
                      20037 ; rs232cmd.c 5508                                       month = ( Calibration.AudioCalibration.Da
                            te / 100) % 100;
005A85 B930           20039         MOV.W   R3,#00H
005A87 99280064       20040         MOV.W   R2,#064H
005A8B 8953           20041         MOV.W   R5,R3
005A8D 8942           20042         MOV.W   R4,R2
005A8F C4rrrrrr       20043         FCALL   __UDIVL
005A93 8935           20044         MOV.W   R3,R5
005A95 8924           20045         MOV.W   R2,R4
005A97 C4rrrrrr       20046         FCALL   __UMODL
005A9B 8C0F02         20047         MOV.W   [R7+2],R0
                      20048 ; rs232cmd.c 5509                                       year = ( Calibration.AudioCalibration.Dat
                            e / 10000);
005A9E B930           20050         MOV.W   R3,#00H
005AA0 99282710       20051         MOV.W   R2,#02710H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 329

ADDR   CODE            LINE SOURCELINE
005AA4 964842rr       20052         MOV.B   ES,#SEG( _Calibration+218 )
005AA8 9918rrrr       20053         MOV.W   R1,#SOF( _Calibration+218 )
005AAC 8B01           20054         MOV.W   R0,[R1+]
005AAE 8A11           20055         MOV.W   R1,[R1]
005AB0 C4rrrrrr       20056         FCALL   __UDIVL
005AB4 8A0F           20057         MOV.W   [R7],R0
                      20058 ; rs232cmd.c 5510       
                      20059 ; rs232cmd.c 5511                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
005AB6 91A8rr         20061         MOV.B   R5L,#SEG( __lc_bs )
005AB9 71BB           20062         XOR.B   R5H,R5H
005ABB 404706         20063         LEA     R4,R7+6
005ABE 8C0704         20064         MOV.W   R0,[R7+4]
005AC1 0F01           20065         PUSH.W  R0
005AC3 8C0704         20067         MOV.W   R0,[R7+4]
005AC6 0F01           20068         PUSH.W  R0
005AC8 8C0704         20070         MOV.W   R0,[R7+4]
005ACB 0F01           20071         PUSH.W  R0
005ACD 9918rrrr       20073         MOV.W   R1,#SEG( _1169 )
005AD1 9908rrrr       20074         MOV.W   R0,#SOF( _1169 )
005AD5 0F03           20075         PUSH.W  R0, R1
005AD7 8915           20077         MOV.W   R1,R5
005AD9 8904           20078         MOV.W   R0,R4
                      20079         CALL    _sprintf
005ADB C4rrrrrr       +20079 ;       FCALL   _sprintf
005ADF 9970000A       20080         ADD.W   R7,#0AH
                      20082 ; rs232cmd.c 5512       
                      20083 ; rs232cmd.c 5513                                       rs232puts( buffer);
005AE3 8915           20085         MOV.W   R1,R5
005AE5 8904           20086         MOV.W   R0,R4
                      20087         CALL    _rs232puts
005AE7 C4rrrrrr       +20087 ;       FCALL   _rs232puts
                      20088 ; rs232cmd.c 5514                               }
                      20089 ; rs232cmd.c 5515                       }
005AEB FE5F           20091         BR      _1407
005AEB FE5F00         20091         BR      _1407
005AEE                20092 _1397:
                      20093 ; rs232cmd.c 5516                       else
                      20094 ; rs232cmd.c 5517                       {
                      20095 ; rs232cmd.c 5518                               if ( !PasswordProtected)
005AEE 964842rr       20097         MOV.B   ES,#SEG( _PasswordProtected )
005AF2 9908rrrr       20098         MOV.W   R0,#SOF( _PasswordProtected )
005AF6 8A00           20099         MOV.W   R0,[R0]
005AF8 F258           20100         BNE     _1407
                      20101 ; rs232cmd.c 5519                               {
                      20102 ; rs232cmd.c 5520                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
005AFA 964842rr       20104         MOV.B   ES,#SEG( _ParCnt )
005AFE 9908rrrr       20105         MOV.W   R0,#SOF( _ParCnt )
005B02 8200           20106         MOV.B   R0L,[R0]
005B04 910403         20107         CMP.B   R0L,#03H
005B07 F21F           20108         BNE     _1398
005B09 9168rr         20109         MOV.B   R3L,#SEG( __lc_bs )
005B0C 7177           20110         XOR.B   R3H,R3H
005B0E 8927           20111         MOV.W   R2,R7
005B10 91A8rr         20112         MOV.B   R5L,#SEG( __lc_bs )
005B13 71BB           20113         XOR.B   R5H,R5H
005B15 404702         20114         LEA     R4,R7+2
005B18 9128rr         20115         MOV.B   R1L,#SEG( __lc_bs )
005B1B 7133           20116         XOR.B   R1H,R1H
005B1D 400704         20117         LEA     R0,R7+4
005B20 0F03           20118         PUSH.W  R0, R1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 330

ADDR   CODE            LINE SOURCELINE
005B22 0F30           20120         PUSH.W  R4, R5
005B24 0F0C           20122         PUSH.W  R2, R3
005B26 9938rrrr       20124         MOV.W   R3,#SEG( _1170 )
005B2A 9928rrrr       20125         MOV.W   R2,#SOF( _1170 )
005B2E 0F0C           20126         PUSH.W  R2, R3
005B30 9918rrrr       20128         MOV.W   R1,#SEG( _Cmd )
005B34 9908rrrr       20129         MOV.W   R0,#SOF( _Cmd )
                      20130         CALL    _sscanf
005B38 C4rrrrrr       +20130 ;       FCALL   _sscanf
005B3C 99700010       20131         ADD.W   R7,#010H
005B40 99040003       20133         CMP.W   R0,#03H
005B44 F306           20134         BEQ     _1399
005B44 F306           20134         BEQ     _1399
005B46                20135 _1398:
                      20136 ; rs232cmd.c 5521                                               SCPIError = SyntaxErr;
005B46 964842rr       20138         MOV.B   ES,#SEG( _SCPIError )
005B4A 9908rrrr       20139         MOV.W   R0,#SOF( _SCPIError )
005B4E BA03           20140         MOV.W   [R0],#03H
005B50 FE2C           20141         BR      _1407
005B50 FE2C           20141         BR      _1407
005B52                20142 _1399:
                      20143 ; rs232cmd.c 5522                                       else
                      20144 ; rs232cmd.c 5523                                       {
                      20145 ; rs232cmd.c 5524                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
005B52 8A07           20147         MOV.W   R0,[R7]
005B54 8C1702         20148         MOV.W   R1,[R7+2]
005B57 8C2704         20149         MOV.W   R2,[R7+4]
                      20150         CALL    _ValidateDate
005B5A C4rrrrrr       +20150 ;       FCALL   _ValidateDate
005B5E 6900           20151         OR.W    R0,R0
005B60 F207           20152         BNE     _1400
                      20153 ; rs232cmd.c 5525                                                       SCPIError = ExecErr;
005B62 964842rr       20155         MOV.B   ES,#SEG( _SCPIError )
005B66 9908rrrr       20156         MOV.W   R0,#SOF( _SCPIError )
005B6A 9A08001D       20157         MOV.W   [R0],#01DH
005B6E FE1D           20158         BR      _1407
005B6E FE1D           20158         BR      _1407
005B70                20159 _1400:
                      20160 ; rs232cmd.c 5526                                               else
                      20161 ; rs232cmd.c 5527                                               {
                      20162 ; rs232cmd.c 5528                                                       Calibration.AudioCalibrat
                            ion.Date = day + 100*month + 10000*year;
005B70 8C0702         20164         MOV.W   R0,[R7+2]
005B73 E9000064       20165         MULU.W  R0,#064H
005B77 0C0704         20166         ADD.W   R0,[R7+4]
005B7A 8A27           20167         MOV.W   R2,[R7]
005B7C E9202710       20168         MULU.W  R2,#02710H
005B80 0902           20169         ADD.W   R0,R2
005B82 B910           20170         MOVS.W  R1,#00H
005B84 964842rr       20171         MOV.B   ES,#SEG( _Calibration+218 )
005B88 9928rrrr       20172         MOV.W   R2,#SOF( _Calibration+218 )
005B8C 8B0A           20173         MOV.W   [R2+],R0
005B8E 8A1A           20174         MOV.W   [R2],R1
                      20175 ; rs232cmd.c 5529                                               
                      20176 ; rs232cmd.c 5530                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
005B90 9918rrrr       20178         MOV.W   R1,#SEG( _Calibration )
005B94 9908rrrr       20179         MOV.W   R0,#SOF( _Calibration )
005B98 964842rr       20180         MOV.B   ES,#SEG( _CalibrationPtr )
005B9C 9928rrrr       20181         MOV.W   R2,#SOF( _CalibrationPtr )
005BA0 8A22           20182         MOV.W   R2,[R2]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 331

ADDR   CODE            LINE SOURCELINE
005BA2 993800E0       20183         MOV.W   R3,#0E0H
                      20184         CALL    _NV_Store
005BA6 C4rrrrrr       +20184 ;       FCALL   _NV_Store
                      20185 ; rs232cmd.c 5531                                               }
                      20186 ; rs232cmd.c 5532                                       }                               
                      20187 ; rs232cmd.c 5533                               }
                      20188 ; rs232cmd.c 5534                       }
                      20189 ; rs232cmd.c 5535               }
005BAA                20191 _1407:
                      20192 ; rs232cmd.c 5536       }
005BAA 9970001A       20194         ADD.W   R7,#01AH
005BAE 2F30           20196         POP.W   R4, R5
005BB0 D680           20198         RET
                      20200 ; rs232cmd.c 5537       
                      20201 ; rs232cmd.c 5538       /************************************************************************
                            **/
                      20202 ; rs232cmd.c 5539       /* FactAudioGenLevel                                                     
                                                                                                                             
                                RS232CMD.C  */
                      20203 ; rs232cmd.c 5540       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20204 ; rs232cmd.c 5541       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      20205 ; rs232cmd.c 5542       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      20206 ; rs232cmd.c 5543       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20207 ; rs232cmd.c 5544       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20208 ; rs232cmd.c 5545       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20209 ; rs232cmd.c 5546       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20210 ; rs232cmd.c 5547       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20211 ; rs232cmd.c 5548       /************************************************************************
                            **/
                      20212 ; rs232cmd.c 5549       void FactAudioGenLevel( void)
                      20213 ; rs232cmd.c 5550       {
                      20214         ALIGN   1
                      20216         PUBLIC  _FactAudioGenLevel
005BB2                20217 _FactAudioGenLevel:
005BB2 0F30           20221         PUSH.W  R4, R5
005BB4 99720018       20223         SUB.W   R7,#018H
                      20228 ; rs232cmd.c 5551               char buffer[20];
                      20229 ; rs232cmd.c 5552               UC AnalogLeft, AnalogRight;
                      20230 ; rs232cmd.c 5553       
                      20231 ; rs232cmd.c 5554               if ( CmdExecute && !SCPIError)
005BB8 964842rr       20233         MOV.B   ES,#SEG( _CmdExecute )
005BBC 9908rrrr       20234         MOV.W   R0,#SOF( _CmdExecute )
005BC0 8200           20235         MOV.B   R0L,[R0]
                      20236         BEQ     _1419
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 332

ADDR   CODE            LINE SOURCELINE
005BC2 F202           +20236 ;       BNE     _LG_1392
005BC4 D5008A         +20236 ;       JMP.L   _1419
005BC8 D5008A00       +20236 ;       JMP.L   _1419
005BC8                +20236 _LG_1392:
005BC8 964842rr       20237         MOV.B   ES,#SEG( _SCPIError )
005BCC 9908rrrr       20238         MOV.W   R0,#SOF( _SCPIError )
005BD0 8A00           20239         MOV.W   R0,[R0]
                      20240         BNE     _1419
005BD2 F302           +20240 ;       BEQ     _LG_1394
005BD4 D50082         +20240 ;       JMP.L   _1419
005BD8 D5008200       +20240 ;       JMP.L   _1419
005BD8                +20240 _LG_1394:
                      20241 ; rs232cmd.c 5555               {
                      20242 ; rs232cmd.c 5556                       if ( CmdRequest)
005BD8 964842rr       20244         MOV.B   ES,#SEG( _CmdRequest )
005BDC 9908rrrr       20245         MOV.W   R0,#SOF( _CmdRequest )
005BE0 8200           20246         MOV.B   R0L,[R0]
005BE2 F32E           20247         BEQ     _1411
                      20248 ; rs232cmd.c 5557                       {
                      20249 ; rs232cmd.c 5558                               if ( ParCnt)
005BE4 964842rr       20251         MOV.B   ES,#SEG( _ParCnt )
005BE8 9908rrrr       20252         MOV.W   R0,#SOF( _ParCnt )
005BEC 8200           20253         MOV.B   R0L,[R0]
005BEE F306           20254         BEQ     _1410
                      20255 ; rs232cmd.c 5559                                       SCPIError = SyntaxErr;
005BF0 964842rr       20257         MOV.B   ES,#SEG( _SCPIError )
005BF4 9908rrrr       20258         MOV.W   R0,#SOF( _SCPIError )
005BF8 BA03           20259         MOV.W   [R0],#03H
005BFA FE6F           20260         BR      _1419
005BFA FE6F           20260         BR      _1419
005BFC                20261 _1410:
                      20262 ; rs232cmd.c 5560                               else
                      20263 ; rs232cmd.c 5561                               {
                      20264 ; rs232cmd.c 5562                                       sprintf( buffer, "%u,%u\n", Calibration.A
                            udioCalibration.AnalogLeftChannel, 
                      20265 ; rs232cmd.c 5563                                                                                
                                                                                        Calibration.AudioCalibration.AnalogRi
                            ghtChannel);
005BFC 91A8rr         20267         MOV.B   R5L,#SEG( __lc_bs )
005BFF 71BB           20268         XOR.B   R5H,R5H
005C01 8947           20269         MOV.W   R4,R7
005C03 964842rr       20270         MOV.B   ES,#SEG( _Calibration+222 )
005C07 9908rrrr       20271         MOV.W   R0,#SOF( _Calibration+222 )
005C0B 8200           20272         MOV.B   R0L,[R0]
005C0D B110           20273         MOVS.B  R0H,#00H
005C0F 964842rr       20274         MOV.B   ES,#SEG( _Calibration+223 )
005C13 9918rrrr       20275         MOV.W   R1,#SOF( _Calibration+223 )
005C17 8221           20276         MOV.B   R1L,[R1]
005C19 B130           20277         MOVS.B  R1H,#00H
005C1B 0F02           20278         PUSH.W  R1
005C1D 0F01           20280         PUSH.W  R0
005C1F 9918rrrr       20282         MOV.W   R1,#SEG( _1296 )
005C23 9908rrrr       20283         MOV.W   R0,#SOF( _1296 )
005C27 0F03           20284         PUSH.W  R0, R1
005C29 8915           20286         MOV.W   R1,R5
005C2B 8904           20287         MOV.W   R0,R4
                      20288         CALL    _sprintf
005C2D C4rrrrrr       +20288 ;       FCALL   _sprintf
005C31 99700008       20289         ADD.W   R7,#08H
                      20291 ; rs232cmd.c 5564                                       rs232puts( buffer);
005C35 8915           20293         MOV.W   R1,R5
005C37 8904           20294         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 333

ADDR   CODE            LINE SOURCELINE
                      20295         CALL    _rs232puts
005C39 C4rrrrrr       +20295 ;       FCALL   _rs232puts
                      20296 ; rs232cmd.c 5565                               }
                      20297 ; rs232cmd.c 5566                       }
005C3D FE4E           20299         BR      _1419
005C3D FE4E00         20299         BR      _1419
005C40                20300 _1411:
                      20301 ; rs232cmd.c 5567                       else
                      20302 ; rs232cmd.c 5568                       {
                      20303 ; rs232cmd.c 5569                               if ( !PasswordProtected)
005C40 964842rr       20305         MOV.B   ES,#SEG( _PasswordProtected )
005C44 9908rrrr       20306         MOV.W   R0,#SOF( _PasswordProtected )
005C48 8A00           20307         MOV.W   R0,[R0]
005C4A F247           20308         BNE     _1419
                      20309 ; rs232cmd.c 5570                               {
                      20310 ; rs232cmd.c 5571                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &AnalogLeft, &AnalogRight)) != 2))
005C4C 964842rr       20312         MOV.B   ES,#SEG( _ParCnt )
005C50 9908rrrr       20313         MOV.W   R0,#SOF( _ParCnt )
005C54 8200           20314         MOV.B   R0L,[R0]
005C56 910402         20315         CMP.B   R0L,#02H
005C59 F21B           20316         BNE     _1412
005C5B 9918rrrr       20317         MOV.W   R1,#SEG( _Cmd )
005C5F 9908rrrr       20318         MOV.W   R0,#SOF( _Cmd )
005C63 9168rr         20319         MOV.B   R3L,#SEG( __lc_bs )
005C66 7177           20320         XOR.B   R3H,R3H
005C68 402714         20321         LEA     R2,R7+20
005C6B 91A8rr         20322         MOV.B   R5L,#SEG( __lc_bs )
005C6E 71BB           20323         XOR.B   R5H,R5H
005C70 404716         20324         LEA     R4,R7+22
005C73 0F30           20325         PUSH.W  R4, R5
005C75 0F0C           20327         PUSH.W  R2, R3
005C77 9938rrrr       20329         MOV.W   R3,#SEG( _1297 )
005C7B 9928rrrr       20330         MOV.W   R2,#SOF( _1297 )
005C7F 0F0C           20331         PUSH.W  R2, R3
                      20333         CALL    _sscanf
005C81 C4rrrrrr       +20333 ;       FCALL   _sscanf
005C85 9970000C       20334         ADD.W   R7,#0CH
005C89 99040002       20336         CMP.W   R0,#02H
005C8D F307           20337         BEQ     _1413
005C8D F30700         20337         BEQ     _1413
005C90                20338 _1412:
                      20339 ; rs232cmd.c 5572                                               SCPIError = SyntaxErr;
005C90 964842rr       20341         MOV.B   ES,#SEG( _SCPIError )
005C94 9908rrrr       20342         MOV.W   R0,#SOF( _SCPIError )
005C98 BA03           20343         MOV.W   [R0],#03H
005C9A FE1F           20344         BR      _1419
005C9A FE1F           20344         BR      _1419
005C9C                20345 _1413:
                      20346 ; rs232cmd.c 5573                                       else
                      20347 ; rs232cmd.c 5574                                       {
                      20348 ; rs232cmd.c 5575                                               Calibration.AudioCalibration.Anal
                            ogLeftChannel = AnalogLeft;
005C9C 840714         20350         MOV.B   R0L,[R7+20]
005C9F 964842rr       20351         MOV.B   ES,#SEG( _Calibration+222 )
005CA3 9918rrrr       20352         MOV.W   R1,#SOF( _Calibration+222 )
005CA7 8209           20353         MOV.B   [R1],R0L
                      20354 ; rs232cmd.c 5576                                               Calibration.AudioCalibration.Anal
                            ogRightChannel = AnalogRight;
005CA9 840716         20356         MOV.B   R0L,[R7+22]
005CAC 964842rr       20357         MOV.B   ES,#SEG( _Calibration+223 )
005CB0 9918rrrr       20358         MOV.W   R1,#SOF( _Calibration+223 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 334

ADDR   CODE            LINE SOURCELINE
005CB4 8209           20359         MOV.B   [R1],R0L
                      20360 ; rs232cmd.c 5577                                                               
                      20361 ; rs232cmd.c 5578                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005CB6 9918rrrr       20363         MOV.W   R1,#SEG( _Calibration )
005CBA 9908rrrr       20364         MOV.W   R0,#SOF( _Calibration )
005CBE 964842rr       20365         MOV.B   ES,#SEG( _CalibrationPtr )
005CC2 9928rrrr       20366         MOV.W   R2,#SOF( _CalibrationPtr )
005CC6 8A22           20367         MOV.W   R2,[R2]
005CC8 993800E0       20368         MOV.W   R3,#0E0H
                      20369         CALL    _NV_Store
005CCC C4rrrrrr       +20369 ;       FCALL   _NV_Store
                      20370 ; rs232cmd.c 5579       
                      20371 ; rs232cmd.c 5580                                               WriteAnlAudioDACLevel( AnalogLeft
                            , AnalogRight);
005CD0 840714         20373         MOV.B   R0L,[R7+20]
005CD3 841716         20374         MOV.B   R0H,[R7+22]
                      20375         CALL    _WriteAnlAudioDACLevel
005CD6 C4rrrrrr       +20375 ;       FCALL   _WriteAnlAudioDACLevel
                      20376 ; rs232cmd.c 5581                                       }
                      20377 ; rs232cmd.c 5582                               }
                      20378 ; rs232cmd.c 5583                       }
                      20379 ; rs232cmd.c 5584               }
005CDA                20381 _1419:
                      20382 ; rs232cmd.c 5585       }
005CDA 99700018       20384         ADD.W   R7,#018H
005CDE 2F30           20386         POP.W   R4, R5
005CE0 D680           20388         RET
                      20390 ; rs232cmd.c 5586       
                      20391 ; rs232cmd.c 5587       /************************************************************************
                            **/
                      20392 ; rs232cmd.c 5588       /* FactPLDVersion                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      20393 ; rs232cmd.c 5589       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20394 ; rs232cmd.c 5590       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      20395 ; rs232cmd.c 5591       /* Revised:       000625                                                 
                                                                                                                             
                                                                                    */
                      20396 ; rs232cmd.c 5592       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20397 ; rs232cmd.c 5593       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20398 ; rs232cmd.c 5594       /* Remarks:             NOTE! The video PLD version has not been implemen
                            ted at this*/
                      20399 ; rs232cmd.c 5595       /*                                              this time, hence the retu
                            rn value of 0 does NOT reflect the      */
                      20400 ; rs232cmd.c 5596       /*                                              video PLD version.       
                                                                                                                             
                                                                                            */
                      20401 ; rs232cmd.c 5597       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 335

ADDR   CODE            LINE SOURCELINE
                      20402 ; rs232cmd.c 5598       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20403 ; rs232cmd.c 5599       /************************************************************************
                            **/
                      20404 ; rs232cmd.c 5600       void FactPLDVersion( void)
                      20405 ; rs232cmd.c 5601       {
                      20406         ALIGN   1
                      20408         PUBLIC  _FactPLDVersion
005CE2                20409 _FactPLDVersion:
005CE2 0F30           20413         PUSH.W  R4, R5
005CE4 99720014       20415         SUB.W   R7,#014H
                      20418 ; rs232cmd.c 5602               char buffer[20];
                      20419 ; rs232cmd.c 5603       
                      20420 ; rs232cmd.c 5604               if ( CmdExecute && !SCPIError)
005CE8 964842rr       20422         MOV.B   ES,#SEG( _CmdExecute )
005CEC 9908rrrr       20423         MOV.W   R0,#SOF( _CmdExecute )
005CF0 8200           20424         MOV.B   R0L,[R0]
005CF2 F336           20425         BEQ     _1427
005CF4 964842rr       20426         MOV.B   ES,#SEG( _SCPIError )
005CF8 9908rrrr       20427         MOV.W   R0,#SOF( _SCPIError )
005CFC 8A00           20428         MOV.W   R0,[R0]
005CFE F230           20429         BNE     _1427
                      20430 ; rs232cmd.c 5605               {
                      20431 ; rs232cmd.c 5606                       if ( CmdRequest)
005D00 964842rr       20433         MOV.B   ES,#SEG( _CmdRequest )
005D04 9908rrrr       20434         MOV.W   R0,#SOF( _CmdRequest )
005D08 8200           20435         MOV.B   R0L,[R0]
005D0A F325           20436         BEQ     _1423
                      20437 ; rs232cmd.c 5607                       {
                      20438 ; rs232cmd.c 5608                               if ( ParCnt)
005D0C 964842rr       20440         MOV.B   ES,#SEG( _ParCnt )
005D10 9908rrrr       20441         MOV.W   R0,#SOF( _ParCnt )
005D14 8200           20442         MOV.B   R0L,[R0]
005D16 F306           20443         BEQ     _1422
                      20444 ; rs232cmd.c 5609                                       SCPIError = SyntaxErr;
005D18 964842rr       20446         MOV.B   ES,#SEG( _SCPIError )
005D1C 9908rrrr       20447         MOV.W   R0,#SOF( _SCPIError )
005D20 BA03           20448         MOV.W   [R0],#03H
005D22 FE1E           20449         BR      _1427
005D22 FE1E           20449         BR      _1427
005D24                20450 _1422:
                      20451 ; rs232cmd.c 5610                               else
                      20452 ; rs232cmd.c 5611                               {
                      20453 ; rs232cmd.c 5612                                       sprintf( buffer, "%u,%u\n", 0, pld_versio
                            n());
                      20455         CALL    _pld_version
005D24 C4rrrrrr       +20455 ;       FCALL   _pld_version
005D28 91A8rr         20456         MOV.B   R5L,#SEG( __lc_bs )
005D2B 71BB           20457         XOR.B   R5H,R5H
005D2D 8947           20458         MOV.W   R4,R7
005D2F 0F01           20459         PUSH.W  R0
005D31 B900           20461         MOV.W   R0,#00H
005D33 0F01           20462         PUSH.W  R0
005D35 9918rrrr       20464         MOV.W   R1,#SEG( _1296 )
005D39 9908rrrr       20465         MOV.W   R0,#SOF( _1296 )
005D3D 0F03           20466         PUSH.W  R0, R1
005D3F 8915           20468         MOV.W   R1,R5
005D41 8904           20469         MOV.W   R0,R4
                      20470         CALL    _sprintf
005D43 C4rrrrrr       +20470 ;       FCALL   _sprintf
005D47 99700008       20471         ADD.W   R7,#08H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 336

ADDR   CODE            LINE SOURCELINE
                      20473 ; rs232cmd.c 5613                                       rs232puts( buffer);
005D4B 8915           20475         MOV.W   R1,R5
005D4D 8904           20476         MOV.W   R0,R4
                      20477         CALL    _rs232puts
005D4F C4rrrrrr       +20477 ;       FCALL   _rs232puts
                      20478 ; rs232cmd.c 5614                               }
                      20479 ; rs232cmd.c 5615                       }
005D53 FE06           20481         BR      _1427
005D53 FE0600         20481         BR      _1427
005D56                20482 _1423:
                      20483 ; rs232cmd.c 5616                       else
                      20484 ; rs232cmd.c 5617                               SCPIError = SyntaxErr;
005D56 964842rr       20486         MOV.B   ES,#SEG( _SCPIError )
005D5A 9908rrrr       20487         MOV.W   R0,#SOF( _SCPIError )
005D5E BA03           20488         MOV.W   [R0],#03H
                      20489 ; rs232cmd.c 5618               }
005D60                20491 _1427:
                      20492 ; rs232cmd.c 5619       }
005D60 99700014       20494         ADD.W   R7,#014H
005D64 2F30           20496         POP.W   R4, R5
005D66 D680           20498         RET
                      20500 ; rs232cmd.c 5620       
                      20501 ; rs232cmd.c 5621       /************************************************************************
                            **/
                      20502 ; rs232cmd.c 5622       /* FactTCXOStatus                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      20503 ; rs232cmd.c 5623       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20504 ; rs232cmd.c 5624       /* Author:              Kim Engedahl, DEV, 000628                        
                                                                                                                             
                                    */
                      20505 ; rs232cmd.c 5625       /* Revised:       000628                                                 
                                                                                                                             
                                                                                    */
                      20506 ; rs232cmd.c 5626       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20507 ; rs232cmd.c 5627       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20508 ; rs232cmd.c 5628       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                      20509 ; rs232cmd.c 5629       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20510 ; rs232cmd.c 5630       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20511 ; rs232cmd.c 5631       /************************************************************************
                            **/
                      20512 ; rs232cmd.c 5632       void FactTCXOStatus( void)
                      20513 ; rs232cmd.c 5633       {
                      20514         ALIGN   1
                      20516         PUBLIC  _FactTCXOStatus
005D68                20517 _FactTCXOStatus:
005D68 0F30           20521         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 337

ADDR   CODE            LINE SOURCELINE
005D6A 99720014       20523         SUB.W   R7,#014H
                      20526 ; rs232cmd.c 5634               char buffer[20];
                      20527 ; rs232cmd.c 5635       
                      20528 ; rs232cmd.c 5636               if ( CmdExecute && !SCPIError)
005D6E 964842rr       20530         MOV.B   ES,#SEG( _CmdExecute )
005D72 9908rrrr       20531         MOV.W   R0,#SOF( _CmdExecute )
005D76 8200           20532         MOV.B   R0L,[R0]
005D78 F333           20533         BEQ     _1433
005D7A 964842rr       20534         MOV.B   ES,#SEG( _SCPIError )
005D7E 9908rrrr       20535         MOV.W   R0,#SOF( _SCPIError )
005D82 8A00           20536         MOV.W   R0,[R0]
005D84 F22D           20537         BNE     _1433
                      20538 ; rs232cmd.c 5637               {
                      20539 ; rs232cmd.c 5638                       if ( CmdRequest)
005D86 964842rr       20541         MOV.B   ES,#SEG( _CmdRequest )
005D8A 9908rrrr       20542         MOV.W   R0,#SOF( _CmdRequest )
005D8E 8200           20543         MOV.B   R0L,[R0]
005D90 F322           20544         BEQ     _1429
                      20545 ; rs232cmd.c 5639                       {
                      20546 ; rs232cmd.c 5640                               if ( ParCnt)
005D92 964842rr       20548         MOV.B   ES,#SEG( _ParCnt )
005D96 9908rrrr       20549         MOV.W   R0,#SOF( _ParCnt )
005D9A 8200           20550         MOV.B   R0L,[R0]
005D9C F306           20551         BEQ     _1428
                      20552 ; rs232cmd.c 5641                                       SCPIError = SyntaxErr;
005D9E 964842rr       20554         MOV.B   ES,#SEG( _SCPIError )
005DA2 9908rrrr       20555         MOV.W   R0,#SOF( _SCPIError )
005DA6 BA03           20556         MOV.W   [R0],#03H
005DA8 FE1B           20557         BR      _1433
005DA8 FE1B           20557         BR      _1433
005DAA                20558 _1428:
                      20559 ; rs232cmd.c 5642                               else
                      20560 ; rs232cmd.c 5643                               {
                      20561 ; rs232cmd.c 5644                                       sprintf( buffer, "%u\n", tcxo_status());
                      20563         CALL    _tcxo_status
005DAA C4rrrrrr       +20563 ;       FCALL   _tcxo_status
005DAE 91A8rr         20564         MOV.B   R5L,#SEG( __lc_bs )
005DB1 71BB           20565         XOR.B   R5H,R5H
005DB3 8947           20566         MOV.W   R4,R7
005DB5 0F01           20567         PUSH.W  R0
005DB7 9918rrrr       20569         MOV.W   R1,#SEG( _1009 )
005DBB 9908rrrr       20570         MOV.W   R0,#SOF( _1009 )
005DBF 0F03           20571         PUSH.W  R0, R1
005DC1 8915           20573         MOV.W   R1,R5
005DC3 8904           20574         MOV.W   R0,R4
                      20575         CALL    _sprintf
005DC5 C4rrrrrr       +20575 ;       FCALL   _sprintf
005DC9 A976           20576         ADDS.W  R7,#06H
                      20578 ; rs232cmd.c 5645                                       rs232puts( buffer);
005DCB 8915           20580         MOV.W   R1,R5
005DCD 8904           20581         MOV.W   R0,R4
                      20582         CALL    _rs232puts
005DCF C4rrrrrr       +20582 ;       FCALL   _rs232puts
                      20583 ; rs232cmd.c 5646                               }
                      20584 ; rs232cmd.c 5647                       }
005DD3 FE06           20586         BR      _1433
005DD3 FE0600         20586         BR      _1433
005DD6                20587 _1429:
                      20588 ; rs232cmd.c 5648                       else
                      20589 ; rs232cmd.c 5649                               SCPIError = SyntaxErr;
005DD6 964842rr       20591         MOV.B   ES,#SEG( _SCPIError )
005DDA 9908rrrr       20592         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 338

ADDR   CODE            LINE SOURCELINE
005DDE BA03           20593         MOV.W   [R0],#03H
                      20594 ; rs232cmd.c 5650               }
005DE0                20596 _1433:
                      20597 ; rs232cmd.c 5651       }
005DE0 99700014       20599         ADD.W   R7,#014H
005DE4 2F30           20601         POP.W   R4, R5
005DE6 D680           20603         RET
                      20605 ; rs232cmd.c 5652       
                      20606 ; rs232cmd.c 5653       /************************************************************************
                            **/
                      20607 ; rs232cmd.c 5654       /* FactMultiMediaChip                                                    
                                                                                                                             
                                RS232CMD.C  */
                      20608 ; rs232cmd.c 5655       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20609 ; rs232cmd.c 5656       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      20610 ; rs232cmd.c 5657       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      20611 ; rs232cmd.c 5658       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20612 ; rs232cmd.c 5659       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20613 ; rs232cmd.c 5660       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20614 ; rs232cmd.c 5661       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20615 ; rs232cmd.c 5662       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20616 ; rs232cmd.c 5663       /************************************************************************
                            **/
                      20617 ; rs232cmd.c 5664       void FactMultiMediaChip( void)
                      20618 ; rs232cmd.c 5665       {
                      20619         ALIGN   1
                      20621         PUBLIC  _FactMultiMediaChip
005DE8                20622 _FactMultiMediaChip:
005DE8 0F30           20626         PUSH.W  R4, R5
005DEA A97A           20628         ADDS.W  R7,#0AH
                      20634 ; rs232cmd.c 5666               UI test[2];
                      20635 ; rs232cmd.c 5667               UC tmp[2];
                      20636 ; rs232cmd.c 5668       
                      20637 ; rs232cmd.c 5669               if ( CmdExecute && !SCPIError)
005DEC 964842rr       20639         MOV.B   ES,#SEG( _CmdExecute )
005DF0 9908rrrr       20640         MOV.W   R0,#SOF( _CmdExecute )
005DF4 8200           20641         MOV.B   R0L,[R0]
                      20642         BEQ     _1444
005DF6 F202           +20642 ;       BNE     _LG_1422
005DF8 D500C0         +20642 ;       JMP.L   _1444
005DFC D500C000       +20642 ;       JMP.L   _1444
005DFC                +20642 _LG_1422:
005DFC 964842rr       20643         MOV.B   ES,#SEG( _SCPIError )
005E00 9908rrrr       20644         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 339

ADDR   CODE            LINE SOURCELINE
005E04 8A00           20645         MOV.W   R0,[R0]
                      20646         BNE     _1444
005E06 F302           +20646 ;       BEQ     _LG_1424
005E08 D500B8         +20646 ;       JMP.L   _1444
005E0C D500B800       +20646 ;       JMP.L   _1444
005E0C                +20646 _LG_1424:
                      20647 ; rs232cmd.c 5670               {
                      20648 ; rs232cmd.c 5671                       if ( CmdRequest)
005E0C 964842rr       20650         MOV.B   ES,#SEG( _CmdRequest )
005E10 9908rrrr       20651         MOV.W   R0,#SOF( _CmdRequest )
005E14 8200           20652         MOV.B   R0L,[R0]
005E16 F34C           20653         BEQ     _1437
                      20654 ; rs232cmd.c 5672                       {
                      20655 ; rs232cmd.c 5673                               if ( ParCnt != 1)
005E18 964842rr       20657         MOV.B   ES,#SEG( _ParCnt )
005E1C 9908rrrr       20658         MOV.W   R0,#SOF( _ParCnt )
005E20 8200           20659         MOV.B   R0L,[R0]
005E22 910401         20660         CMP.B   R0L,#01H
005E25 F307           20661         BEQ     _1436
                      20662 ; rs232cmd.c 5674                                       SCPIError = SyntaxErr;
005E27 964842rr       20664         MOV.B   ES,#SEG( _SCPIError )
005E2B 9908rrrr       20665         MOV.W   R0,#SOF( _SCPIError )
005E2F BA03           20666         MOV.W   [R0],#03H
                      20667         BR      _1444
005E31 D500A3         +20667         JMP.L   _1444
005E31 D500A3         +20667         JMP.L   _1444
005E34                20668 _1436:
                      20669 ; rs232cmd.c 5675                               else
                      20670 ; rs232cmd.c 5676                               {
                      20671 ; rs232cmd.c 5677                                       sscanf( Cmd, "%d", &test[0]);
005E34 9918rrrr       20673         MOV.W   R1,#SEG( _Cmd )
005E38 9908rrrr       20674         MOV.W   R0,#SOF( _Cmd )
005E3C 9168rr         20675         MOV.B   R3L,#SEG( __lc_bs )
005E3F 7177           20676         XOR.B   R3H,R3H
005E41 8927           20677         MOV.W   R2,R7
005E43 0F0C           20678         PUSH.W  R2, R3
005E45 9938rrrr       20680         MOV.W   R3,#SEG( _10 )
005E49 9928rrrr       20681         MOV.W   R2,#SOF( _10 )
005E4D 0F0C           20682         PUSH.W  R2, R3
                      20684         CALL    _sscanf
005E4F C4rrrrrr       +20684 ;       FCALL   _sscanf
005E53 99700008       20685         ADD.W   R7,#08H
                      20687 ; rs232cmd.c 5678       
                      20688 ; rs232cmd.c 5679                                       tmp[0] = test[0] & 0x0FF;
005E57 8A07           20690         MOV.W   R0,[R7]
005E59 9105FF         20691         AND.B   R0L,#0FFH
005E5C 840F04         20692         MOV.B   [R7+4],R0L
                      20693 ; rs232cmd.c 5680       
                      20694 ; rs232cmd.c 5681                                       TransmitIIC( 0x40, 1, tmp, IIC_PTV);
005E5F 9168rr         20696         MOV.B   R3L,#SEG( __lc_bs )
005E62 7177           20697         XOR.B   R3H,R3H
005E64 402704         20698         LEA     R2,R7+4
005E67 912800         20699         MOV.B   R1L,#00H
005E6A 911801         20700         MOV.B   R0H,#01H
005E6D 910840         20701         MOV.B   R0L,#040H
                      20702         CALL    _TransmitIIC
005E70 C4rrrrrr       +20702 ;       FCALL   _TransmitIIC
                      20703 ; rs232cmd.c 5682                                       ReceiveIIC( 0x40, 1, &tmp[1], IIC_PTV);
005E74 9168rr         20705         MOV.B   R3L,#SEG( __lc_bs )
005E77 7177           20706         XOR.B   R3H,R3H
005E79 402705         20707         LEA     R2,R7+5
005E7C 910840         20708         MOV.B   R0L,#040H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 340

ADDR   CODE            LINE SOURCELINE
005E7F 911801         20709         MOV.B   R0H,#01H
005E82 912800         20710         MOV.B   R1L,#00H
                      20711         CALL    _ReceiveIIC
005E85 C4rrrrrr       +20711 ;       FCALL   _ReceiveIIC
                      20712 ; rs232cmd.c 5683       
                      20713 ; rs232cmd.c 5684                                       rs232printf( 12,"%03d,%03d\n", ( int) tmp
                            [0], ( int) tmp[1]);
005E89 9908000C       20715         MOV.W   R0,#0CH
005E8D 842704         20716         MOV.B   R1L,[R7+4]
005E90 B130           20717         MOVS.B  R1H,#00H
005E92 844705         20718         MOV.B   R2L,[R7+5]
005E95 B150           20719         MOVS.B  R2H,#00H
005E97 0F04           20720         PUSH.W  R2
005E99 0F02           20722         PUSH.W  R1
005E9B 9938rrrr       20724         MOV.W   R3,#SEG( _1434 )
005E9F 9928rrrr       20725         MOV.W   R2,#SOF( _1434 )
005EA3 0F0C           20726         PUSH.W  R2, R3
                      20728         CALL    _rs232printf
005EA5 C4rrrrrr       +20728 ;       FCALL   _rs232printf
005EA9 99700008       20729         ADD.W   R7,#08H
                      20731 ; rs232cmd.c 5685                               }
                      20732 ; rs232cmd.c 5686                       }
005EAD FE66           20734         BR      _1444
005EAD FE6600         20734         BR      _1444
005EB0                20735 _1437:
                      20736 ; rs232cmd.c 5687                       else
                      20737 ; rs232cmd.c 5688                       {
                      20738 ; rs232cmd.c 5689                               if ( !PasswordProtected)
005EB0 964842rr       20740         MOV.B   ES,#SEG( _PasswordProtected )
005EB4 9908rrrr       20741         MOV.W   R0,#SOF( _PasswordProtected )
005EB8 8A00           20742         MOV.W   R0,[R0]
005EBA F25F           20743         BNE     _1444
                      20744 ; rs232cmd.c 5690                               {
                      20745 ; rs232cmd.c 5691                                       if ( ParCnt != 2)
005EBC 964842rr       20747         MOV.B   ES,#SEG( _ParCnt )
005EC0 9908rrrr       20748         MOV.W   R0,#SOF( _ParCnt )
005EC4 8200           20749         MOV.B   R0L,[R0]
005EC6 910402         20750         CMP.B   R0L,#02H
005EC9 F307           20751         BEQ     _1438
                      20752 ; rs232cmd.c 5692                                               SCPIError = SyntaxErr;  
005ECB 964842rr       20754         MOV.B   ES,#SEG( _SCPIError )
005ECF 9908rrrr       20755         MOV.W   R0,#SOF( _SCPIError )
005ED3 BA03           20756         MOV.W   [R0],#03H
005ED5 FE52           20757         BR      _1444
005ED5 FE5200         20757         BR      _1444
005ED8                20758 _1438:
                      20759 ; rs232cmd.c 5693                                       else
                      20760 ; rs232cmd.c 5694                                       {
                      20761 ; rs232cmd.c 5695                                               sscanf( Cmd, "%d,%d", &test[0], &
                            test[1]);
005ED8 9918rrrr       20763         MOV.W   R1,#SEG( _Cmd )
005EDC 9908rrrr       20764         MOV.W   R0,#SOF( _Cmd )
005EE0 9168rr         20765         MOV.B   R3L,#SEG( __lc_bs )
005EE3 7177           20766         XOR.B   R3H,R3H
005EE5 8927           20767         MOV.W   R2,R7
005EE7 91A8rr         20768         MOV.B   R5L,#SEG( __lc_bs )
005EEA 71BB           20769         XOR.B   R5H,R5H
005EEC 404702         20770         LEA     R4,R7+2
005EEF 0F30           20771         PUSH.W  R4, R5
005EF1 0F0C           20773         PUSH.W  R2, R3
005EF3 9938rrrr       20775         MOV.W   R3,#SEG( _1435 )
005EF7 9928rrrr       20776         MOV.W   R2,#SOF( _1435 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 341

ADDR   CODE            LINE SOURCELINE
005EFB 0F0C           20777         PUSH.W  R2, R3
                      20779         CALL    _sscanf
005EFD C4rrrrrr       +20779 ;       FCALL   _sscanf
005F01 9970000C       20780         ADD.W   R7,#0CH
                      20782 ; rs232cmd.c 5696       
                      20783 ; rs232cmd.c 5697                                               tmp[0] = test[0] & 0x0FF;
005F05 8A07           20785         MOV.W   R0,[R7]
005F07 9105FF         20786         AND.B   R0L,#0FFH
005F0A 840F04         20787         MOV.B   [R7+4],R0L
                      20788 ; rs232cmd.c 5698                                               tmp[1] = test[1] & 0x0FF;
005F0D 8C0702         20790         MOV.W   R0,[R7+2]
005F10 9105FF         20791         AND.B   R0L,#0FFH
005F13 840F05         20792         MOV.B   [R7+5],R0L
                      20793 ; rs232cmd.c 5699       
                      20794 ; rs232cmd.c 5700                                               TransmitIIC( 0x40, 2, tmp, IIC_PT
                            V);
005F16 911802         20796         MOV.B   R0H,#02H
005F19 91A8rr         20797         MOV.B   R5L,#SEG( __lc_bs )
005F1C 71BB           20798         XOR.B   R5H,R5H
005F1E 404704         20799         LEA     R4,R7+4
005F21 912800         20800         MOV.B   R1L,#00H
005F24 8935           20801         MOV.W   R3,R5
005F26 8924           20802         MOV.W   R2,R4
005F28 910840         20803         MOV.B   R0L,#040H
                      20804         CALL    _TransmitIIC
005F2B C4rrrrrr       +20804 ;       FCALL   _TransmitIIC
                      20805 ; rs232cmd.c 5701       
                      20806 ; rs232cmd.c 5702                                               TransmitIIC( 0x40, 1, tmp, IIC_PT
                            V);
005F2F 912800         20808         MOV.B   R1L,#00H
005F32 911801         20809         MOV.B   R0H,#01H
005F35 910840         20810         MOV.B   R0L,#040H
005F38 8935           20811         MOV.W   R3,R5
005F3A 8924           20812         MOV.W   R2,R4
                      20813         CALL    _TransmitIIC
005F3C C4rrrrrr       +20813 ;       FCALL   _TransmitIIC
                      20814 ; rs232cmd.c 5703                                               ReceiveIIC( 0x40, 1, &tmp[1], IIC
                            _PTV);
005F40 9168rr         20816         MOV.B   R3L,#SEG( __lc_bs )
005F43 7177           20817         XOR.B   R3H,R3H
005F45 402705         20818         LEA     R2,R7+5
005F48 910840         20819         MOV.B   R0L,#040H
005F4B 911801         20820         MOV.B   R0H,#01H
005F4E 912800         20821         MOV.B   R1L,#00H
                      20822         CALL    _ReceiveIIC
005F51 C4rrrrrr       +20822 ;       FCALL   _ReceiveIIC
                      20823 ; rs232cmd.c 5704       
                      20824 ; rs232cmd.c 5705                                               rs232printf( 12,"%03d,%03d\n", ( 
                            int) tmp[0], ( int) tmp[1]);
005F55 9908000C       20826         MOV.W   R0,#0CH
005F59 842704         20827         MOV.B   R1L,[R7+4]
005F5C B130           20828         MOVS.B  R1H,#00H
005F5E 844705         20829         MOV.B   R2L,[R7+5]
005F61 B150           20830         MOVS.B  R2H,#00H
005F63 0F04           20831         PUSH.W  R2
005F65 0F02           20833         PUSH.W  R1
005F67 9938rrrr       20835         MOV.W   R3,#SEG( _1434 )
005F6B 9928rrrr       20836         MOV.W   R2,#SOF( _1434 )
005F6F 0F0C           20837         PUSH.W  R2, R3
                      20839         CALL    _rs232printf
005F71 C4rrrrrr       +20839 ;       FCALL   _rs232printf
005F75 99700008       20840         ADD.W   R7,#08H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 342

ADDR   CODE            LINE SOURCELINE
                      20842 ; rs232cmd.c 5706                                       }
                      20843 ; rs232cmd.c 5707                               }
                      20844 ; rs232cmd.c 5708                       }
                      20845 ; rs232cmd.c 5709               }
005F7A                20847 _1444:
                      20848 ; rs232cmd.c 5710       }
005F7A A976           20850         ADDS.W  R7,#06H
005F7C 2F30           20852         POP.W   R4, R5
005F7E D680           20854         RET
                      20856 ; rs232cmd.c 5711       
                      20857 ; rs232cmd.c 5712       /************************************************************************
                            **/
                      20858 ; rs232cmd.c 5713       /* FindParameter                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      20859 ; rs232cmd.c 5714       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20860 ; rs232cmd.c 5715       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                      20861 ; rs232cmd.c 5716       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      20862 ; rs232cmd.c 5717       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20863 ; rs232cmd.c 5718       /* Function:    Find the character defined parameter                     
                                                                                                    */
                      20864 ; rs232cmd.c 5719       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20865 ; rs232cmd.c 5720       /* Returns:             The array number containing the parameter or max.
                             array+1                */
                      20866 ; rs232cmd.c 5721       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20867 ; rs232cmd.c 5722       /************************************************************************
                            **/
                      20868 ; rs232cmd.c 5723       int FindParameter( char* par, struct PAR_STRUCT code* ParPtr)
                      20869 ; rs232cmd.c 5724       {
                      20870         ALIGN   1
                      20872         PUBLIC  _FindParameter
005F80                20873 _FindParameter:
005F80 0F70           20877         PUSH.W  R4, R5, R6
005F82 A97C           20879         ADDS.W  R7,#0CH
005F84 8951           20883         MOV.W   R5,R1
005F86 8940           20884         MOV.W   R4,R0
                      20891 ; rs232cmd.c 5725               int tmp = 0;
005F88 B960           20893         MOV.W   R6,#00H
                      20895 ; rs232cmd.c 5726       
                      20896 ; rs232cmd.c 5727               while ( ParPtr)
005F8A 8913           20898         MOV.W   R1,R3
005F8C 8902           20899         MOV.W   R0,R2
005F8E 6932           20900         OR.W    R3,R2
005F90 F33F           20903         BEQ     _1451
005F90 F33F           20903         BEQ     _1451
005F92                20904 _1447:
                      20905 ; rs232cmd.c 5728               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 343

ADDR   CODE            LINE SOURCELINE
                      20906 ; rs232cmd.c 5729                       if (( !Cstrcmp( par, ParPtr->LongName)) || ( !Cstrcmp( pa
                            r, ParPtr->ShortName)))
005F92 8C1F02         20908         MOV.W   [R7+2],R1
005F95 8A0F           20909         MOV.W   [R7],R0
005F97 862C43         20910         MOV.B   CS,R1L
005F9A 8820           20911         MOVC.W  R2,[R0+]
005F9C 99040000       20912         CMP.W   R0,#00H
005FA0 F202           20913         BNE     _1453
005FA2 A64143         20914         ADDS.B  CS,#01H
005FA2 A6414300       20914         ADDS.B  CS,#01H
005FA6                20915 _1453:
005FA6 8830           20916         MOVC.W  R3,[R0+]
005FA8 8915           20919         MOV.W   R1,R5
005FAA 8904           20920         MOV.W   R0,R4
                      20923         CALL    _Cstrcmp
005FAC C4rrrrrr       +20923 ;       FCALL   _Cstrcmp
005FB0 6900           20926         OR.W    R0,R0
005FB2 F315           20927         BEQ     _1448
005FB4 8C1702         20928         MOV.W   R1,[R7+2]
005FB7 8A07           20929         MOV.W   R0,[R7]
005FB9 99000004       20930         ADD.W   R0,#04H
005FBD 99110000       20931         ADDC.W  R1,#00H
005FC1 862C43         20932         MOV.B   CS,R1L
005FC4 8820           20933         MOVC.W  R2,[R0+]
005FC6 99040000       20934         CMP.W   R0,#00H
005FCA F202           20935         BNE     _1454
005FCC A64143         20936         ADDS.B  CS,#01H
005FCC A6414300       20936         ADDS.B  CS,#01H
005FD0                20937 _1454:
005FD0 8830           20938         MOVC.W  R3,[R0+]
005FD2 8915           20939         MOV.W   R1,R5
005FD4 8904           20940         MOV.W   R0,R4
                      20943         CALL    _Cstrcmp
005FD6 C4rrrrrr       +20943 ;       FCALL   _Cstrcmp
005FDA 6900           20946         OR.W    R0,R0
005FDC F202           20947         BNE     _1449
005FDC F202           20947         BNE     _1449
005FDE                20948 _1448:
                      20949 ; rs232cmd.c 5730                               return( tmp);
005FDE 8906           20951         MOV.W   R0,R6
005FE0 FE19           20954         BR      _1452
005FE0 FE19           20954         BR      _1452
005FE2                20955 _1449:
                      20962 ; rs232cmd.c 5731       
                      20963 ; rs232cmd.c 5732                       ParPtr = ParPtr->SameLevel;
005FE2 8C1702         20965         MOV.W   R1,[R7+2]
005FE5 8A07           20966         MOV.W   R0,[R7]
005FE7 99000008       20967         ADD.W   R0,#08H
005FEB 99110000       20968         ADDC.W  R1,#00H
005FEF 862C43         20972         MOV.B   CS,R1L
005FF2 8820           20973         MOVC.W  R2,[R0+]
005FF4 99040000       20974         CMP.W   R0,#00H
005FF8 F202           20975         BNE     _1455
005FFA A64143         20976         ADDS.B  CS,#01H
005FFA A6414300       20976         ADDS.B  CS,#01H
005FFE                20977 _1455:
005FFE 8830           20978         MOVC.W  R3,[R0+]
                      20980 ; rs232cmd.c 5733       
                      20981 ; rs232cmd.c 5734                       if ( tmp < 255)
006000 996400FF       20983         CMP.W   R6,#0FFH
006004 FA05           20984         BGE     _1451
                      20985 ; rs232cmd.c 5735                               tmp++;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 344

ADDR   CODE            LINE SOURCELINE
006006 A961           20987         ADDS.W  R6,#01H
006008 8913           20991         MOV.W   R1,R3
00600A 8902           20992         MOV.W   R0,R2
00600C 6932           20993         OR.W    R3,R2
00600E F2C1           20996         BNE     _1447
                      20997 ; rs232cmd.c 5736                       else
                      20998 ; rs232cmd.c 5737                               break;
                      20999 ; rs232cmd.c 5738               }
006010                21001 _1451:
                      21002 ; rs232cmd.c 5739       
                      21003 ; rs232cmd.c 5740               return( -1);
006010 9908FFFF       21005         MOV.W   R0,#0FFFFH
                      21007 ; rs232cmd.c 5741       }
006014                21009 _1452:
006014 A974           21010         ADDS.W  R7,#04H
006016 2F70           21012         POP.W   R4, R5, R6
006018 D680           21014         RET
                      21018 ; rs232cmd.c 5742       
                      21019 ; rs232cmd.c 5743       
                      21020 ; rs232cmd.c 5744       /************************************************************************
                            **/
                      21021 ; rs232cmd.c 5745       /* FLTToSamples                                                          
                                                                                                                             
                                                     RS232CMD.C */
                      21022 ; rs232cmd.c 5746       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21023 ; rs232cmd.c 5747       /* Author:              Kim Engedahl, DEV, 970211                        
                                                                                                                             
                                    */
                      21024 ; rs232cmd.c 5748       /* Revised:             000530                                           
                                                                                                                             
                                                                                    */
                      21025 ; rs232cmd.c 5749       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */      
                      21026 ; rs232cmd.c 5750       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      21027 ; rs232cmd.c 5751       /* Remarks:             PAL Range: 1728*256, NTSC Range: 1716*256        
                                                                                                    */
                      21028 ; rs232cmd.c 5752       /* Returns:             FLT in samples, or -1 if illegal                 
                                                                                                                            *
                            /
                      21029 ; rs232cmd.c 5753       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      21030 ; rs232cmd.c 5754       /************************************************************************
                            ***/
                      21031 ; rs232cmd.c 5755       long FLTToSamples( UC system, int F, int L, float T) {
                      21032         ALIGN   1
                      21034         PUBLIC  _FLTToSamples
00601A                21035 _FLTToSamples:
00601A 0F70           21039         PUSH.W  R4, R5, R6
00601C 99720018       21041         SUB.W   R7,#018H
006020 840F12         21044         MOV.B   [R7+18],R0L
006023 8C2F0E         21047         MOV.W   [R7+14],R2
                      21057 ; rs232cmd.c 5756       
                      21058 ; rs232cmd.c 5757               long samples;
                      21059 ; rs232cmd.c 5758               char minus;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 345

ADDR   CODE            LINE SOURCELINE
                      21060 ; rs232cmd.c 5759       
                      21061 ; rs232cmd.c 5760               if (( F == 0) && ( L == 0) && ( T == 0))
006026 8C1F10         21063         MOV.W   [R7+16],R1
006029 6911           21064         OR.W    R1,R1
00602B F210           21065         BNE     _1462
00602D 8C070E         21066         MOV.W   R0,[R7+14]
006030 F20D           21067         BNE     _1462
006032 B930           21068         MOV.W   R3,#00H
006034 B920           21069         MOV.W   R2,#00H
006036 8C1724         21070         MOV.W   R1,[R7+36]
006039 8C0722         21071         MOV.W   R0,[R7+34]
00603C C4rrrrrr       21072         FCALL   __CMP_SPF
006040 910400         21073         CMP.B   R0L,#00H
006043 F204           21074         BNE     _1462
                      21075 ; rs232cmd.c 5761                       return( 0);
006045 B910           21077         MOV.W   R1,#00H
006047 B900           21078         MOV.W   R0,#00H
                      21079         BR      _1529
006049 D5021E         +21079         JMP.L   _1529
006049 D5021E         +21079         JMP.L   _1529
00604C                21080 _1462:
                      21083 ; rs232cmd.c 5762       
                      21084 ; rs232cmd.c 5763               if (( F <= 0) && ( L <= 0) && ( T <= 0))
00604C 9C74100000     21086         CMP.W   [R7+16],#00H
006051 FC10           21087         BGT     _1465
006053 9C740E0000     21088         CMP.W   [R7+14],#00H
006058 FC0C           21089         BGT     _1465
00605A B930           21090         MOV.W   R3,#00H
00605C B920           21091         MOV.W   R2,#00H
00605E 8C1724         21092         MOV.W   R1,[R7+36]
006061 8C0722         21093         MOV.W   R0,[R7+34]
006064 C4rrrrrr       21094         FCALL   __CMP_SPF
006068 910400         21095         CMP.B   R0L,#00H
00606B FC03           21096         BGT     _1465
                      21097 ; rs232cmd.c 5764               {
                      21098 ; rs232cmd.c 5765                       minus = 1;
00606D B4710C         21100         MOV.B   [R7+12],#01H
                      21102 ; rs232cmd.c 5766               }
006070 FE19           21104         BR      _1469
006070 FE19           21104         BR      _1469
006072                21105 _1465:
                      21106 ; rs232cmd.c 5767               else
                      21107 ; rs232cmd.c 5768               {
                      21108 ; rs232cmd.c 5769                       if (( F >= 0) && ( L >= 0) && ( T >= 0))
006072 9C74100000     21110         CMP.W   [R7+16],#00H
006077 FB0E           21111         BLT     _1467
006079 9C740E0000     21112         CMP.W   [R7+14],#00H
00607E FB0A           21113         BLT     _1467
006080 B930           21114         MOV.W   R3,#00H
006082 B920           21115         MOV.W   R2,#00H
006084 8C1724         21116         MOV.W   R1,[R7+36]
006087 8C0722         21117         MOV.W   R0,[R7+34]
00608A C4rrrrrr       21118         FCALL   __CMP_SPF
00608E 910400         21119         CMP.B   R0L,#00H
006091 FA07           21120         BGE     _1468
                      21121 ; rs232cmd.c 5770                               minus = 0;
006094                21123 _1467:
                      21124 ; rs232cmd.c 5771                       else
                      21125 ; rs232cmd.c 5772                               return( -1);
006094 9918FFFF       21127         MOV.W   R1,#0FFFFH
006098 9908FFFF       21128         MOV.W   R0,#0FFFFH
                      21129         BR      _1529
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 346

ADDR   CODE            LINE SOURCELINE
00609C D501F5         +21129         JMP.L   _1529
0060A0                21131 _1468:
0060A0 B4700C         21134         MOV.B   [R7+12],#00H
                      21137 ; rs232cmd.c 5773               }
0060A4                21139 _1469:
                      21140 ; rs232cmd.c 5774       
                      21141 ; rs232cmd.c 5775                                                                                
                                                                                                            // 1 sample = (1/
                            27MHz)/256
                      21142 ; rs232cmd.c 5776               samples = ( long)(( T*6912L)/1000L + 0.5);      
0060A4 991845D8       21144         MOV.W   R1,#045D8H
0060A8 B900           21145         MOV.W   R0,#00H
0060AA 8C3724         21146         MOV.W   R3,[R7+36]
0060AD 8C2722         21147         MOV.W   R2,[R7+34]
0060B0 C4rrrrrr       21148         FCALL   __MUL_SPF
0060B4 9938447A       21149         MOV.W   R3,#0447AH
0060B8 B920           21150         MOV.W   R2,#00H
0060BA C4rrrrrr       21151         FCALL   __DIV_SPF
0060BE C4rrrrrr       21152         FCALL   __SPF2DPF
0060C2 9C780A3FE0     21153         MOV.W   [R7+10],#03FE0H
0060C7 BC7008         21154         MOV.W   [R7+8],#00H
0060CA BC7006         21155         MOV.W   [R7+6],#00H
0060CD BC7004         21156         MOV.W   [R7+4],#00H
0060D0 406704         21157         LEA     R6,R7+4
0060D3 C4rrrrrr       21158         FCALL   __ADD_DPF
0060D7 C4rrrrrr       21159         FCALL   __DPF2L
0060DB 8C1F16         21160         MOV.W   [R7+22],R1
0060DE 8C0F14         21161         MOV.W   [R7+20],R0
                      21162 ; rs232cmd.c 5777       
                      21163 ; rs232cmd.c 5778               if ( system < NTSC)                                              
                                                    // If selected system is PAL..
0060E1 844712         21165         MOV.B   R2L,[R7+18]
0060E4 914402         21166         CMP.B   R2L,#02H
                      21169         BCC     _1494
0060E7 F102           +21169 ;       BCS     _LG_1468
0060E9 D500EB         +21169 ;       JMP.L   _1494
0060EC D500EB         +21169 ;       JMP.L   _1494
0060EC                +21169 _LG_1468:
0060EC 8C1F0A         21170         MOV.W   [R7+10],R1
0060EF 8C0F08         21171         MOV.W   [R7+8],R0
                      21172 ; rs232cmd.c 5779               {
                      21173 ; rs232cmd.c 5780       
                      21174 ; rs232cmd.c 5781                       if ( labs( samples) > 442367L)          // Test for illeg
                            al time var
                      21176         CALL    _labs
0060F2 C4rrrrrr       +21176 ;       FCALL   _labs
0060F6 99140006       21178         CMP.W   R1,#06H
0060FA FB0A           21179         BLT     _1470
0060FC FC03           21180         BGT     _1535
0060FE 9904BFFF       21181         CMP.W   R0,#0BFFFH
006102 F906           21182         BL      _1470
006102 F906           21182         BL      _1470
006104                21183 _1535:
                      21184 ; rs232cmd.c 5782                               return( -1);
006104 9918FFFF       21186         MOV.W   R1,#0FFFFH
006108 9908FFFF       21187         MOV.W   R0,#0FFFFH
                      21188         BR      _1529
00610C D501BD         +21188         JMP.L   _1529
00610C D501BD00       +21188         JMP.L   _1529
006110                21189 _1470:
                      21192 ; rs232cmd.c 5783       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 347

ADDR   CODE            LINE SOURCELINE
                      21193 ; rs232cmd.c 5784                       switch ( F)                                              
                                                                            // Test for illegal field & line
006110 9C74100000     21195         CMP.W   [R7+16],#00H
006115 F31A           21196         BEQ     _1471
006117 9C7410FFFF     21197         CMP.W   [R7+16],#0FFFFH
00611C F328           21198         BEQ     _1476
00611E 9C7410FFFD     21199         CMP.W   [R7+16],#0FFFDH
006123 F325           21200         BEQ     _1476
006125 9C74100002     21201         CMP.W   [R7+16],#02H
00612A F321           21202         BEQ     _1476
00612C 9C7410FFFE     21203         CMP.W   [R7+16],#0FFFEH
006131 F32A           21204         BEQ     _1479
006133 9C74100001     21205         CMP.W   [R7+16],#01H
006138 F326           21206         BEQ     _1479
00613A 9C74100003     21207         CMP.W   [R7+16],#03H
00613F F323           21208         BEQ     _1479
006141 9C74100004     21209         CMP.W   [R7+16],#04H
006146 F32B           21210         BEQ     _1480
006148 FE44           21211         BR      _1482
                      21212 ; rs232cmd.c 5785                       {
                      21213 ; rs232cmd.c 5786                               case 0:
00614A                21215 _1471:
                      21216 ; rs232cmd.c 5787                                       if (( minus && ( L < -311)) || ( !minus &
                            & ( L > 312)))
00614A 84070C         21218         MOV.B   R0L,[R7+12]
00614D F304           21219         BEQ     _1472
00614F 9C740EFEC9     21220         CMP.W   [R7+14],#0FEC9H
006154 FB06           21221         BLT     _1473
006154 FB06           21221         BLT     _1473
006156                21222 _1472:
006156 84070C         21223         MOV.B   R0L,[R7+12]
006159 F242           21224         BNE     _1487
00615B 9C740E0138     21225         CMP.W   [R7+14],#0138H
006160 FD3E           21226         BLE     _1487
006160 FD3E           21226         BLE     _1487
006162                21227 _1473:
                      21228 ; rs232cmd.c 5788                                               return( -1);
006162 9918FFFF       21230         MOV.W   R1,#0FFFFH
006166 9908FFFF       21231         MOV.W   R0,#0FFFFH
                      21232         BR      _1529
00616A D5018E         +21232         JMP.L   _1529
                      21233 ; rs232cmd.c 5789                                       break;
                      21234 ; rs232cmd.c 5790       
                      21235 ; rs232cmd.c 5791                               case -1:
                      21236 ; rs232cmd.c 5792                               case -3:
                      21237 ; rs232cmd.c 5793                               case 2:
00616E                21239 _1476:
                      21242 ; rs232cmd.c 5794                                       if ( abs( L) > 312)
00616E 8C070E         21244         MOV.W   R0,[R7+14]
                      21245         CALL    _abs
006171 C4rrrrrr       +21245 ;       FCALL   _abs
006175 99040138       21246         CMP.W   R0,#0138H
006179 FD32           21247         BLE     _1487
                      21248 ; rs232cmd.c 5795                                               return( -1);
00617B 9918FFFF       21250         MOV.W   R1,#0FFFFH
00617F 9908FFFF       21251         MOV.W   R0,#0FFFFH
                      21252         BR      _1529
006183 D50181         +21252         JMP.L   _1529
                      21253 ; rs232cmd.c 5796                                       break;
                      21254 ; rs232cmd.c 5797       
                      21255 ; rs232cmd.c 5798                               case -2:
                      21256 ; rs232cmd.c 5799                               case 1:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 348

ADDR   CODE            LINE SOURCELINE
                      21257 ; rs232cmd.c 5800                               case 3:
006186                21259 _1479:
                      21262 ; rs232cmd.c 5801                                       if ( abs( L) > 311)
006186 8C070E         21264         MOV.W   R0,[R7+14]
                      21265         CALL    _abs
006189 C4rrrrrr       +21265 ;       FCALL   _abs
00618D 99040137       21266         CMP.W   R0,#0137H
006191 FD26           21267         BLE     _1487
                      21268 ; rs232cmd.c 5802                                               return( -1);
006193 9918FFFF       21270         MOV.W   R1,#0FFFFH
006197 9908FFFF       21271         MOV.W   R0,#0FFFFH
                      21272         BR      _1529
00619B D50175         +21272         JMP.L   _1529
                      21273 ; rs232cmd.c 5803                                       break;
                      21274 ; rs232cmd.c 5804       
                      21275 ; rs232cmd.c 5805                               case 4:
00619E                21277 _1480:
                      21280 ; rs232cmd.c 5806                                       if (( L > 0) || ( T > 0.0))
00619E 9C740E0000     21282         CMP.W   [R7+14],#00H
0061A3 FC11           21283         BGT     _1481
0061A5 8C1724         21284         MOV.W   R1,[R7+36]
0061A8 8C0722         21285         MOV.W   R0,[R7+34]
0061AB C4rrrrrr       21286         FCALL   __SPF2DPF
0061AF BC7006         21287         MOV.W   [R7+6],#00H
0061B2 BC7004         21288         MOV.W   [R7+4],#00H
0061B5 BC7002         21289         MOV.W   [R7+2],#00H
0061B8 BA70           21290         MOV.W   [R7],#00H
0061BA 8967           21291         MOV.W   R6,R7
0061BC C4rrrrrr       21292         FCALL   __CMP_DPF
0061C0 910401         21293         CMP.B   R0L,#01H
0061C3 F20D           21294         BNE     _1487
0061C3 F20D00         21294         BNE     _1487
0061C6                21295 _1481:
                      21296 ; rs232cmd.c 5807                                               return( -1);
0061C6 9918FFFF       21298         MOV.W   R1,#0FFFFH
0061CA 9908FFFF       21299         MOV.W   R0,#0FFFFH
                      21300         BR      _1529
0061CE D5015C         +21300         JMP.L   _1529
                      21301 ; rs232cmd.c 5808                                       break;
                      21302 ; rs232cmd.c 5809       
                      21303 ; rs232cmd.c 5810                               default:
0061D2                21305 _1482:
                      21306 ; rs232cmd.c 5811                                       return( -1);
0061D2 9918FFFF       21308         MOV.W   R1,#0FFFFH
0061D6 9908FFFF       21309         MOV.W   R0,#0FFFFH
                      21310         BR      _1529
0061DA D50156         +21310         JMP.L   _1529
                      21311 ; rs232cmd.c 5812                       }
0061DE                21313 _1487:
                      21316 ; rs232cmd.c 5813       
                      21317 ; rs232cmd.c 5814                       if ( !minus)                                             
                                                                    // if posistive delay..
0061DE 84070C         21319         MOV.B   R0L,[R7+12]
0061E1 F212           21322         BNE     _1488
                      21323 ; rs232cmd.c 5815                       {
                      21324 ; rs232cmd.c 5816                               if ( F % 2)
0061E3 8C0710         21326         MOV.W   R0,[R7+16]
0061E6 8910           21327         MOV.W   R1,R0
0061E8 9819           21328         SEXT.W  R1
0061EA E9090002       21329         DIV.D   R0,#02H
0061EE 6911           21330         OR.W    R1,R1
0061F0 F341           21331         BEQ     _1493
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 349

ADDR   CODE            LINE SOURCELINE
                      21332 ; rs232cmd.c 5817                               {
                      21333 ; rs232cmd.c 5818                                       L += 313;
0061F2 8C070E         21335         MOV.W   R0,[R7+14]
0061F5 99000139       21336         ADD.W   R0,#0139H
0061F9 8C0F0E         21338         MOV.W   [R7+14],R0
                      21339 ; rs232cmd.c 5819                                       F--;
0061FC 8C0710         21341         MOV.W   R0,[R7+16]
0061FF A90F           21342         ADDS.W  R0,#0FH
006201 8C0F10         21343         MOV.W   [R7+16],R0
                      21344 ; rs232cmd.c 5820                               }
                      21345 ; rs232cmd.c 5821                       }
006204 FE37           21347         BR      _1493
006204 FE37           21347         BR      _1493
006206                21348 _1488:
                      21349 ; rs232cmd.c 5822                       else                                                     
                                                                                            // ..else delay is negative
                      21350 ; rs232cmd.c 5823                       {
                      21351 ; rs232cmd.c 5824                               F += 7;
006206 8C0710         21353         MOV.W   R0,[R7+16]
006209 A907           21354         ADDS.W  R0,#07H
                      21355 ; rs232cmd.c 5825       
                      21356 ; rs232cmd.c 5826                               samples += 442367L;
00620B 8C370A         21358         MOV.W   R3,[R7+10]
00620E 8C2708         21359         MOV.W   R2,[R7+8]
006211 9920BFFF       21360         ADD.W   R2,#0BFFFH
006215 99310006       21361         ADDC.W  R3,#06H
006219 8C3F16         21362         MOV.W   [R7+22],R3
00621C 8C2F14         21363         MOV.W   [R7+20],R2
                      21364 ; rs232cmd.c 5827       
                      21365 ; rs232cmd.c 5828                               if ( F % 2) {
00621F 8C0F10         21367         MOV.W   [R7+16],R0
006222 8910           21368         MOV.W   R1,R0
006224 9819           21369         SEXT.W  R1
006226 E9090002       21370         DIV.D   R0,#02H
00622A 6911           21371         OR.W    R1,R1
00622C F30A           21372         BEQ     _1489
                      21373 ; rs232cmd.c 5829                                       L += 624;
00622E 8C070E         21375         MOV.W   R0,[R7+14]
006231 99000270       21376         ADD.W   R0,#0270H
006235 8C0F0E         21377         MOV.W   [R7+14],R0
                      21378 ; rs232cmd.c 5830                                       F--;
006238 8C0710         21380         MOV.W   R0,[R7+16]
00623B A90F           21381         ADDS.W  R0,#0FH
00623D 8C0F10         21382         MOV.W   [R7+16],R0
                      21383 ; rs232cmd.c 5831                               }
006240 FE05           21385         BR      _1490
006240 FE05           21385         BR      _1490
006242                21386 _1489:
                      21387 ; rs232cmd.c 5832                               else
                      21388 ; rs232cmd.c 5833                                       L += 312;
006242 8C070E         21390         MOV.W   R0,[R7+14]
006245 99000138       21391         ADD.W   R0,#0138H
006249 8C0F0E         21392         MOV.W   [R7+14],R0
006249 8C0F0E         21392         MOV.W   [R7+14],R0
00624C                21393 _1490:
                      21394 ; rs232cmd.c 5834       
                      21395 ; rs232cmd.c 5835                               if ( T == 0)
00624C B930           21397         MOV.W   R3,#00H
00624E B920           21398         MOV.W   R2,#00H
006250 8C1724         21399         MOV.W   R1,[R7+36]
006253 8C0722         21400         MOV.W   R0,[R7+34]
006256 C4rrrrrr       21401         FCALL   __CMP_SPF
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 350

ADDR   CODE            LINE SOURCELINE
00625A 910400         21402         CMP.B   R0L,#00H
00625D F20B           21403         BNE     _1493
                      21404 ; rs232cmd.c 5836                                       samples++;
00625F 8C1716         21406         MOV.W   R1,[R7+22]
006262 8C0714         21407         MOV.W   R0,[R7+20]
006265 99000001       21408         ADD.W   R0,#01H
006269 99110000       21409         ADDC.W  R1,#00H
00626D 8C1F16         21410         MOV.W   [R7+22],R1
006270 8C0F14         21411         MOV.W   [R7+20],R0
                      21412 ; rs232cmd.c 5837                       }
006274                21414 _1493:
                      21415 ; rs232cmd.c 5838       
                      21416 ; rs232cmd.c 5839                       samples += F*138240000L + L*442368L;
006274 8C0710         21418         MOV.W   R0,[R7+16]
006277 9819           21419         SEXT.W  R1
006279 8931           21420         MOV.W   R3,R1
00627B 8920           21421         MOV.W   R2,R0
00627D DD25           21422         ASL.D   R2,#05H
00627F 0920           21423         ADD.W   R2,R0
006281 1931           21424         ADDC.W  R3,R1
006283 DD25           21425         ASL.D   R2,#05H
006285 2920           21426         SUB.W   R2,R0
006287 3931           21427         SUBB.W  R3,R1
006289 DD22           21428         ASL.D   R2,#02H
00628B 2920           21429         SUB.W   R2,R0
00628D 3931           21430         SUBB.W  R3,R1
00628F DD22           21431         ASL.D   R2,#02H
006291 2920           21432         SUB.W   R2,R0
006293 3931           21433         SUBB.W  R3,R1
006295 DD2D           21434         ASL.D   R2,#0DH
006297 8C070E         21435         MOV.W   R0,[R7+14]
00629A 8940           21436         MOV.W   R4,R0
00629C 9859           21437         SEXT.W  R5
00629E 8915           21438         MOV.W   R1,R5
0062A0 8904           21439         MOV.W   R0,R4
0062A2 DD03           21440         ASL.D   R0,#03H
0062A4 2904           21441         SUB.W   R0,R4
0062A6 3915           21442         SUBB.W  R1,R5
0062A8 DD02           21443         ASL.D   R0,#02H
0062AA 2904           21444         SUB.W   R0,R4
0062AC 3915           21445         SUBB.W  R1,R5
0062AE DD0E           21446         ASL.D   R0,#0EH
0062B0 0920           21447         ADD.W   R2,R0
0062B2 1931           21448         ADDC.W  R3,R1
0062B4 8C1716         21449         MOV.W   R1,[R7+22]
0062B7 8C0714         21450         MOV.W   R0,[R7+20]
0062BA 0902           21451         ADD.W   R0,R2
0062BC 1913           21452         ADDC.W  R1,R3
                      21453 ; rs232cmd.c 5840               }
                      21455         BR      _1515
0062BE D500E4         +21455         JMP.L   _1515
0062BE D500E400       +21455         JMP.L   _1515
0062C2                21456 _1494:
                      21458 ; rs232cmd.c 5841               else                                                             
                                                                                            // ..else system is NTSC
                      21459 ; rs232cmd.c 5842               {
                      21460 ; rs232cmd.c 5843       
                      21461 ; rs232cmd.c 5844                       if ( labs( samples) > 439295L)          // Test for illeg
                            al time var
0062C2 8C1716         21463         MOV.W   R1,[R7+22]
0062C5 8C0714         21464         MOV.W   R0,[R7+20]
                      21465         CALL    _labs
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 351

ADDR   CODE            LINE SOURCELINE
0062C8 C4rrrrrr       +21465 ;       FCALL   _labs
0062CC 99140006       21466         CMP.W   R1,#06H
0062D0 FB0A           21467         BLT     _1495
0062D2 FC03           21468         BGT     _1541
0062D4 9904B3FF       21469         CMP.W   R0,#0B3FFH
0062D8 F906           21470         BL      _1495
0062D8 F906           21470         BL      _1495
0062DA                21471 _1541:
                      21472 ; rs232cmd.c 5845                               return( -1);
0062DA 9918FFFF       21474         MOV.W   R1,#0FFFFH
0062DE 9908FFFF       21475         MOV.W   R0,#0FFFFH
                      21476         BR      _1529
0062E2 D500D2         +21476         JMP.L   _1529
0062E2 D500D200       +21476         JMP.L   _1529
0062E6                21477 _1495:
                      21480 ; rs232cmd.c 5846       
                      21481 ; rs232cmd.c 5847                       switch ( F)                                              
                                                                            // Test for illegal field & line
0062E6 9C74100000     21483         CMP.W   [R7+16],#00H
0062EB F30C           21484         BEQ     _1496
0062ED 9C7410FFFF     21485         CMP.W   [R7+16],#0FFFFH
0062F2 F31A           21486         BEQ     _1499
0062F4 9C74100001     21487         CMP.W   [R7+16],#01H
0062F9 F323           21488         BEQ     _1500
0062FB 9C74100002     21489         CMP.W   [R7+16],#02H
006300 F32B           21490         BEQ     _1501
006302 FE44           21491         BR      _1503
                      21492 ; rs232cmd.c 5848                       {
                      21493 ; rs232cmd.c 5849                               case 0:
006304                21495 _1496:
                      21496 ; rs232cmd.c 5850                                       if (( minus && ( L < -261)) || ( !minus &
                            & ( L > 262)))
006304 84070C         21498         MOV.B   R0L,[R7+12]
006307 F304           21499         BEQ     _1497
006309 9C740EFEFB     21500         CMP.W   [R7+14],#0FEFBH
00630E FB06           21501         BLT     _1498
00630E FB06           21501         BLT     _1498
006310                21502 _1497:
006310 84070C         21503         MOV.B   R0L,[R7+12]
006313 F241           21504         BNE     _1508
006315 9C740E0106     21505         CMP.W   [R7+14],#0106H
00631A FD3D           21506         BLE     _1508
00631A FD3D           21506         BLE     _1508
00631C                21507 _1498:
                      21508 ; rs232cmd.c 5851                                               return( -1);
00631C 9918FFFF       21510         MOV.W   R1,#0FFFFH
006320 9908FFFF       21511         MOV.W   R0,#0FFFFH
                      21512         BR      _1529
006324 D500B1         +21512         JMP.L   _1529
                      21513 ; rs232cmd.c 5852                                       break;
                      21514 ; rs232cmd.c 5853       
                      21515 ; rs232cmd.c 5854                               case -1:
006328                21517 _1499:
                      21520 ; rs232cmd.c 5855                                       if ( abs( L) > 262)
006328 8C070E         21522         MOV.W   R0,[R7+14]
                      21523         CALL    _abs
00632B C4rrrrrr       +21523 ;       FCALL   _abs
00632F 99040106       21524         CMP.W   R0,#0106H
006333 FD31           21525         BLE     _1508
                      21526 ; rs232cmd.c 5856                                               return( -1);
006335 9918FFFF       21528         MOV.W   R1,#0FFFFH
006339 9908FFFF       21529         MOV.W   R0,#0FFFFH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 352

ADDR   CODE            LINE SOURCELINE
                      21530         BR      _1529
00633D D500A4         +21530         JMP.L   _1529
                      21531 ; rs232cmd.c 5857                                       break;
                      21532 ; rs232cmd.c 5858       
                      21533 ; rs232cmd.c 5859                               case 1:
006340                21535 _1500:
                      21538 ; rs232cmd.c 5860                                       if ( abs( L) > 261)
006340 8C070E         21540         MOV.W   R0,[R7+14]
                      21541         CALL    _abs
006343 C4rrrrrr       +21541 ;       FCALL   _abs
006347 99040105       21542         CMP.W   R0,#0105H
00634B FD25           21543         BLE     _1508
                      21544 ; rs232cmd.c 5861                                               return( -1);
00634D 9918FFFF       21546         MOV.W   R1,#0FFFFH
006351 9908FFFF       21547         MOV.W   R0,#0FFFFH
                      21548         BR      _1529
006355 D50098         +21548         JMP.L   _1529
                      21549 ; rs232cmd.c 5862                                       break;
                      21550 ; rs232cmd.c 5863       
                      21551 ; rs232cmd.c 5864                               case 2:
006358                21553 _1501:
                      21556 ; rs232cmd.c 5865                                       if (( L > 0) || ( T > 0.0))
006358 9C740E0000     21558         CMP.W   [R7+14],#00H
00635D FC12           21559         BGT     _1502
00635F 8C1724         21560         MOV.W   R1,[R7+36]
006362 8C0722         21561         MOV.W   R0,[R7+34]
006365 C4rrrrrr       21562         FCALL   __SPF2DPF
006369 BC700A         21563         MOV.W   [R7+10],#00H
00636C BC7008         21564         MOV.W   [R7+8],#00H
00636F BC7006         21565         MOV.W   [R7+6],#00H
006372 BC7004         21566         MOV.W   [R7+4],#00H
006375 406704         21567         LEA     R6,R7+4
006378 C4rrrrrr       21568         FCALL   __CMP_DPF
00637C 910401         21569         CMP.B   R0L,#01H
00637F F20B           21570         BNE     _1508
00637F F20B00         21570         BNE     _1508
006382                21571 _1502:
                      21572 ; rs232cmd.c 5866                                               return( -1);
006382 9918FFFF       21574         MOV.W   R1,#0FFFFH
006386 9908FFFF       21575         MOV.W   R0,#0FFFFH
00638A FE7E           21576         BR      _1529
                      21577 ; rs232cmd.c 5867                                       break;
                      21578 ; rs232cmd.c 5868       
                      21579 ; rs232cmd.c 5869                               default:
00638C                21581 _1503:
                      21582 ; rs232cmd.c 5870                                       return( -1);
00638C 9918FFFF       21584         MOV.W   R1,#0FFFFH
006390 9908FFFF       21585         MOV.W   R0,#0FFFFH
006394 FE79           21586         BR      _1529
                      21587 ; rs232cmd.c 5871                       }
006396                21589 _1508:
                      21592 ; rs232cmd.c 5872       
                      21593 ; rs232cmd.c 5873                       if ( !minus)                                             
                                                            // if posistive delay..
006396 84070C         21595         MOV.B   R0L,[R7+12]
006399 F212           21598         BNE     _1509
                      21599 ; rs232cmd.c 5874                       {                                               
                      21600 ; rs232cmd.c 5875       
                      21601 ; rs232cmd.c 5876                               if ( F % 2)
00639B 8C0710         21603         MOV.W   R0,[R7+16]
00639E 8910           21604         MOV.W   R1,R0
0063A0 9819           21605         SEXT.W  R1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 353

ADDR   CODE            LINE SOURCELINE
0063A2 E9090002       21606         DIV.D   R0,#02H
0063A6 6911           21607         OR.W    R1,R1
0063A8 F341           21608         BEQ     _1514
                      21609 ; rs232cmd.c 5877                               {
                      21610 ; rs232cmd.c 5878                                       L += 263;
0063AA 8C070E         21612         MOV.W   R0,[R7+14]
0063AD 99000107       21613         ADD.W   R0,#0107H
0063B1 8C0F0E         21615         MOV.W   [R7+14],R0
                      21616 ; rs232cmd.c 5879                                       F--;
0063B4 8C0710         21618         MOV.W   R0,[R7+16]
0063B7 A90F           21619         ADDS.W  R0,#0FH
0063B9 8C0F10         21620         MOV.W   [R7+16],R0
                      21621 ; rs232cmd.c 5880                               }
                      21622 ; rs232cmd.c 5881                       }
0063BC FE37           21624         BR      _1514
0063BC FE37           21624         BR      _1514
0063BE                21625 _1509:
                      21626 ; rs232cmd.c 5882                       else                                                     
                                                                                            // ..else delay is negative
                      21627 ; rs232cmd.c 5883                       {                                                        
                                                                                                            
                      21628 ; rs232cmd.c 5884                               F += 3;
0063BE 8C0710         21630         MOV.W   R0,[R7+16]
0063C1 A903           21631         ADDS.W  R0,#03H
                      21632 ; rs232cmd.c 5885       
                      21633 ; rs232cmd.c 5886                               samples += 439295;
0063C3 8C3716         21635         MOV.W   R3,[R7+22]
0063C6 8C2714         21636         MOV.W   R2,[R7+20]
0063C9 9920B3FF       21637         ADD.W   R2,#0B3FFH
0063CD 99310006       21638         ADDC.W  R3,#06H
0063D1 8C3F16         21639         MOV.W   [R7+22],R3
0063D4 8C2F14         21640         MOV.W   [R7+20],R2
                      21641 ; rs232cmd.c 5887       
                      21642 ; rs232cmd.c 5888                               if ( F % 2)
0063D7 8C0F10         21644         MOV.W   [R7+16],R0
0063DA 8910           21645         MOV.W   R1,R0
0063DC 9819           21646         SEXT.W  R1
0063DE E9090002       21647         DIV.D   R0,#02H
0063E2 6911           21648         OR.W    R1,R1
0063E4 F30A           21649         BEQ     _1510
                      21650 ; rs232cmd.c 5889                               {
                      21651 ; rs232cmd.c 5890                                       L += 524;
0063E6 8C070E         21653         MOV.W   R0,[R7+14]
0063E9 9900020C       21654         ADD.W   R0,#020CH
0063ED 8C0F0E         21655         MOV.W   [R7+14],R0
                      21656 ; rs232cmd.c 5891                                       F--;
0063F0 8C0710         21658         MOV.W   R0,[R7+16]
0063F3 A90F           21659         ADDS.W  R0,#0FH
0063F5 8C0F10         21660         MOV.W   [R7+16],R0
                      21661 ; rs232cmd.c 5892                               }
0063F8 FE05           21663         BR      _1511
0063F8 FE05           21663         BR      _1511
0063FA                21664 _1510:
                      21665 ; rs232cmd.c 5893                               else
                      21666 ; rs232cmd.c 5894                                       L += 262;
0063FA 8C070E         21668         MOV.W   R0,[R7+14]
0063FD 99000106       21669         ADD.W   R0,#0106H
006401 8C0F0E         21670         MOV.W   [R7+14],R0
006401 8C0F0E         21670         MOV.W   [R7+14],R0
006404                21671 _1511:
                      21672 ; rs232cmd.c 5895       
                      21673 ; rs232cmd.c 5896                               if ( T == 0)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 354

ADDR   CODE            LINE SOURCELINE
006404 B930           21675         MOV.W   R3,#00H
006406 B920           21676         MOV.W   R2,#00H
006408 8C1724         21677         MOV.W   R1,[R7+36]
00640B 8C0722         21678         MOV.W   R0,[R7+34]
00640E C4rrrrrr       21679         FCALL   __CMP_SPF
006412 910400         21680         CMP.B   R0L,#00H
006415 F20B           21681         BNE     _1514
                      21682 ; rs232cmd.c 5897                                       samples++;
006417 8C1716         21684         MOV.W   R1,[R7+22]
00641A 8C0714         21685         MOV.W   R0,[R7+20]
00641D 99000001       21686         ADD.W   R0,#01H
006421 99110000       21687         ADDC.W  R1,#00H
006425 8C1F16         21688         MOV.W   [R7+22],R1
006428 8C0F14         21689         MOV.W   [R7+20],R0
                      21690 ; rs232cmd.c 5898                       }
00642C                21692 _1514:
                      21693 ; rs232cmd.c 5899       
                      21694 ; rs232cmd.c 5900                       samples += F*115315200L + L*439296L;
00642C 8C0710         21696         MOV.W   R0,[R7+16]
00642F 9819           21697         SEXT.W  R1
006431 8931           21698         MOV.W   R3,R1
006433 8920           21699         MOV.W   R2,R0
006435 DD23           21700         ASL.D   R2,#03H
006437 2920           21701         SUB.W   R2,R0
006439 3931           21702         SUBB.W  R3,R1
00643B DD23           21703         ASL.D   R2,#03H
00643D 2920           21704         SUB.W   R2,R0
00643F 3931           21705         SUBB.W  R3,R1
006441 DD26           21706         ASL.D   R2,#06H
006443 2920           21707         SUB.W   R2,R0
006445 3931           21708         SUBB.W  R3,R1
006447 DD23           21709         ASL.D   R2,#03H
006449 0920           21710         ADD.W   R2,R0
00644B 1931           21711         ADDC.W  R3,R1
00644D DD23           21712         ASL.D   R2,#03H
00644F 0920           21713         ADD.W   R2,R0
006451 1931           21714         ADDC.W  R3,R1
006453 DD29           21715         ASL.D   R2,#09H
006455 8C070E         21716         MOV.W   R0,[R7+14]
006458 8940           21717         MOV.W   R4,R0
00645A 9859           21718         SEXT.W  R5
00645C 8915           21719         MOV.W   R1,R5
00645E 8904           21720         MOV.W   R0,R4
006460 DD03           21721         ASL.D   R0,#03H
006462 2904           21722         SUB.W   R0,R4
006464 3915           21723         SUBB.W  R1,R5
006466 DD02           21724         ASL.D   R0,#02H
006468 2904           21725         SUB.W   R0,R4
00646A 3915           21726         SUBB.W  R1,R5
00646C DD02           21727         ASL.D   R0,#02H
00646E 2904           21728         SUB.W   R0,R4
006470 3915           21729         SUBB.W  R1,R5
006472 DD02           21730         ASL.D   R0,#02H
006474 0904           21731         ADD.W   R0,R4
006476 1915           21732         ADDC.W  R1,R5
006478 DD0A           21733         ASL.D   R0,#0AH
00647A 0920           21734         ADD.W   R2,R0
00647C 1931           21735         ADDC.W  R3,R1
00647E 8C1716         21736         MOV.W   R1,[R7+22]
006481 8C0714         21737         MOV.W   R0,[R7+20]
006484 0902           21738         ADD.W   R0,R2
006486 1913           21739         ADDC.W  R1,R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 355

ADDR   CODE            LINE SOURCELINE
                      21740 ; rs232cmd.c 5901               }
006488                21742 _1515:
                      21743 ; rs232cmd.c 5902       
                      21744 ; rs232cmd.c 5903               return( samples);
                      21745 ; rs232cmd.c 5904       }
006488                21747 _1529:
006488 99700018       21748         ADD.W   R7,#018H
00648C 2F70           21750         POP.W   R4, R5, R6
00648E D680           21752         RET
                      21754 ; rs232cmd.c 5905       
                      21755 ; rs232cmd.c 5906       /************************************************************************
                            **/
                      21756 ; rs232cmd.c 5907       /* PrintSamplesToFLT                                                     
                                                                                                                             
                                     RS232CMD.C */
                      21757 ; rs232cmd.c 5908       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21758 ; rs232cmd.c 5909       /* Author:              Kim Engedahl, DEV, 970211                        
                                                                                                                             
                                    */
                      21759 ; rs232cmd.c 5910       /* Revised:             000530                                           
                                                                                                                             
                                                                                    */
                      21760 ; rs232cmd.c 5911       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21761 ; rs232cmd.c 5912       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      21762 ; rs232cmd.c 5913       /* Remarks:             PAL Range: 1728*256, NTSC Range: 1716*256        
                                                                                                    */
                      21763 ; rs232cmd.c 5914       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      21764 ; rs232cmd.c 5915       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      21765 ; rs232cmd.c 5916       /************************************************************************
                            **/
                      21766 ; rs232cmd.c 5917       void PrintSamplesToFLT( UC system, long samples) {
                      21767         ALIGN   1
                      21769         PUBLIC  _PrintSamplesToFLT
006490                21770 _PrintSamplesToFLT:
006490 0F70           21774         PUSH.W  R4, R5, R6
006492 A97A           21776         ADDS.W  R7,#0AH
                      21789 ; rs232cmd.c 5918       
                      21790 ; rs232cmd.c 5919               char sign;
                      21791 ; rs232cmd.c 5920               int frame, field, line;
                      21792 ; rs232cmd.c 5921       
                      21793 ; rs232cmd.c 5922               sign = '+';
006494 9478022B       21795         MOV.B   [R7+2],#02BH
                      21797 ; rs232cmd.c 5923       
                      21798 ; rs232cmd.c 5924               if ( system < NTSC)                                              
                                                                            // If system selected is PAL..
006498 910402         21800         CMP.B   R0L,#02H
                      21801         BCC     _1552
00649B F102           +21801 ;       BCS     _LG_1554
00649D D50087         +21801 ;       JMP.L   _1552
0064A0 D50087         +21801 ;       JMP.L   _1552
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 356

ADDR   CODE            LINE SOURCELINE
0064A0                +21801 _LG_1554:
                      21802 ; rs232cmd.c 5925               {
                      21803 ; rs232cmd.c 5926                       // 552960000 = 2*625*1728*256
                      21804 ; rs232cmd.c 5927                       // 276480000 = 625*1728*256
                      21805 ; rs232cmd.c 5928                       // 442368    = 1728*256
                      21806 ; rs232cmd.c 5929       
                      21807 ; rs232cmd.c 5930                       if ( samples >= 552960000L)
0064A0 8953           21809         MOV.W   R5,R3
0064A2 8942           21810         MOV.W   R4,R2
0064A4 993420F5       21811         CMP.W   R3,#020F5H
0064A8 FB50           21812         BLT     _1551
0064AA FC03           21813         BGT     _1564
0064AC 99248000       21814         CMP.W   R2,#08000H
0064B0 F14C           21815         BCS     _1551
0064B0 F14C           21815         BCS     _1551
0064B2                21816 _1564:
                      21817 ; rs232cmd.c 5931                       {
                      21818 ; rs232cmd.c 5932                               samples--;
0064B2 99420001       21820         SUB.W   R4,#01H
0064B6 99530000       21821         SUBB.W  R5,#00H
0064BA 8915           21822         MOV.W   R1,R5
0064BC 8904           21823         MOV.W   R0,R4
                      21826 ; rs232cmd.c 5933       
                      21827 ; rs232cmd.c 5934                               frame = samples / 276480000L;
0064BE 9938107A       21829         MOV.W   R3,#0107AH
0064C2 9928C000       21830         MOV.W   R2,#0C000H
0064C6 8951           21831         MOV.W   R5,R1
0064C8 8940           21832         MOV.W   R4,R0
0064CA C4rrrrrr       21833         FCALL   __SDIVL
0064CE 8A0F           21836         MOV.W   [R7],R0
                      21838 ; rs232cmd.c 5935                               line = ( samples % 276480000L) /  442368L;
0064D0 9938107A       21840         MOV.W   R3,#0107AH
0064D4 9928C000       21841         MOV.W   R2,#0C000H
0064D8 8915           21842         MOV.W   R1,R5
0064DA 8904           21843         MOV.W   R0,R4
0064DC C4rrrrrr       21844         FCALL   __SMODL
0064E0 B936           21848         MOV.W   R3,#06H
0064E2 9928C000       21849         MOV.W   R2,#0C000H
0064E6 8951           21850         MOV.W   R5,R1
0064E8 8940           21851         MOV.W   R4,R0
0064EA C4rrrrrr       21852         FCALL   __SDIVL
0064EE 8960           21853         MOV.W   R6,R0
0064F0 8C6F04         21854         MOV.W   [R7+4],R6
                      21855 ; rs232cmd.c 5936                               samples = ( samples % 276480000L) %  442368L;
0064F3 8915           21857         MOV.W   R1,R5
0064F5 8904           21858         MOV.W   R0,R4
0064F7 B936           21859         MOV.W   R3,#06H
0064F9 9928C000       21860         MOV.W   R2,#0C000H
0064FD C4rrrrrr       21861         FCALL   __SMODL
                      21863 ; rs232cmd.c 5937                               field = 2*frame;
006501 8A27           21865         MOV.W   R2,[R7]
006503 D921           21866         ASL.W   R2,#01H
006505 8932           21870         MOV.W   R3,R2
                      21872 ; rs232cmd.c 5938       
                      21873 ; rs232cmd.c 5939                               if ( line > 312)
006507 99480138       21875         MOV.W   R4,#0138H
00650B 99640138       21876         CMP.W   R6,#0138H
00650F FD08           21877         BLE     _1549
                      21878 ; rs232cmd.c 5940                               {
                      21879 ; rs232cmd.c 5941                                       field++;
006511 A921           21881         ADDS.W  R2,#01H
006513 8932           21882         MOV.W   R3,R2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 357

ADDR   CODE            LINE SOURCELINE
                      21885 ; rs232cmd.c 5942                                       line = 624-line;
006515 99280270       21887         MOV.W   R2,#0270H
006519 2926           21888         SUB.W   R2,R6
00651B 8C2F04         21889         MOV.W   [R7+4],R2
                      21890 ; rs232cmd.c 5943                               }
00651E FE04           21892         BR      _1550
00651E FE04           21892         BR      _1550
006520                21893 _1549:
                      21894 ; rs232cmd.c 5944                               else
                      21895 ; rs232cmd.c 5945                                       line = 312-line;
006520 8C2704         21897         MOV.W   R2,[R7+4]
006523 2942           21898         SUB.W   R4,R2
006525 8C4F04         21899         MOV.W   [R7+4],R4
006525 8C4F04         21899         MOV.W   [R7+4],R4
006528                21900 _1550:
                      21901 ; rs232cmd.c 5946       
                      21902 ; rs232cmd.c 5947                               samples = 442368L - 1 - samples;
006528 B956           21904         MOV.W   R5,#06H
00652A 9948BFFF       21905         MOV.W   R4,#0BFFFH
00652E 2940           21906         SUB.W   R4,R0
006530 3951           21907         SUBB.W  R5,R1
                      21910 ; rs232cmd.c 5948                               field = 7-field;
006532 B917           21912         MOV.W   R1,#07H
006534 2913           21913         SUB.W   R1,R3
006536 8901           21914         MOV.W   R0,R1
                      21917 ; rs232cmd.c 5949       
                      21918 ; rs232cmd.c 5950                               if ( field != 4)
006538 99140004       21920         CMP.W   R1,#04H
                      21921         BEQ     _1562
00653C F202           +21921 ;       BNE     _LG_1564
00653E D500B8         +21921 ;       JMP.L   _1562
006542 D500B800       +21921 ;       JMP.L   _1562
006542                +21921 _LG_1564:
                      21922 ; rs232cmd.c 5951                                       sign = '-';
006542 9478022D       21924         MOV.B   [R7+2],#02DH
                      21927 ; rs232cmd.c 5952                       }
                      21929         BR      _1562
006546 D500B4         +21929         JMP.L   _1562
006546 D500B400       +21929         JMP.L   _1562
00654A                21930 _1551:
                      21931 ; rs232cmd.c 5953                       else
                      21932 ; rs232cmd.c 5954                       {
                      21933 ; rs232cmd.c 5955                               frame = samples / 276480000L;
00654A 9938107A       21935         MOV.W   R3,#0107AH
00654E 9928C000       21936         MOV.W   R2,#0C000H
006552 8915           21937         MOV.W   R1,R5
006554 8904           21938         MOV.W   R0,R4
006556 C4rrrrrr       21939         FCALL   __SDIVL
00655A 8A0F           21941         MOV.W   [R7],R0
                      21943 ; rs232cmd.c 5956                               line = ( samples % 276480000L) / 442368L;
00655C 9938107A       21945         MOV.W   R3,#0107AH
006560 9928C000       21946         MOV.W   R2,#0C000H
006564 8915           21947         MOV.W   R1,R5
006566 8904           21948         MOV.W   R0,R4
006568 C4rrrrrr       21949         FCALL   __SMODL
00656C B936           21953         MOV.W   R3,#06H
00656E 9928C000       21954         MOV.W   R2,#0C000H
006572 8951           21955         MOV.W   R5,R1
006574 8940           21956         MOV.W   R4,R0
006576 C4rrrrrr       21957         FCALL   __SDIVL
00657A 8960           21958         MOV.W   R6,R0
00657C 8C6F04         21959         MOV.W   [R7+4],R6
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 358

ADDR   CODE            LINE SOURCELINE
                      21960 ; rs232cmd.c 5957                               samples = ( samples % 276480000L) % 442368L;
00657F 8915           21962         MOV.W   R1,R5
006581 8904           21963         MOV.W   R0,R4
006583 B936           21964         MOV.W   R3,#06H
006585 9928C000       21965         MOV.W   R2,#0C000H
006589 C4rrrrrr       21966         FCALL   __SMODL
00658D 8951           21967         MOV.W   R5,R1
00658F 8940           21968         MOV.W   R4,R0
                      21970 ; rs232cmd.c 5958                               field = 2*frame;
006591 8A17           21972         MOV.W   R1,[R7]
006593 D911           21973         ASL.W   R1,#01H
006595 8901           21977         MOV.W   R0,R1
                      21979 ; rs232cmd.c 5959       
                      21980 ; rs232cmd.c 5960                               if ( line > 312)
006597 99640138       21982         CMP.W   R6,#0138H
                      21983         BLE     _1562
00659B FC02           +21983 ;       BGT     _LG_1566
00659D D50088         +21983 ;       JMP.L   _1562
0065A0 D50088         +21983 ;       JMP.L   _1562
0065A0                +21983 _LG_1566:
                      21984 ; rs232cmd.c 5961                               {
                      21985 ; rs232cmd.c 5962                                       field++;
0065A0 A911           21987         ADDS.W  R1,#01H
0065A2 8901           21988         MOV.W   R0,R1
                      21991 ; rs232cmd.c 5963                                       line -= 313;
0065A4 99620139       21993         SUB.W   R6,#0139H
0065A8 8C6F04         21994         MOV.W   [R7+4],R6
                      21995 ; rs232cmd.c 5964                               }
                      21996 ; rs232cmd.c 5965                       }
                      21997 ; rs232cmd.c 5966               }
                      21999         BR      _1562
0065AB D50081         +21999         JMP.L   _1562
0065AB D50081         +21999         JMP.L   _1562
0065AE                22000 _1552:
                      22003 ; rs232cmd.c 5967               else {                                                           
                                                            // ..system selected is NTSC
                      22004 ; rs232cmd.c 5968                       if ( samples >= 230630400L)
0065AE 8953           22006         MOV.W   R5,R3
0065B0 8942           22007         MOV.W   R4,R2
0065B2 99340DBF       22008         CMP.W   R3,#0DBFH
0065B6 FB4D           22009         BLT     _1555
0065B8 FC03           22010         BGT     _1568
0065BA 99242400       22011         CMP.W   R2,#02400H
0065BE F149           22012         BCS     _1555
0065BE F149           22012         BCS     _1555
0065C0                22013 _1568:
                      22016 ; rs232cmd.c 5969                       {
                      22017 ; rs232cmd.c 5970                               // 230630400 = 525*1716*256
                      22018 ; rs232cmd.c 5971                               // 439296    = 1716*256
                      22019 ; rs232cmd.c 5972       
                      22020 ; rs232cmd.c 5973                               samples--;
0065C0 99420001       22022         SUB.W   R4,#01H
0065C4 99530000       22023         SUBB.W  R5,#00H
0065C8 8915           22025         MOV.W   R1,R5
0065CA 8904           22026         MOV.W   R0,R4
                      22029 ; rs232cmd.c 5974       
                      22030 ; rs232cmd.c 5975                               frame = samples / 230630400L;
0065CC 99380DBF       22032         MOV.W   R3,#0DBFH
0065D0 99282400       22033         MOV.W   R2,#02400H
0065D4 8951           22034         MOV.W   R5,R1
0065D6 8940           22035         MOV.W   R4,R0
0065D8 C4rrrrrr       22036         FCALL   __SDIVL
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 359

ADDR   CODE            LINE SOURCELINE
0065DC 8A0F           22039         MOV.W   [R7],R0
                      22041 ; rs232cmd.c 5976                               line = ( samples % 230630400L) / 439296L;
0065DE 99380DBF       22043         MOV.W   R3,#0DBFH
0065E2 99282400       22044         MOV.W   R2,#02400H
0065E6 8915           22045         MOV.W   R1,R5
0065E8 8904           22046         MOV.W   R0,R4
0065EA C4rrrrrr       22047         FCALL   __SMODL
0065EE B936           22051         MOV.W   R3,#06H
0065F0 9928B400       22052         MOV.W   R2,#0B400H
0065F4 8951           22053         MOV.W   R5,R1
0065F6 8940           22054         MOV.W   R4,R0
0065F8 C4rrrrrr       22055         FCALL   __SDIVL
0065FC 8960           22056         MOV.W   R6,R0
0065FE 8C6F04         22057         MOV.W   [R7+4],R6
                      22058 ; rs232cmd.c 5977                               samples = ( samples % 230630400L) % 439296L;
006601 8915           22060         MOV.W   R1,R5
006603 8904           22061         MOV.W   R0,R4
006605 B936           22062         MOV.W   R3,#06H
006607 9928B400       22063         MOV.W   R2,#0B400H
00660B C4rrrrrr       22064         FCALL   __SMODL
                      22066 ; rs232cmd.c 5978       
                      22067 ; rs232cmd.c 5979                               field = 2*frame;
00660F 8A27           22069         MOV.W   R2,[R7]
006611 D921           22070         ASL.W   R2,#01H
006613 8932           22074         MOV.W   R3,R2
                      22076 ; rs232cmd.c 5980       
                      22077 ; rs232cmd.c 5981                               if ( line > 262)
006615 99480106       22079         MOV.W   R4,#0106H
006619 99640106       22080         CMP.W   R6,#0106H
00661D FD08           22081         BLE     _1553
                      22082 ; rs232cmd.c 5982                               {
                      22083 ; rs232cmd.c 5983                                       field++;
00661F A921           22085         ADDS.W  R2,#01H
006621 8932           22086         MOV.W   R3,R2
                      22089 ; rs232cmd.c 5984                                       line = 524-line;
006623 9928020C       22091         MOV.W   R2,#020CH
006627 2926           22092         SUB.W   R2,R6
006629 8C2F04         22093         MOV.W   [R7+4],R2
                      22094 ; rs232cmd.c 5985                               }
00662C FE04           22096         BR      _1554
00662C FE04           22096         BR      _1554
00662E                22097 _1553:
                      22098 ; rs232cmd.c 5986                               else
                      22099 ; rs232cmd.c 5987                                       line = 262-line;
00662E 8C2704         22101         MOV.W   R2,[R7+4]
006631 2942           22102         SUB.W   R4,R2
006633 8C4F04         22103         MOV.W   [R7+4],R4
006633 8C4F04         22103         MOV.W   [R7+4],R4
006636                22104 _1554:
                      22105 ; rs232cmd.c 5988       
                      22106 ; rs232cmd.c 5989                               samples = 439296L - 1 - samples;
006636 B956           22108         MOV.W   R5,#06H
006638 9948B3FF       22109         MOV.W   R4,#0B3FFH
00663C 2940           22110         SUB.W   R4,R0
00663E 3951           22111         SUBB.W  R5,R1
                      22114 ; rs232cmd.c 5990                               field = 3 - field;
006640 B913           22116         MOV.W   R1,#03H
006642 2913           22117         SUB.W   R1,R3
006644 8901           22118         MOV.W   R0,R1
                      22121 ; rs232cmd.c 5991       
                      22122 ; rs232cmd.c 5992                               if ( field != 2)
006646 99140002       22124         CMP.W   R1,#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 360

ADDR   CODE            LINE SOURCELINE
00664A F332           22125         BEQ     _1562
                      22126 ; rs232cmd.c 5993                                       sign = '-';
00664C 9478022D       22128         MOV.B   [R7+2],#02DH
                      22131 ; rs232cmd.c 5994                       }
006650 FE2F           22133         BR      _1562
006650 FE2F           22133         BR      _1562
006652                22134 _1555:
                      22135 ; rs232cmd.c 5995                       else
                      22136 ; rs232cmd.c 5996                       {
                      22137 ; rs232cmd.c 5997                               frame = samples / 230630400L;
006652 99380DBF       22139         MOV.W   R3,#0DBFH
006656 99282400       22140         MOV.W   R2,#02400H
00665A 8915           22141         MOV.W   R1,R5
00665C 8904           22142         MOV.W   R0,R4
00665E C4rrrrrr       22143         FCALL   __SDIVL
006662 8A0F           22145         MOV.W   [R7],R0
                      22147 ; rs232cmd.c 5998                               line = ( samples % 230630400L) / 439296L;
006664 99380DBF       22149         MOV.W   R3,#0DBFH
006668 99282400       22150         MOV.W   R2,#02400H
00666C 8915           22151         MOV.W   R1,R5
00666E 8904           22152         MOV.W   R0,R4
006670 C4rrrrrr       22153         FCALL   __SMODL
006674 B936           22157         MOV.W   R3,#06H
006676 9928B400       22158         MOV.W   R2,#0B400H
00667A 8951           22159         MOV.W   R5,R1
00667C 8940           22160         MOV.W   R4,R0
00667E C4rrrrrr       22161         FCALL   __SDIVL
006682 8960           22162         MOV.W   R6,R0
006684 8C6F04         22163         MOV.W   [R7+4],R6
                      22164 ; rs232cmd.c 5999                               samples = ( samples % 230630400L) % 439296L;
006687 B936           22166         MOV.W   R3,#06H
006689 9928B400       22167         MOV.W   R2,#0B400H
00668D 8915           22168         MOV.W   R1,R5
00668F 8904           22169         MOV.W   R0,R4
006691 C4rrrrrr       22170         FCALL   __SMODL
006695 8951           22171         MOV.W   R5,R1
006697 8940           22172         MOV.W   R4,R0
                      22174 ; rs232cmd.c 6000                               field = 2*frame;
006699 8A17           22176         MOV.W   R1,[R7]
00669B D911           22177         ASL.W   R1,#01H
00669D 8901           22181         MOV.W   R0,R1
                      22183 ; rs232cmd.c 6001       
                      22184 ; rs232cmd.c 6002                               if ( line > 262)
00669F 99640106       22186         CMP.W   R6,#0106H
0066A3 FD06           22187         BLE     _1562
                      22188 ; rs232cmd.c 6003                               {
                      22189 ; rs232cmd.c 6004                                       field++;
0066A5 A911           22191         ADDS.W  R1,#01H
0066A7 8901           22192         MOV.W   R0,R1
                      22195 ; rs232cmd.c 6005                                       line -= 263;
0066A9 99620107       22197         SUB.W   R6,#0107H
0066AD 8C6F04         22198         MOV.W   [R7+4],R6
                      22199 ; rs232cmd.c 6006                               }
                      22200 ; rs232cmd.c 6007                       }
                      22201 ; rs232cmd.c 6008               }
0066B0                22203 _1562:
                      22204 ; rs232cmd.c 6009       
                      22205 ; rs232cmd.c 6010               rs232printf( 12, "%c%d,", sign, abs( field));
                      22207         CALL    _abs
0066B0 C4rrrrrr       +22207 ;       FCALL   _abs
0066B4 842702         22209         MOV.B   R1L,[R7+2]
0066B7 9039           22210         SEXT.B  R1H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 361

ADDR   CODE            LINE SOURCELINE
0066B9 0F01           22214         PUSH.W  R0
0066BB 8961           22216         MOV.W   R6,R1
0066BD 0F02           22217         PUSH.W  R1
0066BF 9918rrrr       22219         MOV.W   R1,#SEG( _1547 )
0066C3 9908rrrr       22220         MOV.W   R0,#SOF( _1547 )
0066C7 0F03           22221         PUSH.W  R0, R1
0066C9 9908000C       22223         MOV.W   R0,#0CH
                      22224         CALL    _rs232printf
0066CD C4rrrrrr       +22224 ;       FCALL   _rs232printf
0066D1 99700008       22225         ADD.W   R7,#08H
                      22227 ; rs232cmd.c 6011               rs232printf( 12, "%c%d,", sign, abs( line));
0066D5 8C0704         22229         MOV.W   R0,[R7+4]
                      22230         CALL    _abs
0066D8 C4rrrrrr       +22230 ;       FCALL   _abs
0066DC 0F01           22231         PUSH.W  R0
0066DE 8C6F02         22233         MOV.W   [R7+2],R6
0066E1 0F40           22234         PUSH.W  R6
0066E3 9918rrrr       22236         MOV.W   R1,#SEG( _1547 )
0066E7 9908rrrr       22237         MOV.W   R0,#SOF( _1547 )
0066EB 0F03           22238         PUSH.W  R0, R1
0066ED 9908000C       22240         MOV.W   R0,#0CH
                      22241         CALL    _rs232printf
0066F1 C4rrrrrr       +22241 ;       FCALL   _rs232printf
0066F5 99700008       22242         ADD.W   R7,#08H
                      22244 ; rs232cmd.c 6012               rs232printf( 12, "%c%.1f", sign, fabs((float) ( samples*1000L)/69
                            12L));
0066F9 8915           22246         MOV.W   R1,R5
0066FB 8904           22247         MOV.W   R0,R4
0066FD DD05           22248         ASL.D   R0,#05H
0066FF 2904           22249         SUB.W   R0,R4
006701 3915           22250         SUBB.W  R1,R5
006703 DD02           22251         ASL.D   R0,#02H
006705 0904           22252         ADD.W   R0,R4
006707 1915           22253         ADDC.W  R1,R5
006709 DD03           22254         ASL.D   R0,#03H
00670B C4rrrrrr       22255         FCALL   __L2SPF
00670F 993845D8       22256         MOV.W   R3,#045D8H
006713 B920           22257         MOV.W   R2,#00H
006715 C4rrrrrr       22258         FCALL   __DIV_SPF
006719 C4rrrrrr       22259         FCALL   __SPF2DPF
                      22260         CALL    _fabs
00671D C4rrrrrr       +22260 ;       FCALL   _fabs
006721 0F0F           22261         PUSH.W  R0, R1, R2, R3
006723 8C0708         22263         MOV.W   R0,[R7+8]
006726 0F01           22264         PUSH.W  R0
006728 9918rrrr       22266         MOV.W   R1,#SEG( _1548 )
00672C 9908rrrr       22267         MOV.W   R0,#SOF( _1548 )
006730 0F03           22268         PUSH.W  R0, R1
006732 9908000C       22270         MOV.W   R0,#0CH
                      22271         CALL    _rs232printf
006736 C4rrrrrr       +22271 ;       FCALL   _rs232printf
00673A 9970000E       22272         ADD.W   R7,#0EH
                      22274 ; rs232cmd.c 6013       }
00673E A976           22276         ADDS.W  R7,#06H
006740 2F70           22278         POP.W   R4, R5, R6
006742 D680           22280         RET
                      22283 ; rs232cmd.c 6014       
00000E                22286         RSEG    RS232CMD_INI_FA
00000E 2C25640A00     22287 _362:   DB      02CH,025H,064H,00AH,000H
                      22290         EXTRN   HDATA(_PresetPtr)
                      22292         EXTRN   HDATA(_CmdExecute)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 362

ADDR   CODE            LINE SOURCELINE
000013 256C752C256C75 22293 _1222:  DB      025H,06CH,075H,02CH,025H,06CH,075H,00AH,000H
       0A00                 
                      22296         EXTRN   HCODE(_ValidateDate)
                      22299         EXTRN   HCODE(_SetGenlockSystem)
                      22302         EXTRN   HCODE(_StorePreset)
                      22305         EXTRN   HCODE(_UpdateSTBRegister)
00001C 25733B00       22306 _983:   DB      025H,073H,03BH,000H
000020 25640A00       22307 _9:     DB      025H,064H,00AH,000H
                      22310         EXTRN   HCODE(_SetBBSystem)
000024 220A00         22311 _110:   DB      022H,00AH,000H
                      22314         EXTRN   HCODE(_SetBBDelay)
                      22317         EXTRN   HCODE(_strlen)
000027 25752C25752C25 22318 _1169:  DB      025H,075H,02CH,025H,075H,02CH,025H,075H,00AH,000H
       750A00               
                      22321         EXTRN   HCODE(_SetCBDelay)
000031 256325642C00   22322 _1547:  DB      025H,063H,025H,064H,02CH,000H
                      22325         EXTRN   HCODE(_SetBBScHPhase)
                      22326         EXTRN   HCODE(__UMODL)
                      22329         EXTRN   HCODE(_ResetErrorEventQueue)
                      22332         EXTRN   HCODE(_GenlockVersion)
                      22335         EXTRN   HCODE(_Cstrcmp)
                      22338         EXTRN   HCODE(_SetAudioTiming)
000037 25752C25752C25 22339 _1170:  DB      025H,075H,02CH,025H,075H,02CH,025H,075H,000H
       7500                 
                      22342         EXTRN   HCODE(_strncpy)
                      22344         EXTRN   HDATA(_AudioOutput)
                      22347         EXTRN   HCODE(_SetAudioWordClock)
                      22348         EXTRN   HCODE(__DIV_DPF)
000040 252E31662C00   22349 _781:   DB      025H,02EH,031H,066H,02CH,000H
                      22352         EXTRN   HCODE(_abs)
000046 25750A00       22353 _1009:  DB      025H,075H,00AH,000H
                      22356         EXTRN   HCODE(_ReadErrorEventQueue)
                      22361         EXTRN   HCODE(_TransmitIIC)
                      22364         EXTRN   HCODE(_SetAudioSystem)
                      22367         EXTRN   HCODE(_sio0SndCommand)
                      22370         EXTRN   HCODE(_strcmp)
                      22373         EXTRN   HCODE(_AudioStatus)
00004A 25752C25750A00 22374 _1296:  DB      025H,075H,02CH,025H,075H,00AH,000H
                      22377         EXTRN   HCODE(_sscanf)
000051 253033642C2530 22378 _1434:  DB      025H,030H,033H,064H,02CH,025H,030H,033H,064H,00AH,000H
       33640A00             
00005C 25752C257500   22379 _1297:  DB      025H,075H,02CH,025H,075H,000H
000062 256400         22380 _10:    DB      025H,064H,000H
000065 256600         22381 _898:   DB      025H,066H,000H
                      22382         EXTRN   HCODE(__MUL_SPF)
                      22385         EXTRN   HCODE(_SetCBSystem)
                      22387         EXTRN   HDATA(_CBSetup)
                      22389         EXTRN   HDATA(_BBSetup)
000068 256C00         22390 _221:   DB      025H,06CH,000H
                      22392         EXTRN   HDATA(_OperEnableReg)
00006B 475825643B00   22393 _312:   DB      047H,058H,025H,064H,03BH,000H
                      22394         EXTRN   HCODE(__SUBR_DPF)
000071 257300         22395 _982:   DB      025H,073H,000H
                      22398         EXTRN   HCODE(_GenlockInit)
                      22401         EXTRN   HDATA(_Cmd)
000074 4F4E00         22402 _956:   DB      04FH,04EH,000H
000077 257500         22403 _1185:  DB      025H,075H,000H
                      22406         EXTRN   HCODE(_SetAudioSignal)
                      22407         EXTRN   HCODE(__SPF2DPF)
                      22410         EXTRN   HCODE(_CBInit)
                      22413         EXTRN   HCODE(_strcpy)
00007A 252E31660A00   22414 _897:   DB      025H,02EH,031H,066H,00AH,000H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 363

ADDR   CODE            LINE SOURCELINE
                      22417         EXTRN   HCODE(_WriteCBChromaGain)
                      22420         EXTRN   HCODE(_fabs)
                      22422         EXTRN   HDATA(_ParCnt)
                      22425         EXTRN   HCODE(_NV_Recall)
                      22428         EXTRN   HCODE(_labs)
000080 4F464600       22429 _262:   DB      04FH,046H,046H,000H
                      22432         EXTRN   HCODE(_ReceiveIIC)
                      22435         EXTRN   HCODE(_SetAudioOutput)
                      22437         EXTRN   HDATA(_NumSuffix)
                      22440         EXTRN   HCODE(_rs232puts)
                      22442         EXTRN   HDATA(_CalibrationPtr)
                      22444         EXTRN   HDATA(_CmdRequest)
                      22446         EXTRN   HDATA(_ESRReg)
                      22448         EXTRN   HDATA(_STBReg)
                      22450         EXTRN   HDATA(_AudioSetup)
000084 256C752C256C75 22451 _1034:  DB      025H,06CH,075H,02CH,025H,06CH,075H,000H
       00                   
                      22457         EXTRN   HCODE(_ErrorTxt_Array)
                      22460         EXTRN   HCODE(_SetGenlockDelay)
                      22463         EXTRN   HCODE(_WriteCBGain)
00008C 25642C256400   22464 _1435:  DB      025H,064H,02CH,025H,064H,000H
000092 2563252E316600 22465 _1548:  DB      025H,063H,025H,02EH,031H,066H,000H
                      22467         EXTRN   HDATA(_BBControlPort)
000099 4847256C643B00 22468 _311:   DB      048H,047H,025H,06CH,064H,03BH,000H
                      22471         EXTRN   HCODE(_BBDefaults)
                      22473         EXTRN   HDATA(_SettingsPtr)
0000A0 474D3000       22474 _310:   DB      047H,04DH,030H,000H
                      22475         EXTRN   HCODE(__L2SPF)
                      22477         EXTRN   HDATA(_ESEReg)
                      22480         EXTRN   HCODE(_BBVersion)
0000A4 4F46460A00     22481 _955:   DB      04FH,046H,046H,00AH,000H
                      22484         EXTRN   HCODE(_BBInit)
                      22487         EXTRN   HCODE(_CBDefaults)
0000A9 25642C257300   22488 _981:   DB      025H,064H,02CH,025H,073H,000H
0000AF 475825753B00   22489 _330:   DB      047H,058H,025H,075H,03BH,000H
                      22491         EXTRN   HDATA(_GenlockSetup)
                      22494         EXTRN   HCODE(_SetCBEmbAudioSignal)
                      22497         EXTRN   HCODE(_rs232printf)
                      22499         EXTRN   HDATA(_Settings)
                      22502         EXTRN   HCODE(_sprintf)
                      22504         EXTRN   HDATA(_OperEventReg)
                      22505         EXTRN   HCODE(__CMP_SPF)
                      22506         EXTRN   HCODE(__DIV_SPF)
                      22508         EXTRN   HDATA(_SREReg)
                      22511         EXTRN   HCODE(_NV_Store)
                      22514         EXTRN   HCODE(_pld_version)
                      22517         EXTRN   HCODE(_RecallPreset)
                      22520         EXTRN   HCODE(_AudioInit)
                      22522         EXTRN   HDATA(_Calibration)
                      22525         EXTRN   HCODE(_BBSPGCommunication)
0000B5 25642C25642C25 22526 _184:   DB      025H,064H,02CH,025H,064H,02CH,025H,064H,000H
       6400                 
0000BE 25642C25642C25 22527 _295:   DB      025H,064H,02CH,025H,064H,02CH,025H,066H,000H
       6600                 
                      22528         EXTRN   HCODE(__ADD_DPF)
                      22529         EXTRN   HCODE(__SMODL)
                      22532         EXTRN   HCODE(_tcxo_status)
0000C7 25642C25377300 22533 _157:   DB      025H,064H,02CH,025H,037H,073H,000H
                      22535         EXTRN   HDATA(_QuestEnableReg)
                      22536         EXTRN   IDATA(__lc_bs)
                      22539         EXTRN   HCODE(_ResetInstrument)
                      22541         EXTRN   HDATA(_QuestConditionReg)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 364

ADDR   CODE            LINE SOURCELINE
                      22544         EXTRN   HCODE(_SetAudioClick)
0000CE 25387300       22545 _1075:  DB      025H,038H,073H,000H
                      22548         EXTRN   HCODE(_SetCBPattern)
                      22549         EXTRN   HCODE(__SDIVL)
0000D2 2533327300     22550 _1050:  DB      025H,033H,032H,073H,000H
                      22553         EXTRN   HCODE(_GenlockDefaults)
0000D7 25642C00       22554 _529:   DB      025H,064H,02CH,000H
                      22557         EXTRN   HCODE(_rs232putchar)
                      22558         EXTRN   HCODE(__DPF2L)
                      22559         EXTRN   HCODE(__CMP_DPF)
                      22561         EXTRN   HDATA(_OperConditionReg)
                      22564         EXTRN   HCODE(_AudioDefaults)
0000DB 25642C25642C25 22565 _183:   DB      025H,064H,02CH,025H,064H,02CH,025H,064H,00AH,000H
       640A00               
0000E5 25642C25313773 22566 _131:   DB      025H,064H,02CH,025H,031H,037H,073H,000H
       00                   
                      22568         EXTRN   HDATA(_SCPIError)
                      22569         EXTRN   HCODE(__UDIVL)
                      22572         EXTRN   HCODE(_ROMChecksum)
                      22575         EXTRN   HCODE(_WriteAnlAudioDACLevel)
0000ED 25642C2200     22576 _109:   DB      025H,064H,02CH,022H,000H
0000F2 4F4E0A00       22577 _954:   DB      04FH,04EH,00AH,000H
                      22580         EXTRN   HCODE(_SetAudioLevel)
0000F6 2C25642C00     22581 _417:   DB      02CH,025H,064H,02CH,000H
                      22582         EXTRN   HCODE(__DPF2S)
                      22585         EXTRN   HCODE(_sio0SndRequest)
                      22588         EXTRN   HCODE(_UpdateESRRegister)
                      22590         EXTRN   HDATA(_QuestEventReg)
                      22593         EXTRN   HCODE(_SetCBScHPhase)
                      22594         EXTRN   DATA(__lc_ub_xvwbuffer)
                      22595         EXTRN   DATA(__lc_ue_xvwbuffer)
                      22596         CALLS   'CLSCommand', 'ResetErrorEventQueue'
                      22597         CALLS   'ESECommand', 'rs232printf'
                      22598         CALLS   'ESECommand', 'sscanf'
                      22599         CALLS   'ESRCommand', 'UpdateESRRegister'
                      22600         CALLS   'ESRCommand', 'rs232printf'
                      22601         CALLS   'SRECommand', 'rs232printf'
                      22602         CALLS   'SRECommand', 'sscanf'
                      22603         CALLS   'STBCommand', 'UpdateSTBRegister'
                      22604         CALLS   'STBCommand', 'rs232printf'
                      22605         CALLS   'RSTCommand', 'ResetInstrument'
                      22606         CALLS   'IDNCommand', 'rs232puts'
                      22607         CALLS   'IDNCommand', 'rs232putchar'
                      22608         CALLS   'IDNCommand', 'rs232puts'
                      22609         CALLS   'IDNCommand', 'rs232putchar'
                      22610         CALLS   'IDNCommand', 'rs232puts'
                      22611         CALLS   'IDNCommand', 'rs232putchar'
                      22612         CALLS   'IDNCommand', 'rs232puts'
                      22613         CALLS   'IDNCommand', 'rs232putchar'
                      22614         CALLS   'RCLCommand', 'sscanf'
                      22615         CALLS   'RCLCommand', 'RecallPreset'
                      22616         CALLS   'SAVCommand', 'sscanf'
                      22617         CALLS   'SAVCommand', 'StorePreset'
                      22618         CALLS   'SystemError', 'ReadErrorEventQueue'
                      22619         CALLS   'SystemError', 'sprintf'
                      22620         CALLS   'SystemError', 'rs232puts'
                      22621         CALLS   'SystemError', 'rs232putchar'
                      22622         CALLS   'SystemError', 'rs232puts'
                      22623         CALLS   'SystemVersion', 'rs232putchar'
                      22624         CALLS   'SystemPresetName', 'sscanf'
                      22625         CALLS   'SystemPresetName', 'NV_Recall'
                      22626         CALLS   'SystemPresetName', 'rs232puts'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 365

ADDR   CODE            LINE SOURCELINE
                      22627         CALLS   'SystemPresetName', 'rs232putchar'
                      22628         CALLS   'SystemPresetName', 'sscanf'
                      22629         CALLS   'SystemPresetName', 'strlen'
                      22630         CALLS   'SystemPresetName', 'NV_Recall'
                      22631         CALLS   'SystemPresetName', 'strcpy'
                      22632         CALLS   'SystemPresetName', 'NV_Store'
                      22633         CALLS   'SystemPresetAuthor', 'sscanf'
                      22634         CALLS   'SystemPresetAuthor', 'NV_Recall'
                      22635         CALLS   'SystemPresetAuthor', 'rs232puts'
                      22636         CALLS   'SystemPresetAuthor', 'rs232putchar'
                      22637         CALLS   'SystemPresetAuthor', 'sscanf'
                      22638         CALLS   'SystemPresetAuthor', 'strlen'
                      22639         CALLS   'SystemPresetAuthor', 'NV_Recall'
                      22640         CALLS   'SystemPresetAuthor', 'strcpy'
                      22641         CALLS   'SystemPresetAuthor', 'NV_Store'
                      22642         CALLS   'SystemPresetDate', 'sscanf'
                      22643         CALLS   'SystemPresetDate', 'NV_Recall'
                      22644         CALLS   'SystemPresetDate', 'sprintf'
                      22645         CALLS   'SystemPresetDate', 'rs232puts'
                      22646         CALLS   'SystemPresetDate', 'sscanf'
                      22647         CALLS   'SystemPresetDate', 'ValidateDate'
                      22648         CALLS   'SystemPresetDate', 'NV_Recall'
                      22649         CALLS   'SystemPresetDate', 'NV_Store'
                      22650         CALLS   'StatusOperEvent', 'rs232printf'
                      22651         CALLS   'StatusOperCondition', 'rs232printf'
                      22652         CALLS   'StatusOperEnable', 'rs232printf'
                      22653         CALLS   'StatusOperEnable', 'sscanf'
                      22654         CALLS   'StatusQuestEvent', 'rs232printf'
                      22655         CALLS   'StatusQuestCondition', 'rs232printf'
                      22656         CALLS   'StatusQuestEnable', 'rs232printf'
                      22657         CALLS   'StatusQuestEnable', 'sscanf'
                      22658         CALLS   'StatusPreset', 'rs232putchar'
                      22659         CALLS   'StatusPreset', 'rs232puts'
                      22660         CALLS   'StatusPreset', 'rs232putchar'
                      22661         CALLS   'GenlockGen', 'rs232putchar'
                      22662         CALLS   'GenlockGen', 'PrintSamplesToFLT'
                      22663         CALLS   'GenlockGen', 'rs232putchar'
                      22664         CALLS   'GenlockGenSystem', 'rs232putchar'
                      22665         CALLS   'GenlockGenSystem', 'FindParameter'
                      22666         CALLS   'GenlockGenSystem', 'SetGenlockSystem'
                      22667         CALLS   'GenlockGenDelay', 'PrintSamplesToFLT'
                      22668         CALLS   'GenlockGenDelay', 'rs232putchar'
                      22669         CALLS   'GenlockGenDelay', 'sscanf'
                      22670         CALLS   'GenlockGenDelay', 'FLTToSamples'
                      22671         CALLS   'GenlockGenDelay', 'SetGenlockDelay'
                      22672         CALLS   'GenlockGenCalibrateEnable', 'rs232putchar'
                      22673         CALLS   'GenlockGenCalibrateEnable', 'FindParameter'
                      22674         CALLS   'GenlockGenCalibrateEnable', 'SetGenlockSystem'
                      22675         CALLS   'GenlockGenCalibrateEnable', 'SetBBSystem'
                      22676         CALLS   'GenlockGenCalibrateEnable', 'sio0SndCommand'
                      22677         CALLS   'GenlockGenCalibrateAdjust', 'FindParameter'
                      22678         CALLS   'GenlockGenCalibrateAdjust', 'sio0SndCommand'
                      22679         CALLS   'GenlockGenCalibrateAdjust', 'FindParameter'
                      22680         CALLS   'GenlockGenCalibrateAdjust', 'sio0SndCommand'
                      22681         CALLS   'GenlockGenCalibrateStore', 'NV_Store'
                      22682         CALLS   'BBGen', 'rs232putchar'
                      22683         CALLS   'BBGen', 'PrintSamplesToFLT'
                      22684         CALLS   'BBGen', 'rs232printf'
                      22685         CALLS   'BBGenSystem', 'rs232putchar'
                      22686         CALLS   'BBGenSystem', 'FindParameter'
                      22687         CALLS   'BBGenSystem', 'SetBBSystem'
                      22688         CALLS   'BBGenDelay', 'PrintSamplesToFLT'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 366

ADDR   CODE            LINE SOURCELINE
                      22689         CALLS   'BBGenDelay', 'rs232putchar'
                      22690         CALLS   'BBGenDelay', 'sscanf'
                      22691         CALLS   'BBGenDelay', 'FLTToSamples'
                      22692         CALLS   'BBGenDelay', 'SetBBDelay'
                      22693         CALLS   'BBGenScHPhase', 'rs232printf'
                      22694         CALLS   'BBGenScHPhase', 'sscanf'
                      22695         CALLS   'BBGenScHPhase', 'SetBBScHPhase'
                      22696         CALLS   'CBGen', 'rs232putchar'
                      22697         CALLS   'CBGen', 'PrintSamplesToFLT'
                      22698         CALLS   'CBGen', 'rs232printf'
                      22699         CALLS   'CBGen', 'rs232putchar'
                      22700         CALLS   'CBGenPattern', 'rs232putchar'
                      22701         CALLS   'CBGenPattern', 'FindParameter'
                      22702         CALLS   'CBGenPattern', 'SetCBPattern'
                      22703         CALLS   'CBGenSystem', 'rs232putchar'
                      22704         CALLS   'CBGenSystem', 'FindParameter'
                      22705         CALLS   'CBGenSystem', 'SetCBSystem'
                      22706         CALLS   'CBGenDelay', 'PrintSamplesToFLT'
                      22707         CALLS   'CBGenDelay', 'rs232putchar'
                      22708         CALLS   'CBGenDelay', 'sscanf'
                      22709         CALLS   'CBGenDelay', 'FLTToSamples'
                      22710         CALLS   'CBGenDelay', 'SetCBDelay'
                      22711         CALLS   'CBGenScHPhase', 'rs232printf'
                      22712         CALLS   'CBGenScHPhase', 'sscanf'
                      22713         CALLS   'CBGenScHPhase', 'SetCBScHPhase'
                      22714         CALLS   'CBGenEmbAudioSignal', 'rs232putchar'
                      22715         CALLS   'CBGenEmbAudioSignal', 'FindParameter'
                      22716         CALLS   'CBGenEmbAudioSignal', 'SetCBEmbAudioSignal'
                      22717         CALLS   'AudioGenOutput', 'rs232putchar'
                      22718         CALLS   'AudioGenOutput', 'FindParameter'
                      22719         CALLS   'AudioGenOutput', 'SetAudioOutput'
                      22720         CALLS   'AudioGenAnalog', 'rs232putchar'
                      22721         CALLS   'AudioGenAnalog', 'rs232printf'
                      22722         CALLS   'AudioGenAnalogSignal', 'rs232putchar'
                      22723         CALLS   'AudioGenAnalogSignal', 'FindParameter'
                      22724         CALLS   'AudioGenAnalogSignal', 'SetAudioSignal'
                      22725         CALLS   'AudioGenAnalogLevel', 'rs232putchar'
                      22726         CALLS   'AudioGenAnalogLevel', 'rs232printf'
                      22727         CALLS   'AudioGenAnalogLevel', 'FindParameter'
                      22728         CALLS   'AudioGenAnalogLevel', 'sscanf'
                      22729         CALLS   'AudioGenAnalogLevel', 'SetAudioLevel'
                      22730         CALLS   'AudioGenAnalogClick', 'rs232printf'
                      22731         CALLS   'AudioGenAnalogClick', 'sscanf'
                      22732         CALLS   'AudioGenAnalogClick', 'SetAudioClick'
                      22733         CALLS   'AudioGenAESEBU', 'rs232putchar'
                      22734         CALLS   'AudioGenAESEBU', 'rs232printf'
                      22735         CALLS   'AudioGenAESEBU', 'rs232putchar'
                      22736         CALLS   'AudioGenAESEBU', 'rs232printf'
                      22737         CALLS   'AudioGenAESEBUSystem', 'rs232putchar'
                      22738         CALLS   'AudioGenAESEBUSystem', 'FindParameter'
                      22739         CALLS   'AudioGenAESEBUSystem', 'SetAudioSystem'
                      22740         CALLS   'AudioGenAESEBUSignal', 'rs232putchar'
                      22741         CALLS   'AudioGenAESEBUSignal', 'FindParameter'
                      22742         CALLS   'AudioGenAESEBUSignal', 'SetAudioSignal'
                      22743         CALLS   'AudioGenAESEBULevel', 'rs232putchar'
                      22744         CALLS   'AudioGenAESEBULevel', 'rs232printf'
                      22745         CALLS   'AudioGenAESEBULevel', 'FindParameter'
                      22746         CALLS   'AudioGenAESEBULevel', 'sscanf'
                      22747         CALLS   'AudioGenAESEBULevel', 'SetAudioLevel'
                      22748         CALLS   'AudioGenAESEBUTiming', 'rs232printf'
                      22749         CALLS   'AudioGenAESEBUTiming', 'sscanf'
                      22750         CALLS   'AudioGenAESEBUTiming', 'SetAudioTiming'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 367

ADDR   CODE            LINE SOURCELINE
                      22751         CALLS   'AudioGenAESEBUWordClock', 'rs232putchar'
                      22752         CALLS   'AudioGenAESEBUWordClock', 'FindParameter'
                      22753         CALLS   'AudioGenAESEBUWordClock', 'SetAudioWordClock'
                      22754         CALLS   'AudioGenAESEBUClick', 'rs232printf'
                      22755         CALLS   'AudioGenAESEBUClick', 'sscanf'
                      22756         CALLS   'AudioGenAESEBUClick', 'SetAudioClick'
                      22757         CALLS   'FactPassword', 'rs232puts'
                      22758         CALLS   'FactPassword', 'strcmp'
                      22759         CALLS   'FactPassword', 'Cstrcmp'
                      22760         CALLS   'FactReset', 'GenlockDefaults'
                      22761         CALLS   'FactReset', 'GenlockInit'
                      22762         CALLS   'FactReset', 'BBDefaults'
                      22763         CALLS   'FactReset', 'BBInit'
                      22764         CALLS   'FactReset', 'CBDefaults'
                      22765         CALLS   'FactReset', 'CBInit'
                      22766         CALLS   'FactReset', 'AudioDefaults'
                      22767         CALLS   'FactReset', 'AudioInit'
                      22768         CALLS   'FactReset', 'StorePreset'
                      22769         CALLS   'FactReset', 'NV_Store'
                      22770         CALLS   'FactV24Command', 'sscanf'
                      22771         CALLS   'FactV24Command', 'sio0SndRequest'
                      22772         CALLS   'FactV24Command', 'rs232puts'
                      22773         CALLS   'FactV24Command', 'sio0SndCommand'
                      22774         CALLS   'FactV24Transparent', 'FindParameter'
                      22775         CALLS   'FactV24Transparent', 'BBSPGCommunication'
                      22776         CALLS   'FactChecksumCode', 'ROMChecksum'
                      22777         CALLS   'FactChecksumCode', 'sprintf'
                      22778         CALLS   'FactChecksumCode', 'rs232puts'
                      22779         CALLS   'FactChecksumPLD', 'ROMChecksum'
                      22780         CALLS   'FactChecksumPLD', 'sprintf'
                      22781         CALLS   'FactChecksumPLD', 'rs232puts'
                      22782         CALLS   'FactChecksumEmbAudio', 'ROMChecksum'
                      22783         CALLS   'FactChecksumEmbAudio', 'sprintf'
                      22784         CALLS   'FactChecksumEmbAudio', 'rs232puts'
                      22785         CALLS   'FactChecksumPattern', 'ROMChecksum'
                      22786         CALLS   'FactChecksumPattern', 'sprintf'
                      22787         CALLS   'FactChecksumPattern', 'rs232puts'
                      22788         CALLS   'FactChecksumRange', 'sscanf'
                      22789         CALLS   'FactChecksumRange', 'ROMChecksum'
                      22790         CALLS   'FactChecksumRange', 'sprintf'
                      22791         CALLS   'FactChecksumRange', 'rs232puts'
                      22792         CALLS   'FactMainVersion', 'sprintf'
                      22793         CALLS   'FactMainVersion', 'rs232puts'
                      22794         CALLS   'FactMainIDNCompany', 'rs232puts'
                      22795         CALLS   'FactMainIDNCompany', 'rs232putchar'
                      22796         CALLS   'FactMainIDNCompany', 'sscanf'
                      22797         CALLS   'FactMainIDNCompany', 'strncpy'
                      22798         CALLS   'FactMainIDNCompany', 'NV_Store'
                      22799         CALLS   'FactMainIDNType', 'rs232puts'
                      22800         CALLS   'FactMainIDNType', 'rs232putchar'
                      22801         CALLS   'FactMainIDNType', 'sscanf'
                      22802         CALLS   'FactMainIDNType', 'strncpy'
                      22803         CALLS   'FactMainIDNType', 'NV_Store'
                      22804         CALLS   'FactMainIDNKUNumber', 'rs232puts'
                      22805         CALLS   'FactMainIDNKUNumber', 'rs232putchar'
                      22806         CALLS   'FactMainIDNKUNumber', 'sscanf'
                      22807         CALLS   'FactMainIDNKUNumber', 'strncpy'
                      22808         CALLS   'FactMainIDNKUNumber', 'NV_Store'
                      22809         CALLS   'FactMainIDNSWRevision', 'rs232puts'
                      22810         CALLS   'FactMainIDNSWRevision', 'rs232putchar'
                      22811         CALLS   'FactMainIDNSWRevision', 'sscanf'
                      22812         CALLS   'FactMainIDNSWRevision', 'strncpy'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 368

ADDR   CODE            LINE SOURCELINE
                      22813         CALLS   'FactMainIDNSWRevision', 'NV_Store'
                      22814         CALLS   'FactMainSystem', 'rs232putchar'
                      22815         CALLS   'FactMainSystem', 'FindParameter'
                      22816         CALLS   'FactMainSystem', 'NV_Store'
                      22817         CALLS   'FactMainFMSDateProd', 'sprintf'
                      22818         CALLS   'FactMainFMSDateProd', 'rs232puts'
                      22819         CALLS   'FactMainFMSDateProd', 'sscanf'
                      22820         CALLS   'FactMainFMSDateProd', 'ValidateDate'
                      22821         CALLS   'FactMainFMSDateProd', 'NV_Store'
                      22822         CALLS   'FactMainFMSDateUpd', 'sprintf'
                      22823         CALLS   'FactMainFMSDateUpd', 'rs232puts'
                      22824         CALLS   'FactMainFMSDateUpd', 'sscanf'
                      22825         CALLS   'FactMainFMSDateUpd', 'ValidateDate'
                      22826         CALLS   'FactMainFMSDateUpd', 'NV_Store'
                      22827         CALLS   'FactGenlockGenDate', 'sprintf'
                      22828         CALLS   'FactGenlockGenDate', 'rs232puts'
                      22829         CALLS   'FactGenlockGenDate', 'sscanf'
                      22830         CALLS   'FactGenlockGenDate', 'ValidateDate'
                      22831         CALLS   'FactGenlockGenDate', 'NV_Store'
                      22832         CALLS   'FactGenlockGenVersion', 'GenlockVersion'
                      22833         CALLS   'FactGenlockGenVersion', 'rs232puts'
                      22834         CALLS   'FactGenlockGenVersion', 'rs232putchar'
                      22835         CALLS   'FactGenlockGenFRefDate', 'sprintf'
                      22836         CALLS   'FactGenlockGenFRefDate', 'rs232puts'
                      22837         CALLS   'FactGenlockGenFRefDate', 'sscanf'
                      22838         CALLS   'FactGenlockGenFRefDate', 'ValidateDate'
                      22839         CALLS   'FactGenlockGenFRefDate', 'NV_Store'
                      22840         CALLS   'FactGenlockGenFRefDAC', 'sprintf'
                      22841         CALLS   'FactGenlockGenFRefDAC', 'rs232puts'
                      22842         CALLS   'FactGenlockGenFRefDAC', 'sscanf'
                      22843         CALLS   'FactGenlockGenFRefDAC', 'NV_Store'
                      22844         CALLS   'FactGenlockGenURefDate', 'sprintf'
                      22845         CALLS   'FactGenlockGenURefDate', 'rs232puts'
                      22846         CALLS   'FactGenlockGenURefDate', 'sscanf'
                      22847         CALLS   'FactGenlockGenURefDate', 'ValidateDate'
                      22848         CALLS   'FactGenlockGenURefDate', 'NV_Store'
                      22849         CALLS   'FactGenlockGenURefDAC', 'sprintf'
                      22850         CALLS   'FactGenlockGenURefDAC', 'rs232puts'
                      22851         CALLS   'FactGenlockGenURefDAC', 'sscanf'
                      22852         CALLS   'FactGenlockGenURefDAC', 'NV_Store'
                      22853         CALLS   'FactGenlockGenHPHZero', 'sprintf'
                      22854         CALLS   'FactGenlockGenHPHZero', 'rs232puts'
                      22855         CALLS   'FactGenlockGenHPHZero', 'sscanf'
                      22856         CALLS   'FactGenlockGenHPHZero', 'NV_Store'
                      22857         CALLS   'FactGenlockGenPhase', 'sprintf'
                      22858         CALLS   'FactGenlockGenPhase', 'rs232puts'
                      22859         CALLS   'FactGenlockGenPhase', 'sscanf'
                      22860         CALLS   'FactGenlockGenPhase', 'NV_Store'
                      22861         CALLS   'FactBBGenDate', 'sprintf'
                      22862         CALLS   'FactBBGenDate', 'rs232puts'
                      22863         CALLS   'FactBBGenDate', 'sscanf'
                      22864         CALLS   'FactBBGenDate', 'ValidateDate'
                      22865         CALLS   'FactBBGenDate', 'NV_Store'
                      22866         CALLS   'FactBBGenVersion', 'BBVersion'
                      22867         CALLS   'FactBBGenVersion', 'rs232puts'
                      22868         CALLS   'FactBBGenVersion', 'rs232putchar'
                      22869         CALLS   'FactBBGenSignal', 'FindParameter'
                      22870         CALLS   'FactBBGenPhase', 'sprintf'
                      22871         CALLS   'FactBBGenPhase', 'rs232puts'
                      22872         CALLS   'FactBBGenPhase', 'sscanf'
                      22873         CALLS   'FactBBGenPhase', 'NV_Store'
                      22874         CALLS   'FactBBGenScHPhase', 'sprintf'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 369

ADDR   CODE            LINE SOURCELINE
                      22875         CALLS   'FactBBGenScHPhase', 'rs232puts'
                      22876         CALLS   'FactBBGenScHPhase', 'sscanf'
                      22877         CALLS   'FactBBGenScHPhase', 'NV_Store'
                      22878         CALLS   'FactBBGenDAC', 'sprintf'
                      22879         CALLS   'FactBBGenDAC', 'rs232puts'
                      22880         CALLS   'FactBBGenDAC', 'sscanf'
                      22881         CALLS   'FactBBGenDAC', 'NV_Store'
                      22882         CALLS   'FactCBGenDate', 'sprintf'
                      22883         CALLS   'FactCBGenDate', 'rs232puts'
                      22884         CALLS   'FactCBGenDate', 'sscanf'
                      22885         CALLS   'FactCBGenDate', 'ValidateDate'
                      22886         CALLS   'FactCBGenDate', 'NV_Store'
                      22887         CALLS   'FactCBGenAGain', 'sprintf'
                      22888         CALLS   'FactCBGenAGain', 'rs232puts'
                      22889         CALLS   'FactCBGenAGain', 'sscanf'
                      22890         CALLS   'FactCBGenAGain', 'NV_Store'
                      22891         CALLS   'FactCBGenAGain', 'WriteCBGain'
                      22892         CALLS   'FactCBGenCGain', 'sprintf'
                      22893         CALLS   'FactCBGenCGain', 'rs232puts'
                      22894         CALLS   'FactCBGenCGain', 'sscanf'
                      22895         CALLS   'FactCBGenCGain', 'NV_Store'
                      22896         CALLS   'FactCBGenCGain', 'WriteCBChromaGain'
                      22897         CALLS   'FactCBGenPhase', 'sprintf'
                      22898         CALLS   'FactCBGenPhase', 'rs232puts'
                      22899         CALLS   'FactCBGenPhase', 'sscanf'
                      22900         CALLS   'FactCBGenPhase', 'NV_Store'
                      22901         CALLS   'FactCBGenPhase', 'SetCBDelay'
                      22902         CALLS   'FactCBGenScHPhase', 'sprintf'
                      22903         CALLS   'FactCBGenScHPhase', 'rs232puts'
                      22904         CALLS   'FactCBGenScHPhase', 'sscanf'
                      22905         CALLS   'FactCBGenScHPhase', 'NV_Store'
                      22906         CALLS   'FactCBGenScHPhase', 'SetCBScHPhase'
                      22907         CALLS   'FactAudioGenStatus', 'AudioStatus'
                      22908         CALLS   'FactAudioGenStatus', 'sprintf'
                      22909         CALLS   'FactAudioGenStatus', 'rs232puts'
                      22910         CALLS   'FactAudioGenDate', 'sprintf'
                      22911         CALLS   'FactAudioGenDate', 'rs232puts'
                      22912         CALLS   'FactAudioGenDate', 'sscanf'
                      22913         CALLS   'FactAudioGenDate', 'ValidateDate'
                      22914         CALLS   'FactAudioGenDate', 'NV_Store'
                      22915         CALLS   'FactAudioGenLevel', 'sprintf'
                      22916         CALLS   'FactAudioGenLevel', 'rs232puts'
                      22917         CALLS   'FactAudioGenLevel', 'sscanf'
                      22918         CALLS   'FactAudioGenLevel', 'NV_Store'
                      22919         CALLS   'FactAudioGenLevel', 'WriteAnlAudioDACLevel'
                      22920         CALLS   'FactPLDVersion', 'pld_version'
                      22921         CALLS   'FactPLDVersion', 'sprintf'
                      22922         CALLS   'FactPLDVersion', 'rs232puts'
                      22923         CALLS   'FactTCXOStatus', 'tcxo_status'
                      22924         CALLS   'FactTCXOStatus', 'sprintf'
                      22925         CALLS   'FactTCXOStatus', 'rs232puts'
                      22926         CALLS   'FactMultiMediaChip', 'sscanf'
                      22927         CALLS   'FactMultiMediaChip', 'TransmitIIC'
                      22928         CALLS   'FactMultiMediaChip', 'ReceiveIIC'
                      22929         CALLS   'FactMultiMediaChip', 'rs232printf'
                      22930         CALLS   'FactMultiMediaChip', 'sscanf'
                      22931         CALLS   'FactMultiMediaChip', 'TransmitIIC'
                      22932         CALLS   'FactMultiMediaChip', 'ReceiveIIC'
                      22933         CALLS   'FactMultiMediaChip', 'rs232printf'
                      22934         CALLS   'FindParameter', 'Cstrcmp'
                      22935         CALLS   'FLTToSamples', 'labs'
                      22936         CALLS   'FLTToSamples', 'abs'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 370

ADDR   CODE            LINE SOURCELINE
                      22937         CALLS   'FLTToSamples', 'labs'
                      22938         CALLS   'FLTToSamples', 'abs'
                      22939         CALLS   'PrintSamplesToFLT', 'abs'
                      22940         CALLS   'PrintSamplesToFLT', 'rs232printf'
                      22941         CALLS   'PrintSamplesToFLT', 'abs'
                      22942         CALLS   'PrintSamplesToFLT', 'rs232printf'
                      22943         CALLS   'PrintSamplesToFLT', 'fabs'
                      22944         CALLS   'PrintSamplesToFLT', 'rs232printf'
