XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\Master\Source\MAKE\work\temp\xa\rs232cmd.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -I..\..\rtxcdef\xa
                          3 ;          -I..\..\rtxc\xa\include -I..\..\code\include\1_0 -I..\..\app_spec\xa
                          4 ;          -Ml -O2 -s
                          6 $NOZPAGE
                          7         NAME    RS232CMD
                         11 ; rs232cmd.c    1       /* MODULE:                                                               
                               */
                         12 ; rs232cmd.c    2       /*   r232cmd.c - RS232 remote commands.                                  
                                             */
                         13 ; rs232cmd.c    3       /************************************************************************
                            ****/
                         14 ; rs232cmd.c    4       /* FUNCTIONS:                                                            
                               */
                         15 ; rs232cmd.c    5       /*                                                                       
                               */
                         16 ; rs232cmd.c    6       /* TASKS:                                                                
                               */
                         17 ; rs232cmd.c    7       /*                                                                       
                               */
                         18 ; rs232cmd.c    8       /* NOTES:                                                                
                               */
                         19 ; rs232cmd.c    9       /*                                                                       
                               */
                         20 ; rs232cmd.c   10       /************************************************************************
                            ****/
                         21 ; rs232cmd.c   11       /*
                         22 ; rs232cmd.c   12        *   PTV software for PT5201
                         23 ; rs232cmd.c   13        *   Copyright (c) 
                         24 ; rs232cmd.c   14        *   ProTeleVision Technologies A/S.
                         25 ; rs232cmd.c   15        *   ALL RIGHTS RESERVED
                         26 ; rs232cmd.c   16       */
                         27 ; rs232cmd.c   17       /************************************************************************
                            ****/
                         28 ; rs232cmd.c   18       
                         29 ; rs232cmd.c   19       /************************************************************************
                            ****/
                         30 ; rs232cmd.c   20       /* Include files:                                                        
                                                                                                                             
                                     */
                         31 ; rs232cmd.c   21       
                         32 ; rs232cmd.c   22       #include <string.h>
                         36 ; rs232cmd.c   23       #include <ctype.h>
                         39 ; rs232cmd.c   24       #include <stdio.h>
                         59 ; rs232cmd.c   25       #include <stdlib.h>
                         73 ; rs232cmd.c   26       #include <math.h>
                         76 ; rs232cmd.c   27       
                         77 ; rs232cmd.c   28       #include "config.h"
                         80 ; rs232cmd.c   29       #include "define.h"
                         83 ; rs232cmd.c   30       #include "rtxcobj.h"
                        408 ; rs232cmd.c   31       #include "rs232par.h"
                        411 ; rs232cmd.c   32       #include "rs232err.h"
                        414 ; rs232cmd.c   33       #include "rs232cmd.h"
                        419 ; rs232cmd.c   34       #include "util.h"
                        422 ; rs232cmd.c   35       #include "rs232.h"
                        429 ; rs232cmd.c   36       #include "i2c_drv.h"
                        432 ; rs232cmd.c   37       #include "sio0drv.h"
                        439 ; rs232cmd.c   38       #include "instru.h"
                        542 ; rs232cmd.c   39       #include "tables.h"
                        545 ; rs232cmd.c   40       #include "genlock.h"
                        548 ; rs232cmd.c   41       #include "bb.h"
                        551 ; rs232cmd.c   42       #include "cbar.h"
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                        554 ; rs232cmd.c   43       #include "audio.h"
                        557 ; rs232cmd.c   44       #include "plddrv.h"
                        560 ; rs232cmd.c   45       #include "unitprg.h"
                        567 ; rs232cmd.c   46       
                        568 ; rs232cmd.c   47       
                        569 ; rs232cmd.c   48       UC code MasterSWVersion                                 = 22;
000000                  570 RS232CMD_RO     SEGMENT HCODE ROMDATA
000000                  571         RSEG    RS232CMD_RO
                        574         PUBLIC  _MasterSWVersion
000000                  575 _MasterSWVersion:
                        576 ; rs232cmd.c   49       
                        577 ; rs232cmd.c   50       char code SystemVersionTxt[]                    = "1995.0";
000000 16               578         DB      016H
                        582         PUBLIC  _SystemVersionTxt
000001                  583 _SystemVersionTxt:
                        584 ; rs232cmd.c   51       char code PasswordText[]                                = "PASS5201";
000001 313939352E3000   585         DB      031H,039H,039H,035H,02EH,030H,000H
                        588         PUBLIC  _PasswordText
000008                  589 _PasswordText:
                        590 ; rs232cmd.c   52       
                        591 ; rs232cmd.c   53       char code CLSCmdTxt[]                   = "CLS";
000008 50415353353230   592         DB      050H,041H,053H,053H,035H,032H,030H,031H,000H
       3100                 
                        595         PUBLIC  _CLSCmdTxt
000011                  596 _CLSCmdTxt:
                        597 ; rs232cmd.c   54       char code ESECmdTxt[]                   = "ESE";
000011 434C5300         598         DB      043H,04CH,053H,000H
                        601         PUBLIC  _ESECmdTxt
000015                  602 _ESECmdTxt:
                        603 ; rs232cmd.c   55       char code ESRCmdTxt[]                   = "ESR";
000015 45534500         604         DB      045H,053H,045H,000H
                        607         PUBLIC  _ESRCmdTxt
000019                  608 _ESRCmdTxt:
                        609 ; rs232cmd.c   56       char code OPCCmdTxt[]                   = "OPC";
000019 45535200         610         DB      045H,053H,052H,000H
                        613         PUBLIC  _OPCCmdTxt
00001D                  614 _OPCCmdTxt:
                        615 ; rs232cmd.c   57       char code SRECmdTxt[]                   = "SRE";
00001D 4F504300         616         DB      04FH,050H,043H,000H
                        619         PUBLIC  _SRECmdTxt
000021                  620 _SRECmdTxt:
                        621 ; rs232cmd.c   58       char code STBCmdTxt[]                   = "STB";
000021 53524500         622         DB      053H,052H,045H,000H
                        625         PUBLIC  _STBCmdTxt
000025                  626 _STBCmdTxt:
                        627 ; rs232cmd.c   59       char code TSTCmdTxt[]                   = "TST";
000025 53544200         628         DB      053H,054H,042H,000H
                        631         PUBLIC  _TSTCmdTxt
000029                  632 _TSTCmdTxt:
                        633 ; rs232cmd.c   60       char code WAICmdTxt[]                   = "WAI";
000029 54535400         634         DB      054H,053H,054H,000H
                        637         PUBLIC  _WAICmdTxt
00002D                  638 _WAICmdTxt:
                        639 ; rs232cmd.c   61       char code RSTCmdTxt[]                   = "RST";
00002D 57414900         640         DB      057H,041H,049H,000H
                        643         PUBLIC  _RSTCmdTxt
000031                  644 _RSTCmdTxt:
                        645 ; rs232cmd.c   62       char code IDNCmdTxt[]                   = "IDN";
000031 52535400         646         DB      052H,053H,054H,000H
                        649         PUBLIC  _IDNCmdTxt
000035                  650 _IDNCmdTxt:
                        651 ; rs232cmd.c   63       char code RCLCmdTxt[]                   = "RCL";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
000035 49444E00         652         DB      049H,044H,04EH,000H
                        655         PUBLIC  _RCLCmdTxt
000039                  656 _RCLCmdTxt:
                        657 ; rs232cmd.c   64       char code SAVCmdTxt[]                   = "SAV";
000039 52434C00         658         DB      052H,043H,04CH,000H
                        661         PUBLIC  _SAVCmdTxt
00003D                  662 _SAVCmdTxt:
                        663 ; rs232cmd.c   65       
                        664 ; rs232cmd.c   66       char code SYSTEMCmdTxt[]                        = "SYSTEM";
00003D 53415600         665         DB      053H,041H,056H,000H
                        668         PUBLIC  _SYSTEMCmdTxt
000041                  669 _SYSTEMCmdTxt:
                        670 ; rs232cmd.c   67       char code SYSTCmdTxt[]                          = "SYST";
000041 53595354454D00   671         DB      053H,059H,053H,054H,045H,04DH,000H
                        674         PUBLIC  _SYSTCmdTxt
000048                  675 _SYSTCmdTxt:
                        676 ; rs232cmd.c   68       char code STATUSCmdTxt[]                                = "STATUS";
000048 5359535400       677         DB      053H,059H,053H,054H,000H
                        680         PUBLIC  _STATUSCmdTxt
00004D                  681 _STATUSCmdTxt:
                        682 ; rs232cmd.c   69       char code STATCmdTxt[]                                  = "STAT";
00004D 53544154555300   683         DB      053H,054H,041H,054H,055H,053H,000H
                        686         PUBLIC  _STATCmdTxt
000054                  687 _STATCmdTxt:
                        688 ; rs232cmd.c   70       char code DIAGNOSTICCmdTxt[]                    = "DIAGNOSTIC";
000054 5354415400       689         DB      053H,054H,041H,054H,000H
                        692         PUBLIC  _DIAGNOSTICCmdTxt
000059                  693 _DIAGNOSTICCmdTxt:
                        694 ; rs232cmd.c   71       char code DIAGCmdTxt[]                          = "DIAG";
000059 444941474E4F53   695         DB      044H,049H,041H,047H,04EH,04FH,053H,054H,049H,043H,000H
       54494300             
                        698         PUBLIC  _DIAGCmdTxt
000064                  699 _DIAGCmdTxt:
                        700 ; rs232cmd.c   72       char code MONITORCmdTxt[]                               = "MONITOR";
000064 4449414700       701         DB      044H,049H,041H,047H,000H
                        704         PUBLIC  _MONITORCmdTxt
000069                  705 _MONITORCmdTxt:
                        706 ; rs232cmd.c   73       char code MONCmdTxt[]                           = "MON";
000069 4D4F4E49544F52   707         DB      04DH,04FH,04EH,049H,054H,04FH,052H,000H
       00                   
                        710         PUBLIC  _MONCmdTxt
000071                  711 _MONCmdTxt:
                        712 ; rs232cmd.c   74       char code INPUTCmdTxt[]                                 = "INPUT";
000071 4D4F4E00         713         DB      04DH,04FH,04EH,000H
                        716         PUBLIC  _INPUTCmdTxt
000075                  717 _INPUTCmdTxt:
                        718 ; rs232cmd.c   75       char code INPCmdTxt[]                                   = "INP";
000075 494E50555400     719         DB      049H,04EH,050H,055H,054H,000H
                        722         PUBLIC  _INPCmdTxt
00007B                  723 _INPCmdTxt:
                        724 ; rs232cmd.c   76       char code OUTPUTCmdTxt[]                                = "OUTPUT";
00007B 494E5000         725         DB      049H,04EH,050H,000H
                        728         PUBLIC  _OUTPUTCmdTxt
00007F                  729 _OUTPUTCmdTxt:
                        730 ; rs232cmd.c   77       char code OUTPCmdTxt[]                                  = "OUTP";
00007F 4F555450555400   731         DB      04FH,055H,054H,050H,055H,054H,000H
                        734         PUBLIC  _OUTPCmdTxt
000086                  735 _OUTPCmdTxt:
                        736 ; rs232cmd.c   78       char code USERCmdTxt[]                                  = "USER";
000086 4F55545000       737         DB      04FH,055H,054H,050H,000H
                        740         PUBLIC  _USERCmdTxt
00008B                  741 _USERCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
                        742 ; rs232cmd.c   79       char code MEASURECmdTxt[]                               = "MEASURE";
00008B 5553455200       743         DB      055H,053H,045H,052H,000H
                        746         PUBLIC  _MEASURECmdTxt
000090                  747 _MEASURECmdTxt:
                        748 ; rs232cmd.c   80       char code MEASCmdTxt[]                          = "MEAS";
000090 4D454153555245   749         DB      04DH,045H,041H,053H,055H,052H,045H,000H
       00                   
                        752         PUBLIC  _MEASCmdTxt
000098                  753 _MEASCmdTxt:
                        754 ; rs232cmd.c   81       char code FACTORYCmdTxt[]                               = "FACTORY";
000098 4D45415300       755         DB      04DH,045H,041H,053H,000H
                        758         PUBLIC  _FACTORYCmdTxt
00009D                  759 _FACTORYCmdTxt:
                        760 ; rs232cmd.c   82       char code FACTCmdTxt[]                          = "FACT";
00009D 464143544F5259   761         DB      046H,041H,043H,054H,04FH,052H,059H,000H
       00                   
                        764         PUBLIC  _FACTCmdTxt
0000A5                  765 _FACTCmdTxt:
                        766 ; rs232cmd.c   83       
                        767 ; rs232cmd.c   84       char code ERRORCmdTxt[]                         = "ERROR";
0000A5 4641435400       768         DB      046H,041H,043H,054H,000H
                        771         PUBLIC  _ERRORCmdTxt
0000AA                  772 _ERRORCmdTxt:
                        773 ; rs232cmd.c   85       char code ERRCmdTxt[]                           = "ERR";
0000AA 4552524F5200     774         DB      045H,052H,052H,04FH,052H,000H
                        777         PUBLIC  _ERRCmdTxt
0000B0                  778 _ERRCmdTxt:
                        779 ; rs232cmd.c   86       char code VERSIONCmdTxt[]                       = "VERSION";
0000B0 45525200         780         DB      045H,052H,052H,000H
                        783         PUBLIC  _VERSIONCmdTxt
0000B4                  784 _VERSIONCmdTxt:
                        785 ; rs232cmd.c   87       char code VERSCmdTxt[]                  = "VERS";
0000B4 56455253494F4E   786         DB      056H,045H,052H,053H,049H,04FH,04EH,000H
       00                   
                        789         PUBLIC  _VERSCmdTxt
0000BC                  790 _VERSCmdTxt:
                        791 ; rs232cmd.c   88       char code PRESETCmdTxt[]                                = "PRESET";
0000BC 5645525300       792         DB      056H,045H,052H,053H,000H
                        795         PUBLIC  _PRESETCmdTxt
0000C1                  796 _PRESETCmdTxt:
                        797 ; rs232cmd.c   89       char code PRESCmdTxt[]                                  = "PRES";
0000C1 50524553455400   798         DB      050H,052H,045H,053H,045H,054H,000H
                        801         PUBLIC  _PRESCmdTxt
0000C8                  802 _PRESCmdTxt:
                        803 ; rs232cmd.c   90       char code EVENTLOGCmdTxt[]                              = "EVENTLOG";
0000C8 5052455300       804         DB      050H,052H,045H,053H,000H
                        807         PUBLIC  _EVENTLOGCmdTxt
0000CD                  808 _EVENTLOGCmdTxt:
                        809 ; rs232cmd.c   91       char code DATECmdTxt[]                                  = "DATE";
0000CD 4556454E544C4F   810         DB      045H,056H,045H,04EH,054H,04CH,04FH,047H,000H
       4700                 
                        813         PUBLIC  _DATECmdTxt
0000D6                  814 _DATECmdTxt:
                        815 ; rs232cmd.c   92       char code TIMECmdTxt[]                                  = "TIME";
0000D6 4441544500       816         DB      044H,041H,054H,045H,000H
                        819         PUBLIC  _TIMECmdTxt
0000DB                  820 _TIMECmdTxt:
                        821 ; rs232cmd.c   93       
                        822 ; rs232cmd.c   94       char code RECALLCmdTxt[]                                = "RECALL";
0000DB 54494D4500       823         DB      054H,049H,04DH,045H,000H
                        826         PUBLIC  _RECALLCmdTxt
0000E0                  827 _RECALLCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   5

ADDR   CODE            LINE SOURCELINE
                        828 ; rs232cmd.c   95       char code RECCmdTxt[]                                   = "REC";
0000E0 524543414C4C00   829         DB      052H,045H,043H,041H,04CH,04CH,000H
                        832         PUBLIC  _RECCmdTxt
0000E7                  833 _RECCmdTxt:
                        834 ; rs232cmd.c   96       char code STORECmdTxt[]                                 = "STORE";
0000E7 52454300         835         DB      052H,045H,043H,000H
                        838         PUBLIC  _STORECmdTxt
0000EB                  839 _STORECmdTxt:
                        840 ; rs232cmd.c   97       char code STORCmdTxt[]                                  = "STOR";
0000EB 53544F524500     841         DB      053H,054H,04FH,052H,045H,000H
                        844         PUBLIC  _STORCmdTxt
0000F1                  845 _STORCmdTxt:
                        846 ; rs232cmd.c   98       char code NAMECmdTxt[]                                  = "NAME";
0000F1 53544F5200       847         DB      053H,054H,04FH,052H,000H
                        850         PUBLIC  _NAMECmdTxt
0000F6                  851 _NAMECmdTxt:
                        852 ; rs232cmd.c   99       char code AUTHORCmdTxt[]                                = "AUTHOR";
0000F6 4E414D4500       853         DB      04EH,041H,04DH,045H,000H
                        856         PUBLIC  _AUTHORCmdTxt
0000FB                  857 _AUTHORCmdTxt:
                        858 ; rs232cmd.c  100       char code AUTHCmdTxt[]                                  = "AUTH";
0000FB 415554484F5200   859         DB      041H,055H,054H,048H,04FH,052H,000H
                        862         PUBLIC  _AUTHCmdTxt
000102                  863 _AUTHCmdTxt:
                        864 ; rs232cmd.c  101       char code DOWNLOADCmdTxt[]                      = "DOWNLOAD";
000102 4155544800       865         DB      041H,055H,054H,048H,000H
                        868         PUBLIC  _DOWNLOADCmdTxt
000107                  869 _DOWNLOADCmdTxt:
                        870 ; rs232cmd.c  102       char code DOWNCmdTxt[]                                  = "DOWN";
000107 444F574E4C4F41   871         DB      044H,04FH,057H,04EH,04CH,04FH,041H,044H,000H
       4400                 
                        874         PUBLIC  _DOWNCmdTxt
000110                  875 _DOWNCmdTxt:
                        876 ; rs232cmd.c  103       char code UPLOADCmdTxt[]                                = "UPLOAd";
000110 444F574E00       877         DB      044H,04FH,057H,04EH,000H
                        880         PUBLIC  _UPLOADCmdTxt
000115                  881 _UPLOADCmdTxt:
                        882 ; rs232cmd.c  104       char code UPLCmdTxt[]                                   = "UPL";
000115 55504C4F416400   883         DB      055H,050H,04CH,04FH,041H,064H,000H
                        886         PUBLIC  _UPLCmdTxt
00011C                  887 _UPLCmdTxt:
                        888 ; rs232cmd.c  105       
                        889 ; rs232cmd.c  106       char code OPERATIONCmdTxt[]                     = "OPERATION";
00011C 55504C00         890         DB      055H,050H,04CH,000H
                        893         PUBLIC  _OPERATIONCmdTxt
000120                  894 _OPERATIONCmdTxt:
                        895 ; rs232cmd.c  107       char code OPERCmdTxt[]                          = "OPER";
000120 4F504552415449   896         DB      04FH,050H,045H,052H,041H,054H,049H,04FH,04EH,000H
       4F4E00               
                        899         PUBLIC  _OPERCmdTxt
00012A                  900 _OPERCmdTxt:
                        901 ; rs232cmd.c  108       char code QUESTIONABLECmdTxt[]          = "QUESTIONABLE";
00012A 4F50455200       902         DB      04FH,050H,045H,052H,000H
                        905         PUBLIC  _QUESTIONABLECmdTxt
00012F                  906 _QUESTIONABLECmdTxt:
00012F 5155455354494F   907         DB      051H,055H,045H,053H,054H,049H,04FH,04EH,041H,042H,04CH,045H
       4E41424C45           
                        908 ; rs232cmd.c  109       char code QUESCmdTxt[]                                  = "QUES";
00013B 00               909         DB      000H
                        912         PUBLIC  _QUESCmdTxt
00013C                  913 _QUESCmdTxt:
                        914 ; rs232cmd.c  110       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   6

ADDR   CODE            LINE SOURCELINE
                        915 ; rs232cmd.c  111       char code EVENTCmdTxt[]                                 = "EVENT";
00013C 5155455300       916         DB      051H,055H,045H,053H,000H
                        919         PUBLIC  _EVENTCmdTxt
000141                  920 _EVENTCmdTxt:
                        921 ; rs232cmd.c  112       char code EVENCmdTxt[]                                  = "EVEN";
000141 4556454E5400     922         DB      045H,056H,045H,04EH,054H,000H
                        925         PUBLIC  _EVENCmdTxt
000147                  926 _EVENCmdTxt:
                        927 ; rs232cmd.c  113       char code CONDITIONCmdTxt[]                     = "CONDITION";
000147 4556454E00       928         DB      045H,056H,045H,04EH,000H
                        931         PUBLIC  _CONDITIONCmdTxt
00014C                  932 _CONDITIONCmdTxt:
                        933 ; rs232cmd.c  114       char code CONDCmdTxt[]                                  = "COND";
00014C 434F4E44495449   934         DB      043H,04FH,04EH,044H,049H,054H,049H,04FH,04EH,000H
       4F4E00               
                        937         PUBLIC  _CONDCmdTxt
000156                  938 _CONDCmdTxt:
                        939 ; rs232cmd.c  115       char code ENABLECmdTxt[]                                = "ENABLE";
000156 434F4E4400       940         DB      043H,04FH,04EH,044H,000H
                        943         PUBLIC  _ENABLECmdTxt
00015B                  944 _ENABLECmdTxt:
                        945 ; rs232cmd.c  116       char code ENABCmdTxt[]                                  = "ENAB";
00015B 454E41424C4500   946         DB      045H,04EH,041H,042H,04CH,045H,000H
                        949         PUBLIC  _ENABCmdTxt
000162                  950 _ENABCmdTxt:
                        951 ; rs232cmd.c  117       
                        952 ; rs232cmd.c  118       char code DISPLAYCmdTxt[]                               = "DISPLAY";
000162 454E414200       953         DB      045H,04EH,041H,042H,000H
                        956         PUBLIC  _DISPLAYCmdTxt
000167                  957 _DISPLAYCmdTxt:
                        958 ; rs232cmd.c  119       char code DISPCmdTxt[]                                  = "DISP";
000167 444953504C4159   959         DB      044H,049H,053H,050H,04CH,041H,059H,000H
       00                   
                        962         PUBLIC  _DISPCmdTxt
00016F                  963 _DISPCmdTxt:
                        964 ; rs232cmd.c  120       char code ERRORQUEUECmdTxt[]            = "ERRORQUEUE";
00016F 4449535000       965         DB      044H,049H,053H,050H,000H
                        968         PUBLIC  _ERRORQUEUECmdTxt
000174                  969 _ERRORQUEUECmdTxt:
                        970 ; rs232cmd.c  121       char code RESETCmdTxt[]                                 = "RESET";
000174 4552524F525155   971         DB      045H,052H,052H,04FH,052H,051H,055H,045H,055H,045H,000H
       45554500             
                        974         PUBLIC  _RESETCmdTxt
00017F                  975 _RESETCmdTxt:
                        976 ; rs232cmd.c  122       char code RESCmdTxt[]                                   = "RES";
00017F 524553455400     977         DB      052H,045H,053H,045H,054H,000H
                        980         PUBLIC  _RESCmdTxt
000185                  981 _RESCmdTxt:
                        982 ; rs232cmd.c  123       
                        983 ; rs232cmd.c  124       char code DEFAULTCmdTxt[]                               = "DEFAULT";
000185 52455300         984         DB      052H,045H,053H,000H
                        987         PUBLIC  _DEFAULTCmdTxt
000189                  988 _DEFAULTCmdTxt:
                        989 ; rs232cmd.c  125       char code DEFCmdTxt[]                                   = "DEF";
000189 44454641554C54   990         DB      044H,045H,046H,041H,055H,04CH,054H,000H
       00                   
                        993         PUBLIC  _DEFCmdTxt
000191                  994 _DEFCmdTxt:
                        995 ; rs232cmd.c  126       
                        996 ; rs232cmd.c  127       char code GENLOCKCmdTxt[]                               = "GENLOCK";
000191 44454600         997         DB      044H,045H,046H,000H
                       1000         PUBLIC  _GENLOCKCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   7

ADDR   CODE            LINE SOURCELINE
000195                 1001 _GENLOCKCmdTxt:
                       1002 ; rs232cmd.c  128       char code GENLCmdTxt[]                                  = "GENL";
000195 47454E4C4F434B  1003         DB      047H,045H,04EH,04CH,04FH,043H,04BH,000H
       00                   
                       1006         PUBLIC  _GENLCmdTxt
00019D                 1007 _GENLCmdTxt:
                       1008 ; rs232cmd.c  129       
                       1009 ; rs232cmd.c  130       char code DELAYCmdTxt[]                                 = "DELAY";
00019D 47454E4C00      1010         DB      047H,045H,04EH,04CH,000H
                       1013         PUBLIC  _DELAYCmdTxt
0001A2                 1014 _DELAYCmdTxt:
                       1015 ; rs232cmd.c  131       char code DELCmdTxt[]                                   = "DEL";
0001A2 44454C415900    1016         DB      044H,045H,04CH,041H,059H,000H
                       1019         PUBLIC  _DELCmdTxt
0001A8                 1020 _DELCmdTxt:
                       1021 ; rs232cmd.c  132       
                       1022 ; rs232cmd.c  133       char code CALIBRATECmdTxt[]                     = "CALIBRATE";
0001A8 44454C00        1023         DB      044H,045H,04CH,000H
                       1026         PUBLIC  _CALIBRATECmdTxt
0001AC                 1027 _CALIBRATECmdTxt:
                       1028 ; rs232cmd.c  134       char code CALCmdTxt[]                                   = "CAL";
0001AC 43414C49425241  1029         DB      043H,041H,04CH,049H,042H,052H,041H,054H,045H,000H
       544500               
                       1032         PUBLIC  _CALCmdTxt
0001B6                 1033 _CALCmdTxt:
                       1034 ; rs232cmd.c  135       
                       1035 ; rs232cmd.c  136       char code ADJUSTCmdTxt[]                                = "ADJUST";
0001B6 43414C00        1036         DB      043H,041H,04CH,000H
                       1039         PUBLIC  _ADJUSTCmdTxt
0001BA                 1040 _ADJUSTCmdTxt:
                       1041 ; rs232cmd.c  137       char code ADJCmdTxt[]                                   = "ADJ";
0001BA 41444A55535400  1042         DB      041H,044H,04AH,055H,053H,054H,000H
                       1045         PUBLIC  _ADJCmdTxt
0001C1                 1046 _ADJCmdTxt:
                       1047 ; rs232cmd.c  138       
                       1048 ; rs232cmd.c  139       char code BBCmdTxt[]                                    = "BB";
0001C1 41444A00        1049         DB      041H,044H,04AH,000H
                       1052         PUBLIC  _BBCmdTxt
0001C5                 1053 _BBCmdTxt:
                       1054 ; rs232cmd.c  140       char code TSGENERATORCmdTxt[]           = "TSGENERATOR";
0001C5 424200          1055         DB      042H,042H,000H
                       1058         PUBLIC  _TSGENERATORCmdTxt
0001C8                 1059 _TSGENERATORCmdTxt:
                       1060 ; rs232cmd.c  141       char code TSGCmdTxt[]                                   = "TSG";
0001C8 545347454E4552  1061         DB      054H,053H,047H,045H,04EH,045H,052H,041H,054H,04FH,052H,000H
       41544F5200           
                       1064         PUBLIC  _TSGCmdTxt
0001D4                 1065 _TSGCmdTxt:
                       1066 ; rs232cmd.c  142       char code AUDIOCmdTxt[]                                 = "AUDIO";
0001D4 54534700        1067         DB      054H,053H,047H,000H
                       1070         PUBLIC  _AUDIOCmdTxt
0001D8                 1071 _AUDIOCmdTxt:
                       1072 ; rs232cmd.c  143       char code AUDCmdTxt[]                                   = "AUD";
0001D8 415544494F00    1073         DB      041H,055H,044H,049H,04FH,000H
                       1076         PUBLIC  _AUDCmdTxt
0001DE                 1077 _AUDCmdTxt:
                       1078 ; rs232cmd.c  144       
                       1079 ; rs232cmd.c  145       char code ANALOGCmdTxt[]                                = "ANALOG";
0001DE 41554400        1080         DB      041H,055H,044H,000H
                       1083         PUBLIC  _ANALOGCmdTxt
0001E2                 1084 _ANALOGCmdTxt:
                       1085 ; rs232cmd.c  146       char code ANALCmdTxt[]                                  = "ANAL";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   8

ADDR   CODE            LINE SOURCELINE
0001E2 414E414C4F4700  1086         DB      041H,04EH,041H,04CH,04FH,047H,000H
                       1089         PUBLIC  _ANALCmdTxt
0001E9                 1090 _ANALCmdTxt:
                       1091 ; rs232cmd.c  147       
                       1092 ; rs232cmd.c  148       char code PATTERNCmdTxt[]                               = "PATTERN";
0001E9 414E414C00      1093         DB      041H,04EH,041H,04CH,000H
                       1096         PUBLIC  _PATTERNCmdTxt
0001EE                 1097 _PATTERNCmdTxt:
                       1098 ; rs232cmd.c  149       char code PATTCmdTxt[]                                  = "PATT";
0001EE 5041545445524E  1099         DB      050H,041H,054H,054H,045H,052H,04EH,000H
       00                   
                       1102         PUBLIC  _PATTCmdTxt
0001F6                 1103 _PATTCmdTxt:
                       1104 ; rs232cmd.c  150       char code EMBAUDIOCmdTxt[]                      = "EMBAUDIO";
0001F6 5041545400      1105         DB      050H,041H,054H,054H,000H
                       1108         PUBLIC  _EMBAUDIOCmdTxt
0001FB                 1109 _EMBAUDIOCmdTxt:
                       1110 ; rs232cmd.c  151       char code EMBCmdTxt[]                                   = "EMB";
0001FB 454D4241554449  1111         DB      045H,04DH,042H,041H,055H,044H,049H,04FH,000H
       4F00                 
                       1114         PUBLIC  _EMBCmdTxt
000204                 1115 _EMBCmdTxt:
                       1116 ; rs232cmd.c  152       
                       1117 ; rs232cmd.c  153       char code AESEBUCmdTxt[]                                = "AESEBU";
000204 454D4200        1118         DB      045H,04DH,042H,000H
                       1121         PUBLIC  _AESEBUCmdTxt
000208                 1122 _AESEBUCmdTxt:
                       1123 ; rs232cmd.c  154       char code AESCmdTxt[]                                   = "AES";
000208 41455345425500  1124         DB      041H,045H,053H,045H,042H,055H,000H
                       1127         PUBLIC  _AESCmdTxt
00020F                 1128 _AESCmdTxt:
                       1129 ; rs232cmd.c  155       
                       1130 ; rs232cmd.c  156       char code SCHPHASECmdTxt[]                      = "SCHPHASE";
00020F 41455300        1131         DB      041H,045H,053H,000H
                       1134         PUBLIC  _SCHPHASECmdTxt
000213                 1135 _SCHPHASECmdTxt:
                       1136 ; rs232cmd.c  157       char code SCHPCmdTxt[]                                  = "SCHP";
000213 53434850484153  1137         DB      053H,043H,048H,050H,048H,041H,053H,045H,000H
       4500                 
                       1140         PUBLIC  _SCHPCmdTxt
00021C                 1141 _SCHPCmdTxt:
                       1142 ; rs232cmd.c  158       
                       1143 ; rs232cmd.c  159       char code SIGNALCmdTxt[]                                = "SIGNAL";
00021C 5343485000      1144         DB      053H,043H,048H,050H,000H
                       1147         PUBLIC  _SIGNALCmdTxt
000221                 1148 _SIGNALCmdTxt:
                       1149 ; rs232cmd.c  160       char code SIGNCmdTxt[]                                  = "SIGN";
000221 5349474E414C00  1150         DB      053H,049H,047H,04EH,041H,04CH,000H
                       1153         PUBLIC  _SIGNCmdTxt
000228                 1154 _SIGNCmdTxt:
                       1155 ; rs232cmd.c  161       char code LEVELCmdTxt[]                                 = "LEVEL";
000228 5349474E00      1156         DB      053H,049H,047H,04EH,000H
                       1159         PUBLIC  _LEVELCmdTxt
00022D                 1160 _LEVELCmdTxt:
                       1161 ; rs232cmd.c  162       char code LEVCmdTxt[]                                   = "LEV";
00022D 4C4556454C00    1162         DB      04CH,045H,056H,045H,04CH,000H
                       1165         PUBLIC  _LEVCmdTxt
000233                 1166 _LEVCmdTxt:
                       1167 ; rs232cmd.c  163       char code EDHINSERTCmdTxt[]                     = "EDHINSERT";
000233 4C455600        1168         DB      04CH,045H,056H,000H
                       1171         PUBLIC  _EDHINSERTCmdTxt
000237                 1172 _EDHINSERTCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   9

ADDR   CODE            LINE SOURCELINE
                       1173 ; rs232cmd.c  164       char code EDHCmdTxt[]                                   = "EDH";
000237 454448494E5345  1174         DB      045H,044H,048H,049H,04EH,053H,045H,052H,054H,000H
       525400               
                       1177         PUBLIC  _EDHCmdTxt
000241                 1178 _EDHCmdTxt:
                       1179 ; rs232cmd.c  165       
                       1180 ; rs232cmd.c  166       char code TIMINGCmdTxt[]                                = "TIMING";
000241 45444800        1181         DB      045H,044H,048H,000H
                       1184         PUBLIC  _TIMINGCmdTxt
000245                 1185 _TIMINGCmdTxt:
                       1186 ; rs232cmd.c  167       char code TIMCmdTxt[]                                   = "TIM";
000245 54494D494E4700  1187         DB      054H,049H,04DH,049H,04EH,047H,000H
                       1190         PUBLIC  _TIMCmdTxt
00024C                 1191 _TIMCmdTxt:
                       1192 ; rs232cmd.c  168       
                       1193 ; rs232cmd.c  169       char code WORDCLOCKCmdTxt[]                     = "WORDCLOCK";
00024C 54494D00        1194         DB      054H,049H,04DH,000H
                       1197         PUBLIC  _WORDCLOCKCmdTxt
000250                 1198 _WORDCLOCKCmdTxt:
                       1199 ; rs232cmd.c  170       char code WORDCmdTxt[]                                  = "WORD";
000250 574F5244434C4F  1200         DB      057H,04FH,052H,044H,043H,04CH,04FH,043H,04BH,000H
       434B00               
                       1203         PUBLIC  _WORDCmdTxt
00025A                 1204 _WORDCmdTxt:
                       1205 ; rs232cmd.c  171       
                       1206 ; rs232cmd.c  172       char code CLICKCmdTxt[]                                 = "CLICK";
00025A 574F524400      1207         DB      057H,04FH,052H,044H,000H
                       1210         PUBLIC  _CLICKCmdTxt
00025F                 1211 _CLICKCmdTxt:
                       1212 ; rs232cmd.c  173       char code CLICCmdTxt[]                                  = "CLIC";
00025F 434C49434B00    1213         DB      043H,04CH,049H,043H,04BH,000H
                       1216         PUBLIC  _CLICCmdTxt
000265                 1217 _CLICCmdTxt:
                       1218 ; rs232cmd.c  174       
                       1219 ; rs232cmd.c  175       char code PASSWORDCmdTxt[]                      = "PASSWORD";
000265 434C494300      1220         DB      043H,04CH,049H,043H,000H
                       1223         PUBLIC  _PASSWORDCmdTxt
00026A                 1224 _PASSWORDCmdTxt:
                       1225 ; rs232cmd.c  176       char code PASSCmdTxt[]                                  = "PASS";
00026A 50415353574F52  1226         DB      050H,041H,053H,053H,057H,04FH,052H,044H,000H
       4400                 
                       1229         PUBLIC  _PASSCmdTxt
000273                 1230 _PASSCmdTxt:
                       1231 ; rs232cmd.c  177       char code V24CIRCUITCmdTxt[]                    = "V24CIRCUIT";
000273 5041535300      1232         DB      050H,041H,053H,053H,000H
                       1235         PUBLIC  _V24CIRCUITCmdTxt
000278                 1236 _V24CIRCUITCmdTxt:
                       1237 ; rs232cmd.c  178       char code V24CCmdTxt[]                                  = "V24C";
000278 56323443495243  1238         DB      056H,032H,034H,043H,049H,052H,043H,055H,049H,054H,000H
       55495400             
                       1241         PUBLIC  _V24CCmdTxt
000283                 1242 _V24CCmdTxt:
                       1243 ; rs232cmd.c  179       char code CHECKSUMCmdTxt[]                      = "CHECKSUM";
000283 5632344300      1244         DB      056H,032H,034H,043H,000H
                       1247         PUBLIC  _CHECKSUMCmdTxt
000288                 1248 _CHECKSUMCmdTxt:
                       1249 ; rs232cmd.c  180       char code CHECCmdTxt[]                                  = "CHEC";
000288 434845434B5355  1250         DB      043H,048H,045H,043H,04BH,053H,055H,04DH,000H
       4D00                 
                       1253         PUBLIC  _CHECCmdTxt
000291                 1254 _CHECCmdTxt:
                       1255 ; rs232cmd.c  181       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  10

ADDR   CODE            LINE SOURCELINE
                       1256 ; rs232cmd.c  182       char code CODECmdTxt[]                                  = "CODE";
000291 4348454300      1257         DB      043H,048H,045H,043H,000H
                       1260         PUBLIC  _CODECmdTxt
000296                 1261 _CODECmdTxt:
                       1262 ; rs232cmd.c  183       char code RANGECmdTxt[]                                 = "RANGE";
000296 434F444500      1263         DB      043H,04FH,044H,045H,000H
                       1266         PUBLIC  _RANGECmdTxt
00029B                 1267 _RANGECmdTxt:
                       1268 ; rs232cmd.c  184       char code RANGCmdTxt[]                                  = "RANG";
00029B 52414E474500    1269         DB      052H,041H,04EH,047H,045H,000H
                       1272         PUBLIC  _RANGCmdTxt
0002A1                 1273 _RANGCmdTxt:
                       1274 ; rs232cmd.c  185       char code COMMANDCmdTxt[]                               = "COMMAND";
0002A1 52414E4700      1275         DB      052H,041H,04EH,047H,000H
                       1278         PUBLIC  _COMMANDCmdTxt
0002A6                 1279 _COMMANDCmdTxt:
                       1280 ; rs232cmd.c  186       char code COMMCmdTxt[]                                  = "COMM";
0002A6 434F4D4D414E44  1281         DB      043H,04FH,04DH,04DH,041H,04EH,044H,000H
       00                   
                       1284         PUBLIC  _COMMCmdTxt
0002AE                 1285 _COMMCmdTxt:
                       1286 ; rs232cmd.c  187       char code TRANSPARENTCmdTxt[]           = "TRANSPARENT";
0002AE 434F4D4D00      1287         DB      043H,04FH,04DH,04DH,000H
                       1290         PUBLIC  _TRANSPARENTCmdTxt
0002B3                 1291 _TRANSPARENTCmdTxt:
                       1292 ; rs232cmd.c  188       char code TRANCmdTxt[]                                  = "TRAN";
0002B3 5452414E535041  1293         DB      054H,052H,041H,04EH,053H,050H,041H,052H,045H,04EH,054H,000H
       52454E5400           
                       1296         PUBLIC  _TRANCmdTxt
0002BF                 1297 _TRANCmdTxt:
                       1298 ; rs232cmd.c  189       
                       1299 ; rs232cmd.c  190       char code MAINBOARDCmdTxt[]                     = "MAINBOARD";
0002BF 5452414E00      1300         DB      054H,052H,041H,04EH,000H
                       1303         PUBLIC  _MAINBOARDCmdTxt
0002C4                 1304 _MAINBOARDCmdTxt:
                       1305 ; rs232cmd.c  191       char code MAINCmdTxt[]                                  = "MAIN";
0002C4 4D41494E424F41  1306         DB      04DH,041H,049H,04EH,042H,04FH,041H,052H,044H,000H
       524400               
                       1309         PUBLIC  _MAINCmdTxt
0002CE                 1310 _MAINCmdTxt:
                       1311 ; rs232cmd.c  192       char code COMPANYCmdTxt[]                               = "COMPANY";
0002CE 4D41494E00      1312         DB      04DH,041H,049H,04EH,000H
                       1315         PUBLIC  _COMPANYCmdTxt
0002D3                 1316 _COMPANYCmdTxt:
                       1317 ; rs232cmd.c  193       char code COMPCmdTxt[]                                  = "COMP";
0002D3 434F4D50414E59  1318         DB      043H,04FH,04DH,050H,041H,04EH,059H,000H
       00                   
                       1321         PUBLIC  _COMPCmdTxt
0002DB                 1322 _COMPCmdTxt:
                       1323 ; rs232cmd.c  194       char code TYPECmdTxt[]                                  = "TYPE";
0002DB 434F4D5000      1324         DB      043H,04FH,04DH,050H,000H
                       1327         PUBLIC  _TYPECmdTxt
0002E0                 1328 _TYPECmdTxt:
                       1329 ; rs232cmd.c  195       char code KUNUMBERCmdTxt[]                      = "KUNUMBER";
0002E0 5459504500      1330         DB      054H,059H,050H,045H,000H
                       1333         PUBLIC  _KUNUMBERCmdTxt
0002E5                 1334 _KUNUMBERCmdTxt:
                       1335 ; rs232cmd.c  196       char code KUNCmdTxt[]                                   = "KUN";
0002E5 4B554E554D4245  1336         DB      04BH,055H,04EH,055H,04DH,042H,045H,052H,000H
       5200                 
                       1339         PUBLIC  _KUNCmdTxt
0002EE                 1340 _KUNCmdTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  11

ADDR   CODE            LINE SOURCELINE
                       1341 ; rs232cmd.c  197       char code SWREVISIONCmdTxt[]                    = "SWREVISION";
0002EE 4B554E00        1342         DB      04BH,055H,04EH,000H
                       1345         PUBLIC  _SWREVISIONCmdTxt
0002F2                 1346 _SWREVISIONCmdTxt:
                       1347 ; rs232cmd.c  198       char code SWRCmdTxt[]                                   = "SWR";
0002F2 53575245564953  1348         DB      053H,057H,052H,045H,056H,049H,053H,049H,04FH,04EH,000H
       494F4E00             
                       1351         PUBLIC  _SWRCmdTxt
0002FD                 1352 _SWRCmdTxt:
                       1353 ; rs232cmd.c  199       
                       1354 ; rs232cmd.c  200       char code NCCmdTxt[]                                    = "NC";
0002FD 53575200        1355         DB      053H,057H,052H,000H
                       1358         PUBLIC  _NCCmdTxt
000301                 1359 _NCCmdTxt:
                       1360 ; rs232cmd.c  201       char code FMSDATECmdTxt[]                               = "FMSDATE";
000301 4E4300          1361         DB      04EH,043H,000H
                       1364         PUBLIC  _FMSDATECmdTxt
000304                 1365 _FMSDATECmdTxt:
                       1366 ; rs232cmd.c  202       char code FMSDCmdTxt[]                                  = "FMSD";
000304 464D5344415445  1367         DB      046H,04DH,053H,044H,041H,054H,045H,000H
       00                   
                       1370         PUBLIC  _FMSDCmdTxt
00030C                 1371 _FMSDCmdTxt:
                       1372 ; rs232cmd.c  203       char code PRODUCTIONCmdTxt[]                    = "PRODUCTION";
00030C 464D534400      1373         DB      046H,04DH,053H,044H,000H
                       1376         PUBLIC  _PRODUCTIONCmdTxt
000311                 1377 _PRODUCTIONCmdTxt:
                       1378 ; rs232cmd.c  204       char code PRODCmdTxt[]                                  = "PROD";
000311 50524F44554354  1379         DB      050H,052H,04FH,044H,055H,043H,054H,049H,04FH,04EH,000H
       494F4E00             
                       1382         PUBLIC  _PRODCmdTxt
00031C                 1383 _PRODCmdTxt:
                       1384 ; rs232cmd.c  205       char code UPDATECmdTxt[]                                = "UPDATE";
00031C 50524F4400      1385         DB      050H,052H,04FH,044H,000H
                       1388         PUBLIC  _UPDATECmdTxt
000321                 1389 _UPDATECmdTxt:
                       1390 ; rs232cmd.c  206       char code UPDCmdTxt[]                                   = "UPD";
000321 55504441544500  1391         DB      055H,050H,044H,041H,054H,045H,000H
                       1394         PUBLIC  _UPDCmdTxt
000328                 1395 _UPDCmdTxt:
                       1396 ; rs232cmd.c  207       
                       1397 ; rs232cmd.c  208       char code FREFERENCECmdTxt[]                    = "FREFERENCE";
000328 55504400        1398         DB      055H,050H,044H,000H
                       1401         PUBLIC  _FREFERENCECmdTxt
00032C                 1402 _FREFERENCECmdTxt:
                       1403 ; rs232cmd.c  209       char code FREFCmdTxt[]                                  = "FREF";
00032C 46524546455245  1404         DB      046H,052H,045H,046H,045H,052H,045H,04EH,043H,045H,000H
       4E434500             
                       1407         PUBLIC  _FREFCmdTxt
000337                 1408 _FREFCmdTxt:
                       1409 ; rs232cmd.c  210       char code DACCmdTxt[]                                   = "DAC";
000337 4652454600      1410         DB      046H,052H,045H,046H,000H
                       1413         PUBLIC  _DACCmdTxt
00033C                 1414 _DACCmdTxt:
                       1415 ; rs232cmd.c  211       char code UREFERENCECmdTxt[]                    = "UREFERENCE";
00033C 44414300        1416         DB      044H,041H,043H,000H
                       1419         PUBLIC  _UREFERENCECmdTxt
000340                 1420 _UREFERENCECmdTxt:
                       1421 ; rs232cmd.c  212       char code UREFCmdTxt[]                                  = "UREF";
000340 55524546455245  1422         DB      055H,052H,045H,046H,045H,052H,045H,04EH,043H,045H,000H
       4E434500             
                       1425         PUBLIC  _UREFCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  12

ADDR   CODE            LINE SOURCELINE
00034B                 1426 _UREFCmdTxt:
                       1427 ; rs232cmd.c  213       char code HPHZEROCmdTxt[]                               = "HPHZERO";
00034B 5552454600      1428         DB      055H,052H,045H,046H,000H
                       1431         PUBLIC  _HPHZEROCmdTxt
000350                 1432 _HPHZEROCmdTxt:
                       1433 ; rs232cmd.c  214       char code HPHZCmdTxt[]                                  = "HPHZ";
000350 4850485A45524F  1434         DB      048H,050H,048H,05AH,045H,052H,04FH,000H
       00                   
                       1437         PUBLIC  _HPHZCmdTxt
000358                 1438 _HPHZCmdTxt:
                       1439 ; rs232cmd.c  215       char code PHASECmdTxt[]                                 = "PHASE";
000358 4850485A00      1440         DB      048H,050H,048H,05AH,000H
                       1443         PUBLIC  _PHASECmdTxt
00035D                 1444 _PHASECmdTxt:
                       1445 ; rs232cmd.c  216       char code PHASCmdTxt[]                                  = "PHAS";
00035D 504841534500    1446         DB      050H,048H,041H,053H,045H,000H
                       1449         PUBLIC  _PHASCmdTxt
000363                 1450 _PHASCmdTxt:
                       1451 ; rs232cmd.c  217       
                       1452 ; rs232cmd.c  218       char code AGAINCmdTxt[]                                 = "AGAIN";
000363 5048415300      1453         DB      050H,048H,041H,053H,000H
                       1456         PUBLIC  _AGAINCmdTxt
000368                 1457 _AGAINCmdTxt:
                       1458 ; rs232cmd.c  219       char code AGACmdTxt[]                                   = "AGA";
000368 414741494E00    1459         DB      041H,047H,041H,049H,04EH,000H
                       1462         PUBLIC  _AGACmdTxt
00036E                 1463 _AGACmdTxt:
                       1464 ; rs232cmd.c  220       char code CGAINCmdTxt[]                                 = "CGAIN";
00036E 41474100        1465         DB      041H,047H,041H,000H
                       1468         PUBLIC  _CGAINCmdTxt
000372                 1469 _CGAINCmdTxt:
                       1470 ; rs232cmd.c  221       char code CGACmdTxt[]                                   = "CGA";
000372 434741494E00    1471         DB      043H,047H,041H,049H,04EH,000H
                       1474         PUBLIC  _CGACmdTxt
000378                 1475 _CGACmdTxt:
                       1476 ; rs232cmd.c  222       char code ALEVELCmdTxt[]                                = "ALEVEL";
000378 43474100        1477         DB      043H,047H,041H,000H
                       1480         PUBLIC  _ALEVELCmdTxt
00037C                 1481 _ALEVELCmdTxt:
                       1482 ; rs232cmd.c  223       char code ALEVCmdTxt[]                                  = "ALEV";
00037C 414C4556454C00  1483         DB      041H,04CH,045H,056H,045H,04CH,000H
                       1486         PUBLIC  _ALEVCmdTxt
000383                 1487 _ALEVCmdTxt:
                       1488 ; rs232cmd.c  224       
                       1489 ; rs232cmd.c  225       char code PLDCmdTxt[]                                   = "PLD";
000383 414C455600      1490         DB      041H,04CH,045H,056H,000H
                       1493         PUBLIC  _PLDCmdTxt
000388                 1494 _PLDCmdTxt:
                       1495 ; rs232cmd.c  226       char code TCXOCmdTxt[]                                  = "TCXO";
000388 504C4400        1496         DB      050H,04CH,044H,000H
                       1499         PUBLIC  _TCXOCmdTxt
00038C                 1500 _TCXOCmdTxt:
                       1501 ; rs232cmd.c  227       char code MMCHIPCmdTxt[]                                = "MMCHIP";
00038C 5443584F00      1502         DB      054H,043H,058H,04FH,000H
                       1505         PUBLIC  _MMCHIPCmdTxt
000391                 1506 _MMCHIPCmdTxt:
                       1507 ; rs232cmd.c  228       char code MMCHCmdTxt[]                                  = "MMCH";
000391 4D4D4348495000  1508         DB      04DH,04DH,043H,048H,049H,050H,000H
                       1511         PUBLIC  _MMCHCmdTxt
000398                 1512 _MMCHCmdTxt:
                       1513 ; rs232cmd.c  229       
                       1514 ; rs232cmd.c  230       char code SAVEParTxt[]                                  = "SAVE";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  13

ADDR   CODE            LINE SOURCELINE
000398 4D4D434800      1515         DB      04DH,04DH,043H,048H,000H
                       1518         PUBLIC  _SAVEParTxt
00039D                 1519 _SAVEParTxt:
                       1520 ; rs232cmd.c  231       
                       1521 ; rs232cmd.c  232       char code INTERNALParTxt[]                      = "INTERNAL";
00039D 5341564500      1522         DB      053H,041H,056H,045H,000H
                       1525         PUBLIC  _INTERNALParTxt
0003A2                 1526 _INTERNALParTxt:
                       1527 ; rs232cmd.c  233       char code INTParTxt[]                                   = "INT";
0003A2 494E5445524E41  1528         DB      049H,04EH,054H,045H,052H,04EH,041H,04CH,000H
       4C00                 
                       1531         PUBLIC  _INTParTxt
0003AB                 1532 _INTParTxt:
                       1533 ; rs232cmd.c  234       char code PALBURSTParTxt[]                      = "PALBURST";
0003AB 494E5400        1534         DB      049H,04EH,054H,000H
                       1537         PUBLIC  _PALBURSTParTxt
0003AF                 1538 _PALBURSTParTxt:
                       1539 ; rs232cmd.c  235       char code PALBParTxt[]                                  = "PALB";
0003AF 50414C42555253  1540         DB      050H,041H,04CH,042H,055H,052H,053H,054H,000H
       5400                 
                       1543         PUBLIC  _PALBParTxt
0003B8                 1544 _PALBParTxt:
                       1545 ; rs232cmd.c  236       char code NTSCBURSTParTxt[]                     = "NTSCBURST";
0003B8 50414C4200      1546         DB      050H,041H,04CH,042H,000H
                       1549         PUBLIC  _NTSCBURSTParTxt
0003BD                 1550 _NTSCBURSTParTxt:
                       1551 ; rs232cmd.c  237       char code NTSCParTxt[]                                  = "NTSC";
0003BD 4E545343425552  1552         DB      04EH,054H,053H,043H,042H,055H,052H,053H,054H,000H
       535400               
                       1555         PUBLIC  _NTSCParTxt
0003C7                 1556 _NTSCParTxt:
                       1557 ; rs232cmd.c  238       
                       1558 ; rs232cmd.c  239       char code F10MHzParTxt[]                                = "F10MHZ";
0003C7 4E54534300      1559         DB      04EH,054H,053H,043H,000H
                       1562         PUBLIC  _F10MHzParTxt
0003CC                 1563 _F10MHzParTxt:
                       1564 ; rs232cmd.c  240       
                       1565 ; rs232cmd.c  241       char code PALParTxt[]                                   = "PAL";
0003CC 4631304D485A00  1566         DB      046H,031H,030H,04DH,048H,05AH,000H
                       1569         PUBLIC  _PALParTxt
0003D3                 1570 _PALParTxt:
                       1571 ; rs232cmd.c  242       char code PAL_IDParTxt[]                                = "PAL_ID";
0003D3 50414C00        1572         DB      050H,041H,04CH,000H
                       1575         PUBLIC  _PAL_IDParTxt
0003D7                 1576 _PAL_IDParTxt:
                       1577 ; rs232cmd.c  243       
                       1578 ; rs232cmd.c  244       char code CBSMPTEParTxt[]                               = "CBSMPTE";     
                                            // SMPTE Colorbar
0003D7 50414C5F494400  1579         DB      050H,041H,04CH,05FH,049H,044H,000H
                       1582         PUBLIC  _CBSMPTEParTxt
0003DE                 1583 _CBSMPTEParTxt:
                       1584 ; rs232cmd.c  245       char code CBSMParTxt[]                                  = "CBSM";        
                                                            
0003DE 4342534D505445  1585         DB      043H,042H,053H,04DH,050H,054H,045H,000H
       00                   
                       1588         PUBLIC  _CBSMParTxt
0003E6                 1589 _CBSMParTxt:
                       1590 ; rs232cmd.c  246       char code CBEBUParTxt[]                                 = "CBEBU";       
                                    // EBU Colorbar
0003E6 4342534D00      1591         DB      043H,042H,053H,04DH,000H
                       1594         PUBLIC  _CBEBUParTxt
0003EB                 1595 _CBEBUParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  14

ADDR   CODE            LINE SOURCELINE
                       1596 ; rs232cmd.c  247       char code CBEBParTxt[]                                  = "CBEB";
0003EB 434245425500    1597         DB      043H,042H,045H,042H,055H,000H
                       1600         PUBLIC  _CBEBParTxt
0003F1                 1601 _CBEBParTxt:
                       1602 ; rs232cmd.c  248       char code CBFCCParTxt[]                                 = "CBFCC";       
                                                    // FCC Colorbar
0003F1 4342454200      1603         DB      043H,042H,045H,042H,000H
                       1606         PUBLIC  _CBFCCParTxt
0003F6                 1607 _CBFCCParTxt:
                       1608 ; rs232cmd.c  249       char code CBFCParTxt[]                                  = "CBFC";
0003F6 434246434300    1609         DB      043H,042H,046H,043H,043H,000H
                       1612         PUBLIC  _CBFCParTxt
0003FC                 1613 _CBFCParTxt:
                       1614 ; rs232cmd.c  250       char code CBEBU8ParTxt[]                                = "CBEBU8";      
                                                    // Colorbar ITU801
0003FC 4342464300      1615         DB      043H,042H,046H,043H,000H
                       1618         PUBLIC  _CBEBU8ParTxt
000401                 1619 _CBEBU8ParTxt:
                       1620 ; rs232cmd.c  251       char code CBEB8ParTxt[]                                 = "CBEB8";
000401 43424542553800  1621         DB      043H,042H,045H,042H,055H,038H,000H
                       1624         PUBLIC  _CBEB8ParTxt
000408                 1625 _CBEB8ParTxt:
                       1626 ; rs232cmd.c  252       char code CB100ParTxt[]                                 = "CB100";       
                                                    // 100% Colorbar
000408 434245423800    1627         DB      043H,042H,045H,042H,038H,000H
                       1630         PUBLIC  _CB100ParTxt
00040E                 1631 _CB100ParTxt:
                       1632 ; rs232cmd.c  253       char code CBGREY75ParTxt[]                      = "CBGREY75";            
                                    // Colorbar + 75% Grey
00040E 434231303000    1633         DB      043H,042H,031H,030H,030H,000H
                       1636         PUBLIC  _CBGREY75ParTxt
000414                 1637 _CBGREY75ParTxt:
                       1638 ; rs232cmd.c  254       char code CBGR75ParTxt[]                                = "CBGR75";
000414 43424752455937  1639         DB      043H,042H,047H,052H,045H,059H,037H,035H,000H
       3500                 
                       1642         PUBLIC  _CBGR75ParTxt
00041D                 1643 _CBGR75ParTxt:
                       1644 ; rs232cmd.c  255       char code CBRED75ParTxt[]                       = "CBRED75";             
                                    // Colorbar + 75% Red
00041D 43424752373500  1645         DB      043H,042H,047H,052H,037H,035H,000H
                       1648         PUBLIC  _CBRED75ParTxt
000424                 1649 _CBRED75ParTxt:
                       1650 ; rs232cmd.c  256       char code CBR75ParTxt[]                                 = "CBR75";
000424 43425245443735  1651         DB      043H,042H,052H,045H,044H,037H,035H,000H
       00                   
                       1654         PUBLIC  _CBR75ParTxt
00042C                 1655 _CBR75ParTxt:
                       1656 ; rs232cmd.c  257       char code RED75ParTxt[]                                 = "RED75";       
                                                    // 75% Red
00042C 434252373500    1657         DB      043H,042H,052H,037H,035H,000H
                       1660         PUBLIC  _RED75ParTxt
000432                 1661 _RED75ParTxt:
                       1662 ; rs232cmd.c  258       
                       1663 ; rs232cmd.c  259       char code MULTIBURSTParTxt[]                    = "MULTIBURST";         /
                            / Multi burst
000432 524544373500    1664         DB      052H,045H,044H,037H,035H,000H
                       1667         PUBLIC  _MULTIBURSTParTxt
000438                 1668 _MULTIBURSTParTxt:
                       1669 ; rs232cmd.c  260       char code MULTParTxt[]                                  = "MULT";
000438 4D554C54494255  1670         DB      04DH,055H,04CH,054H,049H,042H,055H,052H,053H,054H,000H
       52535400             
                       1673         PUBLIC  _MULTParTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  15

ADDR   CODE            LINE SOURCELINE
000443                 1674 _MULTParTxt:
                       1675 ; rs232cmd.c  261       char code CCIR18ParTxt[]                                = "CCIR18";
000443 4D554C5400      1676         DB      04DH,055H,04CH,054H,000H
                       1679         PUBLIC  _CCIR18ParTxt
000448                 1680 _CCIR18ParTxt:
                       1681 ; rs232cmd.c  262       char code WIN10ParTxt[]                                 = "WIN10";       
                                                    // Window 10%
000448 43434952313800  1682         DB      043H,043H,049H,052H,031H,038H,000H
                       1685         PUBLIC  _WIN10ParTxt
00044F                 1686 _WIN10ParTxt:
                       1687 ; rs232cmd.c  263       char code WIN15ParTxt[]                                 = "WIN15";       
                                                    // Window 15%
00044F 57494E313000    1688         DB      057H,049H,04EH,031H,030H,000H
                       1691         PUBLIC  _WIN15ParTxt
000455                 1692 _WIN15ParTxt:
                       1693 ; rs232cmd.c  264       char code WIN20ParTxt[]                                 = "WIN20";       
                                                    // Window 20%
000455 57494E313500    1694         DB      057H,049H,04EH,031H,035H,000H
                       1697         PUBLIC  _WIN20ParTxt
00045B                 1698 _WIN20ParTxt:
                       1699 ; rs232cmd.c  265       char code WIN100ParTxt[]                                = "WIN100";      
                                                    // Window 100%
00045B 57494E323000    1700         DB      057H,049H,04EH,032H,030H,000H
                       1703         PUBLIC  _WIN100ParTxt
000461                 1704 _WIN100ParTxt:
                       1705 ; rs232cmd.c  266       char code BLWH15ParTxt[]                                = "BLWH15KHZ";   
                                            // 15kHz Bl/Wh
000461 57494E31303000  1706         DB      057H,049H,04EH,031H,030H,030H,000H
                       1709         PUBLIC  _BLWH15ParTxt
000468                 1710 _BLWH15ParTxt:
                       1711 ; rs232cmd.c  267       char code WHITE100ParTxt[]                      = "WHITE100";            
                                    // White 100%
000468 424C574831354B  1712         DB      042H,04CH,057H,048H,031H,035H,04BH,048H,05AH,000H
       485A00               
                       1715         PUBLIC  _WHITE100ParTxt
000472                 1716 _WHITE100ParTxt:
                       1717 ; rs232cmd.c  268       char code WHIT100ParTxt[]                               = "WHIT100";
000472 57484954453130  1718         DB      057H,048H,049H,054H,045H,031H,030H,030H,000H
       3000                 
                       1721         PUBLIC  _WHIT100ParTxt
00047B                 1722 _WHIT100ParTxt:
                       1723 ; rs232cmd.c  269       char code BLACKParTxt[]                                 = "BLACK";       
                                                    // Black
00047B 57484954313030  1724         DB      057H,048H,049H,054H,031H,030H,030H,000H
       00                   
                       1727         PUBLIC  _BLACKParTxt
000483                 1728 _BLACKParTxt:
                       1729 ; rs232cmd.c  270       char code BLACParTxt[]                                  = "BLAC";
000483 424C41434B00    1730         DB      042H,04CH,041H,043H,04BH,000H
                       1733         PUBLIC  _BLACParTxt
000489                 1734 _BLACParTxt:
                       1735 ; rs232cmd.c  271       
                       1736 ; rs232cmd.c  272       char code SDICHECKParTxt[]                      = "SDICHECK";            
                                    // Check field
000489 424C414300      1737         DB      042H,04CH,041H,043H,000H
                       1740         PUBLIC  _SDICHECKParTxt
00048E                 1741 _SDICHECKParTxt:
                       1742 ; rs232cmd.c  273       char code SDICParTxt[]                                  = "SDIC";
00048E 53444943484543  1743         DB      053H,044H,049H,043H,048H,045H,043H,04BH,000H
       4B00                 
                       1746         PUBLIC  _SDICParTxt
000497                 1747 _SDICParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  16

ADDR   CODE            LINE SOURCELINE
                       1748 ; rs232cmd.c  274       char code DGREYParTxt[]                                 = "DGREY";       
                                                    // Digital grey
000497 5344494300      1749         DB      053H,044H,049H,043H,000H
                       1752         PUBLIC  _DGREYParTxt
00049C                 1753 _DGREYParTxt:
                       1754 ; rs232cmd.c  275       char code DGRParTxt[]                                   = "DGR";
00049C 444752455900    1755         DB      044H,047H,052H,045H,059H,000H
                       1758         PUBLIC  _DGRParTxt
0004A2                 1759 _DGRParTxt:
                       1760 ; rs232cmd.c  276       char code STAIRCASE5ParTxt[]                    = "STAIRCASE5";         /
                            / 5-step staircase
0004A2 44475200        1761         DB      044H,047H,052H,000H
                       1764         PUBLIC  _STAIRCASE5ParTxt
0004A6                 1765 _STAIRCASE5ParTxt:
                       1766 ; rs232cmd.c  277       char code STA5ParTxt[]                                  = "STA5";
0004A6 53544149524341  1767         DB      053H,054H,041H,049H,052H,043H,041H,053H,045H,035H,000H
       53453500             
                       1770         PUBLIC  _STA5ParTxt
0004B1                 1771 _STA5ParTxt:
                       1772 ; rs232cmd.c  278       char code STAIRCASE10ParTxt[]           = "STAIRCASE10";                /
                            / 10-step staircase
0004B1 5354413500      1773         DB      053H,054H,041H,035H,000H
                       1776         PUBLIC  _STAIRCASE10ParTxt
0004B6                 1777 _STAIRCASE10ParTxt:
                       1778 ; rs232cmd.c  279       char code STA10ParTxt[]                                 = "STA10";
0004B6 53544149524341  1779         DB      053H,054H,041H,049H,052H,043H,041H,053H,045H,031H,030H,000H
       5345313000           
                       1782         PUBLIC  _STA10ParTxt
0004C2                 1783 _STA10ParTxt:
                       1784 ; rs232cmd.c  280       char code CROSSHATCHParTxt[]                    = "CROSSHATCH";         /
                            / Cross hatch
0004C2 535441313000    1785         DB      053H,054H,041H,031H,030H,000H
                       1788         PUBLIC  _CROSSHATCHParTxt
0004C8                 1789 _CROSSHATCHParTxt:
                       1790 ; rs232cmd.c  281       char code CROSParTxt[]                                  = "CROS";
0004C8 43524F53534841  1791         DB      043H,052H,04FH,053H,053H,048H,041H,054H,043H,048H,000H
       54434800             
                       1794         PUBLIC  _CROSParTxt
0004D3                 1795 _CROSParTxt:
                       1796 ; rs232cmd.c  282       char code PLUGEParTxt[]                                 = "PLUGE";       
                                                    // PLUGE
0004D3 43524F5300      1797         DB      043H,052H,04FH,053H,000H
                       1800         PUBLIC  _PLUGEParTxt
0004D8                 1801 _PLUGEParTxt:
                       1802 ; rs232cmd.c  283       char code PLUGParTxt[]                                  = "PLUG";
0004D8 504C55474500    1803         DB      050H,04CH,055H,047H,045H,000H
                       1806         PUBLIC  _PLUGParTxt
0004DE                 1807 _PLUGParTxt:
                       1808 ; rs232cmd.c  284       
                       1809 ; rs232cmd.c  285       char code ANALOGParTxt[]                                = "ANALOG";
0004DE 504C554700      1810         DB      050H,04CH,055H,047H,000H
                       1813         PUBLIC  _ANALOGParTxt
0004E3                 1814 _ANALOGParTxt:
                       1815 ; rs232cmd.c  286       char code ANALParTxt[]                                  = "ANAL";
0004E3 414E414C4F4700  1816         DB      041H,04EH,041H,04CH,04FH,047H,000H
                       1819         PUBLIC  _ANALParTxt
0004EA                 1820 _ANALParTxt:
                       1821 ; rs232cmd.c  287       char code AESEBUParTxt[]                                = "AESEBU";
0004EA 414E414C00      1822         DB      041H,04EH,041H,04CH,000H
                       1825         PUBLIC  _AESEBUParTxt
0004EF                 1826 _AESEBUParTxt:
                       1827 ; rs232cmd.c  288       char code AESParTxt[]                                   = "AES";
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  17

ADDR   CODE            LINE SOURCELINE
0004EF 41455345425500  1828         DB      041H,045H,053H,045H,042H,055H,000H
                       1831         PUBLIC  _AESParTxt
0004F6                 1832 _AESParTxt:
                       1833 ; rs232cmd.c  289       
                       1834 ; rs232cmd.c  290       char code F441KHZParTxt[]                               = "F441KHZ";
0004F6 41455300        1835         DB      041H,045H,053H,000H
                       1838         PUBLIC  _F441KHZParTxt
0004FA                 1839 _F441KHZParTxt:
                       1840 ; rs232cmd.c  291       char code F48KHZParTxt[]                                = "F48KHZ";
0004FA 463434314B485A  1841         DB      046H,034H,034H,031H,04BH,048H,05AH,000H
       00                   
                       1844         PUBLIC  _F48KHZParTxt
000502                 1845 _F48KHZParTxt:
                       1846 ; rs232cmd.c  292       char code F45MHZParTxt[]                                = "F45MHZ";
000502 4634384B485A00  1847         DB      046H,034H,038H,04BH,048H,05AH,000H
                       1850         PUBLIC  _F45MHZParTxt
000509                 1851 _F45MHZParTxt:
                       1852 ; rs232cmd.c  293       
                       1853 ; rs232cmd.c  294       char code S500HZParTxt[]                                = "S500HZ";      
                                                    // Stereo 500 Hz
000509 4634354D485A00  1854         DB      046H,034H,035H,04DH,048H,05AH,000H
                       1857         PUBLIC  _S500HZParTxt
000510                 1858 _S500HZParTxt:
                       1859 ; rs232cmd.c  295       char code S1KHZParTxt[]                                 = "S1KHZ";       
                                            // Stereo 1 kHz
000510 53353030485A00  1860         DB      053H,035H,030H,030H,048H,05AH,000H
                       1863         PUBLIC  _S1KHZParTxt
000517                 1864 _S1KHZParTxt:
                       1865 ; rs232cmd.c  296       char code SEBU1KHZParTxt[]                              = "SEBU1KHZ";    
                                            // Stereo EBU 1 kHz
000517 53314B485A00    1866         DB      053H,031H,04BH,048H,05AH,000H
                       1869         PUBLIC  _SEBU1KHZParTxt
00051D                 1870 _SEBU1KHZParTxt:
                       1871 ; rs232cmd.c  297       char code S8KHZParTxt[]                                 = "S8KHZ";       
                                                    // Stereo 8 kHz
00051D 53454255314B48  1872         DB      053H,045H,042H,055H,031H,04BH,048H,05AH,000H
       5A00                 
                       1875         PUBLIC  _S8KHZParTxt
000526                 1876 _S8KHZParTxt:
                       1877 ; rs232cmd.c  298       
                       1878 ; rs232cmd.c  299       char code SILENCEParTxt[]                               = "SILENCE";
000526 53384B485A00    1879         DB      053H,038H,04BH,048H,05AH,000H
                       1882         PUBLIC  _SILENCEParTxt
00052C                 1883 _SILENCEParTxt:
                       1884 ; rs232cmd.c  300       char code SILParTxt[]                                   = "SIL";
00052C 53494C454E4345  1885         DB      053H,049H,04CH,045H,04EH,043H,045H,000H
       00                   
                       1888         PUBLIC  _SILParTxt
000534                 1889 _SILParTxt:
                       1890 ; rs232cmd.c  301       
                       1891 ; rs232cmd.c  302       char code DMYParTxt[]                                   = "DMY";
000534 53494C00        1892         DB      053H,049H,04CH,000H
                       1895         PUBLIC  _DMYParTxt
000538                 1896 _DMYParTxt:
                       1897 ; rs232cmd.c  303       char code MDYParTxt[]                                   = "MDY";
000538 444D5900        1898         DB      044H,04DH,059H,000H
                       1901         PUBLIC  _MDYParTxt
00053C                 1902 _MDYParTxt:
                       1903 ; rs232cmd.c  304       char code YMDParTxt[]                                   = "YMD";
00053C 4D445900        1904         DB      04DH,044H,059H,000H
                       1907         PUBLIC  _YMDParTxt
000540                 1908 _YMDParTxt:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  18

ADDR   CODE            LINE SOURCELINE
                       1909 ; rs232cmd.c  305       
                       1910 ; rs232cmd.c  306       char code BBParTxt[]                                    = "BB";
000540 594D4400        1911         DB      059H,04DH,044H,000H
                       1914         PUBLIC  _BBParTxt
000544                 1915 _BBParTxt:
                       1916 ; rs232cmd.c  307       char code SPGParTxt[]                                   = "SPG";
000544 424200          1917         DB      042H,042H,000H
                       1920         PUBLIC  _SPGParTxt
000547                 1921 _SPGParTxt:
                       1922 ; rs232cmd.c  308       
                       1923 ; rs232cmd.c  309       char code OFFParTxt[]                                   = "OFF";
000547 53504700        1924         DB      053H,050H,047H,000H
                       1927         PUBLIC  _OFFParTxt
00054B                 1928 _OFFParTxt:
                       1929 ; rs232cmd.c  310       char code ONParTxt[]                                    = "ON";
00054B 4F464600        1930         DB      04FH,046H,046H,000H
                       1933         PUBLIC  _ONParTxt
00054F                 1934 _ONParTxt:
                       1935 ; rs232cmd.c  311       
                       1936 ; rs232cmd.c  312       char code UPParTxt[]                                    = "UP";
00054F 4F4E00          1937         DB      04FH,04EH,000H
                       1940         PUBLIC  _UPParTxt
000552                 1941 _UPParTxt:
                       1942 ; rs232cmd.c  313       char code DOWNParTxt[]                                  = "DOWN";
000552 555000          1943         DB      055H,050H,000H
                       1946         PUBLIC  _DOWNParTxt
000555                 1947 _DOWNParTxt:
                       1948 ; rs232cmd.c  314       
                       1949 ; rs232cmd.c  315       char code NORMALParTxt[]                                = "NORMAL";
000555 444F574E00      1950         DB      044H,04FH,057H,04EH,000H
                       1953         PUBLIC  _NORMALParTxt
00055A                 1954 _NORMALParTxt:
                       1955 ; rs232cmd.c  316       char code NORMParTxt[]                                  = "NORM";
00055A 4E4F524D414C00  1956         DB      04EH,04FH,052H,04DH,041H,04CH,000H
                       1959         PUBLIC  _NORMParTxt
000561                 1960 _NORMParTxt:
                       1961 ; rs232cmd.c  317       
                       1962 ; rs232cmd.c  318       char code MINParTxt[]                                   = "MIN";
000561 4E4F524D00      1963         DB      04EH,04FH,052H,04DH,000H
                       1966         PUBLIC  _MINParTxt
000566                 1967 _MINParTxt:
                       1968 ; rs232cmd.c  319       char code MAXParTxt[]                                   = "MAX";
000566 4D494E00        1969         DB      04DH,049H,04EH,000H
                       1972         PUBLIC  _MAXParTxt
00056A                 1973 _MAXParTxt:
                       1974 ; rs232cmd.c  320       
                       1975 ; rs232cmd.c  321       
                       1976 ; rs232cmd.c  322       void CLSCommand( void);
                       1977 ; rs232cmd.c  323       void ESECommand( void);
                       1978 ; rs232cmd.c  324       void ESRCommand( void);
                       1979 ; rs232cmd.c  325       void OPCCommand( void);
                       1980 ; rs232cmd.c  326       void SRECommand( void);
                       1981 ; rs232cmd.c  327       void STBCommand( void);
                       1982 ; rs232cmd.c  328       void TSTCommand( void);
                       1983 ; rs232cmd.c  329       void WAICommand( void);
                       1984 ; rs232cmd.c  330       void RSTCommand( void);
                       1985 ; rs232cmd.c  331       void IDNCommand( void);
                       1986 ; rs232cmd.c  332       void RCLCommand( void);
                       1987 ; rs232cmd.c  333       void SAVCommand( void);
                       1988 ; rs232cmd.c  334       
                       1989 ; rs232cmd.c  335       void SystemError( void);
                       1990 ; rs232cmd.c  336       void SystemVersion( void);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  19

ADDR   CODE            LINE SOURCELINE
                       1991 ; rs232cmd.c  337       void SystemTime( void);
                       1992 ; rs232cmd.c  338       void SystemDate( void);
                       1993 ; rs232cmd.c  339       
                       1994 ; rs232cmd.c  340       void SystemPresetName( void);
                       1995 ; rs232cmd.c  341       void SystemPresetAuthor( void);
                       1996 ; rs232cmd.c  342       void SystemPresetDate( void);
                       1997 ; rs232cmd.c  343       void SystemPresetDownload( void);
                       1998 ; rs232cmd.c  344       void SystemPresetUpload( void);
                       1999 ; rs232cmd.c  345       
                       2000 ; rs232cmd.c  346       void StatusOperEvent( void);
                       2001 ; rs232cmd.c  347       void StatusOperCondition( void);
                       2002 ; rs232cmd.c  348       void StatusOperEnable( void);
                       2003 ; rs232cmd.c  349       void StatusQuestEvent( void);
                       2004 ; rs232cmd.c  350       void StatusQuestCondition( void);
                       2005 ; rs232cmd.c  351       void StatusQuestEnable( void);
                       2006 ; rs232cmd.c  352       void StatusPreset( void);
                       2007 ; rs232cmd.c  353       
                       2008 ; rs232cmd.c  354       void GenlockGen( void);
                       2009 ; rs232cmd.c  355       void GenlockGenSystem( void);
                       2010 ; rs232cmd.c  356       void GenlockGenDelay( void);
                       2011 ; rs232cmd.c  357       void GenlockGenCalibrateEnable( void);
                       2012 ; rs232cmd.c  358       void GenlockGenCalibrateAdjust( void);
                       2013 ; rs232cmd.c  359       void GenlockGenCalibrateStore( void);
                       2014 ; rs232cmd.c  360       
                       2015 ; rs232cmd.c  361       void BBGenSuffix( void);
                       2016 ; rs232cmd.c  362       void BBGen( void);
                       2017 ; rs232cmd.c  363       void BBGenSystem( void);
                       2018 ; rs232cmd.c  364       void BBGenDelay( void);
                       2019 ; rs232cmd.c  365       void BBGenScHPhase( void);
                       2020 ; rs232cmd.c  366       
                       2021 ; rs232cmd.c  367       void TSGen( void);
                       2022 ; rs232cmd.c  368       void TSGenPattern( void);
                       2023 ; rs232cmd.c  369       void TSGenSystem( void);
                       2024 ; rs232cmd.c  370       void TSGenDelay( void);
                       2025 ; rs232cmd.c  371       void TSGenScHPhase( void);
                       2026 ; rs232cmd.c  372       void TSGenEmbAudioSignal( void);
                       2027 ; rs232cmd.c  373       
                       2028 ; rs232cmd.c  374       void AudioGenOutput( void);
                       2029 ; rs232cmd.c  375       
                       2030 ; rs232cmd.c  376       void AudioGenAnalog( void);
                       2031 ; rs232cmd.c  377       void AudioGenAnalogSignal( void);
                       2032 ; rs232cmd.c  378       void AudioGenAnalogLevel( void);
                       2033 ; rs232cmd.c  379       void AudioGenAnalogClick( void);
                       2034 ; rs232cmd.c  380       
                       2035 ; rs232cmd.c  381       void AudioGenAESEBU( void);
                       2036 ; rs232cmd.c  382       void AudioGenAESEBUSystem( void);
                       2037 ; rs232cmd.c  383       void AudioGenAESEBUSignal( void);
                       2038 ; rs232cmd.c  384       void AudioGenAESEBULevel( void);
                       2039 ; rs232cmd.c  385       void AudioGenAESEBUTiming( void);
                       2040 ; rs232cmd.c  386       void AudioGenAESEBUWordClock( void);
                       2041 ; rs232cmd.c  387       void AudioGenAESEBUClick( void);
                       2042 ; rs232cmd.c  388       
                       2043 ; rs232cmd.c  389       void FactPassword( void);
                       2044 ; rs232cmd.c  390       void FactReset( void);
                       2045 ; rs232cmd.c  391       void FactV24Command( void);
                       2046 ; rs232cmd.c  392       void FactV24Transparent( void);
                       2047 ; rs232cmd.c  393       
                       2048 ; rs232cmd.c  394       void FactChecksumCode( void);
                       2049 ; rs232cmd.c  395       void FactChecksumPLD( void);
                       2050 ; rs232cmd.c  396       void FactChecksumEmbAudio( void);
                       2051 ; rs232cmd.c  397       void FactChecksumPattern( void);
                       2052 ; rs232cmd.c  398       void FactChecksumRange( void);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  20

ADDR   CODE            LINE SOURCELINE
                       2053 ; rs232cmd.c  399       
                       2054 ; rs232cmd.c  400       void FactMainVersion( void);
                       2055 ; rs232cmd.c  401       void FactMainIDNCompany( void);
                       2056 ; rs232cmd.c  402       void FactMainIDNType( void);
                       2057 ; rs232cmd.c  403       void FactMainIDNKUNumber( void);
                       2058 ; rs232cmd.c  404       void FactMainIDNSWRevision( void);
                       2059 ; rs232cmd.c  405       
                       2060 ; rs232cmd.c  406       void FactMainSystem( void);
                       2061 ; rs232cmd.c  407       void FactMainFMSDateProd( void);
                       2062 ; rs232cmd.c  408       void FactMainFMSDateUpd( void);
                       2063 ; rs232cmd.c  409       
                       2064 ; rs232cmd.c  410       void FactGenlockGenDate( void);
                       2065 ; rs232cmd.c  411       void FactGenlockGenVersion( void);
                       2066 ; rs232cmd.c  412       void FactGenlockGenFRefDate( void);
                       2067 ; rs232cmd.c  413       void FactGenlockGenFRefDAC( void);
                       2068 ; rs232cmd.c  414       void FactGenlockGenURefDate( void);
                       2069 ; rs232cmd.c  415       void FactGenlockGenURefDAC( void);
                       2070 ; rs232cmd.c  416       void FactGenlockGenHPHZero( void);
                       2071 ; rs232cmd.c  417       void FactGenlockGenPhase( void);
                       2072 ; rs232cmd.c  418       
                       2073 ; rs232cmd.c  419       void FactBBGenDate( void);
                       2074 ; rs232cmd.c  420       void FactBBGenVersion( void);
                       2075 ; rs232cmd.c  421       void FactBBGenSignal( void);
                       2076 ; rs232cmd.c  422       void FactBBGenPhase( void);
                       2077 ; rs232cmd.c  423       void FactBBGenScHPhase( void);
                       2078 ; rs232cmd.c  424       void FactBBGenDAC( void);
                       2079 ; rs232cmd.c  425       
                       2080 ; rs232cmd.c  426       void FactTSGenDate( void);
                       2081 ; rs232cmd.c  427       void FactTSGenAGain( void);
                       2082 ; rs232cmd.c  428       void FactTSGenCGain( void);
                       2083 ; rs232cmd.c  429       void FactTSGenPhase( void);
                       2084 ; rs232cmd.c  430       void FactTSGenScHPhase( void);
                       2085 ; rs232cmd.c  431       
                       2086 ; rs232cmd.c  432       void FactAudioGenStatus( void);
                       2087 ; rs232cmd.c  433       void FactAudioGenDate( void);
                       2088 ; rs232cmd.c  434       void FactAudioGenLevel( void);
                       2089 ; rs232cmd.c  435       
                       2090 ; rs232cmd.c  436       void FactPLDVersion( void);
                       2091 ; rs232cmd.c  437       void FactTCXOStatus( void);
                       2092 ; rs232cmd.c  438       void FactMultiMediaChip( void);
                       2093 ; rs232cmd.c  439       
                       2094 ; rs232cmd.c  440       int FindParameter( char* par, struct PAR_STRUCT code* TmpPtr);
                       2095 ; rs232cmd.c  441       
                       2096 ; rs232cmd.c  442       long FLTToSamples( UC system, int F, int L, float T);
                       2097 ; rs232cmd.c  443       void PrintSamplesToFLT( UC system, long samples);
                       2098 ; rs232cmd.c  444       
                       2099 ; rs232cmd.c  445       // **********************************************************************
                            ****
                       2100 ; rs232cmd.c  446       struct CMD_STRUCT code Mandated[12] = {
00056A 4D415800        2101         DB      04DH,041H,058H,000H
                       2122         PUBLIC  _Mandated
                       2123         ALIGN   1
00056E                 2124 _Mandated:
00056E rrrrrrrrrrrrrr  2125         DD      _CLSCmdTxt
       rr                   
000572 00000000        2126         DD      000000000H
000576 rrrrrrrrrrrrrr  2127         DD      _Mandated+24
       rr                   
00057A 00000000000000  2128         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  21

ADDR   CODE            LINE SOURCELINE
000582 rrrrrrrrrrrrrr  2129         DD      _CLSCommand,_ESECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00058A 00000000        2130         DD      000000000H
00058E rrrrrrrrrrrrrr  2131         DD      _Mandated+48
       rr                   
000592 00000000000000  2132         DD      000000000H,000000000H
       00                   
00059A rrrrrrrrrrrrrr  2133         DD      _ESECommand,_ESRCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005A2 00000000        2134         DD      000000000H
0005A6 rrrrrrrrrrrrrr  2135         DD      _Mandated+72
       rr                   
0005AA 00000000000000  2136         DD      000000000H,000000000H
       00                   
0005B2 rrrrrrrrrrrrrr  2137         DD      _ESRCommand,_IDNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005BA 00000000        2138         DD      000000000H
0005BE rrrrrrrrrrrrrr  2139         DD      _Mandated+96
       rr                   
0005C2 00000000000000  2140         DD      000000000H,000000000H
       00                   
0005CA rrrrrrrrrrrrrr  2141         DD      _IDNCommand,_OPCCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005D2 00000000        2142         DD      000000000H
0005D6 rrrrrrrrrrrrrr  2143         DD      _Mandated+120
       rr                   
0005DA 00000000000000  2144         DD      000000000H,000000000H
       00                   
0005E2 rrrrrrrrrrrrrr  2145         DD      _OPCCommand,_RSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0005EA 00000000        2146         DD      000000000H
0005EE rrrrrrrrrrrrrr  2147         DD      _Mandated+144
       rr                   
0005F2 00000000000000  2148         DD      000000000H,000000000H
       00                   
0005FA rrrrrrrrrrrrrr  2149         DD      _RSTCommand,_SRECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000602 00000000        2150         DD      000000000H
000606 rrrrrrrrrrrrrr  2151         DD      _Mandated+168
       rr                   
00060A 00000000000000  2152         DD      000000000H,000000000H
       00                   
000612 rrrrrrrrrrrrrr  2153         DD      _SRECommand,_STBCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00061A 00000000        2154         DD      000000000H
00061E rrrrrrrrrrrrrr  2155         DD      _Mandated+192
       rr                   
000622 00000000000000  2156         DD      000000000H,000000000H
       00                   
00062A rrrrrrrrrrrrrr  2157         DD      _STBCommand,_TSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000632 00000000        2158         DD      000000000H
000636 rrrrrrrrrrrrrr  2159         DD      _Mandated+216
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  22

ADDR   CODE            LINE SOURCELINE
00063A 00000000000000  2160         DD      000000000H,000000000H
       00                   
000642 rrrrrrrrrrrrrr  2161         DD      _TSTCommand,_RCLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00064A 00000000        2162         DD      000000000H
00064E rrrrrrrrrrrrrr  2163         DD      _Mandated+240
       rr                   
000652 00000000000000  2164         DD      000000000H,000000000H
       00                   
00065A rrrrrrrrrrrrrr  2165         DD      _RCLCommand,_SAVCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000662 00000000        2166         DD      000000000H
000666 rrrrrrrrrrrrrr  2167         DD      _Mandated+264
       rr                   
00066A 00000000000000  2168         DD      000000000H,000000000H
       00                   
000672 rrrrrrrrrrrrrr  2169         DD      _SAVCommand,_WAICmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00067A 00000000000000  2170         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2171 ; rs232cmd.c  447               { CLSCmdTxt, NULL, &Mandated[1],  NULL, NONE, CLSCommand},
                       2172 ; rs232cmd.c  448               { ESECmdTxt, NULL, &Mandated[2],  NULL, NONE, ESECommand},
                       2173 ; rs232cmd.c  449               { ESRCmdTxt, NULL, &Mandated[3],  NULL, NONE, ESRCommand},
                       2174 ; rs232cmd.c  450               { IDNCmdTxt, NULL, &Mandated[4],  NULL, NONE, IDNCommand},
                       2175 ; rs232cmd.c  451               { OPCCmdTxt, NULL, &Mandated[5],  NULL, NONE, OPCCommand},
                       2176 ; rs232cmd.c  452               { RSTCmdTxt, NULL, &Mandated[6],  NULL, NONE, RSTCommand},
                       2177 ; rs232cmd.c  453               { SRECmdTxt, NULL, &Mandated[7],  NULL, NONE, SRECommand},
                       2178 ; rs232cmd.c  454               { STBCmdTxt, NULL, &Mandated[8],  NULL, NONE, STBCommand},
                       2179 ; rs232cmd.c  455               { TSTCmdTxt, NULL, &Mandated[9],  NULL, NONE, TSTCommand},
                       2180 ; rs232cmd.c  456               { RCLCmdTxt, NULL, &Mandated[10], NULL, NONE, RCLCommand},
                       2181 ; rs232cmd.c  457               { SAVCmdTxt, NULL, &Mandated[11], NULL, NONE, SAVCommand},
                       2182 ; rs232cmd.c  458               { WAICmdTxt, NULL, NULL         , NULL, NONE, WAICommand}
                       2183 ; rs232cmd.c  459       };
                       2184 ; rs232cmd.c  460       
                       2185 ; rs232cmd.c  461       struct CMD_STRUCT code Subsystem[9] = {
00068A rrrrrrrrrrrrrr  2186         DD      _WAICommand
       rr                   
                       2190         PUBLIC  _Subsystem
                       2191         ALIGN   1
00068E                 2192 _Subsystem:
00068E rrrrrrrrrrrrrr  2193         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000696 rrrrrrrrrrrrrr  2194         DD      _Subsystem+24
       rr                   
00069A rrrrrrrrrrrrrr  2195         DD      _System
       rr                   
00069E 00000000000000  2196         DD      000000000H,000000000H
       00                   
0006A6 rrrrrrrrrrrrrr  2197         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006AE rrrrrrrrrrrrrr  2198         DD      _Subsystem+48
       rr                   
0006B2 rrrrrrrrrrrrrr  2199         DD      _Status
       rr                   
0006B6 00000000000000  2200         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  23

ADDR   CODE            LINE SOURCELINE
0006BE rrrrrrrrrrrrrr  2201         DD      _DIAGNOSTICCmdTxt,_DIAGCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006C6 rrrrrrrrrrrrrr  2202         DD      _Subsystem+72
       rr                   
0006CA 00000000000000  2203         DD      000000000H,000000000H,000000000H
       0000000000           
0006D6 rrrrrrrrrrrrrr  2204         DD      _MONITORCmdTxt,_MONCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006DE rrrrrrrrrrrrrr  2205         DD      _Subsystem+96
       rr                   
0006E2 00000000000000  2206         DD      000000000H,000000000H,000000000H
       0000000000           
0006EE rrrrrrrrrrrrrr  2207         DD      _INPUTCmdTxt,_INPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0006F6 rrrrrrrrrrrrrr  2208         DD      _Subsystem+120
       rr                   
0006FA rrrrrrrrrrrrrr  2209         DD      _Input
       rr                   
0006FE 00000000000000  2210         DD      000000000H,000000000H
       00                   
000706 rrrrrrrrrrrrrr  2211         DD      _OUTPUTCmdTxt,_OUTPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00070E rrrrrrrrrrrrrr  2212         DD      _Subsystem+144
       rr                   
000712 rrrrrrrrrrrrrr  2213         DD      _Output
       rr                   
000716 00000000000000  2214         DD      000000000H,000000000H
       00                   
00071E rrrrrrrrrrrrrr  2215         DD      _USERCmdTxt,_USERCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000726 rrrrrrrrrrrrrr  2216         DD      _Subsystem+168
       rr                   
00072A 00000000000000  2217         DD      000000000H,000000000H,000000000H
       0000000000           
000736 rrrrrrrrrrrrrr  2218         DD      _MEASURECmdTxt,_MEASCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00073E rrrrrrrrrrrrrr  2219         DD      _Subsystem+192
       rr                   
000742 00000000000000  2220         DD      000000000H,000000000H,000000000H
       0000000000           
00074E rrrrrrrrrrrrrr  2221         DD      _FACTORYCmdTxt,_FACTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000756 00000000        2222         DD      000000000H
00075A rrrrrrrrrrrrrr  2223         DD      _Factory
       rr                   
                       2224 ; rs232cmd.c  462               { SYSTEMCmdTxt,   SYSTCmdTxt, &Subsystem[1], &System[0],  NONE, N
                            ONE},
                       2225 ; rs232cmd.c  463               { STATUSCmdTxt,           STATCmdTxt, &Subsystem[2], &Status[0], 
                             NONE, NONE},
                       2226 ; rs232cmd.c  464               { DIAGNOSTICCmdTxt, DIAGCmdTxt, &Subsystem[3], NULL,             
                              NONE, NONE},
                       2227 ; rs232cmd.c  465               { MONITORCmdTxt,          MONCmdTxt,  &Subsystem[4], NULL,       
                                       NONE, NONE},
                       2228 ; rs232cmd.c  466               { INPUTCmdTxt,    INPCmdTxt,  &Subsystem[5], &Input[0],   NONE, N
                            ONE},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  24

ADDR   CODE            LINE SOURCELINE
                       2229 ; rs232cmd.c  467               { OUTPUTCmdTxt,           OUTPCmdTxt, &Subsystem[6], &Output[0], 
                             NONE, NONE},
                       2230 ; rs232cmd.c  468               { USERCmdTxt,             USERCmdTxt, &Subsystem[7], NULL,       
                                       NONE, NONE},
                       2231 ; rs232cmd.c  469               { MEASURECmdTxt,          MEASCmdTxt, &Subsystem[8], NULL,       
                                       NONE, NONE},
                       2232 ; rs232cmd.c  470               { FACTORYCmdTxt,          FACTCmdTxt, NULL,                      
                             &Factory[0], NONE, NONE},
                       2233 ; rs232cmd.c  471       };
                       2234 ; rs232cmd.c  472       
                       2235 ; rs232cmd.c  473       // **********************************************************************
                            ****
                       2236 ; rs232cmd.c  474       /*      CMD:    SUB1:   SUB2:   SUB3:   PARM:
                       2237 ; rs232cmd.c  475                       SYSTem
                       2238 ; rs232cmd.c  476                               :ERRor?
                       2239 ; rs232cmd.c  477               :VERSion?
                       2240 ; rs232cmd.c  478                   :PRESet<?>
                       2241 ; rs232cmd.c  479                       [:ACTIVE?]
                       2242 ; rs232cmd.c  480                       :RECall<?>      1 .. 4
                       2243 ; rs232cmd.c  481                 :STORe                        1 .. 4
                       2244 ; rs232cmd.c  482               :NAMe<?>                1 .. 4 , <name>
                       2245 ; rs232cmd.c  483               :AUTHor<?>      1 .. 4 , <author name>
                       2246 ; rs232cmd.c  484                     :DATE<?>          1 .. 4[, <year>,<month>,<date>]
                       2247 ; rs232cmd.c  485                                       :DOWNload               1 .. 4
                       2248 ; rs232cmd.c  486                                       :UPLoad                 1 .. 4
                       2249 ; rs232cmd.c  487               :EVENtlog
                       2250 ; rs232cmd.c  488               :DATE
                       2251 ; rs232cmd.c  489               :TIME
                       2252 ; rs232cmd.c  490       */
                       2253 ; rs232cmd.c  491       struct CMD_STRUCT code System[6] = {
00075E 00000000000000  2254         DD      000000000H,000000000H
       00                   
                       2258         PUBLIC  _System
                       2259         ALIGN   1
000766                 2260 _System:
000766 rrrrrrrrrrrrrr  2261         DD      _ERRORCmdTxt,_ERRCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00076E rrrrrrrrrrrrrr  2262         DD      _System+24
       rr                   
000772 00000000000000  2263         DD      000000000H,000000000H
       00                   
00077A rrrrrrrrrrrrrr  2264         DD      _SystemError,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000786 rrrrrrrrrrrrrr  2265         DD      _System+48
       rr                   
00078A 00000000000000  2266         DD      000000000H,000000000H
       00                   
000792 rrrrrrrrrrrrrr  2267         DD      _SystemVersion,_PRESETCmdTxt,_PRESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00079E rrrrrrrrrrrrrr  2268         DD      _System+72
       rr                   
0007A2 rrrrrrrrrrrrrr  2269         DD      _SystemLevel1
       rr                   
0007A6 00000000        2270         DD      000000000H
0007AA rrrrrrrrrrrrrr  2271         DD      _RCLCommand,_EVENTLOGCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  25

ADDR   CODE            LINE SOURCELINE
0007B6 rrrrrrrrrrrrrr  2272         DD      _System+96
       rr                   
0007BA 00000000000000  2273         DD      000000000H,000000000H,000000000H
       0000000000           
0007C6 rrrrrrrrrrrrrr  2274         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0007CE rrrrrrrrrrrrrr  2275         DD      _System+120
       rr                   
0007D2 00000000000000  2276         DD      000000000H,000000000H,000000000H
       0000000000           
0007DE rrrrrrrrrrrrrr  2277         DD      _TIMECmdTxt,_TIMECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       2278 ; rs232cmd.c  492               { ERRORCmdTxt,  ERRCmdTxt,      &System[1], NULL,                
                                            NONE, SystemError},
                       2279 ; rs232cmd.c  493               { VERSIONCmdTxt,        VERSCmdTxt, &System[2], NULL,            
                                            NONE, SystemVersion},
                       2280 ; rs232cmd.c  494               { PRESETCmdTxt,         PRESCmdTxt, &System[3], &SystemLevel1[0],
                             NONE, RCLCommand},
                       2281 ; rs232cmd.c  495               { EVENTLOGCmdTxt, EVENCmdTxt, &System[4], NULL,                  
                                            NONE, NONE},
                       2282 ; rs232cmd.c  496               { DATECmdTxt,           DATECmdTxt, &System[5], NULL,            
                                            NONE, NONE},
                       2283 ; rs232cmd.c  497               { TIMECmdTxt,           TIMECmdTxt, NULL,               NULL,    
                                                    NONE, NONE}
                       2284 ; rs232cmd.c  498       };
                       2285 ; rs232cmd.c  499       
                       2286 ; rs232cmd.c  500       struct CMD_STRUCT code SystemLevel1[7] = {
0007E6 00000000000000  2287         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2291         PUBLIC  _SystemLevel1
                       2292         ALIGN   1
0007F6                 2293 _SystemLevel1:
0007F6 rrrrrrrrrrrrrr  2294         DD      _RECALLCmdTxt,_RECCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0007FE rrrrrrrrrrrrrr  2295         DD      _SystemLevel1+24
       rr                   
000802 00000000000000  2296         DD      000000000H,000000000H
       00                   
00080A rrrrrrrrrrrrrr  2297         DD      _RCLCommand,_STORECmdTxt,_STORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000816 rrrrrrrrrrrrrr  2298         DD      _SystemLevel1+48
       rr                   
00081A 00000000000000  2299         DD      000000000H,000000000H
       00                   
000822 rrrrrrrrrrrrrr  2300         DD      _SAVCommand,_NAMECmdTxt,_NAMECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00082E rrrrrrrrrrrrrr  2301         DD      _SystemLevel1+72
       rr                   
000832 00000000000000  2302         DD      000000000H,000000000H
       00                   
00083A rrrrrrrrrrrrrr  2303         DD      _SystemPresetName,_AUTHORCmdTxt,_AUTHCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  26

ADDR   CODE            LINE SOURCELINE
000846 rrrrrrrrrrrrrr  2304         DD      _SystemLevel1+96
       rr                   
00084A 00000000000000  2305         DD      000000000H,000000000H
       00                   
000852 rrrrrrrrrrrrrr  2306         DD      _SystemPresetAuthor,_DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00085E rrrrrrrrrrrrrr  2307         DD      _SystemLevel1+120
       rr                   
000862 00000000000000  2308         DD      000000000H,000000000H
       00                   
00086A rrrrrrrrrrrrrr  2309         DD      _SystemPresetDate,_DOWNLOADCmdTxt,_DOWNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000876 rrrrrrrrrrrrrr  2310         DD      _SystemLevel1+144
       rr                   
00087A 00000000000000  2311         DD      000000000H,000000000H
       00                   
000882 rrrrrrrrrrrrrr  2312         DD      _SystemPresetDownload,_UPLOADCmdTxt,_UPLCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00088E 00000000000000  2313         DD      000000000H,000000000H,000000000H
       0000000000           
                       2314 ; rs232cmd.c  501               { RECALLCmdTxt,   RECCmdTxt,    &SystemLevel1[1], NULL, NONE, RCL
                            Command},
                       2315 ; rs232cmd.c  502               { STORECmdTxt,    STORCmdTxt, &SystemLevel1[2], NULL, NONE, SAVCo
                            mmand},
                       2316 ; rs232cmd.c  503               { NAMECmdTxt,      NAMECmdTxt, &SystemLevel1[3],        NULL, NON
                            E, SystemPresetName},
                       2317 ; rs232cmd.c  504               { AUTHORCmdTxt,   AUTHCmdTxt, &SystemLevel1[4], NULL, NONE, Syste
                            mPresetAuthor},
                       2318 ; rs232cmd.c  505               { DATECmdTxt,      DATECmdTxt, &SystemLevel1[5],        NULL, NON
                            E, SystemPresetDate},
                       2319 ; rs232cmd.c  506               { DOWNLOADCmdTxt, DOWNCmdTxt,   &SystemLevel1[6],       NULL, NON
                            E, SystemPresetDownload},
                       2320 ; rs232cmd.c  507               { UPLOADCmdTxt,         UPLCmdTxt,      NULL,                    
                                    NULL, NONE, SystemPresetUpload},
                       2321 ; rs232cmd.c  508       };
                       2322 ; rs232cmd.c  509       
                       2323 ; rs232cmd.c  510       // **********************************************************************
                            ****
                       2324 ; rs232cmd.c  511       /*      CMD:    SUB1:   SUB2:   SUB3:   PARM:
                       2325 ; rs232cmd.c  512                       STATus
                       2326 ; rs232cmd.c  513                               :OPERation
                       2327 ; rs232cmd.c  514                               :EVENt?
                       2328 ; rs232cmd.c  515                     :CONDition?
                       2329 ; rs232cmd.c  516                   :ENABle<?>  0 .. 65535
                       2330 ; rs232cmd.c  517                       :QUEStionable
                       2331 ; rs232cmd.c  518                       :EVENt?
                       2332 ; rs232cmd.c  519                     :CONDition?
                       2333 ; rs232cmd.c  520                   :ENABle<?>  0 .. 65535
                       2334 ; rs232cmd.c  521                               :PRESet                         TBD
                       2335 ; rs232cmd.c  522                   :PT5201?
                       2336 ; rs232cmd.c  523       */
                       2337 ; rs232cmd.c  524       struct CMD_STRUCT code Status[3] = {
00089A rrrrrrrrrrrrrr  2338         DD      _SystemPresetUpload
       rr                   
                       2342         PUBLIC  _Status
                       2343         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  27

ADDR   CODE            LINE SOURCELINE
00089E                 2344 _Status:
00089E rrrrrrrrrrrrrr  2345         DD      _OPERATIONCmdTxt,_OPERCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0008A6 rrrrrrrrrrrrrr  2346         DD      _Status+24
       rr                   
0008AA rrrrrrrrrrrrrr  2347         DD      _StatusLevel1_1
       rr                   
0008AE 00000000        2348         DD      000000000H
0008B2 rrrrrrrrrrrrrr  2349         DD      _StatusOperEvent,_QUESTIONABLECmdTxt,_QUESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0008BE rrrrrrrrrrrrrr  2350         DD      _Status+48
       rr                   
0008C2 rrrrrrrrrrrrrr  2351         DD      _StatusLevel1_2
       rr                   
0008C6 00000000        2352         DD      000000000H
0008CA rrrrrrrrrrrrrr  2353         DD      _StatusQuestEvent,_PRESETCmdTxt,_PRESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0008D6 00000000000000  2354         DD      000000000H,000000000H,000000000H
       0000000000           
                       2355 ; rs232cmd.c  525               { OPERATIONCmdTxt,       OPERCmdTxt, &Status[1], &StatusLevel1_1[
                            0], NONE, StatusOperEvent},
                       2356 ; rs232cmd.c  526               { QUESTIONABLECmdTxt, QUESCmdTxt, &Status[2], &StatusLevel1_2[0],
                             NONE, StatusQuestEvent},
                       2357 ; rs232cmd.c  527               { PRESETCmdTxt,                  PRESCmdTxt, NULL,               
                            NULL,                                   NONE, StatusPreset},
                       2358 ; rs232cmd.c  528       };
                       2359 ; rs232cmd.c  529       
                       2360 ; rs232cmd.c  530       struct CMD_STRUCT code StatusLevel1_1[3] = {
0008E2 rrrrrrrrrrrrrr  2361         DD      _StatusPreset
       rr                   
                       2364         PUBLIC  _StatusLevel1_1
                       2365         ALIGN   1
0008E6                 2366 _StatusLevel1_1:
0008E6 rrrrrrrrrrrrrr  2367         DD      _EVENTCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0008EE rrrrrrrrrrrrrr  2368         DD      _StatusLevel1_1+24
       rr                   
0008F2 00000000000000  2369         DD      000000000H,000000000H
       00                   
0008FA rrrrrrrrrrrrrr  2370         DD      _StatusOperEvent,_CONDITIONCmdTxt,_CONDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000906 rrrrrrrrrrrrrr  2371         DD      _StatusLevel1_1+48
       rr                   
00090A 00000000000000  2372         DD      000000000H,000000000H
       00                   
000912 rrrrrrrrrrrrrr  2373         DD      _StatusOperCondition,_ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00091E 00000000000000  2374         DD      000000000H,000000000H,000000000H
       0000000000           
                       2375 ; rs232cmd.c  531               { EVENTCmdTxt,   EVENCmdTxt, &StatusLevel1_1[1], NULL, NONE, Stat
                            usOperEvent},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  28

ADDR   CODE            LINE SOURCELINE
                       2376 ; rs232cmd.c  532               { CONDITIONCmdTxt, CONDCmdTxt, &StatusLevel1_1[2], NULL, NONE, St
                            atusOperCondition},
                       2377 ; rs232cmd.c  533               { ENABLECmdTxt,          ENABCmdTxt, NULL,                       
                                       NULL, NONE, StatusOperEnable},
                       2378 ; rs232cmd.c  534       };
                       2379 ; rs232cmd.c  535       
                       2380 ; rs232cmd.c  536       struct CMD_STRUCT code StatusLevel1_2[3] = {
00092A rrrrrrrrrrrrrr  2381         DD      _StatusOperEnable
       rr                   
                       2384         PUBLIC  _StatusLevel1_2
                       2385         ALIGN   1
00092E                 2386 _StatusLevel1_2:
00092E rrrrrrrrrrrrrr  2387         DD      _EVENTCmdTxt,_EVENCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000936 rrrrrrrrrrrrrr  2388         DD      _StatusLevel1_2+24
       rr                   
00093A 00000000000000  2389         DD      000000000H,000000000H
       00                   
000942 rrrrrrrrrrrrrr  2390         DD      _StatusQuestEvent,_CONDITIONCmdTxt,_CONDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00094E rrrrrrrrrrrrrr  2391         DD      _StatusLevel1_2+48
       rr                   
000952 00000000000000  2392         DD      000000000H,000000000H
       00                   
00095A rrrrrrrrrrrrrr  2393         DD      _StatusQuestCondition,_ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000966 00000000000000  2394         DD      000000000H,000000000H,000000000H
       0000000000           
                       2395 ; rs232cmd.c  537               { EVENTCmdTxt,           EVENCmdTxt, &StatusLevel1_2[1], NULL, NO
                            NE, StatusQuestEvent},
                       2396 ; rs232cmd.c  538               { CONDITIONCmdTxt, CONDCmdTxt, &StatusLevel1_2[2], NULL, NONE, St
                            atusQuestCondition},
                       2397 ; rs232cmd.c  539               { ENABLECmdTxt,          ENABCmdTxt, NULL,                       
                                            NULL, NONE, StatusQuestEnable},
                       2398 ; rs232cmd.c  540       };
                       2399 ; rs232cmd.c  541       
                       2400 ; rs232cmd.c  542       
                       2401 ; rs232cmd.c  543       // **********************************************************************
                            ****
                       2402 ; rs232cmd.c  544       /*      CMD:    SUB1:   SUB2:           PARM:
                       2403 ; rs232cmd.c  545                       INPut
                       2404 ; rs232cmd.c  546                               :GENLOCK<?>
                       2405 ; rs232cmd.c  547                                       :SYSTem                 INTernal | PALBur
                            st | NTSCburst |F10MHZ
                       2406 ; rs232cmd.c  548                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2407 ; rs232cmd.c  549                                       :CALibrate
                       2408 ; rs232cmd.c  550                                               :ENABle         OFF|ON
                       2409 ; rs232cmd.c  551                                               :ADJust         UP|DOWN|MIN|MAX
                       2410 ; rs232cmd.c  552                                               :STORe
                       2411 ; rs232cmd.c  553                                                                                
                                    
                       2412 ; rs232cmd.c  554       */
                       2413 ; rs232cmd.c  555       //***********************************************************************
                            ***
                       2414 ; rs232cmd.c  556       struct CMD_STRUCT code Input[1] = {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  29

ADDR   CODE            LINE SOURCELINE
000972 rrrrrrrrrrrrrr  2415         DD      _StatusQuestEnable
       rr                   
                       2419         PUBLIC  _Input
                       2420         ALIGN   1
000976 rrrrrrrrrrrrrr  2421 _Input: DD      _GENLOCKCmdTxt,_GENLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00097E 00000000        2422         DD      000000000H
000982 rrrrrrrrrrrrrr  2423         DD      _GenlockLevel1
       rr                   
000986 00000000        2424         DD      000000000H
                       2425 ; rs232cmd.c  557               { GENLOCKCmdTxt, GENLCmdTxt, NULL, &GenlockLevel1[0], NONE, Genlo
                            ckGen},
                       2426 ; rs232cmd.c  558       };
                       2427 ; rs232cmd.c  559       
                       2428 ; rs232cmd.c  560       struct CMD_STRUCT code GenlockLevel1[3] = {
00098A rrrrrrrrrrrrrr  2429         DD      _GenlockGen
       rr                   
                       2432         PUBLIC  _GenlockLevel1
                       2433         ALIGN   1
00098E                 2434 _GenlockLevel1:
00098E rrrrrrrrrrrrrr  2435         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000996 rrrrrrrrrrrrrr  2436         DD      _GenlockLevel1+24
       rr                   
00099A 00000000000000  2437         DD      000000000H,000000000H
       00                   
0009A2 rrrrrrrrrrrrrr  2438         DD      _GenlockGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009AE rrrrrrrrrrrrrr  2439         DD      _GenlockLevel1+48
       rr                   
0009B2 00000000000000  2440         DD      000000000H,000000000H
       00                   
0009BA rrrrrrrrrrrrrr  2441         DD      _GenlockGenDelay,_CALIBRATECmdTxt,_CALCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009C6 00000000        2442         DD      000000000H
0009CA rrrrrrrrrrrrrr  2443         DD      _GenlockLevel1_1
       rr                   
                       2444 ; rs232cmd.c  561               { SYSTEMCmdTxt,          SYSTCmdTxt, &GenlockLevel1[1], NULL,    
                                                              NONE, GenlockGenSystem},
                       2445 ; rs232cmd.c  562               { DELAYCmdTxt,   DELCmdTxt,  &GenlockLevel1[2], NULL,            
                                                      NONE, GenlockGenDelay},
                       2446 ; rs232cmd.c  563               { CALIBRATECmdTxt, CALCmdTxt,  NULL,                             
                             &GenlockLevel1_1[0], NONE, NONE},
                       2447 ; rs232cmd.c  564       };
                       2448 ; rs232cmd.c  565       
                       2449 ; rs232cmd.c  566       struct CMD_STRUCT code GenlockLevel1_1[3] = {
0009CE 00000000000000  2450         DD      000000000H,000000000H
       00                   
                       2453         PUBLIC  _GenlockLevel1_1
                       2454         ALIGN   1
0009D6                 2455 _GenlockLevel1_1:
0009D6 rrrrrrrrrrrrrr  2456         DD      _ENABLECmdTxt,_ENABCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0009DE rrrrrrrrrrrrrr  2457         DD      _GenlockLevel1_1+24
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  30

ADDR   CODE            LINE SOURCELINE
0009E2 00000000000000  2458         DD      000000000H,000000000H
       00                   
0009EA rrrrrrrrrrrrrr  2459         DD      _GenlockGenCalibrateEnable,_ADJUSTCmdTxt,_ADJCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0009F6 rrrrrrrrrrrrrr  2460         DD      _GenlockLevel1_1+48
       rr                   
0009FA 00000000000000  2461         DD      000000000H,000000000H
       00                   
000A02 rrrrrrrrrrrrrr  2462         DD      _GenlockGenCalibrateAdjust,_STORECmdTxt,_STORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A0E 00000000000000  2463         DD      000000000H,000000000H,000000000H
       0000000000           
                       2464 ; rs232cmd.c  567               { ENABLECmdTxt, ENABCmdTxt, &GenlockLevel1_1[1], NULL, NONE, Genl
                            ockGenCalibrateEnable},
                       2465 ; rs232cmd.c  568               { ADJUSTCmdTxt, ADJCmdTxt,  &GenlockLevel1_1[2], NULL, NONE, Genl
                            ockGenCalibrateAdjust},
                       2466 ; rs232cmd.c  569               { STORECmdTxt,  STORCmdTxt, NULL,                                
                                     NULL, NONE, GenlockGenCalibrateStore},
                       2467 ; rs232cmd.c  570       };
                       2468 ; rs232cmd.c  571       // **********************************************************************
                            ****
                       2469 ; rs232cmd.c  572       /*      CMD:    SUB1:   SUB2:           PARM:
                       2470 ; rs232cmd.c  573                       OUTPut
                       2471 ; rs232cmd.c  574                               :BB1-3<?>
                       2472 ; rs232cmd.c  575                                       :SYSTem                 INTernal | PALBur
                            st | NTSCburst |F10MHZ
                       2473 ; rs232cmd.c  576                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2474 ; rs232cmd.c  577                                       :SCHPhase               <-179to 180>
                       2475 ; rs232cmd.c  578       
                       2476 ; rs232cmd.c  579                               :TSGenerator<?>
                       2477 ; rs232cmd.c  580                                       :PATTern          <pattern name>
                       2478 ; rs232cmd.c  581                                       :SYSTem                 PAL|NTSC
                       2479 ; rs232cmd.c  582                                       :DELay                  <Field>,<Line>,<T
                            ime>
                       2480 ; rs232cmd.c  583                                       :SCHPhase               <-179to 180>
                       2481 ; rs232cmd.c  584                                       :EMBaudio<?>
                       2482 ; rs232cmd.c  585                                               [:SIGNal]       OFF | SILence | F
                            1KHZ
                       2483 ; rs232cmd.c  586                                               :LEVel
                       2484 ; rs232cmd.c  587       
                       2485 ; rs232cmd.c  588                               :AUDio
                       2486 ; rs232cmd.c  589                                       :OUTPut
                       2487 ; rs232cmd.c  590                                       :ANALog<?>
                       2488 ; rs232cmd.c  591                                               :SIGNal
                       2489 ; rs232cmd.c  592                                               :LEVel
                       2490 ; rs232cmd.c  593                                               :CLICk
                       2491 ; rs232cmd.c  594                                       :AESebu<?>
                       2492 ; rs232cmd.c  595                                               :SYSTem
                       2493 ; rs232cmd.c  596                                               :SIGNal
                       2494 ; rs232cmd.c  597                                               :LEVel
                       2495 ; rs232cmd.c  598                                               :TIMing
                       2496 ; rs232cmd.c  599                                               :WORDclock
                       2497 ; rs232cmd.c  600                                               :CLICkperiod
                       2498 ; rs232cmd.c  601       */
                       2499 ; rs232cmd.c  602       struct CMD_STRUCT code Output[3] = {
000A1A rrrrrrrrrrrrrr  2500         DD      _GenlockGenCalibrateStore
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  31

ADDR   CODE            LINE SOURCELINE
                       2503         PUBLIC  _Output
                       2504         ALIGN   1
000A1E                 2505 _Output:
000A1E rrrrrrrrrrrrrr  2506         DD      _BBCmdTxt,_BBCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000A26 rrrrrrrrrrrrrr  2507         DD      _Output+24
       rr                   
000A2A rrrrrrrrrrrrrr  2508         DD      _BBGenLevel1,_BBGenSuffix,_BBGen,_TSGENERATORCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrrrr             
000A3A rrrrrrrrrrrrrr  2509         DD      _TSGCmdTxt
       rr                   
000A3E rrrrrrrrrrrrrr  2510         DD      _Output+48
       rr                   
000A42 rrrrrrrrrrrrrr  2511         DD      _TSGenLevel1
       rr                   
000A46 00000000        2512         DD      000000000H
000A4A rrrrrrrrrrrrrr  2513         DD      _TSGen,_AUDIOCmdTxt,_AUDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A56 00000000        2514         DD      000000000H
000A5A rrrrrrrrrrrrrr  2515         DD      _AudioGenLevel1
       rr                   
000A5E 00000000        2516         DD      000000000H
                       2517 ; rs232cmd.c  603               { BBCmdTxt,                     BBCmdTxt,  &Output[1], &BBGenLeve
                            l1[0],   BBGenSuffix, BBGen},
                       2518 ; rs232cmd.c  604               { TSGENERATORCmdTxt, TSGCmdTxt, &Output[2], &TSGenLevel1[0],     
                            NONE,             TSGen},
                       2519 ; rs232cmd.c  605               { AUDIOCmdTxt,          AUDCmdTxt, NULL,                  &AudioG
                            enLevel1[0], NONE,                AudioGenOutput},
                       2520 ; rs232cmd.c  606       };
                       2521 ; rs232cmd.c  607       
                       2522 ; rs232cmd.c  608       struct CMD_STRUCT code BBGenLevel1[3] = {
000A62 rrrrrrrrrrrrrr  2523         DD      _AudioGenOutput
       rr                   
                       2526         PUBLIC  _BBGenLevel1
                       2527         ALIGN   1
000A66                 2528 _BBGenLevel1:
000A66 rrrrrrrrrrrrrr  2529         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000A6E rrrrrrrrrrrrrr  2530         DD      _BBGenLevel1+24
       rr                   
000A72 00000000000000  2531         DD      000000000H,000000000H
       00                   
000A7A rrrrrrrrrrrrrr  2532         DD      _BBGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000A86 rrrrrrrrrrrrrr  2533         DD      _BBGenLevel1+48
       rr                   
000A8A 00000000000000  2534         DD      000000000H,000000000H
       00                   
000A92 rrrrrrrrrrrrrr  2535         DD      _BBGenDelay,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  32

ADDR   CODE            LINE SOURCELINE
000A9E 00000000000000  2536         DD      000000000H,000000000H,000000000H
       0000000000           
                       2537 ; rs232cmd.c  609               { SYSTEMCmdTxt,         SYSTCmdTxt, &BBGenLevel1[1], NULL, NONE, 
                            BBGenSystem},
                       2538 ; rs232cmd.c  610               { DELAYCmdTxt,     DELCmdTxt,  &BBGenLevel1[2], NULL, NONE, BBGen
                            Delay},
                       2539 ; rs232cmd.c  611               { SCHPHASECmdTxt, SCHPCmdTxt, NULL,                       NULL, N
                            ONE, BBGenScHPhase},
                       2540 ; rs232cmd.c  612       };
                       2541 ; rs232cmd.c  613       
                       2542 ; rs232cmd.c  614       struct CMD_STRUCT code TSGenLevel1[5] = {
000AAA rrrrrrrrrrrrrr  2543         DD      _BBGenScHPhase
       rr                   
                       2547         PUBLIC  _TSGenLevel1
                       2548         ALIGN   1
000AAE                 2549 _TSGenLevel1:
000AAE rrrrrrrrrrrrrr  2550         DD      _PATTERNCmdTxt,_PATTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000AB6 rrrrrrrrrrrrrr  2551         DD      _TSGenLevel1+24
       rr                   
000ABA 00000000000000  2552         DD      000000000H,000000000H
       00                   
000AC2 rrrrrrrrrrrrrr  2553         DD      _TSGenPattern,_SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000ACE rrrrrrrrrrrrrr  2554         DD      _TSGenLevel1+48
       rr                   
000AD2 00000000000000  2555         DD      000000000H,000000000H
       00                   
000ADA rrrrrrrrrrrrrr  2556         DD      _TSGenSystem,_DELAYCmdTxt,_DELCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000AE6 rrrrrrrrrrrrrr  2557         DD      _TSGenLevel1+72
       rr                   
000AEA 00000000000000  2558         DD      000000000H,000000000H
       00                   
000AF2 rrrrrrrrrrrrrr  2559         DD      _TSGenDelay,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000AFE rrrrrrrrrrrrrr  2560         DD      _TSGenLevel1+96
       rr                   
000B02 00000000000000  2561         DD      000000000H,000000000H
       00                   
000B0A rrrrrrrrrrrrrr  2562         DD      _TSGenScHPhase,_EMBAUDIOCmdTxt,_EMBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B16 00000000        2563         DD      000000000H
000B1A rrrrrrrrrrrrrr  2564         DD      _TSGenLevel1_1
       rr                   
000B1E 00000000        2565         DD      000000000H
                       2566 ; rs232cmd.c  615               { PATTERNCmdTxt,        PATTCmdTxt, &TSGenLevel1[1], NULL,       
                                                            NONE, TSGenPattern},
                       2567 ; rs232cmd.c  616               { SYSTEMCmdTxt,         SYSTCmdTxt, &TSGenLevel1[2], NULL,       
                                                            NONE, TSGenSystem},
                       2568 ; rs232cmd.c  617               { DELAYCmdTxt,     DELCmdTxt,  &TSGenLevel1[3], NULL,            
                                                    NONE, TSGenDelay},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  33

ADDR   CODE            LINE SOURCELINE
                       2569 ; rs232cmd.c  618               { SCHPHASECmdTxt, SCHPCmdTxt, &TSGenLevel1[4], NULL,             
                                                    NONE, TSGenScHPhase},
                       2570 ; rs232cmd.c  619               { EMBAUDIOCmdTxt, EMBCmdTxt,    NULL,                     &TSGenL
                            evel1_1[0], NONE, TSGenEmbAudioSignal},
                       2571 ; rs232cmd.c  620       };
                       2572 ; rs232cmd.c  621       
                       2573 ; rs232cmd.c  622       struct CMD_STRUCT code TSGenLevel1_1[2] = {
000B22 rrrrrrrrrrrrrr  2574         DD      _TSGenEmbAudioSignal
       rr                   
                       2578         PUBLIC  _TSGenLevel1_1
                       2579         ALIGN   1
000B26                 2580 _TSGenLevel1_1:
000B26 rrrrrrrrrrrrrr  2581         DD      _SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000B2E rrrrrrrrrrrrrr  2582         DD      _TSGenLevel1_1+24
       rr                   
000B32 00000000000000  2583         DD      000000000H,000000000H
       00                   
000B3A rrrrrrrrrrrrrr  2584         DD      _TSGenEmbAudioSignal,_LEVELCmdTxt,_LEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
                       2585 ; rs232cmd.c  623               { SIGNALCmdTxt, SIGNCmdTxt, &TSGenLevel1_1[1], NULL, NONE, TSGenE
                            mbAudioSignal},
                       2586 ; rs232cmd.c  624               { LEVELCmdTxt,  LEVCmdTxt,  NULL,                                
                             NULL, NONE, NONE},
                       2587 ; rs232cmd.c  625       };
                       2588 ; rs232cmd.c  626       
                       2589 ; rs232cmd.c  627       struct CMD_STRUCT code AudioGenLevel1[3] = {
000B46 00000000000000  2590         DD      000000000H,000000000H,000000000H,000000000H
       00000000000000       
       0000                 
                       2593         PUBLIC  _AudioGenLevel1
                       2594         ALIGN   1
000B56                 2595 _AudioGenLevel1:
000B56 rrrrrrrrrrrrrr  2596         DD      _OUTPUTCmdTxt,_OUTPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000B5E rrrrrrrrrrrrrr  2597         DD      _AudioGenLevel1+24
       rr                   
000B62 00000000000000  2598         DD      000000000H,000000000H
       00                   
000B6A rrrrrrrrrrrrrr  2599         DD      _AudioGenOutput,_ANALOGCmdTxt,_ANALCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B76 rrrrrrrrrrrrrr  2600         DD      _AudioGenLevel1+48
       rr                   
000B7A rrrrrrrrrrrrrr  2601         DD      _AudioGenLevel1_1
       rr                   
000B7E 00000000        2602         DD      000000000H
000B82 rrrrrrrrrrrrrr  2603         DD      _AudioGenAnalog,_AESEBUCmdTxt,_AESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000B8E 00000000        2604         DD      000000000H
000B92 rrrrrrrrrrrrrr  2605         DD      _AudioGenLevel1_2
       rr                   
000B96 00000000        2606         DD      000000000H
                       2607 ; rs232cmd.c  628               { OUTPUTCmdTxt, OUTPCmdTxt, &AudioGenLevel1[1], NULL,            
                                                     NONE, AudioGenOutput},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  34

ADDR   CODE            LINE SOURCELINE
                       2608 ; rs232cmd.c  629               { ANALOGCmdTxt, ANALCmdTxt, &AudioGenLevel1[2], &AudioGenLevel1_1
                            [0], NONE, AudioGenAnalog},
                       2609 ; rs232cmd.c  630               { AESEBUCmdTxt, AESCmdTxt,  NULL,                                
                              &AudioGenLevel1_2[0], NONE, AudioGenAESEBU},
                       2610 ; rs232cmd.c  631       };
                       2611 ; rs232cmd.c  632       
                       2612 ; rs232cmd.c  633       struct CMD_STRUCT code AudioGenLevel1_1[3] = {
000B9A rrrrrrrrrrrrrr  2613         DD      _AudioGenAESEBU
       rr                   
                       2616         PUBLIC  _AudioGenLevel1_1
                       2617         ALIGN   1
000B9E                 2618 _AudioGenLevel1_1:
000B9E rrrrrrrrrrrrrr  2619         DD      _SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000BA6 rrrrrrrrrrrrrr  2620         DD      _AudioGenLevel1_1+24
       rr                   
000BAA 00000000000000  2621         DD      000000000H,000000000H
       00                   
000BB2 rrrrrrrrrrrrrr  2622         DD      _AudioGenAnalogSignal,_LEVELCmdTxt,_LEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000BBE rrrrrrrrrrrrrr  2623         DD      _AudioGenLevel1_1+48
       rr                   
000BC2 00000000000000  2624         DD      000000000H,000000000H
       00                   
000BCA rrrrrrrrrrrrrr  2625         DD      _AudioGenAnalogLevel,_CLICKCmdTxt,_CLICCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000BD6 00000000000000  2626         DD      000000000H,000000000H,000000000H
       0000000000           
                       2627 ; rs232cmd.c  634               { SIGNALCmdTxt, SIGNCmdTxt, &AudioGenLevel1_1[1], NULL, NONE, Aud
                            ioGenAnalogSignal},
                       2628 ; rs232cmd.c  635               { LEVELCmdTxt,  LEVCmdTxt,  &AudioGenLevel1_1[2], NULL, NONE, Aud
                            ioGenAnalogLevel},
                       2629 ; rs232cmd.c  636               { CLICKCmdTxt,  CLICCmdTxt, NULL,                                
                                      NULL, NONE, AudioGenAnalogClick},
                       2630 ; rs232cmd.c  637       };
                       2631 ; rs232cmd.c  638       
                       2632 ; rs232cmd.c  639       struct CMD_STRUCT code AudioGenLevel1_2[6] = {
000BE2 rrrrrrrrrrrrrr  2633         DD      _AudioGenAnalogClick
       rr                   
                       2636         PUBLIC  _AudioGenLevel1_2
                       2637         ALIGN   1
000BE6                 2638 _AudioGenLevel1_2:
000BE6 rrrrrrrrrrrrrr  2639         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000BEE rrrrrrrrrrrrrr  2640         DD      _AudioGenLevel1_2+24
       rr                   
000BF2 00000000000000  2641         DD      000000000H,000000000H
       00                   
000BFA rrrrrrrrrrrrrr  2642         DD      _AudioGenAESEBUSystem,_SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C06 rrrrrrrrrrrrrr  2643         DD      _AudioGenLevel1_2+48
       rr                   
000C0A 00000000000000  2644         DD      000000000H,000000000H
       00                   
000C12 rrrrrrrrrrrrrr  2645         DD      _AudioGenAESEBUSignal,_LEVELCmdTxt,_LEVCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  35

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C1E rrrrrrrrrrrrrr  2646         DD      _AudioGenLevel1_2+72
       rr                   
000C22 00000000000000  2647         DD      000000000H,000000000H
       00                   
000C2A rrrrrrrrrrrrrr  2648         DD      _AudioGenAESEBULevel,_TIMINGCmdTxt,_TIMCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C36 rrrrrrrrrrrrrr  2649         DD      _AudioGenLevel1_2+96
       rr                   
000C3A 00000000000000  2650         DD      000000000H,000000000H
       00                   
000C42 rrrrrrrrrrrrrr  2651         DD      _AudioGenAESEBUTiming,_WORDCLOCKCmdTxt,_WORDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C4E rrrrrrrrrrrrrr  2652         DD      _AudioGenLevel1_2+120
       rr                   
000C52 00000000000000  2653         DD      000000000H,000000000H
       00                   
000C5A rrrrrrrrrrrrrr  2654         DD      _AudioGenAESEBUWordClock,_CLICKCmdTxt,_CLICCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C66 00000000000000  2655         DD      000000000H,000000000H,000000000H
       0000000000           
                       2656 ; rs232cmd.c  640               { SYSTEMCmdTxt,          SYSTCmdTxt, &AudioGenLevel1_2[1], NULL, 
                            NONE, AudioGenAESEBUSystem},
                       2657 ; rs232cmd.c  641               { SIGNALCmdTxt,          SIGNCmdTxt, &AudioGenLevel1_2[2], NULL, 
                            NONE, AudioGenAESEBUSignal},
                       2658 ; rs232cmd.c  642               { LEVELCmdTxt,   LEVCmdTxt,  &AudioGenLevel1_2[3], NULL, NONE, Au
                            dioGenAESEBULevel},
                       2659 ; rs232cmd.c  643               { TIMINGCmdTxt,  TIMCmdTxt,  &AudioGenLevel1_2[4], NULL, NONE, Au
                            dioGenAESEBUTiming},
                       2660 ; rs232cmd.c  644               { WORDCLOCKCmdTxt, WORDCmdTxt, &AudioGenLevel1_2[5], NULL, NONE, 
                            AudioGenAESEBUWordClock},
                       2661 ; rs232cmd.c  645               { CLICKCmdTxt,   CLICCmdTxt, NULL,                               
                                      NULL, NONE, AudioGenAESEBUClick},
                       2662 ; rs232cmd.c  646       };
                       2663 ; rs232cmd.c  647       
                       2664 ; rs232cmd.c  648       // **********************************************************************
                            ****
                       2665 ; rs232cmd.c  649       /*      CMD:    SUB1:   SUB2:           PARM:
                       2666 ; rs232cmd.c  650                       FACTORY
                       2667 ; rs232cmd.c  651                               :PASSword
                       2668 ; rs232cmd.c  652       
                       2669 ; rs232cmd.c  653                               :RESet
                       2670 ; rs232cmd.c  654       
                       2671 ; rs232cmd.c  655                               :V24Circuit
                       2672 ; rs232cmd.c  656                                       :COMMand
                       2673 ; rs232cmd.c  657                                       :TRANsparent
                       2674 ; rs232cmd.c  658       
                       2675 ; rs232cmd.c  659                               :CHECksum
                       2676 ; rs232cmd.c  660                                       :CODE
                       2677 ; rs232cmd.c  661                                       :PLD
                       2678 ; rs232cmd.c  662                                       :EMBaudio
                       2679 ; rs232cmd.c  663                                       :PATTern
                       2680 ; rs232cmd.c  664       
                       2681 ; rs232cmd.c  665                               :MAINboard
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  36

ADDR   CODE            LINE SOURCELINE
                       2682 ; rs232cmd.c  666                                       :VERSion
                       2683 ; rs232cmd.c  667                                       :IDN
                       2684 ; rs232cmd.c  668                                               :COMPany
                       2685 ; rs232cmd.c  669                                               :TYPE
                       2686 ; rs232cmd.c  670                                               :KUNumber
                       2687 ; rs232cmd.c  671                                               :SWRevision
                       2688 ; rs232cmd.c  672                                       :SYSTem                         PAL|NTSC
                       2689 ; rs232cmd.c  673                                       :FMSDate
                       2690 ; rs232cmd.c  674                                               :PRODuction     <year>,<month>,<d
                            ay>
                       2691 ; rs232cmd.c  675                                               :UPDate                 <year>,<m
                            onth>,<day>
                       2692 ; rs232cmd.c  676       
                       2693 ; rs232cmd.c  677                               :GENLock
                       2694 ; rs232cmd.c  678                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2695 ; rs232cmd.c  679                                       :VERSion
                       2696 ; rs232cmd.c  680                                       :FREFerence
                       2697 ; rs232cmd.c  681                                               [:DATE]                 <year>,<m
                            onth>,<day>
                       2698 ; rs232cmd.c  682                                               :DAC
                       2699 ; rs232cmd.c  683                                       :UREFerence
                       2700 ; rs232cmd.c  684                                               [:DATE]                 <year>,<m
                            onth>,<day>
                       2701 ; rs232cmd.c  685                                               :DAC
                       2702 ; rs232cmd.c  686                                       :HPHZero                        <pal>,<nt
                            sc>
                       2703 ; rs232cmd.c  687                                       :PHASe                          <pal>,<nt
                            sc>
                       2704 ; rs232cmd.c  688       
                       2705 ; rs232cmd.c  689                               :BB 1
                       2706 ; rs232cmd.c  690                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2707 ; rs232cmd.c  691                                       :VERSion
                       2708 ; rs232cmd.c  692                                       :SIGNAL                         NORMAL|F4
                            5MHZ
                       2709 ; rs232cmd.c  693                                       :PHASe                          <pal>,<nt
                            sc>
                       2710 ; rs232cmd.c  694                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2711 ; rs232cmd.c  695                                       :DAC                                    <
                            gain>,<offset>,<level>
                       2712 ; rs232cmd.c  696       
                       2713 ; rs232cmd.c  697                               :BB 2-3
                       2714 ; rs232cmd.c  698                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2715 ; rs232cmd.c  699                                       :PHASe                          <pal>,<nt
                            sc>
                       2716 ; rs232cmd.c  700                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2717 ; rs232cmd.c  701                                       :DAC                                    <
                            gain>,<offset>,<level>
                       2718 ; rs232cmd.c  702       
                       2719 ; rs232cmd.c  703                               :TSGenerator
                       2720 ; rs232cmd.c  704                                       [:DATE]                         <year>,<m
                            onth>,<day>
                       2721 ; rs232cmd.c  705                                       :AGAin                          <pal>,<nt
                            sc>
                       2722 ; rs232cmd.c  706                                       :CGAin                          <pal>,<nt
                            sc>
                       2723 ; rs232cmd.c  707                                       :PHASE                          <pal>,<nt
                            sc>
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  37

ADDR   CODE            LINE SOURCELINE
                       2724 ; rs232cmd.c  708                                       :SCHPhase                       <pal>,<nt
                            sc>
                       2725 ; rs232cmd.c  709       
                       2726 ; rs232cmd.c  710                               :AUDio
                       2727 ; rs232cmd.c  711                                       [:STATus]
                       2728 ; rs232cmd.c  712                                       :DATE                                   <
                            year>,<month>,<day>
                       2729 ; rs232cmd.c  713                                       :ALEVel                         <left>,<r
                            ight>
                       2730 ; rs232cmd.c  714       
                       2731 ; rs232cmd.c  715                               :PLD
                       2732 ; rs232cmd.c  716                                       :VERSion                        <video>,<
                            audio>
                       2733 ; rs232cmd.c  717       
                       2734 ; rs232cmd.c  718                               :TCXO
                       2735 ; rs232cmd.c  719                                       [:STATus]
                       2736 ; rs232cmd.c  720       
                       2737 ; rs232cmd.c  721                               :MMCH                                           <
                            subaddress>[,<data>]
                       2738 ; rs232cmd.c  722       
                       2739 ; rs232cmd.c  723       */                                                                      
                       2740 ; rs232cmd.c  724       
                       2741 ; rs232cmd.c  725       struct CMD_STRUCT code Factory[12] = {
000C72 rrrrrrrrrrrrrr  2742         DD      _AudioGenAESEBUClick
       rr                   
                       2745         PUBLIC  _Factory
                       2746         ALIGN   1
000C76                 2747 _Factory:
000C76 rrrrrrrrrrrrrr  2748         DD      _PASSWORDCmdTxt,_PASSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000C7E rrrrrrrrrrrrrr  2749         DD      _Factory+24
       rr                   
000C82 00000000000000  2750         DD      000000000H,000000000H
       00                   
000C8A rrrrrrrrrrrrrr  2751         DD      _FactPassword,_RESETCmdTxt,_RESCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000C96 rrrrrrrrrrrrrr  2752         DD      _Factory+48
       rr                   
000C9A 00000000000000  2753         DD      000000000H,000000000H
       00                   
000CA2 rrrrrrrrrrrrrr  2754         DD      _FactReset,_V24CIRCUITCmdTxt,_V24CCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000CAE rrrrrrrrrrrrrr  2755         DD      _Factory+72
       rr                   
000CB2 rrrrrrrrrrrrrr  2756         DD      _FactoryLevel1
       rr                   
000CB6 00000000000000  2757         DD      000000000H,000000000H
       00                   
000CBE rrrrrrrrrrrrrr  2758         DD      _CHECKSUMCmdTxt,_CHECCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CC6 rrrrrrrrrrrrrr  2759         DD      _Factory+96
       rr                   
000CCA rrrrrrrrrrrrrr  2760         DD      _FactoryLevel9
       rr                   
000CCE 00000000000000  2761         DD      000000000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  38

ADDR   CODE            LINE SOURCELINE
000CD6 rrrrrrrrrrrrrr  2762         DD      _MAINBOARDCmdTxt,_MAINCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CDE rrrrrrrrrrrrrr  2763         DD      _Factory+120
       rr                   
000CE2 rrrrrrrrrrrrrr  2764         DD      _FactoryLevel2
       rr                   
000CE6 00000000000000  2765         DD      000000000H,000000000H
       00                   
000CEE rrrrrrrrrrrrrr  2766         DD      _GENLOCKCmdTxt,_GENLCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000CF6 rrrrrrrrrrrrrr  2767         DD      _Factory+144
       rr                   
000CFA rrrrrrrrrrrrrr  2768         DD      _FactoryLevel3
       rr                   
000CFE 00000000        2769         DD      000000000H
000D02 rrrrrrrrrrrrrr  2770         DD      _FactGenlockGenDate,_BBCmdTxt,_BBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D0E rrrrrrrrrrrrrr  2771         DD      _Factory+168
       rr                   
000D12 rrrrrrrrrrrrrr  2772         DD      _FactoryLevel4,_BBGenSuffix,_FactBBGenDate
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D1E rrrrrrrrrrrrrr  2773         DD      _TSGENERATORCmdTxt,_TSGCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000D26 rrrrrrrrrrrrrr  2774         DD      _Factory+192
       rr                   
000D2A rrrrrrrrrrrrrr  2775         DD      _FactoryLevel5
       rr                   
000D2E 00000000        2776         DD      000000000H
000D32 rrrrrrrrrrrrrr  2777         DD      _FactTSGenDate,_AUDIOCmdTxt,_AUDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D3E rrrrrrrrrrrrrr  2778         DD      _Factory+216
       rr                   
000D42 rrrrrrrrrrrrrr  2779         DD      _FactoryLevel6
       rr                   
000D46 00000000        2780         DD      000000000H
000D4A rrrrrrrrrrrrrr  2781         DD      _FactAudioGenStatus,_PLDCmdTxt,_PLDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D56 rrrrrrrrrrrrrr  2782         DD      _Factory+240
       rr                   
000D5A rrrrrrrrrrrrrr  2783         DD      _FactoryLevel7
       rr                   
000D5E 00000000        2784         DD      000000000H
000D62 rrrrrrrrrrrrrr  2785         DD      _FactPLDVersion,_TCXOCmdTxt,_TCXOCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D6E rrrrrrrrrrrrrr  2786         DD      _Factory+264
       rr                   
000D72 rrrrrrrrrrrrrr  2787         DD      _FactoryLevel8
       rr                   
000D76 00000000        2788         DD      000000000H
000D7A rrrrrrrrrrrrrr  2789         DD      _FactTCXOStatus,_MMCHIPCmdTxt,_MMCHCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  39

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000D86 00000000000000  2790         DD      000000000H,000000000H,000000000H
       0000000000           
                       2791 ; rs232cmd.c  726               { PASSWORDCmdTxt,       PASSCmdTxt, &Factory[1],  NULL,          
                                                    NONE,            FactPassword},
                       2792 ; rs232cmd.c  727               { RESETCmdTxt,          RESCmdTxt,  &Factory[2],  NULL,          
                                                    NONE,            FactReset},
                       2793 ; rs232cmd.c  728               { V24CIRCUITCmdTxt,     V24CCmdTxt, &Factory[3],  &FactoryLevel1[
                            0], NONE,                NONE},
                       2794 ; rs232cmd.c  729               { CHECKSUMCmdTxt,       CHECCmdTxt, &Factory[4],  &FactoryLevel9[
                            0], NONE,                        NONE},
                       2795 ; rs232cmd.c  730               { MAINBOARDCmdTxt,      MAINCmdTxt, &Factory[5],  &FactoryLevel2[
                            0], NONE,                        NONE},
                       2796 ; rs232cmd.c  731               { GENLOCKCmdTxt,                GENLCmdTxt,     &Factory[6],  &Fa
                            ctoryLevel3[0], NONE,                    FactGenlockGenDate},
                       2797 ; rs232cmd.c  732               { BBCmdTxt,                     BBCmdTxt,       &Factory[7],  &Fa
                            ctoryLevel4[0], BBGenSuffix, FactBBGenDate},
                       2798 ; rs232cmd.c  733               { TSGENERATORCmdTxt, TSGCmdTxt,         &Factory[8],  &FactoryLev
                            el5[0], NONE,                    FactTSGenDate},
                       2799 ; rs232cmd.c  734               { AUDIOCmdTxt,          AUDCmdTxt,      &Factory[9],  &FactoryLev
                            el6[0], NONE,                    FactAudioGenStatus},
                       2800 ; rs232cmd.c  735               { PLDCmdTxt,                    PLDCmdTxt,      &Factory[10], &Fa
                            ctoryLevel7[0], NONE,                    FactPLDVersion},
                       2801 ; rs232cmd.c  736               { TCXOCmdTxt,                   TCXOCmdTxt,     &Factory[11], &Fa
                            ctoryLevel8[0], NONE,                    FactTCXOStatus},
                       2802 ; rs232cmd.c  737               { MMCHIPCmdTxt,                 MMCHCmdTxt, NULL,                
                                      NULL,                                 NONE,                    FactMultiMediaChip},
                       2803 ; rs232cmd.c  738       };
                       2804 ; rs232cmd.c  739       
                       2805 ; rs232cmd.c  740       struct CMD_STRUCT code FactoryLevel1[2] = {
000D92 rrrrrrrrrrrrrr  2806         DD      _FactMultiMediaChip
       rr                   
                       2809         PUBLIC  _FactoryLevel1
                       2810         ALIGN   1
000D96                 2811 _FactoryLevel1:
000D96 rrrrrrrrrrrrrr  2812         DD      _COMMANDCmdTxt,_COMMCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000D9E rrrrrrrrrrrrrr  2813         DD      _FactoryLevel1+24
       rr                   
000DA2 00000000000000  2814         DD      000000000H,000000000H
       00                   
000DAA rrrrrrrrrrrrrr  2815         DD      _FactV24Command,_TRANSPARENTCmdTxt,_TRANCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DB6 00000000000000  2816         DD      000000000H,000000000H,000000000H
       0000000000           
                       2817 ; rs232cmd.c  741               { COMMANDCmdTxt,                 COMMCmdTxt, &FactoryLevel1[1], N
                            ULL, NONE, FactV24Command},
                       2818 ; rs232cmd.c  742               { TRANSPARENTCmdTxt, TRANCmdTxt, NULL,                           
                                              NULL, NONE, FactV24Transparent},
                       2819 ; rs232cmd.c  743       };
                       2820 ; rs232cmd.c  744       
                       2821 ; rs232cmd.c  745       struct CMD_STRUCT code FactoryLevel9[5] = {
000DC2 rrrrrrrrrrrrrr  2822         DD      _FactV24Transparent
       rr                   
                       2825         PUBLIC  _FactoryLevel9
                       2826         ALIGN   1
000DC6                 2827 _FactoryLevel9:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  40

ADDR   CODE            LINE SOURCELINE
000DC6 rrrrrrrrrrrrrr  2828         DD      _CODECmdTxt,_CODECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000DCE rrrrrrrrrrrrrr  2829         DD      _FactoryLevel9+24
       rr                   
000DD2 00000000000000  2830         DD      000000000H,000000000H
       00                   
000DDA rrrrrrrrrrrrrr  2831         DD      _FactChecksumCode,_PLDCmdTxt,_PLDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DE6 rrrrrrrrrrrrrr  2832         DD      _FactoryLevel9+48
       rr                   
000DEA 00000000000000  2833         DD      000000000H,000000000H
       00                   
000DF2 rrrrrrrrrrrrrr  2834         DD      _FactChecksumPLD,_EMBAUDIOCmdTxt,_EMBCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000DFE rrrrrrrrrrrrrr  2835         DD      _FactoryLevel9+72
       rr                   
000E02 00000000000000  2836         DD      000000000H,000000000H
       00                   
000E0A rrrrrrrrrrrrrr  2837         DD      _FactChecksumEmbAudio,_PATTERNCmdTxt,_PATTCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E16 rrrrrrrrrrrrrr  2838         DD      _FactoryLevel9+96
       rr                   
000E1A 00000000000000  2839         DD      000000000H,000000000H
       00                   
000E22 rrrrrrrrrrrrrr  2840         DD      _FactChecksumPattern,_RANGECmdTxt,_RANGCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E2E 00000000000000  2841         DD      000000000H,000000000H,000000000H
       0000000000           
                       2842 ; rs232cmd.c  746               { CODECmdTxt,           CODECmdTxt, &FactoryLevel9[1], NULL, NONE
                            , FactChecksumCode},
                       2843 ; rs232cmd.c  747               { PLDCmdTxt,            PLDCmdTxt,  &FactoryLevel9[2], NULL, NONE
                            , FactChecksumPLD},
                       2844 ; rs232cmd.c  748               { EMBAUDIOCmdTxt, EMBCmdTxt,  &FactoryLevel9[3], NULL, NONE, Fact
                            ChecksumEmbAudio},
                       2845 ; rs232cmd.c  749               { PATTERNCmdTxt,        PATTCmdTxt, &FactoryLevel9[4], NULL, NONE
                            , FactChecksumPattern},
                       2846 ; rs232cmd.c  750               { RANGECmdTxt,  RANGCmdTxt, NULL,                                
                            NULL, NONE, FactChecksumRange},
                       2847 ; rs232cmd.c  751       };
                       2848 ; rs232cmd.c  752       
                       2849 ; rs232cmd.c  753       struct CMD_STRUCT code FactoryLevel2[4] = {
000E3A rrrrrrrrrrrrrr  2850         DD      _FactChecksumRange
       rr                   
                       2854         PUBLIC  _FactoryLevel2
                       2855         ALIGN   1
000E3E                 2856 _FactoryLevel2:
000E3E rrrrrrrrrrrrrr  2857         DD      _VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000E46 rrrrrrrrrrrrrr  2858         DD      _FactoryLevel2+24
       rr                   
000E4A 00000000000000  2859         DD      000000000H,000000000H
       00                   
000E52 rrrrrrrrrrrrrr  2860         DD      _FactMainVersion,_IDNCmdTxt,_IDNCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  41

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E5E rrrrrrrrrrrrrr  2861         DD      _FactoryLevel2+48
       rr                   
000E62 rrrrrrrrrrrrrr  2862         DD      _FactoryLevel2_2
       rr                   
000E66 00000000000000  2863         DD      000000000H,000000000H
       00                   
000E6E rrrrrrrrrrrrrr  2864         DD      _SYSTEMCmdTxt,_SYSTCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000E76 rrrrrrrrrrrrrr  2865         DD      _FactoryLevel2+72
       rr                   
000E7A 00000000000000  2866         DD      000000000H,000000000H
       00                   
000E82 rrrrrrrrrrrrrr  2867         DD      _FactMainSystem,_FMSDATECmdTxt,_FMSDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000E8E 00000000        2868         DD      000000000H
000E92 rrrrrrrrrrrrrr  2869         DD      _FactoryLevel2_1
       rr                   
                       2870 ; rs232cmd.c  754               { VERSIONCmdTxt,        VERSCmdTxt, &FactoryLevel2[1], NULL,     
                                                             NONE, FactMainVersion},
                       2871 ; rs232cmd.c  755               { IDNCmdTxt,            IDNCmdTxt,  &FactoryLevel2[2], &FactoryLe
                            vel2_2[0], NONE, NONE},
                       2872 ; rs232cmd.c  756               { SYSTEMCmdTxt,         SYSTCmdTxt, &FactoryLevel2[3], NULL,     
                                                             NONE, FactMainSystem},
                       2873 ; rs232cmd.c  757               { FMSDATECmdTxt,        FMSDCmdTxt, NULL,                        
                                     &FactoryLevel2_1[0], NONE, NONE},
                       2874 ; rs232cmd.c  758       };
                       2875 ; rs232cmd.c  759       
                       2876 ; rs232cmd.c  760       struct CMD_STRUCT code FactoryLevel2_1[2] = {
000E96 00000000000000  2877         DD      000000000H,000000000H
       00                   
                       2880         PUBLIC  _FactoryLevel2_1
                       2881         ALIGN   1
000E9E                 2882 _FactoryLevel2_1:
000E9E rrrrrrrrrrrrrr  2883         DD      _PRODUCTIONCmdTxt,_PRODCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000EA6 rrrrrrrrrrrrrr  2884         DD      _FactoryLevel2_1+24
       rr                   
000EAA 00000000000000  2885         DD      000000000H,000000000H
       00                   
000EB2 rrrrrrrrrrrrrr  2886         DD      _FactMainFMSDateProd,_UPDATECmdTxt,_UPDCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000EBE 00000000000000  2887         DD      000000000H,000000000H,000000000H
       0000000000           
                       2888 ; rs232cmd.c  761               { PRODUCTIONCmdTxt, PRODCmdTxt, &FactoryLevel2_1[1], NULL, NONE, 
                            FactMainFMSDateProd},
                       2889 ; rs232cmd.c  762               { UPDATECmdTxt,           UPDCmdTxt,  NULL,                      
                                              NULL, NONE, FactMainFMSDateUpd},
                       2890 ; rs232cmd.c  763       };
                       2891 ; rs232cmd.c  764       
                       2892 ; rs232cmd.c  765       struct CMD_STRUCT code FactoryLevel2_2[4] = {
000ECA rrrrrrrrrrrrrr  2893         DD      _FactMainFMSDateUpd
       rr                   
                       2896         PUBLIC  _FactoryLevel2_2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  42

ADDR   CODE            LINE SOURCELINE
                       2897         ALIGN   1
000ECE                 2898 _FactoryLevel2_2:
000ECE rrrrrrrrrrrrrr  2899         DD      _COMPANYCmdTxt,_COMPCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000ED6 rrrrrrrrrrrrrr  2900         DD      _FactoryLevel2_2+24
       rr                   
000EDA 00000000000000  2901         DD      000000000H,000000000H
       00                   
000EE2 rrrrrrrrrrrrrr  2902         DD      _FactMainIDNCompany,_TYPECmdTxt,_TYPECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000EEE rrrrrrrrrrrrrr  2903         DD      _FactoryLevel2_2+48
       rr                   
000EF2 00000000000000  2904         DD      000000000H,000000000H
       00                   
000EFA rrrrrrrrrrrrrr  2905         DD      _FactMainIDNType,_KUNUMBERCmdTxt,_KUNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F06 rrrrrrrrrrrrrr  2906         DD      _FactoryLevel2_2+72
       rr                   
000F0A 00000000000000  2907         DD      000000000H,000000000H
       00                   
000F12 rrrrrrrrrrrrrr  2908         DD      _FactMainIDNKUNumber,_SWREVISIONCmdTxt,_SWRCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F1E 00000000000000  2909         DD      000000000H,000000000H,000000000H
       0000000000           
                       2910 ; rs232cmd.c  766               { COMPANYCmdTxt,    COMPCmdTxt, &FactoryLevel2_2[1], NULL, NONE, 
                            FactMainIDNCompany},
                       2911 ; rs232cmd.c  767               { TYPECmdTxt,     TYPECmdTxt, &FactoryLevel2_2[2], NULL, NONE, Fa
                            ctMainIDNType},
                       2912 ; rs232cmd.c  768               { KUNUMBERCmdTxt,   KUNCmdTxt,  &FactoryLevel2_2[3], NULL, NONE, 
                            FactMainIDNKUNumber},
                       2913 ; rs232cmd.c  769               { SWREVISIONCmdTxt, SWRCmdTxt,  NULL,                            
                                      NULL, NONE, FactMainIDNSWRevision},
                       2914 ; rs232cmd.c  770       };
                       2915 ; rs232cmd.c  771       
                       2916 ; rs232cmd.c  772       struct CMD_STRUCT code FactoryLevel3[6] = {
000F2A rrrrrrrrrrrrrr  2917         DD      _FactMainIDNSWRevision
       rr                   
                       2920         PUBLIC  _FactoryLevel3
                       2921         ALIGN   1
000F2E                 2922 _FactoryLevel3:
000F2E rrrrrrrrrrrrrr  2923         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000F36 rrrrrrrrrrrrrr  2924         DD      _FactoryLevel3+24
       rr                   
000F3A 00000000000000  2925         DD      000000000H,000000000H
       00                   
000F42 rrrrrrrrrrrrrr  2926         DD      _FactGenlockGenDate,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F4E rrrrrrrrrrrrrr  2927         DD      _FactoryLevel3+48
       rr                   
000F52 00000000000000  2928         DD      000000000H,000000000H
       00                   
000F5A rrrrrrrrrrrrrr  2929         DD      _FactGenlockGenVersion,_FREFERENCECmdTxt,_FREFCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  43

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F66 rrrrrrrrrrrrrr  2930         DD      _FactoryLevel3+72
       rr                   
000F6A rrrrrrrrrrrrrr  2931         DD      _FactoryLevel3_1
       rr                   
000F6E 00000000        2932         DD      000000000H
000F72 rrrrrrrrrrrrrr  2933         DD      _FactGenlockGenFRefDate,_UREFERENCECmdTxt,_UREFCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F7E rrrrrrrrrrrrrr  2934         DD      _FactoryLevel3+96
       rr                   
000F82 rrrrrrrrrrrrrr  2935         DD      _FactoryLevel3_2
       rr                   
000F86 00000000        2936         DD      000000000H
000F8A rrrrrrrrrrrrrr  2937         DD      _FactGenlockGenURefDate,_HPHZEROCmdTxt,_HPHZCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000F96 rrrrrrrrrrrrrr  2938         DD      _FactoryLevel3+120
       rr                   
000F9A 00000000000000  2939         DD      000000000H,000000000H
       00                   
000FA2 rrrrrrrrrrrrrr  2940         DD      _FactGenlockGenHPHZero,_PHASECmdTxt,_PHASCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
000FAE 00000000000000  2941         DD      000000000H,000000000H,000000000H
       0000000000           
                       2942 ; rs232cmd.c  773               { DATECmdTxt,     DATECmdTxt, &FactoryLevel3[1], NULL,           
                                                    NONE, FactGenlockGenDate},
                       2943 ; rs232cmd.c  774               { VERSIONCmdTxt,    VERSCmdTxt, &FactoryLevel3[2], NULL,         
                                                            NONE, FactGenlockGenVersion},
                       2944 ; rs232cmd.c  775               { FREFERENCECmdTxt, FREFCmdTxt, &FactoryLevel3[3], &FactoryLevel3
                            _1[0], NONE, FactGenlockGenFRefDate},
                       2945 ; rs232cmd.c  776               { UREFERENCECmdTxt, UREFCmdTxt, &FactoryLevel3[4], &FactoryLevel3
                            _2[0], NONE, FactGenlockGenURefDate},
                       2946 ; rs232cmd.c  777               { HPHZEROCmdTxt,    HPHZCmdTxt, &FactoryLevel3[5], NULL,         
                                                                    NONE, FactGenlockGenHPHZero},
                       2947 ; rs232cmd.c  778               { PHASECmdTxt,            PHASCmdTxt, NULL,                      
                                            NULL,                                           NONE, FactGenlockGenPhase},
                       2948 ; rs232cmd.c  779       };
                       2949 ; rs232cmd.c  780       
                       2950 ; rs232cmd.c  781       struct CMD_STRUCT code FactoryLevel3_1[2] = {
000FBA rrrrrrrrrrrrrr  2951         DD      _FactGenlockGenPhase
       rr                   
                       2954         PUBLIC  _FactoryLevel3_1
                       2955         ALIGN   1
000FBE                 2956 _FactoryLevel3_1:
000FBE rrrrrrrrrrrrrr  2957         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000FC6 rrrrrrrrrrrrrr  2958         DD      _FactoryLevel3_1+24
       rr                   
000FCA 00000000000000  2959         DD      000000000H,000000000H
       00                   
000FD2 rrrrrrrrrrrrrr  2960         DD      _FactGenlockGenFRefDate,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  44

ADDR   CODE            LINE SOURCELINE
000FDE 00000000000000  2961         DD      000000000H,000000000H,000000000H
       0000000000           
                       2962 ; rs232cmd.c  782               { DATECmdTxt, DATECmdTxt, &FactoryLevel3_1[1], NULL, NONE, FactGe
                            nlockGenFRefDate},
                       2963 ; rs232cmd.c  783               { DACCmdTxt,  DACCmdTxt,  NULL,                                  
                                      NULL, NONE, FactGenlockGenFRefDAC},
                       2964 ; rs232cmd.c  784       };
                       2965 ; rs232cmd.c  785       
                       2966 ; rs232cmd.c  786       struct CMD_STRUCT code FactoryLevel3_2[2] = {
000FEA rrrrrrrrrrrrrr  2967         DD      _FactGenlockGenFRefDAC
       rr                   
                       2970         PUBLIC  _FactoryLevel3_2
                       2971         ALIGN   1
000FEE                 2972 _FactoryLevel3_2:
000FEE rrrrrrrrrrrrrr  2973         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
000FF6 rrrrrrrrrrrrrr  2974         DD      _FactoryLevel3_2+24
       rr                   
000FFA 00000000000000  2975         DD      000000000H,000000000H
       00                   
001002 rrrrrrrrrrrrrr  2976         DD      _FactGenlockGenURefDate,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00100E 00000000000000  2977         DD      000000000H,000000000H,000000000H
       0000000000           
                       2978 ; rs232cmd.c  787               { DATECmdTxt, DATECmdTxt, &FactoryLevel3_2[1], NULL, NONE, FactGe
                            nlockGenURefDate},
                       2979 ; rs232cmd.c  788               { DACCmdTxt,  DACCmdTxt,  NULL,                                  
                                      NULL, NONE, FactGenlockGenURefDAC},
                       2980 ; rs232cmd.c  789       };
                       2981 ; rs232cmd.c  790       
                       2982 ; rs232cmd.c  791       struct CMD_STRUCT code FactoryLevel4[6] = {
00101A rrrrrrrrrrrrrr  2983         DD      _FactGenlockGenURefDAC
       rr                   
                       2986         PUBLIC  _FactoryLevel4
                       2987         ALIGN   1
00101E                 2988 _FactoryLevel4:
00101E rrrrrrrrrrrrrr  2989         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001026 rrrrrrrrrrrrrr  2990         DD      _FactoryLevel4+24
       rr                   
00102A 00000000000000  2991         DD      000000000H,000000000H
       00                   
001032 rrrrrrrrrrrrrr  2992         DD      _FactBBGenDate,_VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00103E rrrrrrrrrrrrrr  2993         DD      _FactoryLevel4+48
       rr                   
001042 00000000000000  2994         DD      000000000H,000000000H
       00                   
00104A rrrrrrrrrrrrrr  2995         DD      _FactBBGenVersion,_SIGNALCmdTxt,_SIGNCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001056 rrrrrrrrrrrrrr  2996         DD      _FactoryLevel4+72
       rr                   
00105A 00000000000000  2997         DD      000000000H,000000000H
       00                   
001062 rrrrrrrrrrrrrr  2998         DD      _FactBBGenSignal,_PHASECmdTxt,_PHASCmdTxt
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  45

ADDR   CODE            LINE SOURCELINE
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00106E rrrrrrrrrrrrrr  2999         DD      _FactoryLevel4+96
       rr                   
001072 00000000000000  3000         DD      000000000H,000000000H
       00                   
00107A rrrrrrrrrrrrrr  3001         DD      _FactBBGenPhase,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001086 rrrrrrrrrrrrrr  3002         DD      _FactoryLevel4+120
       rr                   
00108A 00000000000000  3003         DD      000000000H,000000000H
       00                   
001092 rrrrrrrrrrrrrr  3004         DD      _FactBBGenScHPhase,_DACCmdTxt,_DACCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00109E 00000000000000  3005         DD      000000000H,000000000H,000000000H
       0000000000           
                       3006 ; rs232cmd.c  792               { DATECmdTxt,   DATECmdTxt, &FactoryLevel4[1], NULL, NONE, FactBB
                            GenDate},
                       3007 ; rs232cmd.c  793               { VERSIONCmdTxt,        VERSCmdTxt, &FactoryLevel4[2], NULL, NONE
                            , FactBBGenVersion},
                       3008 ; rs232cmd.c  794               { SIGNALCmdTxt,         SIGNCmdTxt, &FactoryLevel4[3], NULL, NONE
                            , FactBBGenSignal},
                       3009 ; rs232cmd.c  795               { PHASECmdTxt,  PHASCmdTxt, &FactoryLevel4[4], NULL, NONE, FactBB
                            GenPhase},
                       3010 ; rs232cmd.c  796               { SCHPHASECmdTxt,       SCHPCmdTxt, &FactoryLevel4[5], NULL, NONE
                            , FactBBGenScHPhase},
                       3011 ; rs232cmd.c  797               { DACCmdTxt,            DACCmdTxt,  NULL,                        
                                     NULL, NONE, FactBBGenDAC},
                       3012 ; rs232cmd.c  798       };
                       3013 ; rs232cmd.c  799       
                       3014 ; rs232cmd.c  800       struct CMD_STRUCT code FactoryLevel5[5] = {
0010AA rrrrrrrrrrrrrr  3015         DD      _FactBBGenDAC
       rr                   
                       3018         PUBLIC  _FactoryLevel5
                       3019         ALIGN   1
0010AE                 3020 _FactoryLevel5:
0010AE rrrrrrrrrrrrrr  3021         DD      _DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0010B6 rrrrrrrrrrrrrr  3022         DD      _FactoryLevel5+24
       rr                   
0010BA 00000000000000  3023         DD      000000000H,000000000H
       00                   
0010C2 rrrrrrrrrrrrrr  3024         DD      _FactTSGenDate,_AGAINCmdTxt,_AGACmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010CE rrrrrrrrrrrrrr  3025         DD      _FactoryLevel5+48
       rr                   
0010D2 00000000000000  3026         DD      000000000H,000000000H
       00                   
0010DA rrrrrrrrrrrrrr  3027         DD      _FactTSGenAGain,_CGAINCmdTxt,_CGACmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010E6 rrrrrrrrrrrrrr  3028         DD      _FactoryLevel5+72
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  46

ADDR   CODE            LINE SOURCELINE
0010EA 00000000000000  3029         DD      000000000H,000000000H
       00                   
0010F2 rrrrrrrrrrrrrr  3030         DD      _FactTSGenCGain,_PHASECmdTxt,_PHASCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
0010FE rrrrrrrrrrrrrr  3031         DD      _FactoryLevel5+96
       rr                   
001102 00000000000000  3032         DD      000000000H,000000000H
       00                   
00110A rrrrrrrrrrrrrr  3033         DD      _FactTSGenPhase,_SCHPHASECmdTxt,_SCHPCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001116 00000000000000  3034         DD      000000000H,000000000H,000000000H
       0000000000           
                       3035 ; rs232cmd.c  801               { DATECmdTxt,   DATECmdTxt, &FactoryLevel5[1], NULL, NONE, FactTS
                            GenDate},
                       3036 ; rs232cmd.c  802               { AGAINCmdTxt,  AGACmdTxt,      &FactoryLevel5[2], NULL, NONE, Fa
                            ctTSGenAGain},
                       3037 ; rs232cmd.c  803               { CGAINCmdTxt,  CGACmdTxt,      &FactoryLevel5[3], NULL, NONE, Fa
                            ctTSGenCGain},
                       3038 ; rs232cmd.c  804               { PHASECmdTxt,  PHASCmdTxt, &FactoryLevel5[4], NULL, NONE, FactTS
                            GenPhase},
                       3039 ; rs232cmd.c  805               { SCHPHASECmdTxt,       SCHPCmdTxt, NULL,                        
                                     NULL, NONE, FactTSGenScHPhase},
                       3040 ; rs232cmd.c  806       };
                       3041 ; rs232cmd.c  807       
                       3042 ; rs232cmd.c  808       struct CMD_STRUCT code FactoryLevel6[3] = {
001122 rrrrrrrrrrrrrr  3043         DD      _FactTSGenScHPhase
       rr                   
                       3046         PUBLIC  _FactoryLevel6
                       3047         ALIGN   1
001126                 3048 _FactoryLevel6:
001126 rrrrrrrrrrrrrr  3049         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00112E rrrrrrrrrrrrrr  3050         DD      _FactoryLevel6+24
       rr                   
001132 00000000000000  3051         DD      000000000H,000000000H
       00                   
00113A rrrrrrrrrrrrrr  3052         DD      _FactAudioGenStatus,_DATECmdTxt,_DATECmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
001146 rrrrrrrrrrrrrr  3053         DD      _FactoryLevel6+48
       rr                   
00114A 00000000000000  3054         DD      000000000H,000000000H
       00                   
001152 rrrrrrrrrrrrrr  3055         DD      _FactAudioGenDate,_ALEVELCmdTxt,_ALEVCmdTxt
       rrrrrrrrrrrrrr       
       rrrrrrrrrrrrrr       
       rrrrrr               
00115E 00000000000000  3056         DD      000000000H,000000000H,000000000H
       0000000000           
                       3057 ; rs232cmd.c  809               { STATUSCmdTxt, STATCmdTxt, &FactoryLevel6[1], NULL, NONE, FactAu
                            dioGenStatus},
                       3058 ; rs232cmd.c  810               { DATECmdTxt,   DATECmdTxt, &FactoryLevel6[2], NULL, NONE, FactAu
                            dioGenDate},
                       3059 ; rs232cmd.c  811               { ALEVELCmdTxt, ALEVCmdTxt, NULL,                                
                             NULL, NONE, FactAudioGenLevel},
                       3060 ; rs232cmd.c  812       };
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  47

ADDR   CODE            LINE SOURCELINE
                       3061 ; rs232cmd.c  813       
                       3062 ; rs232cmd.c  814       struct CMD_STRUCT code FactoryLevel7[1] = {
00116A rrrrrrrrrrrrrr  3063         DD      _FactAudioGenLevel
       rr                   
                       3066         PUBLIC  _FactoryLevel7
                       3067         ALIGN   1
00116E                 3068 _FactoryLevel7:
00116E rrrrrrrrrrrrrr  3069         DD      _VERSIONCmdTxt,_VERSCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001176 00000000000000  3070         DD      000000000H,000000000H,000000000H
       0000000000           
                       3071 ; rs232cmd.c  815               { VERSIONCmdTxt,        VERSCmdTxt, NULL, NULL, NONE, FactPLDVers
                            ion},
                       3072 ; rs232cmd.c  816       };
                       3073 ; rs232cmd.c  817       
                       3074 ; rs232cmd.c  818       struct CMD_STRUCT code FactoryLevel8[1] = {
001182 rrrrrrrrrrrrrr  3075         DD      _FactPLDVersion
       rr                   
                       3078         PUBLIC  _FactoryLevel8
                       3079         ALIGN   1
001186                 3080 _FactoryLevel8:
001186 rrrrrrrrrrrrrr  3081         DD      _STATUSCmdTxt,_STATCmdTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00118E 00000000000000  3082         DD      000000000H,000000000H,000000000H
       0000000000           
                       3083 ; rs232cmd.c  819               { STATUSCmdTxt, STATCmdTxt, NULL, NULL, NONE, FactTCXOStatus},
                       3084 ; rs232cmd.c  820       };
                       3085 ; rs232cmd.c  821       
                       3086 ; rs232cmd.c  822       //***********************************************************************
                            ***
                       3087 ; rs232cmd.c  823       // The following parameter structures are based on the enumerated types
                       3088 ; rs232cmd.c  824       //  defined in TABLES.H, ie. DO NOT change the order of these names. If
                       3089 ; rs232cmd.c  825       //  the order is changed in TABLES.H it must also be changed here.
                       3090 ; rs232cmd.c  826       
                       3091 ; rs232cmd.c  827       struct PAR_STRUCT code SAVEPar[1] = {
00119A rrrrrrrrrrrrrr  3092         DD      _FactTCXOStatus
       rr                   
                       3102         PUBLIC  _SAVEPar
                       3103         ALIGN   1
00119E                 3104 _SAVEPar:
00119E rrrrrrrrrrrrrr  3105         DD      _SAVEParTxt,_SAVEParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3106 ; rs232cmd.c  828               { SAVEParTxt, SAVEParTxt, NULL}
                       3107 ; rs232cmd.c  829       };
                       3108 ; rs232cmd.c  830       
                       3109 ; rs232cmd.c  831       struct PAR_STRUCT code GenlockSystemPar[4] = {
0011A6 00000000        3110         DD      000000000H
                       3114         PUBLIC  _GenlockSystemPar
                       3115         ALIGN   1
0011AA                 3116 _GenlockSystemPar:
0011AA rrrrrrrrrrrrrr  3117         DD      _INTERNALParTxt,_INTParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011B2 rrrrrrrrrrrrrr  3118         DD      _GenlockSystemPar+12
       rr                   
0011B6 rrrrrrrrrrrrrr  3119         DD      _PALBURSTParTxt,_PALBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  48

ADDR   CODE            LINE SOURCELINE
0011BE rrrrrrrrrrrrrr  3120         DD      _GenlockSystemPar+24
       rr                   
0011C2 rrrrrrrrrrrrrr  3121         DD      _NTSCBURSTParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011CA rrrrrrrrrrrrrr  3122         DD      _GenlockSystemPar+36
       rr                   
0011CE rrrrrrrrrrrrrr  3123         DD      _F10MHzParTxt,_F10MHzParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3124 ; rs232cmd.c  832               { INTERNALParTxt,  INTParTxt,   &GenlockSystemPar[1]},
                       3125 ; rs232cmd.c  833               { PALBURSTParTxt,  PALBParTxt,  &GenlockSystemPar[2]},
                       3126 ; rs232cmd.c  834               { NTSCBURSTParTxt, NTSCParTxt,  &GenlockSystemPar[3]},
                       3127 ; rs232cmd.c  835               { F10MHzParTxt,          F10MHzParTxt, NULL},
                       3128 ; rs232cmd.c  836       };
                       3129 ; rs232cmd.c  837       
                       3130 ; rs232cmd.c  838       struct PAR_STRUCT code SystemPar[3] = {
0011D6 00000000        3131         DD      000000000H
                       3135         PUBLIC  _SystemPar
                       3136         ALIGN   1
0011DA                 3137 _SystemPar:
0011DA rrrrrrrrrrrrrr  3138         DD      _PALParTxt,_PALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011E2 rrrrrrrrrrrrrr  3139         DD      _SystemPar+12
       rr                   
0011E6 rrrrrrrrrrrrrr  3140         DD      _PAL_IDParTxt,_PAL_IDParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0011EE rrrrrrrrrrrrrr  3141         DD      _SystemPar+24
       rr                   
0011F2 rrrrrrrrrrrrrr  3142         DD      _NTSCParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3143 ; rs232cmd.c  839               { PALParTxt,     PALParTxt, &SystemPar[1]},
                       3144 ; rs232cmd.c  840               { PAL_IDParTxt, PAL_IDParTxt, &SystemPar[2]},
                       3145 ; rs232cmd.c  841               { NTSCParTxt,    NTSCParTxt, NULL},
                       3146 ; rs232cmd.c  842       };
                       3147 ; rs232cmd.c  843       
                       3148 ; rs232cmd.c  844       struct PAR_STRUCT code CBPatternPar[23] = {
0011FA 00000000        3149         DD      000000000H
                       3153         PUBLIC  _CBPatternPar
                       3154         ALIGN   1
0011FE                 3155 _CBPatternPar:
0011FE rrrrrrrrrrrrrr  3156         DD      _CBSMPTEParTxt,_CBSMParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001206 rrrrrrrrrrrrrr  3157         DD      _CBPatternPar+12
       rr                   
00120A rrrrrrrrrrrrrr  3158         DD      _CBEBUParTxt,_CBEBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001212 rrrrrrrrrrrrrr  3159         DD      _CBPatternPar+24
       rr                   
001216 rrrrrrrrrrrrrr  3160         DD      _CBFCCParTxt,_CBFCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00121E rrrrrrrrrrrrrr  3161         DD      _CBPatternPar+36
       rr                   
001222 rrrrrrrrrrrrrr  3162         DD      _CBEBU8ParTxt,_CBEB8ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  49

ADDR   CODE            LINE SOURCELINE
00122A rrrrrrrrrrrrrr  3163         DD      _CBPatternPar+48
       rr                   
00122E rrrrrrrrrrrrrr  3164         DD      _CB100ParTxt,_CB100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001236 rrrrrrrrrrrrrr  3165         DD      _CBPatternPar+60
       rr                   
00123A rrrrrrrrrrrrrr  3166         DD      _CBGREY75ParTxt,_CBGR75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001242 rrrrrrrrrrrrrr  3167         DD      _CBPatternPar+72
       rr                   
001246 rrrrrrrrrrrrrr  3168         DD      _CBRED75ParTxt,_CBR75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00124E rrrrrrrrrrrrrr  3169         DD      _CBPatternPar+84
       rr                   
001252 rrrrrrrrrrrrrr  3170         DD      _RED75ParTxt,_RED75ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00125A rrrrrrrrrrrrrr  3171         DD      _CBPatternPar+96
       rr                   
00125E rrrrrrrrrrrrrr  3172         DD      _MULTIBURSTParTxt,_MULTParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001266 rrrrrrrrrrrrrr  3173         DD      _CBPatternPar+108
       rr                   
00126A rrrrrrrrrrrrrr  3174         DD      _CCIR18ParTxt,_CCIR18ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001272 rrrrrrrrrrrrrr  3175         DD      _CBPatternPar+120
       rr                   
001276 rrrrrrrrrrrrrr  3176         DD      _WIN10ParTxt,_WIN10ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00127E rrrrrrrrrrrrrr  3177         DD      _CBPatternPar+132
       rr                   
001282 rrrrrrrrrrrrrr  3178         DD      _WIN15ParTxt,_WIN15ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00128A rrrrrrrrrrrrrr  3179         DD      _CBPatternPar+144
       rr                   
00128E rrrrrrrrrrrrrr  3180         DD      _WIN20ParTxt,_WIN20ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001296 rrrrrrrrrrrrrr  3181         DD      _CBPatternPar+156
       rr                   
00129A rrrrrrrrrrrrrr  3182         DD      _WIN100ParTxt,_WIN100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012A2 rrrrrrrrrrrrrr  3183         DD      _CBPatternPar+168
       rr                   
0012A6 rrrrrrrrrrrrrr  3184         DD      _BLWH15ParTxt,_BLWH15ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012AE rrrrrrrrrrrrrr  3185         DD      _CBPatternPar+180
       rr                   
0012B2 rrrrrrrrrrrrrr  3186         DD      _WHITE100ParTxt,_WHIT100ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012BA rrrrrrrrrrrrrr  3187         DD      _CBPatternPar+192
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  50

ADDR   CODE            LINE SOURCELINE
0012BE rrrrrrrrrrrrrr  3188         DD      _BLACKParTxt,_BLACParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012C6 rrrrrrrrrrrrrr  3189         DD      _CBPatternPar+204
       rr                   
0012CA rrrrrrrrrrrrrr  3190         DD      _SDICHECKParTxt,_SDICParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012D2 rrrrrrrrrrrrrr  3191         DD      _CBPatternPar+216
       rr                   
0012D6 rrrrrrrrrrrrrr  3192         DD      _DGREYParTxt,_DGRParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012DE rrrrrrrrrrrrrr  3193         DD      _CBPatternPar+228
       rr                   
0012E2 rrrrrrrrrrrrrr  3194         DD      _STAIRCASE5ParTxt,_STA5ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012EA rrrrrrrrrrrrrr  3195         DD      _CBPatternPar+240
       rr                   
0012EE rrrrrrrrrrrrrr  3196         DD      _STAIRCASE10ParTxt,_STA10ParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0012F6 rrrrrrrrrrrrrr  3197         DD      _CBPatternPar+252
       rr                   
0012FA rrrrrrrrrrrrrr  3198         DD      _CROSSHATCHParTxt,_CROSParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001302 rrrrrrrrrrrrrr  3199         DD      _CBPatternPar+264
       rr                   
001306 rrrrrrrrrrrrrr  3200         DD      _PLUGEParTxt,_PLUGParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3201 ; rs232cmd.c  845               { CBSMPTEParTxt,                CBSMParTxt,     &CBPatternPar[1]}
                            ,
                       3202 ; rs232cmd.c  846               { CBEBUParTxt,          CBEBParTxt,     &CBPatternPar[2]},
                       3203 ; rs232cmd.c  847               { CBFCCParTxt,          CBFCParTxt,     &CBPatternPar[3]},
                       3204 ; rs232cmd.c  848               { CBEBU8ParTxt,                 CBEB8ParTxt,    &CBPatternPar[4]}
                            ,
                       3205 ; rs232cmd.c  849               { CB100ParTxt,          CB100ParTxt,    &CBPatternPar[5]},
                       3206 ; rs232cmd.c  850               { CBGREY75ParTxt,       CBGR75ParTxt,   &CBPatternPar[6]},
                       3207 ; rs232cmd.c  851               { CBRED75ParTxt,                CBR75ParTxt,    &CBPatternPar[7]}
                            ,
                       3208 ; rs232cmd.c  852               { RED75ParTxt,          RED75ParTxt,    &CBPatternPar[8]},
                       3209 ; rs232cmd.c  853       
                       3210 ; rs232cmd.c  854               { MULTIBURSTParTxt,     MULTParTxt,     &CBPatternPar[9]},
                       3211 ; rs232cmd.c  855               { CCIR18ParTxt,         CCIR18ParTxt,   &CBPatternPar[10]},
                       3212 ; rs232cmd.c  856                                                                                
                                                                                                            
                       3213 ; rs232cmd.c  857               { WIN10ParTxt,          WIN10ParTxt,    &CBPatternPar[11]},
                       3214 ; rs232cmd.c  858               { WIN15ParTxt,          WIN15ParTxt,    &CBPatternPar[12]},
                       3215 ; rs232cmd.c  859               { WIN20ParTxt,          WIN20ParTxt,    &CBPatternPar[13]},
                       3216 ; rs232cmd.c  860               { WIN100ParTxt,                 WIN100ParTxt,   &CBPatternPar[14]
                            },
                       3217 ; rs232cmd.c  861               { BLWH15ParTxt,                 BLWH15ParTxt,   &CBPatternPar[15]
                            },
                       3218 ; rs232cmd.c  862               { WHITE100ParTxt,       WHIT100ParTxt, &CBPatternPar[16]},
                       3219 ; rs232cmd.c  863               { BLACKParTxt,          BLACParTxt,     &CBPatternPar[17]},
                       3220 ; rs232cmd.c  864       
                       3221 ; rs232cmd.c  865               { SDICHECKParTxt,       SDICParTxt,     &CBPatternPar[18]},
                       3222 ; rs232cmd.c  866               { DGREYParTxt,          DGRParTxt,              &CBPatternPar[19]
                            },
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  51

ADDR   CODE            LINE SOURCELINE
                       3223 ; rs232cmd.c  867       
                       3224 ; rs232cmd.c  868               { STAIRCASE5ParTxt,     STA5ParTxt,     &CBPatternPar[20]},
                       3225 ; rs232cmd.c  869               { STAIRCASE10ParTxt, STA10ParTxt,       &CBPatternPar[21]},
                       3226 ; rs232cmd.c  870       
                       3227 ; rs232cmd.c  871               { CROSSHATCHParTxt,     CROSParTxt,     &CBPatternPar[22]},
                       3228 ; rs232cmd.c  872               { PLUGEParTxt,          PLUGParTxt,     NULL},
                       3229 ; rs232cmd.c  873       };
                       3230 ; rs232cmd.c  874       
                       3231 ; rs232cmd.c  875       struct PAR_STRUCT code EmbAudioSignalPar[3] = {
00130E 00000000        3232         DD      000000000H
                       3235         PUBLIC  _EmbAudioSignalPar
                       3236         ALIGN   1
001312                 3237 _EmbAudioSignalPar:
001312 rrrrrrrrrrrrrr  3238         DD      _OFFParTxt,_OFFParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00131A rrrrrrrrrrrrrr  3239         DD      _EmbAudioSignalPar+12
       rr                   
00131E rrrrrrrrrrrrrr  3240         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001326 rrrrrrrrrrrrrr  3241         DD      _EmbAudioSignalPar+24
       rr                   
00132A rrrrrrrrrrrrrr  3242         DD      _S1KHZParTxt,_S1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3243 ; rs232cmd.c  876               { OFFParTxt,            OFFParTxt,              &EmbAudioSignalPa
                            r[1]},
                       3244 ; rs232cmd.c  877               { SILENCEParTxt,        SILParTxt,              &EmbAudioSignalPa
                            r[2]},
                       3245 ; rs232cmd.c  878               { S1KHZParTxt,          S1KHZParTxt,    NULL},
                       3246 ; rs232cmd.c  879       };
                       3247 ; rs232cmd.c  880       
                       3248 ; rs232cmd.c  881       struct PAR_STRUCT code AudioOutputPar[2] = {
001332 00000000        3249         DD      000000000H
                       3253         PUBLIC  _AudioOutputPar
                       3254         ALIGN   1
001336                 3255 _AudioOutputPar:
001336 rrrrrrrrrrrrrr  3256         DD      _ANALOGParTxt,_ANALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00133E rrrrrrrrrrrrrr  3257         DD      _AudioOutputPar+12
       rr                   
001342 rrrrrrrrrrrrrr  3258         DD      _AESEBUParTxt,_AESParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3259 ; rs232cmd.c  882               { ANALOGParTxt, ANALParTxt, &AudioOutputPar[1]},
                       3260 ; rs232cmd.c  883               { AESEBUParTxt, AESParTxt,  NULL},
                       3261 ; rs232cmd.c  884       };
                       3262 ; rs232cmd.c  885       
                       3263 ; rs232cmd.c  886       struct PAR_STRUCT code AESEBUSystemPar[2] = {
00134A 00000000        3264         DD      000000000H
                       3267         PUBLIC  _AESEBUSystemPar
                       3268         ALIGN   1
00134E                 3269 _AESEBUSystemPar:
00134E rrrrrrrrrrrrrr  3270         DD      _PALParTxt,_PALParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001356 rrrrrrrrrrrrrr  3271         DD      _AESEBUSystemPar+12
       rr                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  52

ADDR   CODE            LINE SOURCELINE
00135A rrrrrrrrrrrrrr  3272         DD      _NTSCParTxt,_NTSCParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3273 ; rs232cmd.c  887               { PALParTxt,  PALParTxt,  &AESEBUSystemPar[1]},
                       3274 ; rs232cmd.c  888               { NTSCParTxt, NTSCParTxt, NULL},
                       3275 ; rs232cmd.c  889       };
                       3276 ; rs232cmd.c  890       
                       3277 ; rs232cmd.c  891       struct PAR_STRUCT code AudioSignalPar[4] = {
001362 00000000        3278         DD      000000000H
                       3281         PUBLIC  _AudioSignalPar
                       3282         ALIGN   1
001366                 3283 _AudioSignalPar:
001366 rrrrrrrrrrrrrr  3284         DD      _S500HZParTxt,_S500HZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00136E rrrrrrrrrrrrrr  3285         DD      _AudioSignalPar+12
       rr                   
001372 rrrrrrrrrrrrrr  3286         DD      _S1KHZParTxt,_S1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00137A rrrrrrrrrrrrrr  3287         DD      _AudioSignalPar+24
       rr                   
00137E rrrrrrrrrrrrrr  3288         DD      _SEBU1KHZParTxt,_SEBU1KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001386 rrrrrrrrrrrrrr  3289         DD      _AudioSignalPar+36
       rr                   
00138A rrrrrrrrrrrrrr  3290         DD      _S8KHZParTxt,_S8KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3291 ; rs232cmd.c  892               { S500HZParTxt,         S500HZParTxt,    &AudioSignalPar[1]},
                       3292 ; rs232cmd.c  893               { S1KHZParTxt,  S1KHZParTxt,     &AudioSignalPar[2]},
                       3293 ; rs232cmd.c  894               { SEBU1KHZParTxt, SEBU1KHZParTxt, &AudioSignalPar[3]},
                       3294 ; rs232cmd.c  895               { S8KHZParTxt,  S8KHZParTxt,     NULL},
                       3295 ; rs232cmd.c  896       };
                       3296 ; rs232cmd.c  897       
                       3297 ; rs232cmd.c  898       struct PAR_STRUCT code AnalogLevelPar[1] = {
001392 00000000        3298         DD      000000000H
                       3301         PUBLIC  _AnalogLevelPar
                       3302         ALIGN   1
001396                 3303 _AnalogLevelPar:
001396 rrrrrrrrrrrrrr  3304         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3305 ; rs232cmd.c  899               { SILENCEParTxt, SILParTxt, NULL},
                       3306 ; rs232cmd.c  900       };
                       3307 ; rs232cmd.c  901       
                       3308 ; rs232cmd.c  902       struct PAR_STRUCT code AESEBULevelPar[1] = {
00139E 00000000        3309         DD      000000000H
                       3312         PUBLIC  _AESEBULevelPar
                       3313         ALIGN   1
0013A2                 3314 _AESEBULevelPar:
0013A2 rrrrrrrrrrrrrr  3315         DD      _SILENCEParTxt,_SILParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3316 ; rs232cmd.c  903               { SILENCEParTxt, SILParTxt, NULL},
                       3317 ; rs232cmd.c  904       };
                       3318 ; rs232cmd.c  905       
                       3319 ; rs232cmd.c  906       struct PAR_STRUCT code AudioFrequencyPar[2] = {
0013AA 00000000        3320         DD      000000000H
                       3323         PUBLIC  _AudioFrequencyPar
                       3324         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  53

ADDR   CODE            LINE SOURCELINE
0013AE                 3325 _AudioFrequencyPar:
0013AE rrrrrrrrrrrrrr  3326         DD      _F441KHZParTxt,_F441KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013B6 rrrrrrrrrrrrrr  3327         DD      _AudioFrequencyPar+12
       rr                   
0013BA rrrrrrrrrrrrrr  3328         DD      _F48KHZParTxt,_F48KHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3329 ; rs232cmd.c  907               { F441KHZParTxt, F441KHZParTxt, &AudioFrequencyPar[1]},
                       3330 ; rs232cmd.c  908               { F48KHZParTxt,  F48KHZParTxt,  NULL},
                       3331 ; rs232cmd.c  909       };
                       3332 ; rs232cmd.c  910       
                       3333 ; rs232cmd.c  911       struct PAR_STRUCT code UnitPar[2] = {
0013C2 00000000        3334         DD      000000000H
                       3337         PUBLIC  _UnitPar
                       3338         ALIGN   1
0013C6                 3339 _UnitPar:
0013C6 rrrrrrrrrrrrrr  3340         DD      _BBParTxt,_BBParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013CE rrrrrrrrrrrrrr  3341         DD      _UnitPar+12
       rr                   
0013D2 rrrrrrrrrrrrrr  3342         DD      _SPGParTxt,_SPGParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3343 ; rs232cmd.c  912               { BBParTxt,  BBParTxt,  &UnitPar[1]},
                       3344 ; rs232cmd.c  913               { SPGParTxt, SPGParTxt, NULL},
                       3345 ; rs232cmd.c  914       };
                       3346 ; rs232cmd.c  915       
                       3347 ; rs232cmd.c  916       struct PAR_STRUCT code OffOnPar[2] = {
0013DA 00000000        3348         DD      000000000H
                       3351         PUBLIC  _OffOnPar
                       3352         ALIGN   1
0013DE                 3353 _OffOnPar:
0013DE rrrrrrrrrrrrrr  3354         DD      _OFFParTxt,_OFFParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013E6 rrrrrrrrrrrrrr  3355         DD      _OffOnPar+12
       rr                   
0013EA rrrrrrrrrrrrrr  3356         DD      _ONParTxt,_ONParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3357 ; rs232cmd.c  917               { OFFParTxt, OFFParTxt, &OffOnPar[1]},
                       3358 ; rs232cmd.c  918               { ONParTxt,  ONParTxt,  NULL},
                       3359 ; rs232cmd.c  919       };
                       3360 ; rs232cmd.c  920       
                       3361 ; rs232cmd.c  921       struct PAR_STRUCT code FactBBGenSignalPar[2] = {
0013F2 00000000        3362         DD      000000000H
                       3365         PUBLIC  _FactBBGenSignalPar
                       3366         ALIGN   1
0013F6                 3367 _FactBBGenSignalPar:
0013F6 rrrrrrrrrrrrrr  3368         DD      _NORMALParTxt,_NORMParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
0013FE rrrrrrrrrrrrrr  3369         DD      _FactBBGenSignalPar+12
       rr                   
001402 rrrrrrrrrrrrrr  3370         DD      _F45MHZParTxt,_F45MHZParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3371 ; rs232cmd.c  922               { NORMALParTxt, NORMParTxt,     &FactBBGenSignalPar[1]},
                       3372 ; rs232cmd.c  923               { F45MHZParTxt, F45MHZParTxt, NULL},
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  54

ADDR   CODE            LINE SOURCELINE
                       3373 ; rs232cmd.c  924       };
                       3374 ; rs232cmd.c  925       
                       3375 ; rs232cmd.c  926       struct PAR_STRUCT code MinMaxPar[2] = {
00140A 00000000        3376         DD      000000000H
                       3379         PUBLIC  _MinMaxPar
                       3380         ALIGN   1
00140E                 3381 _MinMaxPar:
00140E rrrrrrrrrrrrrr  3382         DD      _MINParTxt,_MINParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
001416 rrrrrrrrrrrrrr  3383         DD      _MinMaxPar+12
       rr                   
00141A rrrrrrrrrrrrrr  3384         DD      _MAXParTxt,_MAXParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3385 ; rs232cmd.c  927               { MINParTxt, MINParTxt, &MinMaxPar[1]},
                       3386 ; rs232cmd.c  928               { MAXParTxt, MAXParTxt, NULL},
                       3387 ; rs232cmd.c  929       };
                       3388 ; rs232cmd.c  930       
                       3389 ; rs232cmd.c  931       struct PAR_STRUCT code UpDownPar[2] = {
001422 00000000        3390         DD      000000000H
                       3393         PUBLIC  _UpDownPar
                       3394         ALIGN   1
001426                 3395 _UpDownPar:
001426 rrrrrrrrrrrrrr  3396         DD      _UPParTxt,_UPParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
00142E rrrrrrrrrrrrrr  3397         DD      _UpDownPar+12
       rr                   
001432 rrrrrrrrrrrrrr  3398         DD      _DOWNParTxt,_DOWNParTxt
       rrrrrrrrrrrrrr       
       rrrr                 
                       3399 ; rs232cmd.c  932               { UPParTxt,   UPParTxt,   &UpDownPar[1]},
                       3400 ; rs232cmd.c  933               { DOWNParTxt, DOWNParTxt, NULL},
                       3401 ; rs232cmd.c  934       };
                       3402 ; rs232cmd.c  935       
                       3403 ; rs232cmd.c  936       /************************************************************************
                            ***/
                       3404 ; rs232cmd.c  937       // Temporary variables PRIVATE NOT overlayable
                       3405 ; rs232cmd.c  938       
                       3406 ; rs232cmd.c  939       static unsigned int Suffix[4]=
00143A 00000000        3407         DD      000000000H
000000                 3408 RS232CMD_INI_FA SEGMENT HDATA INSEGMENT INIT
000000                 3409         RSEG    RS232CMD_INI_FA
                       3412         ALIGN   1
000000                 3413 _Suffix:
                       3414 ; rs232cmd.c  940       {
                       3415 ; rs232cmd.c  941               1,1,1,1
                       3416 ; rs232cmd.c  942       };
                       3417 ; rs232cmd.c  943       
                       3418 ; rs232cmd.c  944       static bool PasswordProtected = true;
000000 01000100010001  3419         DW      00001H,00001H,00001H,00001H
       00                   
                       3421         ALIGN   1
000008                 3422 _PasswordProtected:
                       3423 ; rs232cmd.c  945       static UC GenlockCalEnable = 0;
000008 FFFF            3424         DW      0FFFFH
00000A                 3426 _GenlockCalEnable:
                       3427 ; rs232cmd.c  946       static int GenlockCalValue = 0;
00000A 00              3428         DB      000H
00000B RESERVED        3430         ALIGN   1
00000B
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  55

ADDR   CODE            LINE SOURCELINE
00000C                 3431 _GenlockCalValue:
                       3432 ; rs232cmd.c  947       
                       3433 ; rs232cmd.c  948       /************************************************************************
                            **/
                       3434 ; rs232cmd.c  949       /* CLSCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3435 ; rs232cmd.c  950       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3436 ; rs232cmd.c  951       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       3437 ; rs232cmd.c  952       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3438 ; rs232cmd.c  953       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3439 ; rs232cmd.c  954       /* Function:  Clear status command                                       
                                                                                                                             
                                                    */
                       3440 ; rs232cmd.c  955       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3441 ; rs232cmd.c  956       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3442 ; rs232cmd.c  957       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3443 ; rs232cmd.c  958       /************************************************************************
                            **/
                       3444 ; rs232cmd.c  959       void CLSCommand( void)
                       3445 ; rs232cmd.c  960       {
00000C 0000            3446         DW      00000H
000000                 3447 RS232CMD_PR     SEGMENT HCODE
000000                 3448         RSEG    RS232CMD_PR
                       3449         ALIGN   1
                       3451         PUBLIC  _CLSCommand
000000                 3452 _CLSCommand:
                       3456 ; rs232cmd.c  961               if ( CmdExecute && !SCPIError)
000000 964842rr        3458         MOV.B   ES,#SEG( _CmdExecute )
000004 9908rrrr        3459         MOV.W   R0,#SOF( _CmdExecute )
000008 8200            3460         MOV.B   R0L,[R0]
00000A F320            3461         BEQ     _8
00000C 964842rr        3462         MOV.B   ES,#SEG( _SCPIError )
000010 9908rrrr        3463         MOV.W   R0,#SOF( _SCPIError )
000014 8A00            3464         MOV.W   R0,[R0]
000016 F21A            3465         BNE     _8
                       3466 ; rs232cmd.c  962               {
                       3467 ; rs232cmd.c  963                       if ( CmdRequest)
000018 964842rr        3469         MOV.B   ES,#SEG( _CmdRequest )
00001C 9908rrrr        3470         MOV.W   R0,#SOF( _CmdRequest )
000020 8200            3471         MOV.B   R0L,[R0]
000022 F306            3472         BEQ     _3
                       3473 ; rs232cmd.c  964                               SCPIError = SyntaxErr;
000024 964842rr        3475         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  56

ADDR   CODE            LINE SOURCELINE
000028 9908rrrr        3476         MOV.W   R0,#SOF( _SCPIError )
00002C BA03            3477         MOV.W   [R0],#03H
00002E D680            3478         RET
00002E D680            3478         RET
000030                 3479 _3:
                       3480 ; rs232cmd.c  965                       else
                       3481 ; rs232cmd.c  966                       {
                       3482 ; rs232cmd.c  967                               if ( ParCnt)
000030 964842rr        3484         MOV.B   ES,#SEG( _ParCnt )
000034 9908rrrr        3485         MOV.W   R0,#SOF( _ParCnt )
000038 8200            3486         MOV.B   R0L,[R0]
00003A F306            3487         BEQ     _4
                       3488 ; rs232cmd.c  968                                       SCPIError = ParNotAllowed;
00003C 964842rr        3490         MOV.B   ES,#SEG( _SCPIError )
000040 9908rrrr        3491         MOV.W   R0,#SOF( _SCPIError )
000044 BA06            3492         MOV.W   [R0],#06H
000046 D680            3493         RET
000046 D680            3493         RET
000048                 3494 _4:
                       3495 ; rs232cmd.c  969                               else
                       3496 ; rs232cmd.c  970                                       ResetErrorEventQueue();
                       3498         CALL    _ResetErrorEventQueue
000048 C4rrrrrr       +3498 ;       FCALL   _ResetErrorEventQueue
                       3499 ; rs232cmd.c  971                       }
                       3500 ; rs232cmd.c  972               }
00004C                 3502 _8:
                       3503 ; rs232cmd.c  973       }
00004C D680            3505         RET
                       3507 ; rs232cmd.c  974       
                       3508 ; rs232cmd.c  975       /************************************************************************
                            **/
                       3509 ; rs232cmd.c  976       /* ESECommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3510 ; rs232cmd.c  977       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3511 ; rs232cmd.c  978       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3512 ; rs232cmd.c  979       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3513 ; rs232cmd.c  980       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3514 ; rs232cmd.c  981       /* Function:    Set/read the Standard Event Status Enable Register       
                                                            */
                       3515 ; rs232cmd.c  982       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       3516 ; rs232cmd.c  983       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3517 ; rs232cmd.c  984       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  57

ADDR   CODE            LINE SOURCELINE
                       3518 ; rs232cmd.c  985       /************************************************************************
                            **/
                       3519 ; rs232cmd.c  986       void ESECommand( void)
                       3520 ; rs232cmd.c  987       {
                       3521         ALIGN   1
                       3523         PUBLIC  _ESECommand
00004E                 3524 _ESECommand:
00004E A97E            3528         ADDS.W  R7,#0EH
                       3531 ; rs232cmd.c  988               int Reg;
                       3532 ; rs232cmd.c  989       
                       3533 ; rs232cmd.c  990               if ( CmdExecute && !SCPIError)
000050 964842rr        3535         MOV.B   ES,#SEG( _CmdExecute )
000054 9908rrrr        3536         MOV.W   R0,#SOF( _CmdExecute )
000058 8200            3537         MOV.B   R0L,[R0]
00005A F35E            3538         BEQ     _21
00005C 964842rr        3539         MOV.B   ES,#SEG( _SCPIError )
000060 9908rrrr        3540         MOV.W   R0,#SOF( _SCPIError )
000064 8A00            3541         MOV.W   R0,[R0]
000066 F258            3542         BNE     _21
                       3543 ; rs232cmd.c  991               {
                       3544 ; rs232cmd.c  992                       if ( CmdRequest)
000068 964842rr        3546         MOV.B   ES,#SEG( _CmdRequest )
00006C 9908rrrr        3547         MOV.W   R0,#SOF( _CmdRequest )
000070 8200            3548         MOV.B   R0L,[R0]
000072 F31E            3549         BEQ     _12
                       3550 ; rs232cmd.c  993                       {
                       3551 ; rs232cmd.c  994                               if ( ParCnt)
000074 964842rr        3553         MOV.B   ES,#SEG( _ParCnt )
000078 9908rrrr        3554         MOV.W   R0,#SOF( _ParCnt )
00007C 8200            3555         MOV.B   R0L,[R0]
00007E F306            3556         BEQ     _11
                       3557 ; rs232cmd.c  995                                       SCPIError = ParNotAllowed;
000080 964842rr        3559         MOV.B   ES,#SEG( _SCPIError )
000084 9908rrrr        3560         MOV.W   R0,#SOF( _SCPIError )
000088 BA06            3561         MOV.W   [R0],#06H
00008A FE46            3562         BR      _21
00008A FE46            3562         BR      _21
00008C                 3563 _11:
                       3564 ; rs232cmd.c  996                               else
                       3565 ; rs232cmd.c  997                                       rs232printf( 12, "%d\n", ESEReg);
00008C 9908000C        3567         MOV.W   R0,#0CH
000090 964842rr        3568         MOV.B   ES,#SEG( _ESEReg )
000094 9918rrrr        3569         MOV.W   R1,#SOF( _ESEReg )
000098 8221            3570         MOV.B   R1L,[R1]
00009A B130            3571         MOVS.B  R1H,#00H
00009C 0F02            3572         PUSH.W  R1
00009E 9938rrrr        3574         MOV.W   R3,#SEG( _9 )
0000A2 9928rrrr        3575         MOV.W   R2,#SOF( _9 )
0000A6 0F0C            3576         PUSH.W  R2, R3
                       3578         CALL    _rs232printf
0000A8 C4rrrrrr       +3578 ;       FCALL   _rs232printf
0000AC A976            3579         ADDS.W  R7,#06H
                       3581 ; rs232cmd.c  998                       }
0000AE FE34            3583         BR      _21
0000AE FE34            3583         BR      _21
0000B0                 3584 _12:
                       3585 ; rs232cmd.c  999                       else
                       3586 ; rs232cmd.c 1000                       {
                       3587 ; rs232cmd.c 1001                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0000B0 964842rr        3589         MOV.B   ES,#SEG( _ParCnt )
0000B4 9908rrrr        3590         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  58

ADDR   CODE            LINE SOURCELINE
0000B8 8200            3591         MOV.B   R0L,[R0]
0000BA 910401          3592         CMP.B   R0L,#01H
0000BD F215            3593         BNE     _13
0000BF 9918rrrr        3594         MOV.W   R1,#SEG( _Cmd )
0000C3 9908rrrr        3595         MOV.W   R0,#SOF( _Cmd )
0000C7 9168rr          3596         MOV.B   R3L,#SEG( __lc_bs )
0000CA 7177            3597         XOR.B   R3H,R3H
0000CC 8927            3598         MOV.W   R2,R7
0000CE 0F0C            3599         PUSH.W  R2, R3
0000D0 9938rrrr        3601         MOV.W   R3,#SEG( _10 )
0000D4 9928rrrr        3602         MOV.W   R2,#SOF( _10 )
0000D8 0F0C            3603         PUSH.W  R2, R3
                       3605         CALL    _sscanf
0000DA C4rrrrrr       +3605 ;       FCALL   _sscanf
0000DE 99700008        3606         ADD.W   R7,#08H
0000E2 99040001        3608         CMP.W   R0,#01H
0000E6 F306            3609         BEQ     _14
0000E6 F306            3609         BEQ     _14
0000E8                 3610 _13:
                       3611 ; rs232cmd.c 1002                               {
                       3612 ; rs232cmd.c 1003                                       SCPIError = SyntaxErr;  
0000E8 964842rr        3614         MOV.B   ES,#SEG( _SCPIError )
0000EC 9908rrrr        3615         MOV.W   R0,#SOF( _SCPIError )
0000F0 BA03            3616         MOV.W   [R0],#03H
                       3617 ; rs232cmd.c 1004                                       return;
0000F2 FE12            3619         BR      _21
                       3620 ; rs232cmd.c 1005                               }
0000F4                 3622 _14:
                       3623 ; rs232cmd.c 1006       
                       3624 ; rs232cmd.c 1007                               if ( Reg > 255)
0000F4 9A7400FF        3626         CMP.W   [R7],#0FFH
0000F8 FD07            3627         BLE     _15
                       3628 ; rs232cmd.c 1008                               {
                       3629 ; rs232cmd.c 1009                                       SCPIError = DataOutOfRange;
0000FA 964842rr        3631         MOV.B   ES,#SEG( _SCPIError )
0000FE 9908rrrr        3632         MOV.W   R0,#SOF( _SCPIError )
000102 9A080021        3633         MOV.W   [R0],#021H
                       3634 ; rs232cmd.c 1010                                       return;
000106 FE08            3636         BR      _21
                       3637 ; rs232cmd.c 1011                               }
000108                 3639 _15:
                       3640 ; rs232cmd.c 1012       
                       3641 ; rs232cmd.c 1013                               ESEReg = Reg & 0xFF;
000108 8A07            3643         MOV.W   R0,[R7]
00010A 9105FF          3644         AND.B   R0L,#0FFH
00010D 964842rr        3645         MOV.B   ES,#SEG( _ESEReg )
000111 9918rrrr        3646         MOV.W   R1,#SOF( _ESEReg )
000115 8209            3647         MOV.B   [R1],R0L
                       3648 ; rs232cmd.c 1014                       }
                       3649 ; rs232cmd.c 1015               }
                       3650 ; rs232cmd.c 1016       }
000118                 3652 _21:
000118 A972            3653         ADDS.W  R7,#02H
00011A D680            3655         RET
                       3657 ; rs232cmd.c 1017       
                       3658 ; rs232cmd.c 1018       /************************************************************************
                            **/
                       3659 ; rs232cmd.c 1019       /* ESRCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3660 ; rs232cmd.c 1020       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  59

ADDR   CODE            LINE SOURCELINE
                                                    */
                       3661 ; rs232cmd.c 1021       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3662 ; rs232cmd.c 1022       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3663 ; rs232cmd.c 1023       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3664 ; rs232cmd.c 1024       /* Function:    Read and clear the Standard Event Status Register        
                                                                    */
                       3665 ; rs232cmd.c 1025       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3666 ; rs232cmd.c 1026       /*                                              The register will reset t
                            o zero.                                                                                          
                                            */
                       3667 ; rs232cmd.c 1027       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3668 ; rs232cmd.c 1028       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3669 ; rs232cmd.c 1029       /************************************************************************
                            **/
                       3670 ; rs232cmd.c 1030       void ESRCommand( void)
                       3671 ; rs232cmd.c 1031       {
                       3672         ALIGN   1
                       3674         PUBLIC  _ESRCommand
00011C                 3675 _ESRCommand:
                       3681 ; rs232cmd.c 1032               int Reg;
                       3682 ; rs232cmd.c 1033       
                       3683 ; rs232cmd.c 1034               if ( CmdExecute && !SCPIError)
00011C 964842rr        3685         MOV.B   ES,#SEG( _CmdExecute )
000120 9908rrrr        3686         MOV.W   R0,#SOF( _CmdExecute )
000124 8200            3687         MOV.B   R0L,[R0]
000126 F332            3688         BEQ     _30
000128 964842rr        3689         MOV.B   ES,#SEG( _SCPIError )
00012C 9908rrrr        3690         MOV.W   R0,#SOF( _SCPIError )
000130 8A00            3691         MOV.W   R0,[R0]
000132 F22C            3692         BNE     _30
                       3693 ; rs232cmd.c 1035               {
                       3694 ; rs232cmd.c 1036                       if ( CmdRequest)
000134 964842rr        3696         MOV.B   ES,#SEG( _CmdRequest )
000138 9908rrrr        3697         MOV.W   R0,#SOF( _CmdRequest )
00013C 8200            3698         MOV.B   R0L,[R0]
00013E F321            3699         BEQ     _26
                       3700 ; rs232cmd.c 1037                       {
                       3701 ; rs232cmd.c 1038                               if ( ParCnt)
000140 964842rr        3703         MOV.B   ES,#SEG( _ParCnt )
000144 9908rrrr        3704         MOV.W   R0,#SOF( _ParCnt )
000148 8200            3705         MOV.B   R0L,[R0]
00014A F306            3706         BEQ     _25
                       3707 ; rs232cmd.c 1039                                       SCPIError = ParNotAllowed;
00014C 964842rr        3709         MOV.B   ES,#SEG( _SCPIError )
000150 9908rrrr        3710         MOV.W   R0,#SOF( _SCPIError )
000154 BA06            3711         MOV.W   [R0],#06H
000156 D680            3712         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  60

ADDR   CODE            LINE SOURCELINE
000156 D680            3712         RET
000158                 3713 _25:
                       3714 ; rs232cmd.c 1040                               else
                       3715 ; rs232cmd.c 1041                               {
                       3716 ; rs232cmd.c 1042                                       rs232printf( 12, "%d\n", UpdateESRRegiste
                            r());
                       3718         CALL    _UpdateESRRegister
000158 C4rrrrrr       +3718 ;       FCALL   _UpdateESRRegister
00015C 8120            3719         MOV.B   R1L,R0L
00015E B130            3720         MOVS.B  R1H,#00H
000160 9908000C        3721         MOV.W   R0,#0CH
000164 0F02            3722         PUSH.W  R1
000166 9938rrrr        3724         MOV.W   R3,#SEG( _9 )
00016A 9928rrrr        3725         MOV.W   R2,#SOF( _9 )
00016E 0F0C            3726         PUSH.W  R2, R3
                       3728         CALL    _rs232printf
000170 C4rrrrrr       +3728 ;       FCALL   _rs232printf
000174 A976            3729         ADDS.W  R7,#06H
                       3731 ; rs232cmd.c 1043       
                       3732 ; rs232cmd.c 1044                                       ESRReg = 0;
000176 964842rr        3734         MOV.B   ES,#SEG( _ESRReg )
00017A 9908rrrr        3735         MOV.W   R0,#SOF( _ESRReg )
00017E B200            3736         MOV.B   [R0],#00H
                       3737 ; rs232cmd.c 1045                               }
                       3738 ; rs232cmd.c 1046                       }
000180 D680            3740         RET
000180 D680            3740         RET
000182                 3741 _26:
                       3742 ; rs232cmd.c 1047                       else
                       3743 ; rs232cmd.c 1048                               SCPIError = SyntaxErr;
000182 964842rr        3745         MOV.B   ES,#SEG( _SCPIError )
000186 9908rrrr        3746         MOV.W   R0,#SOF( _SCPIError )
00018A BA03            3747         MOV.W   [R0],#03H
                       3748 ; rs232cmd.c 1049               }
00018C                 3750 _30:
                       3751 ; rs232cmd.c 1050       }
00018C D680            3753         RET
                       3755 ; rs232cmd.c 1051       
                       3756 ; rs232cmd.c 1052       /************************************************************************
                            **/
                       3757 ; rs232cmd.c 1053       /* OPCCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3758 ; rs232cmd.c 1054       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3759 ; rs232cmd.c 1055       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       3760 ; rs232cmd.c 1056       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3761 ; rs232cmd.c 1057       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3762 ; rs232cmd.c 1058       /* Function:    Operation Complete Command/Query                         
                                                                                                                    */
                       3763 ; rs232cmd.c 1059       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3764 ; rs232cmd.c 1060       /* Returns:             -                                                
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  61

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                            *
                            /
                       3765 ; rs232cmd.c 1061       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3766 ; rs232cmd.c 1062       /************************************************************************
                            **/
                       3767 ; rs232cmd.c 1063       void OPCCommand( void)
                       3768 ; rs232cmd.c 1064       {
                       3769         ALIGN   1
                       3771         PUBLIC  _OPCCommand
00018E                 3772 _OPCCommand:
                       3776 ; rs232cmd.c 1065               if ( CmdExecute && !SCPIError)
00018E 964842rr        3778         MOV.B   ES,#SEG( _CmdExecute )
000192 9908rrrr        3779         MOV.W   R0,#SOF( _CmdExecute )
000196 8200            3780         MOV.B   R0L,[R0]
000198 F323            3781         BEQ     _36
00019A 964842rr        3782         MOV.B   ES,#SEG( _SCPIError )
00019E 9908rrrr        3783         MOV.W   R0,#SOF( _SCPIError )
0001A2 8A00            3784         MOV.W   R0,[R0]
0001A4 F21D            3785         BNE     _36
                       3786 ; rs232cmd.c 1066               {
                       3787 ; rs232cmd.c 1067                       if ( CmdRequest)
0001A6 964842rr        3789         MOV.B   ES,#SEG( _CmdRequest )
0001AA 9908rrrr        3790         MOV.W   R0,#SOF( _CmdRequest )
0001AE 8200            3791         MOV.B   R0L,[R0]
0001B0 F30C            3792         BEQ     _31
                       3793 ; rs232cmd.c 1068                       {
                       3794 ; rs232cmd.c 1069                               if ( ParCnt)
0001B2 964842rr        3796         MOV.B   ES,#SEG( _ParCnt )
0001B6 9908rrrr        3797         MOV.W   R0,#SOF( _ParCnt )
0001BA 8200            3798         MOV.B   R0L,[R0]
0001BC F311            3799         BEQ     _36
                       3800 ; rs232cmd.c 1070                                       SCPIError = ParNotAllowed;
0001BE 964842rr        3802         MOV.B   ES,#SEG( _SCPIError )
0001C2 9908rrrr        3803         MOV.W   R0,#SOF( _SCPIError )
0001C6 BA06            3804         MOV.W   [R0],#06H
                       3805 ; rs232cmd.c 1071                       }
0001C8 D680            3807         RET
0001C8 D680            3807         RET
0001CA                 3808 _31:
                       3809 ; rs232cmd.c 1072                       else
                       3810 ; rs232cmd.c 1073                       {
                       3811 ; rs232cmd.c 1074                               if ( ParCnt)
0001CA 964842rr        3813         MOV.B   ES,#SEG( _ParCnt )
0001CE 9908rrrr        3814         MOV.W   R0,#SOF( _ParCnt )
0001D2 8200            3815         MOV.B   R0L,[R0]
0001D4 F305            3816         BEQ     _36
                       3817 ; rs232cmd.c 1075                                       SCPIError = ParNotAllowed;
0001D6 964842rr        3819         MOV.B   ES,#SEG( _SCPIError )
0001DA 9908rrrr        3820         MOV.W   R0,#SOF( _SCPIError )
0001DE BA06            3821         MOV.W   [R0],#06H
                       3822 ; rs232cmd.c 1076                       }
                       3823 ; rs232cmd.c 1077               }
0001E0                 3825 _36:
                       3826 ; rs232cmd.c 1078       }
0001E0 D680            3828         RET
                       3830 ; rs232cmd.c 1079       
                       3831 ; rs232cmd.c 1080       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  62

ADDR   CODE            LINE SOURCELINE
                       3832 ; rs232cmd.c 1081       /* SRECommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3833 ; rs232cmd.c 1082       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3834 ; rs232cmd.c 1083       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3835 ; rs232cmd.c 1084       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3836 ; rs232cmd.c 1085       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3837 ; rs232cmd.c 1086       /* Function:    Set/read the Service Request Enable Register             
                                                                            */
                       3838 ; rs232cmd.c 1087       /* Remarks:             Bit 6 in *SRE? register is always ZERO           
                                                                                                    */
                       3839 ; rs232cmd.c 1088       /*                                              Bit 6 in *SRE register is
                             ignored                                                                                         
                                                    */
                       3840 ; rs232cmd.c 1089       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       3841 ; rs232cmd.c 1090       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3842 ; rs232cmd.c 1091       /************************************************************************
                            **/
                       3843 ; rs232cmd.c 1092       void SRECommand( void)
                       3844 ; rs232cmd.c 1093       {
                       3845         ALIGN   1
                       3847         PUBLIC  _SRECommand
0001E2                 3848 _SRECommand:
0001E2 A97E            3852         ADDS.W  R7,#0EH
                       3855 ; rs232cmd.c 1094               int Reg;
                       3856 ; rs232cmd.c 1095       
                       3857 ; rs232cmd.c 1096               if ( CmdExecute && !SCPIError)
0001E4 964842rr        3859         MOV.B   ES,#SEG( _CmdExecute )
0001E8 9908rrrr        3860         MOV.W   R0,#SOF( _CmdExecute )
0001EC 8200            3861         MOV.B   R0L,[R0]
0001EE F35E            3862         BEQ     _47
0001F0 964842rr        3863         MOV.B   ES,#SEG( _SCPIError )
0001F4 9908rrrr        3864         MOV.W   R0,#SOF( _SCPIError )
0001F8 8A00            3865         MOV.W   R0,[R0]
0001FA F258            3866         BNE     _47
                       3867 ; rs232cmd.c 1097               {
                       3868 ; rs232cmd.c 1098                       if ( CmdRequest)
0001FC 964842rr        3870         MOV.B   ES,#SEG( _CmdRequest )
000200 9908rrrr        3871         MOV.W   R0,#SOF( _CmdRequest )
000204 8200            3872         MOV.B   R0L,[R0]
000206 F31E            3873         BEQ     _38
                       3874 ; rs232cmd.c 1099                       {
                       3875 ; rs232cmd.c 1100                               if ( ParCnt)
000208 964842rr        3877         MOV.B   ES,#SEG( _ParCnt )
00020C 9908rrrr        3878         MOV.W   R0,#SOF( _ParCnt )
000210 8200            3879         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  63

ADDR   CODE            LINE SOURCELINE
000212 F306            3880         BEQ     _37
                       3881 ; rs232cmd.c 1101                                       SCPIError = ParNotAllowed;
000214 964842rr        3883         MOV.B   ES,#SEG( _SCPIError )
000218 9908rrrr        3884         MOV.W   R0,#SOF( _SCPIError )
00021C BA06            3885         MOV.W   [R0],#06H
00021E FE46            3886         BR      _47
00021E FE46            3886         BR      _47
000220                 3887 _37:
                       3888 ; rs232cmd.c 1102                               else
                       3889 ; rs232cmd.c 1103                                       rs232printf( 12, "%d\n", SREReg);
000220 9908000C        3891         MOV.W   R0,#0CH
000224 964842rr        3892         MOV.B   ES,#SEG( _SREReg )
000228 9918rrrr        3893         MOV.W   R1,#SOF( _SREReg )
00022C 8221            3894         MOV.B   R1L,[R1]
00022E B130            3895         MOVS.B  R1H,#00H
000230 0F02            3896         PUSH.W  R1
000232 9938rrrr        3898         MOV.W   R3,#SEG( _9 )
000236 9928rrrr        3899         MOV.W   R2,#SOF( _9 )
00023A 0F0C            3900         PUSH.W  R2, R3
                       3902         CALL    _rs232printf
00023C C4rrrrrr       +3902 ;       FCALL   _rs232printf
000240 A976            3903         ADDS.W  R7,#06H
                       3905 ; rs232cmd.c 1104                       }
000242 FE34            3907         BR      _47
000242 FE34            3907         BR      _47
000244                 3908 _38:
                       3909 ; rs232cmd.c 1105                       else
                       3910 ; rs232cmd.c 1106                       {
                       3911 ; rs232cmd.c 1107                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000244 964842rr        3913         MOV.B   ES,#SEG( _ParCnt )
000248 9908rrrr        3914         MOV.W   R0,#SOF( _ParCnt )
00024C 8200            3915         MOV.B   R0L,[R0]
00024E 910401          3916         CMP.B   R0L,#01H
000251 F215            3917         BNE     _39
000253 9918rrrr        3918         MOV.W   R1,#SEG( _Cmd )
000257 9908rrrr        3919         MOV.W   R0,#SOF( _Cmd )
00025B 9168rr          3920         MOV.B   R3L,#SEG( __lc_bs )
00025E 7177            3921         XOR.B   R3H,R3H
000260 8927            3922         MOV.W   R2,R7
000262 0F0C            3923         PUSH.W  R2, R3
000264 9938rrrr        3925         MOV.W   R3,#SEG( _10 )
000268 9928rrrr        3926         MOV.W   R2,#SOF( _10 )
00026C 0F0C            3927         PUSH.W  R2, R3
                       3929         CALL    _sscanf
00026E C4rrrrrr       +3929 ;       FCALL   _sscanf
000272 99700008        3930         ADD.W   R7,#08H
000276 99040001        3932         CMP.W   R0,#01H
00027A F306            3933         BEQ     _40
00027A F306            3933         BEQ     _40
00027C                 3934 _39:
                       3935 ; rs232cmd.c 1108                               {
                       3936 ; rs232cmd.c 1109                                       SCPIError = SyntaxErr;  
00027C 964842rr        3938         MOV.B   ES,#SEG( _SCPIError )
000280 9908rrrr        3939         MOV.W   R0,#SOF( _SCPIError )
000284 BA03            3940         MOV.W   [R0],#03H
                       3941 ; rs232cmd.c 1110                                       return;
000286 FE12            3943         BR      _47
                       3944 ; rs232cmd.c 1111                               }
000288                 3946 _40:
                       3947 ; rs232cmd.c 1112       
                       3948 ; rs232cmd.c 1113                               if ( Reg > 255)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  64

ADDR   CODE            LINE SOURCELINE
000288 9A7400FF        3950         CMP.W   [R7],#0FFH
00028C FD07            3951         BLE     _41
                       3952 ; rs232cmd.c 1114                               {
                       3953 ; rs232cmd.c 1115                                       SCPIError = DataOutOfRange;
00028E 964842rr        3955         MOV.B   ES,#SEG( _SCPIError )
000292 9908rrrr        3956         MOV.W   R0,#SOF( _SCPIError )
000296 9A080021        3957         MOV.W   [R0],#021H
                       3958 ; rs232cmd.c 1116                                       return;
00029A FE08            3960         BR      _47
                       3961 ; rs232cmd.c 1117                               }
00029C                 3963 _41:
                       3964 ; rs232cmd.c 1118       
                       3965 ; rs232cmd.c 1119                               SREReg = Reg & 0xBF;
00029C 8A07            3967         MOV.W   R0,[R7]
00029E 9105BF          3968         AND.B   R0L,#0BFH
0002A1 964842rr        3969         MOV.B   ES,#SEG( _SREReg )
0002A5 9918rrrr        3970         MOV.W   R1,#SOF( _SREReg )
0002A9 8209            3971         MOV.B   [R1],R0L
                       3972 ; rs232cmd.c 1120                       }
                       3973 ; rs232cmd.c 1121               }
                       3974 ; rs232cmd.c 1122       }
0002AC                 3976 _47:
0002AC A972            3977         ADDS.W  R7,#02H
0002AE D680            3979         RET
                       3981 ; rs232cmd.c 1123       
                       3982 ; rs232cmd.c 1124       /************************************************************************
                            **/
                       3983 ; rs232cmd.c 1125       /* STBCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       3984 ; rs232cmd.c 1126       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3985 ; rs232cmd.c 1127       /* Author:              Kim Engedahl, DEV, 970627                        
                                                                                                                             
                                    */
                       3986 ; rs232cmd.c 1128       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       3987 ; rs232cmd.c 1129       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       3988 ; rs232cmd.c 1130       /* Function:    Read the Status Byte Register                            
                                                                                                                            *
                            /
                       3989 ; rs232cmd.c 1131       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       3990 ; rs232cmd.c 1132       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3991 ; rs232cmd.c 1133       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       3992 ; rs232cmd.c 1134       /************************************************************************
                            **/
                       3993 ; rs232cmd.c 1135       void STBCommand( void)
                       3994 ; rs232cmd.c 1136       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  65

ADDR   CODE            LINE SOURCELINE
                       3995         ALIGN   1
                       3997         PUBLIC  _STBCommand
0002B0                 3998 _STBCommand:
                       4002 ; rs232cmd.c 1137               if ( CmdExecute && !SCPIError)
0002B0 964842rr        4004         MOV.B   ES,#SEG( _CmdExecute )
0002B4 9908rrrr        4005         MOV.W   R0,#SOF( _CmdExecute )
0002B8 8200            4006         MOV.B   R0L,[R0]
0002BA F331            4007         BEQ     _56
0002BC 964842rr        4008         MOV.B   ES,#SEG( _SCPIError )
0002C0 9908rrrr        4009         MOV.W   R0,#SOF( _SCPIError )
0002C4 8A00            4010         MOV.W   R0,[R0]
0002C6 F22B            4011         BNE     _56
                       4012 ; rs232cmd.c 1138               {
                       4013 ; rs232cmd.c 1139                       if ( CmdRequest)
0002C8 964842rr        4015         MOV.B   ES,#SEG( _CmdRequest )
0002CC 9908rrrr        4016         MOV.W   R0,#SOF( _CmdRequest )
0002D0 8200            4017         MOV.B   R0L,[R0]
0002D2 F320            4018         BEQ     _52
                       4019 ; rs232cmd.c 1140                       {
                       4020 ; rs232cmd.c 1141                               if ( ParCnt)
0002D4 964842rr        4022         MOV.B   ES,#SEG( _ParCnt )
0002D8 9908rrrr        4023         MOV.W   R0,#SOF( _ParCnt )
0002DC 8200            4024         MOV.B   R0L,[R0]
0002DE F306            4025         BEQ     _51
                       4026 ; rs232cmd.c 1142                                       SCPIError = ParNotAllowed;
0002E0 964842rr        4028         MOV.B   ES,#SEG( _SCPIError )
0002E4 9908rrrr        4029         MOV.W   R0,#SOF( _SCPIError )
0002E8 BA06            4030         MOV.W   [R0],#06H
0002EA D680            4031         RET
0002EA D680            4031         RET
0002EC                 4032 _51:
                       4033 ; rs232cmd.c 1143                               else
                       4034 ; rs232cmd.c 1144                               {
                       4035 ; rs232cmd.c 1145                                       UpdateSTBRegister();
                       4037         CALL    _UpdateSTBRegister
0002EC C4rrrrrr       +4037 ;       FCALL   _UpdateSTBRegister
                       4038 ; rs232cmd.c 1146       
                       4039 ; rs232cmd.c 1147                                       rs232printf( 12, "%d\n", STBReg);
0002F0 9908000C        4041         MOV.W   R0,#0CH
0002F4 964842rr        4042         MOV.B   ES,#SEG( _STBReg )
0002F8 9918rrrr        4043         MOV.W   R1,#SOF( _STBReg )
0002FC 8221            4044         MOV.B   R1L,[R1]
0002FE B130            4045         MOVS.B  R1H,#00H
000300 0F02            4046         PUSH.W  R1
000302 9938rrrr        4048         MOV.W   R3,#SEG( _9 )
000306 9928rrrr        4049         MOV.W   R2,#SOF( _9 )
00030A 0F0C            4050         PUSH.W  R2, R3
                       4052         CALL    _rs232printf
00030C C4rrrrrr       +4052 ;       FCALL   _rs232printf
000310 A976            4053         ADDS.W  R7,#06H
                       4055 ; rs232cmd.c 1148                               }
                       4056 ; rs232cmd.c 1149                       }
000312 D680            4058         RET
000312 D680            4058         RET
000314                 4059 _52:
                       4060 ; rs232cmd.c 1150                       else
                       4061 ; rs232cmd.c 1151                               SCPIError = SyntaxErr;
000314 964842rr        4063         MOV.B   ES,#SEG( _SCPIError )
000318 9908rrrr        4064         MOV.W   R0,#SOF( _SCPIError )
00031C BA03            4065         MOV.W   [R0],#03H
                       4066 ; rs232cmd.c 1152               }
00031E                 4068 _56:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  66

ADDR   CODE            LINE SOURCELINE
                       4069 ; rs232cmd.c 1153       }
00031E D680            4071         RET
                       4073 ; rs232cmd.c 1154       
                       4074 ; rs232cmd.c 1155       /************************************************************************
                            **/
                       4075 ; rs232cmd.c 1156       /* TSTCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4076 ; rs232cmd.c 1157       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4077 ; rs232cmd.c 1158       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       4078 ; rs232cmd.c 1159       /* Revised:             000505                                           
                                                                                                                             
                                                                                    */
                       4079 ; rs232cmd.c 1160       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4080 ; rs232cmd.c 1161       /* Function:    Selftest query                                           
                                                                                                                             
                                                                    */
                       4081 ; rs232cmd.c 1162       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4082 ; rs232cmd.c 1163       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4083 ; rs232cmd.c 1164       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4084 ; rs232cmd.c 1165       /************************************************************************
                            **/
                       4085 ; rs232cmd.c 1166       void TSTCommand( void)
                       4086 ; rs232cmd.c 1167       {
                       4087         ALIGN   1
                       4089         PUBLIC  _TSTCommand
000320                 4090 _TSTCommand:
                       4094 ; rs232cmd.c 1168               if ( CmdExecute && !SCPIError)
000320 964842rr        4096         MOV.B   ES,#SEG( _CmdExecute )
000324 9908rrrr        4097         MOV.W   R0,#SOF( _CmdExecute )
000328 8200            4098         MOV.B   R0L,[R0]
00032A F31D            4099         BEQ     _61
00032C 964842rr        4100         MOV.B   ES,#SEG( _SCPIError )
000330 9908rrrr        4101         MOV.W   R0,#SOF( _SCPIError )
000334 8A00            4102         MOV.W   R0,[R0]
000336 F217            4103         BNE     _61
                       4104 ; rs232cmd.c 1169               {
                       4105 ; rs232cmd.c 1170                       if ( CmdRequest)
000338 964842rr        4107         MOV.B   ES,#SEG( _CmdRequest )
00033C 9908rrrr        4108         MOV.W   R0,#SOF( _CmdRequest )
000340 8200            4109         MOV.B   R0L,[R0]
000342 F30C            4110         BEQ     _57
                       4111 ; rs232cmd.c 1171                       {
                       4112 ; rs232cmd.c 1172                               if ( ParCnt)
000344 964842rr        4114         MOV.B   ES,#SEG( _ParCnt )
000348 9908rrrr        4115         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  67

ADDR   CODE            LINE SOURCELINE
00034C 8200            4116         MOV.B   R0L,[R0]
00034E F30B            4117         BEQ     _61
                       4118 ; rs232cmd.c 1173                                       SCPIError = ParNotAllowed;
000350 964842rr        4120         MOV.B   ES,#SEG( _SCPIError )
000354 9908rrrr        4121         MOV.W   R0,#SOF( _SCPIError )
000358 BA06            4122         MOV.W   [R0],#06H
                       4123 ; rs232cmd.c 1174                               else
                       4124 ; rs232cmd.c 1175                               {
                       4125 ; rs232cmd.c 1176                                       ;
                       4126 ; rs232cmd.c 1177                               }
                       4127 ; rs232cmd.c 1178                       }
00035A D680            4129         RET
00035A D680            4129         RET
00035C                 4130 _57:
                       4131 ; rs232cmd.c 1179                       else
                       4132 ; rs232cmd.c 1180                               SCPIError = SyntaxErr;
00035C 964842rr        4134         MOV.B   ES,#SEG( _SCPIError )
000360 9908rrrr        4135         MOV.W   R0,#SOF( _SCPIError )
000364 BA03            4136         MOV.W   [R0],#03H
                       4137 ; rs232cmd.c 1181               }
000366                 4139 _61:
                       4140 ; rs232cmd.c 1182       }
000366 D680            4142         RET
                       4144 ; rs232cmd.c 1183       
                       4145 ; rs232cmd.c 1184       /************************************************************************
                            **/
                       4146 ; rs232cmd.c 1185       /* WAICommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4147 ; rs232cmd.c 1186       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4148 ; rs232cmd.c 1187       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       4149 ; rs232cmd.c 1188       /* Revised:             000505                                           
                                                                                                                             
                                                                                    */
                       4150 ; rs232cmd.c 1189       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4151 ; rs232cmd.c 1190       /* Function:    Wait-to-continue command                                 
                                                                                                                             
                                            */
                       4152 ; rs232cmd.c 1191       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4153 ; rs232cmd.c 1192       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4154 ; rs232cmd.c 1193       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4155 ; rs232cmd.c 1194       /************************************************************************
                            **/
                       4156 ; rs232cmd.c 1195       void WAICommand( void)
                       4157 ; rs232cmd.c 1196       {
                       4158         ALIGN   1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  68

ADDR   CODE            LINE SOURCELINE
                       4160         PUBLIC  _WAICommand
000368                 4161 _WAICommand:
                       4165 ; rs232cmd.c 1197               if ( CmdExecute && !SCPIError)
000368 964842rr        4167         MOV.B   ES,#SEG( _CmdExecute )
00036C 9908rrrr        4168         MOV.W   R0,#SOF( _CmdExecute )
000370 8200            4169         MOV.B   R0L,[R0]
000372 F31D            4170         BEQ     _66
000374 964842rr        4171         MOV.B   ES,#SEG( _SCPIError )
000378 9908rrrr        4172         MOV.W   R0,#SOF( _SCPIError )
00037C 8A00            4173         MOV.W   R0,[R0]
00037E F217            4174         BNE     _66
                       4175 ; rs232cmd.c 1198               {
                       4176 ; rs232cmd.c 1199                       if ( CmdRequest)
000380 964842rr        4178         MOV.B   ES,#SEG( _CmdRequest )
000384 9908rrrr        4179         MOV.W   R0,#SOF( _CmdRequest )
000388 8200            4180         MOV.B   R0L,[R0]
00038A F306            4181         BEQ     _62
                       4182 ; rs232cmd.c 1200                               SCPIError = SyntaxErr;
00038C 964842rr        4184         MOV.B   ES,#SEG( _SCPIError )
000390 9908rrrr        4185         MOV.W   R0,#SOF( _SCPIError )
000394 BA03            4186         MOV.W   [R0],#03H
000396 D680            4187         RET
000396 D680            4187         RET
000398                 4188 _62:
                       4189 ; rs232cmd.c 1201                       else
                       4190 ; rs232cmd.c 1202                       {
                       4191 ; rs232cmd.c 1203                               if ( ParCnt)
000398 964842rr        4193         MOV.B   ES,#SEG( _ParCnt )
00039C 9908rrrr        4194         MOV.W   R0,#SOF( _ParCnt )
0003A0 8200            4195         MOV.B   R0L,[R0]
0003A2 F305            4196         BEQ     _66
                       4197 ; rs232cmd.c 1204                                       SCPIError = ParNotAllowed;
0003A4 964842rr        4199         MOV.B   ES,#SEG( _SCPIError )
0003A8 9908rrrr        4200         MOV.W   R0,#SOF( _SCPIError )
0003AC BA06            4201         MOV.W   [R0],#06H
                       4202 ; rs232cmd.c 1205                               else
                       4203 ; rs232cmd.c 1206                               {
                       4204 ; rs232cmd.c 1207                                       ;
                       4205 ; rs232cmd.c 1208                               }
                       4206 ; rs232cmd.c 1209                       }
                       4207 ; rs232cmd.c 1210               }
0003AE                 4209 _66:
                       4210 ; rs232cmd.c 1211       }
0003AE D680            4212         RET
                       4214 ; rs232cmd.c 1212       
                       4215 ; rs232cmd.c 1213       /************************************************************************
                            **/
                       4216 ; rs232cmd.c 1214       /* RSTCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4217 ; rs232cmd.c 1215       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4218 ; rs232cmd.c 1216       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       4219 ; rs232cmd.c 1217       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                       4220 ; rs232cmd.c 1218       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  69

ADDR   CODE            LINE SOURCELINE
                                                    */
                       4221 ; rs232cmd.c 1219       /* Function:    Reset comamnd                                            
                                                                                                                             
                                                                            */
                       4222 ; rs232cmd.c 1220       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       4223 ; rs232cmd.c 1221       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4224 ; rs232cmd.c 1222       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4225 ; rs232cmd.c 1223       /************************************************************************
                            **/
                       4226 ; rs232cmd.c 1224       void RSTCommand( void)
                       4227 ; rs232cmd.c 1225       {
                       4228         ALIGN   1
                       4230         PUBLIC  _RSTCommand
0003B0                 4231 _RSTCommand:
                       4235 ; rs232cmd.c 1226               if ( CmdExecute && !SCPIError)
0003B0 964842rr        4237         MOV.B   ES,#SEG( _CmdExecute )
0003B4 9908rrrr        4238         MOV.W   R0,#SOF( _CmdExecute )
0003B8 8200            4239         MOV.B   R0L,[R0]
0003BA F320            4240         BEQ     _72
0003BC 964842rr        4241         MOV.B   ES,#SEG( _SCPIError )
0003C0 9908rrrr        4242         MOV.W   R0,#SOF( _SCPIError )
0003C4 8A00            4243         MOV.W   R0,[R0]
0003C6 F21A            4244         BNE     _72
                       4245 ; rs232cmd.c 1227               {
                       4246 ; rs232cmd.c 1228                       if ( CmdRequest)
0003C8 964842rr        4248         MOV.B   ES,#SEG( _CmdRequest )
0003CC 9908rrrr        4249         MOV.W   R0,#SOF( _CmdRequest )
0003D0 8200            4250         MOV.B   R0L,[R0]
0003D2 F306            4251         BEQ     _67
                       4252 ; rs232cmd.c 1229                               SCPIError = SyntaxErr;
0003D4 964842rr        4254         MOV.B   ES,#SEG( _SCPIError )
0003D8 9908rrrr        4255         MOV.W   R0,#SOF( _SCPIError )
0003DC BA03            4256         MOV.W   [R0],#03H
0003DE D680            4257         RET
0003DE D680            4257         RET
0003E0                 4258 _67:
                       4259 ; rs232cmd.c 1230                       else
                       4260 ; rs232cmd.c 1231                       {
                       4261 ; rs232cmd.c 1232                               if ( ParCnt)
0003E0 964842rr        4263         MOV.B   ES,#SEG( _ParCnt )
0003E4 9908rrrr        4264         MOV.W   R0,#SOF( _ParCnt )
0003E8 8200            4265         MOV.B   R0L,[R0]
0003EA F306            4266         BEQ     _68
                       4267 ; rs232cmd.c 1233                                       SCPIError = ParNotAllowed;
0003EC 964842rr        4269         MOV.B   ES,#SEG( _SCPIError )
0003F0 9908rrrr        4270         MOV.W   R0,#SOF( _SCPIError )
0003F4 BA06            4271         MOV.W   [R0],#06H
0003F6 D680            4272         RET
0003F6 D680            4272         RET
0003F8                 4273 _68:
                       4274 ; rs232cmd.c 1234                               else
                       4275 ; rs232cmd.c 1235                                       ResetInstrument();
                       4277         CALL    _ResetInstrument
0003F8 C4rrrrrr       +4277 ;       FCALL   _ResetInstrument
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  70

ADDR   CODE            LINE SOURCELINE
                       4278 ; rs232cmd.c 1236                       }
                       4279 ; rs232cmd.c 1237               }
0003FC                 4281 _72:
                       4282 ; rs232cmd.c 1238       }
0003FC D680            4284         RET
                       4286 ; rs232cmd.c 1239       
                       4287 ; rs232cmd.c 1240       /************************************************************************
                            **/
                       4288 ; rs232cmd.c 1241       /* IDNCommand                                                            
                                                                                                                             
                                                               RS232CMD.C */
                       4289 ; rs232cmd.c 1242       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4290 ; rs232cmd.c 1243       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       4291 ; rs232cmd.c 1244       /* Revised:             000614                                           
                                                                                                                             
                                                                                    */
                       4292 ; rs232cmd.c 1245       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4293 ; rs232cmd.c 1246       /* Function:    Identification query                                     
                                                                                                                             
                                                    */
                       4294 ; rs232cmd.c 1247       /* Remarks:             No parameter, Query only                         
                                                                                                                             
                                                    */
                       4295 ; rs232cmd.c 1248       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4296 ; rs232cmd.c 1249       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4297 ; rs232cmd.c 1250       /************************************************************************
                            **/
                       4298 ; rs232cmd.c 1251       void IDNCommand( void)
                       4299 ; rs232cmd.c 1252       {
                       4300         ALIGN   1
                       4302         PUBLIC  _IDNCommand
0003FE                 4303 _IDNCommand:
                       4307 ; rs232cmd.c 1253               if ( CmdExecute && !SCPIError)
0003FE 964842rr        4309         MOV.B   ES,#SEG( _CmdExecute )
000402 9908rrrr        4310         MOV.W   R0,#SOF( _CmdExecute )
000406 8200            4311         MOV.B   R0L,[R0]
000408 F344            4312         BEQ     _78
00040A 964842rr        4313         MOV.B   ES,#SEG( _SCPIError )
00040E 9908rrrr        4314         MOV.W   R0,#SOF( _SCPIError )
000412 8A00            4315         MOV.W   R0,[R0]
000414 F23E            4316         BNE     _78
                       4317 ; rs232cmd.c 1254               {
                       4318 ; rs232cmd.c 1255                       if ( CmdRequest)
000416 964842rr        4320         MOV.B   ES,#SEG( _CmdRequest )
00041A 9908rrrr        4321         MOV.W   R0,#SOF( _CmdRequest )
00041E 8200            4322         MOV.B   R0L,[R0]
000420 F333            4323         BEQ     _74
                       4324 ; rs232cmd.c 1256                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  71

ADDR   CODE            LINE SOURCELINE
                       4325 ; rs232cmd.c 1257                               if ( ParCnt)
000422 964842rr        4327         MOV.B   ES,#SEG( _ParCnt )
000426 9908rrrr        4328         MOV.W   R0,#SOF( _ParCnt )
00042A 8200            4329         MOV.B   R0L,[R0]
00042C F306            4330         BEQ     _73
                       4331 ; rs232cmd.c 1258                                       SCPIError = ParNotAllowed;
00042E 964842rr        4333         MOV.B   ES,#SEG( _SCPIError )
000432 9908rrrr        4334         MOV.W   R0,#SOF( _SCPIError )
000436 BA06            4335         MOV.W   [R0],#06H
000438 D680            4336         RET
000438 D680            4336         RET
00043A                 4337 _73:
                       4338 ; rs232cmd.c 1259                               else
                       4339 ; rs232cmd.c 1260                               {
                       4340 ; rs232cmd.c 1261                                       rs232puts( Calibration.Company);
00043A 9918rrrr        4342         MOV.W   R1,#SEG( _Calibration )
00043E 9908rrrr        4343         MOV.W   R0,#SOF( _Calibration )
                       4344         CALL    _rs232puts
000442 C4rrrrrr       +4344 ;       FCALL   _rs232puts
                       4345 ; rs232cmd.c 1262       
                       4346 ; rs232cmd.c 1263                                       rs232putchar( ',');
000446 91082C          4348         MOV.B   R0L,#02CH
                       4349         CALL    _rs232putchar
000449 C4rrrrrr       +4349 ;       FCALL   _rs232putchar
                       4350 ; rs232cmd.c 1264       
                       4351 ; rs232cmd.c 1265                                       rs232puts( Calibration.Type);
00044D 9918rrrr        4353         MOV.W   R1,#SEG( _Calibration+33 )
000451 9908rrrr        4354         MOV.W   R0,#SOF( _Calibration+33 )
                       4355         CALL    _rs232puts
000455 C4rrrrrr       +4355 ;       FCALL   _rs232puts
000459 91082C          4356         MOV.B   R0L,#02CH
                       4357 ; rs232cmd.c 1266       
                       4358 ; rs232cmd.c 1267                                       rs232putchar( ',');
                       4360         CALL    _rs232putchar
00045C C4rrrrrr       +4360 ;       FCALL   _rs232putchar
                       4361 ; rs232cmd.c 1268       
                       4362 ; rs232cmd.c 1269                                       rs232puts( Calibration.KUNumber);
000460 9918rrrr        4364         MOV.W   R1,#SEG( _Calibration+66 )
000464 9908rrrr        4365         MOV.W   R0,#SOF( _Calibration+66 )
                       4366         CALL    _rs232puts
000468 C4rrrrrr       +4366 ;       FCALL   _rs232puts
                       4367 ; rs232cmd.c 1270       
                       4368 ; rs232cmd.c 1271                                       rs232putchar( ',');
00046C 91082C          4370         MOV.B   R0L,#02CH
                       4371         CALL    _rs232putchar
00046F C4rrrrrr       +4371 ;       FCALL   _rs232putchar
                       4372 ; rs232cmd.c 1272       
                       4373 ; rs232cmd.c 1273                                       rs232puts( Calibration.SWRevision);
000473 9918rrrr        4375         MOV.W   R1,#SEG( _Calibration+75 )
000477 9908rrrr        4376         MOV.W   R0,#SOF( _Calibration+75 )
                       4377         CALL    _rs232puts
00047B C4rrrrrr       +4377 ;       FCALL   _rs232puts
                       4378 ; rs232cmd.c 1274       
                       4379 ; rs232cmd.c 1275                                       rs232putchar( '\n');
00047F 91080A          4381         MOV.B   R0L,#0AH
                       4382         CALL    _rs232putchar
000482 C4rrrrrr       +4382 ;       FCALL   _rs232putchar
                       4383 ; rs232cmd.c 1276                               }
                       4384 ; rs232cmd.c 1277                       }
000486 D680            4386         RET
000486 D680            4386         RET
000488                 4387 _74:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  72

ADDR   CODE            LINE SOURCELINE
                       4388 ; rs232cmd.c 1278                       else
                       4389 ; rs232cmd.c 1279                               SCPIError = SyntaxErr;
000488 964842rr        4391         MOV.B   ES,#SEG( _SCPIError )
00048C 9908rrrr        4392         MOV.W   R0,#SOF( _SCPIError )
000490 BA03            4393         MOV.W   [R0],#03H
                       4394 ; rs232cmd.c 1280               }
000492                 4396 _78:
                       4397 ; rs232cmd.c 1281       }
000492 D680            4399         RET
                       4401 ; rs232cmd.c 1282       
                       4402 ; rs232cmd.c 1283       /************************************************************************
                            **/
                       4403 ; rs232cmd.c 1284       /* RCLCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4404 ; rs232cmd.c 1285       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4405 ; rs232cmd.c 1286       /* Author:              Sten A. Andersen/Thomas Kappelgaard, DEV, xxxxxx 
                                                                            */
                       4406 ; rs232cmd.c 1287       /* Revised:             Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                                    */
                       4407 ; rs232cmd.c 1288       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4408 ; rs232cmd.c 1289       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       4409 ; rs232cmd.c 1290       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4410 ; rs232cmd.c 1291       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4411 ; rs232cmd.c 1292       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4412 ; rs232cmd.c 1293       /************************************************************************
                            **/
                       4413 ; rs232cmd.c 1294       void RCLCommand(void) 
                       4414 ; rs232cmd.c 1295       {
                       4415         ALIGN   1
                       4417         PUBLIC  _RCLCommand
000494                 4418 _RCLCommand:
000494 A97E            4422         ADDS.W  R7,#0EH
                       4425 ; rs232cmd.c 1296               int     Reg = 0;
000496 BA70            4427         MOV.W   [R7],#00H
                       4428 ; rs232cmd.c 1297       
                       4429 ; rs232cmd.c 1298               if ( CmdExecute && !SCPIError)
000498 964842rr        4431         MOV.B   ES,#SEG( _CmdExecute )
00049C 9908rrrr        4432         MOV.W   R0,#SOF( _CmdExecute )
0004A0 8200            4433         MOV.B   R0L,[R0]
0004A2 F34C            4434         BEQ     _89
0004A4 964842rr        4435         MOV.B   ES,#SEG( _SCPIError )
0004A8 9908rrrr        4436         MOV.W   R0,#SOF( _SCPIError )
0004AC 8A00            4437         MOV.W   R0,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  73

ADDR   CODE            LINE SOURCELINE
0004AE F246            4438         BNE     _89
                       4439 ; rs232cmd.c 1299               {
                       4440 ; rs232cmd.c 1300                       if ( CmdRequest)
0004B0 964842rr        4442         MOV.B   ES,#SEG( _CmdRequest )
0004B4 9908rrrr        4443         MOV.W   R0,#SOF( _CmdRequest )
0004B8 8200            4444         MOV.B   R0L,[R0]
0004BA F306            4445         BEQ     _79
                       4446 ; rs232cmd.c 1301                       {
                       4447 ; rs232cmd.c 1302                               SCPIError = SyntaxErr;
0004BC 964842rr        4449         MOV.B   ES,#SEG( _SCPIError )
0004C0 9908rrrr        4450         MOV.W   R0,#SOF( _SCPIError )
0004C4 BA03            4451         MOV.W   [R0],#03H
                       4452 ; rs232cmd.c 1303                       }
0004C6 FE3A            4454         BR      _89
0004C6 FE3A            4454         BR      _89
0004C8                 4455 _79:
                       4456 ; rs232cmd.c 1304                       else
                       4457 ; rs232cmd.c 1305                       {
                       4458 ; rs232cmd.c 1306                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0004C8 964842rr        4460         MOV.B   ES,#SEG( _ParCnt )
0004CC 9908rrrr        4461         MOV.W   R0,#SOF( _ParCnt )
0004D0 8200            4462         MOV.B   R0L,[R0]
0004D2 910401          4463         CMP.B   R0L,#01H
0004D5 F215            4464         BNE     _80
0004D7 9918rrrr        4465         MOV.W   R1,#SEG( _Cmd )
0004DB 9908rrrr        4466         MOV.W   R0,#SOF( _Cmd )
0004DF 9168rr          4467         MOV.B   R3L,#SEG( __lc_bs )
0004E2 7177            4468         XOR.B   R3H,R3H
0004E4 8927            4469         MOV.W   R2,R7
0004E6 0F0C            4470         PUSH.W  R2, R3
0004E8 9938rrrr        4472         MOV.W   R3,#SEG( _10 )
0004EC 9928rrrr        4473         MOV.W   R2,#SOF( _10 )
0004F0 0F0C            4474         PUSH.W  R2, R3
                       4476         CALL    _sscanf
0004F2 C4rrrrrr       +4476 ;       FCALL   _sscanf
0004F6 99700008        4477         ADD.W   R7,#08H
0004FA 99040001        4479         CMP.W   R0,#01H
0004FE F306            4480         BEQ     _81
0004FE F306            4480         BEQ     _81
000500                 4481 _80:
                       4482 ; rs232cmd.c 1307                               {
                       4483 ; rs232cmd.c 1308                                       SCPIError = SyntaxErr;  
000500 964842rr        4485         MOV.B   ES,#SEG( _SCPIError )
000504 9908rrrr        4486         MOV.W   R0,#SOF( _SCPIError )
000508 BA03            4487         MOV.W   [R0],#03H
                       4488 ; rs232cmd.c 1309                                       return;
00050A FE18            4490         BR      _89
                       4491 ; rs232cmd.c 1310                               }
00050C                 4493 _81:
                       4494 ; rs232cmd.c 1311       
                       4495 ; rs232cmd.c 1312                               if (( Reg == 0) || ( Reg > NoOfPresets))
00050C 8A07            4497         MOV.W   R0,[R7]
00050E F303            4498         BEQ     _82
000510 9A740004        4499         CMP.W   [R7],#04H
000514 FD07            4500         BLE     _83
000514 FD07            4500         BLE     _83
000516                 4501 _82:
                       4502 ; rs232cmd.c 1313                                       SCPIError = DataOutOfRange;
000516 964842rr        4504         MOV.B   ES,#SEG( _SCPIError )
00051A 9908rrrr        4505         MOV.W   R0,#SOF( _SCPIError )
00051E 9A080021        4506         MOV.W   [R0],#021H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  74

ADDR   CODE            LINE SOURCELINE
000522 FE0C            4507         BR      _89
000522 FE0C            4507         BR      _89
000524                 4508 _83:
                       4509 ; rs232cmd.c 1314                               else
                       4510 ; rs232cmd.c 1315                               {
                       4511 ; rs232cmd.c 1316                                       if ( RecallPreset( Reg) != OK)
000524 8A07            4513         MOV.W   R0,[R7]
                       4514         CALL    _RecallPreset
000526 C4rrrrrr       +4514 ;       FCALL   _RecallPreset
00052A 9904FFFF        4515         CMP.W   R0,#0FFFFH
00052E F306            4516         BEQ     _89
                       4517 ; rs232cmd.c 1317                                               SCPIError = ExecErr;
000530 964842rr        4519         MOV.B   ES,#SEG( _SCPIError )
000534 9908rrrr        4520         MOV.W   R0,#SOF( _SCPIError )
000538 9A08001D        4521         MOV.W   [R0],#01DH
                       4522 ; rs232cmd.c 1318                               }
                       4523 ; rs232cmd.c 1319                       }
                       4524 ; rs232cmd.c 1320               }
                       4525 ; rs232cmd.c 1321       }
00053C                 4527 _89:
00053C A972            4528         ADDS.W  R7,#02H
00053E D680            4530         RET
                       4532 ; rs232cmd.c 1322       
                       4533 ; rs232cmd.c 1323       /************************************************************************
                            **/
                       4534 ; rs232cmd.c 1324       /* SAVCommand                                                            
                                                                                                                             
                                                                     RS232CMD.C */
                       4535 ; rs232cmd.c 1325       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4536 ; rs232cmd.c 1326       /* Author:              Sten A. Andersen/Thomas Kappelgaard, DEV, xxxxxx 
                                                                            */
                       4537 ; rs232cmd.c 1327       /* Revised:             Kim Engedahl, DEV, 000502                        
                                                                                                                             
                                                    */
                       4538 ; rs232cmd.c 1328       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4539 ; rs232cmd.c 1329       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       4540 ; rs232cmd.c 1330       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       4541 ; rs232cmd.c 1331       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4542 ; rs232cmd.c 1332       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4543 ; rs232cmd.c 1333       /************************************************************************
                            **/
                       4544 ; rs232cmd.c 1334       void SAVCommand(void) 
                       4545 ; rs232cmd.c 1335       {
                       4546         ALIGN   1
                       4548         PUBLIC  _SAVCommand
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  75

ADDR   CODE            LINE SOURCELINE
000540                 4549 _SAVCommand:
000540 A97E            4553         ADDS.W  R7,#0EH
                       4556 ; rs232cmd.c 1336               int     Reg = 0;
000542 BA70            4558         MOV.W   [R7],#00H
                       4559 ; rs232cmd.c 1337       
                       4560 ; rs232cmd.c 1338               if ( CmdExecute && !SCPIError)
000544 964842rr        4562         MOV.B   ES,#SEG( _CmdExecute )
000548 9908rrrr        4563         MOV.W   R0,#SOF( _CmdExecute )
00054C 8200            4564         MOV.B   R0L,[R0]
00054E F34C            4565         BEQ     _104
000550 964842rr        4566         MOV.B   ES,#SEG( _SCPIError )
000554 9908rrrr        4567         MOV.W   R0,#SOF( _SCPIError )
000558 8A00            4568         MOV.W   R0,[R0]
00055A F246            4569         BNE     _104
                       4570 ; rs232cmd.c 1339               {
                       4571 ; rs232cmd.c 1340                       if ( CmdRequest)
00055C 964842rr        4573         MOV.B   ES,#SEG( _CmdRequest )
000560 9908rrrr        4574         MOV.W   R0,#SOF( _CmdRequest )
000564 8200            4575         MOV.B   R0L,[R0]
000566 F306            4576         BEQ     _94
                       4577 ; rs232cmd.c 1341                               SCPIError = SyntaxErr;
000568 964842rr        4579         MOV.B   ES,#SEG( _SCPIError )
00056C 9908rrrr        4580         MOV.W   R0,#SOF( _SCPIError )
000570 BA03            4581         MOV.W   [R0],#03H
000572 FE3A            4582         BR      _104
000572 FE3A            4582         BR      _104
000574                 4583 _94:
                       4584 ; rs232cmd.c 1342                       else
                       4585 ; rs232cmd.c 1343                       {
                       4586 ; rs232cmd.c 1344                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000574 964842rr        4588         MOV.B   ES,#SEG( _ParCnt )
000578 9908rrrr        4589         MOV.W   R0,#SOF( _ParCnt )
00057C 8200            4590         MOV.B   R0L,[R0]
00057E 910401          4591         CMP.B   R0L,#01H
000581 F215            4592         BNE     _95
000583 9918rrrr        4593         MOV.W   R1,#SEG( _Cmd )
000587 9908rrrr        4594         MOV.W   R0,#SOF( _Cmd )
00058B 9168rr          4595         MOV.B   R3L,#SEG( __lc_bs )
00058E 7177            4596         XOR.B   R3H,R3H
000590 8927            4597         MOV.W   R2,R7
000592 0F0C            4598         PUSH.W  R2, R3
000594 9938rrrr        4600         MOV.W   R3,#SEG( _10 )
000598 9928rrrr        4601         MOV.W   R2,#SOF( _10 )
00059C 0F0C            4602         PUSH.W  R2, R3
                       4604         CALL    _sscanf
00059E C4rrrrrr       +4604 ;       FCALL   _sscanf
0005A2 99700008        4605         ADD.W   R7,#08H
0005A6 99040001        4607         CMP.W   R0,#01H
0005AA F306            4608         BEQ     _96
0005AA F306            4608         BEQ     _96
0005AC                 4609 _95:
                       4610 ; rs232cmd.c 1345                               {
                       4611 ; rs232cmd.c 1346                                       SCPIError = SyntaxErr;  
0005AC 964842rr        4613         MOV.B   ES,#SEG( _SCPIError )
0005B0 9908rrrr        4614         MOV.W   R0,#SOF( _SCPIError )
0005B4 BA03            4615         MOV.W   [R0],#03H
                       4616 ; rs232cmd.c 1347                                       return;
0005B6 FE18            4618         BR      _104
                       4619 ; rs232cmd.c 1348                               }
0005B8                 4621 _96:
                       4622 ; rs232cmd.c 1349       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  76

ADDR   CODE            LINE SOURCELINE
                       4623 ; rs232cmd.c 1350                               if (( Reg == 0) || ( Reg > NoOfPresets))
0005B8 8A07            4625         MOV.W   R0,[R7]
0005BA F303            4626         BEQ     _97
0005BC 9A740004        4627         CMP.W   [R7],#04H
0005C0 FD07            4628         BLE     _98
0005C0 FD07            4628         BLE     _98
0005C2                 4629 _97:
                       4630 ; rs232cmd.c 1351                                       SCPIError = DataOutOfRange;
0005C2 964842rr        4632         MOV.B   ES,#SEG( _SCPIError )
0005C6 9908rrrr        4633         MOV.W   R0,#SOF( _SCPIError )
0005CA 9A080021        4634         MOV.W   [R0],#021H
0005CE FE0C            4635         BR      _104
0005CE FE0C            4635         BR      _104
0005D0                 4636 _98:
                       4637 ; rs232cmd.c 1352                               else
                       4638 ; rs232cmd.c 1353                               {
                       4639 ; rs232cmd.c 1354                                       if ( StorePreset( Reg) != OK)
0005D0 8A07            4641         MOV.W   R0,[R7]
                       4642         CALL    _StorePreset
0005D2 C4rrrrrr       +4642 ;       FCALL   _StorePreset
0005D6 9904FFFF        4643         CMP.W   R0,#0FFFFH
0005DA F306            4644         BEQ     _104
                       4645 ; rs232cmd.c 1355                                               SCPIError = ExecErr;
0005DC 964842rr        4647         MOV.B   ES,#SEG( _SCPIError )
0005E0 9908rrrr        4648         MOV.W   R0,#SOF( _SCPIError )
0005E4 9A08001D        4649         MOV.W   [R0],#01DH
                       4650 ; rs232cmd.c 1356                               }
                       4651 ; rs232cmd.c 1357                       }
                       4652 ; rs232cmd.c 1358               }
                       4653 ; rs232cmd.c 1359       }
0005E8                 4655 _104:
0005E8 A972            4656         ADDS.W  R7,#02H
0005EA D680            4658         RET
                       4660 ; rs232cmd.c 1360       
                       4661 ; rs232cmd.c 1361       /************************************************************************
                            **/
                       4662 ; rs232cmd.c 1362       /* SystemError                                                           
                                                                                                                             
                                                             RS232CMD.C */
                       4663 ; rs232cmd.c 1363       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4664 ; rs232cmd.c 1364       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       4665 ; rs232cmd.c 1365       /* Revised:             000401                                           
                                                                                                                             
                                                                                    */
                       4666 ; rs232cmd.c 1366       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4667 ; rs232cmd.c 1367       /* Function:    Write the next entry in the error queue (FIFO) to RS232  
                                            */
                       4668 ; rs232cmd.c 1368       /* Remarks:             No parameters, Query only                        
                                                                                                                             
                                                    */
                       4669 ; rs232cmd.c 1369       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4670 ; rs232cmd.c 1370       /* Updates:             -                                                
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  77

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                            *
                            /
                       4671 ; rs232cmd.c 1371       /************************************************************************
                            **/
                       4672 ; rs232cmd.c 1372       void SystemError( void)
                       4673 ; rs232cmd.c 1373       {
                       4674         ALIGN   1
                       4676         PUBLIC  _SystemError
0005EC                 4677 _SystemError:
0005EC 0F30            4681         PUSH.W  R4, R5
0005EE 9972000C        4683         SUB.W   R7,#0CH
                       4691 ; rs232cmd.c 1374               int i;
                       4692 ; rs232cmd.c 1375               code char *ptr;
                       4693 ; rs232cmd.c 1376               char buf[12];
                       4694 ; rs232cmd.c 1377       
                       4695 ; rs232cmd.c 1378               if ( CmdExecute && !SCPIError)
0005F2 964842rr        4697         MOV.B   ES,#SEG( _CmdExecute )
0005F6 9908rrrr        4698         MOV.W   R0,#SOF( _CmdExecute )
0005FA 8200            4699         MOV.B   R0L,[R0]
0005FC F377            4700         BEQ     _119
0005FE 964842rr        4701         MOV.B   ES,#SEG( _SCPIError )
000602 9908rrrr        4702         MOV.W   R0,#SOF( _SCPIError )
000606 8A00            4703         MOV.W   R0,[R0]
000608 F271            4704         BNE     _119
                       4705 ; rs232cmd.c 1379               {
                       4706 ; rs232cmd.c 1380                       if ( CmdRequest)
00060A 964842rr        4708         MOV.B   ES,#SEG( _CmdRequest )
00060E 9908rrrr        4709         MOV.W   R0,#SOF( _CmdRequest )
000612 8200            4710         MOV.B   R0L,[R0]
000614 F366            4711         BEQ     _114
                       4712 ; rs232cmd.c 1381                       {
                       4713 ; rs232cmd.c 1382                               if ( ParCnt > 0)
000616 964842rr        4715         MOV.B   ES,#SEG( _ParCnt )
00061A 9908rrrr        4716         MOV.W   R0,#SOF( _ParCnt )
00061E 8200            4717         MOV.B   R0L,[R0]
000620 910400          4718         CMP.B   R0L,#00H
000623 F907            4719         BL      _111
                       4720 ; rs232cmd.c 1383                                       SCPIError = ParNotAllowed;
000625 964842rr        4722         MOV.B   ES,#SEG( _SCPIError )
000629 9908rrrr        4723         MOV.W   R0,#SOF( _SCPIError )
00062D BA06            4724         MOV.W   [R0],#06H
00062F FE5E            4725         BR      _119
00062F FE5E00          4725         BR      _119
000632                 4726 _111:
                       4727 ; rs232cmd.c 1384                               else
                       4728 ; rs232cmd.c 1385                               {
                       4729 ; rs232cmd.c 1386                                       if (( i = ReadErrorEventQueue()) >= 0)
                       4731         CALL    _ReadErrorEventQueue
000632 C4rrrrrr       +4731 ;       FCALL   _ReadErrorEventQueue
000636 8940            4732         MOV.W   R4,R0
000638 8910            4733         MOV.W   R1,R0
00063A 99140000        4734         CMP.W   R1,#00H
00063E FB56            4735         BLT     _119
                       4736 ; rs232cmd.c 1387                                       {
                       4737 ; rs232cmd.c 1388                                               sprintf( buf, "%d,\"", ErrorTxt_A
                            rray[i].ErrorNo);
000640 9128rr          4739         MOV.B   R1L,#SEG( __lc_bs )
000643 7133            4740         XOR.B   R1H,R1H
000645 8907            4741         MOV.W   R0,R7
000647 E9400006        4742         MULU.W  R4,#06H
00064B 8924            4743         MOV.W   R2,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  78

ADDR   CODE            LINE SOURCELINE
00064D B930            4744         MOVS.W  R3,#00H
00064F 9918rrrr        4745         MOV.W   R1,#SEG( _ErrorTxt_Array )
000653 9908rrrr        4746         MOV.W   R0,#SOF( _ErrorTxt_Array )
000657 0902            4747         ADD.W   R0,R2
000659 1913            4748         ADDC.W  R1,R3
00065B 862C43          4749         MOV.B   CS,R1L
00065E 8810            4750         MOVC.W  R1,[R0+]
000660 0F02            4751         PUSH.W  R1
000662 9918rrrr        4753         MOV.W   R1,#SEG( _109 )
000666 9908rrrr        4754         MOV.W   R0,#SOF( _109 )
00066A 0F03            4755         PUSH.W  R0, R1
00066C 9128rr          4757         MOV.B   R1L,#SEG( __lc_bs )
00066F 7133            4758         XOR.B   R1H,R1H
000671 400706          4759         LEA     R0,R7+6
                       4760         CALL    _sprintf
000674 C4rrrrrr       +4760 ;       FCALL   _sprintf
000678 A976            4761         ADDS.W  R7,#06H
                       4763 ; rs232cmd.c 1389                                               rs232puts( buf);
00067A 9128rr          4765         MOV.B   R1L,#SEG( __lc_bs )
00067D 7133            4766         XOR.B   R1H,R1H
00067F 8907            4767         MOV.W   R0,R7
                       4768         CALL    _rs232puts
000681 C4rrrrrr       +4768 ;       FCALL   _rs232puts
                       4769 ; rs232cmd.c 1390       
                       4770 ; rs232cmd.c 1391                                               ptr = ErrorTxt_Array[i].ErrorTxt;
                            
000685 8924            4772         MOV.W   R2,R4
000687 B930            4773         MOVS.W  R3,#00H
000689 9918rrrr        4774         MOV.W   R1,#SEG( _ErrorTxt_Array+2 )
00068D 9908rrrr        4775         MOV.W   R0,#SOF( _ErrorTxt_Array+2 )
000691 0902            4776         ADD.W   R0,R2
000693 1913            4777         ADDC.W  R1,R3
000695 862C43          4778         MOV.B   CS,R1L
000698 8820            4779         MOVC.W  R2,[R0+]
00069A 99040000        4780         CMP.W   R0,#00H
00069E F202            4781         BNE     _122
0006A0 A64143          4782         ADDS.B  CS,#01H
0006A0 A6414300        4782         ADDS.B  CS,#01H
0006A4                 4783 _122:
0006A4 8830            4784         MOVC.W  R3,[R0+]
0006A6 8953            4785         MOV.W   R5,R3
0006A8 8942            4786         MOV.W   R4,R2
                       4788 ; rs232cmd.c 1392       
                       4789 ; rs232cmd.c 1393                                               while ( *ptr)
0006AA 866C43          4791         MOV.B   CS,R3L
0006AD 8062            4792         MOVC.B  R3L,[R2+]
0006AF F312            4793         BEQ     _113
0006AF F31200          4793         BEQ     _113
0006B2                 4794 _112:
                       4795 ; rs232cmd.c 1394                                                       rs232putchar( *ptr++);
0006B2 8915            4797         MOV.W   R1,R5
0006B4 8904            4798         MOV.W   R0,R4
0006B6 862C43          4799         MOV.B   CS,R1L
0006B9 8020            4800         MOVC.B  R1L,[R0+]
0006BB 8102            4801         MOV.B   R0L,R1L
                       4802         CALL    _rs232putchar
0006BD C4rrrrrr       +4802 ;       FCALL   _rs232putchar
0006C1 99400001        4803         ADD.W   R4,#01H
0006C5 99510000        4804         ADDC.W  R5,#00H
0006C9 8915            4808         MOV.W   R1,R5
0006CB 8904            4809         MOV.W   R0,R4
0006CD 862C43          4810         MOV.B   CS,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  79

ADDR   CODE            LINE SOURCELINE
0006D0 8020            4811         MOVC.B  R1L,[R0+]
0006D2 F2EF            4812         BNE     _112
0006D4                 4814 _113:
                       4815 ; rs232cmd.c 1395       
                       4816 ; rs232cmd.c 1396                                                rs232puts( "\"\n");
0006D4 9918rrrr        4818         MOV.W   R1,#SEG( _110 )
0006D8 9908rrrr        4819         MOV.W   R0,#SOF( _110 )
                       4820         CALL    _rs232puts
0006DC C4rrrrrr       +4820 ;       FCALL   _rs232puts
                       4821 ; rs232cmd.c 1397                                       }
                       4822 ; rs232cmd.c 1398                               }
                       4823 ; rs232cmd.c 1399                       }
0006E0 FE05            4825         BR      _119
0006E0 FE05            4825         BR      _119
0006E2                 4826 _114:
                       4827 ; rs232cmd.c 1400                       else
                       4828 ; rs232cmd.c 1401                               SCPIError = SyntaxErr;
0006E2 964842rr        4830         MOV.B   ES,#SEG( _SCPIError )
0006E6 9908rrrr        4831         MOV.W   R0,#SOF( _SCPIError )
0006EA BA03            4832         MOV.W   [R0],#03H
                       4833 ; rs232cmd.c 1402               }
0006EC                 4835 _119:
                       4836 ; rs232cmd.c 1403       }
0006EC 9970000C        4838         ADD.W   R7,#0CH
0006F0 2F30            4840         POP.W   R4, R5
0006F2 D680            4842         RET
                       4845 ; rs232cmd.c 1404       
                       4846 ; rs232cmd.c 1405       /************************************************************************
                            **/
                       4847 ; rs232cmd.c 1406       /* SystemVersion                                                         
                                                                                                                             
                                                             RS232CMD.C */
                       4848 ; rs232cmd.c 1407       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4849 ; rs232cmd.c 1408       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       4850 ; rs232cmd.c 1409       /* Revised:             000401                                           
                                                                                                                             
                                                                                    */
                       4851 ; rs232cmd.c 1410       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4852 ; rs232cmd.c 1411       /* Function:    Write the SCPI version to RS232                          
                                                                                                                    */
                       4853 ; rs232cmd.c 1412       /* Remarks:             No parameter, Query only                         
                                                                                                                             
                                                    */
                       4854 ; rs232cmd.c 1413       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4855 ; rs232cmd.c 1414       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4856 ; rs232cmd.c 1415       /************************************************************************
                            **/
                       4857 ; rs232cmd.c 1416       void SystemVersion( void)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  80

ADDR   CODE            LINE SOURCELINE
                       4858 ; rs232cmd.c 1417       {
                       4859         ALIGN   1
                       4861         PUBLIC  _SystemVersion
0006F4                 4862 _SystemVersion:
0006F4 0F30            4866         PUSH.W  R4, R5
                       4870 ; rs232cmd.c 1418               char code *str;
                       4871 ; rs232cmd.c 1419       
                       4872 ; rs232cmd.c 1420               if ( CmdExecute && !SCPIError)
0006F6 964842rr        4874         MOV.B   ES,#SEG( _CmdExecute )
0006FA 9908rrrr        4875         MOV.W   R0,#SOF( _CmdExecute )
0006FE 8200            4876         MOV.B   R0L,[R0]
000700 F33D            4877         BEQ     _130
000702 964842rr        4878         MOV.B   ES,#SEG( _SCPIError )
000706 9908rrrr        4879         MOV.W   R0,#SOF( _SCPIError )
00070A 8A00            4880         MOV.W   R0,[R0]
00070C F237            4881         BNE     _130
                       4882 ; rs232cmd.c 1421               {
                       4883 ; rs232cmd.c 1422                       if ( CmdRequest)
00070E 964842rr        4885         MOV.B   ES,#SEG( _CmdRequest )
000712 9908rrrr        4886         MOV.W   R0,#SOF( _CmdRequest )
000716 8200            4887         MOV.B   R0L,[R0]
000718 F32C            4888         BEQ     _126
                       4889 ; rs232cmd.c 1423                       {
                       4890 ; rs232cmd.c 1424                               if ( ParCnt)
00071A 964842rr        4892         MOV.B   ES,#SEG( _ParCnt )
00071E 9908rrrr        4893         MOV.W   R0,#SOF( _ParCnt )
000722 8200            4894         MOV.B   R0L,[R0]
000724 F306            4895         BEQ     _123
                       4896 ; rs232cmd.c 1425                                       SCPIError = ParNotAllowed;
000726 964842rr        4898         MOV.B   ES,#SEG( _SCPIError )
00072A 9908rrrr        4899         MOV.W   R0,#SOF( _SCPIError )
00072E BA06            4900         MOV.W   [R0],#06H
000730 FE25            4901         BR      _130
000730 FE25            4901         BR      _130
000732                 4902 _123:
                       4903 ; rs232cmd.c 1426                               else
                       4904 ; rs232cmd.c 1427                               {
                       4905 ; rs232cmd.c 1428                                       str = SystemVersionTxt;
000732 9958rrrr        4907         MOV.W   R5,#SEG( _SystemVersionTxt )
000736 9948rrrr        4908         MOV.W   R4,#SOF( _SystemVersionTxt )
                       4910 ; rs232cmd.c 1429       
                       4911 ; rs232cmd.c 1430                                       while ( *str)
00073A 964843rr        4913         MOV.B   CS,#SEG( _SystemVersionTxt )
00073E 9908rrrr        4914         MOV.W   R0,#SOF( _SystemVersionTxt )
000742 8020            4915         MOVC.B  R1L,[R0+]
000744 F311            4916         BEQ     _125
000744 F311            4916         BEQ     _125
000746                 4917 _124:
                       4918 ; rs232cmd.c 1431                                               rs232putchar( *str++);
000746 8915            4920         MOV.W   R1,R5
000748 8904            4921         MOV.W   R0,R4
00074A 862C43          4922         MOV.B   CS,R1L
00074D 8020            4923         MOVC.B  R1L,[R0+]
00074F 8102            4924         MOV.B   R0L,R1L
                       4925         CALL    _rs232putchar
000751 C4rrrrrr       +4925 ;       FCALL   _rs232putchar
000755 99400001        4926         ADD.W   R4,#01H
000759 99510000        4927         ADDC.W  R5,#00H
00075D 8915            4931         MOV.W   R1,R5
00075F 8904            4932         MOV.W   R0,R4
000761 862C43          4933         MOV.B   CS,R1L
000764 8020            4934         MOVC.B  R1L,[R0+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  81

ADDR   CODE            LINE SOURCELINE
000766 F2EF            4935         BNE     _124
000768                 4937 _125:
                       4938 ; rs232cmd.c 1432       
                       4939 ; rs232cmd.c 1433                                       rs232putchar( '\n');
000768 91080A          4941         MOV.B   R0L,#0AH
                       4942         CALL    _rs232putchar
00076B C4rrrrrr       +4942 ;       FCALL   _rs232putchar
                       4943 ; rs232cmd.c 1434                               }
                       4944 ; rs232cmd.c 1435                       }
00076F FE06            4946         BR      _130
00076F FE0600          4946         BR      _130
000772                 4947 _126:
                       4948 ; rs232cmd.c 1436                       else
                       4949 ; rs232cmd.c 1437                               SCPIError = SyntaxErr;
000772 964842rr        4951         MOV.B   ES,#SEG( _SCPIError )
000776 9908rrrr        4952         MOV.W   R0,#SOF( _SCPIError )
00077A BA03            4953         MOV.W   [R0],#03H
                       4954 ; rs232cmd.c 1438               }
00077C                 4956 _130:
                       4957 ; rs232cmd.c 1439       }
00077C 2F30            4959         POP.W   R4, R5
00077E D680            4961         RET
                       4964 ; rs232cmd.c 1440       
                       4965 ; rs232cmd.c 1441       /************************************************************************
                            **/
                       4966 ; rs232cmd.c 1442       /* SystemPresetName                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       4967 ; rs232cmd.c 1443       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       4968 ; rs232cmd.c 1444       /* Author:              Kim Engedahl, DEV, 970206                        
                                                                                                                             
                                    */
                       4969 ; rs232cmd.c 1445       /* Revised:             000503                                           
                                                                                                                             
                                                                                    */
                       4970 ; rs232cmd.c 1446       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       4971 ; rs232cmd.c 1447       /* Function:    Name a specific preset number.                           
                                                                                                                    */
                       4972 ; rs232cmd.c 1448       /* Remarks:             the scanf function can not used MaxPresetNameLeng
                            th, i.e.                */
                       4973 ; rs232cmd.c 1449       /*                                              this define should be ins
                            erted as a value. The value is                  */
                       4974 ; rs232cmd.c 1450       /*                                              defined in INSTRU.H      
                                                                                                                             
                                                                                            */
                       4975 ; rs232cmd.c 1451       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4976 ; rs232cmd.c 1452       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       4977 ; rs232cmd.c 1453       /************************************************************************
                            **/
                       4978 ; rs232cmd.c 1454       void SystemPresetName( void)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  82

ADDR   CODE            LINE SOURCELINE
                       4979 ; rs232cmd.c 1455       {
                       4980         ALIGN   1
                       4996         PUBLIC  _SystemPresetName
000780                 4997 _SystemPresetName:
000780 0F30            5001         PUSH.W  R4, R5
000782 99720078        5003         SUB.W   R7,#078H
                       5008 ; rs232cmd.c 1456               int Reg;
                       5009 ; rs232cmd.c 1457               char Name[MaxPresetNameLength];
                       5010 ; rs232cmd.c 1458               PresetObject Preset;
                       5011 ; rs232cmd.c 1459       
                       5012 ; rs232cmd.c 1460               if ( CmdExecute && !SCPIError)
000786 964842rr        5014         MOV.B   ES,#SEG( _CmdExecute )
00078A 9908rrrr        5015         MOV.W   R0,#SOF( _CmdExecute )
00078E 8200            5016         MOV.B   R0L,[R0]
                       5017         BEQ     _149
000790 F202           +5017 ;       BNE     _LG_154
000792 D500C8         +5017 ;       JMP.L   _149
000792 D500C800       +5017 ;       JMP.L   _149
000796                +5017 _LG_154:
000796 964842rr        5018         MOV.B   ES,#SEG( _SCPIError )
00079A 9908rrrr        5019         MOV.W   R0,#SOF( _SCPIError )
00079E 8A00            5020         MOV.W   R0,[R0]
                       5021         BNE     _149
0007A0 F302           +5021 ;       BEQ     _LG_156
0007A2 D500C0         +5021 ;       JMP.L   _149
0007A2 D500C000       +5021 ;       JMP.L   _149
0007A6                +5021 _LG_156:
                       5022 ; rs232cmd.c 1461               {
                       5023 ; rs232cmd.c 1462                       if ( CmdRequest)
0007A6 964842rr        5025         MOV.B   ES,#SEG( _CmdRequest )
0007AA 9908rrrr        5026         MOV.W   R0,#SOF( _CmdRequest )
0007AE 8200            5027         MOV.B   R0L,[R0]
0007B0 F34B            5028         BEQ     _136
                       5029 ; rs232cmd.c 1463                       {
                       5030 ; rs232cmd.c 1464                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
0007B2 964842rr        5032         MOV.B   ES,#SEG( _ParCnt )
0007B6 9908rrrr        5033         MOV.W   R0,#SOF( _ParCnt )
0007BA 8200            5034         MOV.B   R0L,[R0]
0007BC 910401          5035         CMP.B   R0L,#01H
0007BF F215            5036         BNE     _132
0007C1 9918rrrr        5037         MOV.W   R1,#SEG( _Cmd )
0007C5 9908rrrr        5038         MOV.W   R0,#SOF( _Cmd )
0007C9 9168rr          5039         MOV.B   R3L,#SEG( __lc_bs )
0007CC 7177            5040         XOR.B   R3H,R3H
0007CE 8927            5041         MOV.W   R2,R7
0007D0 0F0C            5042         PUSH.W  R2, R3
0007D2 9938rrrr        5044         MOV.W   R3,#SEG( _10 )
0007D6 9928rrrr        5045         MOV.W   R2,#SOF( _10 )
0007DA 0F0C            5046         PUSH.W  R2, R3
                       5048         CALL    _sscanf
0007DC C4rrrrrr       +5048 ;       FCALL   _sscanf
0007E0 99700008        5049         ADD.W   R7,#08H
0007E4 99040001        5051         CMP.W   R0,#01H
0007E8 F307            5052         BEQ     _133
0007E8 F307            5052         BEQ     _133
0007EA                 5053 _132:
                       5054 ; rs232cmd.c 1465                                       SCPIError = SyntaxErr;
0007EA 964842rr        5056         MOV.B   ES,#SEG( _SCPIError )
0007EE 9908rrrr        5057         MOV.W   R0,#SOF( _SCPIError )
0007F2 BA03            5058         MOV.W   [R0],#03H
                       5059         BR      _149
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  83

ADDR   CODE            LINE SOURCELINE
0007F4 D50097         +5059         JMP.L   _149
0007F4 D5009700       +5059         JMP.L   _149
0007F8                 5060 _133:
                       5061 ; rs232cmd.c 1466                               else
                       5062 ; rs232cmd.c 1467                               {
                       5063 ; rs232cmd.c 1468                                       if (( Reg == 0) || ( Reg > NoOfPresets))
0007F8 8A07            5065         MOV.W   R0,[R7]
0007FA F303            5066         BEQ     _134
0007FC 9A740004        5067         CMP.W   [R7],#04H
000800 FD08            5068         BLE     _135
000800 FD08            5068         BLE     _135
000802                 5069 _134:
                       5070 ; rs232cmd.c 1469                                               SCPIError = DataOutOfRange;
000802 964842rr        5072         MOV.B   ES,#SEG( _SCPIError )
000806 9908rrrr        5073         MOV.W   R0,#SOF( _SCPIError )
00080A 9A080021        5074         MOV.W   [R0],#021H
                       5075         BR      _149
00080E D5008A         +5075         JMP.L   _149
00080E D5008A00       +5075         JMP.L   _149
000812                 5076 _135:
                       5077 ; rs232cmd.c 1470                                       else
                       5078 ; rs232cmd.c 1471                                       {
                       5079 ; rs232cmd.c 1472                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
000812 91A8rr          5081         MOV.B   R5L,#SEG( __lc_bs )
000815 71BB            5082         XOR.B   R5H,R5H
000817 404714          5083         LEA     R4,R7+20
00081A 8A07            5084         MOV.W   R0,[R7]
00081C D901            5085         ASL.W   R0,#01H
00081E 8920            5086         MOV.W   R2,R0
000820 B930            5087         MOVS.W  R3,#00H
000822 964842rr        5088         MOV.B   ES,#SEG( _PresetPtr+-2 )
000826 8D22rrrr        5089         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
00082A 99380064        5090         MOV.W   R3,#064H
00082E 8915            5091         MOV.W   R1,R5
000830 8904            5092         MOV.W   R0,R4
                       5093         CALL    _NV_Recall
000832 C4rrrrrr       +5093 ;       FCALL   _NV_Recall
                       5094 ; rs232cmd.c 1473       
                       5095 ; rs232cmd.c 1474                                               rs232puts( Preset.Name);
000836 8915            5097         MOV.W   R1,R5
000838 8904            5098         MOV.W   R0,R4
                       5099         CALL    _rs232puts
00083A C4rrrrrr       +5099 ;       FCALL   _rs232puts
                       5100 ; rs232cmd.c 1475                                               rs232putchar( '\n');
00083E 91080A          5102         MOV.B   R0L,#0AH
                       5103         CALL    _rs232putchar
000841 C4rrrrrr       +5103 ;       FCALL   _rs232putchar
                       5104 ; rs232cmd.c 1476                                       }
                       5105 ; rs232cmd.c 1477                               }
                       5106 ; rs232cmd.c 1478                       }
000845 FE6F            5108         BR      _149
000845 FE6F00          5108         BR      _149
000848                 5109 _136:
                       5110 ; rs232cmd.c 1479                       else
                       5111 ; rs232cmd.c 1480                       {
                       5112 ; rs232cmd.c 1481                                                                                
                                                                                    // The second parameter, the string, in s
                            canf
                       5113 ; rs232cmd.c 1482                                                                                
                                                                                    // should be limited to the definition of
                            
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  84

ADDR   CODE            LINE SOURCELINE
                       5114 ; rs232cmd.c 1483                                                                                
                                                                                    // MaxPresetNameLength
                       5115 ; rs232cmd.c 1484                               if (( ParCnt != 2) || (( sscanf( Cmd, "%d,%17s", 
                            &Reg, Name)) != 2))
000848 964842rr        5117         MOV.B   ES,#SEG( _ParCnt )
00084C 9908rrrr        5118         MOV.W   R0,#SOF( _ParCnt )
000850 8200            5119         MOV.B   R0L,[R0]
000852 910402          5120         CMP.B   R0L,#02H
000855 F220            5121         BNE     _137
000857 9918rrrr        5122         MOV.W   R1,#SEG( _Cmd )
00085B 9908rrrr        5123         MOV.W   R0,#SOF( _Cmd )
00085F 9168rr          5124         MOV.B   R3L,#SEG( __lc_bs )
000862 7177            5125         XOR.B   R3H,R3H
000864 8927            5126         MOV.W   R2,R7
000866 91A8rr          5127         MOV.B   R5L,#SEG( __lc_bs )
000869 71BB            5128         XOR.B   R5H,R5H
00086B 404702          5129         LEA     R4,R7+2
00086E 8935            5130         MOV.W   R3,R5
000870 8924            5131         MOV.W   R2,R4
000872 0F0C            5132         PUSH.W  R2, R3
000874 9168rr          5134         MOV.B   R3L,#SEG( __lc_bs )
000877 7177            5135         XOR.B   R3H,R3H
000879 402704          5136         LEA     R2,R7+4
00087C 0F0C            5137         PUSH.W  R2, R3
00087E 9938rrrr        5139         MOV.W   R3,#SEG( _131 )
000882 9928rrrr        5140         MOV.W   R2,#SOF( _131 )
000886 0F0C            5141         PUSH.W  R2, R3
                       5143         CALL    _sscanf
000888 C4rrrrrr       +5143 ;       FCALL   _sscanf
00088C 9970000C        5144         ADD.W   R7,#0CH
000890 99040002        5146         CMP.W   R0,#02H
000894 F306            5147         BEQ     _138
000894 F306            5147         BEQ     _138
000896                 5148 _137:
                       5149 ; rs232cmd.c 1485                                       SCPIError = SyntaxErr;
000896 964842rr        5151         MOV.B   ES,#SEG( _SCPIError )
00089A 9908rrrr        5152         MOV.W   R0,#SOF( _SCPIError )
00089E BA03            5153         MOV.W   [R0],#03H
0008A0 FE41            5154         BR      _149
0008A0 FE41            5154         BR      _149
0008A2                 5155 _138:
0008A2 8915            5156         MOV.W   R1,R5
0008A4 8904            5157         MOV.W   R0,R4
                       5158 ; rs232cmd.c 1486                               else
                       5159 ; rs232cmd.c 1487                               {
                       5160 ; rs232cmd.c 1488                                       if ( strlen( Name) == MaxPresetNameLength
                            )
                       5162         CALL    _strlen
0008A6 C4rrrrrr       +5162 ;       FCALL   _strlen
0008AA 99040011        5163         CMP.W   R0,#011H
0008AE F206            5164         BNE     _139
                       5165 ; rs232cmd.c 1489                                               SCPIError = SyntaxErr;
0008B0 964842rr        5167         MOV.B   ES,#SEG( _SCPIError )
0008B4 9908rrrr        5168         MOV.W   R0,#SOF( _SCPIError )
0008B8 BA03            5169         MOV.W   [R0],#03H
0008BA FE34            5170         BR      _149
0008BA FE34            5170         BR      _149
0008BC                 5171 _139:
                       5172 ; rs232cmd.c 1490                                       else
                       5173 ; rs232cmd.c 1491                                       {
                       5174 ; rs232cmd.c 1492                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  85

ADDR   CODE            LINE SOURCELINE
0008BC 8A07            5176         MOV.W   R0,[R7]
0008BE F303            5177         BEQ     _140
0008C0 9A740004        5178         CMP.W   [R7],#04H
0008C4 FD07            5179         BLE     _141
0008C4 FD07            5179         BLE     _141
0008C6                 5180 _140:
                       5181 ; rs232cmd.c 1493                                                       SCPIError = DataOutOfRang
                            e;
0008C6 964842rr        5183         MOV.B   ES,#SEG( _SCPIError )
0008CA 9908rrrr        5184         MOV.W   R0,#SOF( _SCPIError )
0008CE 9A080021        5185         MOV.W   [R0],#021H
0008D2 FE28            5186         BR      _149
0008D2 FE28            5186         BR      _149
0008D4                 5187 _141:
                       5188 ; rs232cmd.c 1494                                               else
                       5189 ; rs232cmd.c 1495                                               {
                       5190 ; rs232cmd.c 1496                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
0008D4 91A8rr          5192         MOV.B   R5L,#SEG( __lc_bs )
0008D7 71BB            5193         XOR.B   R5H,R5H
0008D9 404714          5194         LEA     R4,R7+20
0008DC 8A07            5195         MOV.W   R0,[R7]
0008DE D901            5196         ASL.W   R0,#01H
0008E0 8920            5197         MOV.W   R2,R0
0008E2 B930            5198         MOVS.W  R3,#00H
0008E4 964842rr        5199         MOV.B   ES,#SEG( _PresetPtr+-2 )
0008E8 8D22rrrr        5200         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
0008EC 99380064        5201         MOV.W   R3,#064H
0008F0 8915            5202         MOV.W   R1,R5
0008F2 8904            5203         MOV.W   R0,R4
                       5204         CALL    _NV_Recall
0008F4 C4rrrrrr       +5204 ;       FCALL   _NV_Recall
0008F8 8915            5205         MOV.W   R1,R5
0008FA 8904            5206         MOV.W   R0,R4
                       5207 ; rs232cmd.c 1497                                                       strcpy( Preset.Name, Name
                            );
0008FC 9168rr          5209         MOV.B   R3L,#SEG( __lc_bs )
0008FF 7177            5210         XOR.B   R3H,R3H
000901 402702          5211         LEA     R2,R7+2
                       5212         CALL    _strcpy
000904 C4rrrrrr       +5212 ;       FCALL   _strcpy
                       5213 ; rs232cmd.c 1498                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000908 8A07            5215         MOV.W   R0,[R7]
00090A D901            5216         ASL.W   R0,#01H
00090C 8920            5217         MOV.W   R2,R0
00090E B930            5218         MOVS.W  R3,#00H
000910 964842rr        5219         MOV.B   ES,#SEG( _PresetPtr+-2 )
000914 8D22rrrr        5220         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000918 8915            5221         MOV.W   R1,R5
00091A 8904            5222         MOV.W   R0,R4
00091C 99380064        5223         MOV.W   R3,#064H
                       5224         CALL    _NV_Store
000920 C4rrrrrr       +5224 ;       FCALL   _NV_Store
                       5225 ; rs232cmd.c 1499                                               }
                       5226 ; rs232cmd.c 1500                                       }
                       5227 ; rs232cmd.c 1501                               }
                       5228 ; rs232cmd.c 1502                       }
                       5229 ; rs232cmd.c 1503               }
000924                 5231 _149:
                       5232 ; rs232cmd.c 1504       }
000924 99700078        5234         ADD.W   R7,#078H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  86

ADDR   CODE            LINE SOURCELINE
000928 2F30            5236         POP.W   R4, R5
00092A D680            5238         RET
                       5240 ; rs232cmd.c 1505       
                       5241 ; rs232cmd.c 1506       /************************************************************************
                            **/
                       5242 ; rs232cmd.c 1507       /* SystemPresetAuthor                                                    
                                                                                                                             
                                             RS232CMD.C */
                       5243 ; rs232cmd.c 1508       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5244 ; rs232cmd.c 1509       /* Author:              Kim Engedahl, DEV, 000502                        
                                                                                                                             
                                    */
                       5245 ; rs232cmd.c 1510       /* Revised:             000503                                           
                                                                                                                             
                                                                                    */
                       5246 ; rs232cmd.c 1511       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5247 ; rs232cmd.c 1512       /* Function:    Name the author of a specific preset number.             
                                                                            */
                       5248 ; rs232cmd.c 1513       /* Remarks:             the scanf function can not used MaxPresetAuthorLe
                            ngth, i.e.      */
                       5249 ; rs232cmd.c 1514       /*                                              this define should be ins
                            erted as a value. The value is                  */
                       5250 ; rs232cmd.c 1515       /*                                              defined in INSTRU.H      
                                                                                                                             
                                                                                            */
                       5251 ; rs232cmd.c 1516       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5252 ; rs232cmd.c 1517       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5253 ; rs232cmd.c 1518       /************************************************************************
                            **/
                       5254 ; rs232cmd.c 1519       void SystemPresetAuthor( void)
                       5255 ; rs232cmd.c 1520       {
                       5256         ALIGN   1
                       5258         PUBLIC  _SystemPresetAuthor
00092C                 5259 _SystemPresetAuthor:
00092C 0F30            5263         PUSH.W  R4, R5
00092E 9972006E        5265         SUB.W   R7,#06EH
                       5270 ; rs232cmd.c 1521               int Reg;
                       5271 ; rs232cmd.c 1522               char Author[MaxPresetAuthorLength];
                       5272 ; rs232cmd.c 1523               PresetObject Preset;
                       5273 ; rs232cmd.c 1524       
                       5274 ; rs232cmd.c 1525               if ( CmdExecute && !SCPIError)
000932 964842rr        5276         MOV.B   ES,#SEG( _CmdExecute )
000936 9908rrrr        5277         MOV.W   R0,#SOF( _CmdExecute )
00093A 8200            5278         MOV.B   R0L,[R0]
                       5279         BEQ     _175
00093C F202           +5279 ;       BNE     _LG_178
00093E D500C9         +5279 ;       JMP.L   _175
00093E D500C900       +5279 ;       JMP.L   _175
000942                +5279 _LG_178:
000942 964842rr        5280         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  87

ADDR   CODE            LINE SOURCELINE
000946 9908rrrr        5281         MOV.W   R0,#SOF( _SCPIError )
00094A 8A00            5282         MOV.W   R0,[R0]
                       5283         BNE     _175
00094C F302           +5283 ;       BEQ     _LG_180
00094E D500C1         +5283 ;       JMP.L   _175
00094E D500C100       +5283 ;       JMP.L   _175
000952                +5283 _LG_180:
                       5284 ; rs232cmd.c 1526               {
                       5285 ; rs232cmd.c 1527                       if ( CmdRequest)
000952 964842rr        5287         MOV.B   ES,#SEG( _CmdRequest )
000956 9908rrrr        5288         MOV.W   R0,#SOF( _CmdRequest )
00095A 8200            5289         MOV.B   R0L,[R0]
00095C F34A            5290         BEQ     _162
                       5291 ; rs232cmd.c 1528                       {
                       5292 ; rs232cmd.c 1529                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
00095E 964842rr        5294         MOV.B   ES,#SEG( _ParCnt )
000962 9908rrrr        5295         MOV.W   R0,#SOF( _ParCnt )
000966 8200            5296         MOV.B   R0L,[R0]
000968 910401          5297         CMP.B   R0L,#01H
00096B F215            5298         BNE     _158
00096D 9918rrrr        5299         MOV.W   R1,#SEG( _Cmd )
000971 9908rrrr        5300         MOV.W   R0,#SOF( _Cmd )
000975 9168rr          5301         MOV.B   R3L,#SEG( __lc_bs )
000978 7177            5302         XOR.B   R3H,R3H
00097A 8927            5303         MOV.W   R2,R7
00097C 0F0C            5304         PUSH.W  R2, R3
00097E 9938rrrr        5306         MOV.W   R3,#SEG( _10 )
000982 9928rrrr        5307         MOV.W   R2,#SOF( _10 )
000986 0F0C            5308         PUSH.W  R2, R3
                       5310         CALL    _sscanf
000988 C4rrrrrr       +5310 ;       FCALL   _sscanf
00098C 99700008        5311         ADD.W   R7,#08H
000990 99040001        5313         CMP.W   R0,#01H
000994 F307            5314         BEQ     _159
000994 F307            5314         BEQ     _159
000996                 5315 _158:
                       5316 ; rs232cmd.c 1530                                       SCPIError = SyntaxErr;
000996 964842rr        5318         MOV.B   ES,#SEG( _SCPIError )
00099A 9908rrrr        5319         MOV.W   R0,#SOF( _SCPIError )
00099E BA03            5320         MOV.W   [R0],#03H
                       5321         BR      _175
0009A0 D50098         +5321         JMP.L   _175
0009A0 D5009800       +5321         JMP.L   _175
0009A4                 5322 _159:
                       5323 ; rs232cmd.c 1531                               else
                       5324 ; rs232cmd.c 1532                               {
                       5325 ; rs232cmd.c 1533                                       if (( Reg == 0) || ( Reg > NoOfPresets))
0009A4 8A07            5327         MOV.W   R0,[R7]
0009A6 F303            5328         BEQ     _160
0009A8 9A740004        5329         CMP.W   [R7],#04H
0009AC FD08            5330         BLE     _161
0009AC FD08            5330         BLE     _161
0009AE                 5331 _160:
                       5332 ; rs232cmd.c 1534                                               SCPIError = DataOutOfRange;
0009AE 964842rr        5334         MOV.B   ES,#SEG( _SCPIError )
0009B2 9908rrrr        5335         MOV.W   R0,#SOF( _SCPIError )
0009B6 9A080021        5336         MOV.W   [R0],#021H
                       5337         BR      _175
0009BA D5008B         +5337         JMP.L   _175
0009BA D5008B00       +5337         JMP.L   _175
0009BE                 5338 _161:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  88

ADDR   CODE            LINE SOURCELINE
                       5339 ; rs232cmd.c 1535                                       else
                       5340 ; rs232cmd.c 1536                                       {
                       5341 ; rs232cmd.c 1537                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
0009BE 9128rr          5343         MOV.B   R1L,#SEG( __lc_bs )
0009C1 7133            5344         XOR.B   R1H,R1H
0009C3 40070A          5345         LEA     R0,R7+10
0009C6 8A27            5346         MOV.W   R2,[R7]
0009C8 D921            5347         ASL.W   R2,#01H
0009CA B930            5348         MOVS.W  R3,#00H
0009CC 964842rr        5349         MOV.B   ES,#SEG( _PresetPtr+-2 )
0009D0 8D22rrrr        5350         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
0009D4 99380064        5351         MOV.W   R3,#064H
                       5352         CALL    _NV_Recall
0009D8 C4rrrrrr       +5352 ;       FCALL   _NV_Recall
                       5353 ; rs232cmd.c 1538       
                       5354 ; rs232cmd.c 1539                                               rs232puts( Preset.Author);
0009DC 9128rr          5356         MOV.B   R1L,#SEG( __lc_bs )
0009DF 7133            5357         XOR.B   R1H,R1H
0009E1 40071B          5358         LEA     R0,R7+27
                       5359         CALL    _rs232puts
0009E4 C4rrrrrr       +5359 ;       FCALL   _rs232puts
                       5360 ; rs232cmd.c 1540                                               rs232putchar( '\n');
0009E8 91080A          5362         MOV.B   R0L,#0AH
                       5363         CALL    _rs232putchar
0009EB C4rrrrrr       +5363 ;       FCALL   _rs232putchar
                       5364 ; rs232cmd.c 1541                                       }
                       5365 ; rs232cmd.c 1542                               }
                       5366 ; rs232cmd.c 1543                       }
0009EF FE71            5368         BR      _175
0009EF FE7100          5368         BR      _175
0009F2                 5369 _162:
                       5370 ; rs232cmd.c 1544                       else
                       5371 ; rs232cmd.c 1545                       {
                       5372 ; rs232cmd.c 1546                                                                                
                                                                                    // The second parameter, the string, in s
                            canf
                       5373 ; rs232cmd.c 1547                                                                                
                                                                                    // should be limited to the definition of
                            
                       5374 ; rs232cmd.c 1548                                                                                
                                                                                    // MaxPresetAuthorLength
                       5375 ; rs232cmd.c 1549                               if (( ParCnt != 2) || (( sscanf( Cmd, "%d,%7s", &
                            Reg, Author)) != 2))
0009F2 964842rr        5377         MOV.B   ES,#SEG( _ParCnt )
0009F6 9908rrrr        5378         MOV.W   R0,#SOF( _ParCnt )
0009FA 8200            5379         MOV.B   R0L,[R0]
0009FC 910402          5380         CMP.B   R0L,#02H
0009FF F220            5381         BNE     _163
000A01 9918rrrr        5382         MOV.W   R1,#SEG( _Cmd )
000A05 9908rrrr        5383         MOV.W   R0,#SOF( _Cmd )
000A09 9168rr          5384         MOV.B   R3L,#SEG( __lc_bs )
000A0C 7177            5385         XOR.B   R3H,R3H
000A0E 8927            5386         MOV.W   R2,R7
000A10 91A8rr          5387         MOV.B   R5L,#SEG( __lc_bs )
000A13 71BB            5388         XOR.B   R5H,R5H
000A15 404702          5389         LEA     R4,R7+2
000A18 8935            5390         MOV.W   R3,R5
000A1A 8924            5391         MOV.W   R2,R4
000A1C 0F0C            5392         PUSH.W  R2, R3
000A1E 9168rr          5394         MOV.B   R3L,#SEG( __lc_bs )
000A21 7177            5395         XOR.B   R3H,R3H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  89

ADDR   CODE            LINE SOURCELINE
000A23 402704          5396         LEA     R2,R7+4
000A26 0F0C            5397         PUSH.W  R2, R3
000A28 9938rrrr        5399         MOV.W   R3,#SEG( _157 )
000A2C 9928rrrr        5400         MOV.W   R2,#SOF( _157 )
000A30 0F0C            5401         PUSH.W  R2, R3
                       5403         CALL    _sscanf
000A32 C4rrrrrr       +5403 ;       FCALL   _sscanf
000A36 9970000C        5404         ADD.W   R7,#0CH
000A3A 99040002        5406         CMP.W   R0,#02H
000A3E F306            5407         BEQ     _164
000A3E F306            5407         BEQ     _164
000A40                 5408 _163:
                       5409 ; rs232cmd.c 1550                                       SCPIError = SyntaxErr;
000A40 964842rr        5411         MOV.B   ES,#SEG( _SCPIError )
000A44 9908rrrr        5412         MOV.W   R0,#SOF( _SCPIError )
000A48 BA03            5413         MOV.W   [R0],#03H
000A4A FE43            5414         BR      _175
000A4A FE43            5414         BR      _175
000A4C                 5415 _164:
000A4C 8915            5416         MOV.W   R1,R5
000A4E 8904            5417         MOV.W   R0,R4
                       5418 ; rs232cmd.c 1551                               else
                       5419 ; rs232cmd.c 1552                               {
                       5420 ; rs232cmd.c 1553                                       if ( strlen( Author) == MaxPresetAuthorLe
                            ngth)
                       5422         CALL    _strlen
000A50 C4rrrrrr       +5422 ;       FCALL   _strlen
000A54 99040007        5423         CMP.W   R0,#07H
000A58 F206            5424         BNE     _165
                       5425 ; rs232cmd.c 1554                                               SCPIError = SyntaxErr;
000A5A 964842rr        5427         MOV.B   ES,#SEG( _SCPIError )
000A5E 9908rrrr        5428         MOV.W   R0,#SOF( _SCPIError )
000A62 BA03            5429         MOV.W   [R0],#03H
000A64 FE36            5430         BR      _175
000A64 FE36            5430         BR      _175
000A66                 5431 _165:
                       5432 ; rs232cmd.c 1555                                       else
                       5433 ; rs232cmd.c 1556                                       {
                       5434 ; rs232cmd.c 1557                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
000A66 8A07            5436         MOV.W   R0,[R7]
000A68 F303            5437         BEQ     _166
000A6A 9A740004        5438         CMP.W   [R7],#04H
000A6E FD07            5439         BLE     _167
000A6E FD07            5439         BLE     _167
000A70                 5440 _166:
                       5441 ; rs232cmd.c 1558                                                       SCPIError = DataOutOfRang
                            e;
000A70 964842rr        5443         MOV.B   ES,#SEG( _SCPIError )
000A74 9908rrrr        5444         MOV.W   R0,#SOF( _SCPIError )
000A78 9A080021        5445         MOV.W   [R0],#021H
000A7C FE2A            5446         BR      _175
000A7C FE2A            5446         BR      _175
000A7E                 5447 _167:
                       5448 ; rs232cmd.c 1559                                               else
                       5449 ; rs232cmd.c 1560                                               {
                       5450 ; rs232cmd.c 1561                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
000A7E 91A8rr          5452         MOV.B   R5L,#SEG( __lc_bs )
000A81 71BB            5453         XOR.B   R5H,R5H
000A83 40470A          5454         LEA     R4,R7+10
000A86 8A07            5455         MOV.W   R0,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  90

ADDR   CODE            LINE SOURCELINE
000A88 D901            5456         ASL.W   R0,#01H
000A8A 8920            5457         MOV.W   R2,R0
000A8C B930            5458         MOVS.W  R3,#00H
000A8E 964842rr        5459         MOV.B   ES,#SEG( _PresetPtr+-2 )
000A92 8D22rrrr        5460         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000A96 99380064        5461         MOV.W   R3,#064H
000A9A 8915            5462         MOV.W   R1,R5
000A9C 8904            5463         MOV.W   R0,R4
                       5464         CALL    _NV_Recall
000A9E C4rrrrrr       +5464 ;       FCALL   _NV_Recall
                       5465 ; rs232cmd.c 1562                                                       strcpy( Preset.Author, Au
                            thor);
000AA2 9128rr          5467         MOV.B   R1L,#SEG( __lc_bs )
000AA5 7133            5468         XOR.B   R1H,R1H
000AA7 40071B          5469         LEA     R0,R7+27
000AAA 9168rr          5470         MOV.B   R3L,#SEG( __lc_bs )
000AAD 7177            5471         XOR.B   R3H,R3H
000AAF 402702          5472         LEA     R2,R7+2
                       5473         CALL    _strcpy
000AB2 C4rrrrrr       +5473 ;       FCALL   _strcpy
                       5474 ; rs232cmd.c 1563                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000AB6 8A07            5476         MOV.W   R0,[R7]
000AB8 D901            5477         ASL.W   R0,#01H
000ABA 8920            5478         MOV.W   R2,R0
000ABC B930            5479         MOVS.W  R3,#00H
000ABE 964842rr        5480         MOV.B   ES,#SEG( _PresetPtr+-2 )
000AC2 8D22rrrr        5481         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000AC6 8915            5482         MOV.W   R1,R5
000AC8 8904            5483         MOV.W   R0,R4
000ACA 99380064        5484         MOV.W   R3,#064H
                       5485         CALL    _NV_Store
000ACE C4rrrrrr       +5485 ;       FCALL   _NV_Store
                       5486 ; rs232cmd.c 1564                                               }
                       5487 ; rs232cmd.c 1565                                       }
                       5488 ; rs232cmd.c 1566                               }
                       5489 ; rs232cmd.c 1567                       }
                       5490 ; rs232cmd.c 1568               }
000AD2                 5492 _175:
                       5493 ; rs232cmd.c 1569       }
000AD2 9970006E        5495         ADD.W   R7,#06EH
000AD6 2F30            5497         POP.W   R4, R5
000AD8 D680            5499         RET
                       5501 ; rs232cmd.c 1570       
                       5502 ; rs232cmd.c 1571       /************************************************************************
                            **/
                       5503 ; rs232cmd.c 1572       /* SystemPresetDate                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       5504 ; rs232cmd.c 1573       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5505 ; rs232cmd.c 1574       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       5506 ; rs232cmd.c 1575       /* Revised:             001016                                           
                                                                                                                             
                                                                                    */
                       5507 ; rs232cmd.c 1576       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  91

ADDR   CODE            LINE SOURCELINE
                       5508 ; rs232cmd.c 1577       /* Function:    -                                                        
                                                                                                                             
                                                                                                                    */
                       5509 ; rs232cmd.c 1578       /* Remarks:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5510 ; rs232cmd.c 1579       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5511 ; rs232cmd.c 1580       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5512 ; rs232cmd.c 1581       /************************************************************************
                            **/
                       5513 ; rs232cmd.c 1582       void SystemPresetDate( void)
                       5514 ; rs232cmd.c 1583       {
                       5515         ALIGN   1
                       5517         PUBLIC  _SystemPresetDate
000ADA                 5518 _SystemPresetDate:
000ADA 0F30            5522         PUSH.W  R4, R5
000ADC 99720080        5524         SUB.W   R7,#080H
                       5533 ; rs232cmd.c 1584               int Reg;
                       5534 ; rs232cmd.c 1585               PresetObject Preset;
                       5535 ; rs232cmd.c 1586               UI year, month, day;
                       5536 ; rs232cmd.c 1587               char buffer[20];
                       5537 ; rs232cmd.c 1588       
                       5538 ; rs232cmd.c 1589               if ( CmdExecute && !SCPIError)
000AE0 964842rr        5540         MOV.B   ES,#SEG( _CmdExecute )
000AE4 9908rrrr        5541         MOV.W   R0,#SOF( _CmdExecute )
000AE8 8200            5542         MOV.B   R0L,[R0]
                       5543         BEQ     _202
000AEA F202           +5543 ;       BNE     _LG_202
000AEC D50110         +5543 ;       JMP.L   _202
000AEC D5011000       +5543 ;       JMP.L   _202
000AF0                +5543 _LG_202:
000AF0 964842rr        5544         MOV.B   ES,#SEG( _SCPIError )
000AF4 9908rrrr        5545         MOV.W   R0,#SOF( _SCPIError )
000AF8 8A00            5546         MOV.W   R0,[R0]
                       5547         BNE     _202
000AFA F302           +5547 ;       BEQ     _LG_204
000AFC D50108         +5547 ;       JMP.L   _202
000AFC D5010800       +5547 ;       JMP.L   _202
000B00                +5547 _LG_204:
                       5548 ; rs232cmd.c 1590               {
                       5549 ; rs232cmd.c 1591                       if ( CmdRequest)
000B00 964842rr        5551         MOV.B   ES,#SEG( _CmdRequest )
000B04 9908rrrr        5552         MOV.W   R0,#SOF( _CmdRequest )
000B08 8200            5553         MOV.B   R0L,[R0]
                       5554         BEQ     _189
000B0A F202           +5554 ;       BNE     _LG_206
000B0C D50081         +5554 ;       JMP.L   _189
000B0C D5008100       +5554 ;       JMP.L   _189
000B10                +5554 _LG_206:
                       5555 ; rs232cmd.c 1592                       {
                       5556 ; rs232cmd.c 1593                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &Reg) 
                            != 1))
000B10 964842rr        5558         MOV.B   ES,#SEG( _ParCnt )
000B14 9908rrrr        5559         MOV.W   R0,#SOF( _ParCnt )
000B18 8200            5560         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  92

ADDR   CODE            LINE SOURCELINE
000B1A 910401          5561         CMP.B   R0L,#01H
000B1D F215            5562         BNE     _185
000B1F 9918rrrr        5563         MOV.W   R1,#SEG( _Cmd )
000B23 9908rrrr        5564         MOV.W   R0,#SOF( _Cmd )
000B27 9168rr          5565         MOV.B   R3L,#SEG( __lc_bs )
000B2A 7177            5566         XOR.B   R3H,R3H
000B2C 8927            5567         MOV.W   R2,R7
000B2E 0F0C            5568         PUSH.W  R2, R3
000B30 9938rrrr        5570         MOV.W   R3,#SEG( _10 )
000B34 9928rrrr        5571         MOV.W   R2,#SOF( _10 )
000B38 0F0C            5572         PUSH.W  R2, R3
                       5574         CALL    _sscanf
000B3A C4rrrrrr       +5574 ;       FCALL   _sscanf
000B3E 99700008        5575         ADD.W   R7,#08H
000B42 99040001        5577         CMP.W   R0,#01H
000B46 F307            5578         BEQ     _186
000B46 F307            5578         BEQ     _186
000B48                 5579 _185:
                       5580 ; rs232cmd.c 1594                                       SCPIError = SyntaxErr;
000B48 964842rr        5582         MOV.B   ES,#SEG( _SCPIError )
000B4C 9908rrrr        5583         MOV.W   R0,#SOF( _SCPIError )
000B50 BA03            5584         MOV.W   [R0],#03H
                       5585         BR      _202
000B52 D500DD         +5585         JMP.L   _202
000B52 D500DD00       +5585         JMP.L   _202
000B56                 5586 _186:
                       5587 ; rs232cmd.c 1595                               else
                       5588 ; rs232cmd.c 1596                               {
                       5589 ; rs232cmd.c 1597                                       if (( Reg == 0) || ( Reg > NoOfPresets))
000B56 8A07            5591         MOV.W   R0,[R7]
000B58 F303            5592         BEQ     _187
000B5A 9A740004        5593         CMP.W   [R7],#04H
000B5E FD08            5594         BLE     _188
000B5E FD08            5594         BLE     _188
000B60                 5595 _187:
                       5596 ; rs232cmd.c 1598                                               SCPIError = DataOutOfRange;
000B60 964842rr        5598         MOV.B   ES,#SEG( _SCPIError )
000B64 9908rrrr        5599         MOV.W   R0,#SOF( _SCPIError )
000B68 9A080021        5600         MOV.W   [R0],#021H
                       5601         BR      _202
000B6C D500D0         +5601         JMP.L   _202
000B6C D500D000       +5601         JMP.L   _202
000B70                 5602 _188:
                       5603 ; rs232cmd.c 1599                                       else
                       5604 ; rs232cmd.c 1600                                       {
                       5605 ; rs232cmd.c 1601                                               NV_Recall( &Preset, PresetPtr[Reg
                            -1], sizeof( Preset));
000B70 9128rr          5607         MOV.B   R1L,#SEG( __lc_bs )
000B73 7133            5608         XOR.B   R1H,R1H
000B75 400702          5609         LEA     R0,R7+2
000B78 8A27            5610         MOV.W   R2,[R7]
000B7A D921            5611         ASL.W   R2,#01H
000B7C B930            5612         MOVS.W  R3,#00H
000B7E 964842rr        5613         MOV.B   ES,#SEG( _PresetPtr+-2 )
000B82 8D22rrrr        5614         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000B86 99380064        5615         MOV.W   R3,#064H
                       5616         CALL    _NV_Recall
000B8A C4rrrrrr       +5616 ;       FCALL   _NV_Recall
                       5617 ; rs232cmd.c 1602       
                       5618 ; rs232cmd.c 1603                                               day = Preset.Date % 100;
000B8E 8C171C          5620         MOV.W   R1,[R7+28]
000B91 8C071A          5621         MOV.W   R0,[R7+26]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  93

ADDR   CODE            LINE SOURCELINE
000B94 B930            5622         MOV.W   R3,#00H
000B96 99280064        5623         MOV.W   R2,#064H
000B9A 8C1F1C          5624         MOV.W   [R7+28],R1
000B9D 8C0F1A          5625         MOV.W   [R7+26],R0
000BA0 C4rrrrrr        5626         FCALL   __UMODL
000BA4 8C0F6A          5627         MOV.W   [R7+106],R0
                       5628 ; rs232cmd.c 1604                                               month = ( Preset.Date / 100) % 10
                            0;
000BA7 8C171C          5630         MOV.W   R1,[R7+28]
000BAA 8C071A          5631         MOV.W   R0,[R7+26]
000BAD B930            5632         MOV.W   R3,#00H
000BAF 99280064        5633         MOV.W   R2,#064H
000BB3 8953            5634         MOV.W   R5,R3
000BB5 8942            5635         MOV.W   R4,R2
000BB7 C4rrrrrr        5636         FCALL   __UDIVL
000BBB 8935            5637         MOV.W   R3,R5
000BBD 8924            5638         MOV.W   R2,R4
000BBF C4rrrrrr        5639         FCALL   __UMODL
000BC3 8C0F68          5640         MOV.W   [R7+104],R0
                       5641 ; rs232cmd.c 1605                                               year = ( Preset.Date / 10000);
000BC6 B930            5643         MOV.W   R3,#00H
000BC8 99282710        5644         MOV.W   R2,#02710H
000BCC 8C171C          5645         MOV.W   R1,[R7+28]
000BCF 8C071A          5646         MOV.W   R0,[R7+26]
000BD2 C4rrrrrr        5647         FCALL   __UDIVL
000BD6 8C0F66          5648         MOV.W   [R7+102],R0
                       5649 ; rs232cmd.c 1606       
                       5650 ; rs232cmd.c 1607                                               sprintf( buffer, "%d,%d,%d\n", ye
                            ar, month, day);
000BD9 91A8rr          5652         MOV.B   R5L,#SEG( __lc_bs )
000BDC 71BB            5653         XOR.B   R5H,R5H
000BDE 40476C          5654         LEA     R4,R7+108
000BE1 8C076A          5655         MOV.W   R0,[R7+106]
000BE4 0F01            5656         PUSH.W  R0
000BE6 8C076A          5658         MOV.W   R0,[R7+106]
000BE9 0F01            5659         PUSH.W  R0
000BEB 8C076A          5661         MOV.W   R0,[R7+106]
000BEE 0F01            5662         PUSH.W  R0
000BF0 9918rrrr        5664         MOV.W   R1,#SEG( _183 )
000BF4 9908rrrr        5665         MOV.W   R0,#SOF( _183 )
000BF8 0F03            5666         PUSH.W  R0, R1
000BFA 8915            5668         MOV.W   R1,R5
000BFC 8904            5669         MOV.W   R0,R4
                       5670         CALL    _sprintf
000BFE C4rrrrrr       +5670 ;       FCALL   _sprintf
000C02 9970000A        5671         ADD.W   R7,#0AH
                       5673 ; rs232cmd.c 1608       
                       5674 ; rs232cmd.c 1609                                               rs232puts( buffer);
000C06 8915            5676         MOV.W   R1,R5
000C08 8904            5677         MOV.W   R0,R4
                       5678         CALL    _rs232puts
000C0A C4rrrrrr       +5678 ;       FCALL   _rs232puts
                       5679 ; rs232cmd.c 1610                                       }
                       5680 ; rs232cmd.c 1611                               }
                       5681 ; rs232cmd.c 1612                       }
000C0E FE7F            5683         BR      _202
000C0E FE7F            5683         BR      _202
000C10                 5684 _189:
                       5685 ; rs232cmd.c 1613                       else
                       5686 ; rs232cmd.c 1614                       {
                       5687 ; rs232cmd.c 1615                               if (( ParCnt != 4) || (( sscanf( Cmd, "%d,%d,%d,%
                            d", &Reg, &year, &month, &day)) != 4))
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  94

ADDR   CODE            LINE SOURCELINE
000C10 964842rr        5689         MOV.B   ES,#SEG( _ParCnt )
000C14 9908rrrr        5690         MOV.W   R0,#SOF( _ParCnt )
000C18 8200            5691         MOV.B   R0L,[R0]
000C1A 910404          5692         CMP.B   R0L,#04H
000C1D F228            5693         BNE     _190
000C1F 9168rr          5694         MOV.B   R3L,#SEG( __lc_bs )
000C22 7177            5695         XOR.B   R3H,R3H
000C24 8927            5696         MOV.W   R2,R7
000C26 91A8rr          5697         MOV.B   R5L,#SEG( __lc_bs )
000C29 71BB            5698         XOR.B   R5H,R5H
000C2B 404766          5699         LEA     R4,R7+102
000C2E 9128rr          5700         MOV.B   R1L,#SEG( __lc_bs )
000C31 7133            5701         XOR.B   R1H,R1H
000C33 400768          5702         LEA     R0,R7+104
000C36 9128rr          5703         MOV.B   R1L,#SEG( __lc_bs )
000C39 7133            5704         XOR.B   R1H,R1H
000C3B 40076A          5705         LEA     R0,R7+106
000C3E 0F03            5706         PUSH.W  R0, R1
000C40 9128rr          5708         MOV.B   R1L,#SEG( __lc_bs )
000C43 7133            5709         XOR.B   R1H,R1H
000C45 40076C          5710         LEA     R0,R7+108
000C48 0F03            5711         PUSH.W  R0, R1
000C4A 0F30            5713         PUSH.W  R4, R5
000C4C 0F0C            5715         PUSH.W  R2, R3
000C4E 9938rrrr        5717         MOV.W   R3,#SEG( _184 )
000C52 9928rrrr        5718         MOV.W   R2,#SOF( _184 )
000C56 0F0C            5719         PUSH.W  R2, R3
000C58 9918rrrr        5721         MOV.W   R1,#SEG( _Cmd )
000C5C 9908rrrr        5722         MOV.W   R0,#SOF( _Cmd )
                       5723         CALL    _sscanf
000C60 C4rrrrrr       +5723 ;       FCALL   _sscanf
000C64 99700014        5724         ADD.W   R7,#014H
000C68 99040004        5726         CMP.W   R0,#04H
000C6C F306            5727         BEQ     _191
000C6C F306            5727         BEQ     _191
000C6E                 5728 _190:
                       5729 ; rs232cmd.c 1616                                       SCPIError = SyntaxErr;
000C6E 964842rr        5731         MOV.B   ES,#SEG( _SCPIError )
000C72 9908rrrr        5732         MOV.W   R0,#SOF( _SCPIError )
000C76 BA03            5733         MOV.W   [R0],#03H
000C78 FE4A            5734         BR      _202
000C78 FE4A            5734         BR      _202
000C7A                 5735 _191:
                       5736 ; rs232cmd.c 1617                               else
                       5737 ; rs232cmd.c 1618                               {
                       5738 ; rs232cmd.c 1619                                       if ( ValidateDate( year, month, day) == F
                            AIL)
000C7A 8C0766          5740         MOV.W   R0,[R7+102]
000C7D 8C1768          5741         MOV.W   R1,[R7+104]
000C80 8C276A          5742         MOV.W   R2,[R7+106]
                       5743         CALL    _ValidateDate
000C83 C4rrrrrr       +5743 ;       FCALL   _ValidateDate
000C87 6900            5744         OR.W    R0,R0
000C89 F208            5745         BNE     _192
                       5746 ; rs232cmd.c 1620                                               SCPIError = ExecErr;
000C8B 964842rr        5748         MOV.B   ES,#SEG( _SCPIError )
000C8F 9908rrrr        5749         MOV.W   R0,#SOF( _SCPIError )
000C93 9A08001D        5750         MOV.W   [R0],#01DH
000C97 FE3B            5751         BR      _202
000C97 FE3B00          5751         BR      _202
000C9A                 5752 _192:
                       5753 ; rs232cmd.c 1621                                       else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  95

ADDR   CODE            LINE SOURCELINE
                       5754 ; rs232cmd.c 1622                                       {
                       5755 ; rs232cmd.c 1623                                               if (( Reg == 0) || ( Reg > NoOfPr
                            esets))
000C9A 8A07            5757         MOV.W   R0,[R7]
000C9C F303            5758         BEQ     _193
000C9E 9A740004        5759         CMP.W   [R7],#04H
000CA2 FD07            5760         BLE     _194
000CA2 FD07            5760         BLE     _194
000CA4                 5761 _193:
                       5762 ; rs232cmd.c 1624                                                       SCPIError = DataOutOfRang
                            e;
000CA4 964842rr        5764         MOV.B   ES,#SEG( _SCPIError )
000CA8 9908rrrr        5765         MOV.W   R0,#SOF( _SCPIError )
000CAC 9A080021        5766         MOV.W   [R0],#021H
000CB0 FE2E            5767         BR      _202
000CB0 FE2E            5767         BR      _202
000CB2                 5768 _194:
                       5769 ; rs232cmd.c 1625                                               else
                       5770 ; rs232cmd.c 1626                                               {
                       5771 ; rs232cmd.c 1627                                                       NV_Recall( &Preset, Prese
                            tPtr[Reg-1], sizeof( Preset));
000CB2 91A8rr          5773         MOV.B   R5L,#SEG( __lc_bs )
000CB5 71BB            5774         XOR.B   R5H,R5H
000CB7 404702          5775         LEA     R4,R7+2
000CBA 8A07            5776         MOV.W   R0,[R7]
000CBC D901            5777         ASL.W   R0,#01H
000CBE 8920            5778         MOV.W   R2,R0
000CC0 B930            5779         MOVS.W  R3,#00H
000CC2 964842rr        5780         MOV.B   ES,#SEG( _PresetPtr+-2 )
000CC6 8D22rrrr        5781         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000CCA 99380064        5782         MOV.W   R3,#064H
000CCE 8915            5783         MOV.W   R1,R5
000CD0 8904            5784         MOV.W   R0,R4
                       5785         CALL    _NV_Recall
000CD2 C4rrrrrr       +5785 ;       FCALL   _NV_Recall
                       5786 ; rs232cmd.c 1628                                                       Preset.Date = day + 100*m
                            onth + 10000*year;
000CD6 8C0768          5788         MOV.W   R0,[R7+104]
000CD9 E9000064        5789         MULU.W  R0,#064H
000CDD 0C076A          5790         ADD.W   R0,[R7+106]
000CE0 8C2766          5791         MOV.W   R2,[R7+102]
000CE3 E9202710        5792         MULU.W  R2,#02710H
000CE7 0902            5793         ADD.W   R0,R2
000CE9 B910            5794         MOVS.W  R1,#00H
000CEB 8C1F1C          5795         MOV.W   [R7+28],R1
000CEE 8C0F1A          5796         MOV.W   [R7+26],R0
                       5797 ; rs232cmd.c 1629                                                       NV_Store( &Preset, Preset
                            Ptr[Reg-1], sizeof( Preset));
000CF1 8A07            5799         MOV.W   R0,[R7]
000CF3 D901            5800         ASL.W   R0,#01H
000CF5 8920            5801         MOV.W   R2,R0
000CF7 B930            5802         MOVS.W  R3,#00H
000CF9 964842rr        5803         MOV.B   ES,#SEG( _PresetPtr+-2 )
000CFD 8D22rrrr        5804         MOV.W   R2,[R2+SOF( _PresetPtr+-2 )]
000D01 8915            5805         MOV.W   R1,R5
000D03 8904            5806         MOV.W   R0,R4
000D05 99380064        5807         MOV.W   R3,#064H
                       5808         CALL    _NV_Store
000D09 C4rrrrrr       +5808 ;       FCALL   _NV_Store
                       5809 ; rs232cmd.c 1630                                               }
                       5810 ; rs232cmd.c 1631                                       }                               
                       5811 ; rs232cmd.c 1632                               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  96

ADDR   CODE            LINE SOURCELINE
                       5812 ; rs232cmd.c 1633                       }
                       5813 ; rs232cmd.c 1634               }
000D0E                 5815 _202:
                       5816 ; rs232cmd.c 1635       }
000D0E 99700080        5818         ADD.W   R7,#080H
000D12 2F30            5820         POP.W   R4, R5
000D14 D680            5822         RET
                       5824 ; rs232cmd.c 1636       
                       5825 ; rs232cmd.c 1637       /************************************************************************
                            **/
                       5826 ; rs232cmd.c 1638       /* SystemPresetDownload                                                  
                                                                                                                             
                                     RS232CMD.C */
                       5827 ; rs232cmd.c 1639       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5828 ; rs232cmd.c 1640       /* Author:              Kim Engedahl, DEV, 000413                        
                                                                                                                             
                                    */
                       5829 ; rs232cmd.c 1641       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5830 ; rs232cmd.c 1642       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5831 ; rs232cmd.c 1643       /* Function:    Download a setup to a specific preset withouth disturbing
                                            */
                       5832 ; rs232cmd.c 1644       /*                                              the setting/function of t
                            he PT5201.                                                                                       
                                            */
                       5833 ; rs232cmd.c 1645       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       5834 ; rs232cmd.c 1646       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5835 ; rs232cmd.c 1647       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5836 ; rs232cmd.c 1648       /************************************************************************
                            **/
                       5837 ; rs232cmd.c 1649       void SystemPresetDownload( void)
                       5838 ; rs232cmd.c 1650       {
                       5839         ALIGN   1
                       5841         PUBLIC  _SystemPresetDownload
000D16                 5842 _SystemPresetDownload:
                       5846 ; rs232cmd.c 1651               ;
                       5847 ; rs232cmd.c 1652       }
000D16 D680            5849         RET
                       5851 ; rs232cmd.c 1653       
                       5852 ; rs232cmd.c 1654       /************************************************************************
                            **/
                       5853 ; rs232cmd.c 1655       /* SystemPresetUpload                                                    
                                                                                                                             
                                             RS232CMD.C */
                       5854 ; rs232cmd.c 1656       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  97

ADDR   CODE            LINE SOURCELINE
                       5855 ; rs232cmd.c 1657       /* Author:              Kim Engedahl, DEV, 000413                        
                                                                                                                             
                                    */
                       5856 ; rs232cmd.c 1658       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5857 ; rs232cmd.c 1659       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */                                                              
                       5858 ; rs232cmd.c 1660       /* Function:    Upload a setup from a specific preset withouth disturbing
                                            */
                       5859 ; rs232cmd.c 1661       /*                                              the setting/function of t
                            he PT5201.                                                                                       
                                            */
                       5860 ; rs232cmd.c 1662       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       5861 ; rs232cmd.c 1663       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5862 ; rs232cmd.c 1664       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       5863 ; rs232cmd.c 1665       /************************************************************************
                            **/
                       5864 ; rs232cmd.c 1666       void SystemPresetUpload( void)
                       5865 ; rs232cmd.c 1667       {
                       5866         ALIGN   1
                       5868         PUBLIC  _SystemPresetUpload
000D18                 5869 _SystemPresetUpload:
                       5873 ; rs232cmd.c 1668               ;
                       5874 ; rs232cmd.c 1669       }
000D18 D680            5876         RET
                       5878 ; rs232cmd.c 1670       
                       5879 ; rs232cmd.c 1671       /************************************************************************
                            **/
                       5880 ; rs232cmd.c 1672       /* StatusOperEvent                                                       
                                                                                                                             
                                                     RS232CMD.C */
                       5881 ; rs232cmd.c 1673       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5882 ; rs232cmd.c 1674       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       5883 ; rs232cmd.c 1675       /* Revised:             000402                                           
                                                                                                                             
                                                                                    */
                       5884 ; rs232cmd.c 1676       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5885 ; rs232cmd.c 1677       /* Function:    Set/read the status operation event register             
                                                                            */
                       5886 ; rs232cmd.c 1678       /* Remarks:             Reading the event register clears it             
                                                                                                            */
                       5887 ; rs232cmd.c 1679       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  98

ADDR   CODE            LINE SOURCELINE
                            /
                       5888 ; rs232cmd.c 1680       /* Updates:             OperEventReg                                     
                                                                                                                             
                                                                                    */
                       5889 ; rs232cmd.c 1681       /************************************************************************
                            **/
                       5890 ; rs232cmd.c 1682       void StatusOperEvent( void)
                       5891 ; rs232cmd.c 1683       {
                       5892         ALIGN   1
                       5894         PUBLIC  _StatusOperEvent
000D1A                 5895 _StatusOperEvent:
                       5899 ; rs232cmd.c 1684               if ( CmdExecute && !SCPIError)
000D1A 964842rr        5901         MOV.B   ES,#SEG( _CmdExecute )
000D1E 9908rrrr        5902         MOV.W   R0,#SOF( _CmdExecute )
000D22 8200            5903         MOV.B   R0L,[R0]
000D24 F333            5904         BEQ     _214
000D26 964842rr        5905         MOV.B   ES,#SEG( _SCPIError )
000D2A 9908rrrr        5906         MOV.W   R0,#SOF( _SCPIError )
000D2E 8A00            5907         MOV.W   R0,[R0]
000D30 F22D            5908         BNE     _214
                       5909 ; rs232cmd.c 1685               {
                       5910 ; rs232cmd.c 1686                       if ( ParCnt)
000D32 964842rr        5912         MOV.B   ES,#SEG( _ParCnt )
000D36 9908rrrr        5913         MOV.W   R0,#SOF( _ParCnt )
000D3A 8200            5914         MOV.B   R0L,[R0]
000D3C F306            5915         BEQ     _209
                       5916 ; rs232cmd.c 1687                               SCPIError = ParNotAllowed;
000D3E 964842rr        5918         MOV.B   ES,#SEG( _SCPIError )
000D42 9908rrrr        5919         MOV.W   R0,#SOF( _SCPIError )
000D46 BA06            5920         MOV.W   [R0],#06H
000D48 D680            5921         RET
000D48 D680            5921         RET
000D4A                 5922 _209:
                       5923 ; rs232cmd.c 1688                       else
                       5924 ; rs232cmd.c 1689                       {
                       5925 ; rs232cmd.c 1690                               if ( CmdRequest) {
000D4A 964842rr        5927         MOV.B   ES,#SEG( _CmdRequest )
000D4E 9908rrrr        5928         MOV.W   R0,#SOF( _CmdRequest )
000D52 8200            5929         MOV.B   R0L,[R0]
000D54 F316            5930         BEQ     _210
                       5931 ; rs232cmd.c 1691                                       rs232printf( 12, "%d\n", OperEventReg);
000D56 9908000C        5933         MOV.W   R0,#0CH
000D5A 964842rr        5934         MOV.B   ES,#SEG( _OperEventReg )
000D5E 9918rrrr        5935         MOV.W   R1,#SOF( _OperEventReg )
000D62 8A11            5936         MOV.W   R1,[R1]
000D64 0F02            5937         PUSH.W  R1
000D66 9938rrrr        5939         MOV.W   R3,#SEG( _9 )
000D6A 9928rrrr        5940         MOV.W   R2,#SOF( _9 )
000D6E 0F0C            5941         PUSH.W  R2, R3
                       5943         CALL    _rs232printf
000D70 C4rrrrrr       +5943 ;       FCALL   _rs232printf
000D74 A976            5944         ADDS.W  R7,#06H
                       5946 ; rs232cmd.c 1692       
                       5947 ; rs232cmd.c 1693                                       OperEventReg = 0;
000D76 964842rr        5949         MOV.B   ES,#SEG( _OperEventReg )
000D7A 9908rrrr        5950         MOV.W   R0,#SOF( _OperEventReg )
000D7E BA00            5951         MOV.W   [R0],#00H
                       5952 ; rs232cmd.c 1694                               }
000D80 D680            5954         RET
000D80 D680            5954         RET
000D82                 5955 _210:
                       5956 ; rs232cmd.c 1695                               else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  99

ADDR   CODE            LINE SOURCELINE
                       5957 ; rs232cmd.c 1696                                       SCPIError = SyntaxErr;
000D82 964842rr        5959         MOV.B   ES,#SEG( _SCPIError )
000D86 9908rrrr        5960         MOV.W   R0,#SOF( _SCPIError )
000D8A BA03            5961         MOV.W   [R0],#03H
                       5962 ; rs232cmd.c 1697                       }
                       5963 ; rs232cmd.c 1698               }
000D8C                 5965 _214:
                       5966 ; rs232cmd.c 1699       }
000D8C D680            5968         RET
                       5970 ; rs232cmd.c 1700       
                       5971 ; rs232cmd.c 1701       /************************************************************************
                            **/
                       5972 ; rs232cmd.c 1702       /* StatusOperCondition                                                   
                                                                                                                             
                                     RS232CMD.C */
                       5973 ; rs232cmd.c 1703       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5974 ; rs232cmd.c 1704       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       5975 ; rs232cmd.c 1705       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       5976 ; rs232cmd.c 1706       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       5977 ; rs232cmd.c 1707       /* Function:    Read the status questionable condition register          
                                                                    */
                       5978 ; rs232cmd.c 1708       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       5979 ; rs232cmd.c 1709       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       5980 ; rs232cmd.c 1710       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       5981 ; rs232cmd.c 1711       /************************************************************************
                            **/
                       5982 ; rs232cmd.c 1712       void StatusOperCondition( void)
                       5983 ; rs232cmd.c 1713       {
                       5984         ALIGN   1
                       5986         PUBLIC  _StatusOperCondition
000D8E                 5987 _StatusOperCondition:
                       5991 ; rs232cmd.c 1714               if ( CmdExecute && !SCPIError)
000D8E 964842rr        5993         MOV.B   ES,#SEG( _CmdExecute )
000D92 9908rrrr        5994         MOV.W   R0,#SOF( _CmdExecute )
000D96 8200            5995         MOV.B   R0L,[R0]
000D98 F32E            5996         BEQ     _220
000D9A 964842rr        5997         MOV.B   ES,#SEG( _SCPIError )
000D9E 9908rrrr        5998         MOV.W   R0,#SOF( _SCPIError )
000DA2 8A00            5999         MOV.W   R0,[R0]
000DA4 F228            6000         BNE     _220
                       6001 ; rs232cmd.c 1715               {
                       6002 ; rs232cmd.c 1716                       if ( ParCnt)
000DA6 964842rr        6004         MOV.B   ES,#SEG( _ParCnt )
000DAA 9908rrrr        6005         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 100

ADDR   CODE            LINE SOURCELINE
000DAE 8200            6006         MOV.B   R0L,[R0]
000DB0 F306            6007         BEQ     _215
                       6008 ; rs232cmd.c 1717                               SCPIError = ParNotAllowed;
000DB2 964842rr        6010         MOV.B   ES,#SEG( _SCPIError )
000DB6 9908rrrr        6011         MOV.W   R0,#SOF( _SCPIError )
000DBA BA06            6012         MOV.W   [R0],#06H
000DBC D680            6013         RET
000DBC D680            6013         RET
000DBE                 6014 _215:
                       6015 ; rs232cmd.c 1718                       else
                       6016 ; rs232cmd.c 1719                       {
                       6017 ; rs232cmd.c 1720                               if ( CmdRequest)
000DBE 964842rr        6019         MOV.B   ES,#SEG( _CmdRequest )
000DC2 9908rrrr        6020         MOV.W   R0,#SOF( _CmdRequest )
000DC6 8200            6021         MOV.B   R0L,[R0]
000DC8 F311            6022         BEQ     _216
                       6023 ; rs232cmd.c 1721                                       rs232printf( 12, "%d\n", OperConditionReg
                            );
000DCA 9908000C        6025         MOV.W   R0,#0CH
000DCE 964842rr        6026         MOV.B   ES,#SEG( _OperConditionReg )
000DD2 9918rrrr        6027         MOV.W   R1,#SOF( _OperConditionReg )
000DD6 8A11            6028         MOV.W   R1,[R1]
000DD8 0F02            6029         PUSH.W  R1
000DDA 9938rrrr        6031         MOV.W   R3,#SEG( _9 )
000DDE 9928rrrr        6032         MOV.W   R2,#SOF( _9 )
000DE2 0F0C            6033         PUSH.W  R2, R3
                       6035         CALL    _rs232printf
000DE4 C4rrrrrr       +6035 ;       FCALL   _rs232printf
000DE8 A976            6036         ADDS.W  R7,#06H
000DEA D680            6038         RET
000DEA D680            6038         RET
000DEC                 6039 _216:
                       6040 ; rs232cmd.c 1722                               else
                       6041 ; rs232cmd.c 1723                                       SCPIError = SyntaxErr;
000DEC 964842rr        6043         MOV.B   ES,#SEG( _SCPIError )
000DF0 9908rrrr        6044         MOV.W   R0,#SOF( _SCPIError )
000DF4 BA03            6045         MOV.W   [R0],#03H
                       6046 ; rs232cmd.c 1724                       }
                       6047 ; rs232cmd.c 1725               }
000DF6                 6049 _220:
                       6050 ; rs232cmd.c 1726       }
000DF6 D680            6052         RET
                       6054 ; rs232cmd.c 1727       
                       6055 ; rs232cmd.c 1728       /************************************************************************
                            **/
                       6056 ; rs232cmd.c 1729       /* StatusOperEnable                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       6057 ; rs232cmd.c 1730       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6058 ; rs232cmd.c 1731       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6059 ; rs232cmd.c 1732       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6060 ; rs232cmd.c 1733       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 101

ADDR   CODE            LINE SOURCELINE
                       6061 ; rs232cmd.c 1734       /* Function:    Set/read the status operaion enable register             
                                                                            */
                       6062 ; rs232cmd.c 1735       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6063 ; rs232cmd.c 1736       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6064 ; rs232cmd.c 1737       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6065 ; rs232cmd.c 1738       /************************************************************************
                            **/
                       6066 ; rs232cmd.c 1739       void StatusOperEnable( void)
                       6067 ; rs232cmd.c 1740       {
                       6068         ALIGN   1
                       6070         PUBLIC  _StatusOperEnable
000DF8                 6071 _StatusOperEnable:
000DF8 A97C            6075         ADDS.W  R7,#0CH
                       6078 ; rs232cmd.c 1741               long    Reg;
                       6079 ; rs232cmd.c 1742       
                       6080 ; rs232cmd.c 1743               if ( CmdExecute && !SCPIError)
000DFA 964842rr        6082         MOV.B   ES,#SEG( _CmdExecute )
000DFE 9908rrrr        6083         MOV.W   R0,#SOF( _CmdExecute )
000E02 8200            6084         MOV.B   R0L,[R0]
000E04 F364            6085         BEQ     _232
000E06 964842rr        6086         MOV.B   ES,#SEG( _SCPIError )
000E0A 9908rrrr        6087         MOV.W   R0,#SOF( _SCPIError )
000E0E 8A00            6088         MOV.W   R0,[R0]
000E10 F25E            6089         BNE     _232
                       6090 ; rs232cmd.c 1744               {
                       6091 ; rs232cmd.c 1745                       if ( CmdRequest)
000E12 964842rr        6093         MOV.B   ES,#SEG( _CmdRequest )
000E16 9908rrrr        6094         MOV.W   R0,#SOF( _CmdRequest )
000E1A 8200            6095         MOV.B   R0L,[R0]
000E1C F31D            6096         BEQ     _223
                       6097 ; rs232cmd.c 1746                       {
                       6098 ; rs232cmd.c 1747                               if ( ParCnt)
000E1E 964842rr        6100         MOV.B   ES,#SEG( _ParCnt )
000E22 9908rrrr        6101         MOV.W   R0,#SOF( _ParCnt )
000E26 8200            6102         MOV.B   R0L,[R0]
000E28 F306            6103         BEQ     _222
                       6104 ; rs232cmd.c 1748                                       SCPIError = ParNotAllowed;
000E2A 964842rr        6106         MOV.B   ES,#SEG( _SCPIError )
000E2E 9908rrrr        6107         MOV.W   R0,#SOF( _SCPIError )
000E32 BA06            6108         MOV.W   [R0],#06H
000E34 FE4C            6109         BR      _232
000E34 FE4C            6109         BR      _232
000E36                 6110 _222:
                       6111 ; rs232cmd.c 1749                               else
                       6112 ; rs232cmd.c 1750                                       rs232printf( 12, "%d\n", OperEnableReg);
000E36 9908000C        6114         MOV.W   R0,#0CH
000E3A 964842rr        6115         MOV.B   ES,#SEG( _OperEnableReg )
000E3E 9918rrrr        6116         MOV.W   R1,#SOF( _OperEnableReg )
000E42 8A11            6117         MOV.W   R1,[R1]
000E44 0F02            6118         PUSH.W  R1
000E46 9938rrrr        6120         MOV.W   R3,#SEG( _9 )
000E4A 9928rrrr        6121         MOV.W   R2,#SOF( _9 )
000E4E 0F0C            6122         PUSH.W  R2, R3
                       6124         CALL    _rs232printf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 102

ADDR   CODE            LINE SOURCELINE
000E50 C4rrrrrr       +6124 ;       FCALL   _rs232printf
000E54 A976            6125         ADDS.W  R7,#06H
                       6127 ; rs232cmd.c 1751                       }
000E56 FE3B            6129         BR      _232
000E56 FE3B            6129         BR      _232
000E58                 6130 _223:
                       6131 ; rs232cmd.c 1752                       else
                       6132 ; rs232cmd.c 1753                       {
                       6133 ; rs232cmd.c 1754                               if (( ParCnt != 1) || ( sscanf( Cmd, "%l", &Reg) 
                            != 1))
000E58 964842rr        6135         MOV.B   ES,#SEG( _ParCnt )
000E5C 9908rrrr        6136         MOV.W   R0,#SOF( _ParCnt )
000E60 8200            6137         MOV.B   R0L,[R0]
000E62 910401          6138         CMP.B   R0L,#01H
000E65 F215            6139         BNE     _224
000E67 9918rrrr        6140         MOV.W   R1,#SEG( _Cmd )
000E6B 9908rrrr        6141         MOV.W   R0,#SOF( _Cmd )
000E6F 9168rr          6142         MOV.B   R3L,#SEG( __lc_bs )
000E72 7177            6143         XOR.B   R3H,R3H
000E74 8927            6144         MOV.W   R2,R7
000E76 0F0C            6145         PUSH.W  R2, R3
000E78 9938rrrr        6147         MOV.W   R3,#SEG( _221 )
000E7C 9928rrrr        6148         MOV.W   R2,#SOF( _221 )
000E80 0F0C            6149         PUSH.W  R2, R3
                       6151         CALL    _sscanf
000E82 C4rrrrrr       +6151 ;       FCALL   _sscanf
000E86 99700008        6152         ADD.W   R7,#08H
000E8A 99040001        6154         CMP.W   R0,#01H
000E8E F306            6155         BEQ     _225
000E8E F306            6155         BEQ     _225
000E90                 6156 _224:
                       6157 ; rs232cmd.c 1755                               {
                       6158 ; rs232cmd.c 1756                                       SCPIError = SyntaxErr;  
000E90 964842rr        6160         MOV.B   ES,#SEG( _SCPIError )
000E94 9908rrrr        6161         MOV.W   R0,#SOF( _SCPIError )
000E98 BA03            6162         MOV.W   [R0],#03H
                       6163 ; rs232cmd.c 1757                                       return;
000E9A FE19            6165         BR      _232
                       6166 ; rs232cmd.c 1758                               }
000E9C                 6168 _225:
                       6169 ; rs232cmd.c 1759       
                       6170 ; rs232cmd.c 1760                               if ( Reg > 65535)
000E9C 9C74020000      6172         CMP.W   [R7+2],#00H
000EA1 FB0C            6173         BLT     _226
000EA3 FC04            6174         BGT     _235
000EA5 9A74FFFF        6175         CMP.W   [R7],#0FFFFH
000EA9 F908            6176         BL      _226
000EA9 F90800          6176         BL      _226
000EAC                 6177 _235:
                       6178 ; rs232cmd.c 1761                               {
                       6179 ; rs232cmd.c 1762                                       SCPIError = DataOutOfRange;
000EAC 964842rr        6181         MOV.B   ES,#SEG( _SCPIError )
000EB0 9908rrrr        6182         MOV.W   R0,#SOF( _SCPIError )
000EB4 9A080021        6183         MOV.W   [R0],#021H
                       6184 ; rs232cmd.c 1763                                       return;
000EB8 FE0A            6186         BR      _232
                       6187 ; rs232cmd.c 1764                               }
000EBA                 6189 _226:
                       6190 ; rs232cmd.c 1765       
                       6191 ; rs232cmd.c 1766                               OperEnableReg = Reg & 0xEFFF;
000EBA 8C1702          6193         MOV.W   R1,[R7+2]
000EBD 8A07            6194         MOV.W   R0,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 103

ADDR   CODE            LINE SOURCELINE
000EBF 9905EFFF        6195         AND.W   R0,#0EFFFH
000EC3 964842rr        6196         MOV.B   ES,#SEG( _OperEnableReg )
000EC7 9918rrrr        6197         MOV.W   R1,#SOF( _OperEnableReg )
000ECB 8A09            6198         MOV.W   [R1],R0
                       6199 ; rs232cmd.c 1767                       }
                       6200 ; rs232cmd.c 1768               }
                       6201 ; rs232cmd.c 1769       }
000ECE                 6203 _232:
000ECE A974            6204         ADDS.W  R7,#04H
000ED0 D680            6206         RET
                       6208 ; rs232cmd.c 1770       
                       6209 ; rs232cmd.c 1771       /************************************************************************
                            ***/
                       6210 ; rs232cmd.c 1772       /* StatusQuestEvent                                                      
                                                                                                                             
                                                     RS232CMD.C */
                       6211 ; rs232cmd.c 1773       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6212 ; rs232cmd.c 1774       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6213 ; rs232cmd.c 1775       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6214 ; rs232cmd.c 1776       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6215 ; rs232cmd.c 1777       /* Function:    Set/read the status questionablen event register         
                                                                    */
                       6216 ; rs232cmd.c 1778       /* Remarks:             Reading the event register clears it             
                                                                                                            */
                       6217 ; rs232cmd.c 1779       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6218 ; rs232cmd.c 1780       /* Updates:             QuestEventReg                                    
                                                                                                                             
                                                                                    */
                       6219 ; rs232cmd.c 1781       /************************************************************************
                            ***/
                       6220 ; rs232cmd.c 1782       void StatusQuestEvent( void)
                       6221 ; rs232cmd.c 1783       {
                       6222         ALIGN   1
                       6224         PUBLIC  _StatusQuestEvent
000ED2                 6225 _StatusQuestEvent:
                       6229 ; rs232cmd.c 1784               if ( CmdExecute && !SCPIError)
000ED2 964842rr        6231         MOV.B   ES,#SEG( _CmdExecute )
000ED6 9908rrrr        6232         MOV.W   R0,#SOF( _CmdExecute )
000EDA 8200            6233         MOV.B   R0L,[R0]
000EDC F333            6234         BEQ     _241
000EDE 964842rr        6235         MOV.B   ES,#SEG( _SCPIError )
000EE2 9908rrrr        6236         MOV.W   R0,#SOF( _SCPIError )
000EE6 8A00            6237         MOV.W   R0,[R0]
000EE8 F22D            6238         BNE     _241
                       6239 ; rs232cmd.c 1785               {
                       6240 ; rs232cmd.c 1786                       if ( ParCnt)
000EEA 964842rr        6242         MOV.B   ES,#SEG( _ParCnt )
000EEE 9908rrrr        6243         MOV.W   R0,#SOF( _ParCnt )
000EF2 8200            6244         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 104

ADDR   CODE            LINE SOURCELINE
000EF4 F306            6245         BEQ     _236
                       6246 ; rs232cmd.c 1787                               SCPIError = ParNotAllowed;
000EF6 964842rr        6248         MOV.B   ES,#SEG( _SCPIError )
000EFA 9908rrrr        6249         MOV.W   R0,#SOF( _SCPIError )
000EFE BA06            6250         MOV.W   [R0],#06H
000F00 D680            6251         RET
000F00 D680            6251         RET
000F02                 6252 _236:
                       6253 ; rs232cmd.c 1788                       else
                       6254 ; rs232cmd.c 1789                       {
                       6255 ; rs232cmd.c 1790                               if ( CmdRequest)
000F02 964842rr        6257         MOV.B   ES,#SEG( _CmdRequest )
000F06 9908rrrr        6258         MOV.W   R0,#SOF( _CmdRequest )
000F0A 8200            6259         MOV.B   R0L,[R0]
000F0C F316            6260         BEQ     _237
                       6261 ; rs232cmd.c 1791                               {
                       6262 ; rs232cmd.c 1792                                       rs232printf( 12, "%d\n", QuestEventReg);
000F0E 9908000C        6264         MOV.W   R0,#0CH
000F12 964842rr        6265         MOV.B   ES,#SEG( _QuestEventReg )
000F16 9918rrrr        6266         MOV.W   R1,#SOF( _QuestEventReg )
000F1A 8A11            6267         MOV.W   R1,[R1]
000F1C 0F02            6268         PUSH.W  R1
000F1E 9938rrrr        6270         MOV.W   R3,#SEG( _9 )
000F22 9928rrrr        6271         MOV.W   R2,#SOF( _9 )
000F26 0F0C            6272         PUSH.W  R2, R3
                       6274         CALL    _rs232printf
000F28 C4rrrrrr       +6274 ;       FCALL   _rs232printf
000F2C A976            6275         ADDS.W  R7,#06H
                       6277 ; rs232cmd.c 1793       
                       6278 ; rs232cmd.c 1794                                       QuestEventReg = 0;
000F2E 964842rr        6280         MOV.B   ES,#SEG( _QuestEventReg )
000F32 9908rrrr        6281         MOV.W   R0,#SOF( _QuestEventReg )
000F36 BA00            6282         MOV.W   [R0],#00H
                       6283 ; rs232cmd.c 1795                               }
000F38 D680            6285         RET
000F38 D680            6285         RET
000F3A                 6286 _237:
                       6287 ; rs232cmd.c 1796                               else
                       6288 ; rs232cmd.c 1797                                       SCPIError = SyntaxErr;
000F3A 964842rr        6290         MOV.B   ES,#SEG( _SCPIError )
000F3E 9908rrrr        6291         MOV.W   R0,#SOF( _SCPIError )
000F42 BA03            6292         MOV.W   [R0],#03H
                       6293 ; rs232cmd.c 1798                       }
                       6294 ; rs232cmd.c 1799               }
000F44                 6296 _241:
                       6297 ; rs232cmd.c 1800       }
000F44 D680            6299         RET
                       6301 ; rs232cmd.c 1801       
                       6302 ; rs232cmd.c 1802       /************************************************************************
                            **/
                       6303 ; rs232cmd.c 1803       /* StatusQuestCondition                                                  
                                                                                                                             
                                     RS232CMD.C */
                       6304 ; rs232cmd.c 1804       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6305 ; rs232cmd.c 1805       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 105

ADDR   CODE            LINE SOURCELINE
                       6306 ; rs232cmd.c 1806       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6307 ; rs232cmd.c 1807       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6308 ; rs232cmd.c 1808       /* Function:    Read the status operation condition register             
                                                                            */
                       6309 ; rs232cmd.c 1809       /* Remarks:             No parameters                                    
                                                                                                                             
                                                                                    */
                       6310 ; rs232cmd.c 1810       /* Returns:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6311 ; rs232cmd.c 1811       /* Updates:             -                                                
                                                                                                                             
                                                                                                                            *
                            /
                       6312 ; rs232cmd.c 1812       /************************************************************************
                            **/
                       6313 ; rs232cmd.c 1813       void StatusQuestCondition( void)
                       6314 ; rs232cmd.c 1814       {
                       6315         ALIGN   1
                       6317         PUBLIC  _StatusQuestCondition
000F46                 6318 _StatusQuestCondition:
                       6322 ; rs232cmd.c 1815               if ( CmdExecute && !SCPIError)
000F46 964842rr        6324         MOV.B   ES,#SEG( _CmdExecute )
000F4A 9908rrrr        6325         MOV.W   R0,#SOF( _CmdExecute )
000F4E 8200            6326         MOV.B   R0L,[R0]
000F50 F32E            6327         BEQ     _247
000F52 964842rr        6328         MOV.B   ES,#SEG( _SCPIError )
000F56 9908rrrr        6329         MOV.W   R0,#SOF( _SCPIError )
000F5A 8A00            6330         MOV.W   R0,[R0]
000F5C F228            6331         BNE     _247
                       6332 ; rs232cmd.c 1816               {
                       6333 ; rs232cmd.c 1817                       if ( ParCnt)
000F5E 964842rr        6335         MOV.B   ES,#SEG( _ParCnt )
000F62 9908rrrr        6336         MOV.W   R0,#SOF( _ParCnt )
000F66 8200            6337         MOV.B   R0L,[R0]
000F68 F306            6338         BEQ     _242
                       6339 ; rs232cmd.c 1818                               SCPIError = ParNotAllowed;
000F6A 964842rr        6341         MOV.B   ES,#SEG( _SCPIError )
000F6E 9908rrrr        6342         MOV.W   R0,#SOF( _SCPIError )
000F72 BA06            6343         MOV.W   [R0],#06H
000F74 D680            6344         RET
000F74 D680            6344         RET
000F76                 6345 _242:
                       6346 ; rs232cmd.c 1819                       else
                       6347 ; rs232cmd.c 1820                       {
                       6348 ; rs232cmd.c 1821                               if ( CmdRequest)
000F76 964842rr        6350         MOV.B   ES,#SEG( _CmdRequest )
000F7A 9908rrrr        6351         MOV.W   R0,#SOF( _CmdRequest )
000F7E 8200            6352         MOV.B   R0L,[R0]
000F80 F311            6353         BEQ     _243
                       6354 ; rs232cmd.c 1822                               rs232printf( 12, "%d\n", QuestConditionReg);
000F82 9908000C        6356         MOV.W   R0,#0CH
000F86 964842rr        6357         MOV.B   ES,#SEG( _QuestConditionReg )
000F8A 9918rrrr        6358         MOV.W   R1,#SOF( _QuestConditionReg )
000F8E 8A11            6359         MOV.W   R1,[R1]
000F90 0F02            6360         PUSH.W  R1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 106

ADDR   CODE            LINE SOURCELINE
000F92 9938rrrr        6362         MOV.W   R3,#SEG( _9 )
000F96 9928rrrr        6363         MOV.W   R2,#SOF( _9 )
000F9A 0F0C            6364         PUSH.W  R2, R3
                       6366         CALL    _rs232printf
000F9C C4rrrrrr       +6366 ;       FCALL   _rs232printf
000FA0 A976            6367         ADDS.W  R7,#06H
000FA2 D680            6369         RET
000FA2 D680            6369         RET
000FA4                 6370 _243:
                       6371 ; rs232cmd.c 1823                               else
                       6372 ; rs232cmd.c 1824                                       SCPIError = SyntaxErr;
000FA4 964842rr        6374         MOV.B   ES,#SEG( _SCPIError )
000FA8 9908rrrr        6375         MOV.W   R0,#SOF( _SCPIError )
000FAC BA03            6376         MOV.W   [R0],#03H
                       6377 ; rs232cmd.c 1825                       }
                       6378 ; rs232cmd.c 1826               }
000FAE                 6380 _247:
                       6381 ; rs232cmd.c 1827       }
000FAE D680            6383         RET
                       6385 ; rs232cmd.c 1828       
                       6386 ; rs232cmd.c 1829       /************************************************************************
                            **/
                       6387 ; rs232cmd.c 1830       /* StatusQuestEnable                                                     
                                                                                                                             
                                             RS232CMD.C */
                       6388 ; rs232cmd.c 1831       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6389 ; rs232cmd.c 1832       /* Author:              Kim Engedahl, DEV, 970630                        
                                                                                                                             
                                    */
                       6390 ; rs232cmd.c 1833       /* Revised:             000413                                           
                                                                                                                             
                                                                                    */
                       6391 ; rs232cmd.c 1834       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6392 ; rs232cmd.c 1835       /* Function:    Set/read the status questionable enable register         
                                                                    */
                       6393 ; rs232cmd.c 1836       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6394 ; rs232cmd.c 1837       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6395 ; rs232cmd.c 1838       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6396 ; rs232cmd.c 1839       /************************************************************************
                            **/
                       6397 ; rs232cmd.c 1840       void StatusQuestEnable( void)
                       6398 ; rs232cmd.c 1841       {
                       6399         ALIGN   1
                       6401         PUBLIC  _StatusQuestEnable
000FB0                 6402 _StatusQuestEnable:
000FB0 A97C            6406         ADDS.W  R7,#0CH
                       6409 ; rs232cmd.c 1842               long    Reg;
                       6410 ; rs232cmd.c 1843       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 107

ADDR   CODE            LINE SOURCELINE
                       6411 ; rs232cmd.c 1844               if ( CmdExecute && !SCPIError)
000FB2 964842rr        6413         MOV.B   ES,#SEG( _CmdExecute )
000FB6 9908rrrr        6414         MOV.W   R0,#SOF( _CmdExecute )
000FBA 8200            6415         MOV.B   R0L,[R0]
000FBC F364            6416         BEQ     _258
000FBE 964842rr        6417         MOV.B   ES,#SEG( _SCPIError )
000FC2 9908rrrr        6418         MOV.W   R0,#SOF( _SCPIError )
000FC6 8A00            6419         MOV.W   R0,[R0]
000FC8 F25E            6420         BNE     _258
                       6421 ; rs232cmd.c 1845               {
                       6422 ; rs232cmd.c 1846                       if ( CmdRequest)
000FCA 964842rr        6424         MOV.B   ES,#SEG( _CmdRequest )
000FCE 9908rrrr        6425         MOV.W   R0,#SOF( _CmdRequest )
000FD2 8200            6426         MOV.B   R0L,[R0]
000FD4 F31D            6427         BEQ     _249
                       6428 ; rs232cmd.c 1847                       {
                       6429 ; rs232cmd.c 1848                               if ( ParCnt)
000FD6 964842rr        6431         MOV.B   ES,#SEG( _ParCnt )
000FDA 9908rrrr        6432         MOV.W   R0,#SOF( _ParCnt )
000FDE 8200            6433         MOV.B   R0L,[R0]
000FE0 F306            6434         BEQ     _248
                       6435 ; rs232cmd.c 1849                                       SCPIError = ParNotAllowed;
000FE2 964842rr        6437         MOV.B   ES,#SEG( _SCPIError )
000FE6 9908rrrr        6438         MOV.W   R0,#SOF( _SCPIError )
000FEA BA06            6439         MOV.W   [R0],#06H
000FEC FE4C            6440         BR      _258
000FEC FE4C            6440         BR      _258
000FEE                 6441 _248:
                       6442 ; rs232cmd.c 1850                               else
                       6443 ; rs232cmd.c 1851                                       rs232printf( 12, "%d\n", QuestEnableReg);
                            
000FEE 9908000C        6445         MOV.W   R0,#0CH
000FF2 964842rr        6446         MOV.B   ES,#SEG( _QuestEnableReg )
000FF6 9918rrrr        6447         MOV.W   R1,#SOF( _QuestEnableReg )
000FFA 8A11            6448         MOV.W   R1,[R1]
000FFC 0F02            6449         PUSH.W  R1
000FFE 9938rrrr        6451         MOV.W   R3,#SEG( _9 )
001002 9928rrrr        6452         MOV.W   R2,#SOF( _9 )
001006 0F0C            6453         PUSH.W  R2, R3
                       6455         CALL    _rs232printf
001008 C4rrrrrr       +6455 ;       FCALL   _rs232printf
00100C A976            6456         ADDS.W  R7,#06H
                       6458 ; rs232cmd.c 1852                       }
00100E FE3B            6460         BR      _258
00100E FE3B            6460         BR      _258
001010                 6461 _249:
                       6462 ; rs232cmd.c 1853                       else
                       6463 ; rs232cmd.c 1854                       {
                       6464 ; rs232cmd.c 1855                               if (( ParCnt != 1) || ( sscanf( Cmd, "%l", &Reg) 
                            != 1))
001010 964842rr        6466         MOV.B   ES,#SEG( _ParCnt )
001014 9908rrrr        6467         MOV.W   R0,#SOF( _ParCnt )
001018 8200            6468         MOV.B   R0L,[R0]
00101A 910401          6469         CMP.B   R0L,#01H
00101D F215            6470         BNE     _250
00101F 9918rrrr        6471         MOV.W   R1,#SEG( _Cmd )
001023 9908rrrr        6472         MOV.W   R0,#SOF( _Cmd )
001027 9168rr          6473         MOV.B   R3L,#SEG( __lc_bs )
00102A 7177            6474         XOR.B   R3H,R3H
00102C 8927            6475         MOV.W   R2,R7
00102E 0F0C            6476         PUSH.W  R2, R3
001030 9938rrrr        6478         MOV.W   R3,#SEG( _221 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 108

ADDR   CODE            LINE SOURCELINE
001034 9928rrrr        6479         MOV.W   R2,#SOF( _221 )
001038 0F0C            6480         PUSH.W  R2, R3
                       6482         CALL    _sscanf
00103A C4rrrrrr       +6482 ;       FCALL   _sscanf
00103E 99700008        6483         ADD.W   R7,#08H
001042 99040001        6485         CMP.W   R0,#01H
001046 F306            6486         BEQ     _251
001046 F306            6486         BEQ     _251
001048                 6487 _250:
                       6488 ; rs232cmd.c 1856                               {
                       6489 ; rs232cmd.c 1857                                       SCPIError = SyntaxErr;  
001048 964842rr        6491         MOV.B   ES,#SEG( _SCPIError )
00104C 9908rrrr        6492         MOV.W   R0,#SOF( _SCPIError )
001050 BA03            6493         MOV.W   [R0],#03H
                       6494 ; rs232cmd.c 1858                                       return;
001052 FE19            6496         BR      _258
                       6497 ; rs232cmd.c 1859                               }
001054                 6499 _251:
                       6500 ; rs232cmd.c 1860       
                       6501 ; rs232cmd.c 1861                               if ( Reg > 65535)
001054 9C74020000      6503         CMP.W   [R7+2],#00H
001059 FB0C            6504         BLT     _252
00105B FC04            6505         BGT     _261
00105D 9A74FFFF        6506         CMP.W   [R7],#0FFFFH
001061 F908            6507         BL      _252
001061 F90800          6507         BL      _252
001064                 6508 _261:
                       6509 ; rs232cmd.c 1862                               {
                       6510 ; rs232cmd.c 1863                                       SCPIError = DataOutOfRange;
001064 964842rr        6512         MOV.B   ES,#SEG( _SCPIError )
001068 9908rrrr        6513         MOV.W   R0,#SOF( _SCPIError )
00106C 9A080021        6514         MOV.W   [R0],#021H
                       6515 ; rs232cmd.c 1864                                       return;
001070 FE0A            6517         BR      _258
                       6518 ; rs232cmd.c 1865                               }
001072                 6520 _252:
                       6521 ; rs232cmd.c 1866       
                       6522 ; rs232cmd.c 1867                               QuestEnableReg = Reg & 0xEFFF;
001072 8C1702          6524         MOV.W   R1,[R7+2]
001075 8A07            6525         MOV.W   R0,[R7]
001077 9905EFFF        6526         AND.W   R0,#0EFFFH
00107B 964842rr        6527         MOV.B   ES,#SEG( _QuestEnableReg )
00107F 9918rrrr        6528         MOV.W   R1,#SOF( _QuestEnableReg )
001083 8A09            6529         MOV.W   [R1],R0
                       6530 ; rs232cmd.c 1868                       }
                       6531 ; rs232cmd.c 1869               }
                       6532 ; rs232cmd.c 1870       }
001086                 6534 _258:
001086 A974            6535         ADDS.W  R7,#04H
001088 D680            6537         RET
                       6539 ; rs232cmd.c 1871       
                       6540 ; rs232cmd.c 1872       /************************************************************************
                            **/
                       6541 ; rs232cmd.c 1873       /* StatusPreset                                                          
                                                                                                                             
                                                             RS232CMD.C */
                       6542 ; rs232cmd.c 1874       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 109

ADDR   CODE            LINE SOURCELINE
                       6543 ; rs232cmd.c 1875       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                       6544 ; rs232cmd.c 1876       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                       6545 ; rs232cmd.c 1877       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6546 ; rs232cmd.c 1878       /* Function:                                                             
                                                                                                                             
                                                                                                                    */
                       6547 ; rs232cmd.c 1879       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6548 ; rs232cmd.c 1880       /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6549 ; rs232cmd.c 1881       /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                       6550 ; rs232cmd.c 1882       /************************************************************************
                            **/
                       6551 ; rs232cmd.c 1883       void StatusPreset( void)
                       6552 ; rs232cmd.c 1884       {
                       6553         ALIGN   1
                       6555         PUBLIC  _StatusPreset
00108A                 6556 _StatusPreset:
                       6560 ; rs232cmd.c 1885               if ( CmdExecute && !SCPIError)
00108A 964842rr        6562         MOV.B   ES,#SEG( _CmdExecute )
00108E 9908rrrr        6563         MOV.W   R0,#SOF( _CmdExecute )
001092 8200            6564         MOV.B   R0L,[R0]
001094 F333            6565         BEQ     _270
001096 964842rr        6566         MOV.B   ES,#SEG( _SCPIError )
00109A 9908rrrr        6567         MOV.W   R0,#SOF( _SCPIError )
00109E 8A00            6568         MOV.W   R0,[R0]
0010A0 F22D            6569         BNE     _270
                       6570 ; rs232cmd.c 1886               {
                       6571 ; rs232cmd.c 1887                       if ( CmdRequest)
0010A2 964842rr        6573         MOV.B   ES,#SEG( _CmdRequest )
0010A6 9908rrrr        6574         MOV.W   R0,#SOF( _CmdRequest )
0010AA 8200            6575         MOV.B   R0L,[R0]
0010AC F322            6576         BEQ     _266
                       6577 ; rs232cmd.c 1888                       {
                       6578 ; rs232cmd.c 1889                               if ( ParCnt)
0010AE 964842rr        6580         MOV.B   ES,#SEG( _ParCnt )
0010B2 9908rrrr        6581         MOV.W   R0,#SOF( _ParCnt )
0010B6 8200            6582         MOV.B   R0L,[R0]
0010B8 F306            6583         BEQ     _263
                       6584 ; rs232cmd.c 1890                                       SCPIError = SyntaxErr;
0010BA 964842rr        6586         MOV.B   ES,#SEG( _SCPIError )
0010BE 9908rrrr        6587         MOV.W   R0,#SOF( _SCPIError )
0010C2 BA03            6588         MOV.W   [R0],#03H
0010C4 D680            6589         RET
0010C4 D680            6589         RET
0010C6                 6590 _263:
                       6591 ; rs232cmd.c 1891                               else
                       6592 ; rs232cmd.c 1892                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 110

ADDR   CODE            LINE SOURCELINE
                       6593 ; rs232cmd.c 1893                                       if ( Settings.ActivePreset)
0010C6 964842rr        6595         MOV.B   ES,#SEG( _Settings )
0010CA 9908rrrr        6596         MOV.W   R0,#SOF( _Settings )
0010CE 8A00            6597         MOV.W   R0,[R0]
0010D0 F305            6598         BEQ     _264
                       6599 ; rs232cmd.c 1894                                               rs232putchar( '0' + Settings.Acti
                            vePreset);
0010D2 910030          6601         ADD.B   R0L,#030H
                       6602         CALL    _rs232putchar
0010D5 C4rrrrrr       +6602 ;       FCALL   _rs232putchar
0010D9 FE07            6603         BR      _265
0010D9 FE0700          6603         BR      _265
0010DC                 6604 _264:
                       6605 ; rs232cmd.c 1895                                       else
                       6606 ; rs232cmd.c 1896                                               rs232puts( "OFF");
0010DC 9918rrrr        6608         MOV.W   R1,#SEG( _262 )
0010E0 9908rrrr        6609         MOV.W   R0,#SOF( _262 )
                       6610         CALL    _rs232puts
0010E4 C4rrrrrr       +6610 ;       FCALL   _rs232puts
0010E4 C4rrrrrr       +6610 ;       FCALL   _rs232puts
0010E8                 6611 _265:
                       6612 ; rs232cmd.c 1897       
                       6613 ; rs232cmd.c 1898                                       rs232putchar( '\n');
0010E8 91080A          6615         MOV.B   R0L,#0AH
                       6616         CALL    _rs232putchar
0010EB C4rrrrrr       +6616 ;       FCALL   _rs232putchar
                       6617 ; rs232cmd.c 1899                               }
                       6618 ; rs232cmd.c 1900                       }
0010EF D680            6620         RET
0010EF D68000          6620         RET
0010F2                 6621 _266:
                       6622 ; rs232cmd.c 1901                       else
                       6623 ; rs232cmd.c 1902                               SCPIError = SyntaxErr;
0010F2 964842rr        6625         MOV.B   ES,#SEG( _SCPIError )
0010F6 9908rrrr        6626         MOV.W   R0,#SOF( _SCPIError )
0010FA BA03            6627         MOV.W   [R0],#03H
                       6628 ; rs232cmd.c 1903               }
0010FC                 6630 _270:
                       6631 ; rs232cmd.c 1904       }
0010FC D680            6633         RET
                       6635 ; rs232cmd.c 1905       
                       6636 ; rs232cmd.c 1906       /************************************************************************
                            **/
                       6637 ; rs232cmd.c 1907       /* GenlockGen                                                            
                                                                                                                             
                                                             RS232CMD.C     */
                       6638 ; rs232cmd.c 1908       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6639 ; rs232cmd.c 1909       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       6640 ; rs232cmd.c 1910       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6641 ; rs232cmd.c 1911       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6642 ; rs232cmd.c 1912       /* Function:    Return the Genlock Configuration.                        
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 111

ADDR   CODE            LINE SOURCELINE
                       6643 ; rs232cmd.c 1913       /* Remarks:             Request only                                     
                                                                                                                             
                                                                                    */
                       6644 ; rs232cmd.c 1914       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6645 ; rs232cmd.c 1915       /* Updates:       --                                                     
                                                                                                                             
                                                                                                            */
                       6646 ; rs232cmd.c 1916       /************************************************************************
                            **/
                       6647 ; rs232cmd.c 1917       void GenlockGen( void)
                       6648 ; rs232cmd.c 1918       {
                       6649         ALIGN   1
                       6651         PUBLIC  _GenlockGen
0010FE                 6652 _GenlockGen:
0010FE 0F30            6656         PUSH.W  R4, R5
                       6660 ; rs232cmd.c 1919               char code *str;
                       6661 ; rs232cmd.c 1920       
                       6662 ; rs232cmd.c 1921               if ( CmdExecute && !SCPIError)
001100 964842rr        6664         MOV.B   ES,#SEG( _CmdExecute )
001104 9908rrrr        6665         MOV.W   R0,#SOF( _CmdExecute )
001108 8200            6666         MOV.B   R0L,[R0]
00110A F360            6667         BEQ     _278
00110C 964842rr        6668         MOV.B   ES,#SEG( _SCPIError )
001110 9908rrrr        6669         MOV.W   R0,#SOF( _SCPIError )
001114 8A00            6670         MOV.W   R0,[R0]
001116 F25A            6671         BNE     _278
                       6672 ; rs232cmd.c 1922               {
                       6673 ; rs232cmd.c 1923                       if ( !CmdRequest)
001118 964842rr        6675         MOV.B   ES,#SEG( _CmdRequest )
00111C 9908rrrr        6676         MOV.W   R0,#SOF( _CmdRequest )
001120 8200            6677         MOV.B   R0L,[R0]
001122 F206            6678         BNE     _271
                       6679 ; rs232cmd.c 1924                                       SCPIError = SyntaxErr;
001124 964842rr        6681         MOV.B   ES,#SEG( _SCPIError )
001128 9908rrrr        6682         MOV.W   R0,#SOF( _SCPIError )
00112C BA03            6683         MOV.W   [R0],#03H
00112E FE4E            6684         BR      _278
00112E FE4E            6684         BR      _278
001130                 6685 _271:
                       6686 ; rs232cmd.c 1925                       else
                       6687 ; rs232cmd.c 1926                       {
                       6688 ; rs232cmd.c 1927                               if ( ParCnt)
001130 964842rr        6690         MOV.B   ES,#SEG( _ParCnt )
001134 9908rrrr        6691         MOV.W   R0,#SOF( _ParCnt )
001138 8200            6692         MOV.B   R0L,[R0]
00113A F306            6693         BEQ     _272
                       6694 ; rs232cmd.c 1928                                       SCPIError = ParNotAllowed;
00113C 964842rr        6696         MOV.B   ES,#SEG( _SCPIError )
001140 9908rrrr        6697         MOV.W   R0,#SOF( _SCPIError )
001144 BA06            6698         MOV.W   [R0],#06H
001146 FE42            6699         BR      _278
001146 FE42            6699         BR      _278
001148                 6700 _272:
                       6701 ; rs232cmd.c 1929                               else
                       6702 ; rs232cmd.c 1930                               {
                       6703 ; rs232cmd.c 1931                                       str = GenlockSystemPar[GenlockSetup.Syste
                            m].LongName;
001148 964842rr        6705         MOV.B   ES,#SEG( _GenlockSetup )
00114C 9908rrrr        6706         MOV.W   R0,#SOF( _GenlockSetup )
001150 8200            6707         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 112

ADDR   CODE            LINE SOURCELINE
001152 E8000C          6708         MULU.B  R0L,#0CH
001155 8920            6709         MOV.W   R2,R0
001157 B930            6710         MOVS.W  R3,#00H
001159 9918rrrr        6711         MOV.W   R1,#SEG( _GenlockSystemPar )
00115D 9908rrrr        6712         MOV.W   R0,#SOF( _GenlockSystemPar )
001161 0902            6713         ADD.W   R0,R2
001163 1913            6714         ADDC.W  R1,R3
001165 862C43          6715         MOV.B   CS,R1L
001168 8820            6716         MOVC.W  R2,[R0+]
00116A 99040000        6717         CMP.W   R0,#00H
00116E F202            6718         BNE     _279
001170 A64143          6719         ADDS.B  CS,#01H
001170 A6414300        6719         ADDS.B  CS,#01H
001174                 6720 _279:
001174 8830            6721         MOVC.W  R3,[R0+]
001176 8953            6722         MOV.W   R5,R3
001178 8942            6723         MOV.W   R4,R2
                       6725 ; rs232cmd.c 1932       
                       6726 ; rs232cmd.c 1933                                       while ( *str)
00117A 866C43          6728         MOV.B   CS,R3L
00117D 8062            6729         MOVC.B  R3L,[R2+]
00117F F312            6730         BEQ     _274
00117F F31200          6730         BEQ     _274
001182                 6731 _273:
                       6732 ; rs232cmd.c 1934                                               rs232putchar( *str++);
001182 8915            6734         MOV.W   R1,R5
001184 8904            6735         MOV.W   R0,R4
001186 862C43          6736         MOV.B   CS,R1L
001189 8020            6737         MOVC.B  R1L,[R0+]
00118B 8102            6738         MOV.B   R0L,R1L
                       6739         CALL    _rs232putchar
00118D C4rrrrrr       +6739 ;       FCALL   _rs232putchar
001191 99400001        6740         ADD.W   R4,#01H
001195 99510000        6741         ADDC.W  R5,#00H
001199 8915            6745         MOV.W   R1,R5
00119B 8904            6746         MOV.W   R0,R4
00119D 862C43          6747         MOV.B   CS,R1L
0011A0 8020            6748         MOVC.B  R1L,[R0+]
0011A2 F2EF            6749         BNE     _273
0011A4                 6751 _274:
                       6752 ; rs232cmd.c 1935       
                       6753 ; rs232cmd.c 1936                                       rs232putchar(',');
0011A4 91082C          6755         MOV.B   R0L,#02CH
                       6756         CALL    _rs232putchar
0011A7 C4rrrrrr       +6756 ;       FCALL   _rs232putchar
                       6757 ; rs232cmd.c 1937       
                       6758 ; rs232cmd.c 1938                                       PrintSamplesToFLT( GenlockSetup.System, G
                            enlockSetup.Delay);
0011AB 964842rr        6760         MOV.B   ES,#SEG( _GenlockSetup )
0011AF 9908rrrr        6761         MOV.W   R0,#SOF( _GenlockSetup )
0011B3 8200            6762         MOV.B   R0L,[R0]
0011B5 964842rr        6763         MOV.B   ES,#SEG( _GenlockSetup+2 )
0011B9 9938rrrr        6764         MOV.W   R3,#SOF( _GenlockSetup+2 )
0011BD 8B23            6765         MOV.W   R2,[R3+]
0011BF 8A33            6766         MOV.W   R3,[R3]
0011C1 C52976          6767         CALL    _PrintSamplesToFLT
                       6768 ; rs232cmd.c 1939       
                       6769 ; rs232cmd.c 1940                                       rs232putchar ( '\n');
0011C4 91080A          6771         MOV.B   R0L,#0AH
                       6772         CALL    _rs232putchar
0011C7 C4rrrrrr       +6772 ;       FCALL   _rs232putchar
                       6773 ; rs232cmd.c 1941                               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 113

ADDR   CODE            LINE SOURCELINE
                       6774 ; rs232cmd.c 1942                       }
                       6775 ; rs232cmd.c 1943               }
0011CC                 6777 _278:
                       6778 ; rs232cmd.c 1944       }
0011CC 2F30            6780         POP.W   R4, R5
0011CE D680            6782         RET
                       6785 ; rs232cmd.c 1945       
                       6786 ; rs232cmd.c 1946       /************************************************************************
                            **/
                       6787 ; rs232cmd.c 1947       /* GenlockGenSystem                                                      
                                                                                                                             
                                             RS232CMD.C     */
                       6788 ; rs232cmd.c 1948       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6789 ; rs232cmd.c 1949       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       6790 ; rs232cmd.c 1950       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6791 ; rs232cmd.c 1951       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6792 ; rs232cmd.c 1952       /* Function:    Handle the genlock system command                        
                                                                                                                    */
                       6793 ; rs232cmd.c 1953       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6794 ; rs232cmd.c 1954       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6795 ; rs232cmd.c 1955       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       6796 ; rs232cmd.c 1956       /************************************************************************
                            **/
                       6797 ; rs232cmd.c 1957       void GenlockGenSystem( void)
                       6798 ; rs232cmd.c 1958       {
                       6799         ALIGN   1
                       6801         PUBLIC  _GenlockGenSystem
0011D0                 6802 _GenlockGenSystem:
0011D0 0F30            6806         PUSH.W  R4, R5
                       6812 ; rs232cmd.c 1959               int system;
                       6813 ; rs232cmd.c 1960               char code *str;
                       6814 ; rs232cmd.c 1961       
                       6815 ; rs232cmd.c 1962               if ( CmdExecute && !SCPIError)
0011D2 964842rr        6817         MOV.B   ES,#SEG( _CmdExecute )
0011D6 9908rrrr        6818         MOV.W   R0,#SOF( _CmdExecute )
0011DA 8200            6819         MOV.B   R0L,[R0]
0011DC F36F            6820         BEQ     _291
0011DE 964842rr        6821         MOV.B   ES,#SEG( _SCPIError )
0011E2 9908rrrr        6822         MOV.W   R0,#SOF( _SCPIError )
0011E6 8A00            6823         MOV.W   R0,[R0]
0011E8 F269            6824         BNE     _291
                       6825 ; rs232cmd.c 1963               {
                       6826 ; rs232cmd.c 1964                       if ( CmdRequest)
0011EA 964842rr        6828         MOV.B   ES,#SEG( _CmdRequest )
0011EE 9908rrrr        6829         MOV.W   R0,#SOF( _CmdRequest )
0011F2 8200            6830         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 114

ADDR   CODE            LINE SOURCELINE
0011F4 F33F            6831         BEQ     _283
                       6832 ; rs232cmd.c 1965                       {
                       6833 ; rs232cmd.c 1966                               if ( ParCnt)
0011F6 964842rr        6835         MOV.B   ES,#SEG( _ParCnt )
0011FA 9908rrrr        6836         MOV.W   R0,#SOF( _ParCnt )
0011FE 8200            6837         MOV.B   R0L,[R0]
001200 F306            6838         BEQ     _280
                       6839 ; rs232cmd.c 1967                                       SCPIError = ParNotAllowed;
001202 964842rr        6841         MOV.B   ES,#SEG( _SCPIError )
001206 9908rrrr        6842         MOV.W   R0,#SOF( _SCPIError )
00120A BA06            6843         MOV.W   [R0],#06H
00120C FE57            6844         BR      _291
00120C FE57            6844         BR      _291
00120E                 6845 _280:
                       6846 ; rs232cmd.c 1968                               else
                       6847 ; rs232cmd.c 1969                               {
                       6848 ; rs232cmd.c 1970                                       str = GenlockSystemPar[GenlockSetup.Syste
                            m].LongName;
00120E 964842rr        6850         MOV.B   ES,#SEG( _GenlockSetup )
001212 9908rrrr        6851         MOV.W   R0,#SOF( _GenlockSetup )
001216 8200            6852         MOV.B   R0L,[R0]
001218 E8000C          6853         MULU.B  R0L,#0CH
00121B 8920            6854         MOV.W   R2,R0
00121D B930            6855         MOVS.W  R3,#00H
00121F 9918rrrr        6856         MOV.W   R1,#SEG( _GenlockSystemPar )
001223 9908rrrr        6857         MOV.W   R0,#SOF( _GenlockSystemPar )
001227 0902            6858         ADD.W   R0,R2
001229 1913            6859         ADDC.W  R1,R3
00122B 862C43          6860         MOV.B   CS,R1L
00122E 8820            6861         MOVC.W  R2,[R0+]
001230 99040000        6862         CMP.W   R0,#00H
001234 F202            6863         BNE     _292
001236 A64143          6864         ADDS.B  CS,#01H
001236 A6414300        6864         ADDS.B  CS,#01H
00123A                 6865 _292:
00123A 8830            6866         MOVC.W  R3,[R0+]
00123C 8953            6867         MOV.W   R5,R3
00123E 8942            6868         MOV.W   R4,R2
                       6870 ; rs232cmd.c 1971       
                       6871 ; rs232cmd.c 1972                                       while ( *str)
001240 866C43          6873         MOV.B   CS,R3L
001243 8062            6874         MOVC.B  R3L,[R2+]
001245 F312            6875         BEQ     _282
001245 F31200          6875         BEQ     _282
001248                 6876 _281:
                       6877 ; rs232cmd.c 1973                                               rs232putchar( *str++);
001248 8915            6879         MOV.W   R1,R5
00124A 8904            6880         MOV.W   R0,R4
00124C 862C43          6881         MOV.B   CS,R1L
00124F 8020            6882         MOVC.B  R1L,[R0+]
001251 8102            6883         MOV.B   R0L,R1L
                       6884         CALL    _rs232putchar
001253 C4rrrrrr       +6884 ;       FCALL   _rs232putchar
001257 99400001        6885         ADD.W   R4,#01H
00125B 99510000        6886         ADDC.W  R5,#00H
00125F 8915            6890         MOV.W   R1,R5
001261 8904            6891         MOV.W   R0,R4
001263 862C43          6892         MOV.B   CS,R1L
001266 8020            6893         MOVC.B  R1L,[R0+]
001268 F2EF            6894         BNE     _281
00126A                 6896 _282:
                       6897 ; rs232cmd.c 1974       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 115

ADDR   CODE            LINE SOURCELINE
                       6898 ; rs232cmd.c 1975                                       rs232putchar('\n');
00126A 91080A          6900         MOV.B   R0L,#0AH
                       6901         CALL    _rs232putchar
00126D C4rrrrrr       +6901 ;       FCALL   _rs232putchar
                       6902 ; rs232cmd.c 1976                               }
                       6903 ; rs232cmd.c 1977                       }
001271 FE25            6905         BR      _291
001271 FE2500          6905         BR      _291
001274                 6906 _283:
                       6907 ; rs232cmd.c 1978                       else
                       6908 ; rs232cmd.c 1979                       {
                       6909 ; rs232cmd.c 1980                               if ( ParCnt != 1)
001274 964842rr        6911         MOV.B   ES,#SEG( _ParCnt )
001278 9908rrrr        6912         MOV.W   R0,#SOF( _ParCnt )
00127C 8200            6913         MOV.B   R0L,[R0]
00127E 910401          6914         CMP.B   R0L,#01H
001281 F307            6915         BEQ     _284
                       6916 ; rs232cmd.c 1981                                       SCPIError = SyntaxErr;
001283 964842rr        6918         MOV.B   ES,#SEG( _SCPIError )
001287 9908rrrr        6919         MOV.W   R0,#SOF( _SCPIError )
00128B BA03            6920         MOV.W   [R0],#03H
00128D FE17            6921         BR      _291
00128D FE1700          6921         BR      _291
001290                 6922 _284:
                       6923 ; rs232cmd.c 1982                               else
                       6924 ; rs232cmd.c 1983                               {
                       6925 ; rs232cmd.c 1984                                       system = FindParameter( Cmd, GenlockSyste
                            mPar);
001290 9918rrrr        6927         MOV.W   R1,#SEG( _Cmd )
001294 9908rrrr        6928         MOV.W   R0,#SOF( _Cmd )
001298 9938rrrr        6929         MOV.W   R3,#SEG( _GenlockSystemPar )
00129C 9928rrrr        6930         MOV.W   R2,#SOF( _GenlockSystemPar )
0012A0 C5267F          6931         CALL    _FindParameter
                       6933 ; rs232cmd.c 1985               
                       6934 ; rs232cmd.c 1986                                       if ( system > -1)
0012A3 9904FFFF        6936         CMP.W   R0,#0FFFFH
0012A7 FD04            6937         BLE     _285
                       6938 ; rs232cmd.c 1987                                               SetGenlockSystem( system);
                       6940         CALL    _SetGenlockSystem
0012A9 C4rrrrrr       +6940 ;       FCALL   _SetGenlockSystem
0012AD FE07            6942         BR      _291
0012AD FE0700          6942         BR      _291
0012B0                 6943 _285:
                       6944 ; rs232cmd.c 1988                                       else
                       6945 ; rs232cmd.c 1989                                               SCPIError = DataOutOfRange;
0012B0 964842rr        6947         MOV.B   ES,#SEG( _SCPIError )
0012B4 9908rrrr        6948         MOV.W   R0,#SOF( _SCPIError )
0012B8 9A080021        6949         MOV.W   [R0],#021H
                       6950 ; rs232cmd.c 1990                               }
                       6951 ; rs232cmd.c 1991                       }
                       6952 ; rs232cmd.c 1992               }
0012BC                 6954 _291:
                       6955 ; rs232cmd.c 1993       }
0012BC 2F30            6957         POP.W   R4, R5
0012BE D680            6959         RET
                       6962 ; rs232cmd.c 1994       
                       6963 ; rs232cmd.c 1995       /************************************************************************
                            **/
                       6964 ; rs232cmd.c 1996       /* GenlockGenDelay                                                       
                                                                                                                             
                                       RS232CMD.C */
                       6965 ; rs232cmd.c 1997       /*                                                                       
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 116

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                    */
                       6966 ; rs232cmd.c 1998       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       6967 ; rs232cmd.c 1999       /* Revised:             000525                                           
                                                                                                                             
                                                                                    */
                       6968 ; rs232cmd.c 2000       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       6969 ; rs232cmd.c 2001       /* Function:    Handle the genlock timing command                        
                                                                                                                    */
                       6970 ; rs232cmd.c 2002       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       6971 ; rs232cmd.c 2003       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       6972 ; rs232cmd.c 2004       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       6973 ; rs232cmd.c 2005       /************************************************************************
                            **/
                       6974 ; rs232cmd.c 2006       void GenlockGenDelay( void)
                       6975 ; rs232cmd.c 2007       {
                       6976         ALIGN   1
                       6978         PUBLIC  _GenlockGenDelay
0012C0                 6979 _GenlockGenDelay:
0012C0 0F30            6983         PUSH.W  R4, R5
0012C2 A978            6985         ADDS.W  R7,#08H
                       6992 ; rs232cmd.c 2008               int field, line;
                       6993 ; rs232cmd.c 2009               float offset;
                       6994 ; rs232cmd.c 2010               long samples;
                       6995 ; rs232cmd.c 2011       
                       6996 ; rs232cmd.c 2012               if ( CmdExecute && !SCPIError)
0012C4 964842rr        6998         MOV.B   ES,#SEG( _CmdExecute )
0012C8 9908rrrr        6999         MOV.W   R0,#SOF( _CmdExecute )
0012CC 8200            7000         MOV.B   R0L,[R0]
0012CE F374            7001         BEQ     _306
0012D0 964842rr        7002         MOV.B   ES,#SEG( _SCPIError )
0012D4 9908rrrr        7003         MOV.W   R0,#SOF( _SCPIError )
0012D8 8A00            7004         MOV.W   R0,[R0]
0012DA F26E            7005         BNE     _306
                       7006 ; rs232cmd.c 2013               {
                       7007 ; rs232cmd.c 2014                       if ( CmdRequest)
0012DC 964842rr        7009         MOV.B   ES,#SEG( _CmdRequest )
0012E0 9908rrrr        7010         MOV.W   R0,#SOF( _CmdRequest )
0012E4 8200            7011         MOV.B   R0L,[R0]
0012E6 F31D            7012         BEQ     _297
                       7013 ; rs232cmd.c 2015                       {
                       7014 ; rs232cmd.c 2016                               if ( ParCnt)
0012E8 964842rr        7016         MOV.B   ES,#SEG( _ParCnt )
0012EC 9908rrrr        7017         MOV.W   R0,#SOF( _ParCnt )
0012F0 8200            7018         MOV.B   R0L,[R0]
0012F2 F306            7019         BEQ     _296
                       7020 ; rs232cmd.c 2017                                       SCPIError = ParNotAllowed;
0012F4 964842rr        7022         MOV.B   ES,#SEG( _SCPIError )
0012F8 9908rrrr        7023         MOV.W   R0,#SOF( _SCPIError )
0012FC BA06            7024         MOV.W   [R0],#06H
0012FE FE5C            7025         BR      _306
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 117

ADDR   CODE            LINE SOURCELINE
0012FE FE5C            7025         BR      _306
001300                 7026 _296:
                       7027 ; rs232cmd.c 2018                               else
                       7028 ; rs232cmd.c 2019                               {
                       7029 ; rs232cmd.c 2020                                       PrintSamplesToFLT( GenlockSetup.System, G
                            enlockSetup.Delay);
001300 964842rr        7031         MOV.B   ES,#SEG( _GenlockSetup )
001304 9908rrrr        7032         MOV.W   R0,#SOF( _GenlockSetup )
001308 8200            7033         MOV.B   R0L,[R0]
00130A 964842rr        7034         MOV.B   ES,#SEG( _GenlockSetup+2 )
00130E 9938rrrr        7035         MOV.W   R3,#SOF( _GenlockSetup+2 )
001312 8B23            7036         MOV.W   R2,[R3+]
001314 8A33            7037         MOV.W   R3,[R3]
001316 C528CC          7038         CALL    _PrintSamplesToFLT
                       7039 ; rs232cmd.c 2021       
                       7040 ; rs232cmd.c 2022                                       rs232putchar ( '\n');
001319 91080A          7042         MOV.B   R0L,#0AH
                       7043         CALL    _rs232putchar
00131C C4rrrrrr       +7043 ;       FCALL   _rs232putchar
                       7044 ; rs232cmd.c 2023                               }
                       7045 ; rs232cmd.c 2024                       }
001320 FE4B            7047         BR      _306
001320 FE4B            7047         BR      _306
001322                 7048 _297:
                       7049 ; rs232cmd.c 2025                       else
                       7050 ; rs232cmd.c 2026                       {
                       7051 ; rs232cmd.c 2027                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001322 964842rr        7053         MOV.B   ES,#SEG( _ParCnt )
001326 9908rrrr        7054         MOV.W   R0,#SOF( _ParCnt )
00132A 8200            7055         MOV.B   R0L,[R0]
00132C 910403          7056         CMP.B   R0L,#03H
00132F F21F            7057         BNE     _298
001331 9168rr          7058         MOV.B   R3L,#SEG( __lc_bs )
001334 7177            7059         XOR.B   R3H,R3H
001336 8927            7060         MOV.W   R2,R7
001338 91A8rr          7061         MOV.B   R5L,#SEG( __lc_bs )
00133B 71BB            7062         XOR.B   R5H,R5H
00133D 404702          7063         LEA     R4,R7+2
001340 9128rr          7064         MOV.B   R1L,#SEG( __lc_bs )
001343 7133            7065         XOR.B   R1H,R1H
001345 400704          7066         LEA     R0,R7+4
001348 0F03            7067         PUSH.W  R0, R1
00134A 0F30            7069         PUSH.W  R4, R5
00134C 0F0C            7071         PUSH.W  R2, R3
00134E 9938rrrr        7073         MOV.W   R3,#SEG( _295 )
001352 9928rrrr        7074         MOV.W   R2,#SOF( _295 )
001356 0F0C            7075         PUSH.W  R2, R3
001358 9918rrrr        7077         MOV.W   R1,#SEG( _Cmd )
00135C 9908rrrr        7078         MOV.W   R0,#SOF( _Cmd )
                       7079         CALL    _sscanf
001360 C4rrrrrr       +7079 ;       FCALL   _sscanf
001364 99700010        7080         ADD.W   R7,#010H
001368 99040003        7082         CMP.W   R0,#03H
00136C F306            7083         BEQ     _299
00136C F306            7083         BEQ     _299
00136E                 7084 _298:
                       7085 ; rs232cmd.c 2028                                       SCPIError = SyntaxErr;
00136E 964842rr        7087         MOV.B   ES,#SEG( _SCPIError )
001372 9908rrrr        7088         MOV.W   R0,#SOF( _SCPIError )
001376 BA03            7089         MOV.W   [R0],#03H
001378 FE1F            7090         BR      _306
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 118

ADDR   CODE            LINE SOURCELINE
001378 FE1F            7090         BR      _306
00137A                 7091 _299:
                       7092 ; rs232cmd.c 2029                               else
                       7093 ; rs232cmd.c 2030                               {
                       7094 ; rs232cmd.c 2031                                       if (( samples = FLTToSamples( GenlockSetu
                            p.System, field, line, offset)) == -1)
00137A 964842rr        7096         MOV.B   ES,#SEG( _GenlockSetup )
00137E 9908rrrr        7097         MOV.W   R0,#SOF( _GenlockSetup )
001382 8200            7098         MOV.B   R0L,[R0]
001384 8A17            7099         MOV.W   R1,[R7]
001386 8C2702          7100         MOV.W   R2,[R7+2]
001389 8C5706          7101         MOV.W   R5,[R7+6]
00138C 8C4704          7102         MOV.W   R4,[R7+4]
00138F 0F30            7103         PUSH.W  R4, R5
001391 C52653          7105         CALL    _FLTToSamples
001394 A974            7106         ADDS.W  R7,#04H
001396 8931            7108         MOV.W   R3,R1
001398 8920            7109         MOV.W   R2,R0
00139A 9934FFFF        7110         CMP.W   R3,#0FFFFH
00139E F202            7111         BNE     _309
0013A0 9924FFFF        7112         CMP.W   R2,#0FFFFH
0013A0 9924FFFF        7112         CMP.W   R2,#0FFFFH
0013A4                 7113 _309:
0013A4 F207            7114         BNE     _300
                       7115 ; rs232cmd.c 2032                                               SCPIError = ExecErr;
0013A6 964842rr        7117         MOV.B   ES,#SEG( _SCPIError )
0013AA 9908rrrr        7118         MOV.W   R0,#SOF( _SCPIError )
0013AE 9A08001D        7119         MOV.W   [R0],#01DH
0013B2 FE02            7120         BR      _306
0013B2 FE02            7120         BR      _306
0013B4                 7121 _300:
                       7122 ; rs232cmd.c 2033                                       else
                       7123 ; rs232cmd.c 2034                                               SetGenlockDelay( samples);
                       7125         CALL    _SetGenlockDelay
0013B4 C4rrrrrr       +7125 ;       FCALL   _SetGenlockDelay
                       7126 ; rs232cmd.c 2035                               }
                       7127 ; rs232cmd.c 2036                       }
                       7128 ; rs232cmd.c 2037               }
0013B8                 7130 _306:
                       7131 ; rs232cmd.c 2038       }
0013B8 99700008        7133         ADD.W   R7,#08H
0013BC 2F30            7135         POP.W   R4, R5
0013BE D680            7137         RET
                       7139 ; rs232cmd.c 2039       
                       7140 ; rs232cmd.c 2040       /************************************************************************
                            **/
                       7141 ; rs232cmd.c 2041       /* GenlockGenCalibrateEnable                                             
                                                                                                       RS232CMD.C */
                       7142 ; rs232cmd.c 2042       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7143 ; rs232cmd.c 2043       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7144 ; rs232cmd.c 2044       /* Revised:             000622                                           
                                                                                                                             
                                                                                    */
                       7145 ; rs232cmd.c 2045       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 119

ADDR   CODE            LINE SOURCELINE
                       7146 ; rs232cmd.c 2046       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7147 ; rs232cmd.c 2047       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7148 ; rs232cmd.c 2048       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7149 ; rs232cmd.c 2049       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7150 ; rs232cmd.c 2050       /************************************************************************
                            **/
                       7151 ; rs232cmd.c 2051       void GenlockGenCalibrateEnable( void)
                       7152 ; rs232cmd.c 2052       {
                       7153         ALIGN   1
                       7155         PUBLIC  _GenlockGenCalibrateEnable
0013C0                 7156 _GenlockGenCalibrateEnable:
0013C0 0F30            7160         PUSH.W  R4, R5
                       7166 ; rs232cmd.c 2053               char code *str;
                       7167 ; rs232cmd.c 2054               int tmp;
                       7168 ; rs232cmd.c 2055       
                       7169 ; rs232cmd.c 2056               if ( CmdExecute && !SCPIError)
0013C2 964842rr        7171         MOV.B   ES,#SEG( _CmdExecute )
0013C6 9908rrrr        7172         MOV.W   R0,#SOF( _CmdExecute )
0013CA 8200            7173         MOV.B   R0L,[R0]
                       7174         BEQ     _326
0013CC F202           +7174 ;       BNE     _LG_352
0013CE D500D2         +7174 ;       JMP.L   _326
0013CE D500D200       +7174 ;       JMP.L   _326
0013D2                +7174 _LG_352:
0013D2 964842rr        7175         MOV.B   ES,#SEG( _SCPIError )
0013D6 9908rrrr        7176         MOV.W   R0,#SOF( _SCPIError )
0013DA 8A00            7177         MOV.W   R0,[R0]
                       7178         BNE     _326
0013DC F302           +7178 ;       BEQ     _LG_354
0013DE D500CA         +7178 ;       JMP.L   _326
0013DE D500CA00       +7178 ;       JMP.L   _326
0013E2                +7178 _LG_354:
                       7179 ; rs232cmd.c 2057               {
                       7180 ; rs232cmd.c 2058                       if ( CmdRequest)
0013E2 964842rr        7182         MOV.B   ES,#SEG( _CmdRequest )
0013E6 9908rrrr        7183         MOV.W   R0,#SOF( _CmdRequest )
0013EA 8200            7184         MOV.B   R0L,[R0]
0013EC F340            7185         BEQ     _316
                       7186 ; rs232cmd.c 2059                       {
                       7187 ; rs232cmd.c 2060                               if ( ParCnt)
0013EE 964842rr        7189         MOV.B   ES,#SEG( _ParCnt )
0013F2 9908rrrr        7190         MOV.W   R0,#SOF( _ParCnt )
0013F6 8200            7191         MOV.B   R0L,[R0]
0013F8 F307            7192         BEQ     _313
                       7193 ; rs232cmd.c 2061                                       SCPIError = SyntaxErr;
0013FA 964842rr        7195         MOV.B   ES,#SEG( _SCPIError )
0013FE 9908rrrr        7196         MOV.W   R0,#SOF( _SCPIError )
001402 BA03            7197         MOV.W   [R0],#03H
                       7198         BR      _326
001404 D500B7         +7198         JMP.L   _326
001404 D500B700       +7198         JMP.L   _326
001408                 7199 _313:
                       7200 ; rs232cmd.c 2062                               else
                       7201 ; rs232cmd.c 2063                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 120

ADDR   CODE            LINE SOURCELINE
                       7202 ; rs232cmd.c 2064                                       str = OffOnPar[GenlockCalEnable].LongName
                            ;
001408 964842rr        7204         MOV.B   ES,#SEG( _GenlockCalEnable )
00140C 9908rrrr        7205         MOV.W   R0,#SOF( _GenlockCalEnable )
001410 8200            7206         MOV.B   R0L,[R0]
001412 E8000C          7207         MULU.B  R0L,#0CH
001415 8920            7208         MOV.W   R2,R0
001417 B930            7209         MOVS.W  R3,#00H
001419 9918rrrr        7210         MOV.W   R1,#SEG( _OffOnPar )
00141D 9908rrrr        7211         MOV.W   R0,#SOF( _OffOnPar )
001421 0902            7212         ADD.W   R0,R2
001423 1913            7213         ADDC.W  R1,R3
001425 862C43          7214         MOV.B   CS,R1L
001428 8820            7215         MOVC.W  R2,[R0+]
00142A 99040000        7216         CMP.W   R0,#00H
00142E F202            7217         BNE     _327
001430 A64143          7218         ADDS.B  CS,#01H
001430 A6414300        7218         ADDS.B  CS,#01H
001434                 7219 _327:
001434 8830            7220         MOVC.W  R3,[R0+]
001436 8953            7221         MOV.W   R5,R3
001438 8942            7222         MOV.W   R4,R2
                       7224 ; rs232cmd.c 2065       
                       7225 ; rs232cmd.c 2066                                       while ( *str)
00143A 866C43          7227         MOV.B   CS,R3L
00143D 8062            7228         MOVC.B  R3L,[R2+]
00143F F312            7229         BEQ     _315
00143F F31200          7229         BEQ     _315
001442                 7230 _314:
                       7231 ; rs232cmd.c 2067                                               rs232putchar( *str++);
001442 8915            7233         MOV.W   R1,R5
001444 8904            7234         MOV.W   R0,R4
001446 862C43          7235         MOV.B   CS,R1L
001449 8020            7236         MOVC.B  R1L,[R0+]
00144B 8102            7237         MOV.B   R0L,R1L
                       7238         CALL    _rs232putchar
00144D C4rrrrrr       +7238 ;       FCALL   _rs232putchar
001451 99400001        7239         ADD.W   R4,#01H
001455 99510000        7240         ADDC.W  R5,#00H
001459 8915            7244         MOV.W   R1,R5
00145B 8904            7245         MOV.W   R0,R4
00145D 862C43          7246         MOV.B   CS,R1L
001460 8020            7247         MOVC.B  R1L,[R0+]
001462 F2EF            7248         BNE     _314
001464                 7250 _315:
                       7251 ; rs232cmd.c 2068       
                       7252 ; rs232cmd.c 2069                                       rs232putchar('\n');
001464 91080A          7254         MOV.B   R0L,#0AH
                       7255         CALL    _rs232putchar
001467 C4rrrrrr       +7255 ;       FCALL   _rs232putchar
                       7256 ; rs232cmd.c 2070                               }
                       7257 ; rs232cmd.c 2071                       }
                       7259         BR      _326
00146B D50083         +7259         JMP.L   _326
00146B D50083         +7259         JMP.L   _326
00146E                 7260 _316:
                       7261 ; rs232cmd.c 2072                       else
                       7262 ; rs232cmd.c 2073                       {
                       7263 ; rs232cmd.c 2074                               if ( ParCnt != 1)
00146E 964842rr        7265         MOV.B   ES,#SEG( _ParCnt )
001472 9908rrrr        7266         MOV.W   R0,#SOF( _ParCnt )
001476 8200            7267         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 121

ADDR   CODE            LINE SOURCELINE
001478 910401          7268         CMP.B   R0L,#01H
00147B F307            7269         BEQ     _317
                       7270 ; rs232cmd.c 2075                                       SCPIError = SyntaxErr;
00147D 964842rr        7272         MOV.B   ES,#SEG( _SCPIError )
001481 9908rrrr        7273         MOV.W   R0,#SOF( _SCPIError )
001485 BA03            7274         MOV.W   [R0],#03H
001487 FE76            7275         BR      _326
001487 FE7600          7275         BR      _326
00148A                 7276 _317:
                       7277 ; rs232cmd.c 2076                               else
                       7278 ; rs232cmd.c 2077                               {
                       7279 ; rs232cmd.c 2078                                       tmp = FindParameter( Cmd, OffOnPar);
00148A 9918rrrr        7281         MOV.W   R1,#SEG( _Cmd )
00148E 9908rrrr        7282         MOV.W   R0,#SOF( _Cmd )
001492 9938rrrr        7283         MOV.W   R3,#SEG( _OffOnPar )
001496 9928rrrr        7284         MOV.W   R2,#SOF( _OffOnPar )
00149A C52582          7285         CALL    _FindParameter
                       7287 ; rs232cmd.c 2079               
                       7288 ; rs232cmd.c 2080                                       if ( tmp > -1)
00149D 9904FFFF        7290         CMP.W   R0,#0FFFFH
0014A1 FD63            7291         BLE     _319
                       7292 ; rs232cmd.c 2081                                       {
                       7293 ; rs232cmd.c 2082                                               GenlockCalEnable = tmp;
0014A3 8910            7295         MOV.W   R1,R0
0014A5 964842rr        7296         MOV.B   ES,#SEG( _GenlockCalEnable )
0014A9 9928rrrr        7297         MOV.W   R2,#SOF( _GenlockCalEnable )
0014AD 822A            7298         MOV.B   [R2],R1L
                       7299 ; rs232cmd.c 2083       
                       7300 ; rs232cmd.c 2084                                               if ( tmp == 0)
0014AF 6900            7302         OR.W    R0,R0
0014B1 F219            7303         BNE     _318
                       7304 ; rs232cmd.c 2085                                               {
                       7305 ; rs232cmd.c 2086                                                       SetGenlockSystem( Genlock
                            Setup.System);
0014B3 964842rr        7307         MOV.B   ES,#SEG( _GenlockSetup )
0014B7 9908rrrr        7308         MOV.W   R0,#SOF( _GenlockSetup )
0014BB 8200            7309         MOV.B   R0L,[R0]
0014BD B110            7311         MOVS.B  R0H,#00H
                       7312         CALL    _SetGenlockSystem
0014BF C4rrrrrr       +7312 ;       FCALL   _SetGenlockSystem
                       7313 ; rs232cmd.c 2087       
                       7314 ; rs232cmd.c 2088                                                       SetBBSystem( BBOutput1, B
                            BSetup[BBOutput1].System);
0014C3 964842rr        7316         MOV.B   ES,#SEG( _BBSetup )
0014C7 9908rrrr        7317         MOV.W   R0,#SOF( _BBSetup )
0014CB 8200            7318         MOV.B   R0L,[R0]
0014CD 8120            7319         MOV.B   R1L,R0L
0014CF B130            7320         MOVS.B  R1H,#00H
0014D1 B900            7321         MOV.W   R0,#00H
                       7322         CALL    _SetBBSystem
0014D3 C4rrrrrr       +7322 ;       FCALL   _SetBBSystem
                       7323 ; rs232cmd.c 2089       
                       7324 ; rs232cmd.c 2090                                                       BBControlPort = 0;
0014D7 964842rr        7326         MOV.B   ES,#SEG( _BBControlPort )
0014DB 9908rrrr        7327         MOV.W   R0,#SOF( _BBControlPort )
0014DF BA00            7328         MOV.W   [R0],#00H
                       7329 ; rs232cmd.c 2091                                               }
0014E1 FE49            7331         BR      _326
0014E1 FE4900          7331         BR      _326
0014E4                 7332 _318:
                       7333 ; rs232cmd.c 2092                                               else
                       7334 ; rs232cmd.c 2093                                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 122

ADDR   CODE            LINE SOURCELINE
                       7335 ; rs232cmd.c 2094                                                                                
                                                                                                                             
                                            // Force genlock internal mode
                       7336 ; rs232cmd.c 2095                                                       sio0SndCommand( 12, SPG_V
                            24_address, "GM0");
0014E4 9908000C        7338         MOV.W   R0,#0CH
0014E8 9938rrrr        7339         MOV.W   R3,#SEG( _310 )
0014EC 9928rrrr        7340         MOV.W   R2,#SOF( _310 )
0014F0 0F0C            7341         PUSH.W  R2, R3
0014F2 99180015        7343         MOV.W   R1,#015H
                       7344         CALL    _sio0SndCommand
0014F6 C4rrrrrr       +7344 ;       FCALL   _sio0SndCommand
0014FA A974            7345         ADDS.W  R7,#04H
                       7347 ; rs232cmd.c 2096       
                       7348 ; rs232cmd.c 2097                                                                                
                                                                                                                             
                                            // Force BB1 PAL mode
                       7349 ; rs232cmd.c 2098                                                       sio0SndCommand( 20, BB_V2
                            4_address, "HG%ld;", BBSetup[BBOutput1].Delay);
0014FC 99180034        7351         MOV.W   R1,#034H
001500 964842rr        7352         MOV.B   ES,#SEG( _BBSetup+2 )
001504 9938rrrr        7353         MOV.W   R3,#SOF( _BBSetup+2 )
001508 8B23            7354         MOV.W   R2,[R3+]
00150A 8A33            7355         MOV.W   R3,[R3]
00150C 0F0C            7356         PUSH.W  R2, R3
00150E 9938rrrr        7358         MOV.W   R3,#SEG( _311 )
001512 9928rrrr        7359         MOV.W   R2,#SOF( _311 )
001516 0F0C            7360         PUSH.W  R2, R3
001518 99080014        7362         MOV.W   R0,#014H
                       7363         CALL    _sio0SndCommand
00151C C4rrrrrr       +7363 ;       FCALL   _sio0SndCommand
001520 99700008        7364         ADD.W   R7,#08H
                       7366 ; rs232cmd.c 2099       
                       7367 ; rs232cmd.c 2100                                                       BBControlPort = 1;       
                                                                                    // Set BB1 to F45MHz
001524 964842rr        7369         MOV.B   ES,#SEG( _BBControlPort )
001528 9908rrrr        7370         MOV.W   R0,#SOF( _BBControlPort )
00152C BA01            7371         MOV.W   [R0],#01H
                       7372 ; rs232cmd.c 2101       
                       7373 ; rs232cmd.c 2102                                                       GenlockCalValue = Calibra
                            tion.GenlockCalibration.DACUserValue;
00152E 964842rr        7375         MOV.B   ES,#SEG( _Calibration+120 )
001532 9908rrrr        7376         MOV.W   R0,#SOF( _Calibration+120 )
001536 8A00            7377         MOV.W   R0,[R0]
001538 964842rr        7378         MOV.B   ES,#SEG( _GenlockCalValue )
00153C 9918rrrr        7379         MOV.W   R1,#SOF( _GenlockCalValue )
001540 8A09            7380         MOV.W   [R1],R0
                       7381 ; rs232cmd.c 2103       
                       7382 ; rs232cmd.c 2104                                                       sio0SndCommand( 20, SPG_V
                            24_address, "GX%d;", GenlockCalValue);
001542 964842rr        7384         MOV.B   ES,#SEG( _GenlockCalValue )
001546 9908rrrr        7385         MOV.W   R0,#SOF( _GenlockCalValue )
00154A 8A00            7386         MOV.W   R0,[R0]
00154C 0F01            7387         PUSH.W  R0
00154E 9918rrrr        7389         MOV.W   R1,#SEG( _312 )
001552 9908rrrr        7390         MOV.W   R0,#SOF( _312 )
001556 0F03            7391         PUSH.W  R0, R1
001558 99080014        7393         MOV.W   R0,#014H
00155C 99180015        7394         MOV.W   R1,#015H
                       7395         CALL    _sio0SndCommand
001560 C4rrrrrr       +7395 ;       FCALL   _sio0SndCommand
001564 A976            7396         ADDS.W  R7,#06H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 123

ADDR   CODE            LINE SOURCELINE
                       7398 ; rs232cmd.c 2105                                               }
                       7399 ; rs232cmd.c 2106                                       }
001566 FE06            7401         BR      _326
001566 FE06            7401         BR      _326
001568                 7402 _319:
                       7403 ; rs232cmd.c 2107                                       else
                       7404 ; rs232cmd.c 2108                                               SCPIError = DataOutOfRange;
001568 964842rr        7406         MOV.B   ES,#SEG( _SCPIError )
00156C 9908rrrr        7407         MOV.W   R0,#SOF( _SCPIError )
001570 9A080021        7408         MOV.W   [R0],#021H
                       7409 ; rs232cmd.c 2109                               }
                       7410 ; rs232cmd.c 2110                       }
                       7411 ; rs232cmd.c 2111               }
001574                 7413 _326:
                       7414 ; rs232cmd.c 2112       }
001574 2F30            7416         POP.W   R4, R5
001576 D680            7418         RET
                       7421 ; rs232cmd.c 2113       
                       7422 ; rs232cmd.c 2114       /************************************************************************
                            **/
                       7423 ; rs232cmd.c 2115       /* GenlockGenCalibrateAdjust                                             
                                                                                                       RS232CMD.C */
                       7424 ; rs232cmd.c 2116       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7425 ; rs232cmd.c 2117       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7426 ; rs232cmd.c 2118       /* Revised:             001016                                           
                                                                                                                             
                                                                                    */
                       7427 ; rs232cmd.c 2119       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7428 ; rs232cmd.c 2120       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7429 ; rs232cmd.c 2121       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7430 ; rs232cmd.c 2122       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7431 ; rs232cmd.c 2123       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7432 ; rs232cmd.c 2124       /************************************************************************
                            **/
                       7433 ; rs232cmd.c 2125       void GenlockGenCalibrateAdjust( void)
                       7434 ; rs232cmd.c 2126       {
                       7435         ALIGN   1
                       7437         PUBLIC  _GenlockGenCalibrateAdjust
001578                 7438 _GenlockGenCalibrateAdjust:
001578 0F30            7442         PUSH.W  R4, R5
                       7450 ; rs232cmd.c 2127               int tmp;
                       7451 ; rs232cmd.c 2128               UI MinVal, MaxVal;
                       7452 ; rs232cmd.c 2129       
                       7453 ; rs232cmd.c 2130               if ( CmdExecute && !SCPIError)
00157A 964842rr        7455         MOV.B   ES,#SEG( _CmdExecute )
00157E 9908rrrr        7456         MOV.W   R0,#SOF( _CmdExecute )
001582 8200            7457         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 124

ADDR   CODE            LINE SOURCELINE
                       7458         BEQ     _346
001584 F202           +7458 ;       BNE     _LG_372
001586 D5009D         +7458 ;       JMP.L   _346
001586 D5009D00       +7458 ;       JMP.L   _346
00158A                +7458 _LG_372:
00158A 964842rr        7459         MOV.B   ES,#SEG( _SCPIError )
00158E 9908rrrr        7460         MOV.W   R0,#SOF( _SCPIError )
001592 8A00            7461         MOV.W   R0,[R0]
                       7462         BNE     _346
001594 F302           +7462 ;       BEQ     _LG_374
001596 D50095         +7462 ;       JMP.L   _346
001596 D5009500       +7462 ;       JMP.L   _346
00159A                +7462 _LG_374:
                       7463 ; rs232cmd.c 2131               {
                       7464 ; rs232cmd.c 2132                       if ( CmdRequest)
00159A 964842rr        7466         MOV.B   ES,#SEG( _CmdRequest )
00159E 9908rrrr        7467         MOV.W   R0,#SOF( _CmdRequest )
0015A2 8200            7468         MOV.B   R0L,[R0]
0015A4 F307            7469         BEQ     _331
                       7470 ; rs232cmd.c 2133                               SCPIError = SyntaxErr;
0015A6 964842rr        7472         MOV.B   ES,#SEG( _SCPIError )
0015AA 9908rrrr        7473         MOV.W   R0,#SOF( _SCPIError )
0015AE BA03            7474         MOV.W   [R0],#03H
                       7475         BR      _346
0015B0 D50088         +7475         JMP.L   _346
0015B0 D5008800       +7475         JMP.L   _346
0015B4                 7476 _331:
                       7477 ; rs232cmd.c 2134                       else
                       7478 ; rs232cmd.c 2135                       {
                       7479 ; rs232cmd.c 2136                               if ( ParCnt == 0)
0015B4 964842rr        7481         MOV.B   ES,#SEG( _ParCnt )
0015B8 9908rrrr        7482         MOV.W   R0,#SOF( _ParCnt )
0015BC 8200            7483         MOV.B   R0L,[R0]
0015BE F206            7484         BNE     _332
                       7485 ; rs232cmd.c 2137                                       SCPIError = SyntaxErr;
0015C0 964842rr        7487         MOV.B   ES,#SEG( _SCPIError )
0015C4 9908rrrr        7488         MOV.W   R0,#SOF( _SCPIError )
0015C8 BA03            7489         MOV.W   [R0],#03H
0015CA FE7B            7490         BR      _346
0015CA FE7B            7490         BR      _346
0015CC                 7491 _332:
                       7492 ; rs232cmd.c 2138                               else
                       7493 ; rs232cmd.c 2139                               {
                       7494 ; rs232cmd.c 2140                                       MinVal = Calibration.GenlockCalibration.D
                            ACFactValue - 150;
0015CC 964842rr        7496         MOV.B   ES,#SEG( _Calibration+118 )
0015D0 9908rrrr        7497         MOV.W   R0,#SOF( _Calibration+118 )
0015D4 8A00            7498         MOV.W   R0,[R0]
0015D6 8950            7499         MOV.W   R5,R0
0015D8 8945            7500         MOV.W   R4,R5
0015DA 99520096        7501         SUB.W   R5,#096H
                       7503 ; rs232cmd.c 2141                                       MaxVal = Calibration.GenlockCalibration.D
                            ACFactValue + 150;
0015DE 99400096        7505         ADD.W   R4,#096H
                       7507 ; rs232cmd.c 2142       
                       7508 ; rs232cmd.c 2143                                       tmp = FindParameter( Cmd, MinMaxPar);
0015E2 9938rrrr        7510         MOV.W   R3,#SEG( _MinMaxPar )
0015E6 9928rrrr        7511         MOV.W   R2,#SOF( _MinMaxPar )
0015EA 9918rrrr        7512         MOV.W   R1,#SEG( _Cmd )
0015EE 9908rrrr        7513         MOV.W   R0,#SOF( _Cmd )
0015F2 C524D6          7514         CALL    _FindParameter
                       7516 ; rs232cmd.c 2144               
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 125

ADDR   CODE            LINE SOURCELINE
                       7517 ; rs232cmd.c 2145                                       if ( tmp > -1)
0015F5 9904FFFF        7519         CMP.W   R0,#0FFFFH
0015F9 FD21            7520         BLE     _335
                       7521 ; rs232cmd.c 2146                                       {
                       7522 ; rs232cmd.c 2147                                               if ( tmp == 0)
0015FB 6900            7524         OR.W    R0,R0
0015FD F207            7525         BNE     _333
                       7526 ; rs232cmd.c 2148                                                       GenlockCalValue = MaxVal;
                            
0015FF 964842rr        7528         MOV.B   ES,#SEG( _GenlockCalValue )
001603 9908rrrr        7529         MOV.W   R0,#SOF( _GenlockCalValue )
001607 8A48            7530         MOV.W   [R0],R4
001609 FE06            7531         BR      _334
001609 FE0600          7531         BR      _334
00160C                 7532 _333:
                       7534 ; rs232cmd.c 2149                                               else
                       7535 ; rs232cmd.c 2150                                                       GenlockCalValue = MinVal;
                            
00160C 964842rr        7537         MOV.B   ES,#SEG( _GenlockCalValue )
001610 9908rrrr        7538         MOV.W   R0,#SOF( _GenlockCalValue )
001614 8A58            7539         MOV.W   [R0],R5
001614 8A58            7539         MOV.W   [R0],R5
001616                 7540 _334:
                       7541 ; rs232cmd.c 2151       
                       7542 ; rs232cmd.c 2152                                               sio0SndCommand( 20, SPG_V24_addre
                            ss, "GX%u;", GenlockCalValue);  
001616 99080014        7544         MOV.W   R0,#014H
00161A 99180015        7546         MOV.W   R1,#015H
00161E 964842rr        7547         MOV.B   ES,#SEG( _GenlockCalValue )
001622 9928rrrr        7548         MOV.W   R2,#SOF( _GenlockCalValue )
001626 8A22            7549         MOV.W   R2,[R2]
001628 0F04            7550         PUSH.W  R2
00162A 9938rrrr        7552         MOV.W   R3,#SEG( _330 )
00162E 9928rrrr        7553         MOV.W   R2,#SOF( _330 )
001632 0F0C            7554         PUSH.W  R2, R3
                       7556         CALL    _sio0SndCommand
001634 C4rrrrrr       +7556 ;       FCALL   _sio0SndCommand
001638 A976            7557         ADDS.W  R7,#06H
                       7559 ; rs232cmd.c 2153                                       }
00163A FE43            7561         BR      _346
00163A FE43            7561         BR      _346
00163C                 7562 _335:
                       7564 ; rs232cmd.c 2154                                       else
                       7565 ; rs232cmd.c 2155                                       {
                       7566 ; rs232cmd.c 2156                                               tmp = FindParameter( Cmd, UpDownP
                            ar);
00163C 9938rrrr        7568         MOV.W   R3,#SEG( _UpDownPar )
001640 9928rrrr        7569         MOV.W   R2,#SOF( _UpDownPar )
001644 9918rrrr        7570         MOV.W   R1,#SEG( _Cmd )
001648 9908rrrr        7571         MOV.W   R0,#SOF( _Cmd )
00164C C524A9          7572         CALL    _FindParameter
                       7574 ; rs232cmd.c 2157       
                       7575 ; rs232cmd.c 2158                                               if ( tmp > -1)
00164F 9904FFFF        7577         CMP.W   R0,#0FFFFH
001653 FD31            7578         BLE     _340
                       7579 ; rs232cmd.c 2159                                               {
                       7580 ; rs232cmd.c 2160                                                       if ( tmp == 0)
001655 6900            7582         OR.W    R0,R0
001657 F20F            7583         BNE     _336
                       7584 ; rs232cmd.c 2161                                                       {
                       7585 ; rs232cmd.c 2162                                                               if ( GenlockCalVa
                            lue > MinVal)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 126

ADDR   CODE            LINE SOURCELINE
001659 964842rr        7587         MOV.B   ES,#SEG( _GenlockCalValue )
00165D 9908rrrr        7588         MOV.W   R0,#SOF( _GenlockCalValue )
001661 8A00            7589         MOV.W   R0,[R0]
001663 4905            7591         CMP.W   R0,R5
001665 F915            7592         BL      _339
                       7593 ; rs232cmd.c 2163                                                                       GenlockCa
                            lValue--;
001667 A90F            7595         ADDS.W  R0,#0FH
001669 964842rr        7596         MOV.B   ES,#SEG( _GenlockCalValue )
00166D 9918rrrr        7597         MOV.W   R1,#SOF( _GenlockCalValue )
001671 8A09            7598         MOV.W   [R1],R0
                       7599 ; rs232cmd.c 2164                                                       }
001673 FE0E            7601         BR      _339
001673 FE0E00          7601         BR      _339
001676                 7602 _336:
                       7603 ; rs232cmd.c 2165                                                       else
                       7604 ; rs232cmd.c 2166                                                       {
                       7605 ; rs232cmd.c 2167                                                               if ( GenlockCalVa
                            lue < MaxVal)
001676 964842rr        7607         MOV.B   ES,#SEG( _GenlockCalValue )
00167A 9908rrrr        7608         MOV.W   R0,#SOF( _GenlockCalValue )
00167E 8A00            7609         MOV.W   R0,[R0]
001680 4904            7610         CMP.W   R0,R4
001682 F006            7611         BCC     _339
                       7612 ; rs232cmd.c 2168                                                                       GenlockCa
                            lValue++;
001684 A901            7614         ADDS.W  R0,#01H
001686 964842rr        7615         MOV.B   ES,#SEG( _GenlockCalValue )
00168A 9918rrrr        7616         MOV.W   R1,#SOF( _GenlockCalValue )
00168E 8A09            7617         MOV.W   [R1],R0
                       7618 ; rs232cmd.c 2169                                                       }
001690                 7620 _339:
                       7621 ; rs232cmd.c 2170       
                       7622 ; rs232cmd.c 2171                                                       sio0SndCommand( 20, SPG_V
                            24_address, "GX%u;", GenlockCalValue);
001690 99080014        7624         MOV.W   R0,#014H
001694 99180015        7625         MOV.W   R1,#015H
001698 964842rr        7626         MOV.B   ES,#SEG( _GenlockCalValue )
00169C 9928rrrr        7627         MOV.W   R2,#SOF( _GenlockCalValue )
0016A0 8A22            7628         MOV.W   R2,[R2]
0016A2 0F04            7629         PUSH.W  R2
0016A4 9938rrrr        7631         MOV.W   R3,#SEG( _330 )
0016A8 9928rrrr        7632         MOV.W   R2,#SOF( _330 )
0016AC 0F0C            7633         PUSH.W  R2, R3
                       7635         CALL    _sio0SndCommand
0016AE C4rrrrrr       +7635 ;       FCALL   _sio0SndCommand
0016B2 A976            7636         ADDS.W  R7,#06H
                       7638 ; rs232cmd.c 2172                                               }
0016B4 FE06            7640         BR      _346
0016B4 FE06            7640         BR      _346
0016B6                 7641 _340:
                       7642 ; rs232cmd.c 2173                                               else
                       7643 ; rs232cmd.c 2174                                                       SCPIError = DataOutOfRang
                            e;
0016B6 964842rr        7645         MOV.B   ES,#SEG( _SCPIError )
0016BA 9908rrrr        7646         MOV.W   R0,#SOF( _SCPIError )
0016BE 9A080021        7647         MOV.W   [R0],#021H
                       7648 ; rs232cmd.c 2175                                       }       
                       7649 ; rs232cmd.c 2176                               }
                       7650 ; rs232cmd.c 2177                       }
                       7651 ; rs232cmd.c 2178               }
0016C2                 7653 _346:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 127

ADDR   CODE            LINE SOURCELINE
                       7654 ; rs232cmd.c 2179       }
0016C2 2F30            7656         POP.W   R4, R5
0016C4 D680            7658         RET
                       7660 ; rs232cmd.c 2180       
                       7661 ; rs232cmd.c 2181       /************************************************************************
                            **/
                       7662 ; rs232cmd.c 2182       /* GenlockGenCalibrateStore                                              
                                                                                                       RS232CMD.C */
                       7663 ; rs232cmd.c 2183       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7664 ; rs232cmd.c 2184       /* Author:              Kim Engedahl, DEV, 000525                        
                                                                                                                             
                                    */
                       7665 ; rs232cmd.c 2185       /* Revised:             000622                                           
                                                                                                                             
                                                                                    */
                       7666 ; rs232cmd.c 2186       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7667 ; rs232cmd.c 2187       /* Function:    Handle the genlock calibration                           
                                                                                                                    */
                       7668 ; rs232cmd.c 2188       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7669 ; rs232cmd.c 2189       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7670 ; rs232cmd.c 2190       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7671 ; rs232cmd.c 2191       /************************************************************************
                            **/
                       7672 ; rs232cmd.c 2192       void GenlockGenCalibrateStore( void)
                       7673 ; rs232cmd.c 2193       {
                       7674         ALIGN   1
                       7676         PUBLIC  _GenlockGenCalibrateStore
0016C6                 7677 _GenlockGenCalibrateStore:
                       7681 ; rs232cmd.c 2194               if ( CmdExecute && !SCPIError)
0016C6 964842rr        7683         MOV.B   ES,#SEG( _CmdExecute )
0016CA 9908rrrr        7684         MOV.W   R0,#SOF( _CmdExecute )
0016CE 8200            7685         MOV.B   R0L,[R0]
0016D0 F342            7686         BEQ     _358
0016D2 964842rr        7687         MOV.B   ES,#SEG( _SCPIError )
0016D6 9908rrrr        7688         MOV.W   R0,#SOF( _SCPIError )
0016DA 8A00            7689         MOV.W   R0,[R0]
0016DC F23C            7690         BNE     _358
                       7691 ; rs232cmd.c 2195               {
                       7692 ; rs232cmd.c 2196                       if ( CmdRequest)
0016DE 964842rr        7694         MOV.B   ES,#SEG( _CmdRequest )
0016E2 9908rrrr        7695         MOV.W   R0,#SOF( _CmdRequest )
0016E6 8200            7696         MOV.B   R0L,[R0]
0016E8 F306            7697         BEQ     _351
                       7698 ; rs232cmd.c 2197                                       SCPIError = SyntaxErr;
0016EA 964842rr        7700         MOV.B   ES,#SEG( _SCPIError )
0016EE 9908rrrr        7701         MOV.W   R0,#SOF( _SCPIError )
0016F2 BA03            7702         MOV.W   [R0],#03H
0016F4 D680            7703         RET
0016F4 D680            7703         RET
0016F6                 7704 _351:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 128

ADDR   CODE            LINE SOURCELINE
                       7705 ; rs232cmd.c 2198                       else
                       7706 ; rs232cmd.c 2199                       {
                       7707 ; rs232cmd.c 2200                               if ( ParCnt)
0016F6 964842rr        7709         MOV.B   ES,#SEG( _ParCnt )
0016FA 9908rrrr        7710         MOV.W   R0,#SOF( _ParCnt )
0016FE 8200            7711         MOV.B   R0L,[R0]
001700 F306            7712         BEQ     _352
                       7713 ; rs232cmd.c 2201                                       SCPIError = ParNotAllowed;
001702 964842rr        7715         MOV.B   ES,#SEG( _SCPIError )
001706 9908rrrr        7716         MOV.W   R0,#SOF( _SCPIError )
00170A BA06            7717         MOV.W   [R0],#06H
00170C D680            7718         RET
00170C D680            7718         RET
00170E                 7719 _352:
                       7720 ; rs232cmd.c 2202                               else
                       7721 ; rs232cmd.c 2203                               {
                       7722 ; rs232cmd.c 2204                                       if ( GenlockCalEnable)
00170E 964842rr        7724         MOV.B   ES,#SEG( _GenlockCalEnable )
001712 9908rrrr        7725         MOV.W   R0,#SOF( _GenlockCalEnable )
001716 8200            7726         MOV.B   R0L,[R0]
001718 F318            7727         BEQ     _353
                       7728 ; rs232cmd.c 2205                                       {
                       7729 ; rs232cmd.c 2206                                               Calibration.GenlockCalibration.DA
                            CUserValue = GenlockCalValue;
00171A 964842rr        7731         MOV.B   ES,#SEG( _GenlockCalValue )
00171E 9908rrrr        7732         MOV.W   R0,#SOF( _GenlockCalValue )
001722 8A00            7733         MOV.W   R0,[R0]
001724 964842rr        7734         MOV.B   ES,#SEG( _Calibration+120 )
001728 9918rrrr        7735         MOV.W   R1,#SOF( _Calibration+120 )
00172C 8A09            7736         MOV.W   [R1],R0
                       7737 ; rs232cmd.c 2207                                                               
                       7738 ; rs232cmd.c 2208                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
00172E 9918rrrr        7740         MOV.W   R1,#SEG( _Calibration )
001732 9908rrrr        7741         MOV.W   R0,#SOF( _Calibration )
001736 964842rr        7742         MOV.B   ES,#SEG( _CalibrationPtr )
00173A 9928rrrr        7743         MOV.W   R2,#SOF( _CalibrationPtr )
00173E 8A22            7744         MOV.W   R2,[R2]
001740 993800E0        7745         MOV.W   R3,#0E0H
                       7746         CALL    _NV_Store
001744 C4rrrrrr       +7746 ;       FCALL   _NV_Store
                       7747 ; rs232cmd.c 2209                                       }
001748 D680            7749         RET
001748 D680            7749         RET
00174A                 7750 _353:
                       7751 ; rs232cmd.c 2210                                       else
                       7752 ; rs232cmd.c 2211                                               SCPIError = ExecErr;             
                                                    
00174A 964842rr        7754         MOV.B   ES,#SEG( _SCPIError )
00174E 9908rrrr        7755         MOV.W   R0,#SOF( _SCPIError )
001752 9A08001D        7756         MOV.W   [R0],#01DH
                       7757 ; rs232cmd.c 2212                               }
                       7758 ; rs232cmd.c 2213                       }
                       7759 ; rs232cmd.c 2214               }
001756                 7761 _358:
                       7762 ; rs232cmd.c 2215       }
001756 D680            7764         RET
                       7766 ; rs232cmd.c 2216       
                       7767 ; rs232cmd.c 2217       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 129

ADDR   CODE            LINE SOURCELINE
                       7768 ; rs232cmd.c 2218       /* BBSuffix                                                              
                                                                                                                             
                                                               RS232CMD.C   */
                       7769 ; rs232cmd.c 2219       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7770 ; rs232cmd.c 2220       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                       7771 ; rs232cmd.c 2221       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7772 ; rs232cmd.c 2222       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7773 ; rs232cmd.c 2223       /* Function:    Get suffix of the Black Burst generator                  
                                                                                            */
                       7774 ; rs232cmd.c 2224       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7775 ; rs232cmd.c 2225       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7776 ; rs232cmd.c 2226       /* Updates:             Suffix                                           
                                                                                                                             
                                                                                                    */
                       7777 ; rs232cmd.c 2227       /************************************************************************
                            **/
                       7778 ; rs232cmd.c 2228       void BBGenSuffix( void)
                       7779 ; rs232cmd.c 2229       {
                       7780         ALIGN   1
                       7782         PUBLIC  _BBGenSuffix
001758                 7783 _BBGenSuffix:
                       7787 ; rs232cmd.c 2230               if ( NumSuffix > 3)
001758 964842rr        7789         MOV.B   ES,#SEG( _NumSuffix )
00175C 9908rrrr        7790         MOV.W   R0,#SOF( _NumSuffix )
001760 8A00            7791         MOV.W   R0,[R0]
001762 99040003        7792         CMP.W   R0,#03H
001766 F907            7793         BL      _359
                       7794 ; rs232cmd.c 2231                       SCPIError = HdrSuffixOutOfRange;
001768 964842rr        7796         MOV.B   ES,#SEG( _SCPIError )
00176C 9908rrrr        7797         MOV.W   R0,#SOF( _SCPIError )
001770 9A08000C        7798         MOV.W   [R0],#0CH
001774 D680            7799         RET
001774 D680            7799         RET
001776                 7800 _359:
                       7801 ; rs232cmd.c 2232               else
                       7802 ; rs232cmd.c 2233                       Suffix[0] = NumSuffix-1;
001776 A90F            7804         ADDS.W  R0,#0FH
001778 964842rr        7805         MOV.B   ES,#SEG( _Suffix )
00177C 9918rrrr        7806         MOV.W   R1,#SOF( _Suffix )
001780 8A09            7807         MOV.W   [R1],R0
001780 8A09            7807         MOV.W   [R1],R0
001782                 7808 _360:
                       7809 ; rs232cmd.c 2234       
                       7810 ; rs232cmd.c 2235       }
001782 D680            7812         RET
                       7814 ; rs232cmd.c 2236       
                       7815 ; rs232cmd.c 2237       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 130

ADDR   CODE            LINE SOURCELINE
                       7816 ; rs232cmd.c 2238       /* BBGen                                                                 
                                                                                                                             
                                                                         RS232CMD.C */
                       7817 ; rs232cmd.c 2239       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7818 ; rs232cmd.c 2240       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       7819 ; rs232cmd.c 2241       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7820 ; rs232cmd.c 2242       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7821 ; rs232cmd.c 2243       /* Function:    Handle the Black Burst command.                          
                                                                                                                    */
                       7822 ; rs232cmd.c 2244       /* Remarks:             Request only                                     
                                                                                                                             
                                                                                    */
                       7823 ; rs232cmd.c 2245       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7824 ; rs232cmd.c 2246       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       7825 ; rs232cmd.c 2247       /************************************************************************
                            **/
                       7826 ; rs232cmd.c 2248       void BBGen( void)
                       7827 ; rs232cmd.c 2249       {
                       7828         ALIGN   1
                       7830         PUBLIC  _BBGen
001784                 7831 _BBGen:
001784 0F30            7835         PUSH.W  R4, R5
                       7839 ; rs232cmd.c 2250               char code *str;
                       7840 ; rs232cmd.c 2251       
                       7841 ; rs232cmd.c 2252               if ( CmdExecute && !SCPIError)
001786 964842rr        7843         MOV.B   ES,#SEG( _CmdExecute )
00178A 9908rrrr        7844         MOV.W   R0,#SOF( _CmdExecute )
00178E 8200            7845         MOV.B   R0L,[R0]
                       7846         BEQ     _370
001790 F202           +7846 ;       BNE     _LG_404
001792 D50081         +7846 ;       JMP.L   _370
001792 D5008100       +7846 ;       JMP.L   _370
001796                +7846 _LG_404:
001796 964842rr        7847         MOV.B   ES,#SEG( _SCPIError )
00179A 9908rrrr        7848         MOV.W   R0,#SOF( _SCPIError )
00179E 8A00            7849         MOV.W   R0,[R0]
0017A0 F27A            7850         BNE     _370
                       7851 ; rs232cmd.c 2253               {
                       7852 ; rs232cmd.c 2254                       if ( !CmdRequest)
0017A2 964842rr        7854         MOV.B   ES,#SEG( _CmdRequest )
0017A6 9908rrrr        7855         MOV.W   R0,#SOF( _CmdRequest )
0017AA 8200            7856         MOV.B   R0L,[R0]
0017AC F206            7857         BNE     _363
                       7858 ; rs232cmd.c 2255                                       SCPIError = SyntaxErr;
0017AE 964842rr        7860         MOV.B   ES,#SEG( _SCPIError )
0017B2 9908rrrr        7861         MOV.W   R0,#SOF( _SCPIError )
0017B6 BA03            7862         MOV.W   [R0],#03H
0017B8 FE6E            7863         BR      _370
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 131

ADDR   CODE            LINE SOURCELINE
0017B8 FE6E            7863         BR      _370
0017BA                 7864 _363:
                       7865 ; rs232cmd.c 2256                       else
                       7866 ; rs232cmd.c 2257                       {
                       7867 ; rs232cmd.c 2258                               if ( ParCnt)
0017BA 964842rr        7869         MOV.B   ES,#SEG( _ParCnt )
0017BE 9908rrrr        7870         MOV.W   R0,#SOF( _ParCnt )
0017C2 8200            7871         MOV.B   R0L,[R0]
0017C4 F306            7872         BEQ     _364
                       7873 ; rs232cmd.c 2259                                       SCPIError = ParNotAllowed;
0017C6 964842rr        7875         MOV.B   ES,#SEG( _SCPIError )
0017CA 9908rrrr        7876         MOV.W   R0,#SOF( _SCPIError )
0017CE BA06            7877         MOV.W   [R0],#06H
0017D0 FE62            7878         BR      _370
0017D0 FE62            7878         BR      _370
0017D2                 7879 _364:
                       7880 ; rs232cmd.c 2260                               else
                       7881 ; rs232cmd.c 2261                               {
                       7882 ; rs232cmd.c 2262                                       str = SystemPar[BBSetup[Suffix[0]].System
                            ].LongName;
0017D2 964842rr        7884         MOV.B   ES,#SEG( _Suffix )
0017D6 9908rrrr        7885         MOV.W   R0,#SOF( _Suffix )
0017DA 8A00            7886         MOV.W   R0,[R0]
0017DC D903            7887         ASL.W   R0,#03H
0017DE B910            7888         MOVS.W  R1,#00H
0017E0 964842rr        7889         MOV.B   ES,#SEG( _BBSetup )
0017E4 8500rrrr        7890         MOV.B   R0L,[R0+SOF( _BBSetup )]
0017E8 E8000C          7891         MULU.B  R0L,#0CH
0017EB 8920            7892         MOV.W   R2,R0
0017ED B930            7893         MOVS.W  R3,#00H
0017EF 9918rrrr        7894         MOV.W   R1,#SEG( _SystemPar )
0017F3 9908rrrr        7895         MOV.W   R0,#SOF( _SystemPar )
0017F7 0902            7896         ADD.W   R0,R2
0017F9 1913            7897         ADDC.W  R1,R3
0017FB 862C43          7898         MOV.B   CS,R1L
0017FE 8820            7899         MOVC.W  R2,[R0+]
001800 99040000        7900         CMP.W   R0,#00H
001804 F202            7901         BNE     _371
001806 A64143          7902         ADDS.B  CS,#01H
001806 A6414300        7902         ADDS.B  CS,#01H
00180A                 7903 _371:
00180A 8830            7904         MOVC.W  R3,[R0+]
00180C 8953            7905         MOV.W   R5,R3
00180E 8942            7906         MOV.W   R4,R2
                       7908 ; rs232cmd.c 2263       
                       7909 ; rs232cmd.c 2264                                       while ( *str)
001810 866C43          7911         MOV.B   CS,R3L
001813 8062            7912         MOVC.B  R3L,[R2+]
001815 F312            7913         BEQ     _366
001815 F31200          7913         BEQ     _366
001818                 7914 _365:
                       7915 ; rs232cmd.c 2265                                               rs232putchar( *str++);
001818 8915            7917         MOV.W   R1,R5
00181A 8904            7918         MOV.W   R0,R4
00181C 862C43          7919         MOV.B   CS,R1L
00181F 8020            7920         MOVC.B  R1L,[R0+]
001821 8102            7921         MOV.B   R0L,R1L
                       7922         CALL    _rs232putchar
001823 C4rrrrrr       +7922 ;       FCALL   _rs232putchar
001827 99400001        7923         ADD.W   R4,#01H
00182B 99510000        7924         ADDC.W  R5,#00H
00182F 8915            7928         MOV.W   R1,R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 132

ADDR   CODE            LINE SOURCELINE
001831 8904            7929         MOV.W   R0,R4
001833 862C43          7930         MOV.B   CS,R1L
001836 8020            7931         MOVC.B  R1L,[R0+]
001838 F2EF            7932         BNE     _365
00183A                 7934 _366:
                       7935 ; rs232cmd.c 2266       
                       7936 ; rs232cmd.c 2267                                       rs232putchar( ',');
00183A 91082C          7938         MOV.B   R0L,#02CH
                       7939         CALL    _rs232putchar
00183D C4rrrrrr       +7939 ;       FCALL   _rs232putchar
                       7940 ; rs232cmd.c 2268       
                       7941 ; rs232cmd.c 2269                                       PrintSamplesToFLT( BBSetup[Suffix[0]].Sys
                            tem, BBSetup[Suffix[0]].Delay);
001841 964842rr        7943         MOV.B   ES,#SEG( _Suffix )
001845 9928rrrr        7944         MOV.W   R2,#SOF( _Suffix )
001849 8A22            7945         MOV.W   R2,[R2]
00184B D923            7946         ASL.W   R2,#03H
00184D 8902            7947         MOV.W   R0,R2
00184F B910            7948         MOVS.W  R1,#00H
001851 964842rr        7949         MOV.B   ES,#SEG( _BBSetup )
001855 8500rrrr        7950         MOV.B   R0L,[R0+SOF( _BBSetup )]
001859 B930            7951         MOVS.W  R3,#00H
00185B 964842rr        7952         MOV.B   ES,#SEG( _BBSetup+2 )
00185F 8D32rrrr        7953         MOV.W   R3,[R2+SOF( _BBSetup+4 )]
001863 8D22rrrr        7954         MOV.W   R2,[R2+SOF( _BBSetup+2 )]
001867 C52623          7955         CALL    _PrintSamplesToFLT
                       7956 ; rs232cmd.c 2270       
                       7957 ; rs232cmd.c 2271                                       rs232printf( 6, ",%d\n", BBSetup[Suffix[0
                            ]].ScHPhase);
00186A B906            7959         MOV.W   R0,#06H
00186C 964842rr        7960         MOV.B   ES,#SEG( _Suffix )
001870 9918rrrr        7961         MOV.W   R1,#SOF( _Suffix )
001874 8A11            7962         MOV.W   R1,[R1]
001876 D913            7963         ASL.W   R1,#03H
001878 8921            7964         MOV.W   R2,R1
00187A B930            7965         MOVS.W  R3,#00H
00187C 964842rr        7966         MOV.B   ES,#SEG( _BBSetup+6 )
001880 8D12rrrr        7967         MOV.W   R1,[R2+SOF( _BBSetup+6 )]
001884 0F02            7968         PUSH.W  R1
001886 9938rrrr        7970         MOV.W   R3,#SEG( _362 )
00188A 9928rrrr        7971         MOV.W   R2,#SOF( _362 )
00188E 0F0C            7972         PUSH.W  R2, R3
                       7974         CALL    _rs232printf
001890 C4rrrrrr       +7974 ;       FCALL   _rs232printf
001894 A976            7975         ADDS.W  R7,#06H
                       7977 ; rs232cmd.c 2272                               }
                       7978 ; rs232cmd.c 2273                       }
                       7979 ; rs232cmd.c 2274               }
001896                 7981 _370:
                       7982 ; rs232cmd.c 2275       }
001896 2F30            7984         POP.W   R4, R5
001898 D680            7986         RET
                       7989 ; rs232cmd.c 2276       
                       7990 ; rs232cmd.c 2277       /************************************************************************
                            **/
                       7991 ; rs232cmd.c 2278       /* BBGenSystem                                                           
                                                                                                                             
                                             RS232CMD.C     */
                       7992 ; rs232cmd.c 2279       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 133

ADDR   CODE            LINE SOURCELINE
                       7993 ; rs232cmd.c 2280       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       7994 ; rs232cmd.c 2281       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       7995 ; rs232cmd.c 2282       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       7996 ; rs232cmd.c 2283       /* Function:    Handle the Black Burst system-command.                   
                                                                                            */
                       7997 ; rs232cmd.c 2284       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       7998 ; rs232cmd.c 2285       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       7999 ; rs232cmd.c 2286       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8000 ; rs232cmd.c 2287       /************************************************************************
                            **/
                       8001 ; rs232cmd.c 2288       void BBGenSystem( void)
                       8002 ; rs232cmd.c 2289       {
                       8003         ALIGN   1
                       8005         PUBLIC  _BBGenSystem
00189A                 8006 _BBGenSystem:
00189A 0F30            8010         PUSH.W  R4, R5
                       8016 ; rs232cmd.c 2290               int system;
                       8017 ; rs232cmd.c 2291               char code *str;
                       8018 ; rs232cmd.c 2292       
                       8019 ; rs232cmd.c 2293               if ( CmdExecute && !SCPIError)
00189C 964842rr        8021         MOV.B   ES,#SEG( _CmdExecute )
0018A0 9908rrrr        8022         MOV.W   R0,#SOF( _CmdExecute )
0018A4 8200            8023         MOV.B   R0L,[R0]
0018A6 F37B            8024         BEQ     _383
0018A8 964842rr        8025         MOV.B   ES,#SEG( _SCPIError )
0018AC 9908rrrr        8026         MOV.W   R0,#SOF( _SCPIError )
0018B0 8A00            8027         MOV.W   R0,[R0]
0018B2 F275            8028         BNE     _383
                       8029 ; rs232cmd.c 2294               {
                       8030 ; rs232cmd.c 2295                       if ( CmdRequest)
0018B4 964842rr        8032         MOV.B   ES,#SEG( _CmdRequest )
0018B8 9908rrrr        8033         MOV.W   R0,#SOF( _CmdRequest )
0018BC 8200            8034         MOV.B   R0L,[R0]
0018BE F345            8035         BEQ     _375
                       8036 ; rs232cmd.c 2296                       {
                       8037 ; rs232cmd.c 2297                               if ( ParCnt)
0018C0 964842rr        8039         MOV.B   ES,#SEG( _ParCnt )
0018C4 9908rrrr        8040         MOV.W   R0,#SOF( _ParCnt )
0018C8 8200            8041         MOV.B   R0L,[R0]
0018CA F306            8042         BEQ     _372
                       8043 ; rs232cmd.c 2298                                       SCPIError = ParNotAllowed;
0018CC 964842rr        8045         MOV.B   ES,#SEG( _SCPIError )
0018D0 9908rrrr        8046         MOV.W   R0,#SOF( _SCPIError )
0018D4 BA06            8047         MOV.W   [R0],#06H
0018D6 FE63            8048         BR      _383
0018D6 FE63            8048         BR      _383
0018D8                 8049 _372:
                       8050 ; rs232cmd.c 2299                               else
                       8051 ; rs232cmd.c 2300                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 134

ADDR   CODE            LINE SOURCELINE
                       8052 ; rs232cmd.c 2301                                       str = SystemPar[BBSetup[Suffix[0]].System
                            ].LongName;
0018D8 964842rr        8054         MOV.B   ES,#SEG( _Suffix )
0018DC 9908rrrr        8055         MOV.W   R0,#SOF( _Suffix )
0018E0 8A00            8056         MOV.W   R0,[R0]
0018E2 D903            8057         ASL.W   R0,#03H
0018E4 B910            8058         MOVS.W  R1,#00H
0018E6 964842rr        8059         MOV.B   ES,#SEG( _BBSetup )
0018EA 8500rrrr        8060         MOV.B   R0L,[R0+SOF( _BBSetup )]
0018EE E8000C          8061         MULU.B  R0L,#0CH
0018F1 8920            8062         MOV.W   R2,R0
0018F3 B930            8063         MOVS.W  R3,#00H
0018F5 9918rrrr        8064         MOV.W   R1,#SEG( _SystemPar )
0018F9 9908rrrr        8065         MOV.W   R0,#SOF( _SystemPar )
0018FD 0902            8066         ADD.W   R0,R2
0018FF 1913            8067         ADDC.W  R1,R3
001901 862C43          8068         MOV.B   CS,R1L
001904 8820            8069         MOVC.W  R2,[R0+]
001906 99040000        8070         CMP.W   R0,#00H
00190A F202            8071         BNE     _384
00190C A64143          8072         ADDS.B  CS,#01H
00190C A6414300        8072         ADDS.B  CS,#01H
001910                 8073 _384:
001910 8830            8074         MOVC.W  R3,[R0+]
001912 8953            8075         MOV.W   R5,R3
001914 8942            8076         MOV.W   R4,R2
                       8078 ; rs232cmd.c 2302       
                       8079 ; rs232cmd.c 2303                                       while ( *str)
001916 866C43          8081         MOV.B   CS,R3L
001919 8062            8082         MOVC.B  R3L,[R2+]
00191B F312            8083         BEQ     _374
00191B F31200          8083         BEQ     _374
00191E                 8084 _373:
                       8085 ; rs232cmd.c 2304                                               rs232putchar( *str++);
00191E 8915            8087         MOV.W   R1,R5
001920 8904            8088         MOV.W   R0,R4
001922 862C43          8089         MOV.B   CS,R1L
001925 8020            8090         MOVC.B  R1L,[R0+]
001927 8102            8091         MOV.B   R0L,R1L
                       8092         CALL    _rs232putchar
001929 C4rrrrrr       +8092 ;       FCALL   _rs232putchar
00192D 99400001        8093         ADD.W   R4,#01H
001931 99510000        8094         ADDC.W  R5,#00H
001935 8915            8098         MOV.W   R1,R5
001937 8904            8099         MOV.W   R0,R4
001939 862C43          8100         MOV.B   CS,R1L
00193C 8020            8101         MOVC.B  R1L,[R0+]
00193E F2EF            8102         BNE     _373
001940                 8104 _374:
                       8105 ; rs232cmd.c 2305       
                       8106 ; rs232cmd.c 2306                                       rs232putchar('\n');
001940 91080A          8108         MOV.B   R0L,#0AH
                       8109         CALL    _rs232putchar
001943 C4rrrrrr       +8109 ;       FCALL   _rs232putchar
                       8110 ; rs232cmd.c 2307                               }
                       8111 ; rs232cmd.c 2308                       }
001947 FE2B            8113         BR      _383
001947 FE2B00          8113         BR      _383
00194A                 8114 _375:
                       8115 ; rs232cmd.c 2309                       else
                       8116 ; rs232cmd.c 2310                       {
                       8117 ; rs232cmd.c 2311                               if ( ParCnt != 1)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 135

ADDR   CODE            LINE SOURCELINE
00194A 964842rr        8119         MOV.B   ES,#SEG( _ParCnt )
00194E 9908rrrr        8120         MOV.W   R0,#SOF( _ParCnt )
001952 8200            8121         MOV.B   R0L,[R0]
001954 910401          8122         CMP.B   R0L,#01H
001957 F307            8123         BEQ     _376
                       8124 ; rs232cmd.c 2312                                       SCPIError = SyntaxErr;
001959 964842rr        8126         MOV.B   ES,#SEG( _SCPIError )
00195D 9908rrrr        8127         MOV.W   R0,#SOF( _SCPIError )
001961 BA03            8128         MOV.W   [R0],#03H
001963 FE1D            8129         BR      _383
001963 FE1D00          8129         BR      _383
001966                 8130 _376:
                       8131 ; rs232cmd.c 2313                               else
                       8132 ; rs232cmd.c 2314                               {
                       8133 ; rs232cmd.c 2315                                       system = FindParameter( Cmd, SystemPar);
001966 9918rrrr        8135         MOV.W   R1,#SEG( _Cmd )
00196A 9908rrrr        8136         MOV.W   R0,#SOF( _Cmd )
00196E 9938rrrr        8137         MOV.W   R3,#SEG( _SystemPar )
001972 9928rrrr        8138         MOV.W   R2,#SOF( _SystemPar )
001976 C52314          8139         CALL    _FindParameter
                       8141 ; rs232cmd.c 2316       
                       8142 ; rs232cmd.c 2317                                       if ( system > -1)
001979 8910            8144         MOV.W   R1,R0
00197B 9914FFFF        8145         CMP.W   R1,#0FFFFH
00197F FD09            8148         BLE     _377
                       8149 ; rs232cmd.c 2318                                               SetBBSystem( Suffix[0], system);
001981 964842rr        8151         MOV.B   ES,#SEG( _Suffix )
001985 9908rrrr        8152         MOV.W   R0,#SOF( _Suffix )
001989 8A00            8153         MOV.W   R0,[R0]
                       8154         CALL    _SetBBSystem
00198B C4rrrrrr       +8154 ;       FCALL   _SetBBSystem
00198F FE07            8156         BR      _383
00198F FE0700          8156         BR      _383
001992                 8157 _377:
                       8158 ; rs232cmd.c 2319                                       else
                       8159 ; rs232cmd.c 2320                                               SCPIError = DataOutOfRange;
001992 964842rr        8161         MOV.B   ES,#SEG( _SCPIError )
001996 9908rrrr        8162         MOV.W   R0,#SOF( _SCPIError )
00199A 9A080021        8163         MOV.W   [R0],#021H
                       8164 ; rs232cmd.c 2321                               }
                       8165 ; rs232cmd.c 2322                       }
                       8166 ; rs232cmd.c 2323               }
00199E                 8168 _383:
                       8169 ; rs232cmd.c 2324       }
00199E 2F30            8171         POP.W   R4, R5
0019A0 D680            8173         RET
                       8176 ; rs232cmd.c 2325       
                       8177 ; rs232cmd.c 2326       /************************************************************************
                            **/
                       8178 ; rs232cmd.c 2327       /* BBGenDelay                                                            
                                                                                                                             
                                                     RS232CMD.C     */
                       8179 ; rs232cmd.c 2328       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8180 ; rs232cmd.c 2329       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       8181 ; rs232cmd.c 2330       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */                              
                       8182 ; rs232cmd.c 2331       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 136

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                       8183 ; rs232cmd.c 2332       /* Function:    Handle the Black Burst timing command.                   
                                                                                            */
                       8184 ; rs232cmd.c 2333       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       8185 ; rs232cmd.c 2334       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8186 ; rs232cmd.c 2335       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8187 ; rs232cmd.c 2336       /************************************************************************
                            **/
                       8188 ; rs232cmd.c 2337       void BBGenDelay( void)
                       8189 ; rs232cmd.c 2338       {
                       8190         ALIGN   1
                       8192         PUBLIC  _BBGenDelay
0019A2                 8193 _BBGenDelay:
0019A2 0F30            8197         PUSH.W  R4, R5
0019A4 A978            8199         ADDS.W  R7,#08H
                       8206 ; rs232cmd.c 2339               int field, line;
                       8207 ; rs232cmd.c 2340               float offset;
                       8208 ; rs232cmd.c 2341               long samples;
                       8209 ; rs232cmd.c 2342       
                       8210 ; rs232cmd.c 2343               if ( CmdExecute && !SCPIError)
0019A6 964842rr        8212         MOV.B   ES,#SEG( _CmdExecute )
0019AA 9908rrrr        8213         MOV.W   R0,#SOF( _CmdExecute )
0019AE 8200            8214         MOV.B   R0L,[R0]
                       8215         BEQ     _397
0019B0 F202           +8215 ;       BNE     _LG_436
0019B2 D5008E         +8215 ;       JMP.L   _397
0019B2 D5008E00       +8215 ;       JMP.L   _397
0019B6                +8215 _LG_436:
0019B6 964842rr        8216         MOV.B   ES,#SEG( _SCPIError )
0019BA 9908rrrr        8217         MOV.W   R0,#SOF( _SCPIError )
0019BE 8A00            8218         MOV.W   R0,[R0]
                       8219         BNE     _397
0019C0 F302           +8219 ;       BEQ     _LG_438
0019C2 D50086         +8219 ;       JMP.L   _397
0019C2 D5008600       +8219 ;       JMP.L   _397
0019C6                +8219 _LG_438:
                       8220 ; rs232cmd.c 2344               {
                       8221 ; rs232cmd.c 2345                       if ( CmdRequest)
0019C6 964842rr        8223         MOV.B   ES,#SEG( _CmdRequest )
0019CA 9908rrrr        8224         MOV.W   R0,#SOF( _CmdRequest )
0019CE 8200            8225         MOV.B   R0L,[R0]
0019D0 F327            8226         BEQ     _388
                       8227 ; rs232cmd.c 2346                       {
                       8228 ; rs232cmd.c 2347                               if ( ParCnt)
0019D2 964842rr        8230         MOV.B   ES,#SEG( _ParCnt )
0019D6 9908rrrr        8231         MOV.W   R0,#SOF( _ParCnt )
0019DA 8200            8232         MOV.B   R0L,[R0]
0019DC F306            8233         BEQ     _387
                       8234 ; rs232cmd.c 2348                                       SCPIError = ParNotAllowed;
0019DE 964842rr        8236         MOV.B   ES,#SEG( _SCPIError )
0019E2 9908rrrr        8237         MOV.W   R0,#SOF( _SCPIError )
0019E6 BA06            8238         MOV.W   [R0],#06H
0019E8 FE73            8239         BR      _397
0019E8 FE73            8239         BR      _397
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 137

ADDR   CODE            LINE SOURCELINE
0019EA                 8240 _387:
                       8241 ; rs232cmd.c 2349                               else
                       8242 ; rs232cmd.c 2350                               {
                       8243 ; rs232cmd.c 2351                                       PrintSamplesToFLT( BBSetup[Suffix[0]].Sys
                            tem, BBSetup[Suffix[0]].Delay);
0019EA 964842rr        8245         MOV.B   ES,#SEG( _Suffix )
0019EE 9908rrrr        8246         MOV.W   R0,#SOF( _Suffix )
0019F2 8A00            8247         MOV.W   R0,[R0]
0019F4 8910            8248         MOV.W   R1,R0
0019F6 D913            8249         ASL.W   R1,#03H
0019F8 8921            8250         MOV.W   R2,R1
0019FA B930            8251         MOVS.W  R3,#00H
0019FC 964842rr        8252         MOV.B   ES,#SEG( _BBSetup )
001A00 8502rrrr        8253         MOV.B   R0L,[R2+SOF( _BBSetup )]
001A04 8921            8254         MOV.W   R2,R1
001A06 B930            8255         MOVS.W  R3,#00H
001A08 964842rr        8256         MOV.B   ES,#SEG( _BBSetup+2 )
001A0C 8D32rrrr        8257         MOV.W   R3,[R2+SOF( _BBSetup+4 )]
001A10 8D22rrrr        8258         MOV.W   R2,[R2+SOF( _BBSetup+2 )]
001A14 C5254D          8259         CALL    _PrintSamplesToFLT
                       8260 ; rs232cmd.c 2352       
                       8261 ; rs232cmd.c 2353                                       rs232putchar ( '\n');
001A17 91080A          8263         MOV.B   R0L,#0AH
                       8264         CALL    _rs232putchar
001A1A C4rrrrrr       +8264 ;       FCALL   _rs232putchar
                       8265 ; rs232cmd.c 2354                               }
                       8266 ; rs232cmd.c 2355                       }
001A1E FE58            8268         BR      _397
001A1E FE58            8268         BR      _397
001A20                 8269 _388:
                       8270 ; rs232cmd.c 2356                       else
                       8271 ; rs232cmd.c 2357                       {
                       8272 ; rs232cmd.c 2358                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001A20 964842rr        8274         MOV.B   ES,#SEG( _ParCnt )
001A24 9908rrrr        8275         MOV.W   R0,#SOF( _ParCnt )
001A28 8200            8276         MOV.B   R0L,[R0]
001A2A 910403          8277         CMP.B   R0L,#03H
001A2D F21F            8278         BNE     _389
001A2F 9168rr          8279         MOV.B   R3L,#SEG( __lc_bs )
001A32 7177            8280         XOR.B   R3H,R3H
001A34 8927            8281         MOV.W   R2,R7
001A36 91A8rr          8282         MOV.B   R5L,#SEG( __lc_bs )
001A39 71BB            8283         XOR.B   R5H,R5H
001A3B 404702          8284         LEA     R4,R7+2
001A3E 9128rr          8285         MOV.B   R1L,#SEG( __lc_bs )
001A41 7133            8286         XOR.B   R1H,R1H
001A43 400704          8287         LEA     R0,R7+4
001A46 0F03            8288         PUSH.W  R0, R1
001A48 0F30            8290         PUSH.W  R4, R5
001A4A 0F0C            8292         PUSH.W  R2, R3
001A4C 9938rrrr        8294         MOV.W   R3,#SEG( _295 )
001A50 9928rrrr        8295         MOV.W   R2,#SOF( _295 )
001A54 0F0C            8296         PUSH.W  R2, R3
001A56 9918rrrr        8298         MOV.W   R1,#SEG( _Cmd )
001A5A 9908rrrr        8299         MOV.W   R0,#SOF( _Cmd )
                       8300         CALL    _sscanf
001A5E C4rrrrrr       +8300 ;       FCALL   _sscanf
001A62 99700010        8301         ADD.W   R7,#010H
001A66 99040003        8303         CMP.W   R0,#03H
001A6A F306            8304         BEQ     _390
001A6A F306            8304         BEQ     _390
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 138

ADDR   CODE            LINE SOURCELINE
001A6C                 8305 _389:
                       8306 ; rs232cmd.c 2359                                       SCPIError = SyntaxErr;
001A6C 964842rr        8308         MOV.B   ES,#SEG( _SCPIError )
001A70 9908rrrr        8309         MOV.W   R0,#SOF( _SCPIError )
001A74 BA03            8310         MOV.W   [R0],#03H
001A76 FE2C            8311         BR      _397
001A76 FE2C            8311         BR      _397
001A78                 8312 _390:
                       8313 ; rs232cmd.c 2360                               else
                       8314 ; rs232cmd.c 2361                               {
                       8315 ; rs232cmd.c 2362                                       if (( samples = FLTToSamples( BBSetup[Suf
                            fix[0]].System, field, line, offset)) == -1)
001A78 964842rr        8317         MOV.B   ES,#SEG( _Suffix )
001A7C 9908rrrr        8318         MOV.W   R0,#SOF( _Suffix )
001A80 8A00            8319         MOV.W   R0,[R0]
001A82 D903            8320         ASL.W   R0,#03H
001A84 B910            8321         MOVS.W  R1,#00H
001A86 964842rr        8322         MOV.B   ES,#SEG( _BBSetup )
001A8A 8500rrrr        8323         MOV.B   R0L,[R0+SOF( _BBSetup )]
001A8E 8A17            8324         MOV.W   R1,[R7]
001A90 8C2702          8325         MOV.W   R2,[R7+2]
001A93 8C5706          8326         MOV.W   R5,[R7+6]
001A96 8C4704          8327         MOV.W   R4,[R7+4]
001A99 0F30            8328         PUSH.W  R4, R5
001A9B C522CE          8330         CALL    _FLTToSamples
001A9E A974            8331         ADDS.W  R7,#04H
001AA0 8931            8333         MOV.W   R3,R1
001AA2 8920            8334         MOV.W   R2,R0
001AA4 8913            8335         MOV.W   R1,R3
001AA6 8902            8336         MOV.W   R0,R2
001AA8 9914FFFF        8337         CMP.W   R1,#0FFFFH
001AAC F202            8338         BNE     _400
001AAE 9904FFFF        8339         CMP.W   R0,#0FFFFH
001AAE 9904FFFF        8339         CMP.W   R0,#0FFFFH
001AB2                 8340 _400:
001AB2 F207            8341         BNE     _391
                       8342 ; rs232cmd.c 2363                                               SCPIError = ExecErr;
001AB4 964842rr        8344         MOV.B   ES,#SEG( _SCPIError )
001AB8 9908rrrr        8345         MOV.W   R0,#SOF( _SCPIError )
001ABC 9A08001D        8346         MOV.W   [R0],#01DH
001AC0 FE07            8347         BR      _397
001AC0 FE07            8347         BR      _397
001AC2                 8348 _391:
                       8349 ; rs232cmd.c 2364                                       else
                       8350 ; rs232cmd.c 2365                                               SetBBDelay( Suffix[0], (UL) sampl
                            es);
001AC2 964842rr        8352         MOV.B   ES,#SEG( _Suffix )
001AC6 9908rrrr        8353         MOV.W   R0,#SOF( _Suffix )
001ACA 8A00            8354         MOV.W   R0,[R0]
                       8355         CALL    _SetBBDelay
001ACC C4rrrrrr       +8355 ;       FCALL   _SetBBDelay
                       8356 ; rs232cmd.c 2366                               }
                       8357 ; rs232cmd.c 2367                       }
                       8358 ; rs232cmd.c 2368               }
001AD0                 8360 _397:
                       8361 ; rs232cmd.c 2369       }
001AD0 99700008        8363         ADD.W   R7,#08H
001AD4 2F30            8365         POP.W   R4, R5
001AD6 D680            8367         RET
                       8369 ; rs232cmd.c 2370       
                       8370 ; rs232cmd.c 2371       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 139

ADDR   CODE            LINE SOURCELINE
                       8371 ; rs232cmd.c 2372       /* BBGenScHPhase                                                         
                                                                                                                             
                                                     RS232CMD.C     */
                       8372 ; rs232cmd.c 2373       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8373 ; rs232cmd.c 2374       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */                      
                       8374 ; rs232cmd.c 2375       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       8375 ; rs232cmd.c 2376       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8376 ; rs232cmd.c 2377       /* Function:    Handle the Black Burst ScH-Phase command.                
                                                                                            */
                       8377 ; rs232cmd.c 2378       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       8378 ; rs232cmd.c 2379       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8379 ; rs232cmd.c 2380       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8380 ; rs232cmd.c 2381       /************************************************************************
                            **/
                       8381 ; rs232cmd.c 2382       void BBGenScHPhase( void)
                       8382 ; rs232cmd.c 2383       {
                       8383         ALIGN   1
                       8385         PUBLIC  _BBGenScHPhase
001AD8                 8386 _BBGenScHPhase:
001AD8 A97E            8390         ADDS.W  R7,#0EH
                       8393 ; rs232cmd.c 2384               int schphase;
                       8394 ; rs232cmd.c 2385       
                       8395 ; rs232cmd.c 2386               if ( CmdExecute && !SCPIError)
001ADA 964842rr        8397         MOV.B   ES,#SEG( _CmdExecute )
001ADE 9908rrrr        8398         MOV.W   R0,#SOF( _CmdExecute )
001AE2 8200            8399         MOV.B   R0L,[R0]
001AE4 F366            8400         BEQ     _412
001AE6 964842rr        8401         MOV.B   ES,#SEG( _SCPIError )
001AEA 9908rrrr        8402         MOV.W   R0,#SOF( _SCPIError )
001AEE 8A00            8403         MOV.W   R0,[R0]
001AF0 F260            8404         BNE     _412
                       8405 ; rs232cmd.c 2387               {
                       8406 ; rs232cmd.c 2388                       if ( CmdRequest)
001AF2 964842rr        8408         MOV.B   ES,#SEG( _CmdRequest )
001AF6 9908rrrr        8409         MOV.W   R0,#SOF( _CmdRequest )
001AFA 8200            8410         MOV.B   R0L,[R0]
001AFC F323            8411         BEQ     _402
                       8412 ; rs232cmd.c 2389                       {
                       8413 ; rs232cmd.c 2390                               if ( ParCnt)
001AFE 964842rr        8415         MOV.B   ES,#SEG( _ParCnt )
001B02 9908rrrr        8416         MOV.W   R0,#SOF( _ParCnt )
001B06 8200            8417         MOV.B   R0L,[R0]
001B08 F306            8418         BEQ     _401
                       8419 ; rs232cmd.c 2391                                       SCPIError = ParNotAllowed;
001B0A 964842rr        8421         MOV.B   ES,#SEG( _SCPIError )
001B0E 9908rrrr        8422         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 140

ADDR   CODE            LINE SOURCELINE
001B12 BA06            8423         MOV.W   [R0],#06H
001B14 FE4E            8424         BR      _412
001B14 FE4E            8424         BR      _412
001B16                 8425 _401:
                       8426 ; rs232cmd.c 2392                               else
                       8427 ; rs232cmd.c 2393                                       rs232printf( 6, "%d\n", BBSetup[Suffix[0]
                            ].ScHPhase);
001B16 B906            8429         MOV.W   R0,#06H
001B18 964842rr        8430         MOV.B   ES,#SEG( _Suffix )
001B1C 9918rrrr        8431         MOV.W   R1,#SOF( _Suffix )
001B20 8A11            8432         MOV.W   R1,[R1]
001B22 D913            8433         ASL.W   R1,#03H
001B24 8921            8434         MOV.W   R2,R1
001B26 B930            8435         MOVS.W  R3,#00H
001B28 964842rr        8436         MOV.B   ES,#SEG( _BBSetup+6 )
001B2C 8D12rrrr        8437         MOV.W   R1,[R2+SOF( _BBSetup+6 )]
001B30 0F02            8438         PUSH.W  R1
001B32 9938rrrr        8440         MOV.W   R3,#SEG( _9 )
001B36 9928rrrr        8441         MOV.W   R2,#SOF( _9 )
001B3A 0F0C            8442         PUSH.W  R2, R3
                       8444         CALL    _rs232printf
001B3C C4rrrrrr       +8444 ;       FCALL   _rs232printf
001B40 A976            8445         ADDS.W  R7,#06H
                       8447 ; rs232cmd.c 2394                       }
001B42 FE37            8449         BR      _412
001B42 FE37            8449         BR      _412
001B44                 8450 _402:
                       8451 ; rs232cmd.c 2395                       else
                       8452 ; rs232cmd.c 2396                       {
                       8453 ; rs232cmd.c 2397                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &schph
                            ase) != 1))
001B44 964842rr        8455         MOV.B   ES,#SEG( _ParCnt )
001B48 9908rrrr        8456         MOV.W   R0,#SOF( _ParCnt )
001B4C 8200            8457         MOV.B   R0L,[R0]
001B4E 910401          8458         CMP.B   R0L,#01H
001B51 F215            8459         BNE     _403
001B53 9918rrrr        8460         MOV.W   R1,#SEG( _Cmd )
001B57 9908rrrr        8461         MOV.W   R0,#SOF( _Cmd )
001B5B 9168rr          8462         MOV.B   R3L,#SEG( __lc_bs )
001B5E 7177            8463         XOR.B   R3H,R3H
001B60 8927            8464         MOV.W   R2,R7
001B62 0F0C            8465         PUSH.W  R2, R3
001B64 9938rrrr        8467         MOV.W   R3,#SEG( _10 )
001B68 9928rrrr        8468         MOV.W   R2,#SOF( _10 )
001B6C 0F0C            8469         PUSH.W  R2, R3
                       8471         CALL    _sscanf
001B6E C4rrrrrr       +8471 ;       FCALL   _sscanf
001B72 99700008        8472         ADD.W   R7,#08H
001B76 99040001        8474         CMP.W   R0,#01H
001B7A F306            8475         BEQ     _404
001B7A F306            8475         BEQ     _404
001B7C                 8476 _403:
                       8477 ; rs232cmd.c 2398                                       SCPIError = SyntaxErr;
001B7C 964842rr        8479         MOV.B   ES,#SEG( _SCPIError )
001B80 9908rrrr        8480         MOV.W   R0,#SOF( _SCPIError )
001B84 BA03            8481         MOV.W   [R0],#03H
001B86 FE15            8482         BR      _412
001B86 FE15            8482         BR      _412
001B88                 8483 _404:
                       8484 ; rs232cmd.c 2399                               else
                       8485 ; rs232cmd.c 2400                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 141

ADDR   CODE            LINE SOURCELINE
                       8486 ; rs232cmd.c 2401                                       if (( schphase < ScHPhaseLow) || ( schpha
                            se > ScHPhaseHigh))
001B88 9A74FF4D        8488         CMP.W   [R7],#0FF4DH
001B8C FB03            8489         BLT     _405
001B8E 9A7400B4        8490         CMP.W   [R7],#0B4H
001B92 FD07            8491         BLE     _406
001B92 FD07            8491         BLE     _406
001B94                 8492 _405:
                       8493 ; rs232cmd.c 2402                                               SCPIError = DataOutOfRange;
001B94 964842rr        8495         MOV.B   ES,#SEG( _SCPIError )
001B98 9908rrrr        8496         MOV.W   R0,#SOF( _SCPIError )
001B9C 9A080021        8497         MOV.W   [R0],#021H
001BA0 FE08            8498         BR      _412
001BA0 FE08            8498         BR      _412
001BA2                 8499 _406:
                       8500 ; rs232cmd.c 2403                                       else
                       8501 ; rs232cmd.c 2404                                               SetBBScHPhase( Suffix[0], schphas
                            e);
001BA2 964842rr        8503         MOV.B   ES,#SEG( _Suffix )
001BA6 9908rrrr        8504         MOV.W   R0,#SOF( _Suffix )
001BAA 8A00            8505         MOV.W   R0,[R0]
001BAC 8A17            8506         MOV.W   R1,[R7]
                       8507         CALL    _SetBBScHPhase
001BAE C4rrrrrr       +8507 ;       FCALL   _SetBBScHPhase
                       8508 ; rs232cmd.c 2405                               }
                       8509 ; rs232cmd.c 2406                       }
                       8510 ; rs232cmd.c 2407               }
001BB2                 8512 _412:
                       8513 ; rs232cmd.c 2408       }
001BB2 A972            8515         ADDS.W  R7,#02H
001BB4 D680            8517         RET
                       8519 ; rs232cmd.c 2409       
                       8520 ; rs232cmd.c 2410       /************************************************************************
                            **/
                       8521 ; rs232cmd.c 2411       /* TSGen                                                                 
                                                                                                                             
                                                                               RS232CMD.C */
                       8522 ; rs232cmd.c 2412       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8523 ; rs232cmd.c 2413       /* Author:              Kim Engedahl, DEV, 000524                        
                                                                                                                             
                                    */
                       8524 ; rs232cmd.c 2414       /* Revised:             000727                                           
                                                                                                                             
                                                                                    */
                       8525 ; rs232cmd.c 2415       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8526 ; rs232cmd.c 2416       /* Function:    Return the setting of a Analog-TPG.                      
                                                                                                            */
                       8527 ; rs232cmd.c 2417       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                       8528 ; rs232cmd.c 2418       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8529 ; rs232cmd.c 2419       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 142

ADDR   CODE            LINE SOURCELINE
                       8530 ; rs232cmd.c 2420       /************************************************************************
                            ***/
                       8531 ; rs232cmd.c 2421       void TSGen( void)
                       8532 ; rs232cmd.c 2422       {
                       8533         ALIGN   1
                       8535         PUBLIC  _TSGen
001BB6                 8536 _TSGen:
001BB6 0F30            8540         PUSH.W  R4, R5
                       8544 ; rs232cmd.c 2423               char code *str;
                       8545 ; rs232cmd.c 2424       
                       8546 ; rs232cmd.c 2425               if ( CmdExecute && !SCPIError)
001BB8 964842rr        8548         MOV.B   ES,#SEG( _CmdExecute )
001BBC 9908rrrr        8549         MOV.W   R0,#SOF( _CmdExecute )
001BC0 8200            8550         MOV.B   R0L,[R0]
                       8551         BEQ     _429
001BC2 F202           +8551 ;       BNE     _LG_468
001BC4 D500D4         +8551 ;       JMP.L   _429
001BC8 D500D400       +8551 ;       JMP.L   _429
001BC8                +8551 _LG_468:
001BC8 964842rr        8552         MOV.B   ES,#SEG( _SCPIError )
001BCC 9908rrrr        8553         MOV.W   R0,#SOF( _SCPIError )
001BD0 8A00            8554         MOV.W   R0,[R0]
                       8555         BNE     _429
001BD2 F302           +8555 ;       BEQ     _LG_470
001BD4 D500CC         +8555 ;       JMP.L   _429
001BD8 D500CC00       +8555 ;       JMP.L   _429
001BD8                +8555 _LG_470:
                       8556 ; rs232cmd.c 2426               {
                       8557 ; rs232cmd.c 2427                       if ( !CmdRequest)
001BD8 964842rr        8559         MOV.B   ES,#SEG( _CmdRequest )
001BDC 9908rrrr        8560         MOV.W   R0,#SOF( _CmdRequest )
001BE0 8200            8561         MOV.B   R0L,[R0]
001BE2 F207            8562         BNE     _418
                       8563 ; rs232cmd.c 2428                                       SCPIError = SyntaxErr;
001BE4 964842rr        8565         MOV.B   ES,#SEG( _SCPIError )
001BE8 9908rrrr        8566         MOV.W   R0,#SOF( _SCPIError )
001BEC BA03            8567         MOV.W   [R0],#03H
                       8568         BR      _429
001BEE D500BF         +8568         JMP.L   _429
001BEE D500BF00       +8568         JMP.L   _429
001BF2                 8569 _418:
                       8570 ; rs232cmd.c 2429                       else
                       8571 ; rs232cmd.c 2430                       {
                       8572 ; rs232cmd.c 2431                               if ( ParCnt)
001BF2 964842rr        8574         MOV.B   ES,#SEG( _ParCnt )
001BF6 9908rrrr        8575         MOV.W   R0,#SOF( _ParCnt )
001BFA 8200            8576         MOV.B   R0L,[R0]
001BFC F307            8577         BEQ     _419
                       8578 ; rs232cmd.c 2432                                       SCPIError = ParNotAllowed;
001BFE 964842rr        8580         MOV.B   ES,#SEG( _SCPIError )
001C02 9908rrrr        8581         MOV.W   R0,#SOF( _SCPIError )
001C06 BA06            8582         MOV.W   [R0],#06H
                       8583         BR      _429
001C08 D500B2         +8583         JMP.L   _429
001C08 D500B200       +8583         JMP.L   _429
001C0C                 8584 _419:
                       8585 ; rs232cmd.c 2433                               else
                       8586 ; rs232cmd.c 2434                               {
                       8587 ; rs232cmd.c 2435                                       str = CBPatternPar[CBSetup.Pattern].LongN
                            ame;
001C0C 964842rr        8589         MOV.B   ES,#SEG( _CBSetup+2 )
001C10 9908rrrr        8590         MOV.W   R0,#SOF( _CBSetup+2 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 143

ADDR   CODE            LINE SOURCELINE
001C14 8A00            8591         MOV.W   R0,[R0]
001C16 E900000C        8592         MULU.W  R0,#0CH
001C1A 8920            8593         MOV.W   R2,R0
001C1C B930            8594         MOVS.W  R3,#00H
001C1E 9918rrrr        8595         MOV.W   R1,#SEG( _CBPatternPar )
001C22 9908rrrr        8596         MOV.W   R0,#SOF( _CBPatternPar )
001C26 0902            8597         ADD.W   R0,R2
001C28 1913            8598         ADDC.W  R1,R3
001C2A 862C43          8599         MOV.B   CS,R1L
001C2D 8820            8600         MOVC.W  R2,[R0+]
001C2F 99040000        8601         CMP.W   R0,#00H
001C33 F202            8602         BNE     _430
001C35 A64143          8603         ADDS.B  CS,#01H
001C35 A64143          8603         ADDS.B  CS,#01H
001C38                 8604 _430:
001C38 8830            8605         MOVC.W  R3,[R0+]
001C3A 8953            8606         MOV.W   R5,R3
001C3C 8942            8607         MOV.W   R4,R2
                       8609 ; rs232cmd.c 2436       
                       8610 ; rs232cmd.c 2437                                       while ( *str)
001C3E 866C43          8612         MOV.B   CS,R3L
001C41 8062            8613         MOVC.B  R3L,[R2+]
001C43 F312            8614         BEQ     _421
001C43 F31200          8614         BEQ     _421
001C46                 8615 _420:
                       8616 ; rs232cmd.c 2438                                               rs232putchar( *str++);
001C46 8915            8618         MOV.W   R1,R5
001C48 8904            8619         MOV.W   R0,R4
001C4A 862C43          8620         MOV.B   CS,R1L
001C4D 8020            8621         MOVC.B  R1L,[R0+]
001C4F 8102            8622         MOV.B   R0L,R1L
                       8623         CALL    _rs232putchar
001C51 C4rrrrrr       +8623 ;       FCALL   _rs232putchar
001C55 99400001        8624         ADD.W   R4,#01H
001C59 99510000        8625         ADDC.W  R5,#00H
001C5D 8915            8629         MOV.W   R1,R5
001C5F 8904            8630         MOV.W   R0,R4
001C61 862C43          8631         MOV.B   CS,R1L
001C64 8020            8632         MOVC.B  R1L,[R0+]
001C66 F2EF            8633         BNE     _420
001C68                 8635 _421:
                       8636 ; rs232cmd.c 2439       
                       8637 ; rs232cmd.c 2440                                       rs232putchar( ',');
001C68 91082C          8639         MOV.B   R0L,#02CH
                       8640         CALL    _rs232putchar
001C6B C4rrrrrr       +8640 ;       FCALL   _rs232putchar
                       8641 ; rs232cmd.c 2441       
                       8642 ; rs232cmd.c 2442       
                       8643 ; rs232cmd.c 2443                                       str = SystemPar[CBSetup.System].LongName;
                            
001C6F 964842rr        8645         MOV.B   ES,#SEG( _CBSetup )
001C73 9908rrrr        8646         MOV.W   R0,#SOF( _CBSetup )
001C77 8200            8647         MOV.B   R0L,[R0]
001C79 E8000C          8648         MULU.B  R0L,#0CH
001C7C 8920            8649         MOV.W   R2,R0
001C7E B930            8650         MOVS.W  R3,#00H
001C80 9918rrrr        8651         MOV.W   R1,#SEG( _SystemPar )
001C84 9908rrrr        8652         MOV.W   R0,#SOF( _SystemPar )
001C88 0902            8653         ADD.W   R0,R2
001C8A 1913            8654         ADDC.W  R1,R3
001C8C 862C43          8655         MOV.B   CS,R1L
001C8F 8820            8656         MOVC.W  R2,[R0+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 144

ADDR   CODE            LINE SOURCELINE
001C91 99040000        8657         CMP.W   R0,#00H
001C95 F202            8658         BNE     _431
001C97 A64143          8659         ADDS.B  CS,#01H
001C97 A64143          8659         ADDS.B  CS,#01H
001C9A                 8660 _431:
001C9A 8830            8661         MOVC.W  R3,[R0+]
001C9C 8953            8662         MOV.W   R5,R3
001C9E 8942            8663         MOV.W   R4,R2
                       8666 ; rs232cmd.c 2444       
                       8667 ; rs232cmd.c 2445                                       while ( *str)
001CA0 866C43          8669         MOV.B   CS,R3L
001CA3 8062            8670         MOVC.B  R3L,[R2+]
001CA5 F312            8671         BEQ     _423
001CA5 F31200          8671         BEQ     _423
001CA8                 8672 _422:
                       8673 ; rs232cmd.c 2446                                               rs232putchar( *str++);
001CA8 8915            8675         MOV.W   R1,R5
001CAA 8904            8676         MOV.W   R0,R4
001CAC 862C43          8677         MOV.B   CS,R1L
001CAF 8020            8678         MOVC.B  R1L,[R0+]
001CB1 8102            8679         MOV.B   R0L,R1L
                       8680         CALL    _rs232putchar
001CB3 C4rrrrrr       +8680 ;       FCALL   _rs232putchar
001CB7 99400001        8681         ADD.W   R4,#01H
001CBB 99510000        8682         ADDC.W  R5,#00H
001CBF 8915            8686         MOV.W   R1,R5
001CC1 8904            8687         MOV.W   R0,R4
001CC3 862C43          8688         MOV.B   CS,R1L
001CC6 8020            8689         MOVC.B  R1L,[R0+]
001CC8 F2EF            8690         BNE     _422
001CCA                 8692 _423:
                       8693 ; rs232cmd.c 2447       
                       8694 ; rs232cmd.c 2448                                       rs232putchar( ',');
001CCA 91082C          8696         MOV.B   R0L,#02CH
                       8697         CALL    _rs232putchar
001CCD C4rrrrrr       +8697 ;       FCALL   _rs232putchar
                       8698 ; rs232cmd.c 2449       
                       8699 ; rs232cmd.c 2450       
                       8700 ; rs232cmd.c 2451                                       PrintSamplesToFLT( CBSetup.System, CBSetu
                            p.Delay*256);
001CD1 964842rr        8702         MOV.B   ES,#SEG( _CBSetup )
001CD5 9908rrrr        8703         MOV.W   R0,#SOF( _CBSetup )
001CD9 8200            8704         MOV.B   R0L,[R0]
001CDB 964842rr        8705         MOV.B   ES,#SEG( _CBSetup+4 )
001CDF 9938rrrr        8706         MOV.W   R3,#SOF( _CBSetup+4 )
001CE3 8B23            8707         MOV.W   R2,[R3+]
001CE5 8A33            8708         MOV.W   R3,[R3]
001CE7 DD28            8709         ASL.D   R2,#08H
001CE9 C523E2          8710         CALL    _PrintSamplesToFLT
                       8711 ; rs232cmd.c 2452       
                       8712 ; rs232cmd.c 2453       
                       8713 ; rs232cmd.c 2454                                       rs232printf( 6, ",%d,", CBSetup.ScHPhase)
                            ;
001CEC B906            8715         MOV.W   R0,#06H
001CEE 964842rr        8716         MOV.B   ES,#SEG( _CBSetup+8 )
001CF2 9918rrrr        8717         MOV.W   R1,#SOF( _CBSetup+8 )
001CF6 8A11            8718         MOV.W   R1,[R1]
001CF8 0F02            8719         PUSH.W  R1
001CFA 9938rrrr        8721         MOV.W   R3,#SEG( _417 )
001CFE 9928rrrr        8722         MOV.W   R2,#SOF( _417 )
001D02 0F0C            8723         PUSH.W  R2, R3
                       8725         CALL    _rs232printf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 145

ADDR   CODE            LINE SOURCELINE
001D04 C4rrrrrr       +8725 ;       FCALL   _rs232printf
001D08 A976            8726         ADDS.W  R7,#06H
                       8728 ; rs232cmd.c 2455       
                       8729 ; rs232cmd.c 2456       
                       8730 ; rs232cmd.c 2457                                       str = EmbAudioSignalPar[CBSetup.EmbAudioS
                            ignal].LongName;
001D0A 964842rr        8732         MOV.B   ES,#SEG( _CBSetup+10 )
001D0E 9908rrrr        8733         MOV.W   R0,#SOF( _CBSetup+10 )
001D12 8200            8734         MOV.B   R0L,[R0]
001D14 E8000C          8735         MULU.B  R0L,#0CH
001D17 8920            8736         MOV.W   R2,R0
001D19 B930            8737         MOVS.W  R3,#00H
001D1B 9918rrrr        8738         MOV.W   R1,#SEG( _EmbAudioSignalPar )
001D1F 9908rrrr        8739         MOV.W   R0,#SOF( _EmbAudioSignalPar )
001D23 0902            8740         ADD.W   R0,R2
001D25 1913            8741         ADDC.W  R1,R3
001D27 862C43          8742         MOV.B   CS,R1L
001D2A 8820            8743         MOVC.W  R2,[R0+]
001D2C 99040000        8744         CMP.W   R0,#00H
001D30 F202            8745         BNE     _432
001D32 A64143          8746         ADDS.B  CS,#01H
001D32 A6414300        8746         ADDS.B  CS,#01H
001D36                 8747 _432:
001D36 8830            8748         MOVC.W  R3,[R0+]
001D38 8953            8749         MOV.W   R5,R3
001D3A 8942            8750         MOV.W   R4,R2
                       8753 ; rs232cmd.c 2458       
                       8754 ; rs232cmd.c 2459                                       while ( *str)
001D3C 866C43          8756         MOV.B   CS,R3L
001D3F 8062            8757         MOVC.B  R3L,[R2+]
001D41 F312            8758         BEQ     _425
001D41 F31200          8758         BEQ     _425
001D44                 8759 _424:
                       8760 ; rs232cmd.c 2460                                               rs232putchar( *str++);
001D44 8915            8762         MOV.W   R1,R5
001D46 8904            8763         MOV.W   R0,R4
001D48 862C43          8764         MOV.B   CS,R1L
001D4B 8020            8765         MOVC.B  R1L,[R0+]
001D4D 8102            8766         MOV.B   R0L,R1L
                       8767         CALL    _rs232putchar
001D4F C4rrrrrr       +8767 ;       FCALL   _rs232putchar
001D53 99400001        8768         ADD.W   R4,#01H
001D57 99510000        8769         ADDC.W  R5,#00H
001D5B 8915            8773         MOV.W   R1,R5
001D5D 8904            8774         MOV.W   R0,R4
001D5F 862C43          8775         MOV.B   CS,R1L
001D62 8020            8776         MOVC.B  R1L,[R0+]
001D64 F2EF            8777         BNE     _424
001D66                 8779 _425:
                       8780 ; rs232cmd.c 2461       
                       8781 ; rs232cmd.c 2462                                       rs232putchar( '\n');
001D66 91080A          8783         MOV.B   R0L,#0AH
                       8784         CALL    _rs232putchar
001D69 C4rrrrrr       +8784 ;       FCALL   _rs232putchar
                       8785 ; rs232cmd.c 2463                               }
                       8786 ; rs232cmd.c 2464                       }
                       8787 ; rs232cmd.c 2465               }
001D6E                 8789 _429:
                       8790 ; rs232cmd.c 2466       }
001D6E 2F30            8792         POP.W   R4, R5
001D70 D680            8794         RET
                       8797 ; rs232cmd.c 2467       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 146

ADDR   CODE            LINE SOURCELINE
                       8798 ; rs232cmd.c 2468       /************************************************************************
                            **/
                       8799 ; rs232cmd.c 2469       /* TSGenPattern                                                          
                                                                                                                             
                                                 RS232CMD.C */
                       8800 ; rs232cmd.c 2470       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8801 ; rs232cmd.c 2471       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       8802 ; rs232cmd.c 2472       /* Revised:             000727                                           
                                                                                                                             
                                                                                    */
                       8803 ; rs232cmd.c 2473       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8804 ; rs232cmd.c 2474       /* Function:    Handle the Colorbar pattern command.                     
                                                                                                    */
                       8805 ; rs232cmd.c 2475       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       8806 ; rs232cmd.c 2476       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8807 ; rs232cmd.c 2477       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       8808 ; rs232cmd.c 2478       /************************************************************************
                            **/
                       8809 ; rs232cmd.c 2479       void TSGenPattern( void)
                       8810 ; rs232cmd.c 2480       {
                       8811         ALIGN   1
                       8813         PUBLIC  _TSGenPattern
001D72                 8814 _TSGenPattern:
001D72 0F30            8818         PUSH.W  R4, R5
                       8824 ; rs232cmd.c 2481               int pattern;
                       8825 ; rs232cmd.c 2482               char code *str;
                       8826 ; rs232cmd.c 2483       
                       8827 ; rs232cmd.c 2484               if ( CmdExecute && !SCPIError)
001D74 964842rr        8829         MOV.B   ES,#SEG( _CmdExecute )
001D78 9908rrrr        8830         MOV.W   R0,#SOF( _CmdExecute )
001D7C 8200            8831         MOV.B   R0L,[R0]
001D7E F377            8832         BEQ     _445
001D80 964842rr        8833         MOV.B   ES,#SEG( _SCPIError )
001D84 9908rrrr        8834         MOV.W   R0,#SOF( _SCPIError )
001D88 8A00            8835         MOV.W   R0,[R0]
001D8A F271            8836         BNE     _445
                       8837 ; rs232cmd.c 2485               {
                       8838 ; rs232cmd.c 2486                       if ( CmdRequest)
001D8C 964842rr        8840         MOV.B   ES,#SEG( _CmdRequest )
001D90 9908rrrr        8841         MOV.W   R0,#SOF( _CmdRequest )
001D94 8200            8842         MOV.B   R0L,[R0]
001D96 F33F            8843         BEQ     _436
                       8844 ; rs232cmd.c 2487                       {
                       8845 ; rs232cmd.c 2488                               if ( ParCnt)
001D98 964842rr        8847         MOV.B   ES,#SEG( _ParCnt )
001D9C 9908rrrr        8848         MOV.W   R0,#SOF( _ParCnt )
001DA0 8200            8849         MOV.B   R0L,[R0]
001DA2 F306            8850         BEQ     _433
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 147

ADDR   CODE            LINE SOURCELINE
                       8851 ; rs232cmd.c 2489                                       SCPIError = ParNotAllowed;
001DA4 964842rr        8853         MOV.B   ES,#SEG( _SCPIError )
001DA8 9908rrrr        8854         MOV.W   R0,#SOF( _SCPIError )
001DAC BA06            8855         MOV.W   [R0],#06H
001DAE FE5F            8856         BR      _445
001DAE FE5F            8856         BR      _445
001DB0                 8857 _433:
                       8858 ; rs232cmd.c 2490                               else
                       8859 ; rs232cmd.c 2491                               {
                       8860 ; rs232cmd.c 2492                                       str = CBPatternPar[CBSetup.Pattern].LongN
                            ame;
001DB0 964842rr        8862         MOV.B   ES,#SEG( _CBSetup+2 )
001DB4 9908rrrr        8863         MOV.W   R0,#SOF( _CBSetup+2 )
001DB8 8A00            8864         MOV.W   R0,[R0]
001DBA E900000C        8865         MULU.W  R0,#0CH
001DBE 8920            8866         MOV.W   R2,R0
001DC0 B930            8867         MOVS.W  R3,#00H
001DC2 9918rrrr        8868         MOV.W   R1,#SEG( _CBPatternPar )
001DC6 9908rrrr        8869         MOV.W   R0,#SOF( _CBPatternPar )
001DCA 0902            8870         ADD.W   R0,R2
001DCC 1913            8871         ADDC.W  R1,R3
001DCE 862C43          8872         MOV.B   CS,R1L
001DD1 8820            8873         MOVC.W  R2,[R0+]
001DD3 99040000        8874         CMP.W   R0,#00H
001DD7 F202            8875         BNE     _446
001DD9 A64143          8876         ADDS.B  CS,#01H
001DD9 A64143          8876         ADDS.B  CS,#01H
001DDC                 8877 _446:
001DDC 8830            8878         MOVC.W  R3,[R0+]
001DDE 8953            8879         MOV.W   R5,R3
001DE0 8942            8880         MOV.W   R4,R2
                       8882 ; rs232cmd.c 2493       
                       8883 ; rs232cmd.c 2494                                       while ( *str)
001DE2 866C43          8885         MOV.B   CS,R3L
001DE5 8062            8886         MOVC.B  R3L,[R2+]
001DE7 F312            8887         BEQ     _435
001DE7 F31200          8887         BEQ     _435
001DEA                 8888 _434:
                       8889 ; rs232cmd.c 2495                                               rs232putchar( *str++);
001DEA 8915            8891         MOV.W   R1,R5
001DEC 8904            8892         MOV.W   R0,R4
001DEE 862C43          8893         MOV.B   CS,R1L
001DF1 8020            8894         MOVC.B  R1L,[R0+]
001DF3 8102            8895         MOV.B   R0L,R1L
                       8896         CALL    _rs232putchar
001DF5 C4rrrrrr       +8896 ;       FCALL   _rs232putchar
001DF9 99400001        8897         ADD.W   R4,#01H
001DFD 99510000        8898         ADDC.W  R5,#00H
001E01 8915            8902         MOV.W   R1,R5
001E03 8904            8903         MOV.W   R0,R4
001E05 862C43          8904         MOV.B   CS,R1L
001E08 8020            8905         MOVC.B  R1L,[R0+]
001E0A F2EF            8906         BNE     _434
001E0C                 8908 _435:
                       8909 ; rs232cmd.c 2496       
                       8910 ; rs232cmd.c 2497                                       rs232putchar('\n');
001E0C 91080A          8912         MOV.B   R0L,#0AH
                       8913         CALL    _rs232putchar
001E0F C4rrrrrr       +8913 ;       FCALL   _rs232putchar
                       8914 ; rs232cmd.c 2498                               }
                       8915 ; rs232cmd.c 2499                       }
001E13 FE2D            8917         BR      _445
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 148

ADDR   CODE            LINE SOURCELINE
001E13 FE2D00          8917         BR      _445
001E16                 8918 _436:
                       8919 ; rs232cmd.c 2500                       else
                       8920 ; rs232cmd.c 2501                       {
                       8921 ; rs232cmd.c 2502                               pattern = FindParameter( Cmd, CBPatternPar);
001E16 9918rrrr        8923         MOV.W   R1,#SEG( _Cmd )
001E1A 9908rrrr        8924         MOV.W   R0,#SOF( _Cmd )
001E1E 9938rrrr        8925         MOV.W   R3,#SEG( _CBPatternPar )
001E22 9928rrrr        8926         MOV.W   R2,#SOF( _CBPatternPar )
001E26 C520BC          8927         CALL    _FindParameter
                       8929 ; rs232cmd.c 2503       
                       8930 ; rs232cmd.c 2504                               if ( ParCnt != 1)
001E29 964842rr        8932         MOV.B   ES,#SEG( _ParCnt )
001E2D 9918rrrr        8933         MOV.W   R1,#SOF( _ParCnt )
001E31 8221            8934         MOV.B   R1L,[R1]
001E33 912401          8935         CMP.B   R1L,#01H
001E36 F306            8936         BEQ     _437
                       8937 ; rs232cmd.c 2505                                       SCPIError = SyntaxErr;
001E38 964842rr        8939         MOV.B   ES,#SEG( _SCPIError )
001E3C 9908rrrr        8940         MOV.W   R0,#SOF( _SCPIError )
001E40 BA03            8941         MOV.W   [R0],#03H
001E42 FE15            8942         BR      _445
001E42 FE15            8942         BR      _445
001E44                 8943 _437:
                       8945 ; rs232cmd.c 2506                               else
                       8946 ; rs232cmd.c 2507                               {
                       8947 ; rs232cmd.c 2508                                       if ( pattern > -1)
001E44 9904FFFF        8949         CMP.W   R0,#0FFFFH
001E48 FD0C            8950         BLE     _438
                       8951 ; rs232cmd.c 2509                                       {
                       8952 ; rs232cmd.c 2510                                               if ( SetCBPattern( pattern) != OK
                            )
                       8954         CALL    _SetCBPattern
001E4A C4rrrrrr       +8954 ;       FCALL   _SetCBPattern
001E4E 9904FFFF        8955         CMP.W   R0,#0FFFFH
001E52 F30D            8956         BEQ     _445
                       8957 ; rs232cmd.c 2511                                                       SCPIError = ExecErr;
001E54 964842rr        8959         MOV.B   ES,#SEG( _SCPIError )
001E58 9908rrrr        8960         MOV.W   R0,#SOF( _SCPIError )
001E5C 9A08001D        8961         MOV.W   [R0],#01DH
                       8962 ; rs232cmd.c 2512                                       }
001E60 FE06            8964         BR      _445
001E60 FE06            8964         BR      _445
001E62                 8965 _438:
                       8966 ; rs232cmd.c 2513                                       else
                       8967 ; rs232cmd.c 2514                                               SCPIError = DataOutOfRange;
001E62 964842rr        8969         MOV.B   ES,#SEG( _SCPIError )
001E66 9908rrrr        8970         MOV.W   R0,#SOF( _SCPIError )
001E6A 9A080021        8971         MOV.W   [R0],#021H
                       8972 ; rs232cmd.c 2515                               }
                       8973 ; rs232cmd.c 2516                       }
                       8974 ; rs232cmd.c 2517               }
001E6E                 8976 _445:
                       8977 ; rs232cmd.c 2518       }
001E6E 2F30            8979         POP.W   R4, R5
001E70 D680            8981         RET
                       8984 ; rs232cmd.c 2519       
                       8985 ; rs232cmd.c 2520       /************************************************************************
                            **/
                       8986 ; rs232cmd.c 2521       /* TSGenSystem                                                           
                                                                                                                             
                                             RS232CMD.C     */
                       8987 ; rs232cmd.c 2522       /*                                                                       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 149

ADDR   CODE            LINE SOURCELINE
                                                                                                                             
                                                                                                                             
                                                    */
                       8988 ; rs232cmd.c 2523       /* Author:              Kim Engedahl, DEV, 98021                         
                                                                                                                             
                                    */
                       8989 ; rs232cmd.c 2524       /* Revised:             000727                                           
                                                                                                                             
                                                                                    */
                       8990 ; rs232cmd.c 2525       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       8991 ; rs232cmd.c 2526       /* Function:    Handle the Colobar system-command.                       
                                                                                                            */
                       8992 ; rs232cmd.c 2527       /* Remarks:             This command will possibly change pattern and/or 
                            delay if                */
                       8993 ; rs232cmd.c 2528       /*            these are not valid in the selected system                 
                                                                                    */
                       8994 ; rs232cmd.c 2529       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       8995 ; rs232cmd.c 2530       /* Updates:        --                                                    
                                                                                                                             
                                                                                                            */
                       8996 ; rs232cmd.c 2531       /************************************************************************
                            **/
                       8997 ; rs232cmd.c 2532       void TSGenSystem( void)
                       8998 ; rs232cmd.c 2533       {
                       8999         ALIGN   1
                       9001         PUBLIC  _TSGenSystem
001E72                 9002 _TSGenSystem:
001E72 0F30            9006         PUSH.W  R4, R5
                       9012 ; rs232cmd.c 2534               int system;
                       9013 ; rs232cmd.c 2535               char code *str;
                       9014 ; rs232cmd.c 2536       
                       9015 ; rs232cmd.c 2537               if ( CmdExecute && !SCPIError)
001E74 964842rr        9017         MOV.B   ES,#SEG( _CmdExecute )
001E78 9908rrrr        9018         MOV.W   R0,#SOF( _CmdExecute )
001E7C 8200            9019         MOV.B   R0L,[R0]
001E7E F379            9020         BEQ     _463
001E80 964842rr        9021         MOV.B   ES,#SEG( _SCPIError )
001E84 9908rrrr        9022         MOV.W   R0,#SOF( _SCPIError )
001E88 8A00            9023         MOV.W   R0,[R0]
001E8A F273            9024         BNE     _463
                       9025 ; rs232cmd.c 2538               {
                       9026 ; rs232cmd.c 2539                       if ( CmdRequest)
001E8C 964842rr        9028         MOV.B   ES,#SEG( _CmdRequest )
001E90 9908rrrr        9029         MOV.W   R0,#SOF( _CmdRequest )
001E94 8200            9030         MOV.B   R0L,[R0]
001E96 F33F            9031         BEQ     _453
                       9032 ; rs232cmd.c 2540                       {
                       9033 ; rs232cmd.c 2541                               if ( ParCnt)
001E98 964842rr        9035         MOV.B   ES,#SEG( _ParCnt )
001E9C 9908rrrr        9036         MOV.W   R0,#SOF( _ParCnt )
001EA0 8200            9037         MOV.B   R0L,[R0]
001EA2 F306            9038         BEQ     _450
                       9039 ; rs232cmd.c 2542                                       SCPIError = ParNotAllowed;
001EA4 964842rr        9041         MOV.B   ES,#SEG( _SCPIError )
001EA8 9908rrrr        9042         MOV.W   R0,#SOF( _SCPIError )
001EAC BA06            9043         MOV.W   [R0],#06H
001EAE FE61            9044         BR      _463
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 150

ADDR   CODE            LINE SOURCELINE
001EAE FE61            9044         BR      _463
001EB0                 9045 _450:
                       9046 ; rs232cmd.c 2543                               else
                       9047 ; rs232cmd.c 2544                               {
                       9048 ; rs232cmd.c 2545                                       str = SystemPar[CBSetup.System].LongName;
                            
001EB0 964842rr        9050         MOV.B   ES,#SEG( _CBSetup )
001EB4 9908rrrr        9051         MOV.W   R0,#SOF( _CBSetup )
001EB8 8200            9052         MOV.B   R0L,[R0]
001EBA E8000C          9053         MULU.B  R0L,#0CH
001EBD 8920            9054         MOV.W   R2,R0
001EBF B930            9055         MOVS.W  R3,#00H
001EC1 9918rrrr        9056         MOV.W   R1,#SEG( _SystemPar )
001EC5 9908rrrr        9057         MOV.W   R0,#SOF( _SystemPar )
001EC9 0902            9058         ADD.W   R0,R2
001ECB 1913            9059         ADDC.W  R1,R3
001ECD 862C43          9060         MOV.B   CS,R1L
001ED0 8820            9061         MOVC.W  R2,[R0+]
001ED2 99040000        9062         CMP.W   R0,#00H
001ED6 F202            9063         BNE     _464
001ED8 A64143          9064         ADDS.B  CS,#01H
001ED8 A6414300        9064         ADDS.B  CS,#01H
001EDC                 9065 _464:
001EDC 8830            9066         MOVC.W  R3,[R0+]
001EDE 8953            9067         MOV.W   R5,R3
001EE0 8942            9068         MOV.W   R4,R2
                       9070 ; rs232cmd.c 2546       
                       9071 ; rs232cmd.c 2547                                       while ( *str)                            
                                                                             
001EE2 866C43          9073         MOV.B   CS,R3L
001EE5 8062            9074         MOVC.B  R3L,[R2+]
001EE7 F312            9075         BEQ     _452
001EE7 F31200          9075         BEQ     _452
001EEA                 9076 _451:
                       9077 ; rs232cmd.c 2548                                               rs232putchar( *str++);
001EEA 8915            9079         MOV.W   R1,R5
001EEC 8904            9080         MOV.W   R0,R4
001EEE 862C43          9081         MOV.B   CS,R1L
001EF1 8020            9082         MOVC.B  R1L,[R0+]
001EF3 8102            9083         MOV.B   R0L,R1L
                       9084         CALL    _rs232putchar
001EF5 C4rrrrrr       +9084 ;       FCALL   _rs232putchar
001EF9 99400001        9085         ADD.W   R4,#01H
001EFD 99510000        9086         ADDC.W  R5,#00H
001F01 8915            9090         MOV.W   R1,R5
001F03 8904            9091         MOV.W   R0,R4
001F05 862C43          9092         MOV.B   CS,R1L
001F08 8020            9093         MOVC.B  R1L,[R0+]
001F0A F2EF            9094         BNE     _451
001F0C                 9096 _452:
                       9097 ; rs232cmd.c 2549       
                       9098 ; rs232cmd.c 2550                                       rs232putchar('\n');
001F0C 91080A          9100         MOV.B   R0L,#0AH
                       9101         CALL    _rs232putchar
001F0F C4rrrrrr       +9101 ;       FCALL   _rs232putchar
                       9102 ; rs232cmd.c 2551                               }
                       9103 ; rs232cmd.c 2552                       }
001F13 FE2F            9105         BR      _463
001F13 FE2F00          9105         BR      _463
001F16                 9106 _453:
                       9107 ; rs232cmd.c 2553                       else
                       9108 ; rs232cmd.c 2554                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 151

ADDR   CODE            LINE SOURCELINE
                       9109 ; rs232cmd.c 2555                               if ( ParCnt != 1)
001F16 964842rr        9111         MOV.B   ES,#SEG( _ParCnt )
001F1A 9908rrrr        9112         MOV.W   R0,#SOF( _ParCnt )
001F1E 8200            9113         MOV.B   R0L,[R0]
001F20 910401          9114         CMP.B   R0L,#01H
001F23 F307            9115         BEQ     _454
                       9116 ; rs232cmd.c 2556                                       SCPIError = SyntaxErr;
001F25 964842rr        9118         MOV.B   ES,#SEG( _SCPIError )
001F29 9908rrrr        9119         MOV.W   R0,#SOF( _SCPIError )
001F2D BA03            9120         MOV.W   [R0],#03H
001F2F FE21            9121         BR      _463
001F2F FE2100          9121         BR      _463
001F32                 9122 _454:
                       9123 ; rs232cmd.c 2557                               else
                       9124 ; rs232cmd.c 2558                               {
                       9125 ; rs232cmd.c 2559                                       system = FindParameter( Cmd, SystemPar);
001F32 9918rrrr        9127         MOV.W   R1,#SEG( _Cmd )
001F36 9908rrrr        9128         MOV.W   R0,#SOF( _Cmd )
001F3A 9938rrrr        9129         MOV.W   R3,#SEG( _SystemPar )
001F3E 9928rrrr        9130         MOV.W   R2,#SOF( _SystemPar )
001F42 C5202E          9131         CALL    _FindParameter
                       9133 ; rs232cmd.c 2560       
                       9134 ; rs232cmd.c 2561                                       if ( system == PAL_PALID)                
                                                            // If line7, (PAL w/ID) ever should
001F45 99040001        9136         CMP.W   R0,#01H
001F49 F208            9137         BNE     _455
                       9138 ; rs232cmd.c 2562                                               SCPIError = DataOutOfRange;      
                                                    //  be supported remove this exception
001F4B 964842rr        9140         MOV.B   ES,#SEG( _SCPIError )
001F4F 9908rrrr        9141         MOV.W   R0,#SOF( _SCPIError )
001F53 9A080021        9142         MOV.W   [R0],#021H
001F57 FE0D            9143         BR      _463
001F57 FE0D00          9143         BR      _463
001F5A                 9144 _455:
                       9146 ; rs232cmd.c 2563                                       else                                     
                                    
                       9147 ; rs232cmd.c 2564                                       {
                       9148 ; rs232cmd.c 2565                                               if ( system > -1)
001F5A 9904FFFF        9150         CMP.W   R0,#0FFFFH
001F5E FD03            9151         BLE     _456
                       9152 ; rs232cmd.c 2566                                                       SetCBSystem( system);
                       9154         CALL    _SetCBSystem
001F60 C4rrrrrr       +9154 ;       FCALL   _SetCBSystem
001F64 FE06            9155         BR      _463
001F64 FE06            9155         BR      _463
001F66                 9156 _456:
                       9157 ; rs232cmd.c 2567                                               else
                       9158 ; rs232cmd.c 2568                                                       SCPIError = DataOutOfRang
                            e;
001F66 964842rr        9160         MOV.B   ES,#SEG( _SCPIError )
001F6A 9908rrrr        9161         MOV.W   R0,#SOF( _SCPIError )
001F6E 9A080021        9162         MOV.W   [R0],#021H
                       9163 ; rs232cmd.c 2569                                       }
                       9164 ; rs232cmd.c 2570                               }
                       9165 ; rs232cmd.c 2571                       }
                       9166 ; rs232cmd.c 2572               }
001F72                 9168 _463:
                       9169 ; rs232cmd.c 2573       }
001F72 2F30            9171         POP.W   R4, R5
001F74 D680            9173         RET
                       9176 ; rs232cmd.c 2574       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 152

ADDR   CODE            LINE SOURCELINE
                       9177 ; rs232cmd.c 2575       /************************************************************************
                            **/
                       9178 ; rs232cmd.c 2576       /* TSGenDelay                                                            
                                                                                                                             
                                                     RS232CMD.C */
                       9179 ; rs232cmd.c 2577       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9180 ; rs232cmd.c 2578       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9181 ; rs232cmd.c 2579       /* Revised:             000604                                           
                                                                                                                             
                                                                                    */
                       9182 ; rs232cmd.c 2580       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9183 ; rs232cmd.c 2581       /* Function:    Handle the Colorbar delay command.                       
                                                                                                            */
                       9184 ; rs232cmd.c 2582       /* Remarks:             Delay should be multiplied/divided with/by 256 to
                             conform                */
                       9185 ; rs232cmd.c 2583       /*                                              with the black burst timi
                            ng as the functions                                                             */
                       9186 ; rs232cmd.c 2584       /*                                              PrintSamplesToFLT/FLTToSa
                            mples are common to both the CBar       */
                       9187 ; rs232cmd.c 2585       /*                                              and BB timing. The CBar t
                            iming equals 1728/1716 samples                  */
                       9188 ; rs232cmd.c 2586       /*                                              (app. 37ns/sample), while
                             the BB timing equals 1728*256/         */
                       9189 ; rs232cmd.c 2587       /*                                              1716*256 samples (app. 0.
                            14 ns/sample).                                                                                  *
                            /
                       9190 ; rs232cmd.c 2588       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9191 ; rs232cmd.c 2589       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9192 ; rs232cmd.c 2590       /************************************************************************
                            **/
                       9193 ; rs232cmd.c 2591       void TSGenDelay( void)
                       9194 ; rs232cmd.c 2592       {
                       9195         ALIGN   1
                       9197         PUBLIC  _TSGenDelay
001F76                 9198 _TSGenDelay:
001F76 0F30            9202         PUSH.W  R4, R5
001F78 A978            9204         ADDS.W  R7,#08H
                       9211 ; rs232cmd.c 2593               int field, line;
                       9212 ; rs232cmd.c 2594               float offset;
                       9213 ; rs232cmd.c 2595               long samples;
                       9214 ; rs232cmd.c 2596       
                       9215 ; rs232cmd.c 2597               if ( CmdExecute && !SCPIError)
001F7A 964842rr        9217         MOV.B   ES,#SEG( _CmdExecute )
001F7E 9908rrrr        9218         MOV.W   R0,#SOF( _CmdExecute )
001F82 8200            9219         MOV.B   R0L,[R0]
001F84 F37A            9220         BEQ     _478
001F86 964842rr        9221         MOV.B   ES,#SEG( _SCPIError )
001F8A 9908rrrr        9222         MOV.W   R0,#SOF( _SCPIError )
001F8E 8A00            9223         MOV.W   R0,[R0]
001F90 F274            9224         BNE     _478
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 153

ADDR   CODE            LINE SOURCELINE
                       9225 ; rs232cmd.c 2598               {
                       9226 ; rs232cmd.c 2599                       if ( CmdRequest)
001F92 964842rr        9228         MOV.B   ES,#SEG( _CmdRequest )
001F96 9908rrrr        9229         MOV.W   R0,#SOF( _CmdRequest )
001F9A 8200            9230         MOV.B   R0L,[R0]
001F9C F31E            9231         BEQ     _469
                       9232 ; rs232cmd.c 2600                       {
                       9233 ; rs232cmd.c 2601                               if ( ParCnt)
001F9E 964842rr        9235         MOV.B   ES,#SEG( _ParCnt )
001FA2 9908rrrr        9236         MOV.W   R0,#SOF( _ParCnt )
001FA6 8200            9237         MOV.B   R0L,[R0]
001FA8 F306            9238         BEQ     _468
                       9239 ; rs232cmd.c 2602                                       SCPIError = ParNotAllowed;
001FAA 964842rr        9241         MOV.B   ES,#SEG( _SCPIError )
001FAE 9908rrrr        9242         MOV.W   R0,#SOF( _SCPIError )
001FB2 BA06            9243         MOV.W   [R0],#06H
001FB4 FE62            9244         BR      _478
001FB4 FE62            9244         BR      _478
001FB6                 9245 _468:
                       9246 ; rs232cmd.c 2603                               else
                       9247 ; rs232cmd.c 2604                               {
                       9248 ; rs232cmd.c 2605                                       PrintSamplesToFLT( CBSetup.System, CBSetu
                            p.Delay*256);
001FB6 964842rr        9250         MOV.B   ES,#SEG( _CBSetup )
001FBA 9908rrrr        9251         MOV.W   R0,#SOF( _CBSetup )
001FBE 8200            9252         MOV.B   R0L,[R0]
001FC0 964842rr        9253         MOV.B   ES,#SEG( _CBSetup+4 )
001FC4 9938rrrr        9254         MOV.W   R3,#SOF( _CBSetup+4 )
001FC8 8B23            9255         MOV.W   R2,[R3+]
001FCA 8A33            9256         MOV.W   R3,[R3]
001FCC DD28            9257         ASL.D   R2,#08H
001FCE C52270          9258         CALL    _PrintSamplesToFLT
                       9259 ; rs232cmd.c 2606       
                       9260 ; rs232cmd.c 2607                                       rs232putchar ( '\n');
001FD1 91080A          9262         MOV.B   R0L,#0AH
                       9263         CALL    _rs232putchar
001FD4 C4rrrrrr       +9263 ;       FCALL   _rs232putchar
                       9264 ; rs232cmd.c 2608                               }
                       9265 ; rs232cmd.c 2609                       }
001FD8 FE50            9267         BR      _478
001FD8 FE50            9267         BR      _478
001FDA                 9268 _469:
                       9269 ; rs232cmd.c 2610                       else
                       9270 ; rs232cmd.c 2611                       {
                       9271 ; rs232cmd.c 2612                               if (( ParCnt != 3) || ( sscanf( Cmd, "%d,%d,%f", 
                            &field, &line, &offset) != 3))
001FDA 964842rr        9273         MOV.B   ES,#SEG( _ParCnt )
001FDE 9908rrrr        9274         MOV.W   R0,#SOF( _ParCnt )
001FE2 8200            9275         MOV.B   R0L,[R0]
001FE4 910403          9276         CMP.B   R0L,#03H
001FE7 F21F            9277         BNE     _470
001FE9 9168rr          9278         MOV.B   R3L,#SEG( __lc_bs )
001FEC 7177            9279         XOR.B   R3H,R3H
001FEE 8927            9280         MOV.W   R2,R7
001FF0 91A8rr          9281         MOV.B   R5L,#SEG( __lc_bs )
001FF3 71BB            9282         XOR.B   R5H,R5H
001FF5 404702          9283         LEA     R4,R7+2
001FF8 9128rr          9284         MOV.B   R1L,#SEG( __lc_bs )
001FFB 7133            9285         XOR.B   R1H,R1H
001FFD 400704          9286         LEA     R0,R7+4
002000 0F03            9287         PUSH.W  R0, R1
002002 0F30            9289         PUSH.W  R4, R5
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 154

ADDR   CODE            LINE SOURCELINE
002004 0F0C            9291         PUSH.W  R2, R3
002006 9938rrrr        9293         MOV.W   R3,#SEG( _295 )
00200A 9928rrrr        9294         MOV.W   R2,#SOF( _295 )
00200E 0F0C            9295         PUSH.W  R2, R3
002010 9918rrrr        9297         MOV.W   R1,#SEG( _Cmd )
002014 9908rrrr        9298         MOV.W   R0,#SOF( _Cmd )
                       9299         CALL    _sscanf
002018 C4rrrrrr       +9299 ;       FCALL   _sscanf
00201C 99700010        9300         ADD.W   R7,#010H
002020 99040003        9302         CMP.W   R0,#03H
002024 F306            9303         BEQ     _471
002024 F306            9303         BEQ     _471
002026                 9304 _470:
                       9305 ; rs232cmd.c 2613                                       SCPIError = SyntaxErr;
002026 964842rr        9307         MOV.B   ES,#SEG( _SCPIError )
00202A 9908rrrr        9308         MOV.W   R0,#SOF( _SCPIError )
00202E BA03            9309         MOV.W   [R0],#03H
002030 FE24            9310         BR      _478
002030 FE24            9310         BR      _478
002032                 9311 _471:
                       9312 ; rs232cmd.c 2614                               else
                       9313 ; rs232cmd.c 2615                               {
                       9314 ; rs232cmd.c 2616                                       if (( samples = FLTToSamples( CBSetup.Sys
                            tem, field, line, offset)) == -1)
002032 964842rr        9316         MOV.B   ES,#SEG( _CBSetup )
002036 9908rrrr        9317         MOV.W   R0,#SOF( _CBSetup )
00203A 8200            9318         MOV.B   R0L,[R0]
00203C 8A17            9319         MOV.W   R1,[R7]
00203E 8C2702          9320         MOV.W   R2,[R7+2]
002041 8C5706          9321         MOV.W   R5,[R7+6]
002044 8C4704          9322         MOV.W   R4,[R7+4]
002047 0F30            9323         PUSH.W  R4, R5
002049 C51FF7          9325         CALL    _FLTToSamples
00204C A974            9326         ADDS.W  R7,#04H
00204E 8931            9328         MOV.W   R3,R1
002050 8920            9329         MOV.W   R2,R0
002052 9934FFFF        9330         CMP.W   R3,#0FFFFH
002056 F202            9331         BNE     _481
002058 9924FFFF        9332         CMP.W   R2,#0FFFFH
002058 9924FFFF        9332         CMP.W   R2,#0FFFFH
00205C                 9333 _481:
00205C F207            9334         BNE     _472
                       9335 ; rs232cmd.c 2617                                               SCPIError = ExecErr;
00205E 964842rr        9337         MOV.B   ES,#SEG( _SCPIError )
002062 9908rrrr        9338         MOV.W   R0,#SOF( _SCPIError )
002066 9A08001D        9339         MOV.W   [R0],#01DH
00206A FE07            9340         BR      _478
00206A FE07            9340         BR      _478
00206C                 9341 _472:
                       9342 ; rs232cmd.c 2618                                       else            
                       9343 ; rs232cmd.c 2619                                               SetCBDelay( samples/256);
00206C B930            9345         MOV.W   R3,#00H
00206E 99280100        9346         MOV.W   R2,#0100H
002072 C4rrrrrr        9347         FCALL   __SDIVL
                       9348         CALL    _SetCBDelay
002076 C4rrrrrr       +9348 ;       FCALL   _SetCBDelay
                       9349 ; rs232cmd.c 2620                               }
                       9350 ; rs232cmd.c 2621                       }
                       9351 ; rs232cmd.c 2622               }
00207A                 9353 _478:
                       9354 ; rs232cmd.c 2623       }
00207A 99700008        9356         ADD.W   R7,#08H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 155

ADDR   CODE            LINE SOURCELINE
00207E 2F30            9358         POP.W   R4, R5
002080 D680            9360         RET
                       9362 ; rs232cmd.c 2624       
                       9363 ; rs232cmd.c 2625       /************************************************************************
                            **/
                       9364 ; rs232cmd.c 2626       /* TSGenScHPhase                                                         
                                                                                                                             
                                                     RS232CMD.C     */
                       9365 ; rs232cmd.c 2627       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9366 ; rs232cmd.c 2628       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9367 ; rs232cmd.c 2629       /* Revised:             000727                                           
                                                                                                                             
                                                                                    */
                       9368 ; rs232cmd.c 2630       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9369 ; rs232cmd.c 2631       /* Function:    Handle the Colorbar ScH-Phase-command.                   
                                                                                            */
                       9370 ; rs232cmd.c 2632       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9371 ; rs232cmd.c 2633       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9372 ; rs232cmd.c 2634       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9373 ; rs232cmd.c 2635       /************************************************************************
                            **/
                       9374 ; rs232cmd.c 2636       void TSGenScHPhase( void)
                       9375 ; rs232cmd.c 2637       {
                       9376         ALIGN   1
                       9378         PUBLIC  _TSGenScHPhase
002082                 9379 _TSGenScHPhase:
002082 A97E            9383         ADDS.W  R7,#0EH
                       9386 ; rs232cmd.c 2638               int schphase;
                       9387 ; rs232cmd.c 2639       
                       9388 ; rs232cmd.c 2640               if ( CmdExecute && !SCPIError)
002084 964842rr        9390         MOV.B   ES,#SEG( _CmdExecute )
002088 9908rrrr        9391         MOV.W   R0,#SOF( _CmdExecute )
00208C 8200            9392         MOV.B   R0L,[R0]
00208E F35A            9393         BEQ     _493
002090 964842rr        9394         MOV.B   ES,#SEG( _SCPIError )
002094 9908rrrr        9395         MOV.W   R0,#SOF( _SCPIError )
002098 8A00            9396         MOV.W   R0,[R0]
00209A F254            9397         BNE     _493
                       9398 ; rs232cmd.c 2641               {
                       9399 ; rs232cmd.c 2642                       if ( CmdRequest)
00209C 964842rr        9401         MOV.B   ES,#SEG( _CmdRequest )
0020A0 9908rrrr        9402         MOV.W   R0,#SOF( _CmdRequest )
0020A4 8200            9403         MOV.B   R0L,[R0]
0020A6 F31C            9404         BEQ     _483
                       9405 ; rs232cmd.c 2643                       {
                       9406 ; rs232cmd.c 2644                               if ( ParCnt)
0020A8 964842rr        9408         MOV.B   ES,#SEG( _ParCnt )
0020AC 9908rrrr        9409         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 156

ADDR   CODE            LINE SOURCELINE
0020B0 8200            9410         MOV.B   R0L,[R0]
0020B2 F306            9411         BEQ     _482
                       9412 ; rs232cmd.c 2645                                       SCPIError = ParNotAllowed;
0020B4 964842rr        9414         MOV.B   ES,#SEG( _SCPIError )
0020B8 9908rrrr        9415         MOV.W   R0,#SOF( _SCPIError )
0020BC BA06            9416         MOV.W   [R0],#06H
0020BE FE42            9417         BR      _493
0020BE FE42            9417         BR      _493
0020C0                 9418 _482:
                       9419 ; rs232cmd.c 2646                               else
                       9420 ; rs232cmd.c 2647                                       rs232printf( 6, "%d\n", CBSetup.ScHPhase)
                            ;
0020C0 B906            9422         MOV.W   R0,#06H
0020C2 964842rr        9423         MOV.B   ES,#SEG( _CBSetup+8 )
0020C6 9918rrrr        9424         MOV.W   R1,#SOF( _CBSetup+8 )
0020CA 8A11            9425         MOV.W   R1,[R1]
0020CC 0F02            9426         PUSH.W  R1
0020CE 9938rrrr        9428         MOV.W   R3,#SEG( _9 )
0020D2 9928rrrr        9429         MOV.W   R2,#SOF( _9 )
0020D6 0F0C            9430         PUSH.W  R2, R3
                       9432         CALL    _rs232printf
0020D8 C4rrrrrr       +9432 ;       FCALL   _rs232printf
0020DC A976            9433         ADDS.W  R7,#06H
                       9435 ; rs232cmd.c 2648                       }
0020DE FE32            9437         BR      _493
0020DE FE32            9437         BR      _493
0020E0                 9438 _483:
                       9439 ; rs232cmd.c 2649                       else
                       9440 ; rs232cmd.c 2650                       {
                       9441 ; rs232cmd.c 2651                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &schph
                            ase) != 1))
0020E0 964842rr        9443         MOV.B   ES,#SEG( _ParCnt )
0020E4 9908rrrr        9444         MOV.W   R0,#SOF( _ParCnt )
0020E8 8200            9445         MOV.B   R0L,[R0]
0020EA 910401          9446         CMP.B   R0L,#01H
0020ED F215            9447         BNE     _484
0020EF 9918rrrr        9448         MOV.W   R1,#SEG( _Cmd )
0020F3 9908rrrr        9449         MOV.W   R0,#SOF( _Cmd )
0020F7 9168rr          9450         MOV.B   R3L,#SEG( __lc_bs )
0020FA 7177            9451         XOR.B   R3H,R3H
0020FC 8927            9452         MOV.W   R2,R7
0020FE 0F0C            9453         PUSH.W  R2, R3
002100 9938rrrr        9455         MOV.W   R3,#SEG( _10 )
002104 9928rrrr        9456         MOV.W   R2,#SOF( _10 )
002108 0F0C            9457         PUSH.W  R2, R3
                       9459         CALL    _sscanf
00210A C4rrrrrr       +9459 ;       FCALL   _sscanf
00210E 99700008        9460         ADD.W   R7,#08H
002112 99040001        9462         CMP.W   R0,#01H
002116 F306            9463         BEQ     _485
002116 F306            9463         BEQ     _485
002118                 9464 _484:
                       9465 ; rs232cmd.c 2652                                       SCPIError = SyntaxErr;
002118 964842rr        9467         MOV.B   ES,#SEG( _SCPIError )
00211C 9908rrrr        9468         MOV.W   R0,#SOF( _SCPIError )
002120 BA03            9469         MOV.W   [R0],#03H
002122 FE10            9470         BR      _493
002122 FE10            9470         BR      _493
002124                 9471 _485:
                       9472 ; rs232cmd.c 2653                               else
                       9473 ; rs232cmd.c 2654                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 157

ADDR   CODE            LINE SOURCELINE
                       9474 ; rs232cmd.c 2655                                       if (( schphase < ScHPhaseLow) || ( schpha
                            se > ScHPhaseHigh))
002124 9A74FF4D        9476         CMP.W   [R7],#0FF4DH
002128 FB03            9477         BLT     _486
00212A 9A7400B4        9478         CMP.W   [R7],#0B4H
00212E FD07            9479         BLE     _487
00212E FD07            9479         BLE     _487
002130                 9480 _486:
                       9481 ; rs232cmd.c 2656                                               SCPIError = DataOutOfRange;
002130 964842rr        9483         MOV.B   ES,#SEG( _SCPIError )
002134 9908rrrr        9484         MOV.W   R0,#SOF( _SCPIError )
002138 9A080021        9485         MOV.W   [R0],#021H
00213C FE03            9486         BR      _493
00213C FE03            9486         BR      _493
00213E                 9487 _487:
                       9488 ; rs232cmd.c 2657                                       else
                       9489 ; rs232cmd.c 2658                                               SetCBScHPhase( schphase);
00213E 8A07            9491         MOV.W   R0,[R7]
                       9492         CALL    _SetCBScHPhase
002140 C4rrrrrr       +9492 ;       FCALL   _SetCBScHPhase
                       9493 ; rs232cmd.c 2659                               }
                       9494 ; rs232cmd.c 2660                       }
                       9495 ; rs232cmd.c 2661               }
002144                 9497 _493:
                       9498 ; rs232cmd.c 2662       }
002144 A972            9500         ADDS.W  R7,#02H
002146 D680            9502         RET
                       9504 ; rs232cmd.c 2663       
                       9505 ; rs232cmd.c 2664       /************************************************************************
                            **/
                       9506 ; rs232cmd.c 2665       /* TSGenEmbAudioSignal                                                   
                                                                                                                             
                            RS232CMD.C      */
                       9507 ; rs232cmd.c 2666       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9508 ; rs232cmd.c 2667       /* Author:              Kim Engedahl, DEV, 980211                        
                                                                                                                             
                                    */
                       9509 ; rs232cmd.c 2668       /* Revised:             000727                                           
                                                                                                                             
                                                                                    */
                       9510 ; rs232cmd.c 2669       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9511 ; rs232cmd.c 2670       /* Function:    Handle the Colorbar embedded audio signal                
                                                                                            */
                       9512 ; rs232cmd.c 2671       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9513 ; rs232cmd.c 2672       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9514 ; rs232cmd.c 2673       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9515 ; rs232cmd.c 2674       /************************************************************************
                            **/
                       9516 ; rs232cmd.c 2675       void TSGenEmbAudioSignal( void)
                       9517 ; rs232cmd.c 2676       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 158

ADDR   CODE            LINE SOURCELINE
                       9518         ALIGN   1
                       9520         PUBLIC  _TSGenEmbAudioSignal
002148                 9521 _TSGenEmbAudioSignal:
002148 0F30            9525         PUSH.W  R4, R5
                       9531 ; rs232cmd.c 2677               int signal;
                       9532 ; rs232cmd.c 2678               char code *str;
                       9533 ; rs232cmd.c 2679       
                       9534 ; rs232cmd.c 2680               if ( CmdExecute && !SCPIError)
00214A 964842rr        9536         MOV.B   ES,#SEG( _CmdExecute )
00214E 9908rrrr        9537         MOV.W   R0,#SOF( _CmdExecute )
002152 8200            9538         MOV.B   R0L,[R0]
002154 F36F            9539         BEQ     _509
002156 964842rr        9540         MOV.B   ES,#SEG( _SCPIError )
00215A 9908rrrr        9541         MOV.W   R0,#SOF( _SCPIError )
00215E 8A00            9542         MOV.W   R0,[R0]
002160 F269            9543         BNE     _509
                       9544 ; rs232cmd.c 2681               {
                       9545 ; rs232cmd.c 2682                       if ( CmdRequest)
002162 964842rr        9547         MOV.B   ES,#SEG( _CmdRequest )
002166 9908rrrr        9548         MOV.W   R0,#SOF( _CmdRequest )
00216A 8200            9549         MOV.B   R0L,[R0]
00216C F33F            9550         BEQ     _501
                       9551 ; rs232cmd.c 2683                       {
                       9552 ; rs232cmd.c 2684                               if ( ParCnt)
00216E 964842rr        9554         MOV.B   ES,#SEG( _ParCnt )
002172 9908rrrr        9555         MOV.W   R0,#SOF( _ParCnt )
002176 8200            9556         MOV.B   R0L,[R0]
002178 F306            9557         BEQ     _498
                       9558 ; rs232cmd.c 2685                                       SCPIError = ParNotAllowed;
00217A 964842rr        9560         MOV.B   ES,#SEG( _SCPIError )
00217E 9908rrrr        9561         MOV.W   R0,#SOF( _SCPIError )
002182 BA06            9562         MOV.W   [R0],#06H
002184 FE57            9563         BR      _509
002184 FE57            9563         BR      _509
002186                 9564 _498:
                       9565 ; rs232cmd.c 2686                               else
                       9566 ; rs232cmd.c 2687                               {
                       9567 ; rs232cmd.c 2688                                       str = EmbAudioSignalPar[CBSetup.EmbAudioS
                            ignal].LongName;
002186 964842rr        9569         MOV.B   ES,#SEG( _CBSetup+10 )
00218A 9908rrrr        9570         MOV.W   R0,#SOF( _CBSetup+10 )
00218E 8200            9571         MOV.B   R0L,[R0]
002190 E8000C          9572         MULU.B  R0L,#0CH
002193 8920            9573         MOV.W   R2,R0
002195 B930            9574         MOVS.W  R3,#00H
002197 9918rrrr        9575         MOV.W   R1,#SEG( _EmbAudioSignalPar )
00219B 9908rrrr        9576         MOV.W   R0,#SOF( _EmbAudioSignalPar )
00219F 0902            9577         ADD.W   R0,R2
0021A1 1913            9578         ADDC.W  R1,R3
0021A3 862C43          9579         MOV.B   CS,R1L
0021A6 8820            9580         MOVC.W  R2,[R0+]
0021A8 99040000        9581         CMP.W   R0,#00H
0021AC F202            9582         BNE     _510
0021AE A64143          9583         ADDS.B  CS,#01H
0021AE A6414300        9583         ADDS.B  CS,#01H
0021B2                 9584 _510:
0021B2 8830            9585         MOVC.W  R3,[R0+]
0021B4 8953            9586         MOV.W   R5,R3
0021B6 8942            9587         MOV.W   R4,R2
                       9589 ; rs232cmd.c 2689       
                       9590 ; rs232cmd.c 2690                                       while ( *str)
0021B8 866C43          9592         MOV.B   CS,R3L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 159

ADDR   CODE            LINE SOURCELINE
0021BB 8062            9593         MOVC.B  R3L,[R2+]
0021BD F312            9594         BEQ     _500
0021BD F31200          9594         BEQ     _500
0021C0                 9595 _499:
                       9596 ; rs232cmd.c 2691                                               rs232putchar( *str++);
0021C0 8915            9598         MOV.W   R1,R5
0021C2 8904            9599         MOV.W   R0,R4
0021C4 862C43          9600         MOV.B   CS,R1L
0021C7 8020            9601         MOVC.B  R1L,[R0+]
0021C9 8102            9602         MOV.B   R0L,R1L
                       9603         CALL    _rs232putchar
0021CB C4rrrrrr       +9603 ;       FCALL   _rs232putchar
0021CF 99400001        9604         ADD.W   R4,#01H
0021D3 99510000        9605         ADDC.W  R5,#00H
0021D7 8915            9609         MOV.W   R1,R5
0021D9 8904            9610         MOV.W   R0,R4
0021DB 862C43          9611         MOV.B   CS,R1L
0021DE 8020            9612         MOVC.B  R1L,[R0+]
0021E0 F2EF            9613         BNE     _499
0021E2                 9615 _500:
                       9616 ; rs232cmd.c 2692       
                       9617 ; rs232cmd.c 2693                                       rs232putchar('\n');
0021E2 91080A          9619         MOV.B   R0L,#0AH
                       9620         CALL    _rs232putchar
0021E5 C4rrrrrr       +9620 ;       FCALL   _rs232putchar
                       9621 ; rs232cmd.c 2694                               }
                       9622 ; rs232cmd.c 2695                       }
0021E9 FE25            9624         BR      _509
0021E9 FE2500          9624         BR      _509
0021EC                 9625 _501:
                       9626 ; rs232cmd.c 2696                       else
                       9627 ; rs232cmd.c 2697                       {
                       9628 ; rs232cmd.c 2698                               if ( ParCnt != 1)
0021EC 964842rr        9630         MOV.B   ES,#SEG( _ParCnt )
0021F0 9908rrrr        9631         MOV.W   R0,#SOF( _ParCnt )
0021F4 8200            9632         MOV.B   R0L,[R0]
0021F6 910401          9633         CMP.B   R0L,#01H
0021F9 F307            9634         BEQ     _502
                       9635 ; rs232cmd.c 2699                                       SCPIError = SyntaxErr;
0021FB 964842rr        9637         MOV.B   ES,#SEG( _SCPIError )
0021FF 9908rrrr        9638         MOV.W   R0,#SOF( _SCPIError )
002203 BA03            9639         MOV.W   [R0],#03H
002205 FE17            9640         BR      _509
002205 FE1700          9640         BR      _509
002208                 9641 _502:
                       9642 ; rs232cmd.c 2700                               else
                       9643 ; rs232cmd.c 2701                               {
                       9644 ; rs232cmd.c 2702                                       signal = FindParameter( Cmd, EmbAudioSign
                            alPar);
002208 9918rrrr        9646         MOV.W   R1,#SEG( _Cmd )
00220C 9908rrrr        9647         MOV.W   R0,#SOF( _Cmd )
002210 9938rrrr        9648         MOV.W   R3,#SEG( _EmbAudioSignalPar )
002214 9928rrrr        9649         MOV.W   R2,#SOF( _EmbAudioSignalPar )
002218 C51EC3          9650         CALL    _FindParameter
                       9652 ; rs232cmd.c 2703               
                       9653 ; rs232cmd.c 2704                                       if ( signal > -1)
00221B 9904FFFF        9655         CMP.W   R0,#0FFFFH
00221F FD04            9656         BLE     _503
                       9658 ; rs232cmd.c 2705                                               SetCBEmbAudioSignal( signal);
                       9660         CALL    _SetCBEmbAudioSignal
002221 C4rrrrrr       +9660 ;       FCALL   _SetCBEmbAudioSignal
002225 FE07            9661         BR      _509
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 160

ADDR   CODE            LINE SOURCELINE
002225 FE0700          9661         BR      _509
002228                 9662 _503:
                       9663 ; rs232cmd.c 2706                                       else
                       9664 ; rs232cmd.c 2707                                               SCPIError = DataOutOfRange;
002228 964842rr        9666         MOV.B   ES,#SEG( _SCPIError )
00222C 9908rrrr        9667         MOV.W   R0,#SOF( _SCPIError )
002230 9A080021        9668         MOV.W   [R0],#021H
                       9669 ; rs232cmd.c 2708                               }
                       9670 ; rs232cmd.c 2709                       }
                       9671 ; rs232cmd.c 2710               }
002234                 9673 _509:
                       9674 ; rs232cmd.c 2711       }
002234 2F30            9676         POP.W   R4, R5
002236 D680            9678         RET
                       9681 ; rs232cmd.c 2712       
                       9682 ; rs232cmd.c 2713       /************************************************************************
                            **/
                       9683 ; rs232cmd.c 2714       /* AudioGenOutput                                                        
                                                                                                                             
                                                 RS232CMD.C */
                       9684 ; rs232cmd.c 2715       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9685 ; rs232cmd.c 2716       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                       9686 ; rs232cmd.c 2717       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                       9687 ; rs232cmd.c 2718       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9688 ; rs232cmd.c 2719       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                       9689 ; rs232cmd.c 2720       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                       9690 ; rs232cmd.c 2721       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                       9691 ; rs232cmd.c 2722       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9692 ; rs232cmd.c 2723       /************************************************************************
                            **/
                       9693 ; rs232cmd.c 2724       void AudioGenOutput( void)
                       9694 ; rs232cmd.c 2725       {
                       9695         ALIGN   1
                       9697         PUBLIC  _AudioGenOutput
002238                 9698 _AudioGenOutput:
002238 0F30            9702         PUSH.W  R4, R5
                       9708 ; rs232cmd.c 2726               int output;
                       9709 ; rs232cmd.c 2727               char code *str;
                       9710 ; rs232cmd.c 2728       
                       9711 ; rs232cmd.c 2729               if ( CmdExecute && !SCPIError)
00223A 964842rr        9713         MOV.B   ES,#SEG( _CmdExecute )
00223E 9908rrrr        9714         MOV.W   R0,#SOF( _CmdExecute )
002242 8200            9715         MOV.B   R0L,[R0]
002244 F377            9716         BEQ     _525
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 161

ADDR   CODE            LINE SOURCELINE
002246 964842rr        9717         MOV.B   ES,#SEG( _SCPIError )
00224A 9908rrrr        9718         MOV.W   R0,#SOF( _SCPIError )
00224E 8A00            9719         MOV.W   R0,[R0]
002250 F271            9720         BNE     _525
                       9721 ; rs232cmd.c 2730               {
                       9722 ; rs232cmd.c 2731                       if ( CmdRequest)
002252 964842rr        9724         MOV.B   ES,#SEG( _CmdRequest )
002256 9908rrrr        9725         MOV.W   R0,#SOF( _CmdRequest )
00225A 8200            9726         MOV.B   R0L,[R0]
00225C F33F            9727         BEQ     _516
                       9728 ; rs232cmd.c 2732                       {
                       9729 ; rs232cmd.c 2733                               if ( ParCnt)
00225E 964842rr        9731         MOV.B   ES,#SEG( _ParCnt )
002262 9908rrrr        9732         MOV.W   R0,#SOF( _ParCnt )
002266 8200            9733         MOV.B   R0L,[R0]
002268 F306            9734         BEQ     _513
                       9735 ; rs232cmd.c 2734                                       SCPIError = ParNotAllowed;
00226A 964842rr        9737         MOV.B   ES,#SEG( _SCPIError )
00226E 9908rrrr        9738         MOV.W   R0,#SOF( _SCPIError )
002272 BA06            9739         MOV.W   [R0],#06H
002274 FE5F            9740         BR      _525
002274 FE5F            9740         BR      _525
002276                 9741 _513:
                       9742 ; rs232cmd.c 2735                               else
                       9743 ; rs232cmd.c 2736                               {
                       9744 ; rs232cmd.c 2737                                       str = AudioOutputPar[AudioOutput].LongNam
                            e;
002276 964842rr        9746         MOV.B   ES,#SEG( _AudioOutput )
00227A 9908rrrr        9747         MOV.W   R0,#SOF( _AudioOutput )
00227E 8A00            9748         MOV.W   R0,[R0]
002280 E900000C        9749         MULU.W  R0,#0CH
002284 8920            9750         MOV.W   R2,R0
002286 B930            9751         MOVS.W  R3,#00H
002288 9918rrrr        9752         MOV.W   R1,#SEG( _AudioOutputPar )
00228C 9908rrrr        9753         MOV.W   R0,#SOF( _AudioOutputPar )
002290 0902            9754         ADD.W   R0,R2
002292 1913            9755         ADDC.W  R1,R3
002294 862C43          9756         MOV.B   CS,R1L
002297 8820            9757         MOVC.W  R2,[R0+]
002299 99040000        9758         CMP.W   R0,#00H
00229D F202            9759         BNE     _526
00229F A64143          9760         ADDS.B  CS,#01H
00229F A64143          9760         ADDS.B  CS,#01H
0022A2                 9761 _526:
0022A2 8830            9762         MOVC.W  R3,[R0+]
0022A4 8953            9763         MOV.W   R5,R3
0022A6 8942            9764         MOV.W   R4,R2
                       9766 ; rs232cmd.c 2738       
                       9767 ; rs232cmd.c 2739                                       while ( *str)
0022A8 866C43          9769         MOV.B   CS,R3L
0022AB 8062            9770         MOVC.B  R3L,[R2+]
0022AD F312            9771         BEQ     _515
0022AD F31200          9771         BEQ     _515
0022B0                 9772 _514:
                       9773 ; rs232cmd.c 2740                                               rs232putchar( *str++);
0022B0 8915            9775         MOV.W   R1,R5
0022B2 8904            9776         MOV.W   R0,R4
0022B4 862C43          9777         MOV.B   CS,R1L
0022B7 8020            9778         MOVC.B  R1L,[R0+]
0022B9 8102            9779         MOV.B   R0L,R1L
                       9780         CALL    _rs232putchar
0022BB C4rrrrrr       +9780 ;       FCALL   _rs232putchar
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 162

ADDR   CODE            LINE SOURCELINE
0022BF 99400001        9781         ADD.W   R4,#01H
0022C3 99510000        9782         ADDC.W  R5,#00H
0022C7 8915            9786         MOV.W   R1,R5
0022C9 8904            9787         MOV.W   R0,R4
0022CB 862C43          9788         MOV.B   CS,R1L
0022CE 8020            9789         MOVC.B  R1L,[R0+]
0022D0 F2EF            9790         BNE     _514
0022D2                 9792 _515:
                       9793 ; rs232cmd.c 2741       
                       9794 ; rs232cmd.c 2742                                       rs232putchar('\n');
0022D2 91080A          9796         MOV.B   R0L,#0AH
                       9797         CALL    _rs232putchar
0022D5 C4rrrrrr       +9797 ;       FCALL   _rs232putchar
                       9798 ; rs232cmd.c 2743                               }
                       9799 ; rs232cmd.c 2744                       }
0022D9 FE2D            9801         BR      _525
0022D9 FE2D00          9801         BR      _525
0022DC                 9802 _516:
                       9803 ; rs232cmd.c 2745                       else
                       9804 ; rs232cmd.c 2746                       {
                       9805 ; rs232cmd.c 2747                               if ( ParCnt != 1)
0022DC 964842rr        9807         MOV.B   ES,#SEG( _ParCnt )
0022E0 9908rrrr        9808         MOV.W   R0,#SOF( _ParCnt )
0022E4 8200            9809         MOV.B   R0L,[R0]
0022E6 910401          9810         CMP.B   R0L,#01H
0022E9 F307            9811         BEQ     _517
                       9812 ; rs232cmd.c 2748                                       SCPIError = SyntaxErr;
0022EB 964842rr        9814         MOV.B   ES,#SEG( _SCPIError )
0022EF 9908rrrr        9815         MOV.W   R0,#SOF( _SCPIError )
0022F3 BA03            9816         MOV.W   [R0],#03H
0022F5 FE1F            9817         BR      _525
0022F5 FE1F00          9817         BR      _525
0022F8                 9818 _517:
                       9819 ; rs232cmd.c 2749                               else
                       9820 ; rs232cmd.c 2750                               {
                       9821 ; rs232cmd.c 2751                                       output = FindParameter( Cmd, AudioOutputP
                            ar);
0022F8 9918rrrr        9823         MOV.W   R1,#SEG( _Cmd )
0022FC 9908rrrr        9824         MOV.W   R0,#SOF( _Cmd )
002300 9938rrrr        9825         MOV.W   R3,#SEG( _AudioOutputPar )
002304 9928rrrr        9826         MOV.W   R2,#SOF( _AudioOutputPar )
002308 C51E4B          9827         CALL    _FindParameter
                       9829 ; rs232cmd.c 2752               
                       9830 ; rs232cmd.c 2753                                       if ( output > -1)
00230B 9904FFFF        9832         CMP.W   R0,#0FFFFH
00230F FD0C            9833         BLE     _518
                       9834 ; rs232cmd.c 2754                                       {
                       9835 ; rs232cmd.c 2755                                               if ( SetAudioOutput( output) == F
                            AIL)
                       9837         CALL    _SetAudioOutput
002311 C4rrrrrr       +9837 ;       FCALL   _SetAudioOutput
002315 6900            9839         OR.W    R0,R0
002317 F20E            9840         BNE     _525
                       9841 ; rs232cmd.c 2756                                                       SCPIError = ExecErr;
002319 964842rr        9843         MOV.B   ES,#SEG( _SCPIError )
00231D 9908rrrr        9844         MOV.W   R0,#SOF( _SCPIError )
002321 9A08001D        9845         MOV.W   [R0],#01DH
                       9846 ; rs232cmd.c 2757                                       }
002325 FE07            9848         BR      _525
002325 FE0700          9848         BR      _525
002328                 9849 _518:
                       9850 ; rs232cmd.c 2758                                       else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 163

ADDR   CODE            LINE SOURCELINE
                       9851 ; rs232cmd.c 2759                                               SCPIError = DataOutOfRange;
002328 964842rr        9853         MOV.B   ES,#SEG( _SCPIError )
00232C 9908rrrr        9854         MOV.W   R0,#SOF( _SCPIError )
002330 9A080021        9855         MOV.W   [R0],#021H
                       9856 ; rs232cmd.c 2760                               }
                       9857 ; rs232cmd.c 2761                       }
                       9858 ; rs232cmd.c 2762               }
002334                 9860 _525:
                       9861 ; rs232cmd.c 2763       }
002334 2F30            9863         POP.W   R4, R5
002336 D680            9865         RET
                       9868 ; rs232cmd.c 2764       
                       9869 ; rs232cmd.c 2765       /************************************************************************
                            **/
                       9870 ; rs232cmd.c 2766       /* AudioGenAnalog                                                        
                                                                                                                             
                                                 RS232CMD.C */
                       9871 ; rs232cmd.c 2767       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9872 ; rs232cmd.c 2768       /* Author:              Kim Engedahl, DEV, 000526                        
                                                                                                                             
                                    */
                       9873 ; rs232cmd.c 2769       /* Revised:             000705                                           
                                                                                                                             
                                                                                    */
                       9874 ; rs232cmd.c 2770       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                       9875 ; rs232cmd.c 2771       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                       9876 ; rs232cmd.c 2772       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                       9877 ; rs232cmd.c 2773       /* Returns:       --                                                     
                                                                                                                             
                                                                                                            */
                       9878 ; rs232cmd.c 2774       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                       9879 ; rs232cmd.c 2775       /************************************************************************
                            **/
                       9880 ; rs232cmd.c 2776       void AudioGenAnalog( void)
                       9881 ; rs232cmd.c 2777       {
                       9882         ALIGN   1
                       9884         PUBLIC  _AudioGenAnalog
002338                 9885 _AudioGenAnalog:
002338 0F70            9889         PUSH.W  R4, R5, R6
                       9895 ; rs232cmd.c 2778               char code *str;
                       9896 ; rs232cmd.c 2779               int level;
                       9897 ; rs232cmd.c 2780       
                       9898 ; rs232cmd.c 2781               if ( CmdExecute && !SCPIError)
00233A 964842rr        9900         MOV.B   ES,#SEG( _CmdExecute )
00233E 9908rrrr        9901         MOV.W   R0,#SOF( _CmdExecute )
002342 8200            9902         MOV.B   R0L,[R0]
                       9903         BEQ     _601
002344 F202           +9903 ;       BNE     _LG_604
002346 D500F6         +9903 ;       JMP.L   _601
00234A D500F600       +9903 ;       JMP.L   _601
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 164

ADDR   CODE            LINE SOURCELINE
00234A                +9903 _LG_604:
00234A 964842rr        9904         MOV.B   ES,#SEG( _SCPIError )
00234E 9908rrrr        9905         MOV.W   R0,#SOF( _SCPIError )
002352 8A00            9906         MOV.W   R0,[R0]
                       9907         BNE     _601
002354 F302           +9907 ;       BEQ     _LG_606
002356 D500EE         +9907 ;       JMP.L   _601
00235A D500EE00       +9907 ;       JMP.L   _601
00235A                +9907 _LG_606:
                       9908 ; rs232cmd.c 2782               {
                       9909 ; rs232cmd.c 2783                       if ( !CmdRequest)
00235A 964842rr        9911         MOV.B   ES,#SEG( _CmdRequest )
00235E 9908rrrr        9912         MOV.W   R0,#SOF( _CmdRequest )
002362 8200            9913         MOV.B   R0L,[R0]
002364 F207            9914         BNE     _530
                       9915 ; rs232cmd.c 2784                                       SCPIError = SyntaxErr;
002366 964842rr        9917         MOV.B   ES,#SEG( _SCPIError )
00236A 9908rrrr        9918         MOV.W   R0,#SOF( _SCPIError )
00236E BA03            9919         MOV.W   [R0],#03H
                       9920         BR      _601
002370 D500E1         +9920         JMP.L   _601
002370 D500E100       +9920         JMP.L   _601
002374                 9921 _530:
                       9923 ; rs232cmd.c 2785                       else
                       9924 ; rs232cmd.c 2786                       {
                       9925 ; rs232cmd.c 2787                               if ( ParCnt)
002374 964842rr        9927         MOV.B   ES,#SEG( _ParCnt )
002378 9908rrrr        9928         MOV.W   R0,#SOF( _ParCnt )
00237C 8200            9929         MOV.B   R0L,[R0]
00237E F307            9930         BEQ     _531
                       9931 ; rs232cmd.c 2788                                       SCPIError = ParNotAllowed;
002380 964842rr        9933         MOV.B   ES,#SEG( _SCPIError )
002384 9908rrrr        9934         MOV.W   R0,#SOF( _SCPIError )
002388 BA06            9935         MOV.W   [R0],#06H
                       9936         BR      _601
00238A D500D4         +9936         JMP.L   _601
00238A D500D400       +9936         JMP.L   _601
00238E                 9937 _531:
000000                 9939 RS232CMD_IR     SEGMENT HCODE INSEGMENT ROMDATA
000000                 9940         RSEG    RS232CMD_IR
                       9941         ALIGN   1
000000                 9942 __swtable603:
000000 rrrrrrrrrrrrrr  9943         DW      SOF _534,SEG _534
       rrrrrrrrrrrrrr       
       rrrr                 
000004 rrrrrrrrrrrrrr  9944         DW      SOF _535,SEG _535
       rrrrrrrrrrrrrr       
       rrrr                 
000008 rrrrrrrrrrrrrr  9945         DW      SOF _536,SEG _536
       rrrrrrrrrrrrrr       
       rrrr                 
00000C rrrrrrrrrrrrrr  9946         DW      SOF _537,SEG _537
       rrrrrrrrrrrrrr       
       rrrr                 
000010 rrrrrrrrrrrrrr  9947         DW      SOF _538,SEG _538
       rrrrrrrrrrrrrr       
       rrrr                 
000014 rrrrrrrrrrrrrr  9948         DW      SOF _539,SEG _539
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 165

ADDR   CODE            LINE SOURCELINE
000018 rrrrrrrrrrrrrr  9949         DW      SOF _540,SEG _540
       rrrrrrrrrrrrrr       
       rrrr                 
00001C rrrrrrrrrrrrrr  9950         DW      SOF _541,SEG _541
       rrrrrrrrrrrrrr       
       rrrr                 
000020 rrrrrrrrrrrrrr  9951         DW      SOF _542,SEG _542
       rrrrrrrrrrrrrr       
       rrrr                 
000024 rrrrrrrrrrrrrr  9952         DW      SOF _543,SEG _543
       rrrrrrrrrrrrrr       
       rrrr                 
000028 rrrrrrrrrrrrrr  9953         DW      SOF _544,SEG _544
       rrrrrrrrrrrrrr       
       rrrr                 
00002C rrrrrrrrrrrrrr  9954         DW      SOF _545,SEG _545
       rrrrrrrrrrrrrr       
       rrrr                 
000030 rrrrrrrrrrrrrr  9955         DW      SOF _546,SEG _546
       rrrrrrrrrrrrrr       
       rrrr                 
000034 rrrrrrrrrrrrrr  9956         DW      SOF _547,SEG _547
       rrrrrrrrrrrrrr       
       rrrr                 
000038 rrrrrrrrrrrrrr  9957         DW      SOF _548,SEG _548
       rrrrrrrrrrrrrr       
       rrrr                 
00003C rrrrrrrrrrrrrr  9958         DW      SOF _549,SEG _549
       rrrrrrrrrrrrrr       
       rrrr                 
000040 rrrrrrrrrrrrrr  9959         DW      SOF _550,SEG _550
       rrrrrrrrrrrrrr       
       rrrr                 
000044 rrrrrrrrrrrrrr  9960         DW      SOF _551,SEG _551
       rrrrrrrrrrrrrr       
       rrrr                 
000048 rrrrrrrrrrrrrr  9961         DW      SOF _552,SEG _552
       rrrrrrrrrrrrrr       
       rrrr                 
00004C rrrrrrrrrrrrrr  9962         DW      SOF _553,SEG _553
       rrrrrrrrrrrrrr       
       rrrr                 
000050 rrrrrrrrrrrrrr  9963         DW      SOF _554,SEG _554
       rrrrrrrrrrrrrr       
       rrrr                 
000054 rrrrrrrrrrrrrr  9964         DW      SOF _555,SEG _555
       rrrrrrrrrrrrrr       
       rrrr                 
000058 rrrrrrrrrrrrrr  9965         DW      SOF _556,SEG _556
       rrrrrrrrrrrrrr       
       rrrr                 
00005C rrrrrrrrrrrrrr  9966         DW      SOF _557,SEG _557
       rrrrrrrrrrrrrr       
       rrrr                 
000060 rrrrrrrrrrrrrr  9967         DW      SOF _558,SEG _558
       rrrrrrrrrrrrrr       
       rrrr                 
000064 rrrrrrrrrrrrrr  9968         DW      SOF _559,SEG _559
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 166

ADDR   CODE            LINE SOURCELINE
000068 rrrrrrrrrrrrrr  9969         DW      SOF _560,SEG _560
       rrrrrrrrrrrrrr       
       rrrr                 
00006C rrrrrrrrrrrrrr  9970         DW      SOF _561,SEG _561
       rrrrrrrrrrrrrr       
       rrrr                 
000070 rrrrrrrrrrrrrr  9971         DW      SOF _562,SEG _562
       rrrrrrrrrrrrrr       
       rrrr                 
000074 rrrrrrrrrrrrrr  9972         DW      SOF _563,SEG _563
       rrrrrrrrrrrrrr       
       rrrr                 
00238E                 9973         RSEG    RS232CMD_PR
                       9975 ; rs232cmd.c 2789                               else
                       9976 ; rs232cmd.c 2790                               {
                       9977 ; rs232cmd.c 2791                                       str = AudioSignalPar[AudioSetup[AnalogAud
                            io].Signal].LongName;
00238E 964842rr        9979         MOV.B   ES,#SEG( _AudioSetup+2 )
002392 9908rrrr        9980         MOV.W   R0,#SOF( _AudioSetup+2 )
002396 8A00            9981         MOV.W   R0,[R0]
002398 E900000C        9982         MULU.W  R0,#0CH
00239C 8920            9983         MOV.W   R2,R0
00239E B930            9984         MOVS.W  R3,#00H
0023A0 9918rrrr        9985         MOV.W   R1,#SEG( _AudioSignalPar )
0023A4 9908rrrr        9986         MOV.W   R0,#SOF( _AudioSignalPar )
0023A8 0902            9987         ADD.W   R0,R2
0023AA 1913            9988         ADDC.W  R1,R3
0023AC 862C43          9989         MOV.B   CS,R1L
0023AF 8820            9990         MOVC.W  R2,[R0+]
0023B1 99040000        9991         CMP.W   R0,#00H
0023B5 F202            9992         BNE     _602
0023B7 A64143          9993         ADDS.B  CS,#01H
0023B7 A64143          9993         ADDS.B  CS,#01H
0023BA                 9994 _602:
0023BA 8830            9995         MOVC.W  R3,[R0+]
0023BC 8953            9996         MOV.W   R5,R3
0023BE 8942            9997         MOV.W   R4,R2
                       9999 ; rs232cmd.c 2792       
                      10000 ; rs232cmd.c 2793                                       while ( *str)
0023C0 866C43         10002         MOV.B   CS,R3L
0023C3 8062           10003         MOVC.B  R3L,[R2+]
0023C5 F312           10004         BEQ     _533
0023C5 F31200         10004         BEQ     _533
0023C8                10005 _532:
                      10006 ; rs232cmd.c 2794                                               rs232putchar( *str++);
0023C8 8915           10008         MOV.W   R1,R5
0023CA 8904           10009         MOV.W   R0,R4
0023CC 862C43         10010         MOV.B   CS,R1L
0023CF 8020           10011         MOVC.B  R1L,[R0+]
0023D1 8102           10012         MOV.B   R0L,R1L
                      10013         CALL    _rs232putchar
0023D3 C4rrrrrr       +10013 ;       FCALL   _rs232putchar
0023D7 99400001       10014         ADD.W   R4,#01H
0023DB 99510000       10015         ADDC.W  R5,#00H
0023DF 8915           10019         MOV.W   R1,R5
0023E1 8904           10020         MOV.W   R0,R4
0023E3 862C43         10021         MOV.B   CS,R1L
0023E6 8020           10022         MOVC.B  R1L,[R0+]
0023E8 F2EF           10023         BNE     _532
0023EA                10025 _533:
                      10026 ; rs232cmd.c 2795       
                      10027 ; rs232cmd.c 2796                                       rs232putchar(',');
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 167

ADDR   CODE            LINE SOURCELINE
0023EA 91082C         10029         MOV.B   R0L,#02CH
                      10030         CALL    _rs232putchar
0023ED C4rrrrrr       +10030 ;       FCALL   _rs232putchar
                      10031 ; rs232cmd.c 2797       
                      10032 ; rs232cmd.c 2798                                       str = NULL;
0023F1 B950           10034         MOV.W   R5,#00H
0023F3 B940           10035         MOV.W   R4,#00H
                      10038 ; rs232cmd.c 2799       
                      10039 ; rs232cmd.c 2800                                       switch ( AudioSetup[AnalogAudio].Level)
0023F5 964842rr       10041         MOV.B   ES,#SEG( _AudioSetup+4 )
0023F9 9908rrrr       10042         MOV.W   R0,#SOF( _AudioSetup+4 )
0023FD 8A00           10043         MOV.W   R0,[R0]
0023FF A90F           10044         ADDS.W  R0,#0FH
002401 9904001D       10045         CMP.W   R0,#01DH
002405 F85D           10046         BG      _564
002407 D902           10047         ASL.W   R0,#02H
002409 964843rr       10048         MOV.B   CS,#SEG( __swtable603 )
00240D 9900rrrr       10049         ADD.W   R0,#SOF( __swtable603 )
002411 8810           10050         MOVC.W  R1,[R0+]
002413 0F02           10051         PUSH.W  R1
002415 8810           10052         MOVC.W  R1,[R0+]
002417 0F02           10053         PUSH.W  R1
002419 D680           10054         RET
                      10055 ; rs232cmd.c 2801                                       {
                      10056 ; rs232cmd.c 2802                                               case P10dBm:
00241C                10058 _534:
                      10059 ; rs232cmd.c 2803                                                       level = 10;
00241C 9968000A       10061         MOV.W   R6,#0AH
                      10064 ; rs232cmd.c 2804                                                       break;
002420 FE6E           10066         BR      _596
                      10067 ; rs232cmd.c 2805       
                      10068 ; rs232cmd.c 2806                                               case P8dBm:
002422                10070 _535:
                      10071 ; rs232cmd.c 2807                                                       level = 8;
002422 99680008       10073         MOV.W   R6,#08H
                      10076 ; rs232cmd.c 2808                                                       break;
002426 FE6B           10078         BR      _596
                      10079 ; rs232cmd.c 2809       
                      10080 ; rs232cmd.c 2810                                               case P7dBm:
002428                10082 _536:
                      10083 ; rs232cmd.c 2811                                                       level = 7;
002428 B967           10085         MOV.W   R6,#07H
                      10088 ; rs232cmd.c 2812                                                       break;
00242A FE69           10090         BR      _596
                      10091 ; rs232cmd.c 2813       
                      10092 ; rs232cmd.c 2814                                               case P6dBm:
00242C                10094 _537:
                      10095 ; rs232cmd.c 2815                                                       level = 6;
00242C B966           10097         MOV.W   R6,#06H
                      10100 ; rs232cmd.c 2816                                                       break;
00242E FE67           10102         BR      _596
                      10103 ; rs232cmd.c 2817       
                      10104 ; rs232cmd.c 2818                                               case P5dBm:
002430                10106 _538:
                      10107 ; rs232cmd.c 2819                                                       level = 5;
002430 B965           10109         MOV.W   R6,#05H
                      10112 ; rs232cmd.c 2820                                                       break;
002432 FE65           10114         BR      _596
                      10115 ; rs232cmd.c 2821       
                      10116 ; rs232cmd.c 2822                                               case P4dBm:
002434                10118 _539:
                      10119 ; rs232cmd.c 2823                                                       level = 4;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 168

ADDR   CODE            LINE SOURCELINE
002434 B964           10121         MOV.W   R6,#04H
                      10124 ; rs232cmd.c 2824                                                       break;
002436 FE63           10126         BR      _596
                      10127 ; rs232cmd.c 2825       
                      10128 ; rs232cmd.c 2826                                               case P3dBm:
002438                10130 _540:
                      10131 ; rs232cmd.c 2827                                                       level = 3;
002438 B963           10133         MOV.W   R6,#03H
                      10136 ; rs232cmd.c 2828                                                       break;
00243A FE61           10138         BR      _596
                      10139 ; rs232cmd.c 2829       
                      10140 ; rs232cmd.c 2830                                               case P2dBm:
00243C                10142 _541:
                      10143 ; rs232cmd.c 2831                                                       level = 2;
00243C B962           10145         MOV.W   R6,#02H
                      10148 ; rs232cmd.c 2832                                                       break;
00243E FE5F           10150         BR      _596
                      10151 ; rs232cmd.c 2833       
                      10152 ; rs232cmd.c 2834                                               case P1dBm:
002440                10154 _542:
                      10155 ; rs232cmd.c 2835                                                       level = 1;
002440 B961           10157         MOV.W   R6,#01H
                      10160 ; rs232cmd.c 2836                                                       break;
002442 FE5D           10162         BR      _596
                      10163 ; rs232cmd.c 2837       
                      10164 ; rs232cmd.c 2838                                               case M0dBm:
002444                10166 _543:
                      10167 ; rs232cmd.c 2839                                                       level = 0;
002444 B960           10169         MOV.W   R6,#00H
                      10172 ; rs232cmd.c 2840                                                       break;
002446 FE5B           10174         BR      _596
                      10175 ; rs232cmd.c 2841       
                      10176 ; rs232cmd.c 2842                                               case M1dBm:
002448                10178 _544:
                      10179 ; rs232cmd.c 2843                                                       level = -1;
002448 9968FFFF       10181         MOV.W   R6,#0FFFFH
                      10184 ; rs232cmd.c 2844                                                       break;
00244C FE58           10186         BR      _596
                      10187 ; rs232cmd.c 2845       
                      10188 ; rs232cmd.c 2846                                               case M2dBm:
00244E                10190 _545:
                      10191 ; rs232cmd.c 2847                                                       level = -2;
00244E 9968FFFE       10193         MOV.W   R6,#0FFFEH
                      10196 ; rs232cmd.c 2848                                                       break;
002452 FE55           10198         BR      _596
                      10199 ; rs232cmd.c 2849       
                      10200 ; rs232cmd.c 2850                                               case M3dBm:
002454                10202 _546:
                      10203 ; rs232cmd.c 2851                                                       level = -3;
002454 9968FFFD       10205         MOV.W   R6,#0FFFDH
                      10208 ; rs232cmd.c 2852                                                       break;
002458 FE52           10210         BR      _596
                      10211 ; rs232cmd.c 2853       
                      10212 ; rs232cmd.c 2854                                               case M4dBm:
00245A                10214 _547:
                      10215 ; rs232cmd.c 2855                                                       level = -4;
00245A 9968FFFC       10217         MOV.W   R6,#0FFFCH
                      10220 ; rs232cmd.c 2856                                                       break;
00245E FE4F           10222         BR      _596
                      10223 ; rs232cmd.c 2857       
                      10224 ; rs232cmd.c 2858                                               case M5dBm:
002460                10226 _548:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 169

ADDR   CODE            LINE SOURCELINE
                      10227 ; rs232cmd.c 2859                                                       level = -5;
002460 9968FFFB       10229         MOV.W   R6,#0FFFBH
                      10232 ; rs232cmd.c 2860                                                       break;
002464 FE4C           10234         BR      _596
                      10235 ; rs232cmd.c 2861       
                      10236 ; rs232cmd.c 2862                                               case M6dBm:
002466                10238 _549:
                      10239 ; rs232cmd.c 2863                                                       level = -6;
002466 9968FFFA       10241         MOV.W   R6,#0FFFAH
                      10244 ; rs232cmd.c 2864                                                       break;
00246A FE49           10246         BR      _596
                      10247 ; rs232cmd.c 2865       
                      10248 ; rs232cmd.c 2866                                               case M7dBm:
00246C                10250 _550:
                      10251 ; rs232cmd.c 2867                                                       level = -7;
00246C 9968FFF9       10253         MOV.W   R6,#0FFF9H
                      10256 ; rs232cmd.c 2868                                                       break;
002470 FE46           10258         BR      _596
                      10259 ; rs232cmd.c 2869       
                      10260 ; rs232cmd.c 2870                                               case M8dBm:
002472                10262 _551:
                      10263 ; rs232cmd.c 2871                                                       level = -8;
002472 9968FFF8       10265         MOV.W   R6,#0FFF8H
                      10268 ; rs232cmd.c 2872                                                       break;
002476 FE43           10270         BR      _596
                      10271 ; rs232cmd.c 2873       
                      10272 ; rs232cmd.c 2874                                               case M9dBm:
002478                10274 _552:
                      10275 ; rs232cmd.c 2875                                                       level = -9;
002478 9968FFF7       10277         MOV.W   R6,#0FFF7H
                      10280 ; rs232cmd.c 2876                                                       break;
00247C FE40           10282         BR      _596
                      10283 ; rs232cmd.c 2877       
                      10284 ; rs232cmd.c 2878                                               case M10dBm:
00247E                10286 _553:
                      10287 ; rs232cmd.c 2879                                                       level = -10;
00247E 9968FFF6       10289         MOV.W   R6,#0FFF6H
                      10292 ; rs232cmd.c 2880                                                       break;
002482 FE3D           10294         BR      _596
                      10295 ; rs232cmd.c 2881       
                      10296 ; rs232cmd.c 2882                                               case M11dBm:
002484                10298 _554:
                      10299 ; rs232cmd.c 2883                                                       level = -11;
002484 9968FFF5       10301         MOV.W   R6,#0FFF5H
                      10304 ; rs232cmd.c 2884                                                       break;
002488 FE3A           10306         BR      _596
                      10307 ; rs232cmd.c 2885       
                      10308 ; rs232cmd.c 2886                                               case M12dBm:
00248A                10310 _555:
                      10311 ; rs232cmd.c 2887                                                       level = -12;
00248A 9968FFF4       10313         MOV.W   R6,#0FFF4H
                      10316 ; rs232cmd.c 2888                                                       break;
00248E FE37           10318         BR      _596
                      10319 ; rs232cmd.c 2889       
                      10320 ; rs232cmd.c 2890                                               case M15dBm:
002490                10322 _556:
                      10323 ; rs232cmd.c 2891                                                       level = -15;
002490 9968FFF1       10325         MOV.W   R6,#0FFF1H
                      10328 ; rs232cmd.c 2892                                                       break;
002494 FE34           10330         BR      _596
                      10331 ; rs232cmd.c 2893       
                      10332 ; rs232cmd.c 2894                                               case M18dBm:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 170

ADDR   CODE            LINE SOURCELINE
002496                10334 _557:
                      10335 ; rs232cmd.c 2895                                                       level = -18;
002496 9968FFEE       10337         MOV.W   R6,#0FFEEH
                      10340 ; rs232cmd.c 2896                                                       break;
00249A FE31           10342         BR      _596
                      10343 ; rs232cmd.c 2897       
                      10344 ; rs232cmd.c 2898                                               case M21dBm:
00249C                10346 _558:
                      10347 ; rs232cmd.c 2899                                                       level = -21;
00249C 9968FFEB       10349         MOV.W   R6,#0FFEBH
                      10352 ; rs232cmd.c 2900                                                       break;
0024A0 FE2E           10354         BR      _596
                      10355 ; rs232cmd.c 2901       
                      10356 ; rs232cmd.c 2902                                               case M24dBm:
0024A2                10358 _559:
                      10359 ; rs232cmd.c 2903                                                       level = -24;
0024A2 9968FFE8       10361         MOV.W   R6,#0FFE8H
                      10364 ; rs232cmd.c 2904                                                       break;
0024A6 FE2B           10366         BR      _596
                      10367 ; rs232cmd.c 2905       
                      10368 ; rs232cmd.c 2906                                               case M27dBm:
0024A8                10370 _560:
                      10371 ; rs232cmd.c 2907                                                       level = -27;
0024A8 9968FFE5       10373         MOV.W   R6,#0FFE5H
                      10376 ; rs232cmd.c 2908                                                       break;
0024AC FE28           10378         BR      _596
                      10379 ; rs232cmd.c 2909       
                      10380 ; rs232cmd.c 2910                                               case M30dBm:
0024AE                10382 _561:
                      10383 ; rs232cmd.c 2911                                                       level = -30;
0024AE 9968FFE2       10385         MOV.W   R6,#0FFE2H
                      10388 ; rs232cmd.c 2912                                                       break;
0024B2 FE25           10390         BR      _596
                      10391 ; rs232cmd.c 2913       
                      10392 ; rs232cmd.c 2914                                               case M33dBm:
0024B4                10394 _562:
                      10395 ; rs232cmd.c 2915                                                       level = -33;
0024B4 9968FFDF       10397         MOV.W   R6,#0FFDFH
                      10400 ; rs232cmd.c 2916                                                       break;
0024B8 FE22           10402         BR      _596
                      10403 ; rs232cmd.c 2917       
                      10404 ; rs232cmd.c 2918                                               case M36dBm:
0024BA                10406 _563:
                      10407 ; rs232cmd.c 2919                                                       level = -36;
0024BA 9968FFDC       10409         MOV.W   R6,#0FFDCH
                      10412 ; rs232cmd.c 2920                                                       break;
0024BE FE1F           10414         BR      _596
                      10415 ; rs232cmd.c 2921       
                      10416 ; rs232cmd.c 2922                                               default:
0024C0                10418 _564:
                      10419 ; rs232cmd.c 2923                                                       str = SILENCEParTxt;
0024C0 9958rrrr       10421         MOV.W   R5,#SEG( _SILENCEParTxt )
0024C4 9948rrrr       10422         MOV.W   R4,#SOF( _SILENCEParTxt )
                      10425 ; rs232cmd.c 2924       
                      10426 ; rs232cmd.c 2925                                                       while ( *str)
0024C8 8915           10428         MOV.W   R1,R5
0024CA 8904           10429         MOV.W   R0,R4
0024CC 862C43         10430         MOV.B   CS,R1L
0024CF 8020           10431         MOVC.B  R1L,[R0+]
0024D1 F312           10432         BEQ     _566
0024D1 F31200         10432         BEQ     _566
0024D4                10433 _565:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 171

ADDR   CODE            LINE SOURCELINE
                      10434 ; rs232cmd.c 2926                                                               rs232putchar( *st
                            r++);
0024D4 8915           10436         MOV.W   R1,R5
0024D6 8904           10437         MOV.W   R0,R4
0024D8 862C43         10438         MOV.B   CS,R1L
0024DB 8020           10439         MOVC.B  R1L,[R0+]
0024DD 8102           10440         MOV.B   R0L,R1L
                      10441         CALL    _rs232putchar
0024DF C4rrrrrr       +10441 ;       FCALL   _rs232putchar
0024E3 99400001       10442         ADD.W   R4,#01H
0024E7 99510000       10443         ADDC.W  R5,#00H
0024EB 8915           10447         MOV.W   R1,R5
0024ED 8904           10448         MOV.W   R0,R4
0024EF 862C43         10449         MOV.B   CS,R1L
0024F2 8020           10450         MOVC.B  R1L,[R0+]
0024F4 F2EF           10451         BNE     _565
0024F6                10453 _566:
                      10454 ; rs232cmd.c 2927       
                      10455 ; rs232cmd.c 2928                                                       rs232putchar(',');
0024F6 91082C         10457         MOV.B   R0L,#02CH
                      10458         CALL    _rs232putchar
0024F9 C4rrrrrr       +10458 ;       FCALL   _rs232putchar
                      10459 ; rs232cmd.c 2929                                                       break;
                      10460 ; rs232cmd.c 2930                                               }
0024FE                10462 _596:
                      10463 ; rs232cmd.c 2931       
                      10464 ; rs232cmd.c 2932                                       if ( str == NULL)
0024FE 6954           10466         OR.W    R5,R4
002500 F20A           10467         BNE     _597
                      10468 ; rs232cmd.c 2933                                               rs232printf( 6, "%d,", level);
002502 B906           10470         MOV.W   R0,#06H
002504 0F40           10471         PUSH.W  R6
002506 9938rrrr       10474         MOV.W   R3,#SEG( _529 )
00250A 9928rrrr       10475         MOV.W   R2,#SOF( _529 )
00250E 0F0C           10476         PUSH.W  R2, R3
                      10478         CALL    _rs232printf
002510 C4rrrrrr       +10478 ;       FCALL   _rs232printf
002514 A976           10479         ADDS.W  R7,#06H
002516                10481 _597:
                      10482 ; rs232cmd.c 2934       
                      10483 ; rs232cmd.c 2935                                       rs232printf( 6, "%d\n", AudioSetup[Analog
                            Audio].Click);                  
002516 B906           10485         MOV.W   R0,#06H
002518 964842rr       10486         MOV.B   ES,#SEG( _AudioSetup+12 )
00251C 9918rrrr       10487         MOV.W   R1,#SOF( _AudioSetup+12 )
002520 8A11           10488         MOV.W   R1,[R1]
002522 0F02           10489         PUSH.W  R1
002524 9938rrrr       10491         MOV.W   R3,#SEG( _9 )
002528 9928rrrr       10492         MOV.W   R2,#SOF( _9 )
00252C 0F0C           10493         PUSH.W  R2, R3
                      10495         CALL    _rs232printf
00252E C4rrrrrr       +10495 ;       FCALL   _rs232printf
002532 A976           10496         ADDS.W  R7,#06H
                      10498 ; rs232cmd.c 2936                               }
                      10499 ; rs232cmd.c 2937                       }
                      10500 ; rs232cmd.c 2938               }
002534                10502 _601:
                      10503 ; rs232cmd.c 2939       }
002534 2F70           10505         POP.W   R4, R5, R6
002536 D680           10507         RET
                      10510 ; rs232cmd.c 2940       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 172

ADDR   CODE            LINE SOURCELINE
                      10511 ; rs232cmd.c 2941       /************************************************************************
                            **/
                      10512 ; rs232cmd.c 2942       /* AudioGenAnalogSignal                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      10513 ; rs232cmd.c 2943       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10514 ; rs232cmd.c 2944       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      10515 ; rs232cmd.c 2945       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      10516 ; rs232cmd.c 2946       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10517 ; rs232cmd.c 2947       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      10518 ; rs232cmd.c 2948       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      10519 ; rs232cmd.c 2949       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      10520 ; rs232cmd.c 2950       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      10521 ; rs232cmd.c 2951       /************************************************************************
                            **/
                      10522 ; rs232cmd.c 2952       void AudioGenAnalogSignal( void)
                      10523 ; rs232cmd.c 2953       {
                      10524         ALIGN   1
                      10526         PUBLIC  _AudioGenAnalogSignal
002538                10527 _AudioGenAnalogSignal:
002538 0F30           10531         PUSH.W  R4, R5
                      10537 ; rs232cmd.c 2954               int signal;
                      10538 ; rs232cmd.c 2955               char code *str;
                      10539 ; rs232cmd.c 2956       
                      10540 ; rs232cmd.c 2957               if ( CmdExecute && !SCPIError)
00253A 964842rr       10542         MOV.B   ES,#SEG( _CmdExecute )
00253E 9908rrrr       10543         MOV.W   R0,#SOF( _CmdExecute )
002542 8200           10544         MOV.B   R0L,[R0]
002544 F379           10545         BEQ     _616
002546 964842rr       10546         MOV.B   ES,#SEG( _SCPIError )
00254A 9908rrrr       10547         MOV.W   R0,#SOF( _SCPIError )
00254E 8A00           10548         MOV.W   R0,[R0]
002550 F273           10549         BNE     _616
                      10550 ; rs232cmd.c 2958               {
                      10551 ; rs232cmd.c 2959                       if ( CmdRequest)
002552 964842rr       10553         MOV.B   ES,#SEG( _CmdRequest )
002556 9908rrrr       10554         MOV.W   R0,#SOF( _CmdRequest )
00255A 8200           10555         MOV.B   R0L,[R0]
00255C F33F           10556         BEQ     _607
                      10557 ; rs232cmd.c 2960                       {
                      10558 ; rs232cmd.c 2961                               if ( ParCnt)
00255E 964842rr       10560         MOV.B   ES,#SEG( _ParCnt )
002562 9908rrrr       10561         MOV.W   R0,#SOF( _ParCnt )
002566 8200           10562         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 173

ADDR   CODE            LINE SOURCELINE
002568 F306           10563         BEQ     _604
                      10564 ; rs232cmd.c 2962                                       SCPIError = ParNotAllowed;
00256A 964842rr       10566         MOV.B   ES,#SEG( _SCPIError )
00256E 9908rrrr       10567         MOV.W   R0,#SOF( _SCPIError )
002572 BA06           10568         MOV.W   [R0],#06H
002574 FE61           10569         BR      _616
002574 FE61           10569         BR      _616
002576                10570 _604:
                      10571 ; rs232cmd.c 2963                               else
                      10572 ; rs232cmd.c 2964                               {
                      10573 ; rs232cmd.c 2965                                       str = AudioSignalPar[AudioSetup[AnalogAud
                            io].Signal].LongName;
002576 964842rr       10575         MOV.B   ES,#SEG( _AudioSetup+2 )
00257A 9908rrrr       10576         MOV.W   R0,#SOF( _AudioSetup+2 )
00257E 8A00           10577         MOV.W   R0,[R0]
002580 E900000C       10578         MULU.W  R0,#0CH
002584 8920           10579         MOV.W   R2,R0
002586 B930           10580         MOVS.W  R3,#00H
002588 9918rrrr       10581         MOV.W   R1,#SEG( _AudioSignalPar )
00258C 9908rrrr       10582         MOV.W   R0,#SOF( _AudioSignalPar )
002590 0902           10583         ADD.W   R0,R2
002592 1913           10584         ADDC.W  R1,R3
002594 862C43         10585         MOV.B   CS,R1L
002597 8820           10586         MOVC.W  R2,[R0+]
002599 99040000       10587         CMP.W   R0,#00H
00259D F202           10588         BNE     _617
00259F A64143         10589         ADDS.B  CS,#01H
00259F A64143         10589         ADDS.B  CS,#01H
0025A2                10590 _617:
0025A2 8830           10591         MOVC.W  R3,[R0+]
0025A4 8953           10592         MOV.W   R5,R3
0025A6 8942           10593         MOV.W   R4,R2
                      10595 ; rs232cmd.c 2966       
                      10596 ; rs232cmd.c 2967                                       while ( *str)
0025A8 866C43         10598         MOV.B   CS,R3L
0025AB 8062           10599         MOVC.B  R3L,[R2+]
0025AD F312           10600         BEQ     _606
0025AD F31200         10600         BEQ     _606
0025B0                10601 _605:
                      10602 ; rs232cmd.c 2968                                               rs232putchar( *str++);
0025B0 8915           10604         MOV.W   R1,R5
0025B2 8904           10605         MOV.W   R0,R4
0025B4 862C43         10606         MOV.B   CS,R1L
0025B7 8020           10607         MOVC.B  R1L,[R0+]
0025B9 8102           10608         MOV.B   R0L,R1L
                      10609         CALL    _rs232putchar
0025BB C4rrrrrr       +10609 ;       FCALL   _rs232putchar
0025BF 99400001       10610         ADD.W   R4,#01H
0025C3 99510000       10611         ADDC.W  R5,#00H
0025C7 8915           10615         MOV.W   R1,R5
0025C9 8904           10616         MOV.W   R0,R4
0025CB 862C43         10617         MOV.B   CS,R1L
0025CE 8020           10618         MOVC.B  R1L,[R0+]
0025D0 F2EF           10619         BNE     _605
0025D2                10621 _606:
                      10622 ; rs232cmd.c 2969       
                      10623 ; rs232cmd.c 2970                                       rs232putchar('\n');
0025D2 91080A         10625         MOV.B   R0L,#0AH
                      10626         CALL    _rs232putchar
0025D5 C4rrrrrr       +10626 ;       FCALL   _rs232putchar
                      10627 ; rs232cmd.c 2971                               }
                      10628 ; rs232cmd.c 2972                       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 174

ADDR   CODE            LINE SOURCELINE
0025D9 FE2F           10630         BR      _616
0025D9 FE2F00         10630         BR      _616
0025DC                10631 _607:
                      10632 ; rs232cmd.c 2973                       else
                      10633 ; rs232cmd.c 2974                       {
                      10634 ; rs232cmd.c 2975                               if ( ParCnt != 1)
0025DC 964842rr       10636         MOV.B   ES,#SEG( _ParCnt )
0025E0 9908rrrr       10637         MOV.W   R0,#SOF( _ParCnt )
0025E4 8200           10638         MOV.B   R0L,[R0]
0025E6 910401         10639         CMP.B   R0L,#01H
0025E9 F307           10640         BEQ     _608
                      10641 ; rs232cmd.c 2976                                       SCPIError = SyntaxErr;
0025EB 964842rr       10643         MOV.B   ES,#SEG( _SCPIError )
0025EF 9908rrrr       10644         MOV.W   R0,#SOF( _SCPIError )
0025F3 BA03           10645         MOV.W   [R0],#03H
0025F5 FE21           10646         BR      _616
0025F5 FE2100         10646         BR      _616
0025F8                10647 _608:
                      10648 ; rs232cmd.c 2977                               else
                      10649 ; rs232cmd.c 2978                               {
                      10650 ; rs232cmd.c 2979                                       signal = FindParameter( Cmd, AudioSignalP
                            ar);
0025F8 9918rrrr       10652         MOV.W   R1,#SEG( _Cmd )
0025FC 9908rrrr       10653         MOV.W   R0,#SOF( _Cmd )
002600 9938rrrr       10654         MOV.W   R3,#SEG( _AudioSignalPar )
002604 9928rrrr       10655         MOV.W   R2,#SOF( _AudioSignalPar )
002608 C51CCB         10656         CALL    _FindParameter
                      10658 ; rs232cmd.c 2980               
                      10659 ; rs232cmd.c 2981                                       if ( signal > -1)
00260B 8910           10661         MOV.W   R1,R0
00260D 9914FFFF       10662         CMP.W   R1,#0FFFFH
002611 FD0D           10665         BLE     _609
                      10666 ; rs232cmd.c 2982                                       {
                      10667 ; rs232cmd.c 2983                                               if ( SetAudioSignal( AnalogAudio,
                             signal) == FAIL)
002613 B900           10669         MOV.W   R0,#00H
                      10670         CALL    _SetAudioSignal
002615 C4rrrrrr       +10670 ;       FCALL   _SetAudioSignal
002619 6900           10672         OR.W    R0,R0
00261B F20E           10673         BNE     _616
                      10674 ; rs232cmd.c 2984                                                               SCPIError = ExecE
                            rr;
00261D 964842rr       10676         MOV.B   ES,#SEG( _SCPIError )
002621 9908rrrr       10677         MOV.W   R0,#SOF( _SCPIError )
002625 9A08001D       10678         MOV.W   [R0],#01DH
                      10679 ; rs232cmd.c 2985                                       }
002629 FE07           10681         BR      _616
002629 FE0700         10681         BR      _616
00262C                10682 _609:
                      10683 ; rs232cmd.c 2986                                       else
                      10684 ; rs232cmd.c 2987                                               SCPIError = DataOutOfRange;
00262C 964842rr       10686         MOV.B   ES,#SEG( _SCPIError )
002630 9908rrrr       10687         MOV.W   R0,#SOF( _SCPIError )
002634 9A080021       10688         MOV.W   [R0],#021H
                      10689 ; rs232cmd.c 2988                               }
                      10690 ; rs232cmd.c 2989                       }
                      10691 ; rs232cmd.c 2990               }
002638                10693 _616:
                      10694 ; rs232cmd.c 2991       }
002638 2F30           10696         POP.W   R4, R5
00263A D680           10698         RET
                      10701 ; rs232cmd.c 2992       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 175

ADDR   CODE            LINE SOURCELINE
                      10702 ; rs232cmd.c 2993       /************************************************************************
                            **/
                      10703 ; rs232cmd.c 2994       /* AudioGenAnalogLevel                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      10704 ; rs232cmd.c 2995       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10705 ; rs232cmd.c 2996       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      10706 ; rs232cmd.c 2997       /* Revised:             000705                                           
                                                                                                                             
                                                                                    */
                      10707 ; rs232cmd.c 2998       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      10708 ; rs232cmd.c 2999       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      10709 ; rs232cmd.c 3000       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      10710 ; rs232cmd.c 3001       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      10711 ; rs232cmd.c 3002       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      10712 ; rs232cmd.c 3003       /************************************************************************
                            **/
                      10713 ; rs232cmd.c 3004       void AudioGenAnalogLevel( void)
                      10714 ; rs232cmd.c 3005       {
                      10715         ALIGN   1
                      10717         PUBLIC  _AudioGenAnalogLevel
00263C                10718 _AudioGenAnalogLevel:
000078                10722         RSEG    RS232CMD_IR
                      10723         ALIGN   1
000078                10724 __swtable758:
000078 rrrrrrrrrrrrrr 10725         DW      SOF _653,SEG _653
       rrrrrrrrrrrrrr       
       rrrr                 
00007C rrrrrrrrrrrrrr 10726         DW      SOF _621,SEG _621
       rrrrrrrrrrrrrr       
       rrrr                 
000080 rrrrrrrrrrrrrr 10727         DW      SOF _622,SEG _622
       rrrrrrrrrrrrrr       
       rrrr                 
000084 rrrrrrrrrrrrrr 10728         DW      SOF _623,SEG _623
       rrrrrrrrrrrrrr       
       rrrr                 
000088 rrrrrrrrrrrrrr 10729         DW      SOF _624,SEG _624
       rrrrrrrrrrrrrr       
       rrrr                 
00008C rrrrrrrrrrrrrr 10730         DW      SOF _625,SEG _625
       rrrrrrrrrrrrrr       
       rrrr                 
000090 rrrrrrrrrrrrrr 10731         DW      SOF _626,SEG _626
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 176

ADDR   CODE            LINE SOURCELINE
000094 rrrrrrrrrrrrrr 10732         DW      SOF _627,SEG _627
       rrrrrrrrrrrrrr       
       rrrr                 
000098 rrrrrrrrrrrrrr 10733         DW      SOF _628,SEG _628
       rrrrrrrrrrrrrr       
       rrrr                 
00009C rrrrrrrrrrrrrr 10734         DW      SOF _629,SEG _629
       rrrrrrrrrrrrrr       
       rrrr                 
0000A0 rrrrrrrrrrrrrr 10735         DW      SOF _630,SEG _630
       rrrrrrrrrrrrrr       
       rrrr                 
0000A4 rrrrrrrrrrrrrr 10736         DW      SOF _631,SEG _631
       rrrrrrrrrrrrrr       
       rrrr                 
0000A8 rrrrrrrrrrrrrr 10737         DW      SOF _632,SEG _632
       rrrrrrrrrrrrrr       
       rrrr                 
0000AC rrrrrrrrrrrrrr 10738         DW      SOF _633,SEG _633
       rrrrrrrrrrrrrr       
       rrrr                 
0000B0 rrrrrrrrrrrrrr 10739         DW      SOF _634,SEG _634
       rrrrrrrrrrrrrr       
       rrrr                 
0000B4 rrrrrrrrrrrrrr 10740         DW      SOF _635,SEG _635
       rrrrrrrrrrrrrr       
       rrrr                 
0000B8 rrrrrrrrrrrrrr 10741         DW      SOF _636,SEG _636
       rrrrrrrrrrrrrr       
       rrrr                 
0000BC rrrrrrrrrrrrrr 10742         DW      SOF _637,SEG _637
       rrrrrrrrrrrrrr       
       rrrr                 
0000C0 rrrrrrrrrrrrrr 10743         DW      SOF _638,SEG _638
       rrrrrrrrrrrrrr       
       rrrr                 
0000C4 rrrrrrrrrrrrrr 10744         DW      SOF _639,SEG _639
       rrrrrrrrrrrrrr       
       rrrr                 
0000C8 rrrrrrrrrrrrrr 10745         DW      SOF _640,SEG _640
       rrrrrrrrrrrrrr       
       rrrr                 
0000CC rrrrrrrrrrrrrr 10746         DW      SOF _641,SEG _641
       rrrrrrrrrrrrrr       
       rrrr                 
0000D0 rrrrrrrrrrrrrr 10747         DW      SOF _642,SEG _642
       rrrrrrrrrrrrrr       
       rrrr                 
0000D4 rrrrrrrrrrrrrr 10748         DW      SOF _643,SEG _643
       rrrrrrrrrrrrrr       
       rrrr                 
0000D8 rrrrrrrrrrrrrr 10749         DW      SOF _644,SEG _644
       rrrrrrrrrrrrrr       
       rrrr                 
0000DC rrrrrrrrrrrrrr 10750         DW      SOF _645,SEG _645
       rrrrrrrrrrrrrr       
       rrrr                 
0000E0 rrrrrrrrrrrrrr 10751         DW      SOF _646,SEG _646
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 177

ADDR   CODE            LINE SOURCELINE
0000E4 rrrrrrrrrrrrrr 10752         DW      SOF _647,SEG _647
       rrrrrrrrrrrrrr       
       rrrr                 
0000E8 rrrrrrrrrrrrrr 10753         DW      SOF _648,SEG _648
       rrrrrrrrrrrrrr       
       rrrr                 
0000EC rrrrrrrrrrrrrr 10754         DW      SOF _649,SEG _649
       rrrrrrrrrrrrrr       
       rrrr                 
00263C                10755         RSEG    RS232CMD_PR
00263C 0F30           10756         PUSH.W  R4, R5
00263E A97E           10758         ADDS.W  R7,#0EH
                      10763 ; rs232cmd.c 3006               code char *str;
                      10764 ; rs232cmd.c 3007               int level;
                      10765 ; rs232cmd.c 3008       
                      10766 ; rs232cmd.c 3009               if ( CmdExecute && !SCPIError)
002640 964842rr       10768         MOV.B   ES,#SEG( _CmdExecute )
002644 9908rrrr       10769         MOV.W   R0,#SOF( _CmdExecute )
002648 8200           10770         MOV.B   R0L,[R0]
                      10771         BEQ     _757
00264A F202           +10771 ;       BNE     _LG_646
00264C D50165         +10771 ;       JMP.L   _757
002650 D5016500       +10771 ;       JMP.L   _757
002650                +10771 _LG_646:
002650 964842rr       10772         MOV.B   ES,#SEG( _SCPIError )
002654 9908rrrr       10773         MOV.W   R0,#SOF( _SCPIError )
002658 8A00           10774         MOV.W   R0,[R0]
                      10775         BNE     _757
00265A F302           +10775 ;       BEQ     _LG_648
00265C D5015D         +10775 ;       JMP.L   _757
002660 D5015D00       +10775 ;       JMP.L   _757
002660                +10775 _LG_648:
                      10776 ; rs232cmd.c 3010               {
                      10777 ; rs232cmd.c 3011                       if ( CmdRequest)
002660 964842rr       10779         MOV.B   ES,#SEG( _CmdRequest )
002664 9908rrrr       10780         MOV.W   R0,#SOF( _CmdRequest )
002668 8200           10781         MOV.B   R0L,[R0]
                      10782         BEQ     _683
00266A F202           +10782 ;       BNE     _LG_650
00266C D5009F         +10782 ;       JMP.L   _683
002670 D5009F00       +10782 ;       JMP.L   _683
002670                +10782 _LG_650:
                      10783 ; rs232cmd.c 3012                       {
                      10784 ; rs232cmd.c 3013                               if ( ParCnt)
002670 964842rr       10786         MOV.B   ES,#SEG( _ParCnt )
002674 9908rrrr       10787         MOV.W   R0,#SOF( _ParCnt )
002678 8200           10788         MOV.B   R0L,[R0]
00267A F307           10789         BEQ     _620
                      10790 ; rs232cmd.c 3014                                       SCPIError = ParNotAllowed;
00267C 964842rr       10792         MOV.B   ES,#SEG( _SCPIError )
002680 9908rrrr       10793         MOV.W   R0,#SOF( _SCPIError )
002684 BA06           10794         MOV.W   [R0],#06H
                      10795         BR      _757
002686 D50148         +10795         JMP.L   _757
002686 D5014800       +10795         JMP.L   _757
00268A                10796 _620:
                      10797 ; rs232cmd.c 3015                               else
                      10798 ; rs232cmd.c 3016                               {
                      10799 ; rs232cmd.c 3017                                       switch ( AudioSetup[AnalogAudio].Level)
00268A 964842rr       10801         MOV.B   ES,#SEG( _AudioSetup+4 )
00268E 9908rrrr       10802         MOV.W   R0,#SOF( _AudioSetup+4 )
002692 8A00           10803         MOV.W   R0,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 178

ADDR   CODE            LINE SOURCELINE
002694 A90F           10804         ADDS.W  R0,#0FH
002696 9904001D       10805         CMP.W   R0,#01DH
00269A F859           10806         BG      _650
00269C D902           10807         ASL.W   R0,#02H
00269E 964843rr       10808         MOV.B   CS,#SEG( __swtable758 )
0026A2 9900rrrr       10809         ADD.W   R0,#SOF( __swtable758 )
0026A6 8810           10810         MOVC.W  R1,[R0+]
0026A8 0F02           10811         PUSH.W  R1
0026AA 8810           10812         MOVC.W  R1,[R0+]
0026AC 0F02           10813         PUSH.W  R1
0026AE D680           10814         RET
                      10815 ; rs232cmd.c 3018                                       {
                      10816 ; rs232cmd.c 3019                                               case P10dBm:
                      10817 ; rs232cmd.c 3020                                                       level = 10;
                      10818 ; rs232cmd.c 3021                                                       break;
                      10819 ; rs232cmd.c 3022       
                      10820 ; rs232cmd.c 3023                                               case P8dBm:
0026B0                10822 _621:
                      10823 ; rs232cmd.c 3024                                                       level = 8;
0026B0 9A780008       10825         MOV.W   [R7],#08H
                      10826 ; rs232cmd.c 3025                                                       break;
0026B4 FE6E           10828         BR      _682
                      10829 ; rs232cmd.c 3026       
                      10830 ; rs232cmd.c 3027                                               case P7dBm:
0026B6                10832 _622:
                      10833 ; rs232cmd.c 3028                                                       level = 7;
0026B6 BA77           10835         MOV.W   [R7],#07H
                      10836 ; rs232cmd.c 3029                                                       break;
0026B8 FE6C           10838         BR      _682
                      10839 ; rs232cmd.c 3030       
                      10840 ; rs232cmd.c 3031                                               case P6dBm:
0026BA                10842 _623:
                      10843 ; rs232cmd.c 3032                                                       level = 6;
0026BA BA76           10845         MOV.W   [R7],#06H
                      10846 ; rs232cmd.c 3033                                                       break;
0026BC FE6A           10848         BR      _682
                      10849 ; rs232cmd.c 3034       
                      10850 ; rs232cmd.c 3035                                               case P5dBm:
0026BE                10852 _624:
                      10853 ; rs232cmd.c 3036                                                       level = 5;
0026BE BA75           10855         MOV.W   [R7],#05H
                      10856 ; rs232cmd.c 3037                                                       break;
0026C0 FE68           10858         BR      _682
                      10859 ; rs232cmd.c 3038       
                      10860 ; rs232cmd.c 3039                                               case P4dBm:
0026C2                10862 _625:
                      10863 ; rs232cmd.c 3040                                                       level = 4;
0026C2 BA74           10865         MOV.W   [R7],#04H
                      10866 ; rs232cmd.c 3041                                                       break;
0026C4 FE66           10868         BR      _682
                      10869 ; rs232cmd.c 3042       
                      10870 ; rs232cmd.c 3043                                               case P3dBm:
0026C6                10872 _626:
                      10873 ; rs232cmd.c 3044                                                       level = 3;
0026C6 BA73           10875         MOV.W   [R7],#03H
                      10876 ; rs232cmd.c 3045                                                       break;
0026C8 FE64           10878         BR      _682
                      10879 ; rs232cmd.c 3046       
                      10880 ; rs232cmd.c 3047                                               case P2dBm:
0026CA                10882 _627:
                      10883 ; rs232cmd.c 3048                                                       level = 2;
0026CA BA72           10885         MOV.W   [R7],#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 179

ADDR   CODE            LINE SOURCELINE
                      10886 ; rs232cmd.c 3049                                                       break;
0026CC FE62           10888         BR      _682
                      10889 ; rs232cmd.c 3050       
                      10890 ; rs232cmd.c 3051                                               case P1dBm:
0026CE                10892 _628:
                      10893 ; rs232cmd.c 3052                                                       level = 1;
0026CE BA71           10895         MOV.W   [R7],#01H
                      10896 ; rs232cmd.c 3053                                                       break;
0026D0 FE60           10898         BR      _682
                      10899 ; rs232cmd.c 3054       
                      10900 ; rs232cmd.c 3055                                               case M0dBm:
0026D2                10902 _629:
                      10903 ; rs232cmd.c 3056                                                       level = 0;
0026D2 BA70           10905         MOV.W   [R7],#00H
                      10906 ; rs232cmd.c 3057                                                       break;
0026D4 FE5E           10908         BR      _682
                      10909 ; rs232cmd.c 3058       
                      10910 ; rs232cmd.c 3059                                               case M1dBm:
0026D6                10912 _630:
                      10913 ; rs232cmd.c 3060                                                       level = -1;
0026D6 9A78FFFF       10915         MOV.W   [R7],#0FFFFH
                      10916 ; rs232cmd.c 3061                                                       break;
0026DA FE5B           10918         BR      _682
                      10919 ; rs232cmd.c 3062       
                      10920 ; rs232cmd.c 3063                                               case M2dBm:
0026DC                10922 _631:
                      10923 ; rs232cmd.c 3064                                                       level = -2;
0026DC 9A78FFFE       10925         MOV.W   [R7],#0FFFEH
                      10926 ; rs232cmd.c 3065                                                       break;
0026E0 FE58           10928         BR      _682
                      10929 ; rs232cmd.c 3066       
                      10930 ; rs232cmd.c 3067                                               case M3dBm:
0026E2                10932 _632:
                      10933 ; rs232cmd.c 3068                                                       level = -3;
0026E2 9A78FFFD       10935         MOV.W   [R7],#0FFFDH
                      10936 ; rs232cmd.c 3069                                                       break;
0026E6 FE55           10938         BR      _682
                      10939 ; rs232cmd.c 3070       
                      10940 ; rs232cmd.c 3071                                               case M4dBm:
0026E8                10942 _633:
                      10943 ; rs232cmd.c 3072                                                       level = -4;
0026E8 9A78FFFC       10945         MOV.W   [R7],#0FFFCH
                      10946 ; rs232cmd.c 3073                                                       break;
0026EC FE52           10948         BR      _682
                      10949 ; rs232cmd.c 3074       
                      10950 ; rs232cmd.c 3075                                               case M5dBm:
0026EE                10952 _634:
                      10953 ; rs232cmd.c 3076                                                       level = -5;
0026EE 9A78FFFB       10955         MOV.W   [R7],#0FFFBH
                      10956 ; rs232cmd.c 3077                                                       break;
0026F2 FE4F           10958         BR      _682
                      10959 ; rs232cmd.c 3078       
                      10960 ; rs232cmd.c 3079                                               case M6dBm:
0026F4                10962 _635:
                      10963 ; rs232cmd.c 3080                                                       level = -6;
0026F4 9A78FFFA       10965         MOV.W   [R7],#0FFFAH
                      10966 ; rs232cmd.c 3081                                                       break;
0026F8 FE4C           10968         BR      _682
                      10969 ; rs232cmd.c 3082       
                      10970 ; rs232cmd.c 3083                                               case M7dBm:
0026FA                10972 _636:
                      10973 ; rs232cmd.c 3084                                                       level = -7;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 180

ADDR   CODE            LINE SOURCELINE
0026FA 9A78FFF9       10975         MOV.W   [R7],#0FFF9H
                      10976 ; rs232cmd.c 3085                                                       break;
0026FE FE49           10978         BR      _682
                      10979 ; rs232cmd.c 3086       
                      10980 ; rs232cmd.c 3087                                               case M8dBm:
002700                10982 _637:
                      10983 ; rs232cmd.c 3088                                                       level = -8;
002700 9A78FFF8       10985         MOV.W   [R7],#0FFF8H
                      10986 ; rs232cmd.c 3089                                                       break;
002704 FE46           10988         BR      _682
                      10989 ; rs232cmd.c 3090       
                      10990 ; rs232cmd.c 3091                                               case M9dBm:
002706                10992 _638:
                      10993 ; rs232cmd.c 3092                                                       level = -9;
002706 9A78FFF7       10995         MOV.W   [R7],#0FFF7H
                      10996 ; rs232cmd.c 3093                                                       break;
00270A FE43           10998         BR      _682
                      10999 ; rs232cmd.c 3094       
                      11000 ; rs232cmd.c 3095                                               case M10dBm:
00270C                11002 _639:
                      11003 ; rs232cmd.c 3096                                                       level = -10;
00270C 9A78FFF6       11005         MOV.W   [R7],#0FFF6H
                      11006 ; rs232cmd.c 3097                                                       break;
002710 FE40           11008         BR      _682
                      11009 ; rs232cmd.c 3098       
                      11010 ; rs232cmd.c 3099                                               case M11dBm:
002712                11012 _640:
                      11013 ; rs232cmd.c 3100                                                       level = -11;
002712 9A78FFF5       11015         MOV.W   [R7],#0FFF5H
                      11016 ; rs232cmd.c 3101                                                       break;
002716 FE3D           11018         BR      _682
                      11019 ; rs232cmd.c 3102       
                      11020 ; rs232cmd.c 3103                                               case M12dBm:
002718                11022 _641:
                      11023 ; rs232cmd.c 3104                                                       level = -12;
002718 9A78FFF4       11025         MOV.W   [R7],#0FFF4H
                      11026 ; rs232cmd.c 3105                                                       break;
00271C FE3A           11028         BR      _682
                      11029 ; rs232cmd.c 3106       
                      11030 ; rs232cmd.c 3107                                               case M15dBm:
00271E                11032 _642:
                      11033 ; rs232cmd.c 3108                                                       level = -15;
00271E 9A78FFF1       11035         MOV.W   [R7],#0FFF1H
                      11036 ; rs232cmd.c 3109                                                       break;
002722 FE37           11038         BR      _682
                      11039 ; rs232cmd.c 3110       
                      11040 ; rs232cmd.c 3111                                               case M18dBm:
002724                11042 _643:
                      11043 ; rs232cmd.c 3112                                                       level = -18;
002724 9A78FFEE       11045         MOV.W   [R7],#0FFEEH
                      11046 ; rs232cmd.c 3113                                                       break;
002728 FE34           11048         BR      _682
                      11049 ; rs232cmd.c 3114       
                      11050 ; rs232cmd.c 3115                                               case M21dBm:
00272A                11052 _644:
                      11053 ; rs232cmd.c 3116                                                       level = -21;
00272A 9A78FFEB       11055         MOV.W   [R7],#0FFEBH
                      11056 ; rs232cmd.c 3117                                                       break;
00272E FE31           11058         BR      _682
                      11059 ; rs232cmd.c 3118       
                      11060 ; rs232cmd.c 3119                                               case M24dBm:
002730                11062 _645:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 181

ADDR   CODE            LINE SOURCELINE
                      11063 ; rs232cmd.c 3120                                                       level = -24;
002730 9A78FFE8       11065         MOV.W   [R7],#0FFE8H
                      11066 ; rs232cmd.c 3121                                                       break;
002734 FE2E           11068         BR      _682
                      11069 ; rs232cmd.c 3122       
                      11070 ; rs232cmd.c 3123                                               case M27dBm:
002736                11072 _646:
                      11073 ; rs232cmd.c 3124                                                       level = -27;
002736 9A78FFE5       11075         MOV.W   [R7],#0FFE5H
                      11076 ; rs232cmd.c 3125                                                       break;
00273A FE2B           11078         BR      _682
                      11079 ; rs232cmd.c 3126       
                      11080 ; rs232cmd.c 3127                                               case M30dBm:
00273C                11082 _647:
                      11083 ; rs232cmd.c 3128                                                       level = -30;
00273C 9A78FFE2       11085         MOV.W   [R7],#0FFE2H
                      11086 ; rs232cmd.c 3129                                                       break;
002740 FE28           11088         BR      _682
                      11089 ; rs232cmd.c 3130       
                      11090 ; rs232cmd.c 3131                                               case M33dBm:
002742                11092 _648:
                      11093 ; rs232cmd.c 3132                                                       level = -33;
002742 9A78FFDF       11095         MOV.W   [R7],#0FFDFH
                      11096 ; rs232cmd.c 3133                                                       break;
002746 FE25           11098         BR      _682
                      11099 ; rs232cmd.c 3134       
                      11100 ; rs232cmd.c 3135                                               case M36dBm:
002748                11102 _649:
                      11103 ; rs232cmd.c 3136                                                       level = -36;
002748 9A78FFDC       11105         MOV.W   [R7],#0FFDCH
                      11106 ; rs232cmd.c 3137                                                       break;
00274C FE22           11108         BR      _682
                      11109 ; rs232cmd.c 3138       
                      11110 ; rs232cmd.c 3139                                               default:
00274E                11112 _650:
                      11113 ; rs232cmd.c 3140                                                       str = SILENCEParTxt;
00274E 9958rrrr       11115         MOV.W   R5,#SEG( _SILENCEParTxt )
002752 9948rrrr       11116         MOV.W   R4,#SOF( _SILENCEParTxt )
                      11118 ; rs232cmd.c 3141       
                      11119 ; rs232cmd.c 3142                                                       while ( *str)
002756 964843rr       11121         MOV.B   CS,#SEG( _SILENCEParTxt )
00275A 9908rrrr       11122         MOV.W   R0,#SOF( _SILENCEParTxt )
00275E 8020           11123         MOVC.B  R1L,[R0+]
002760 F311           11124         BEQ     _652
002760 F311           11124         BEQ     _652
002762                11125 _651:
                      11126 ; rs232cmd.c 3143                                                               rs232putchar( *st
                            r++);
002762 8915           11128         MOV.W   R1,R5
002764 8904           11129         MOV.W   R0,R4
002766 862C43         11130         MOV.B   CS,R1L
002769 8020           11131         MOVC.B  R1L,[R0+]
00276B 8102           11132         MOV.B   R0L,R1L
                      11133         CALL    _rs232putchar
00276D C4rrrrrr       +11133 ;       FCALL   _rs232putchar
002771 99400001       11134         ADD.W   R4,#01H
002775 99510000       11135         ADDC.W  R5,#00H
002779 8915           11139         MOV.W   R1,R5
00277B 8904           11140         MOV.W   R0,R4
00277D 862C43         11141         MOV.B   CS,R1L
002780 8020           11142         MOVC.B  R1L,[R0+]
002782 F2EF           11143         BNE     _651
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 182

ADDR   CODE            LINE SOURCELINE
002784                11145 _652:
                      11146 ; rs232cmd.c 3144       
                      11147 ; rs232cmd.c 3145                                                       rs232putchar('\n');
002784 91080A         11149         MOV.B   R0L,#0AH
                      11150         CALL    _rs232putchar
002787 C4rrrrrr       +11150 ;       FCALL   _rs232putchar
                      11151 ; rs232cmd.c 3146                                                       return;
                      11153         BR      _757
00278B D500C5         +11153         JMP.L   _757
00278E                11155 _653:
00278E 9A78000A       11157         MOV.W   [R7],#0AH
                      11158 ; rs232cmd.c 3147                                               }
002792                11160 _682:
                      11161 ; rs232cmd.c 3148       
                      11162 ; rs232cmd.c 3149                                       rs232printf( 6, "%d\n", level);
002792 B906           11164         MOV.W   R0,#06H
002794 8A17           11165         MOV.W   R1,[R7]
002796 0F02           11166         PUSH.W  R1
002798 9938rrrr       11168         MOV.W   R3,#SEG( _9 )
00279C 9928rrrr       11169         MOV.W   R2,#SOF( _9 )
0027A0 0F0C           11170         PUSH.W  R2, R3
                      11172         CALL    _rs232printf
0027A2 C4rrrrrr       +11172 ;       FCALL   _rs232printf
0027A6 A976           11173         ADDS.W  R7,#06H
0000F0                11174         RSEG    RS232CMD_IR
                      11175         ALIGN   1
0000F0                11176 __swtable763:
0000F0 rrrrrrrrrrrrrr 11177         DW      SOF _716,SEG _716
       rrrrrrrrrrrrrr       
       rrrr                 
0000F4 rrrrrrrrrrrrrr 11178         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0000F8 rrrrrrrrrrrrrr 11179         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0000FC rrrrrrrrrrrrrr 11180         DW      SOF _715,SEG _715
       rrrrrrrrrrrrrr       
       rrrr                 
000100 rrrrrrrrrrrrrr 11181         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000104 rrrrrrrrrrrrrr 11182         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000108 rrrrrrrrrrrrrr 11183         DW      SOF _714,SEG _714
       rrrrrrrrrrrrrr       
       rrrr                 
00010C rrrrrrrrrrrrrr 11184         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000110 rrrrrrrrrrrrrr 11185         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000114 rrrrrrrrrrrrrr 11186         DW      SOF _713,SEG _713
       rrrrrrrrrrrrrr       
       rrrr                 
000118 rrrrrrrrrrrrrr 11187         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 183

ADDR   CODE            LINE SOURCELINE
00011C rrrrrrrrrrrrrr 11188         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000120 rrrrrrrrrrrrrr 11189         DW      SOF _712,SEG _712
       rrrrrrrrrrrrrr       
       rrrr                 
000124 rrrrrrrrrrrrrr 11190         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000128 rrrrrrrrrrrrrr 11191         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
00012C rrrrrrrrrrrrrr 11192         DW      SOF _711,SEG _711
       rrrrrrrrrrrrrr       
       rrrr                 
000130 rrrrrrrrrrrrrr 11193         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000134 rrrrrrrrrrrrrr 11194         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000138 rrrrrrrrrrrrrr 11195         DW      SOF _710,SEG _710
       rrrrrrrrrrrrrr       
       rrrr                 
00013C rrrrrrrrrrrrrr 11196         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000140 rrrrrrrrrrrrrr 11197         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000144 rrrrrrrrrrrrrr 11198         DW      SOF _709,SEG _709
       rrrrrrrrrrrrrr       
       rrrr                 
000148 rrrrrrrrrrrrrr 11199         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
00014C rrrrrrrrrrrrrr 11200         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
000150 rrrrrrrrrrrrrr 11201         DW      SOF _708,SEG _708
       rrrrrrrrrrrrrr       
       rrrr                 
000154 rrrrrrrrrrrrrr 11202         DW      SOF _707,SEG _707
       rrrrrrrrrrrrrr       
       rrrr                 
000158 rrrrrrrrrrrrrr 11203         DW      SOF _706,SEG _706
       rrrrrrrrrrrrrr       
       rrrr                 
00015C rrrrrrrrrrrrrr 11204         DW      SOF _705,SEG _705
       rrrrrrrrrrrrrr       
       rrrr                 
000160 rrrrrrrrrrrrrr 11205         DW      SOF _704,SEG _704
       rrrrrrrrrrrrrr       
       rrrr                 
000164 rrrrrrrrrrrrrr 11206         DW      SOF _703,SEG _703
       rrrrrrrrrrrrrr       
       rrrr                 
000168 rrrrrrrrrrrrrr 11207         DW      SOF _702,SEG _702
       rrrrrrrrrrrrrr       
       rrrr                 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 184

ADDR   CODE            LINE SOURCELINE
00016C rrrrrrrrrrrrrr 11208         DW      SOF _701,SEG _701
       rrrrrrrrrrrrrr       
       rrrr                 
000170 rrrrrrrrrrrrrr 11209         DW      SOF _700,SEG _700
       rrrrrrrrrrrrrr       
       rrrr                 
000174 rrrrrrrrrrrrrr 11210         DW      SOF _699,SEG _699
       rrrrrrrrrrrrrr       
       rrrr                 
000178 rrrrrrrrrrrrrr 11211         DW      SOF _698,SEG _698
       rrrrrrrrrrrrrr       
       rrrr                 
00017C rrrrrrrrrrrrrr 11212         DW      SOF _697,SEG _697
       rrrrrrrrrrrrrr       
       rrrr                 
000180 rrrrrrrrrrrrrr 11213         DW      SOF _696,SEG _696
       rrrrrrrrrrrrrr       
       rrrr                 
000184 rrrrrrrrrrrrrr 11214         DW      SOF _695,SEG _695
       rrrrrrrrrrrrrr       
       rrrr                 
000188 rrrrrrrrrrrrrr 11215         DW      SOF _694,SEG _694
       rrrrrrrrrrrrrr       
       rrrr                 
00018C rrrrrrrrrrrrrr 11216         DW      SOF _693,SEG _693
       rrrrrrrrrrrrrr       
       rrrr                 
000190 rrrrrrrrrrrrrr 11217         DW      SOF _692,SEG _692
       rrrrrrrrrrrrrr       
       rrrr                 
000194 rrrrrrrrrrrrrr 11218         DW      SOF _691,SEG _691
       rrrrrrrrrrrrrr       
       rrrr                 
000198 rrrrrrrrrrrrrr 11219         DW      SOF _690,SEG _690
       rrrrrrrrrrrrrr       
       rrrr                 
00019C rrrrrrrrrrrrrr 11220         DW      SOF _689,SEG _689
       rrrrrrrrrrrrrr       
       rrrr                 
0001A0 rrrrrrrrrrrrrr 11221         DW      SOF _688,SEG _688
       rrrrrrrrrrrrrr       
       rrrr                 
0001A4 rrrrrrrrrrrrrr 11222         DW      SOF _717,SEG _717
       rrrrrrrrrrrrrr       
       rrrr                 
0001A8 rrrrrrrrrrrrrr 11223         DW      SOF _718,SEG _718
       rrrrrrrrrrrrrr       
       rrrr                 
0027A8                11224         RSEG    RS232CMD_PR
                      11226 ; rs232cmd.c 3150                               }
                      11227 ; rs232cmd.c 3151                       }
                      11229         BR      _757
0027A8 D500B7         +11229         JMP.L   _757
0027A8 D500B700       +11229         JMP.L   _757
0027AC                11230 _683:
                      11231 ; rs232cmd.c 3152                       else
                      11232 ; rs232cmd.c 3153                       {
                      11233 ; rs232cmd.c 3154                               if ( ParCnt != 1)
0027AC 964842rr       11235         MOV.B   ES,#SEG( _ParCnt )
0027B0 9908rrrr       11236         MOV.W   R0,#SOF( _ParCnt )
0027B4 8200           11237         MOV.B   R0L,[R0]
0027B6 910401         11238         CMP.B   R0L,#01H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 185

ADDR   CODE            LINE SOURCELINE
0027B9 F307           11239         BEQ     _684
                      11240 ; rs232cmd.c 3155                                       SCPIError = SyntaxErr;
0027BB 964842rr       11242         MOV.B   ES,#SEG( _SCPIError )
0027BF 9908rrrr       11243         MOV.W   R0,#SOF( _SCPIError )
0027C3 BA03           11244         MOV.W   [R0],#03H
                      11245         BR      _757
0027C5 D500A8         +11245         JMP.L   _757
0027C5 D500A8         +11245         JMP.L   _757
0027C8                11246 _684:
                      11247 ; rs232cmd.c 3156                               else
                      11248 ; rs232cmd.c 3157                               {
                      11249 ; rs232cmd.c 3158                                       level = FindParameter( Cmd, AnalogLevelPa
                            r);
0027C8 9938rrrr       11251         MOV.W   R3,#SEG( _AnalogLevelPar )
0027CC 9928rrrr       11252         MOV.W   R2,#SOF( _AnalogLevelPar )
0027D0 9918rrrr       11253         MOV.W   R1,#SEG( _Cmd )
0027D4 9908rrrr       11254         MOV.W   R0,#SOF( _Cmd )
0027D8 C51BE3         11255         CALL    _FindParameter
0027DB 8A0F           11256         MOV.W   [R7],R0
                      11257 ; rs232cmd.c 3159               
                      11258 ; rs232cmd.c 3160                                       if ( level > -1)
0027DD 9A74FFFF       11260         CMP.W   [R7],#0FFFFH
0027E1 FD04           11261         BLE     _685
                      11262 ; rs232cmd.c 3161                                               level = AnalogSilence;
0027E3 9A78001F       11264         MOV.W   [R7],#01FH
                      11265         BR      _749
0027E7 D5008B         +11265         JMP.L   _749
0027E7 D5008B         +11265         JMP.L   _749
0027EA                11266 _685:
                      11267 ; rs232cmd.c 3162                                       else
                      11268 ; rs232cmd.c 3163                                       {
                      11269 ; rs232cmd.c 3164                                               if (( ParCnt != 1) || ( sscanf( C
                            md, "%d", &level) != 1))
0027EA 964842rr       11271         MOV.B   ES,#SEG( _ParCnt )
0027EE 9908rrrr       11272         MOV.W   R0,#SOF( _ParCnt )
0027F2 8200           11273         MOV.B   R0L,[R0]
0027F4 910401         11274         CMP.B   R0L,#01H
0027F7 F215           11275         BNE     _686
0027F9 9128rr         11276         MOV.B   R1L,#SEG( __lc_bs )
0027FC 7133           11277         XOR.B   R1H,R1H
0027FE 8907           11278         MOV.W   R0,R7
002800 0F03           11279         PUSH.W  R0, R1
002802 9918rrrr       11281         MOV.W   R1,#SEG( _10 )
002806 9908rrrr       11282         MOV.W   R0,#SOF( _10 )
00280A 0F03           11283         PUSH.W  R0, R1
00280C 9918rrrr       11285         MOV.W   R1,#SEG( _Cmd )
002810 9908rrrr       11286         MOV.W   R0,#SOF( _Cmd )
                      11287         CALL    _sscanf
002814 C4rrrrrr       +11287 ;       FCALL   _sscanf
002818 99700008       11288         ADD.W   R7,#08H
00281C 99040001       11290         CMP.W   R0,#01H
002820 F306           11291         BEQ     _687
002820 F306           11291         BEQ     _687
002822                11292 _686:
                      11293 ; rs232cmd.c 3165                                                       SCPIError = SyntaxErr;
002822 964842rr       11295         MOV.B   ES,#SEG( _SCPIError )
002826 9908rrrr       11296         MOV.W   R0,#SOF( _SCPIError )
00282A BA03           11297         MOV.W   [R0],#03H
00282C FE69           11298         BR      _749
00282C FE69           11298         BR      _749
00282E                11299 _687:
                      11300 ; rs232cmd.c 3166                                               else
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 186

ADDR   CODE            LINE SOURCELINE
                      11301 ; rs232cmd.c 3167                                               {
                      11302 ; rs232cmd.c 3168                                                       switch ( level)
00282E 8A17           11304         MOV.W   R1,[R7]
002830 99100024       11305         ADD.W   R1,#024H
002834 9914002E       11306         CMP.W   R1,#02EH
002838 F85B           11307         BG      _717
00283A D912           11308         ASL.W   R1,#02H
00283C 964843rr       11309         MOV.B   CS,#SEG( __swtable763 )
002840 9910rrrr       11310         ADD.W   R1,#SOF( __swtable763 )
002844 8801           11311         MOVC.W  R0,[R1+]
002846 0F01           11312         PUSH.W  R0
002848 8801           11313         MOVC.W  R0,[R1+]
00284A 0F01           11314         PUSH.W  R0
00284C D680           11315         RET
                      11316 ; rs232cmd.c 3169                                                       {
                      11317 ; rs232cmd.c 3170                                                               case 10:
                      11318 ; rs232cmd.c 3171                                                                       level = P
                            10dBm;
                      11319 ; rs232cmd.c 3172                                                                       break;
                      11320 ; rs232cmd.c 3173       
                      11321 ; rs232cmd.c 3174                                                               case 8:
00284E                11323 _688:
                      11324 ; rs232cmd.c 3175                                                                       level = P
                            8dBm;
00284E BA72           11326         MOV.W   [R7],#02H
                      11327 ; rs232cmd.c 3176                                                                       break;
002850 FE57           11329         BR      _749
                      11330 ; rs232cmd.c 3177       
                      11331 ; rs232cmd.c 3178                                                               case 7:
002852                11333 _689:
                      11334 ; rs232cmd.c 3179                                                                       level = P
                            7dBm;
002852 BA73           11336         MOV.W   [R7],#03H
                      11337 ; rs232cmd.c 3180                                                                       break;
002854 FE55           11339         BR      _749
                      11340 ; rs232cmd.c 3181       
                      11341 ; rs232cmd.c 3182                                                               case 6:
002856                11343 _690:
                      11344 ; rs232cmd.c 3183                                                                       level = P
                            6dBm;
002856 BA74           11346         MOV.W   [R7],#04H
                      11347 ; rs232cmd.c 3184                                                                       break;
002858 FE53           11349         BR      _749
                      11350 ; rs232cmd.c 3185       
                      11351 ; rs232cmd.c 3186                                                               case 5:
00285A                11353 _691:
                      11354 ; rs232cmd.c 3187                                                                       level = P
                            5dBm;
00285A BA75           11356         MOV.W   [R7],#05H
                      11357 ; rs232cmd.c 3188                                                                       break;
00285C FE51           11359         BR      _749
                      11360 ; rs232cmd.c 3189       
                      11361 ; rs232cmd.c 3190                                                               case 4:
00285E                11363 _692:
                      11364 ; rs232cmd.c 3191                                                                       level = P
                            4dBm;
00285E BA76           11366         MOV.W   [R7],#06H
                      11367 ; rs232cmd.c 3192                                                                       break;
002860 FE4F           11369         BR      _749
                      11370 ; rs232cmd.c 3193       
                      11371 ; rs232cmd.c 3194                                                               case 3:
002862                11373 _693:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 187

ADDR   CODE            LINE SOURCELINE
                      11374 ; rs232cmd.c 3195                                                                       level = P
                            3dBm;
002862 BA77           11376         MOV.W   [R7],#07H
                      11377 ; rs232cmd.c 3196                                                                       break;
002864 FE4D           11379         BR      _749
                      11380 ; rs232cmd.c 3197       
                      11381 ; rs232cmd.c 3198                                                               case 2:
002866                11383 _694:
                      11384 ; rs232cmd.c 3199                                                                       level = P
                            2dBm;
002866 9A780008       11386         MOV.W   [R7],#08H
                      11387 ; rs232cmd.c 3200                                                                       break;
00286A FE4A           11389         BR      _749
                      11390 ; rs232cmd.c 3201       
                      11391 ; rs232cmd.c 3202                                                               case 1:
00286C                11393 _695:
                      11394 ; rs232cmd.c 3203                                                                       level = P
                            1dBm;
00286C 9A780009       11396         MOV.W   [R7],#09H
                      11397 ; rs232cmd.c 3204                                                                       break;
002870 FE47           11399         BR      _749
                      11400 ; rs232cmd.c 3205       
                      11401 ; rs232cmd.c 3206                                                               case 0:
002872                11403 _696:
                      11404 ; rs232cmd.c 3207                                                                       level = M
                            0dBm;
002872 9A78000A       11406         MOV.W   [R7],#0AH
                      11407 ; rs232cmd.c 3208                                                                       break;
002876 FE44           11409         BR      _749
                      11410 ; rs232cmd.c 3209       
                      11411 ; rs232cmd.c 3210                                                               case -1:
002878                11413 _697:
                      11414 ; rs232cmd.c 3211                                                                       level = M
                            1dBm;
002878 9A78000B       11416         MOV.W   [R7],#0BH
                      11417 ; rs232cmd.c 3212                                                                       break;
00287C FE41           11419         BR      _749
                      11420 ; rs232cmd.c 3213       
                      11421 ; rs232cmd.c 3214                                                               case -2:
00287E                11423 _698:
                      11424 ; rs232cmd.c 3215                                                                       level = M
                            2dBm;
00287E 9A78000C       11426         MOV.W   [R7],#0CH
                      11427 ; rs232cmd.c 3216                                                                       break;
002882 FE3E           11429         BR      _749
                      11430 ; rs232cmd.c 3217       
                      11431 ; rs232cmd.c 3218                                                               case -3:
002884                11433 _699:
                      11434 ; rs232cmd.c 3219                                                                       level = M
                            3dBm;
002884 9A78000D       11436         MOV.W   [R7],#0DH
                      11437 ; rs232cmd.c 3220                                                                       break;
002888 FE3B           11439         BR      _749
                      11440 ; rs232cmd.c 3221       
                      11441 ; rs232cmd.c 3222                                                               case -4:
00288A                11443 _700:
                      11444 ; rs232cmd.c 3223                                                                       level = M
                            4dBm;
00288A 9A78000E       11446         MOV.W   [R7],#0EH
                      11447 ; rs232cmd.c 3224                                                                       break;
00288E FE38           11449         BR      _749
                      11450 ; rs232cmd.c 3225       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 188

ADDR   CODE            LINE SOURCELINE
                      11451 ; rs232cmd.c 3226                                                               case -5:
002890                11453 _701:
                      11454 ; rs232cmd.c 3227                                                                       level = M
                            5dBm;
002890 9A78000F       11456         MOV.W   [R7],#0FH
                      11457 ; rs232cmd.c 3228                                                                       break;
002894 FE35           11459         BR      _749
                      11460 ; rs232cmd.c 3229       
                      11461 ; rs232cmd.c 3230                                                               case -6:
002896                11463 _702:
                      11464 ; rs232cmd.c 3231                                                                       level = M
                            6dBm;
002896 9A780010       11466         MOV.W   [R7],#010H
                      11467 ; rs232cmd.c 3232                                                                       break;
00289A FE32           11469         BR      _749
                      11470 ; rs232cmd.c 3233       
                      11471 ; rs232cmd.c 3234                                                               case -7:
00289C                11473 _703:
                      11474 ; rs232cmd.c 3235                                                                       level = M
                            7dBm;
00289C 9A780011       11476         MOV.W   [R7],#011H
                      11477 ; rs232cmd.c 3236                                                                       break;
0028A0 FE2F           11479         BR      _749
                      11480 ; rs232cmd.c 3237       
                      11481 ; rs232cmd.c 3238                                                               case -8:
0028A2                11483 _704:
                      11484 ; rs232cmd.c 3239                                                                       level = M
                            8dBm;
0028A2 9A780012       11486         MOV.W   [R7],#012H
                      11487 ; rs232cmd.c 3240                                                                       break;
0028A6 FE2C           11489         BR      _749
                      11490 ; rs232cmd.c 3241       
                      11491 ; rs232cmd.c 3242                                                               case -9:
0028A8                11493 _705:
                      11494 ; rs232cmd.c 3243                                                                       level = M
                            9dBm;
0028A8 9A780013       11496         MOV.W   [R7],#013H
                      11497 ; rs232cmd.c 3244                                                                       break;
0028AC FE29           11499         BR      _749
                      11500 ; rs232cmd.c 3245       
                      11501 ; rs232cmd.c 3246                                                               case -10:
0028AE                11503 _706:
                      11504 ; rs232cmd.c 3247                                                                       level = M
                            10dBm;
0028AE 9A780014       11506         MOV.W   [R7],#014H
                      11507 ; rs232cmd.c 3248                                                                       break;
0028B2 FE26           11509         BR      _749
                      11510 ; rs232cmd.c 3249       
                      11511 ; rs232cmd.c 3250                                                               case -11:
0028B4                11513 _707:
                      11514 ; rs232cmd.c 3251                                                                       level = M
                            11dBm;
0028B4 9A780015       11516         MOV.W   [R7],#015H
                      11517 ; rs232cmd.c 3252                                                                       break;
0028B8 FE23           11519         BR      _749
                      11520 ; rs232cmd.c 3253       
                      11521 ; rs232cmd.c 3254                                                               case -12:
0028BA                11523 _708:
                      11524 ; rs232cmd.c 3255                                                                       level = M
                            12dBm;
0028BA 9A780016       11526         MOV.W   [R7],#016H
                      11527 ; rs232cmd.c 3256                                                                       break;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 189

ADDR   CODE            LINE SOURCELINE
0028BE FE20           11529         BR      _749
                      11530 ; rs232cmd.c 3257       
                      11531 ; rs232cmd.c 3258                                                               case -15:
0028C0                11533 _709:
                      11534 ; rs232cmd.c 3259                                                                       level = M
                            15dBm;
0028C0 9A780017       11536         MOV.W   [R7],#017H
                      11537 ; rs232cmd.c 3260                                                                       break;
0028C4 FE1D           11539         BR      _749
                      11540 ; rs232cmd.c 3261       
                      11541 ; rs232cmd.c 3262                                                               case -18:
0028C6                11543 _710:
                      11544 ; rs232cmd.c 3263                                                                       level = M
                            18dBm;
0028C6 9A780018       11546         MOV.W   [R7],#018H
                      11547 ; rs232cmd.c 3264                                                                       break;
0028CA FE1A           11549         BR      _749
                      11550 ; rs232cmd.c 3265       
                      11551 ; rs232cmd.c 3266                                                               case -21:
0028CC                11553 _711:
                      11554 ; rs232cmd.c 3267                                                                       level = M
                            21dBm;
0028CC 9A780019       11556         MOV.W   [R7],#019H
                      11557 ; rs232cmd.c 3268                                                                       break;
0028D0 FE17           11559         BR      _749
                      11560 ; rs232cmd.c 3269       
                      11561 ; rs232cmd.c 3270                                                               case -24:
0028D2                11563 _712:
                      11564 ; rs232cmd.c 3271                                                                       level = M
                            24dBm;
0028D2 9A78001A       11566         MOV.W   [R7],#01AH
                      11567 ; rs232cmd.c 3272                                                                       break;
0028D6 FE14           11569         BR      _749
                      11570 ; rs232cmd.c 3273       
                      11571 ; rs232cmd.c 3274                                                               case -27:
0028D8                11573 _713:
                      11574 ; rs232cmd.c 3275                                                                       level = M
                            27dBm;
0028D8 9A78001B       11576         MOV.W   [R7],#01BH
                      11577 ; rs232cmd.c 3276                                                                       break;
0028DC FE11           11579         BR      _749
                      11580 ; rs232cmd.c 3277       
                      11581 ; rs232cmd.c 3278                                                               case -30:
0028DE                11583 _714:
                      11584 ; rs232cmd.c 3279                                                                       level = M
                            30dBm;
0028DE 9A78001C       11586         MOV.W   [R7],#01CH
                      11587 ; rs232cmd.c 3280                                                                       break;
0028E2 FE0E           11589         BR      _749
                      11590 ; rs232cmd.c 3281       
                      11591 ; rs232cmd.c 3282                                                               case -33:
0028E4                11593 _715:
                      11594 ; rs232cmd.c 3283                                                                       level = M
                            33dBm;
0028E4 9A78001D       11596         MOV.W   [R7],#01DH
                      11597 ; rs232cmd.c 3284                                                                       break;
0028E8 FE0B           11599         BR      _749
                      11600 ; rs232cmd.c 3285       
                      11601 ; rs232cmd.c 3286                                                               case -36:
0028EA                11603 _716:
                      11604 ; rs232cmd.c 3287                                                                       level = M
                            36dBm;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 190

ADDR   CODE            LINE SOURCELINE
0028EA 9A78001E       11606         MOV.W   [R7],#01EH
                      11607 ; rs232cmd.c 3288                                                                       break;
0028EE FE08           11609         BR      _749
                      11610 ; rs232cmd.c 3289       
                      11611 ; rs232cmd.c 3290                                                               default:
0028F0                11613 _717:
                      11614 ; rs232cmd.c 3291                                                                       SCPIError
                             = DataOutOfRange;
0028F0 964842rr       11616         MOV.B   ES,#SEG( _SCPIError )
0028F4 9908rrrr       11617         MOV.W   R0,#SOF( _SCPIError )
0028F8 9A080021       11618         MOV.W   [R0],#021H
                      11619 ; rs232cmd.c 3292                                                                       return;
0028FC FE0D           11621         BR      _757
0028FE                11623 _718:
0028FE BA71           11625         MOV.W   [R7],#01H
                      11626 ; rs232cmd.c 3293                                                       }
                      11627 ; rs232cmd.c 3294                                               }
                      11628 ; rs232cmd.c 3295                                       }
002900                11630 _749:
                      11631 ; rs232cmd.c 3296       
                      11632 ; rs232cmd.c 3297                                       if ( SetAudioLevel( AnalogAudio, level) =
                            = FAIL)
002900 B900           11634         MOV.W   R0,#00H
002902 8A17           11635         MOV.W   R1,[R7]
                      11636         CALL    _SetAudioLevel
002904 C4rrrrrr       +11636 ;       FCALL   _SetAudioLevel
002908 6900           11637         OR.W    R0,R0
00290A F206           11638         BNE     _757
                      11639 ; rs232cmd.c 3298                                               SCPIError = ExecErr;
00290C 964842rr       11641         MOV.B   ES,#SEG( _SCPIError )
002910 9908rrrr       11642         MOV.W   R0,#SOF( _SCPIError )
002914 9A08001D       11643         MOV.W   [R0],#01DH
                      11644 ; rs232cmd.c 3299                               }
                      11645 ; rs232cmd.c 3300                       }
                      11646 ; rs232cmd.c 3301               }
                      11647 ; rs232cmd.c 3302       }
002918                11649 _757:
002918 A972           11650         ADDS.W  R7,#02H
00291A 2F30           11652         POP.W   R4, R5
00291C D680           11654         RET
                      11657 ; rs232cmd.c 3303       
                      11658 ; rs232cmd.c 3304       /************************************************************************
                            **/
                      11659 ; rs232cmd.c 3305       /* AudioGenAnalogClick                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      11660 ; rs232cmd.c 3306       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11661 ; rs232cmd.c 3307       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      11662 ; rs232cmd.c 3308       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      11663 ; rs232cmd.c 3309       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 191

ADDR   CODE            LINE SOURCELINE
                      11664 ; rs232cmd.c 3310       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      11665 ; rs232cmd.c 3311       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      11666 ; rs232cmd.c 3312       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      11667 ; rs232cmd.c 3313       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      11668 ; rs232cmd.c 3314       /************************************************************************
                            **/
                      11669 ; rs232cmd.c 3315       void AudioGenAnalogClick( void)
                      11670 ; rs232cmd.c 3316       {
                      11671         ALIGN   1
                      11673         PUBLIC  _AudioGenAnalogClick
00291E                11674 _AudioGenAnalogClick:
00291E A97E           11678         ADDS.W  R7,#0EH
                      11681 ; rs232cmd.c 3317               int click;
                      11682 ; rs232cmd.c 3318       
                      11683 ; rs232cmd.c 3319               if ( CmdExecute && !SCPIError)
002920 964842rr       11685         MOV.B   ES,#SEG( _CmdExecute )
002924 9908rrrr       11686         MOV.W   R0,#SOF( _CmdExecute )
002928 8200           11687         MOV.B   R0L,[R0]
00292A F363           11688         BEQ     _776
00292C 964842rr       11689         MOV.B   ES,#SEG( _SCPIError )
002930 9908rrrr       11690         MOV.W   R0,#SOF( _SCPIError )
002934 8A00           11691         MOV.W   R0,[R0]
002936 F25D           11692         BNE     _776
                      11693 ; rs232cmd.c 3320               {
                      11694 ; rs232cmd.c 3321                       if ( CmdRequest)
002938 964842rr       11696         MOV.B   ES,#SEG( _CmdRequest )
00293C 9908rrrr       11697         MOV.W   R0,#SOF( _CmdRequest )
002940 8200           11698         MOV.B   R0L,[R0]
002942 F31C           11699         BEQ     _765
                      11700 ; rs232cmd.c 3322                       {
                      11701 ; rs232cmd.c 3323                               if ( ParCnt)
002944 964842rr       11703         MOV.B   ES,#SEG( _ParCnt )
002948 9908rrrr       11704         MOV.W   R0,#SOF( _ParCnt )
00294C 8200           11705         MOV.B   R0L,[R0]
00294E F306           11706         BEQ     _764
                      11707 ; rs232cmd.c 3324                                       SCPIError = ParNotAllowed;
002950 964842rr       11709         MOV.B   ES,#SEG( _SCPIError )
002954 9908rrrr       11710         MOV.W   R0,#SOF( _SCPIError )
002958 BA06           11711         MOV.W   [R0],#06H
00295A FE4B           11712         BR      _776
00295A FE4B           11712         BR      _776
00295C                11713 _764:
                      11714 ; rs232cmd.c 3325                               else
                      11715 ; rs232cmd.c 3326                                       rs232printf( 6, "%d\n", AudioSetup[Analog
                            Audio].Click);
00295C B906           11717         MOV.W   R0,#06H
00295E 964842rr       11718         MOV.B   ES,#SEG( _AudioSetup+12 )
002962 9918rrrr       11719         MOV.W   R1,#SOF( _AudioSetup+12 )
002966 8A11           11720         MOV.W   R1,[R1]
002968 0F02           11721         PUSH.W  R1
00296A 9938rrrr       11723         MOV.W   R3,#SEG( _9 )
00296E 9928rrrr       11724         MOV.W   R2,#SOF( _9 )
002972 0F0C           11725         PUSH.W  R2, R3
                      11727         CALL    _rs232printf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 192

ADDR   CODE            LINE SOURCELINE
002974 C4rrrrrr       +11727 ;       FCALL   _rs232printf
002978 A976           11728         ADDS.W  R7,#06H
                      11730 ; rs232cmd.c 3327                       }
00297A FE3B           11732         BR      _776
00297A FE3B           11732         BR      _776
00297C                11733 _765:
                      11734 ; rs232cmd.c 3328                       else
                      11735 ; rs232cmd.c 3329                       {
                      11736 ; rs232cmd.c 3330                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &click
                            ) != 1))
00297C 964842rr       11738         MOV.B   ES,#SEG( _ParCnt )
002980 9908rrrr       11739         MOV.W   R0,#SOF( _ParCnt )
002984 8200           11740         MOV.B   R0L,[R0]
002986 910401         11741         CMP.B   R0L,#01H
002989 F215           11742         BNE     _766
00298B 9918rrrr       11743         MOV.W   R1,#SEG( _Cmd )
00298F 9908rrrr       11744         MOV.W   R0,#SOF( _Cmd )
002993 9168rr         11745         MOV.B   R3L,#SEG( __lc_bs )
002996 7177           11746         XOR.B   R3H,R3H
002998 8927           11747         MOV.W   R2,R7
00299A 0F0C           11748         PUSH.W  R2, R3
00299C 9938rrrr       11750         MOV.W   R3,#SEG( _10 )
0029A0 9928rrrr       11751         MOV.W   R2,#SOF( _10 )
0029A4 0F0C           11752         PUSH.W  R2, R3
                      11754         CALL    _sscanf
0029A6 C4rrrrrr       +11754 ;       FCALL   _sscanf
0029AA 99700008       11755         ADD.W   R7,#08H
0029AE 99040001       11757         CMP.W   R0,#01H
0029B2 F306           11758         BEQ     _767
0029B2 F306           11758         BEQ     _767
0029B4                11759 _766:
                      11760 ; rs232cmd.c 3331                                       SCPIError = SyntaxErr;
0029B4 964842rr       11762         MOV.B   ES,#SEG( _SCPIError )
0029B8 9908rrrr       11763         MOV.W   R0,#SOF( _SCPIError )
0029BC BA03           11764         MOV.W   [R0],#03H
0029BE FE19           11765         BR      _776
0029BE FE19           11765         BR      _776
0029C0                11766 _767:
                      11767 ; rs232cmd.c 3332                               else {
                      11768 ; rs232cmd.c 3333                                       if (( click != click1s) && ( click != cli
                            ck3s))
0029C0 9A740001       11770         CMP.W   [R7],#01H
0029C4 F30A           11771         BEQ     _769
0029C6 9A740003       11772         CMP.W   [R7],#03H
0029CA F307           11773         BEQ     _769
                      11774 ; rs232cmd.c 3334                                               SCPIError = DataOutOfRange;
0029CC 964842rr       11776         MOV.B   ES,#SEG( _SCPIError )
0029D0 9908rrrr       11777         MOV.W   R0,#SOF( _SCPIError )
0029D4 9A080021       11778         MOV.W   [R0],#021H
0029D8 FE0C           11779         BR      _776
0029D8 FE0C           11779         BR      _776
0029DA                11780 _769:
                      11781 ; rs232cmd.c 3335                                       else
                      11782 ; rs232cmd.c 3336                                       {
                      11783 ; rs232cmd.c 3337                                               if ( SetAudioClick( AnalogAudio, 
                            click) == FAIL)
0029DA B900           11785         MOV.W   R0,#00H
0029DC 8A17           11786         MOV.W   R1,[R7]
                      11787         CALL    _SetAudioClick
0029DE C4rrrrrr       +11787 ;       FCALL   _SetAudioClick
0029E2 6900           11788         OR.W    R0,R0
0029E4 F206           11789         BNE     _776
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 193

ADDR   CODE            LINE SOURCELINE
                      11790 ; rs232cmd.c 3338                                                       SCPIError = ExecErr;
0029E6 964842rr       11792         MOV.B   ES,#SEG( _SCPIError )
0029EA 9908rrrr       11793         MOV.W   R0,#SOF( _SCPIError )
0029EE 9A08001D       11794         MOV.W   [R0],#01DH
                      11795 ; rs232cmd.c 3339                                       }
                      11796 ; rs232cmd.c 3340                               }
                      11797 ; rs232cmd.c 3341                       }
                      11798 ; rs232cmd.c 3342               }
0029F2                11800 _776:
                      11801 ; rs232cmd.c 3343       }
0029F2 A972           11803         ADDS.W  R7,#02H
0029F4 D680           11805         RET
                      11807 ; rs232cmd.c 3344       
                      11808 ; rs232cmd.c 3345       
                      11809 ; rs232cmd.c 3346       /************************************************************************
                            **/
                      11810 ; rs232cmd.c 3347       /* AudioGenAESEBU                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      11811 ; rs232cmd.c 3348       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11812 ; rs232cmd.c 3349       /* Author:              Kim Engedahl, DEV, 000526                        
                                                                                                                             
                                    */
                      11813 ; rs232cmd.c 3350       /* Revised:             000617                                           
                                                                                                                             
                                                                                    */
                      11814 ; rs232cmd.c 3351       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      11815 ; rs232cmd.c 3352       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      11816 ; rs232cmd.c 3353       /* Remarks:             Request only.                                    
                                                                                                                             
                                                                                    */
                      11817 ; rs232cmd.c 3354       /* Returns:       --                                                     
                                                                                                                             
                                                                                                            */
                      11818 ; rs232cmd.c 3355       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      11819 ; rs232cmd.c 3356       /************************************************************************
                            **/
                      11820 ; rs232cmd.c 3357       void AudioGenAESEBU( void)
                      11821 ; rs232cmd.c 3358       {
                      11822         ALIGN   1
                      11824         PUBLIC  _AudioGenAESEBU
0029F6                11825 _AudioGenAESEBU:
0029F6 0F70           11829         PUSH.W  R4, R5, R6
                      11835 ; rs232cmd.c 3359               char code *str;
                      11836 ; rs232cmd.c 3360               int level;
                      11837 ; rs232cmd.c 3361       
                      11838 ; rs232cmd.c 3362               if ( CmdExecute && !SCPIError)
0029F8 964842rr       11840         MOV.B   ES,#SEG( _CmdExecute )
0029FC 9908rrrr       11841         MOV.W   R0,#SOF( _CmdExecute )
002A00 8200           11842         MOV.B   R0L,[R0]
                      11843         BEQ     _811
002A02 F202           +11843 ;       BNE     _LG_690
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 194

ADDR   CODE            LINE SOURCELINE
002A04 D50136         +11843 ;       JMP.L   _811
002A08 D5013600       +11843 ;       JMP.L   _811
002A08                +11843 _LG_690:
002A08 964842rr       11844         MOV.B   ES,#SEG( _SCPIError )
002A0C 9908rrrr       11845         MOV.W   R0,#SOF( _SCPIError )
002A10 8A00           11846         MOV.W   R0,[R0]
                      11847         BNE     _811
002A12 F302           +11847 ;       BEQ     _LG_692
002A14 D5012E         +11847 ;       JMP.L   _811
002A18 D5012E00       +11847 ;       JMP.L   _811
002A18                +11847 _LG_692:
                      11848 ; rs232cmd.c 3363               {
                      11849 ; rs232cmd.c 3364                       if ( !CmdRequest)
002A18 964842rr       11851         MOV.B   ES,#SEG( _CmdRequest )
002A1C 9908rrrr       11852         MOV.W   R0,#SOF( _CmdRequest )
002A20 8200           11853         MOV.B   R0L,[R0]
002A22 F207           11854         BNE     _782
                      11855 ; rs232cmd.c 3365                                       SCPIError = SyntaxErr;
002A24 964842rr       11857         MOV.B   ES,#SEG( _SCPIError )
002A28 9908rrrr       11858         MOV.W   R0,#SOF( _SCPIError )
002A2C BA03           11859         MOV.W   [R0],#03H
                      11860         BR      _811
002A2E D50121         +11860         JMP.L   _811
002A2E D5012100       +11860         JMP.L   _811
002A32                11861 _782:
                      11863 ; rs232cmd.c 3366                       else
                      11864 ; rs232cmd.c 3367                       {
                      11865 ; rs232cmd.c 3368                               if ( ParCnt)
002A32 964842rr       11867         MOV.B   ES,#SEG( _ParCnt )
002A36 9908rrrr       11868         MOV.W   R0,#SOF( _ParCnt )
002A3A 8200           11869         MOV.B   R0L,[R0]
002A3C F307           11870         BEQ     _783
                      11871 ; rs232cmd.c 3369                                       SCPIError = ParNotAllowed;
002A3E 964842rr       11873         MOV.B   ES,#SEG( _SCPIError )
002A42 9908rrrr       11874         MOV.W   R0,#SOF( _SCPIError )
002A46 BA06           11875         MOV.W   [R0],#06H
                      11876         BR      _811
002A48 D50114         +11876         JMP.L   _811
002A48 D5011400       +11876         JMP.L   _811
002A4C                11877 _783:
                      11880 ; rs232cmd.c 3370                               else
                      11881 ; rs232cmd.c 3371                               {
                      11882 ; rs232cmd.c 3372                                       str = AESEBUSystemPar[AudioSetup[AESEBUAu
                            dio].System].LongName;
002A4C 964842rr       11884         MOV.B   ES,#SEG( _AudioSetup+14 )
002A50 9908rrrr       11885         MOV.W   R0,#SOF( _AudioSetup+14 )
002A54 8A00           11886         MOV.W   R0,[R0]
002A56 E900000C       11887         MULU.W  R0,#0CH
002A5A 8920           11888         MOV.W   R2,R0
002A5C B930           11889         MOVS.W  R3,#00H
002A5E 9918rrrr       11890         MOV.W   R1,#SEG( _AESEBUSystemPar )
002A62 9908rrrr       11891         MOV.W   R0,#SOF( _AESEBUSystemPar )
002A66 0902           11892         ADD.W   R0,R2
002A68 1913           11893         ADDC.W  R1,R3
002A6A 862C43         11894         MOV.B   CS,R1L
002A6D 8820           11895         MOVC.W  R2,[R0+]
002A6F 99040000       11896         CMP.W   R0,#00H
002A73 F202           11897         BNE     _812
002A75 A64143         11898         ADDS.B  CS,#01H
002A75 A64143         11898         ADDS.B  CS,#01H
002A78                11899 _812:
002A78 8830           11900         MOVC.W  R3,[R0+]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 195

ADDR   CODE            LINE SOURCELINE
002A7A 8953           11901         MOV.W   R5,R3
002A7C 8942           11902         MOV.W   R4,R2
                      11904 ; rs232cmd.c 3373       
                      11905 ; rs232cmd.c 3374                                       while ( *str)
002A7E 866C43         11907         MOV.B   CS,R3L
002A81 8062           11908         MOVC.B  R3L,[R2+]
002A83 F312           11909         BEQ     _785
002A83 F31200         11909         BEQ     _785
002A86                11910 _784:
                      11911 ; rs232cmd.c 3375                                               rs232putchar( *str++);
002A86 8915           11913         MOV.W   R1,R5
002A88 8904           11914         MOV.W   R0,R4
002A8A 862C43         11915         MOV.B   CS,R1L
002A8D 8020           11916         MOVC.B  R1L,[R0+]
002A8F 8102           11917         MOV.B   R0L,R1L
                      11918         CALL    _rs232putchar
002A91 C4rrrrrr       +11918 ;       FCALL   _rs232putchar
002A95 99400001       11919         ADD.W   R4,#01H
002A99 99510000       11920         ADDC.W  R5,#00H
002A9D 8915           11924         MOV.W   R1,R5
002A9F 8904           11925         MOV.W   R0,R4
002AA1 862C43         11926         MOV.B   CS,R1L
002AA4 8020           11927         MOVC.B  R1L,[R0+]
002AA6 F2EF           11928         BNE     _784
002AA8                11930 _785:
                      11931 ; rs232cmd.c 3376       
                      11932 ; rs232cmd.c 3377                                       rs232putchar( ',');
002AA8 91082C         11934         MOV.B   R0L,#02CH
                      11935         CALL    _rs232putchar
002AAB C4rrrrrr       +11935 ;       FCALL   _rs232putchar
                      11936 ; rs232cmd.c 3378       
                      11937 ; rs232cmd.c 3379                                       str = AudioSignalPar[AudioSetup[AESEBUAud
                            io].Signal].LongName;
002AAF 964842rr       11939         MOV.B   ES,#SEG( _AudioSetup+16 )
002AB3 9908rrrr       11940         MOV.W   R0,#SOF( _AudioSetup+16 )
002AB7 8A00           11941         MOV.W   R0,[R0]
002AB9 E900000C       11942         MULU.W  R0,#0CH
002ABD B910           11943         MOVS.W  R1,#00H
002ABF 9958rrrr       11944         MOV.W   R5,#SEG( _AudioSignalPar )
002AC3 9948rrrr       11945         MOV.W   R4,#SOF( _AudioSignalPar )
002AC7 0940           11947         ADD.W   R4,R0
002AC9 1951           11948         ADDC.W  R5,R1
002ACB 86AC43         11949         MOV.B   CS,R5L
002ACE 8804           11950         MOVC.W  R0,[R4+]
002AD0 99440000       11951         CMP.W   R4,#00H
002AD4 F202           11952         BNE     _813
002AD6 A64143         11953         ADDS.B  CS,#01H
002AD6 A6414300       11953         ADDS.B  CS,#01H
002ADA                11954 _813:
002ADA 8814           11955         MOVC.W  R1,[R4+]
002ADC 8951           11956         MOV.W   R5,R1
002ADE 8940           11957         MOV.W   R4,R0
                      11959 ; rs232cmd.c 3380       
                      11960 ; rs232cmd.c 3381                                       while ( *str)
002AE0 862C43         11962         MOV.B   CS,R1L
002AE3 8020           11963         MOVC.B  R1L,[R0+]
002AE5 F312           11964         BEQ     _787
002AE5 F31200         11964         BEQ     _787
002AE8                11965 _786:
                      11966 ; rs232cmd.c 3382                                               rs232putchar( *str++);
002AE8 8915           11968         MOV.W   R1,R5
002AEA 8904           11969         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 196

ADDR   CODE            LINE SOURCELINE
002AEC 862C43         11970         MOV.B   CS,R1L
002AEF 8020           11971         MOVC.B  R1L,[R0+]
002AF1 8102           11972         MOV.B   R0L,R1L
                      11973         CALL    _rs232putchar
002AF3 C4rrrrrr       +11973 ;       FCALL   _rs232putchar
002AF7 99400001       11974         ADD.W   R4,#01H
002AFB 99510000       11975         ADDC.W  R5,#00H
002AFF 8915           11979         MOV.W   R1,R5
002B01 8904           11980         MOV.W   R0,R4
002B03 862C43         11981         MOV.B   CS,R1L
002B06 8020           11982         MOVC.B  R1L,[R0+]
002B08 F2EF           11983         BNE     _786
002B0A                11985 _787:
002B0A 91082C         11986         MOV.B   R0L,#02CH
                      11987 ; rs232cmd.c 3383       
                      11988 ; rs232cmd.c 3384                                       rs232putchar( ',');
                      11990         CALL    _rs232putchar
002B0D C4rrrrrr       +11990 ;       FCALL   _rs232putchar
                      11991 ; rs232cmd.c 3385       
                      11992 ; rs232cmd.c 3386                                       str = NULL;
002B11 B950           11994         MOV.W   R5,#00H
002B13 B940           11995         MOV.W   R4,#00H
                      11998 ; rs232cmd.c 3387       
                      11999 ; rs232cmd.c 3388                                       switch ( AudioSetup[AESEBUAudio].Level)
002B15 964842rr       12001         MOV.B   ES,#SEG( _AudioSetup+18 )
002B19 9908rrrr       12002         MOV.W   R0,#SOF( _AudioSetup+18 )
002B1D 8A00           12003         MOV.W   R0,[R0]
002B1F 99040000       12004         CMP.W   R0,#00H
002B23 F314           12005         BEQ     _788
002B25 99040001       12006         CMP.W   R0,#01H
002B29 F313           12007         BEQ     _789
002B2B 99040002       12008         CMP.W   R0,#02H
002B2F F313           12009         BEQ     _790
002B31 99040003       12010         CMP.W   R0,#03H
002B35 F313           12011         BEQ     _791
002B37 99040004       12012         CMP.W   R0,#04H
002B3B F313           12013         BEQ     _792
002B3D 99040005       12014         CMP.W   R0,#05H
002B41 F313           12015         BEQ     _793
002B43 99040006       12016         CMP.W   R0,#06H
002B47 F313           12017         BEQ     _794
002B49 FE15           12018         BR      _795
                      12019 ; rs232cmd.c 3389                                       {
                      12020 ; rs232cmd.c 3390                                               case M0dBFS:
002B4C                12022 _788:
                      12023 ; rs232cmd.c 3391                                                       level = 0;
002B4C B960           12025         MOV.W   R6,#00H
                      12028 ; rs232cmd.c 3392                                                       break;
002B4E FE31           12030         BR      _804
                      12031 ; rs232cmd.c 3393       
                      12032 ; rs232cmd.c 3394                                               case M9dBFS:
002B50                12034 _789:
                      12035 ; rs232cmd.c 3395                                                       level = -9;
002B50 9968FFF7       12037         MOV.W   R6,#0FFF7H
                      12040 ; rs232cmd.c 3396                                                       break;
002B54 FE2E           12042         BR      _804
                      12043 ; rs232cmd.c 3397       
                      12044 ; rs232cmd.c 3398                                               case M12dBFS:
002B56                12046 _790:
                      12047 ; rs232cmd.c 3399                                                       level = -12;
002B56 9968FFF4       12049         MOV.W   R6,#0FFF4H
                      12052 ; rs232cmd.c 3400                                                       break;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 197

ADDR   CODE            LINE SOURCELINE
002B5A FE2B           12054         BR      _804
                      12055 ; rs232cmd.c 3401       
                      12056 ; rs232cmd.c 3402                                               case M15dBFS:
002B5C                12058 _791:
                      12059 ; rs232cmd.c 3403                                                       level = -15;
002B5C 9968FFF1       12061         MOV.W   R6,#0FFF1H
                      12064 ; rs232cmd.c 3404                                                       break;
002B60 FE28           12066         BR      _804
                      12067 ; rs232cmd.c 3405       
                      12068 ; rs232cmd.c 3406                                               case M16dBFS:
002B62                12070 _792:
                      12071 ; rs232cmd.c 3407                                                       level = -16;
002B62 9968FFF0       12073         MOV.W   R6,#0FFF0H
                      12076 ; rs232cmd.c 3408                                                       break;
002B66 FE25           12078         BR      _804
                      12079 ; rs232cmd.c 3409       
                      12080 ; rs232cmd.c 3410                                               case M18dBFS:
002B68                12082 _793:
                      12083 ; rs232cmd.c 3411                                                       level = -18;
002B68 9968FFEE       12085         MOV.W   R6,#0FFEEH
                      12088 ; rs232cmd.c 3412                                                       break;
002B6C FE22           12090         BR      _804
                      12091 ; rs232cmd.c 3413       
                      12092 ; rs232cmd.c 3414                                               case M21dBFS:
002B6E                12094 _794:
                      12095 ; rs232cmd.c 3415                                                       level = -21;
002B6E 9968FFEB       12097         MOV.W   R6,#0FFEBH
                      12100 ; rs232cmd.c 3416                                                       break;
002B72 FE1F           12102         BR      _804
                      12103 ; rs232cmd.c 3417       
                      12104 ; rs232cmd.c 3418                                               default:
002B74                12106 _795:
                      12107 ; rs232cmd.c 3419                                                       str = SILENCEParTxt;
002B74 9958rrrr       12109         MOV.W   R5,#SEG( _SILENCEParTxt )
002B78 9948rrrr       12110         MOV.W   R4,#SOF( _SILENCEParTxt )
                      12113 ; rs232cmd.c 3420       
                      12114 ; rs232cmd.c 3421                                                       while ( *str)
002B7C 8915           12116         MOV.W   R1,R5
002B7E 8904           12117         MOV.W   R0,R4
002B80 862C43         12118         MOV.B   CS,R1L
002B83 8020           12119         MOVC.B  R1L,[R0+]
002B85 F312           12120         BEQ     _797
002B85 F31200         12120         BEQ     _797
002B88                12121 _796:
                      12122 ; rs232cmd.c 3422                                                               rs232putchar( *st
                            r++);
002B88 8915           12124         MOV.W   R1,R5
002B8A 8904           12125         MOV.W   R0,R4
002B8C 862C43         12126         MOV.B   CS,R1L
002B8F 8020           12127         MOVC.B  R1L,[R0+]
002B91 8102           12128         MOV.B   R0L,R1L
                      12129         CALL    _rs232putchar
002B93 C4rrrrrr       +12129 ;       FCALL   _rs232putchar
002B97 99400001       12130         ADD.W   R4,#01H
002B9B 99510000       12131         ADDC.W  R5,#00H
002B9F 8915           12135         MOV.W   R1,R5
002BA1 8904           12136         MOV.W   R0,R4
002BA3 862C43         12137         MOV.B   CS,R1L
002BA6 8020           12138         MOVC.B  R1L,[R0+]
002BA8 F2EF           12139         BNE     _796
002BAA                12141 _797:
002BAA 91082C         12142         MOV.B   R0L,#02CH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 198

ADDR   CODE            LINE SOURCELINE
                      12143 ; rs232cmd.c 3423       
                      12144 ; rs232cmd.c 3424                                                       rs232putchar( ',');
                      12146         CALL    _rs232putchar
002BAD C4rrrrrr       +12146 ;       FCALL   _rs232putchar
                      12147 ; rs232cmd.c 3425                                                       break;
                      12148 ; rs232cmd.c 3426                                               }
002BB2                12150 _804:
                      12151 ; rs232cmd.c 3427       
                      12152 ; rs232cmd.c 3428                                       if ( str == NULL)
002BB2 6954           12154         OR.W    R5,R4
002BB4 F20A           12155         BNE     _805
                      12156 ; rs232cmd.c 3429                                               rs232printf( 6, "%d,", level);
002BB6 B906           12158         MOV.W   R0,#06H
002BB8 0F40           12159         PUSH.W  R6
002BBA 9938rrrr       12162         MOV.W   R3,#SEG( _529 )
002BBE 9928rrrr       12163         MOV.W   R2,#SOF( _529 )
002BC2 0F0C           12164         PUSH.W  R2, R3
                      12166         CALL    _rs232printf
002BC4 C4rrrrrr       +12166 ;       FCALL   _rs232printf
002BC8 A976           12167         ADDS.W  R7,#06H
002BCA                12169 _805:
                      12170 ; rs232cmd.c 3430       
                      12171 ; rs232cmd.c 3431                                       rs232printf( 6, "%.1f,", AudioSetup[AESEB
                            UAudio].Timing);
002BCA 964842rr       12173         MOV.B   ES,#SEG( _AudioSetup+20 )
002BCE 9918rrrr       12174         MOV.W   R1,#SOF( _AudioSetup+20 )
002BD2 8B01           12175         MOV.W   R0,[R1+]
002BD4 8A11           12176         MOV.W   R1,[R1]
002BD6 C4rrrrrr       12177         FCALL   __SPF2DPF
002BDA 0F0F           12178         PUSH.W  R0, R1, R2, R3
002BDC 9918rrrr       12180         MOV.W   R1,#SEG( _781 )
002BE0 9908rrrr       12181         MOV.W   R0,#SOF( _781 )
002BE4 0F03           12182         PUSH.W  R0, R1
002BE6 B906           12184         MOV.W   R0,#06H
                      12185         CALL    _rs232printf
002BE8 C4rrrrrr       +12185 ;       FCALL   _rs232printf
002BEC 9970000C       12186         ADD.W   R7,#0CH
                      12188 ; rs232cmd.c 3432       
                      12189 ; rs232cmd.c 3433                                       str = AudioFrequencyPar[AudioSetup[AESEBU
                            Audio].Frequency].LongName;
002BF0 964842rr       12191         MOV.B   ES,#SEG( _AudioSetup+24 )
002BF4 9908rrrr       12192         MOV.W   R0,#SOF( _AudioSetup+24 )
002BF8 8A00           12193         MOV.W   R0,[R0]
002BFA E900000C       12194         MULU.W  R0,#0CH
002BFE 8920           12195         MOV.W   R2,R0
002C00 B930           12196         MOVS.W  R3,#00H
002C02 9918rrrr       12197         MOV.W   R1,#SEG( _AudioFrequencyPar )
002C06 9908rrrr       12198         MOV.W   R0,#SOF( _AudioFrequencyPar )
002C0A 0902           12199         ADD.W   R0,R2
002C0C 1913           12200         ADDC.W  R1,R3
002C0E 862C43         12201         MOV.B   CS,R1L
002C11 8840           12202         MOVC.W  R4,[R0+]
002C13 99040000       12203         CMP.W   R0,#00H
002C17 F202           12204         BNE     _814
002C19 A64143         12205         ADDS.B  CS,#01H
002C19 A64143         12205         ADDS.B  CS,#01H
002C1C                12206 _814:
002C1C 8850           12207         MOVC.W  R5,[R0+]
                      12210 ; rs232cmd.c 3434       
                      12211 ; rs232cmd.c 3435                                       while ( *str)
002C1E 8915           12213         MOV.W   R1,R5
002C20 8904           12214         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 199

ADDR   CODE            LINE SOURCELINE
002C22 862C43         12215         MOV.B   CS,R1L
002C25 8020           12216         MOVC.B  R1L,[R0+]
002C27 F312           12217         BEQ     _807
002C27 F31200         12217         BEQ     _807
002C2A                12218 _806:
                      12219 ; rs232cmd.c 3436                                               rs232putchar( *str++);
002C2A 8915           12221         MOV.W   R1,R5
002C2C 8904           12222         MOV.W   R0,R4
002C2E 862C43         12223         MOV.B   CS,R1L
002C31 8020           12224         MOVC.B  R1L,[R0+]
002C33 8102           12225         MOV.B   R0L,R1L
                      12226         CALL    _rs232putchar
002C35 C4rrrrrr       +12226 ;       FCALL   _rs232putchar
002C39 99400001       12227         ADD.W   R4,#01H
002C3D 99510000       12228         ADDC.W  R5,#00H
002C41 8915           12232         MOV.W   R1,R5
002C43 8904           12233         MOV.W   R0,R4
002C45 862C43         12234         MOV.B   CS,R1L
002C48 8020           12235         MOVC.B  R1L,[R0+]
002C4A F2EF           12236         BNE     _806
002C4C                12238 _807:
                      12239 ; rs232cmd.c 3437       
                      12240 ; rs232cmd.c 3438                                       rs232putchar( ',');
002C4C 91082C         12242         MOV.B   R0L,#02CH
                      12243         CALL    _rs232putchar
002C4F C4rrrrrr       +12243 ;       FCALL   _rs232putchar
                      12244 ; rs232cmd.c 3439       
                      12245 ; rs232cmd.c 3440                                       rs232printf( 6, "%d\n", AudioSetup[AESEBU
                            Audio].Click);
002C53 964842rr       12247         MOV.B   ES,#SEG( _AudioSetup+26 )
002C57 9908rrrr       12248         MOV.W   R0,#SOF( _AudioSetup+26 )
002C5B 8A00           12249         MOV.W   R0,[R0]
002C5D 0F01           12250         PUSH.W  R0
002C5F 9918rrrr       12252         MOV.W   R1,#SEG( _9 )
002C63 9908rrrr       12253         MOV.W   R0,#SOF( _9 )
002C67 0F03           12254         PUSH.W  R0, R1
002C69 B906           12256         MOV.W   R0,#06H
                      12257         CALL    _rs232printf
002C6B C4rrrrrr       +12257 ;       FCALL   _rs232printf
002C6F A976           12258         ADDS.W  R7,#06H
                      12260 ; rs232cmd.c 3441                               }
                      12261 ; rs232cmd.c 3442                       }
                      12262 ; rs232cmd.c 3443               }
002C72                12264 _811:
                      12265 ; rs232cmd.c 3444       }
002C72 2F70           12267         POP.W   R4, R5, R6
002C74 D680           12269         RET
                      12272 ; rs232cmd.c 3445       
                      12273 ; rs232cmd.c 3446       /************************************************************************
                            **/
                      12274 ; rs232cmd.c 3447       /* AudioGenAESEBUSystem                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      12275 ; rs232cmd.c 3448       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12276 ; rs232cmd.c 3449       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 200

ADDR   CODE            LINE SOURCELINE
                      12277 ; rs232cmd.c 3450       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      12278 ; rs232cmd.c 3451       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12279 ; rs232cmd.c 3452       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12280 ; rs232cmd.c 3453       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12281 ; rs232cmd.c 3454       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12282 ; rs232cmd.c 3455       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12283 ; rs232cmd.c 3456       /************************************************************************
                            **/
                      12284 ; rs232cmd.c 3457       void AudioGenAESEBUSystem( void)
                      12285 ; rs232cmd.c 3458       {
                      12286         ALIGN   1
                      12288         PUBLIC  _AudioGenAESEBUSystem
002C76                12289 _AudioGenAESEBUSystem:
002C76 0F30           12293         PUSH.W  R4, R5
                      12299 ; rs232cmd.c 3459               int system;
                      12300 ; rs232cmd.c 3460               char code *str;
                      12301 ; rs232cmd.c 3461       
                      12302 ; rs232cmd.c 3462               if ( CmdExecute && !SCPIError)
002C78 964842rr       12304         MOV.B   ES,#SEG( _CmdExecute )
002C7C 9908rrrr       12305         MOV.W   R0,#SOF( _CmdExecute )
002C80 8200           12306         MOV.B   R0L,[R0]
002C82 F379           12307         BEQ     _827
002C84 964842rr       12308         MOV.B   ES,#SEG( _SCPIError )
002C88 9908rrrr       12309         MOV.W   R0,#SOF( _SCPIError )
002C8C 8A00           12310         MOV.W   R0,[R0]
002C8E F273           12311         BNE     _827
                      12312 ; rs232cmd.c 3463               {
                      12313 ; rs232cmd.c 3464                       if ( CmdRequest)
002C90 964842rr       12315         MOV.B   ES,#SEG( _CmdRequest )
002C94 9908rrrr       12316         MOV.W   R0,#SOF( _CmdRequest )
002C98 8200           12317         MOV.B   R0L,[R0]
002C9A F33F           12318         BEQ     _818
                      12319 ; rs232cmd.c 3465                       {
                      12320 ; rs232cmd.c 3466                               if ( ParCnt)
002C9C 964842rr       12322         MOV.B   ES,#SEG( _ParCnt )
002CA0 9908rrrr       12323         MOV.W   R0,#SOF( _ParCnt )
002CA4 8200           12324         MOV.B   R0L,[R0]
002CA6 F306           12325         BEQ     _815
                      12326 ; rs232cmd.c 3467                                       SCPIError = ParNotAllowed;
002CA8 964842rr       12328         MOV.B   ES,#SEG( _SCPIError )
002CAC 9908rrrr       12329         MOV.W   R0,#SOF( _SCPIError )
002CB0 BA06           12330         MOV.W   [R0],#06H
002CB2 FE61           12331         BR      _827
002CB2 FE61           12331         BR      _827
002CB4                12332 _815:
                      12333 ; rs232cmd.c 3468                               else
                      12334 ; rs232cmd.c 3469                               {
                      12335 ; rs232cmd.c 3470                                       str = AESEBUSystemPar[AudioSetup[AESEBUAu
                            dio].System].LongName;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 201

ADDR   CODE            LINE SOURCELINE
002CB4 964842rr       12337         MOV.B   ES,#SEG( _AudioSetup+14 )
002CB8 9908rrrr       12338         MOV.W   R0,#SOF( _AudioSetup+14 )
002CBC 8A00           12339         MOV.W   R0,[R0]
002CBE E900000C       12340         MULU.W  R0,#0CH
002CC2 8920           12341         MOV.W   R2,R0
002CC4 B930           12342         MOVS.W  R3,#00H
002CC6 9918rrrr       12343         MOV.W   R1,#SEG( _AESEBUSystemPar )
002CCA 9908rrrr       12344         MOV.W   R0,#SOF( _AESEBUSystemPar )
002CCE 0902           12345         ADD.W   R0,R2
002CD0 1913           12346         ADDC.W  R1,R3
002CD2 862C43         12347         MOV.B   CS,R1L
002CD5 8820           12348         MOVC.W  R2,[R0+]
002CD7 99040000       12349         CMP.W   R0,#00H
002CDB F202           12350         BNE     _828
002CDD A64143         12351         ADDS.B  CS,#01H
002CDD A64143         12351         ADDS.B  CS,#01H
002CE0                12352 _828:
002CE0 8830           12353         MOVC.W  R3,[R0+]
002CE2 8953           12354         MOV.W   R5,R3
002CE4 8942           12355         MOV.W   R4,R2
                      12357 ; rs232cmd.c 3471       
                      12358 ; rs232cmd.c 3472                                       while ( *str)
002CE6 866C43         12360         MOV.B   CS,R3L
002CE9 8062           12361         MOVC.B  R3L,[R2+]
002CEB F312           12362         BEQ     _817
002CEB F31200         12362         BEQ     _817
002CEE                12363 _816:
                      12364 ; rs232cmd.c 3473                                               rs232putchar( *str++);
002CEE 8915           12366         MOV.W   R1,R5
002CF0 8904           12367         MOV.W   R0,R4
002CF2 862C43         12368         MOV.B   CS,R1L
002CF5 8020           12369         MOVC.B  R1L,[R0+]
002CF7 8102           12370         MOV.B   R0L,R1L
                      12371         CALL    _rs232putchar
002CF9 C4rrrrrr       +12371 ;       FCALL   _rs232putchar
002CFD 99400001       12372         ADD.W   R4,#01H
002D01 99510000       12373         ADDC.W  R5,#00H
002D05 8915           12377         MOV.W   R1,R5
002D07 8904           12378         MOV.W   R0,R4
002D09 862C43         12379         MOV.B   CS,R1L
002D0C 8020           12380         MOVC.B  R1L,[R0+]
002D0E F2EF           12381         BNE     _816
002D10                12383 _817:
                      12384 ; rs232cmd.c 3474       
                      12385 ; rs232cmd.c 3475                                       rs232putchar('\n');
002D10 91080A         12387         MOV.B   R0L,#0AH
                      12388         CALL    _rs232putchar
002D13 C4rrrrrr       +12388 ;       FCALL   _rs232putchar
                      12389 ; rs232cmd.c 3476                               }
                      12390 ; rs232cmd.c 3477                       }
002D17 FE2F           12392         BR      _827
002D17 FE2F00         12392         BR      _827
002D1A                12393 _818:
                      12394 ; rs232cmd.c 3478                       else
                      12395 ; rs232cmd.c 3479                       {
                      12396 ; rs232cmd.c 3480                               if ( ParCnt != 1)
002D1A 964842rr       12398         MOV.B   ES,#SEG( _ParCnt )
002D1E 9908rrrr       12399         MOV.W   R0,#SOF( _ParCnt )
002D22 8200           12400         MOV.B   R0L,[R0]
002D24 910401         12401         CMP.B   R0L,#01H
002D27 F307           12402         BEQ     _819
                      12403 ; rs232cmd.c 3481                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 202

ADDR   CODE            LINE SOURCELINE
002D29 964842rr       12405         MOV.B   ES,#SEG( _SCPIError )
002D2D 9908rrrr       12406         MOV.W   R0,#SOF( _SCPIError )
002D31 BA03           12407         MOV.W   [R0],#03H
002D33 FE21           12408         BR      _827
002D33 FE2100         12408         BR      _827
002D36                12409 _819:
                      12410 ; rs232cmd.c 3482                               else
                      12411 ; rs232cmd.c 3483                               {
                      12412 ; rs232cmd.c 3484                                       system = FindParameter( Cmd, AESEBUSystem
                            Par);
002D36 9918rrrr       12414         MOV.W   R1,#SEG( _Cmd )
002D3A 9908rrrr       12415         MOV.W   R0,#SOF( _Cmd )
002D3E 9938rrrr       12416         MOV.W   R3,#SEG( _AESEBUSystemPar )
002D42 9928rrrr       12417         MOV.W   R2,#SOF( _AESEBUSystemPar )
002D46 C5192C         12418         CALL    _FindParameter
                      12420 ; rs232cmd.c 3485               
                      12421 ; rs232cmd.c 3486                                       if ( system > -1)
002D49 8910           12423         MOV.W   R1,R0
002D4B 9914FFFF       12424         CMP.W   R1,#0FFFFH
002D4F FD0D           12427         BLE     _820
                      12428 ; rs232cmd.c 3487                                       {
                      12429 ; rs232cmd.c 3488                                               if ( SetAudioSystem( AESEBUAudio,
                             system) == FAIL)
002D51 B901           12431         MOV.W   R0,#01H
                      12432         CALL    _SetAudioSystem
002D53 C4rrrrrr       +12432 ;       FCALL   _SetAudioSystem
002D57 6900           12434         OR.W    R0,R0
002D59 F20E           12435         BNE     _827
                      12436 ; rs232cmd.c 3489                                                       SCPIError = ExecErr;
002D5B 964842rr       12438         MOV.B   ES,#SEG( _SCPIError )
002D5F 9908rrrr       12439         MOV.W   R0,#SOF( _SCPIError )
002D63 9A08001D       12440         MOV.W   [R0],#01DH
                      12441 ; rs232cmd.c 3490                                       }
002D67 FE07           12443         BR      _827
002D67 FE0700         12443         BR      _827
002D6A                12444 _820:
                      12445 ; rs232cmd.c 3491                                       else
                      12446 ; rs232cmd.c 3492                                               SCPIError = DataOutOfRange;
002D6A 964842rr       12448         MOV.B   ES,#SEG( _SCPIError )
002D6E 9908rrrr       12449         MOV.W   R0,#SOF( _SCPIError )
002D72 9A080021       12450         MOV.W   [R0],#021H
                      12451 ; rs232cmd.c 3493                               }
                      12452 ; rs232cmd.c 3494                       }
                      12453 ; rs232cmd.c 3495               }
002D76                12455 _827:
                      12456 ; rs232cmd.c 3496       }
002D76 2F30           12458         POP.W   R4, R5
002D78 D680           12460         RET
                      12463 ; rs232cmd.c 3497       
                      12464 ; rs232cmd.c 3498       /************************************************************************
                            **/
                      12465 ; rs232cmd.c 3499       /* AudioGenAESEBUSignal                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      12466 ; rs232cmd.c 3500       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12467 ; rs232cmd.c 3501       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 203

ADDR   CODE            LINE SOURCELINE
                      12468 ; rs232cmd.c 3502       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      12469 ; rs232cmd.c 3503       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12470 ; rs232cmd.c 3504       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12471 ; rs232cmd.c 3505       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12472 ; rs232cmd.c 3506       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12473 ; rs232cmd.c 3507       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12474 ; rs232cmd.c 3508       /************************************************************************
                            **/
                      12475 ; rs232cmd.c 3509       void AudioGenAESEBUSignal( void)
                      12476 ; rs232cmd.c 3510       {
                      12477         ALIGN   1
                      12479         PUBLIC  _AudioGenAESEBUSignal
002D7A                12480 _AudioGenAESEBUSignal:
002D7A 0F30           12484         PUSH.W  R4, R5
                      12490 ; rs232cmd.c 3511               int signal;
                      12491 ; rs232cmd.c 3512               char code *str;
                      12492 ; rs232cmd.c 3513       
                      12493 ; rs232cmd.c 3514               if ( CmdExecute && !SCPIError)
002D7C 964842rr       12495         MOV.B   ES,#SEG( _CmdExecute )
002D80 9908rrrr       12496         MOV.W   R0,#SOF( _CmdExecute )
002D84 8200           12497         MOV.B   R0L,[R0]
002D86 F379           12498         BEQ     _843
002D88 964842rr       12499         MOV.B   ES,#SEG( _SCPIError )
002D8C 9908rrrr       12500         MOV.W   R0,#SOF( _SCPIError )
002D90 8A00           12501         MOV.W   R0,[R0]
002D92 F273           12502         BNE     _843
                      12503 ; rs232cmd.c 3515               {
                      12504 ; rs232cmd.c 3516                       if ( CmdRequest)
002D94 964842rr       12506         MOV.B   ES,#SEG( _CmdRequest )
002D98 9908rrrr       12507         MOV.W   R0,#SOF( _CmdRequest )
002D9C 8200           12508         MOV.B   R0L,[R0]
002D9E F33F           12509         BEQ     _834
                      12510 ; rs232cmd.c 3517                       {
                      12511 ; rs232cmd.c 3518                               if ( ParCnt)
002DA0 964842rr       12513         MOV.B   ES,#SEG( _ParCnt )
002DA4 9908rrrr       12514         MOV.W   R0,#SOF( _ParCnt )
002DA8 8200           12515         MOV.B   R0L,[R0]
002DAA F306           12516         BEQ     _831
                      12517 ; rs232cmd.c 3519                                       SCPIError = ParNotAllowed;
002DAC 964842rr       12519         MOV.B   ES,#SEG( _SCPIError )
002DB0 9908rrrr       12520         MOV.W   R0,#SOF( _SCPIError )
002DB4 BA06           12521         MOV.W   [R0],#06H
002DB6 FE61           12522         BR      _843
002DB6 FE61           12522         BR      _843
002DB8                12523 _831:
                      12524 ; rs232cmd.c 3520                               else
                      12525 ; rs232cmd.c 3521                               {
                      12526 ; rs232cmd.c 3522                                       str = AudioSignalPar[AudioSetup[AESEBUAud
                            io].Signal].LongName;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 204

ADDR   CODE            LINE SOURCELINE
002DB8 964842rr       12528         MOV.B   ES,#SEG( _AudioSetup+16 )
002DBC 9908rrrr       12529         MOV.W   R0,#SOF( _AudioSetup+16 )
002DC0 8A00           12530         MOV.W   R0,[R0]
002DC2 E900000C       12531         MULU.W  R0,#0CH
002DC6 8920           12532         MOV.W   R2,R0
002DC8 B930           12533         MOVS.W  R3,#00H
002DCA 9918rrrr       12534         MOV.W   R1,#SEG( _AudioSignalPar )
002DCE 9908rrrr       12535         MOV.W   R0,#SOF( _AudioSignalPar )
002DD2 0902           12536         ADD.W   R0,R2
002DD4 1913           12537         ADDC.W  R1,R3
002DD6 862C43         12538         MOV.B   CS,R1L
002DD9 8820           12539         MOVC.W  R2,[R0+]
002DDB 99040000       12540         CMP.W   R0,#00H
002DDF F202           12541         BNE     _844
002DE1 A64143         12542         ADDS.B  CS,#01H
002DE1 A64143         12542         ADDS.B  CS,#01H
002DE4                12543 _844:
002DE4 8830           12544         MOVC.W  R3,[R0+]
002DE6 8953           12545         MOV.W   R5,R3
002DE8 8942           12546         MOV.W   R4,R2
                      12548 ; rs232cmd.c 3523       
                      12549 ; rs232cmd.c 3524                                       while ( *str)
002DEA 866C43         12551         MOV.B   CS,R3L
002DED 8062           12552         MOVC.B  R3L,[R2+]
002DEF F312           12553         BEQ     _833
002DEF F31200         12553         BEQ     _833
002DF2                12554 _832:
                      12555 ; rs232cmd.c 3525                                               rs232putchar( *str++);
002DF2 8915           12557         MOV.W   R1,R5
002DF4 8904           12558         MOV.W   R0,R4
002DF6 862C43         12559         MOV.B   CS,R1L
002DF9 8020           12560         MOVC.B  R1L,[R0+]
002DFB 8102           12561         MOV.B   R0L,R1L
                      12562         CALL    _rs232putchar
002DFD C4rrrrrr       +12562 ;       FCALL   _rs232putchar
002E01 99400001       12563         ADD.W   R4,#01H
002E05 99510000       12564         ADDC.W  R5,#00H
002E09 8915           12568         MOV.W   R1,R5
002E0B 8904           12569         MOV.W   R0,R4
002E0D 862C43         12570         MOV.B   CS,R1L
002E10 8020           12571         MOVC.B  R1L,[R0+]
002E12 F2EF           12572         BNE     _832
002E14                12574 _833:
                      12575 ; rs232cmd.c 3526       
                      12576 ; rs232cmd.c 3527                                       rs232putchar('\n');
002E14 91080A         12578         MOV.B   R0L,#0AH
                      12579         CALL    _rs232putchar
002E17 C4rrrrrr       +12579 ;       FCALL   _rs232putchar
                      12580 ; rs232cmd.c 3528                               }
                      12581 ; rs232cmd.c 3529                       }
002E1B FE2F           12583         BR      _843
002E1B FE2F00         12583         BR      _843
002E1E                12584 _834:
                      12585 ; rs232cmd.c 3530                       else
                      12586 ; rs232cmd.c 3531                       {
                      12587 ; rs232cmd.c 3532                               if ( ParCnt != 1)
002E1E 964842rr       12589         MOV.B   ES,#SEG( _ParCnt )
002E22 9908rrrr       12590         MOV.W   R0,#SOF( _ParCnt )
002E26 8200           12591         MOV.B   R0L,[R0]
002E28 910401         12592         CMP.B   R0L,#01H
002E2B F307           12593         BEQ     _835
                      12594 ; rs232cmd.c 3533                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 205

ADDR   CODE            LINE SOURCELINE
002E2D 964842rr       12596         MOV.B   ES,#SEG( _SCPIError )
002E31 9908rrrr       12597         MOV.W   R0,#SOF( _SCPIError )
002E35 BA03           12598         MOV.W   [R0],#03H
002E37 FE21           12599         BR      _843
002E37 FE2100         12599         BR      _843
002E3A                12600 _835:
                      12601 ; rs232cmd.c 3534                               else
                      12602 ; rs232cmd.c 3535                               {
                      12603 ; rs232cmd.c 3536                                       signal = FindParameter( Cmd, AudioSignalP
                            ar);
002E3A 9918rrrr       12605         MOV.W   R1,#SEG( _Cmd )
002E3E 9908rrrr       12606         MOV.W   R0,#SOF( _Cmd )
002E42 9938rrrr       12607         MOV.W   R3,#SEG( _AudioSignalPar )
002E46 9928rrrr       12608         MOV.W   R2,#SOF( _AudioSignalPar )
002E4A C518AA         12609         CALL    _FindParameter
                      12611 ; rs232cmd.c 3537               
                      12612 ; rs232cmd.c 3538                                       if ( signal > -1)
002E4D 8910           12614         MOV.W   R1,R0
002E4F 9914FFFF       12615         CMP.W   R1,#0FFFFH
002E53 FD0D           12618         BLE     _836
                      12619 ; rs232cmd.c 3539                                       {
                      12620 ; rs232cmd.c 3540                                               if ( SetAudioSignal( AESEBUAudio,
                             signal) == FAIL)
002E55 B901           12622         MOV.W   R0,#01H
                      12623         CALL    _SetAudioSignal
002E57 C4rrrrrr       +12623 ;       FCALL   _SetAudioSignal
002E5B 6900           12625         OR.W    R0,R0
002E5D F20E           12626         BNE     _843
                      12627 ; rs232cmd.c 3541                                                       SCPIError = ExecErr;
002E5F 964842rr       12629         MOV.B   ES,#SEG( _SCPIError )
002E63 9908rrrr       12630         MOV.W   R0,#SOF( _SCPIError )
002E67 9A08001D       12631         MOV.W   [R0],#01DH
                      12632 ; rs232cmd.c 3542                                       }
002E6B FE07           12634         BR      _843
002E6B FE0700         12634         BR      _843
002E6E                12635 _836:
                      12636 ; rs232cmd.c 3543                                       else
                      12637 ; rs232cmd.c 3544                                               SCPIError = DataOutOfRange;
002E6E 964842rr       12639         MOV.B   ES,#SEG( _SCPIError )
002E72 9908rrrr       12640         MOV.W   R0,#SOF( _SCPIError )
002E76 9A080021       12641         MOV.W   [R0],#021H
                      12642 ; rs232cmd.c 3545                               }
                      12643 ; rs232cmd.c 3546                       }
                      12644 ; rs232cmd.c 3547               }
002E7A                12646 _843:
                      12647 ; rs232cmd.c 3548       }
002E7A 2F30           12649         POP.W   R4, R5
002E7C D680           12651         RET
                      12654 ; rs232cmd.c 3549       
                      12655 ; rs232cmd.c 3550       /************************************************************************
                            **/
                      12656 ; rs232cmd.c 3551       /* AudioGenAESEBULevel                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      12657 ; rs232cmd.c 3552       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12658 ; rs232cmd.c 3553       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 206

ADDR   CODE            LINE SOURCELINE
                      12659 ; rs232cmd.c 3554       /* Revised:             0000628                                          
                                                                                                                             
                                                                                    */
                      12660 ; rs232cmd.c 3555       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      12661 ; rs232cmd.c 3556       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      12662 ; rs232cmd.c 3557       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      12663 ; rs232cmd.c 3558       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      12664 ; rs232cmd.c 3559       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      12665 ; rs232cmd.c 3560       /************************************************************************
                            **/
                      12666 ; rs232cmd.c 3561       void AudioGenAESEBULevel( void)
                      12667 ; rs232cmd.c 3562       {
                      12668         ALIGN   1
                      12670         PUBLIC  _AudioGenAESEBULevel
002E7E                12671 _AudioGenAESEBULevel:
002E7E 0F30           12675         PUSH.W  R4, R5
002E80 A97E           12677         ADDS.W  R7,#0EH
                      12682 ; rs232cmd.c 3563               code char *str;
                      12683 ; rs232cmd.c 3564               int level;
                      12684 ; rs232cmd.c 3565       
                      12685 ; rs232cmd.c 3566               if ( CmdExecute && !SCPIError)
002E82 964842rr       12687         MOV.B   ES,#SEG( _CmdExecute )
002E86 9908rrrr       12688         MOV.W   R0,#SOF( _CmdExecute )
002E8A 8200           12689         MOV.B   R0L,[R0]
                      12690         BEQ     _892
002E8C F202           +12690 ;       BNE     _LG_776
002E8E D500EC         +12690 ;       JMP.L   _892
002E92 D500EC00       +12690 ;       JMP.L   _892
002E92                +12690 _LG_776:
002E92 964842rr       12691         MOV.B   ES,#SEG( _SCPIError )
002E96 9908rrrr       12692         MOV.W   R0,#SOF( _SCPIError )
002E9A 8A00           12693         MOV.W   R0,[R0]
                      12694         BNE     _892
002E9C F302           +12694 ;       BEQ     _LG_778
002E9E D500E4         +12694 ;       JMP.L   _892
002EA2 D500E400       +12694 ;       JMP.L   _892
002EA2                +12694 _LG_778:
                      12695 ; rs232cmd.c 3567               {
                      12696 ; rs232cmd.c 3568                       if ( CmdRequest)
002EA2 964842rr       12698         MOV.B   ES,#SEG( _CmdRequest )
002EA6 9908rrrr       12699         MOV.W   R0,#SOF( _CmdRequest )
002EAA 8200           12700         MOV.B   R0L,[R0]
002EAC F367           12701         BEQ     _864
                      12702 ; rs232cmd.c 3569                       {
                      12703 ; rs232cmd.c 3570                               if ( ParCnt)
002EAE 964842rr       12705         MOV.B   ES,#SEG( _ParCnt )
002EB2 9908rrrr       12706         MOV.W   R0,#SOF( _ParCnt )
002EB6 8200           12707         MOV.B   R0L,[R0]
002EB8 F307           12708         BEQ     _847
                      12709 ; rs232cmd.c 3571                                       SCPIError = ParNotAllowed;
002EBA 964842rr       12711         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 207

ADDR   CODE            LINE SOURCELINE
002EBE 9908rrrr       12712         MOV.W   R0,#SOF( _SCPIError )
002EC2 BA06           12713         MOV.W   [R0],#06H
                      12714         BR      _892
002EC4 D500D1         +12714         JMP.L   _892
002EC4 D500D100       +12714         JMP.L   _892
002EC8                12715 _847:
                      12716 ; rs232cmd.c 3572                               else
                      12717 ; rs232cmd.c 3573                               {
                      12718 ; rs232cmd.c 3574                                       switch ( AudioSetup[AESEBUAudio].Level)
002EC8 964842rr       12720         MOV.B   ES,#SEG( _AudioSetup+18 )
002ECC 9908rrrr       12721         MOV.W   R0,#SOF( _AudioSetup+18 )
002ED0 8A00           12722         MOV.W   R0,[R0]
002ED2 99040000       12723         CMP.W   R0,#00H
002ED6 F345           12724         BEQ     _857
002ED8 99040001       12725         CMP.W   R0,#01H
002EDC F310           12726         BEQ     _848
002EDE 99040002       12727         CMP.W   R0,#02H
002EE2 F310           12728         BEQ     _849
002EE4 99040003       12729         CMP.W   R0,#03H
002EE8 F310           12730         BEQ     _850
002EEA 99040004       12731         CMP.W   R0,#04H
002EEE F310           12732         BEQ     _851
002EF0 99040005       12733         CMP.W   R0,#05H
002EF4 F310           12734         BEQ     _852
002EF6 99040006       12735         CMP.W   R0,#06H
002EFA F310           12736         BEQ     _853
002EFC FE12           12737         BR      _854
                      12738 ; rs232cmd.c 3575                                       {
                      12739 ; rs232cmd.c 3576                                               case M0dBFS:
                      12740 ; rs232cmd.c 3577                                                       level = 0;
                      12741 ; rs232cmd.c 3578                                                       break;
                      12742 ; rs232cmd.c 3579       
                      12743 ; rs232cmd.c 3580                                               case M9dBFS:
002EFE                12745 _848:
                      12746 ; rs232cmd.c 3581                                                       level = -9;
002EFE 9A78FFF7       12748         MOV.W   [R7],#0FFF7H
                      12749 ; rs232cmd.c 3582                                                       break;
002F02 FE30           12751         BR      _863
                      12752 ; rs232cmd.c 3583       
                      12753 ; rs232cmd.c 3584                                               case M12dBFS:
002F04                12755 _849:
                      12756 ; rs232cmd.c 3585                                                       level = -12;
002F04 9A78FFF4       12758         MOV.W   [R7],#0FFF4H
                      12759 ; rs232cmd.c 3586                                                       break;
002F08 FE2D           12761         BR      _863
                      12762 ; rs232cmd.c 3587       
                      12763 ; rs232cmd.c 3588                                               case M15dBFS:
002F0A                12765 _850:
                      12766 ; rs232cmd.c 3589                                                       level = -15;
002F0A 9A78FFF1       12768         MOV.W   [R7],#0FFF1H
                      12769 ; rs232cmd.c 3590                                                       break;
002F0E FE2A           12771         BR      _863
                      12772 ; rs232cmd.c 3591       
                      12773 ; rs232cmd.c 3592                                               case M16dBFS:
002F10                12775 _851:
                      12776 ; rs232cmd.c 3593                                                       level = -16;
002F10 9A78FFF0       12778         MOV.W   [R7],#0FFF0H
                      12779 ; rs232cmd.c 3594                                                       break;
002F14 FE27           12781         BR      _863
                      12782 ; rs232cmd.c 3595       
                      12783 ; rs232cmd.c 3596                                               case M18dBFS:
002F16                12785 _852:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 208

ADDR   CODE            LINE SOURCELINE
                      12786 ; rs232cmd.c 3597                                                       level = -18;
002F16 9A78FFEE       12788         MOV.W   [R7],#0FFEEH
                      12789 ; rs232cmd.c 3598                                                       break;
002F1A FE24           12791         BR      _863
                      12792 ; rs232cmd.c 3599       
                      12793 ; rs232cmd.c 3600                                               case M21dBFS:
002F1C                12795 _853:
                      12796 ; rs232cmd.c 3601                                                       level = -21;
002F1C 9A78FFEB       12798         MOV.W   [R7],#0FFEBH
                      12799 ; rs232cmd.c 3602                                                       break;
002F20 FE21           12801         BR      _863
                      12802 ; rs232cmd.c 3603       
                      12803 ; rs232cmd.c 3604                                               default:
002F22                12805 _854:
                      12806 ; rs232cmd.c 3605                                                       str = SILENCEParTxt;
002F22 9958rrrr       12808         MOV.W   R5,#SEG( _SILENCEParTxt )
002F26 9948rrrr       12809         MOV.W   R4,#SOF( _SILENCEParTxt )
                      12811 ; rs232cmd.c 3606       
                      12812 ; rs232cmd.c 3607                                                       while ( *str)
002F2A 964843rr       12814         MOV.B   CS,#SEG( _SILENCEParTxt )
002F2E 9908rrrr       12815         MOV.W   R0,#SOF( _SILENCEParTxt )
002F32 8020           12816         MOVC.B  R1L,[R0+]
002F34 F311           12817         BEQ     _856
002F34 F311           12817         BEQ     _856
002F36                12818 _855:
                      12819 ; rs232cmd.c 3608                                                               rs232putchar( *st
                            r++);
002F36 8915           12821         MOV.W   R1,R5
002F38 8904           12822         MOV.W   R0,R4
002F3A 862C43         12823         MOV.B   CS,R1L
002F3D 8020           12824         MOVC.B  R1L,[R0+]
002F3F 8102           12825         MOV.B   R0L,R1L
                      12826         CALL    _rs232putchar
002F41 C4rrrrrr       +12826 ;       FCALL   _rs232putchar
002F45 99400001       12827         ADD.W   R4,#01H
002F49 99510000       12828         ADDC.W  R5,#00H
002F4D 8915           12832         MOV.W   R1,R5
002F4F 8904           12833         MOV.W   R0,R4
002F51 862C43         12834         MOV.B   CS,R1L
002F54 8020           12835         MOVC.B  R1L,[R0+]
002F56 F2EF           12836         BNE     _855
002F58                12838 _856:
                      12839 ; rs232cmd.c 3609       
                      12840 ; rs232cmd.c 3610                                                       rs232putchar('\n');
002F58 91080A         12842         MOV.B   R0L,#0AH
                      12843         CALL    _rs232putchar
002F5B C4rrrrrr       +12843 ;       FCALL   _rs232putchar
                      12844 ; rs232cmd.c 3611                                                       return;
                      12846         BR      _892
002F5F D50083         +12846         JMP.L   _892
002F62                12848 _857:
002F62 BA70           12850         MOV.W   [R7],#00H
                      12851 ; rs232cmd.c 3612                                               }
002F64                12853 _863:
                      12854 ; rs232cmd.c 3613       
                      12855 ; rs232cmd.c 3614                                       rs232printf( 6, "%d\n", level);
002F64 B906           12857         MOV.W   R0,#06H
002F66 8A17           12858         MOV.W   R1,[R7]
002F68 0F02           12859         PUSH.W  R1
002F6A 9938rrrr       12861         MOV.W   R3,#SEG( _9 )
002F6E 9928rrrr       12862         MOV.W   R2,#SOF( _9 )
002F72 0F0C           12863         PUSH.W  R2, R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 209

ADDR   CODE            LINE SOURCELINE
                      12865         CALL    _rs232printf
002F74 C4rrrrrr       +12865 ;       FCALL   _rs232printf
002F78 A976           12866         ADDS.W  R7,#06H
                      12868 ; rs232cmd.c 3615                               }
                      12869 ; rs232cmd.c 3616                       }
002F7A FE76           12871         BR      _892
002F7A FE76           12871         BR      _892
002F7C                12872 _864:
                      12873 ; rs232cmd.c 3617                       else
                      12874 ; rs232cmd.c 3618                       {
                      12875 ; rs232cmd.c 3619                               if ( ParCnt != 1)
002F7C 964842rr       12877         MOV.B   ES,#SEG( _ParCnt )
002F80 9908rrrr       12878         MOV.W   R0,#SOF( _ParCnt )
002F84 8200           12879         MOV.B   R0L,[R0]
002F86 910401         12880         CMP.B   R0L,#01H
002F89 F307           12881         BEQ     _865
                      12882 ; rs232cmd.c 3620                                       SCPIError = SyntaxErr;
002F8B 964842rr       12884         MOV.B   ES,#SEG( _SCPIError )
002F8F 9908rrrr       12885         MOV.W   R0,#SOF( _SCPIError )
002F93 BA03           12886         MOV.W   [R0],#03H
002F95 FE69           12887         BR      _892
002F95 FE6900         12887         BR      _892
002F98                12888 _865:
                      12889 ; rs232cmd.c 3621                               else
                      12890 ; rs232cmd.c 3622                               {
                      12891 ; rs232cmd.c 3623                                       level = FindParameter( Cmd, AESEBULevelPa
                            r);
002F98 9938rrrr       12893         MOV.W   R3,#SEG( _AESEBULevelPar )
002F9C 9928rrrr       12894         MOV.W   R2,#SOF( _AESEBULevelPar )
002FA0 9918rrrr       12895         MOV.W   R1,#SEG( _Cmd )
002FA4 9908rrrr       12896         MOV.W   R0,#SOF( _Cmd )
002FA8 C517FB         12897         CALL    _FindParameter
002FAB 8A0F           12898         MOV.W   [R7],R0
                      12899 ; rs232cmd.c 3624               
                      12900 ; rs232cmd.c 3625                                       if ( level > -1)
002FAD 9A74FFFF       12902         CMP.W   [R7],#0FFFFH
002FB1 FD03           12903         BLE     _866
                      12904 ; rs232cmd.c 3626                                               level = AESEBUSilence;
002FB3 BA77           12906         MOV.W   [R7],#07H
002FB5 FE4D           12907         BR      _884
002FB5 FE4D00         12907         BR      _884
002FB8                12908 _866:
                      12909 ; rs232cmd.c 3627                                       else
                      12910 ; rs232cmd.c 3628                                       {
                      12911 ; rs232cmd.c 3629                                               if (( ParCnt != 1) || ( sscanf( C
                            md, "%d", &level) != 1))
002FB8 964842rr       12913         MOV.B   ES,#SEG( _ParCnt )
002FBC 9908rrrr       12914         MOV.W   R0,#SOF( _ParCnt )
002FC0 8200           12915         MOV.B   R0L,[R0]
002FC2 910401         12916         CMP.B   R0L,#01H
002FC5 F215           12917         BNE     _867
002FC7 9128rr         12918         MOV.B   R1L,#SEG( __lc_bs )
002FCA 7133           12919         XOR.B   R1H,R1H
002FCC 8907           12920         MOV.W   R0,R7
002FCE 0F03           12921         PUSH.W  R0, R1
002FD0 9918rrrr       12923         MOV.W   R1,#SEG( _10 )
002FD4 9908rrrr       12924         MOV.W   R0,#SOF( _10 )
002FD8 0F03           12925         PUSH.W  R0, R1
002FDA 9918rrrr       12927         MOV.W   R1,#SEG( _Cmd )
002FDE 9908rrrr       12928         MOV.W   R0,#SOF( _Cmd )
                      12929         CALL    _sscanf
002FE2 C4rrrrrr       +12929 ;       FCALL   _sscanf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 210

ADDR   CODE            LINE SOURCELINE
002FE6 99700008       12930         ADD.W   R7,#08H
002FEA 99040001       12932         CMP.W   R0,#01H
002FEE F306           12933         BEQ     _868
002FEE F306           12933         BEQ     _868
002FF0                12934 _867:
                      12935 ; rs232cmd.c 3630                                                       SCPIError = SyntaxErr;
002FF0 964842rr       12937         MOV.B   ES,#SEG( _SCPIError )
002FF4 9908rrrr       12938         MOV.W   R0,#SOF( _SCPIError )
002FF8 BA03           12939         MOV.W   [R0],#03H
002FFA FE2A           12940         BR      _884
002FFA FE2A           12940         BR      _884
002FFC                12941 _868:
                      12942 ; rs232cmd.c 3631                                               else {
                      12943 ; rs232cmd.c 3632                                                       switch ( level)
002FFC 9A740000       12945         CMP.W   [R7],#00H
003000 F326           12946         BEQ     _876
003002 9A74FFF7       12947         CMP.W   [R7],#0FFF7H
003006 F310           12948         BEQ     _869
003008 9A74FFF4       12949         CMP.W   [R7],#0FFF4H
00300C F30F           12950         BEQ     _870
00300E 9A74FFF1       12951         CMP.W   [R7],#0FFF1H
003012 F30E           12952         BEQ     _871
003014 9A74FFF0       12953         CMP.W   [R7],#0FFF0H
003018 F30D           12954         BEQ     _872
00301A 9A74FFEE       12955         CMP.W   [R7],#0FFEEH
00301E F30C           12956         BEQ     _873
003020 9A74FFEB       12957         CMP.W   [R7],#0FFEBH
003024 F30B           12958         BEQ     _874
003026 FE0C           12959         BR      _875
                      12960 ; rs232cmd.c 3633                                                       {
                      12961 ; rs232cmd.c 3634                                                               case 0:
                      12962 ; rs232cmd.c 3635                                                                       level = M
                            0dBFS;
                      12963 ; rs232cmd.c 3636                                                                       break;
                      12964 ; rs232cmd.c 3637       
                      12965 ; rs232cmd.c 3638                                                               case -9:
003028                12967 _869:
                      12968 ; rs232cmd.c 3639                                                                       level = M
                            9dBFS;
003028 BA71           12970         MOV.W   [R7],#01H
                      12971 ; rs232cmd.c 3640                                                                       break;
00302A FE12           12973         BR      _884
                      12974 ; rs232cmd.c 3641       
                      12975 ; rs232cmd.c 3642                                                               case -12:
00302C                12977 _870:
                      12978 ; rs232cmd.c 3643                                                                       level = M
                            12dBFS;
00302C BA72           12980         MOV.W   [R7],#02H
                      12981 ; rs232cmd.c 3644                                                                       break;
00302E FE10           12983         BR      _884
                      12984 ; rs232cmd.c 3645       
                      12985 ; rs232cmd.c 3646                                                               case -15:
003030                12987 _871:
                      12988 ; rs232cmd.c 3647                                                                       level = M
                            15dBFS;
003030 BA73           12990         MOV.W   [R7],#03H
                      12991 ; rs232cmd.c 3648                                                                       break;
003032 FE0E           12993         BR      _884
                      12994 ; rs232cmd.c 3649       
                      12995 ; rs232cmd.c 3650                                                               case -16:
003034                12997 _872:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 211

ADDR   CODE            LINE SOURCELINE
                      12998 ; rs232cmd.c 3651                                                                       level = M
                            16dBFS;
003034 BA74           13000         MOV.W   [R7],#04H
                      13001 ; rs232cmd.c 3652                                                                       break;
003036 FE0C           13003         BR      _884
                      13004 ; rs232cmd.c 3653       
                      13005 ; rs232cmd.c 3654                                                               case -18:
003038                13007 _873:
                      13008 ; rs232cmd.c 3655                                                                       level = M
                            18dBFS;
003038 BA75           13010         MOV.W   [R7],#05H
                      13011 ; rs232cmd.c 3656                                                                       break;
00303A FE0A           13013         BR      _884
                      13014 ; rs232cmd.c 3657       
                      13015 ; rs232cmd.c 3658                                                               case -21:
00303C                13017 _874:
                      13018 ; rs232cmd.c 3659                                                                       level = M
                            21dBFS;
00303C BA76           13020         MOV.W   [R7],#06H
                      13021 ; rs232cmd.c 3660                                                                       break;
00303E FE08           13023         BR      _884
                      13024 ; rs232cmd.c 3661       
                      13025 ; rs232cmd.c 3662                                                               default:
003040                13027 _875:
                      13028 ; rs232cmd.c 3663                                                                       SCPIError
                             = DataOutOfRange;
003040 964842rr       13030         MOV.B   ES,#SEG( _SCPIError )
003044 9908rrrr       13031         MOV.W   R0,#SOF( _SCPIError )
003048 9A080021       13032         MOV.W   [R0],#021H
                      13033 ; rs232cmd.c 3664                                                                       return;
00304C FE0D           13035         BR      _892
00304E                13037 _876:
00304E BA70           13039         MOV.W   [R7],#00H
                      13040 ; rs232cmd.c 3665                                                       }
                      13041 ; rs232cmd.c 3666                                               }
                      13042 ; rs232cmd.c 3667                                       }
003050                13044 _884:
                      13045 ; rs232cmd.c 3668       
                      13046 ; rs232cmd.c 3669                                       if ( SetAudioLevel( AESEBUAudio, level) =
                            = FAIL)
003050 B901           13048         MOV.W   R0,#01H
003052 8A17           13049         MOV.W   R1,[R7]
                      13050         CALL    _SetAudioLevel
003054 C4rrrrrr       +13050 ;       FCALL   _SetAudioLevel
003058 6900           13051         OR.W    R0,R0
00305A F206           13052         BNE     _892
                      13053 ; rs232cmd.c 3670                                               SCPIError = ExecErr;
00305C 964842rr       13055         MOV.B   ES,#SEG( _SCPIError )
003060 9908rrrr       13056         MOV.W   R0,#SOF( _SCPIError )
003064 9A08001D       13057         MOV.W   [R0],#01DH
                      13058 ; rs232cmd.c 3671                               }
                      13059 ; rs232cmd.c 3672                       }
                      13060 ; rs232cmd.c 3673               }
                      13061 ; rs232cmd.c 3674       }
003068                13063 _892:
003068 A972           13064         ADDS.W  R7,#02H
00306A 2F30           13066         POP.W   R4, R5
00306C D680           13068         RET
                      13071 ; rs232cmd.c 3675       
                      13072 ; rs232cmd.c 3676       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 212

ADDR   CODE            LINE SOURCELINE
                      13073 ; rs232cmd.c 3677       /* AudioGenAESEBUTiming                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      13074 ; rs232cmd.c 3678       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13075 ; rs232cmd.c 3679       /* Author:              Kim Engedahl, DEV, 000616                        
                                                                                                                             
                                    */
                      13076 ; rs232cmd.c 3680       /* Revised:             000616                                           
                                                                                                                             
                                                                                    */
                      13077 ; rs232cmd.c 3681       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13078 ; rs232cmd.c 3682       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13079 ; rs232cmd.c 3683       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13080 ; rs232cmd.c 3684       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13081 ; rs232cmd.c 3685       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13082 ; rs232cmd.c 3686       /************************************************************************
                            **/
                      13083 ; rs232cmd.c 3687       void AudioGenAESEBUTiming( void)
                      13084 ; rs232cmd.c 3688       {
                      13085         ALIGN   1
                      13087         PUBLIC  _AudioGenAESEBUTiming
00306E                13088 _AudioGenAESEBUTiming:
00306E 0F70           13092         PUSH.W  R4, R5, R6
003070 99720014       13094         SUB.W   R7,#014H
                      13099 ; rs232cmd.c 3689               float timing;
                      13100 ; rs232cmd.c 3690               int tmp;
                      13101 ; rs232cmd.c 3691       
                      13102 ; rs232cmd.c 3692               if ( CmdExecute && !SCPIError)
003074 964842rr       13104         MOV.B   ES,#SEG( _CmdExecute )
003078 9908rrrr       13105         MOV.W   R0,#SOF( _CmdExecute )
00307C 8200           13106         MOV.B   R0L,[R0]
                      13107         BEQ     _914
00307E F202           +13107 ;       BNE     _LG_826
003080 D500A9         +13107 ;       JMP.L   _914
003084 D500A900       +13107 ;       JMP.L   _914
003084                +13107 _LG_826:
003084 964842rr       13108         MOV.B   ES,#SEG( _SCPIError )
003088 9908rrrr       13109         MOV.W   R0,#SOF( _SCPIError )
00308C 8A00           13110         MOV.W   R0,[R0]
                      13111         BNE     _914
00308E F302           +13111 ;       BEQ     _LG_828
003090 D500A1         +13111 ;       JMP.L   _914
003094 D500A100       +13111 ;       JMP.L   _914
003094                +13111 _LG_828:
                      13112 ; rs232cmd.c 3693               {
                      13113 ; rs232cmd.c 3694                       if ( CmdRequest)
003094 964842rr       13115         MOV.B   ES,#SEG( _CmdRequest )
003098 9908rrrr       13116         MOV.W   R0,#SOF( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 213

ADDR   CODE            LINE SOURCELINE
00309C 8200           13117         MOV.B   R0L,[R0]
00309E F321           13118         BEQ     _903
                      13119 ; rs232cmd.c 3695                       {
                      13120 ; rs232cmd.c 3696                               if ( ParCnt)
0030A0 964842rr       13122         MOV.B   ES,#SEG( _ParCnt )
0030A4 9908rrrr       13123         MOV.W   R0,#SOF( _ParCnt )
0030A8 8200           13124         MOV.B   R0L,[R0]
0030AA F307           13125         BEQ     _902
                      13126 ; rs232cmd.c 3697                                       SCPIError = ParNotAllowed;
0030AC 964842rr       13128         MOV.B   ES,#SEG( _SCPIError )
0030B0 9908rrrr       13129         MOV.W   R0,#SOF( _SCPIError )
0030B4 BA06           13130         MOV.W   [R0],#06H
                      13131         BR      _914
0030B6 D5008E         +13131         JMP.L   _914
0030B6 D5008E00       +13131         JMP.L   _914
0030BA                13132 _902:
                      13133 ; rs232cmd.c 3698                               else
                      13134 ; rs232cmd.c 3699                                       rs232printf( 6, "%.1f\n", AudioSetup[AESE
                            BUAudio].Timing);
0030BA 964842rr       13136         MOV.B   ES,#SEG( _AudioSetup+20 )
0030BE 9918rrrr       13137         MOV.W   R1,#SOF( _AudioSetup+20 )
0030C2 8B01           13138         MOV.W   R0,[R1+]
0030C4 8A11           13139         MOV.W   R1,[R1]
0030C6 C4rrrrrr       13140         FCALL   __SPF2DPF
0030CA 0F0F           13141         PUSH.W  R0, R1, R2, R3
0030CC 9918rrrr       13143         MOV.W   R1,#SEG( _897 )
0030D0 9908rrrr       13144         MOV.W   R0,#SOF( _897 )
0030D4 0F03           13145         PUSH.W  R0, R1
0030D6 B906           13147         MOV.W   R0,#06H
                      13148         CALL    _rs232printf
0030D8 C4rrrrrr       +13148 ;       FCALL   _rs232printf
0030DC 9970000C       13149         ADD.W   R7,#0CH
                      13151 ; rs232cmd.c 3700                       }
0030E0 FE79           13153         BR      _914
0030E0 FE79           13153         BR      _914
0030E2                13154 _903:
                      13155 ; rs232cmd.c 3701                       else
                      13156 ; rs232cmd.c 3702                       {
                      13157 ; rs232cmd.c 3703                               if (( ParCnt != 1) || ( sscanf( Cmd, "%f", &timin
                            g) != 1))
0030E2 964842rr       13159         MOV.B   ES,#SEG( _ParCnt )
0030E6 9908rrrr       13160         MOV.W   R0,#SOF( _ParCnt )
0030EA 8200           13161         MOV.B   R0L,[R0]
0030EC 910401         13162         CMP.B   R0L,#01H
0030EF F216           13163         BNE     _904
0030F1 9918rrrr       13164         MOV.W   R1,#SEG( _Cmd )
0030F5 9908rrrr       13165         MOV.W   R0,#SOF( _Cmd )
0030F9 9168rr         13166         MOV.B   R3L,#SEG( __lc_bs )
0030FC 7177           13167         XOR.B   R3H,R3H
0030FE 402710         13168         LEA     R2,R7+16
003101 0F0C           13169         PUSH.W  R2, R3
003103 9938rrrr       13171         MOV.W   R3,#SEG( _898 )
003107 9928rrrr       13172         MOV.W   R2,#SOF( _898 )
00310B 0F0C           13173         PUSH.W  R2, R3
                      13175         CALL    _sscanf
00310D C4rrrrrr       +13175 ;       FCALL   _sscanf
003111 99700008       13176         ADD.W   R7,#08H
003115 99040001       13178         CMP.W   R0,#01H
003119 F307           13179         BEQ     _905
003119 F30700         13179         BEQ     _905
00311C                13180 _904:
                      13181 ; rs232cmd.c 3704                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 214

ADDR   CODE            LINE SOURCELINE
00311C 964842rr       13183         MOV.B   ES,#SEG( _SCPIError )
003120 9908rrrr       13184         MOV.W   R0,#SOF( _SCPIError )
003124 BA03           13185         MOV.W   [R0],#03H
003126 FE56           13186         BR      _914
003126 FE56           13186         BR      _914
003128                13187 _905:
                      13188 ; rs232cmd.c 3705                               else
                      13189 ; rs232cmd.c 3706                               {
                      13190 ; rs232cmd.c 3707                                       tmp = (int)(( timing / 0.8) + 0.5 - ( 1*(
                             timing < 0)));
003128 8C1712         13192         MOV.W   R1,[R7+18]
00312B 8C0710         13193         MOV.W   R0,[R7+16]
00312E C4rrrrrr       13194         FCALL   __SPF2DPF
003132 9C780E3FE9     13195         MOV.W   [R7+14],#03FE9H
003137 9C780C9999     13196         MOV.W   [R7+12],#09999H
00313C 9C780A9999     13197         MOV.W   [R7+10],#09999H
003141 9C7808999A     13198         MOV.W   [R7+8],#0999AH
003146 406708         13199         LEA     R6,R7+8
003149 C4rrrrrr       13200         FCALL   __DIV_DPF
00314D 9C780E3FE0     13201         MOV.W   [R7+14],#03FE0H
003152 BC700C         13202         MOV.W   [R7+12],#00H
003155 BC700A         13203         MOV.W   [R7+10],#00H
003158 BC7008         13204         MOV.W   [R7+8],#00H
00315B 406708         13205         LEA     R6,R7+8
00315E C4rrrrrr       13206         FCALL   __ADD_DPF
003162 8C3F06         13207         MOV.W   [R7+6],R3
003165 8C2F04         13208         MOV.W   [R7+4],R2
003168 8C1F02         13209         MOV.W   [R7+2],R1
00316B 8A0F           13210         MOV.W   [R7],R0
00316D 8C1712         13211         MOV.W   R1,[R7+18]
003170 8C0710         13212         MOV.W   R0,[R7+16]
003173 B930           13213         MOV.W   R3,#00H
003175 B920           13214         MOV.W   R2,#00H
003177 C4rrrrrr       13215         FCALL   __CMP_SPF
00317B 9104FF         13216         CMP.B   R0L,#0FFH
00317E F206           13217         BNE     _917
003180 B900           13218         MOVS.W  R0,#00H
003182 B910           13219         MOVS.W  R1,#00H
003184 B920           13220         MOVS.W  R2,#00H
003186 99383FF0       13221         MOV.W   R3,#03FF0H
00318A FE04           13222         BR      _918
00318A FE04           13222         BR      _918
00318C                13223 _917:
00318C B900           13224         MOVS.W  R0,#00H
00318E B910           13225         MOVS.W  R1,#00H
003190 B920           13226         MOVS.W  R2,#00H
003192 B930           13227         MOVS.W  R3,#00H
003192 B930           13227         MOVS.W  R3,#00H
003194                13228 _918:
003194 8967           13229         MOV.W   R6,R7
003196 C4rrrrrr       13230         FCALL   __SUBR_DPF
00319A C4rrrrrr       13231         FCALL   __DPF2S
                      13233 ; rs232cmd.c 3708       
                      13234 ; rs232cmd.c 3709                                       if (( tmp < -12) || ( tmp > 13))
00319E 9904FFF4       13236         CMP.W   R0,#0FFF4H
0031A2 FB03           13237         BLT     _906
0031A4 9904000D       13238         CMP.W   R0,#0DH
0031A8 FD07           13239         BLE     _907
0031A8 FD07           13239         BLE     _907
0031AA                13240 _906:
                      13241 ; rs232cmd.c 3710                                               SCPIError = DataOutOfRange;
0031AA 964842rr       13243         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 215

ADDR   CODE            LINE SOURCELINE
0031AE 9908rrrr       13244         MOV.W   R0,#SOF( _SCPIError )
0031B2 9A080021       13245         MOV.W   [R0],#021H
0031B6 FE0E           13246         BR      _914
0031B6 FE0E           13246         BR      _914
0031B8                13247 _907:
                      13248 ; rs232cmd.c 3711                                       else
                      13249 ; rs232cmd.c 3712                                       {
                      13250 ; rs232cmd.c 3713                                               if ( SetAudioTiming( AESEBUAudio,
                             timing) == FAIL)
0031B8 B901           13252         MOV.W   R0,#01H
0031BA 8C3712         13254         MOV.W   R3,[R7+18]
0031BD 8C2710         13255         MOV.W   R2,[R7+16]
                      13256         CALL    _SetAudioTiming
0031C0 C4rrrrrr       +13256 ;       FCALL   _SetAudioTiming
0031C4 6900           13257         OR.W    R0,R0
0031C6 F206           13258         BNE     _914
                      13259 ; rs232cmd.c 3714                                                       SCPIError = ExecErr;
0031C8 964842rr       13261         MOV.B   ES,#SEG( _SCPIError )
0031CC 9908rrrr       13262         MOV.W   R0,#SOF( _SCPIError )
0031D0 9A08001D       13263         MOV.W   [R0],#01DH
                      13264 ; rs232cmd.c 3715                                       }
                      13265 ; rs232cmd.c 3716                               }
                      13266 ; rs232cmd.c 3717                       }
                      13267 ; rs232cmd.c 3718               }
0031D4                13269 _914:
                      13270 ; rs232cmd.c 3719       }
0031D4 99700014       13272         ADD.W   R7,#014H
0031D8 2F70           13274         POP.W   R4, R5, R6
0031DA D680           13276         RET
                      13278 ; rs232cmd.c 3720       
                      13279 ; rs232cmd.c 3721       /************************************************************************
                            **/
                      13280 ; rs232cmd.c 3722       /* AudioGenAESEBUWordClock                                               
                                                                                                                 RS232CMD.C *
                            /
                      13281 ; rs232cmd.c 3723       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13282 ; rs232cmd.c 3724       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13283 ; rs232cmd.c 3725       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      13284 ; rs232cmd.c 3726       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13285 ; rs232cmd.c 3727       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13286 ; rs232cmd.c 3728       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13287 ; rs232cmd.c 3729       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13288 ; rs232cmd.c 3730       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 216

ADDR   CODE            LINE SOURCELINE
                      13289 ; rs232cmd.c 3731       /************************************************************************
                            **/
                      13290 ; rs232cmd.c 3732       void AudioGenAESEBUWordClock( void)
                      13291 ; rs232cmd.c 3733       {
                      13292         ALIGN   1
                      13294         PUBLIC  _AudioGenAESEBUWordClock
0031DC                13295 _AudioGenAESEBUWordClock:
0031DC 0F30           13299         PUSH.W  R4, R5
                      13305 ; rs232cmd.c 3734               int frequency;
                      13306 ; rs232cmd.c 3735               char code *str;
                      13307 ; rs232cmd.c 3736       
                      13308 ; rs232cmd.c 3737               if ( CmdExecute && !SCPIError)
0031DE 964842rr       13310         MOV.B   ES,#SEG( _CmdExecute )
0031E2 9908rrrr       13311         MOV.W   R0,#SOF( _CmdExecute )
0031E6 8200           13312         MOV.B   R0L,[R0]
0031E8 F379           13313         BEQ     _933
0031EA 964842rr       13314         MOV.B   ES,#SEG( _SCPIError )
0031EE 9908rrrr       13315         MOV.W   R0,#SOF( _SCPIError )
0031F2 8A00           13316         MOV.W   R0,[R0]
0031F4 F273           13317         BNE     _933
                      13318 ; rs232cmd.c 3738               {
                      13319 ; rs232cmd.c 3739                       if ( CmdRequest)
0031F6 964842rr       13321         MOV.B   ES,#SEG( _CmdRequest )
0031FA 9908rrrr       13322         MOV.W   R0,#SOF( _CmdRequest )
0031FE 8200           13323         MOV.B   R0L,[R0]
003200 F33F           13324         BEQ     _924
                      13325 ; rs232cmd.c 3740                       {
                      13326 ; rs232cmd.c 3741                               if ( ParCnt)
003202 964842rr       13328         MOV.B   ES,#SEG( _ParCnt )
003206 9908rrrr       13329         MOV.W   R0,#SOF( _ParCnt )
00320A 8200           13330         MOV.B   R0L,[R0]
00320C F306           13331         BEQ     _921
                      13332 ; rs232cmd.c 3742                                       SCPIError = ParNotAllowed;
00320E 964842rr       13334         MOV.B   ES,#SEG( _SCPIError )
003212 9908rrrr       13335         MOV.W   R0,#SOF( _SCPIError )
003216 BA06           13336         MOV.W   [R0],#06H
003218 FE61           13337         BR      _933
003218 FE61           13337         BR      _933
00321A                13338 _921:
                      13339 ; rs232cmd.c 3743                               else
                      13340 ; rs232cmd.c 3744                               {
                      13341 ; rs232cmd.c 3745                                       str = AudioFrequencyPar[AudioSetup[AESEBU
                            Audio].Frequency].LongName;
00321A 964842rr       13343         MOV.B   ES,#SEG( _AudioSetup+24 )
00321E 9908rrrr       13344         MOV.W   R0,#SOF( _AudioSetup+24 )
003222 8A00           13345         MOV.W   R0,[R0]
003224 E900000C       13346         MULU.W  R0,#0CH
003228 8920           13347         MOV.W   R2,R0
00322A B930           13348         MOVS.W  R3,#00H
00322C 9918rrrr       13349         MOV.W   R1,#SEG( _AudioFrequencyPar )
003230 9908rrrr       13350         MOV.W   R0,#SOF( _AudioFrequencyPar )
003234 0902           13351         ADD.W   R0,R2
003236 1913           13352         ADDC.W  R1,R3
003238 862C43         13353         MOV.B   CS,R1L
00323B 8820           13354         MOVC.W  R2,[R0+]
00323D 99040000       13355         CMP.W   R0,#00H
003241 F202           13356         BNE     _934
003243 A64143         13357         ADDS.B  CS,#01H
003243 A64143         13357         ADDS.B  CS,#01H
003246                13358 _934:
003246 8830           13359         MOVC.W  R3,[R0+]
003248 8953           13360         MOV.W   R5,R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 217

ADDR   CODE            LINE SOURCELINE
00324A 8942           13361         MOV.W   R4,R2
                      13363 ; rs232cmd.c 3746       
                      13364 ; rs232cmd.c 3747                                       while ( *str)
00324C 866C43         13366         MOV.B   CS,R3L
00324F 8062           13367         MOVC.B  R3L,[R2+]
003251 F312           13368         BEQ     _923
003251 F31200         13368         BEQ     _923
003254                13369 _922:
                      13370 ; rs232cmd.c 3748                                               rs232putchar( *str++);
003254 8915           13372         MOV.W   R1,R5
003256 8904           13373         MOV.W   R0,R4
003258 862C43         13374         MOV.B   CS,R1L
00325B 8020           13375         MOVC.B  R1L,[R0+]
00325D 8102           13376         MOV.B   R0L,R1L
                      13377         CALL    _rs232putchar
00325F C4rrrrrr       +13377 ;       FCALL   _rs232putchar
003263 99400001       13378         ADD.W   R4,#01H
003267 99510000       13379         ADDC.W  R5,#00H
00326B 8915           13383         MOV.W   R1,R5
00326D 8904           13384         MOV.W   R0,R4
00326F 862C43         13385         MOV.B   CS,R1L
003272 8020           13386         MOVC.B  R1L,[R0+]
003274 F2EF           13387         BNE     _922
003276                13389 _923:
                      13390 ; rs232cmd.c 3749       
                      13391 ; rs232cmd.c 3750                                       rs232putchar('\n');
003276 91080A         13393         MOV.B   R0L,#0AH
                      13394         CALL    _rs232putchar
003279 C4rrrrrr       +13394 ;       FCALL   _rs232putchar
                      13395 ; rs232cmd.c 3751                               }
                      13396 ; rs232cmd.c 3752                       }
00327D FE2F           13398         BR      _933
00327D FE2F00         13398         BR      _933
003280                13399 _924:
                      13400 ; rs232cmd.c 3753                       else
                      13401 ; rs232cmd.c 3754                       {
                      13402 ; rs232cmd.c 3755                               if ( ParCnt != 1)
003280 964842rr       13404         MOV.B   ES,#SEG( _ParCnt )
003284 9908rrrr       13405         MOV.W   R0,#SOF( _ParCnt )
003288 8200           13406         MOV.B   R0L,[R0]
00328A 910401         13407         CMP.B   R0L,#01H
00328D F307           13408         BEQ     _925
                      13409 ; rs232cmd.c 3756                                       SCPIError = SyntaxErr;
00328F 964842rr       13411         MOV.B   ES,#SEG( _SCPIError )
003293 9908rrrr       13412         MOV.W   R0,#SOF( _SCPIError )
003297 BA03           13413         MOV.W   [R0],#03H
003299 FE21           13414         BR      _933
003299 FE2100         13414         BR      _933
00329C                13415 _925:
                      13416 ; rs232cmd.c 3757                               else
                      13417 ; rs232cmd.c 3758                               {
                      13418 ; rs232cmd.c 3759                                       frequency = FindParameter( Cmd, AudioFreq
                            uencyPar);
00329C 9918rrrr       13420         MOV.W   R1,#SEG( _Cmd )
0032A0 9908rrrr       13421         MOV.W   R0,#SOF( _Cmd )
0032A4 9938rrrr       13422         MOV.W   R3,#SEG( _AudioFrequencyPar )
0032A8 9928rrrr       13423         MOV.W   R2,#SOF( _AudioFrequencyPar )
0032AC C51679         13424         CALL    _FindParameter
                      13426 ; rs232cmd.c 3760               
                      13427 ; rs232cmd.c 3761                                       if ( frequency > -1)
0032AF 8910           13429         MOV.W   R1,R0
0032B1 9914FFFF       13430         CMP.W   R1,#0FFFFH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 218

ADDR   CODE            LINE SOURCELINE
0032B5 FD0D           13433         BLE     _926
                      13434 ; rs232cmd.c 3762                                       {
                      13435 ; rs232cmd.c 3763                                               if ( SetAudioWordClock( AESEBUAud
                            io, frequency) == FAIL)
0032B7 B901           13437         MOV.W   R0,#01H
                      13438         CALL    _SetAudioWordClock
0032B9 C4rrrrrr       +13438 ;       FCALL   _SetAudioWordClock
0032BD 6900           13440         OR.W    R0,R0
0032BF F20E           13441         BNE     _933
                      13442 ; rs232cmd.c 3764                                                       SCPIError = ExecErr;
0032C1 964842rr       13444         MOV.B   ES,#SEG( _SCPIError )
0032C5 9908rrrr       13445         MOV.W   R0,#SOF( _SCPIError )
0032C9 9A08001D       13446         MOV.W   [R0],#01DH
                      13447 ; rs232cmd.c 3765                                       }
0032CD FE07           13449         BR      _933
0032CD FE0700         13449         BR      _933
0032D0                13450 _926:
                      13451 ; rs232cmd.c 3766                                       else
                      13452 ; rs232cmd.c 3767                                               SCPIError = DataOutOfRange;
0032D0 964842rr       13454         MOV.B   ES,#SEG( _SCPIError )
0032D4 9908rrrr       13455         MOV.W   R0,#SOF( _SCPIError )
0032D8 9A080021       13456         MOV.W   [R0],#021H
                      13457 ; rs232cmd.c 3768                               }
                      13458 ; rs232cmd.c 3769                       }
                      13459 ; rs232cmd.c 3770               }
0032DC                13461 _933:
                      13462 ; rs232cmd.c 3771       }
0032DC 2F30           13464         POP.W   R4, R5
0032DE D680           13466         RET
                      13469 ; rs232cmd.c 3772       
                      13470 ; rs232cmd.c 3773       /************************************************************************
                            **/
                      13471 ; rs232cmd.c 3774       /* AudioGenAESEBUClick                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      13472 ; rs232cmd.c 3775       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13473 ; rs232cmd.c 3776       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13474 ; rs232cmd.c 3777       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      13475 ; rs232cmd.c 3778       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13476 ; rs232cmd.c 3779       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13477 ; rs232cmd.c 3780       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13478 ; rs232cmd.c 3781       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13479 ; rs232cmd.c 3782       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 219

ADDR   CODE            LINE SOURCELINE
                      13480 ; rs232cmd.c 3783       /************************************************************************
                            **/
                      13481 ; rs232cmd.c 3784       void AudioGenAESEBUClick( void)
                      13482 ; rs232cmd.c 3785       {
                      13483         ALIGN   1
                      13485         PUBLIC  _AudioGenAESEBUClick
0032E0                13486 _AudioGenAESEBUClick:
0032E0 A97E           13490         ADDS.W  R7,#0EH
                      13493 ; rs232cmd.c 3786               int click;
                      13494 ; rs232cmd.c 3787       
                      13495 ; rs232cmd.c 3788               if ( CmdExecute && !SCPIError)
0032E2 964842rr       13497         MOV.B   ES,#SEG( _CmdExecute )
0032E6 9908rrrr       13498         MOV.W   R0,#SOF( _CmdExecute )
0032EA 8200           13499         MOV.B   R0L,[R0]
0032EC F363           13500         BEQ     _949
0032EE 964842rr       13501         MOV.B   ES,#SEG( _SCPIError )
0032F2 9908rrrr       13502         MOV.W   R0,#SOF( _SCPIError )
0032F6 8A00           13503         MOV.W   R0,[R0]
0032F8 F25D           13504         BNE     _949
                      13505 ; rs232cmd.c 3789               {
                      13506 ; rs232cmd.c 3790                       if ( CmdRequest)
0032FA 964842rr       13508         MOV.B   ES,#SEG( _CmdRequest )
0032FE 9908rrrr       13509         MOV.W   R0,#SOF( _CmdRequest )
003302 8200           13510         MOV.B   R0L,[R0]
003304 F31C           13511         BEQ     _938
                      13512 ; rs232cmd.c 3791                       {
                      13513 ; rs232cmd.c 3792                               if ( ParCnt)
003306 964842rr       13515         MOV.B   ES,#SEG( _ParCnt )
00330A 9908rrrr       13516         MOV.W   R0,#SOF( _ParCnt )
00330E 8200           13517         MOV.B   R0L,[R0]
003310 F306           13518         BEQ     _937
                      13519 ; rs232cmd.c 3793                                       SCPIError = ParNotAllowed;
003312 964842rr       13521         MOV.B   ES,#SEG( _SCPIError )
003316 9908rrrr       13522         MOV.W   R0,#SOF( _SCPIError )
00331A BA06           13523         MOV.W   [R0],#06H
00331C FE4B           13524         BR      _949
00331C FE4B           13524         BR      _949
00331E                13525 _937:
                      13526 ; rs232cmd.c 3794                               else
                      13527 ; rs232cmd.c 3795                                       rs232printf( 6, "%d\n", AudioSetup[AESEBU
                            Audio].Click);
00331E B906           13529         MOV.W   R0,#06H
003320 964842rr       13530         MOV.B   ES,#SEG( _AudioSetup+26 )
003324 9918rrrr       13531         MOV.W   R1,#SOF( _AudioSetup+26 )
003328 8A11           13532         MOV.W   R1,[R1]
00332A 0F02           13533         PUSH.W  R1
00332C 9938rrrr       13535         MOV.W   R3,#SEG( _9 )
003330 9928rrrr       13536         MOV.W   R2,#SOF( _9 )
003334 0F0C           13537         PUSH.W  R2, R3
                      13539         CALL    _rs232printf
003336 C4rrrrrr       +13539 ;       FCALL   _rs232printf
00333A A976           13540         ADDS.W  R7,#06H
                      13542 ; rs232cmd.c 3796                       }
00333C FE3B           13544         BR      _949
00333C FE3B           13544         BR      _949
00333E                13545 _938:
                      13546 ; rs232cmd.c 3797                       else
                      13547 ; rs232cmd.c 3798                       {
                      13548 ; rs232cmd.c 3799                               if (( ParCnt != 1) || ( sscanf( Cmd, "%d", &click
                            ) != 1))
00333E 964842rr       13550         MOV.B   ES,#SEG( _ParCnt )
003342 9908rrrr       13551         MOV.W   R0,#SOF( _ParCnt )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 220

ADDR   CODE            LINE SOURCELINE
003346 8200           13552         MOV.B   R0L,[R0]
003348 910401         13553         CMP.B   R0L,#01H
00334B F215           13554         BNE     _939
00334D 9918rrrr       13555         MOV.W   R1,#SEG( _Cmd )
003351 9908rrrr       13556         MOV.W   R0,#SOF( _Cmd )
003355 9168rr         13557         MOV.B   R3L,#SEG( __lc_bs )
003358 7177           13558         XOR.B   R3H,R3H
00335A 8927           13559         MOV.W   R2,R7
00335C 0F0C           13560         PUSH.W  R2, R3
00335E 9938rrrr       13562         MOV.W   R3,#SEG( _10 )
003362 9928rrrr       13563         MOV.W   R2,#SOF( _10 )
003366 0F0C           13564         PUSH.W  R2, R3
                      13566         CALL    _sscanf
003368 C4rrrrrr       +13566 ;       FCALL   _sscanf
00336C 99700008       13567         ADD.W   R7,#08H
003370 99040001       13569         CMP.W   R0,#01H
003374 F306           13570         BEQ     _940
003374 F306           13570         BEQ     _940
003376                13571 _939:
                      13572 ; rs232cmd.c 3800                                       SCPIError = SyntaxErr;
003376 964842rr       13574         MOV.B   ES,#SEG( _SCPIError )
00337A 9908rrrr       13575         MOV.W   R0,#SOF( _SCPIError )
00337E BA03           13576         MOV.W   [R0],#03H
003380 FE19           13577         BR      _949
003380 FE19           13577         BR      _949
003382                13578 _940:
                      13579 ; rs232cmd.c 3801                               else
                      13580 ; rs232cmd.c 3802                               {
                      13581 ; rs232cmd.c 3803                                       if (( click != click1s) && ( click != cli
                            ck3s))
003382 9A740001       13583         CMP.W   [R7],#01H
003386 F30A           13584         BEQ     _942
003388 9A740003       13585         CMP.W   [R7],#03H
00338C F307           13586         BEQ     _942
                      13587 ; rs232cmd.c 3804                                               SCPIError = DataOutOfRange;
00338E 964842rr       13589         MOV.B   ES,#SEG( _SCPIError )
003392 9908rrrr       13590         MOV.W   R0,#SOF( _SCPIError )
003396 9A080021       13591         MOV.W   [R0],#021H
00339A FE0C           13592         BR      _949
00339A FE0C           13592         BR      _949
00339C                13593 _942:
                      13594 ; rs232cmd.c 3805                                       else
                      13595 ; rs232cmd.c 3806                                       {
                      13596 ; rs232cmd.c 3807                                               if ( SetAudioClick( AESEBUAudio, 
                            click) == FAIL)
00339C B901           13598         MOV.W   R0,#01H
00339E 8A17           13599         MOV.W   R1,[R7]
                      13600         CALL    _SetAudioClick
0033A0 C4rrrrrr       +13600 ;       FCALL   _SetAudioClick
0033A4 6900           13601         OR.W    R0,R0
0033A6 F206           13602         BNE     _949
                      13603 ; rs232cmd.c 3808                                                       SCPIError = ExecErr;
0033A8 964842rr       13605         MOV.B   ES,#SEG( _SCPIError )
0033AC 9908rrrr       13606         MOV.W   R0,#SOF( _SCPIError )
0033B0 9A08001D       13607         MOV.W   [R0],#01DH
                      13608 ; rs232cmd.c 3809                                       }
                      13609 ; rs232cmd.c 3810                               }
                      13610 ; rs232cmd.c 3811                       }
                      13611 ; rs232cmd.c 3812               }
0033B4                13613 _949:
                      13614 ; rs232cmd.c 3813       }
0033B4 A972           13616         ADDS.W  R7,#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 221

ADDR   CODE            LINE SOURCELINE
0033B6 D680           13618         RET
                      13620 ; rs232cmd.c 3814       
                      13621 ; rs232cmd.c 3815       /************************************************************************
                            **/
                      13622 ; rs232cmd.c 3816       /* FactPassword                                                          
                                                                                                                             
                                                 RS232CMD.C */
                      13623 ; rs232cmd.c 3817       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13624 ; rs232cmd.c 3818       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13625 ; rs232cmd.c 3819       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      13626 ; rs232cmd.c 3820       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13627 ; rs232cmd.c 3821       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13628 ; rs232cmd.c 3822       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13629 ; rs232cmd.c 3823       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13630 ; rs232cmd.c 3824       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13631 ; rs232cmd.c 3825       /************************************************************************
                            **/
                      13632 ; rs232cmd.c 3826       void FactPassword( void)
                      13633 ; rs232cmd.c 3827       {
                      13634         ALIGN   1
                      13636         PUBLIC  _FactPassword
0033B8                13637 _FactPassword:
                      13641 ; rs232cmd.c 3828               if ( CmdExecute && !SCPIError)
0033B8 964842rr       13643         MOV.B   ES,#SEG( _CmdExecute )
0033BC 9908rrrr       13644         MOV.W   R0,#SOF( _CmdExecute )
0033C0 8200           13645         MOV.B   R0L,[R0]
0033C2 F365           13646         BEQ     _970
0033C4 964842rr       13647         MOV.B   ES,#SEG( _SCPIError )
0033C8 9908rrrr       13648         MOV.W   R0,#SOF( _SCPIError )
0033CC 8A00           13649         MOV.W   R0,[R0]
0033CE F25F           13650         BNE     _970
                      13651 ; rs232cmd.c 3829               {
                      13652 ; rs232cmd.c 3830                       if ( CmdRequest)
0033D0 964842rr       13654         MOV.B   ES,#SEG( _CmdRequest )
0033D4 9908rrrr       13655         MOV.W   R0,#SOF( _CmdRequest )
0033D8 8200           13656         MOV.B   R0L,[R0]
0033DA F320           13657         BEQ     _959
                      13658 ; rs232cmd.c 3831                       {
                      13659 ; rs232cmd.c 3832                               if ( ParCnt)
0033DC 964842rr       13661         MOV.B   ES,#SEG( _ParCnt )
0033E0 9908rrrr       13662         MOV.W   R0,#SOF( _ParCnt )
0033E4 8200           13663         MOV.B   R0L,[R0]
0033E6 F306           13664         BEQ     _957
                      13665 ; rs232cmd.c 3833                                       SCPIError = ParNotAllowed;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 222

ADDR   CODE            LINE SOURCELINE
0033E8 964842rr       13667         MOV.B   ES,#SEG( _SCPIError )
0033EC 9908rrrr       13668         MOV.W   R0,#SOF( _SCPIError )
0033F0 BA06           13669         MOV.W   [R0],#06H
0033F2 D680           13670         RET
0033F2 D680           13670         RET
0033F4                13671 _957:
                      13672 ; rs232cmd.c 3834                               else
                      13673 ; rs232cmd.c 3835                               {
                      13674 ; rs232cmd.c 3836                                       if ( PasswordProtected)
0033F4 964842rr       13676         MOV.B   ES,#SEG( _PasswordProtected )
0033F8 9908rrrr       13677         MOV.W   R0,#SOF( _PasswordProtected )
0033FC 8A00           13678         MOV.W   R0,[R0]
0033FE F307           13679         BEQ     _958
                      13680 ; rs232cmd.c 3837                                               rs232puts( "ON\n");
003400 9918rrrr       13682         MOV.W   R1,#SEG( _954 )
003404 9908rrrr       13683         MOV.W   R0,#SOF( _954 )
                      13684         CALL    _rs232puts
003408 C4rrrrrr       +13684 ;       FCALL   _rs232puts
00340C D680           13685         RET
00340C D680           13685         RET
00340E                13686 _958:
                      13687 ; rs232cmd.c 3838                                       else
                      13688 ; rs232cmd.c 3839                                               rs232puts( "OFF\n");
00340E 9918rrrr       13690         MOV.W   R1,#SEG( _955 )
003412 9908rrrr       13691         MOV.W   R0,#SOF( _955 )
                      13692         CALL    _rs232puts
003416 C4rrrrrr       +13692 ;       FCALL   _rs232puts
                      13693 ; rs232cmd.c 3840                               }
                      13694 ; rs232cmd.c 3841                       }
00341A D680           13696         RET
00341A D680           13696         RET
00341C                13697 _959:
                      13698 ; rs232cmd.c 3842                       else
                      13699 ; rs232cmd.c 3843                       {
                      13700 ; rs232cmd.c 3844                               if ( ParCnt != 1)
00341C 964842rr       13702         MOV.B   ES,#SEG( _ParCnt )
003420 9908rrrr       13703         MOV.W   R0,#SOF( _ParCnt )
003424 8200           13704         MOV.B   R0L,[R0]
003426 910401         13705         CMP.B   R0L,#01H
003429 F307           13706         BEQ     _960
                      13707 ; rs232cmd.c 3845                                       SCPIError = SyntaxErr;
00342B 964842rr       13709         MOV.B   ES,#SEG( _SCPIError )
00342F 9908rrrr       13710         MOV.W   R0,#SOF( _SCPIError )
003433 BA03           13711         MOV.W   [R0],#03H
003435 D680           13712         RET
003435 D68000         13712         RET
003438                13713 _960:
                      13714 ; rs232cmd.c 3846                               else
                      13715 ; rs232cmd.c 3847                               {
                      13716 ; rs232cmd.c 3848                                       if ( !strcmp( Cmd, "ON"))
003438 9938rrrr       13718         MOV.W   R3,#SEG( _956 )
00343C 9928rrrr       13719         MOV.W   R2,#SOF( _956 )
003440 9918rrrr       13720         MOV.W   R1,#SEG( _Cmd )
003444 9908rrrr       13721         MOV.W   R0,#SOF( _Cmd )
                      13722         CALL    _strcmp
003448 C4rrrrrr       +13722 ;       FCALL   _strcmp
00344C 6900           13723         OR.W    R0,R0
00344E F207           13724         BNE     _961
                      13725 ; rs232cmd.c 3849                                               PasswordProtected = true;
003450 964842rr       13727         MOV.B   ES,#SEG( _PasswordProtected )
003454 9908rrrr       13728         MOV.W   R0,#SOF( _PasswordProtected )
003458 9A08FFFF       13729         MOV.W   [R0],#0FFFFH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 223

ADDR   CODE            LINE SOURCELINE
00345C D680           13730         RET
00345C D680           13730         RET
00345E                13731 _961:
                      13732 ; rs232cmd.c 3850                                       else
                      13733 ; rs232cmd.c 3851                                               if ( !Cstrcmp( Cmd, PasswordText)
                            )
00345E 9938rrrr       13735         MOV.W   R3,#SEG( _PasswordText )
003462 9928rrrr       13736         MOV.W   R2,#SOF( _PasswordText )
003466 9918rrrr       13737         MOV.W   R1,#SEG( _Cmd )
00346A 9908rrrr       13738         MOV.W   R0,#SOF( _Cmd )
                      13739         CALL    _Cstrcmp
00346E C4rrrrrr       +13739 ;       FCALL   _Cstrcmp
003472 6900           13740         OR.W    R0,R0
003474 F206           13741         BNE     _962
                      13742 ; rs232cmd.c 3852                                                       PasswordProtected = false
                            ;
003476 964842rr       13744         MOV.B   ES,#SEG( _PasswordProtected )
00347A 9908rrrr       13745         MOV.W   R0,#SOF( _PasswordProtected )
00347E BA00           13746         MOV.W   [R0],#00H
003480 D680           13747         RET
003480 D680           13747         RET
003482                13748 _962:
                      13749 ; rs232cmd.c 3853                                       else
                      13750 ; rs232cmd.c 3854                                               SCPIError = IllegalParValue;
003482 964842rr       13752         MOV.B   ES,#SEG( _SCPIError )
003486 9908rrrr       13753         MOV.W   R0,#SOF( _SCPIError )
00348A 9A080023       13754         MOV.W   [R0],#023H
                      13755 ; rs232cmd.c 3855                               }
                      13756 ; rs232cmd.c 3856                       }
                      13757 ; rs232cmd.c 3857               }
00348E                13759 _970:
                      13760 ; rs232cmd.c 3858       }
00348E D680           13762         RET
                      13764 ; rs232cmd.c 3859       
                      13765 ; rs232cmd.c 3860       /************************************************************************
                            **/
                      13766 ; rs232cmd.c 3861       /* FactReset                                                             
                                                                                                                             
                                                         RS232CMD.C */
                      13767 ; rs232cmd.c 3862       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13768 ; rs232cmd.c 3863       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                      13769 ; rs232cmd.c 3864       /* Revised:       000914                                                 
                                                                                                                             
                                                                                    */
                      13770 ; rs232cmd.c 3865       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13771 ; rs232cmd.c 3866       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13772 ; rs232cmd.c 3867       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13773 ; rs232cmd.c 3868       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 224

ADDR   CODE            LINE SOURCELINE
                      13774 ; rs232cmd.c 3869       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13775 ; rs232cmd.c 3870       /************************************************************************
                            **/
                      13776 ; rs232cmd.c 3871       void FactReset( void)
                      13777 ; rs232cmd.c 3872       {
                      13778         ALIGN   1
                      13780         PUBLIC  _FactReset
003490                13781 _FactReset:
003490 0F10           13785         PUSH.W  R4
                      13789 ; rs232cmd.c 3873               int i;
                      13790 ; rs232cmd.c 3874       
                      13791 ; rs232cmd.c 3875               if ( !PasswordProtected)
003492 964842rr       13793         MOV.B   ES,#SEG( _PasswordProtected )
003496 9908rrrr       13794         MOV.W   R0,#SOF( _PasswordProtected )
00349A 8A00           13795         MOV.W   R0,[R0]
00349C F256           13796         BNE     _979
                      13797 ; rs232cmd.c 3876               {
                      13798 ; rs232cmd.c 3877                       if ( CmdExecute && !SCPIError)
00349E 964842rr       13800         MOV.B   ES,#SEG( _CmdExecute )
0034A2 9908rrrr       13801         MOV.W   R0,#SOF( _CmdExecute )
0034A6 8200           13802         MOV.B   R0L,[R0]
0034A8 F350           13803         BEQ     _979
0034AA 964842rr       13804         MOV.B   ES,#SEG( _SCPIError )
0034AE 9908rrrr       13805         MOV.W   R0,#SOF( _SCPIError )
0034B2 8A00           13806         MOV.W   R0,[R0]
0034B4 F24A           13807         BNE     _979
                      13808 ; rs232cmd.c 3878                       {
                      13809 ; rs232cmd.c 3879                               if ( CmdRequest)
0034B6 964842rr       13811         MOV.B   ES,#SEG( _CmdRequest )
0034BA 9908rrrr       13812         MOV.W   R0,#SOF( _CmdRequest )
0034BE 8200           13813         MOV.B   R0L,[R0]
0034C0 F306           13814         BEQ     _972
                      13815 ; rs232cmd.c 3880                                               SCPIError = SyntaxErr;
0034C2 964842rr       13817         MOV.B   ES,#SEG( _SCPIError )
0034C6 9908rrrr       13818         MOV.W   R0,#SOF( _SCPIError )
0034CA BA03           13819         MOV.W   [R0],#03H
0034CC FE3E           13820         BR      _979
0034CC FE3E           13820         BR      _979
0034CE                13821 _972:
                      13822 ; rs232cmd.c 3881                               else
                      13823 ; rs232cmd.c 3882                               {
                      13824 ; rs232cmd.c 3883                                       if ( ParCnt)
0034CE 964842rr       13826         MOV.B   ES,#SEG( _ParCnt )
0034D2 9908rrrr       13827         MOV.W   R0,#SOF( _ParCnt )
0034D6 8200           13828         MOV.B   R0L,[R0]
0034D8 F306           13829         BEQ     _973
                      13830 ; rs232cmd.c 3884                                               SCPIError = SyntaxErr;
0034DA 964842rr       13832         MOV.B   ES,#SEG( _SCPIError )
0034DE 9908rrrr       13833         MOV.W   R0,#SOF( _SCPIError )
0034E2 BA03           13834         MOV.W   [R0],#03H
0034E4 FE32           13835         BR      _979
0034E4 FE32           13835         BR      _979
0034E6                13836 _973:
                      13837 ; rs232cmd.c 3885                                       else
                      13838 ; rs232cmd.c 3886                                       {
                      13839 ; rs232cmd.c 3887                                               GenlockDefaults();               
                                            // 
                      13841         CALL    _GenlockDefaults
0034E6 C4rrrrrr       +13841 ;       FCALL   _GenlockDefaults
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 225

ADDR   CODE            LINE SOURCELINE
                      13842 ; rs232cmd.c 3888                                               BBDefaults();                    
                                                            // 
                      13844         CALL    _BBDefaults
0034EA C4rrrrrr       +13844 ;       FCALL   _BBDefaults
                      13845 ; rs232cmd.c 3889                                               CBDefaults();                    
                                                            //
                      13847         CALL    _CBDefaults
0034EE C4rrrrrr       +13847 ;       FCALL   _CBDefaults
                      13848 ; rs232cmd.c 3890                                               AudioDefaults();                 
                                                    //
                      13850         CALL    _AudioDefaults
0034F2 C4rrrrrr       +13850 ;       FCALL   _AudioDefaults
                      13851 ; rs232cmd.c 3891       
                      13852 ; rs232cmd.c 3892                                               GenlockInit();                   
                                                    // init the genlock setup
                      13854         CALL    _GenlockInit
0034F6 C4rrrrrr       +13854 ;       FCALL   _GenlockInit
                      13855 ; rs232cmd.c 3893                                               BBInit();                        
                                                                            // init the black burst setups
                      13857         CALL    _BBInit
0034FA C4rrrrrr       +13857 ;       FCALL   _BBInit
                      13858 ; rs232cmd.c 3894                                               CBInit();                        
                                                                            // init the colorbar generator (PAL,EBU ColorBar)
                            
                      13860         CALL    _CBInit
0034FE C4rrrrrr       +13860 ;       FCALL   _CBInit
                      13861 ; rs232cmd.c 3895                                               AudioInit();                     
                                                            // init the audio setup, (this includes an AudioTimer)           
                                            
                      13863         CALL    _AudioInit
003502 C4rrrrrr       +13863 ;       FCALL   _AudioInit
                      13864 ; rs232cmd.c 3896       
                      13865 ; rs232cmd.c 3897                                               GenlockUpdate();                 
                                                    // update the genlock setup.
                      13867         CALL    _GenlockUpdate
003506 C4rrrrrr       +13867 ;       FCALL   _GenlockUpdate
                      13868 ; rs232cmd.c 3898                                               CBUpdate();                      
                                                                    // update the colorbar generator (PAL,EBU ColorBar)
                      13870         CALL    _CBUpdate
00350A C4rrrrrr       +13870 ;       FCALL   _CBUpdate
                      13871 ; rs232cmd.c 3899                                               BBUpdate();                      
                                                                    // update the black burst setups
                      13873         CALL    _BBUpdate
00350E C4rrrrrr       +13873 ;       FCALL   _BBUpdate
                      13874 ; rs232cmd.c 3900                                               AudioUpdate();                   
                                                    // update the audio setup
                      13876         CALL    _AudioUpdate
003512 C4rrrrrr       +13876 ;       FCALL   _AudioUpdate
                      13877 ; rs232cmd.c 3901       
                      13878 ; rs232cmd.c 3902                                               for ( i = 1; i <= NoOfPresets; i+
                            +)
003516 B941           13880         MOV.W   R4,#01H
003518                13882 _974:
                      13883 ; rs232cmd.c 3903                                                       StorePreset( i);
003518 8904           13885         MOV.W   R0,R4
                      13888         CALL    _StorePreset
00351A C4rrrrrr       +13888 ;       FCALL   _StorePreset
00351E A941           13892         ADDS.W  R4,#01H
003520 99440004       13895         CMP.W   R4,#04H
003524 FDF9           13896         BLE     _974
                      13897 ; rs232cmd.c 3904       
                      13898 ; rs232cmd.c 3905                                               Settings.ActivePreset = 0;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 226

ADDR   CODE            LINE SOURCELINE
003526 964842rr       13900         MOV.B   ES,#SEG( _Settings )
00352A 9908rrrr       13901         MOV.W   R0,#SOF( _Settings )
00352E BA00           13902         MOV.W   [R0],#00H
                      13903 ; rs232cmd.c 3906                                               NV_Store( &Settings, SettingsPtr,
                             sizeof( Settings));
003530 9918rrrr       13905         MOV.W   R1,#SEG( _Settings )
003534 9908rrrr       13906         MOV.W   R0,#SOF( _Settings )
003538 964842rr       13907         MOV.B   ES,#SEG( _SettingsPtr )
00353C 9928rrrr       13908         MOV.W   R2,#SOF( _SettingsPtr )
003540 8A22           13909         MOV.W   R2,[R2]
003542 9938004A       13910         MOV.W   R3,#04AH
                      13911         CALL    _NV_Store
003546 C4rrrrrr       +13911 ;       FCALL   _NV_Store
                      13912 ; rs232cmd.c 3907                                       }
                      13913 ; rs232cmd.c 3908                               }
                      13914 ; rs232cmd.c 3909                       }
                      13915 ; rs232cmd.c 3910               }
00354A                13917 _979:
                      13918 ; rs232cmd.c 3911       }
00354A 2F10           13920         POP.W   R4
00354C D680           13922         RET
                      13925 ; rs232cmd.c 3912       
                      13926 ; rs232cmd.c 3913       /************************************************************************
                            **/
                      13927 ; rs232cmd.c 3914       /* FactV24Command                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      13928 ; rs232cmd.c 3915       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13929 ; rs232cmd.c 3916       /* Author:              Kim Engedahl, DEV, 000402                        
                                                                                                                             
                                    */
                      13930 ; rs232cmd.c 3917       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      13931 ; rs232cmd.c 3918       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      13932 ; rs232cmd.c 3919       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      13933 ; rs232cmd.c 3920       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      13934 ; rs232cmd.c 3921       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      13935 ; rs232cmd.c 3922       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      13936 ; rs232cmd.c 3923       /************************************************************************
                            **/
                      13937 ; rs232cmd.c 3924       void FactV24Command( void)
                      13938 ; rs232cmd.c 3925       {
                      13939         ALIGN   1
                      13941         PUBLIC  _FactV24Command
00354E                13942 _FactV24Command:
00354E 0F30           13946         PUSH.W  R4, R5
003550 9972003E       13948         SUB.W   R7,#03EH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 227

ADDR   CODE            LINE SOURCELINE
                      13954 ; rs232cmd.c 3926               UC address;
                      13955 ; rs232cmd.c 3927               char command[30], result[30];;
                      13956 ; rs232cmd.c 3928       
                      13957 ; rs232cmd.c 3929               if ( !PasswordProtected)
003554 964842rr       13959         MOV.B   ES,#SEG( _PasswordProtected )
003558 9908rrrr       13960         MOV.W   R0,#SOF( _PasswordProtected )
00355C 8A00           13961         MOV.W   R0,[R0]
                      13962         BNE     _996
00355E F302           +13962 ;       BEQ     _LG_912
003560 D50084         +13962 ;       JMP.L   _996
003564 D5008400       +13962 ;       JMP.L   _996
003564                +13962 _LG_912:
                      13963 ; rs232cmd.c 3930               {
                      13964 ; rs232cmd.c 3931                       if ( CmdExecute && !SCPIError)
003564 964842rr       13966         MOV.B   ES,#SEG( _CmdExecute )
003568 9908rrrr       13967         MOV.W   R0,#SOF( _CmdExecute )
00356C 8200           13968         MOV.B   R0L,[R0]
00356E F37D           13969         BEQ     _996
003570 964842rr       13970         MOV.B   ES,#SEG( _SCPIError )
003574 9908rrrr       13971         MOV.W   R0,#SOF( _SCPIError )
003578 8A00           13972         MOV.W   R0,[R0]
00357A F277           13973         BNE     _996
                      13974 ; rs232cmd.c 3932                       {
                      13975 ; rs232cmd.c 3933                               if ( CmdRequest)
00357C 964842rr       13977         MOV.B   ES,#SEG( _CmdRequest )
003580 9908rrrr       13978         MOV.W   R0,#SOF( _CmdRequest )
003584 8200           13979         MOV.B   R0L,[R0]
003586 F306           13980         BEQ     _984
                      13981 ; rs232cmd.c 3934                                       SCPIError = SyntaxErr;
003588 964842rr       13983         MOV.B   ES,#SEG( _SCPIError )
00358C 9908rrrr       13984         MOV.W   R0,#SOF( _SCPIError )
003590 BA03           13985         MOV.W   [R0],#03H
003592 FE6B           13986         BR      _996
003592 FE6B           13986         BR      _996
003594                13987 _984:
                      13988 ; rs232cmd.c 3935                               else
                      13989 ; rs232cmd.c 3936                               {
                      13990 ; rs232cmd.c 3937                                       if (( ParCnt != 2) || ( sscanf( Cmd, "%d,
                            %s", &address, command) != 2))
003594 964842rr       13992         MOV.B   ES,#SEG( _ParCnt )
003598 9908rrrr       13993         MOV.W   R0,#SOF( _ParCnt )
00359C 8200           13994         MOV.B   R0L,[R0]
00359E 910402         13995         CMP.B   R0L,#02H
0035A1 F21A           13996         BNE     _985
0035A3 9918rrrr       13997         MOV.W   R1,#SEG( _Cmd )
0035A7 9908rrrr       13998         MOV.W   R0,#SOF( _Cmd )
0035AB 9168rr         13999         MOV.B   R3L,#SEG( __lc_bs )
0035AE 7177           14000         XOR.B   R3H,R3H
0035B0 8927           14001         MOV.W   R2,R7
0035B2 91A8rr         14002         MOV.B   R5L,#SEG( __lc_bs )
0035B5 71BB           14003         XOR.B   R5H,R5H
0035B7 404702         14004         LEA     R4,R7+2
0035BA 0F30           14005         PUSH.W  R4, R5
0035BC 0F0C           14007         PUSH.W  R2, R3
0035BE 9938rrrr       14009         MOV.W   R3,#SEG( _981 )
0035C2 9928rrrr       14010         MOV.W   R2,#SOF( _981 )
0035C6 0F0C           14011         PUSH.W  R2, R3
                      14013         CALL    _sscanf
0035C8 C4rrrrrr       +14013 ;       FCALL   _sscanf
0035CC 9970000C       14014         ADD.W   R7,#0CH
0035D0 99040002       14016         CMP.W   R0,#02H
0035D4 F306           14017         BEQ     _986
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 228

ADDR   CODE            LINE SOURCELINE
0035D4 F306           14017         BEQ     _986
0035D6                14018 _985:
                      14019 ; rs232cmd.c 3938                                               SCPIError = SyntaxErr;
0035D6 964842rr       14021         MOV.B   ES,#SEG( _SCPIError )
0035DA 9908rrrr       14022         MOV.W   R0,#SOF( _SCPIError )
0035DE BA03           14023         MOV.W   [R0],#03H
0035E0 FE44           14024         BR      _996
0035E0 FE44           14024         BR      _996
0035E2                14025 _986:
                      14026 ; rs232cmd.c 3939                                       else
                      14027 ; rs232cmd.c 3940                                       {
                      14028 ; rs232cmd.c 3941                                               if ( command[2] == '?')
0035E2 9474043F       14030         CMP.B   [R7+4],#03FH
0035E6 F227           14031         BNE     _988
                      14032 ; rs232cmd.c 3942                                               {
                      14033 ; rs232cmd.c 3943                                                       if ( sio0SndRequest( 12, 
                            address, result, "%s", command) == OK)
0035E8 9908000C       14035         MOV.W   R0,#0CH
0035EC 8227           14036         MOV.B   R1L,[R7]
0035EE B130           14037         MOVS.B  R1H,#00H
0035F0 91A8rr         14038         MOV.B   R5L,#SEG( __lc_bs )
0035F3 71BB           14039         XOR.B   R5H,R5H
0035F5 404720         14040         LEA     R4,R7+32
0035F8 9168rr         14041         MOV.B   R3L,#SEG( __lc_bs )
0035FB 7177           14042         XOR.B   R3H,R3H
0035FD 402702         14043         LEA     R2,R7+2
003600 0F0C           14044         PUSH.W  R2, R3
003602 9938rrrr       14046         MOV.W   R3,#SEG( _982 )
003606 9928rrrr       14047         MOV.W   R2,#SOF( _982 )
00360A 0F0C           14048         PUSH.W  R2, R3
00360C 8935           14050         MOV.W   R3,R5
00360E 8924           14051         MOV.W   R2,R4
                      14052         CALL    _sio0SndRequest
003610 C4rrrrrr       +14052 ;       FCALL   _sio0SndRequest
003614 99700008       14053         ADD.W   R7,#08H
003618 9904FFFF       14055         CMP.W   R0,#0FFFFH
00361C F205           14056         BNE     _987
                      14057 ; rs232cmd.c 3944                                                               rs232puts( result
                            );
00361E 8915           14059         MOV.W   R1,R5
003620 8904           14060         MOV.W   R0,R4
                      14061         CALL    _rs232puts
003622 C4rrrrrr       +14061 ;       FCALL   _rs232puts
003626 FE21           14062         BR      _996
003626 FE21           14062         BR      _996
003628                14063 _987:
                      14064 ; rs232cmd.c 3945                                                       else
                      14065 ; rs232cmd.c 3946                                                               SCPIError = ExecE
                            rr;
003628 964842rr       14067         MOV.B   ES,#SEG( _SCPIError )
00362C 9908rrrr       14068         MOV.W   R0,#SOF( _SCPIError )
003630 9A08001D       14069         MOV.W   [R0],#01DH
                      14070 ; rs232cmd.c 3947                                               }
003634 FE1A           14072         BR      _996
003634 FE1A           14072         BR      _996
003636                14073 _988:
                      14074 ; rs232cmd.c 3948                                               else
                      14075 ; rs232cmd.c 3949                                               {
                      14076 ; rs232cmd.c 3950                                                       if ( sio0SndCommand( 20, 
                            address, "%s;", command) == FAIL)
003636 99080014       14078         MOV.W   R0,#014H
00363A 8227           14079         MOV.B   R1L,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 229

ADDR   CODE            LINE SOURCELINE
00363C B130           14080         MOVS.B  R1H,#00H
00363E 9168rr         14081         MOV.B   R3L,#SEG( __lc_bs )
003641 7177           14082         XOR.B   R3H,R3H
003643 402702         14083         LEA     R2,R7+2
003646 0F0C           14084         PUSH.W  R2, R3
003648 9938rrrr       14086         MOV.W   R3,#SEG( _983 )
00364C 9928rrrr       14087         MOV.W   R2,#SOF( _983 )
003650 0F0C           14088         PUSH.W  R2, R3
                      14090         CALL    _sio0SndCommand
003652 C4rrrrrr       +14090 ;       FCALL   _sio0SndCommand
003656 99700008       14091         ADD.W   R7,#08H
00365A 6900           14093         OR.W    R0,R0
00365C F206           14094         BNE     _996
                      14095 ; rs232cmd.c 3951                                                               SCPIError = ExecE
                            rr;
00365E 964842rr       14097         MOV.B   ES,#SEG( _SCPIError )
003662 9908rrrr       14098         MOV.W   R0,#SOF( _SCPIError )
003666 9A08001D       14099         MOV.W   [R0],#01DH
                      14100 ; rs232cmd.c 3952                                               }
                      14101 ; rs232cmd.c 3953                                       }
                      14102 ; rs232cmd.c 3954                               }
                      14103 ; rs232cmd.c 3955                       }
                      14104 ; rs232cmd.c 3956               }
00366A                14106 _996:
                      14107 ; rs232cmd.c 3957       }
00366A 9970003E       14109         ADD.W   R7,#03EH
00366E 2F30           14111         POP.W   R4, R5
003670 D680           14113         RET
                      14115 ; rs232cmd.c 3958       
                      14116 ; rs232cmd.c 3959       /************************************************************************
                            **/
                      14117 ; rs232cmd.c 3960       /* FactV24Transparent                                                    
                                                                                                                             
                                RS232CMD.C  */
                      14118 ; rs232cmd.c 3961       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14119 ; rs232cmd.c 3962       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      14120 ; rs232cmd.c 3963       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      14121 ; rs232cmd.c 3964       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14122 ; rs232cmd.c 3965       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14123 ; rs232cmd.c 3966       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14124 ; rs232cmd.c 3967       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14125 ; rs232cmd.c 3968       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14126 ; rs232cmd.c 3969       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 230

ADDR   CODE            LINE SOURCELINE
                      14127 ; rs232cmd.c 3970       void FactV24Transparent( void)
                      14128 ; rs232cmd.c 3971       {
                      14129         ALIGN   1
                      14131         PUBLIC  _FactV24Transparent
003672                14132 _FactV24Transparent:
                      14138 ; rs232cmd.c 3972               int unit;
                      14139 ; rs232cmd.c 3973       
                      14140 ; rs232cmd.c 3974               if ( !PasswordProtected)
003672 964842rr       14142         MOV.B   ES,#SEG( _PasswordProtected )
003676 9908rrrr       14143         MOV.W   R0,#SOF( _PasswordProtected )
00367A 8A00           14144         MOV.W   R0,[R0]
00367C F22E           14145         BNE     _1007
                      14146 ; rs232cmd.c 3975               {
                      14147 ; rs232cmd.c 3976                       if ( CmdExecute && !SCPIError)
00367E 964842rr       14149         MOV.B   ES,#SEG( _CmdExecute )
003682 9908rrrr       14150         MOV.W   R0,#SOF( _CmdExecute )
003686 8200           14151         MOV.B   R0L,[R0]
003688 F328           14152         BEQ     _1007
00368A 964842rr       14153         MOV.B   ES,#SEG( _SCPIError )
00368E 9908rrrr       14154         MOV.W   R0,#SOF( _SCPIError )
003692 8A00           14155         MOV.W   R0,[R0]
003694 F222           14156         BNE     _1007
                      14157 ; rs232cmd.c 3977                       {
                      14158 ; rs232cmd.c 3978                               if ( CmdRequest)
003696 964842rr       14160         MOV.B   ES,#SEG( _CmdRequest )
00369A 9908rrrr       14161         MOV.W   R0,#SOF( _CmdRequest )
00369E 8200           14162         MOV.B   R0L,[R0]
0036A0 F306           14163         BEQ     _1001
                      14164 ; rs232cmd.c 3979                                       SCPIError = SyntaxErr;
0036A2 964842rr       14166         MOV.B   ES,#SEG( _SCPIError )
0036A6 9908rrrr       14167         MOV.W   R0,#SOF( _SCPIError )
0036AA BA03           14168         MOV.W   [R0],#03H
0036AC D680           14169         RET
0036AC D680           14169         RET
0036AE                14170 _1001:
                      14171 ; rs232cmd.c 3980                               else
                      14172 ; rs232cmd.c 3981                               {
                      14173 ; rs232cmd.c 3982                                       unit = FindParameter( Cmd, UnitPar);
0036AE 9918rrrr       14175         MOV.W   R1,#SEG( _Cmd )
0036B2 9908rrrr       14176         MOV.W   R0,#SOF( _Cmd )
0036B6 9938rrrr       14177         MOV.W   R3,#SEG( _UnitPar )
0036BA 9928rrrr       14178         MOV.W   R2,#SOF( _UnitPar )
0036BE C51470         14179         CALL    _FindParameter
                      14181 ; rs232cmd.c 3983               
                      14182 ; rs232cmd.c 3984                                       if ( unit > -1)
0036C1 9904FFFF       14184         CMP.W   R0,#0FFFFH
0036C5 FD04           14185         BLE     _1002
                      14186 ; rs232cmd.c 3985                                               BBSPGCommunication( unit);
                      14188         CALL    _BBSPGCommunication
0036C7 C4rrrrrr       +14188 ;       FCALL   _BBSPGCommunication
0036CB D680           14190         RET
0036CB D68000         14190         RET
0036CE                14191 _1002:
                      14192 ; rs232cmd.c 3986                                       else
                      14193 ; rs232cmd.c 3987                                               SCPIError = DataOutOfRange;
0036CE 964842rr       14195         MOV.B   ES,#SEG( _SCPIError )
0036D2 9908rrrr       14196         MOV.W   R0,#SOF( _SCPIError )
0036D6 9A080021       14197         MOV.W   [R0],#021H
                      14198 ; rs232cmd.c 3988                               }
                      14199 ; rs232cmd.c 3989                       }
                      14200 ; rs232cmd.c 3990               }
0036DA                14202 _1007:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 231

ADDR   CODE            LINE SOURCELINE
                      14203 ; rs232cmd.c 3991       }
0036DA D680           14205         RET
                      14207 ; rs232cmd.c 3992       
                      14208 ; rs232cmd.c 3993       /************************************************************************
                            **/
                      14209 ; rs232cmd.c 3994       /* FactChecksumCode                                                      
                                                                                                                             
                                         RS232CMD.C */
                      14210 ; rs232cmd.c 3995       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14211 ; rs232cmd.c 3996       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14212 ; rs232cmd.c 3997       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14213 ; rs232cmd.c 3998       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14214 ; rs232cmd.c 3999       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14215 ; rs232cmd.c 4000       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14216 ; rs232cmd.c 4001       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14217 ; rs232cmd.c 4002       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14218 ; rs232cmd.c 4003       /************************************************************************
                            **/
                      14219 ; rs232cmd.c 4004       void FactChecksumCode( void)
                      14220 ; rs232cmd.c 4005       {
                      14221         ALIGN   1
                      14223         PUBLIC  _FactChecksumCode
0036DC                14224 _FactChecksumCode:
0036DC 0F30           14228         PUSH.W  R4, R5
0036DE 9972001E       14230         SUB.W   R7,#01EH
                      14233 ; rs232cmd.c 4006               char buffer[30];
                      14234 ; rs232cmd.c 4007       
                      14235 ; rs232cmd.c 4008               if ( CmdExecute && !SCPIError)
0036E2 964842rr       14237         MOV.B   ES,#SEG( _CmdExecute )
0036E6 9908rrrr       14238         MOV.W   R0,#SOF( _CmdExecute )
0036EA 8200           14239         MOV.B   R0L,[R0]
0036EC F338           14240         BEQ     _1015
0036EE 964842rr       14241         MOV.B   ES,#SEG( _SCPIError )
0036F2 9908rrrr       14242         MOV.W   R0,#SOF( _SCPIError )
0036F6 8A00           14243         MOV.W   R0,[R0]
0036F8 F232           14244         BNE     _1015
                      14245 ; rs232cmd.c 4009               {
                      14246 ; rs232cmd.c 4010                       if ( CmdRequest)
0036FA 964842rr       14248         MOV.B   ES,#SEG( _CmdRequest )
0036FE 9908rrrr       14249         MOV.W   R0,#SOF( _CmdRequest )
003702 8200           14250         MOV.B   R0L,[R0]
003704 F327           14251         BEQ     _1011
                      14252 ; rs232cmd.c 4011                       {
                      14253 ; rs232cmd.c 4012                               if ( ParCnt)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 232

ADDR   CODE            LINE SOURCELINE
003706 964842rr       14255         MOV.B   ES,#SEG( _ParCnt )
00370A 9908rrrr       14256         MOV.W   R0,#SOF( _ParCnt )
00370E 8200           14257         MOV.B   R0L,[R0]
003710 F306           14258         BEQ     _1010
                      14259 ; rs232cmd.c 4013                                       SCPIError = SyntaxErr;
003712 964842rr       14261         MOV.B   ES,#SEG( _SCPIError )
003716 9908rrrr       14262         MOV.W   R0,#SOF( _SCPIError )
00371A BA03           14263         MOV.W   [R0],#03H
00371C FE20           14264         BR      _1015
00371C FE20           14264         BR      _1015
00371E                14265 _1010:
                      14266 ; rs232cmd.c 4014                               else
                      14267 ; rs232cmd.c 4015                               {               
                      14268 ; rs232cmd.c 4016                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfPROMCode, StartOfPROMCode+SizeOfPROMCode-1));
00371E B910           14270         MOV.W   R1,#00H
003720 B900           14271         MOV.W   R0,#00H
003722 B933           14272         MOV.W   R3,#03H
003724 9928FFFF       14273         MOV.W   R2,#0FFFFH
                      14274         CALL    _ROMChecksum
003728 C4rrrrrr       +14274 ;       FCALL   _ROMChecksum
00372C 91A8rr         14275         MOV.B   R5L,#SEG( __lc_bs )
00372F 71BB           14276         XOR.B   R5H,R5H
003731 8947           14277         MOV.W   R4,R7
003733 0F01           14278         PUSH.W  R0
003735 9918rrrr       14280         MOV.W   R1,#SEG( _1009 )
003739 9908rrrr       14281         MOV.W   R0,#SOF( _1009 )
00373D 0F03           14282         PUSH.W  R0, R1
00373F 8915           14284         MOV.W   R1,R5
003741 8904           14285         MOV.W   R0,R4
                      14286         CALL    _sprintf
003743 C4rrrrrr       +14286 ;       FCALL   _sprintf
003747 A976           14287         ADDS.W  R7,#06H
                      14289 ; rs232cmd.c 4017                                       rs232puts( buffer);
003749 8915           14291         MOV.W   R1,R5
00374B 8904           14292         MOV.W   R0,R4
                      14293         CALL    _rs232puts
00374D C4rrrrrr       +14293 ;       FCALL   _rs232puts
                      14294 ; rs232cmd.c 4018                               }
                      14295 ; rs232cmd.c 4019                       }
003751 FE06           14297         BR      _1015
003751 FE0600         14297         BR      _1015
003754                14298 _1011:
                      14299 ; rs232cmd.c 4020                       else
                      14300 ; rs232cmd.c 4021                               SCPIError = SyntaxErr;
003754 964842rr       14302         MOV.B   ES,#SEG( _SCPIError )
003758 9908rrrr       14303         MOV.W   R0,#SOF( _SCPIError )
00375C BA03           14304         MOV.W   [R0],#03H
                      14305 ; rs232cmd.c 4022               }
00375E                14307 _1015:
                      14308 ; rs232cmd.c 4023       }
00375E 9970001E       14310         ADD.W   R7,#01EH
003762 2F30           14312         POP.W   R4, R5
003764 D680           14314         RET
                      14316 ; rs232cmd.c 4024       
                      14317 ; rs232cmd.c 4025       /************************************************************************
                            **/
                      14318 ; rs232cmd.c 4026       /* FactChecksumPLD                                                       
                                                                                                                             
                                         RS232CMD.C */
                      14319 ; rs232cmd.c 4027       /*                                                                       
                                                                                                                             
                                                                                                                             
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 233

ADDR   CODE            LINE SOURCELINE
                                                    */
                      14320 ; rs232cmd.c 4028       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14321 ; rs232cmd.c 4029       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14322 ; rs232cmd.c 4030       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14323 ; rs232cmd.c 4031       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14324 ; rs232cmd.c 4032       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14325 ; rs232cmd.c 4033       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14326 ; rs232cmd.c 4034       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14327 ; rs232cmd.c 4035       /************************************************************************
                            **/
                      14328 ; rs232cmd.c 4036       void FactChecksumPLD( void)
                      14329 ; rs232cmd.c 4037       {
                      14330         ALIGN   1
                      14332         PUBLIC  _FactChecksumPLD
003766                14333 _FactChecksumPLD:
003766 0F30           14337         PUSH.W  R4, R5
003768 9972001E       14339         SUB.W   R7,#01EH
                      14342 ; rs232cmd.c 4038               char buffer[30];
                      14343 ; rs232cmd.c 4039       
                      14344 ; rs232cmd.c 4040               if ( CmdExecute && !SCPIError)
00376C 964842rr       14346         MOV.B   ES,#SEG( _CmdExecute )
003770 9908rrrr       14347         MOV.W   R0,#SOF( _CmdExecute )
003774 8200           14348         MOV.B   R0L,[R0]
003776 F338           14349         BEQ     _1021
003778 964842rr       14350         MOV.B   ES,#SEG( _SCPIError )
00377C 9908rrrr       14351         MOV.W   R0,#SOF( _SCPIError )
003780 8A00           14352         MOV.W   R0,[R0]
003782 F232           14353         BNE     _1021
                      14354 ; rs232cmd.c 4041               {
                      14355 ; rs232cmd.c 4042                       if ( CmdRequest)
003784 964842rr       14357         MOV.B   ES,#SEG( _CmdRequest )
003788 9908rrrr       14358         MOV.W   R0,#SOF( _CmdRequest )
00378C 8200           14359         MOV.B   R0L,[R0]
00378E F327           14360         BEQ     _1017
                      14361 ; rs232cmd.c 4043                       {
                      14362 ; rs232cmd.c 4044                               if ( ParCnt)
003790 964842rr       14364         MOV.B   ES,#SEG( _ParCnt )
003794 9908rrrr       14365         MOV.W   R0,#SOF( _ParCnt )
003798 8200           14366         MOV.B   R0L,[R0]
00379A F306           14367         BEQ     _1016
                      14368 ; rs232cmd.c 4045                                       SCPIError = SyntaxErr;
00379C 964842rr       14370         MOV.B   ES,#SEG( _SCPIError )
0037A0 9908rrrr       14371         MOV.W   R0,#SOF( _SCPIError )
0037A4 BA03           14372         MOV.W   [R0],#03H
0037A6 FE20           14373         BR      _1021
0037A6 FE20           14373         BR      _1021
0037A8                14374 _1016:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 234

ADDR   CODE            LINE SOURCELINE
                      14375 ; rs232cmd.c 4046                               else
                      14376 ; rs232cmd.c 4047                               {               
                      14377 ; rs232cmd.c 4048                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfPLDCode, StartOfPLDCode+SizeOfPLDCode-1));
0037A8 B914           14379         MOV.W   R1,#04H
0037AA B900           14380         MOV.W   R0,#00H
0037AC B934           14381         MOV.W   R3,#04H
0037AE 99289FFF       14382         MOV.W   R2,#09FFFH
                      14383         CALL    _ROMChecksum
0037B2 C4rrrrrr       +14383 ;       FCALL   _ROMChecksum
0037B6 91A8rr         14384         MOV.B   R5L,#SEG( __lc_bs )
0037B9 71BB           14385         XOR.B   R5H,R5H
0037BB 8947           14386         MOV.W   R4,R7
0037BD 0F01           14387         PUSH.W  R0
0037BF 9918rrrr       14389         MOV.W   R1,#SEG( _1009 )
0037C3 9908rrrr       14390         MOV.W   R0,#SOF( _1009 )
0037C7 0F03           14391         PUSH.W  R0, R1
0037C9 8915           14393         MOV.W   R1,R5
0037CB 8904           14394         MOV.W   R0,R4
                      14395         CALL    _sprintf
0037CD C4rrrrrr       +14395 ;       FCALL   _sprintf
0037D1 A976           14396         ADDS.W  R7,#06H
                      14398 ; rs232cmd.c 4049                                       rs232puts( buffer);
0037D3 8915           14400         MOV.W   R1,R5
0037D5 8904           14401         MOV.W   R0,R4
                      14402         CALL    _rs232puts
0037D7 C4rrrrrr       +14402 ;       FCALL   _rs232puts
                      14403 ; rs232cmd.c 4050                               }
                      14404 ; rs232cmd.c 4051                       }
0037DB FE06           14406         BR      _1021
0037DB FE0600         14406         BR      _1021
0037DE                14407 _1017:
                      14408 ; rs232cmd.c 4052                       else
                      14409 ; rs232cmd.c 4053                               SCPIError = SyntaxErr;
0037DE 964842rr       14411         MOV.B   ES,#SEG( _SCPIError )
0037E2 9908rrrr       14412         MOV.W   R0,#SOF( _SCPIError )
0037E6 BA03           14413         MOV.W   [R0],#03H
                      14414 ; rs232cmd.c 4054               }
0037E8                14416 _1021:
                      14417 ; rs232cmd.c 4055       }
0037E8 9970001E       14419         ADD.W   R7,#01EH
0037EC 2F30           14421         POP.W   R4, R5
0037EE D680           14423         RET
                      14425 ; rs232cmd.c 4056       
                      14426 ; rs232cmd.c 4057       /************************************************************************
                            **/
                      14427 ; rs232cmd.c 4058       /* FactChecksumEmbAudio                                                  
                                                                                                                         RS23
                            2CMD.C  */
                      14428 ; rs232cmd.c 4059       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14429 ; rs232cmd.c 4060       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14430 ; rs232cmd.c 4061       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14431 ; rs232cmd.c 4062       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 235

ADDR   CODE            LINE SOURCELINE
                      14432 ; rs232cmd.c 4063       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14433 ; rs232cmd.c 4064       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14434 ; rs232cmd.c 4065       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14435 ; rs232cmd.c 4066       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14436 ; rs232cmd.c 4067       /************************************************************************
                            **/
                      14437 ; rs232cmd.c 4068       void FactChecksumEmbAudio( void)
                      14438 ; rs232cmd.c 4069       {
                      14439         ALIGN   1
                      14441         PUBLIC  _FactChecksumEmbAudio
0037F0                14442 _FactChecksumEmbAudio:
0037F0 0F30           14446         PUSH.W  R4, R5
0037F2 9972001E       14448         SUB.W   R7,#01EH
                      14451 ; rs232cmd.c 4070               char buffer[30];
                      14452 ; rs232cmd.c 4071       
                      14453 ; rs232cmd.c 4072               if ( CmdExecute && !SCPIError)
0037F6 964842rr       14455         MOV.B   ES,#SEG( _CmdExecute )
0037FA 9908rrrr       14456         MOV.W   R0,#SOF( _CmdExecute )
0037FE 8200           14457         MOV.B   R0L,[R0]
003800 F339           14458         BEQ     _1027
003802 964842rr       14459         MOV.B   ES,#SEG( _SCPIError )
003806 9908rrrr       14460         MOV.W   R0,#SOF( _SCPIError )
00380A 8A00           14461         MOV.W   R0,[R0]
00380C F233           14462         BNE     _1027
                      14463 ; rs232cmd.c 4073               {
                      14464 ; rs232cmd.c 4074                       if ( CmdRequest)
00380E 964842rr       14466         MOV.B   ES,#SEG( _CmdRequest )
003812 9908rrrr       14467         MOV.W   R0,#SOF( _CmdRequest )
003816 8200           14468         MOV.B   R0L,[R0]
003818 F328           14469         BEQ     _1023
                      14470 ; rs232cmd.c 4075                       {
                      14471 ; rs232cmd.c 4076                               if ( ParCnt)
00381A 964842rr       14473         MOV.B   ES,#SEG( _ParCnt )
00381E 9908rrrr       14474         MOV.W   R0,#SOF( _ParCnt )
003822 8200           14475         MOV.B   R0L,[R0]
003824 F306           14476         BEQ     _1022
                      14477 ; rs232cmd.c 4077                                       SCPIError = SyntaxErr;
003826 964842rr       14479         MOV.B   ES,#SEG( _SCPIError )
00382A 9908rrrr       14480         MOV.W   R0,#SOF( _SCPIError )
00382E BA03           14481         MOV.W   [R0],#03H
003830 FE21           14482         BR      _1027
003830 FE21           14482         BR      _1027
003832                14483 _1022:
                      14484 ; rs232cmd.c 4078                               else
                      14485 ; rs232cmd.c 4079                               {               
                      14486 ; rs232cmd.c 4080                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfEmbAudioCode, StartOfEmbAudioCode+SizeOfEmbAudioCode-1));
003832 B914           14488         MOV.W   R1,#04H
003834 9908A000       14489         MOV.W   R0,#0A000H
003838 B934           14490         MOV.W   R3,#04H
00383A 9928C3FF       14491         MOV.W   R2,#0C3FFH
                      14492         CALL    _ROMChecksum
00383E C4rrrrrr       +14492 ;       FCALL   _ROMChecksum
003842 91A8rr         14493         MOV.B   R5L,#SEG( __lc_bs )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 236

ADDR   CODE            LINE SOURCELINE
003845 71BB           14494         XOR.B   R5H,R5H
003847 8947           14495         MOV.W   R4,R7
003849 0F01           14496         PUSH.W  R0
00384B 9918rrrr       14498         MOV.W   R1,#SEG( _1009 )
00384F 9908rrrr       14499         MOV.W   R0,#SOF( _1009 )
003853 0F03           14500         PUSH.W  R0, R1
003855 8915           14502         MOV.W   R1,R5
003857 8904           14503         MOV.W   R0,R4
                      14504         CALL    _sprintf
003859 C4rrrrrr       +14504 ;       FCALL   _sprintf
00385D A976           14505         ADDS.W  R7,#06H
                      14507 ; rs232cmd.c 4081                                       rs232puts( buffer);
00385F 8915           14509         MOV.W   R1,R5
003861 8904           14510         MOV.W   R0,R4
                      14511         CALL    _rs232puts
003863 C4rrrrrr       +14511 ;       FCALL   _rs232puts
                      14512 ; rs232cmd.c 4082                               }
                      14513 ; rs232cmd.c 4083                       }
003867 FE06           14515         BR      _1027
003867 FE0600         14515         BR      _1027
00386A                14516 _1023:
                      14517 ; rs232cmd.c 4084                       else
                      14518 ; rs232cmd.c 4085                               SCPIError = SyntaxErr;
00386A 964842rr       14520         MOV.B   ES,#SEG( _SCPIError )
00386E 9908rrrr       14521         MOV.W   R0,#SOF( _SCPIError )
003872 BA03           14522         MOV.W   [R0],#03H
                      14523 ; rs232cmd.c 4086               }
003874                14525 _1027:
                      14526 ; rs232cmd.c 4087       }
003874 9970001E       14528         ADD.W   R7,#01EH
003878 2F30           14530         POP.W   R4, R5
00387A D680           14532         RET
                      14534 ; rs232cmd.c 4088       
                      14535 ; rs232cmd.c 4089       /************************************************************************
                            **/
                      14536 ; rs232cmd.c 4090       /* FactChecksumPattern                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      14537 ; rs232cmd.c 4091       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14538 ; rs232cmd.c 4092       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14539 ; rs232cmd.c 4093       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14540 ; rs232cmd.c 4094       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14541 ; rs232cmd.c 4095       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14542 ; rs232cmd.c 4096       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14543 ; rs232cmd.c 4097       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 237

ADDR   CODE            LINE SOURCELINE
                      14544 ; rs232cmd.c 4098       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14545 ; rs232cmd.c 4099       /************************************************************************
                            **/
                      14546 ; rs232cmd.c 4100       void FactChecksumPattern( void)
                      14547 ; rs232cmd.c 4101       {
                      14548         ALIGN   1
                      14550         PUBLIC  _FactChecksumPattern
00387C                14551 _FactChecksumPattern:
00387C 0F30           14555         PUSH.W  R4, R5
00387E 9972001E       14557         SUB.W   R7,#01EH
                      14560 ; rs232cmd.c 4102               char buffer[30];
                      14561 ; rs232cmd.c 4103       
                      14562 ; rs232cmd.c 4104               if ( CmdExecute && !SCPIError)
003882 964842rr       14564         MOV.B   ES,#SEG( _CmdExecute )
003886 9908rrrr       14565         MOV.W   R0,#SOF( _CmdExecute )
00388A 8200           14566         MOV.B   R0L,[R0]
00388C F338           14567         BEQ     _1033
00388E 964842rr       14568         MOV.B   ES,#SEG( _SCPIError )
003892 9908rrrr       14569         MOV.W   R0,#SOF( _SCPIError )
003896 8A00           14570         MOV.W   R0,[R0]
003898 F232           14571         BNE     _1033
                      14572 ; rs232cmd.c 4105               {
                      14573 ; rs232cmd.c 4106                       if ( CmdRequest)
00389A 964842rr       14575         MOV.B   ES,#SEG( _CmdRequest )
00389E 9908rrrr       14576         MOV.W   R0,#SOF( _CmdRequest )
0038A2 8200           14577         MOV.B   R0L,[R0]
0038A4 F327           14578         BEQ     _1029
                      14579 ; rs232cmd.c 4107                       {
                      14580 ; rs232cmd.c 4108                               if ( ParCnt)
0038A6 964842rr       14582         MOV.B   ES,#SEG( _ParCnt )
0038AA 9908rrrr       14583         MOV.W   R0,#SOF( _ParCnt )
0038AE 8200           14584         MOV.B   R0L,[R0]
0038B0 F306           14585         BEQ     _1028
                      14586 ; rs232cmd.c 4109                                       SCPIError = SyntaxErr;
0038B2 964842rr       14588         MOV.B   ES,#SEG( _SCPIError )
0038B6 9908rrrr       14589         MOV.W   R0,#SOF( _SCPIError )
0038BA BA03           14590         MOV.W   [R0],#03H
0038BC FE20           14591         BR      _1033
0038BC FE20           14591         BR      _1033
0038BE                14592 _1028:
                      14593 ; rs232cmd.c 4110                               else
                      14594 ; rs232cmd.c 4111                               {               
                      14595 ; rs232cmd.c 4112                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtOfCBVideoCode, StartOfCBVideoCode+SizeOfCBVideoCode-1));
0038BE B915           14597         MOV.W   R1,#05H
0038C0 B900           14598         MOV.W   R0,#00H
0038C2 B937           14599         MOV.W   R3,#07H
0038C4 9928FFFF       14600         MOV.W   R2,#0FFFFH
                      14601         CALL    _ROMChecksum
0038C8 C4rrrrrr       +14601 ;       FCALL   _ROMChecksum
0038CC 91A8rr         14602         MOV.B   R5L,#SEG( __lc_bs )
0038CF 71BB           14603         XOR.B   R5H,R5H
0038D1 8947           14604         MOV.W   R4,R7
0038D3 0F01           14605         PUSH.W  R0
0038D5 9918rrrr       14607         MOV.W   R1,#SEG( _1009 )
0038D9 9908rrrr       14608         MOV.W   R0,#SOF( _1009 )
0038DD 0F03           14609         PUSH.W  R0, R1
0038DF 8915           14611         MOV.W   R1,R5
0038E1 8904           14612         MOV.W   R0,R4
                      14613         CALL    _sprintf
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 238

ADDR   CODE            LINE SOURCELINE
0038E3 C4rrrrrr       +14613 ;       FCALL   _sprintf
0038E7 A976           14614         ADDS.W  R7,#06H
                      14616 ; rs232cmd.c 4113                                       rs232puts( buffer);
0038E9 8915           14618         MOV.W   R1,R5
0038EB 8904           14619         MOV.W   R0,R4
                      14620         CALL    _rs232puts
0038ED C4rrrrrr       +14620 ;       FCALL   _rs232puts
                      14621 ; rs232cmd.c 4114                               }
                      14622 ; rs232cmd.c 4115                       }
0038F1 FE06           14624         BR      _1033
0038F1 FE0600         14624         BR      _1033
0038F4                14625 _1029:
                      14626 ; rs232cmd.c 4116                       else
                      14627 ; rs232cmd.c 4117                               SCPIError = SyntaxErr;
0038F4 964842rr       14629         MOV.B   ES,#SEG( _SCPIError )
0038F8 9908rrrr       14630         MOV.W   R0,#SOF( _SCPIError )
0038FC BA03           14631         MOV.W   [R0],#03H
                      14632 ; rs232cmd.c 4118               }
0038FE                14634 _1033:
                      14635 ; rs232cmd.c 4119       }
0038FE 9970001E       14637         ADD.W   R7,#01EH
003902 2F30           14639         POP.W   R4, R5
003904 D680           14641         RET
                      14643 ; rs232cmd.c 4120       
                      14644 ; rs232cmd.c 4121       /************************************************************************
                            **/
                      14645 ; rs232cmd.c 4122       /* FactChecksumRange                                                     
                                                                                                                             
                                RS232CMD.C  */
                      14646 ; rs232cmd.c 4123       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14647 ; rs232cmd.c 4124       /* Author:              Kim Engedahl, DEV, 000705                        
                                                                                                                             
                                    */
                      14648 ; rs232cmd.c 4125       /* Revised:       000705                                                 
                                                                                                                             
                                                                                    */
                      14649 ; rs232cmd.c 4126       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14650 ; rs232cmd.c 4127       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14651 ; rs232cmd.c 4128       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14652 ; rs232cmd.c 4129       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14653 ; rs232cmd.c 4130       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14654 ; rs232cmd.c 4131       /************************************************************************
                            **/
                      14655 ; rs232cmd.c 4132       void FactChecksumRange( void)
                      14656 ; rs232cmd.c 4133       {
                      14657         ALIGN   1
                      14659         PUBLIC  _FactChecksumRange
003906                14660 _FactChecksumRange:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 239

ADDR   CODE            LINE SOURCELINE
003906 0F30           14664         PUSH.W  R4, R5
003908 99720026       14666         SUB.W   R7,#026H
                      14671 ; rs232cmd.c 4134               UL StartAddr, EndAddr;
                      14672 ; rs232cmd.c 4135       
                      14673 ; rs232cmd.c 4136               char buffer[30];
                      14674 ; rs232cmd.c 4137       
                      14675 ; rs232cmd.c 4138               if ( CmdExecute && !SCPIError)
00390C 964842rr       14677         MOV.B   ES,#SEG( _CmdExecute )
003910 9908rrrr       14678         MOV.W   R0,#SOF( _CmdExecute )
003914 8200           14679         MOV.B   R0L,[R0]
003916 F354           14680         BEQ     _1041
003918 964842rr       14681         MOV.B   ES,#SEG( _SCPIError )
00391C 9908rrrr       14682         MOV.W   R0,#SOF( _SCPIError )
003920 8A00           14683         MOV.W   R0,[R0]
003922 F24E           14684         BNE     _1041
                      14685 ; rs232cmd.c 4139               {
                      14686 ; rs232cmd.c 4140                       if ( CmdRequest)
003924 964842rr       14688         MOV.B   ES,#SEG( _CmdRequest )
003928 9908rrrr       14689         MOV.W   R0,#SOF( _CmdRequest )
00392C 8200           14690         MOV.B   R0L,[R0]
00392E F343           14691         BEQ     _1037
                      14692 ; rs232cmd.c 4141                       {
                      14693 ; rs232cmd.c 4142                               if (( ParCnt != 2) || (( sscanf( Cmd, "%lu,%lu", 
                            &StartAddr, &EndAddr)) != 2))
003930 964842rr       14695         MOV.B   ES,#SEG( _ParCnt )
003934 9908rrrr       14696         MOV.W   R0,#SOF( _ParCnt )
003938 8200           14697         MOV.B   R0L,[R0]
00393A 910402         14698         CMP.B   R0L,#02H
00393D F21A           14699         BNE     _1035
00393F 9918rrrr       14700         MOV.W   R1,#SEG( _Cmd )
003943 9908rrrr       14701         MOV.W   R0,#SOF( _Cmd )
003947 9168rr         14702         MOV.B   R3L,#SEG( __lc_bs )
00394A 7177           14703         XOR.B   R3H,R3H
00394C 8927           14704         MOV.W   R2,R7
00394E 91A8rr         14705         MOV.B   R5L,#SEG( __lc_bs )
003951 71BB           14706         XOR.B   R5H,R5H
003953 404704         14707         LEA     R4,R7+4
003956 0F30           14708         PUSH.W  R4, R5
003958 0F0C           14710         PUSH.W  R2, R3
00395A 9938rrrr       14712         MOV.W   R3,#SEG( _1034 )
00395E 9928rrrr       14713         MOV.W   R2,#SOF( _1034 )
003962 0F0C           14714         PUSH.W  R2, R3
                      14716         CALL    _sscanf
003964 C4rrrrrr       +14716 ;       FCALL   _sscanf
003968 9970000C       14717         ADD.W   R7,#0CH
00396C 99040002       14719         CMP.W   R0,#02H
003970 F306           14720         BEQ     _1036
003970 F306           14720         BEQ     _1036
003972                14721 _1035:
                      14722 ; rs232cmd.c 4143                                       SCPIError = SyntaxErr;
003972 964842rr       14724         MOV.B   ES,#SEG( _SCPIError )
003976 9908rrrr       14725         MOV.W   R0,#SOF( _SCPIError )
00397A BA03           14726         MOV.W   [R0],#03H
00397C FE21           14727         BR      _1041
00397C FE21           14727         BR      _1041
00397E                14728 _1036:
                      14729 ; rs232cmd.c 4144                               else
                      14730 ; rs232cmd.c 4145                               {
                      14731 ; rs232cmd.c 4146                                       sprintf( buffer, "%u\n", ROMChecksum( Sta
                            rtAddr, EndAddr));
00397E 8C1702         14733         MOV.W   R1,[R7+2]
003981 8A07           14734         MOV.W   R0,[R7]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 240

ADDR   CODE            LINE SOURCELINE
003983 8C3706         14735         MOV.W   R3,[R7+6]
003986 8C2704         14736         MOV.W   R2,[R7+4]
                      14737         CALL    _ROMChecksum
003989 C4rrrrrr       +14737 ;       FCALL   _ROMChecksum
00398D 91A8rr         14738         MOV.B   R5L,#SEG( __lc_bs )
003990 71BB           14739         XOR.B   R5H,R5H
003992 404708         14740         LEA     R4,R7+8
003995 0F01           14741         PUSH.W  R0
003997 9918rrrr       14743         MOV.W   R1,#SEG( _1009 )
00399B 9908rrrr       14744         MOV.W   R0,#SOF( _1009 )
00399F 0F03           14745         PUSH.W  R0, R1
0039A1 8915           14747         MOV.W   R1,R5
0039A3 8904           14748         MOV.W   R0,R4
                      14749         CALL    _sprintf
0039A5 C4rrrrrr       +14749 ;       FCALL   _sprintf
0039A9 A976           14750         ADDS.W  R7,#06H
                      14752 ; rs232cmd.c 4147                                       rs232puts( buffer);
0039AB 8915           14754         MOV.W   R1,R5
0039AD 8904           14755         MOV.W   R0,R4
                      14756         CALL    _rs232puts
0039AF C4rrrrrr       +14756 ;       FCALL   _rs232puts
                      14757 ; rs232cmd.c 4148                               }
                      14758 ; rs232cmd.c 4149                       }
0039B3 FE06           14760         BR      _1041
0039B3 FE0600         14760         BR      _1041
0039B6                14761 _1037:
                      14762 ; rs232cmd.c 4150                       else
                      14763 ; rs232cmd.c 4151                               SCPIError = SyntaxErr;
0039B6 964842rr       14765         MOV.B   ES,#SEG( _SCPIError )
0039BA 9908rrrr       14766         MOV.W   R0,#SOF( _SCPIError )
0039BE BA03           14767         MOV.W   [R0],#03H
                      14768 ; rs232cmd.c 4152               }
0039C0                14770 _1041:
                      14771 ; rs232cmd.c 4153       }
0039C0 99700026       14773         ADD.W   R7,#026H
0039C4 2F30           14775         POP.W   R4, R5
0039C6 D680           14777         RET
                      14779 ; rs232cmd.c 4154       
                      14780 ; rs232cmd.c 4155       /************************************************************************
                            **/
                      14781 ; rs232cmd.c 4156       /* FactMainVersion                                                       
                                                                                                                             
                                         RS232CMD.C */
                      14782 ; rs232cmd.c 4157       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14783 ; rs232cmd.c 4158       /* Author:              Kim Engedahl, DEV, 000620                        
                                                                                                                             
                                    */
                      14784 ; rs232cmd.c 4159       /* Revised:       000620                                                 
                                                                                                                             
                                                                                    */
                      14785 ; rs232cmd.c 4160       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14786 ; rs232cmd.c 4161       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 241

ADDR   CODE            LINE SOURCELINE
                      14787 ; rs232cmd.c 4162       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14788 ; rs232cmd.c 4163       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14789 ; rs232cmd.c 4164       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14790 ; rs232cmd.c 4165       /************************************************************************
                            **/
                      14791 ; rs232cmd.c 4166       void FactMainVersion( void)
                      14792 ; rs232cmd.c 4167       {
                      14793         ALIGN   1
                      14795         PUBLIC  _FactMainVersion
0039C8                14796 _FactMainVersion:
0039C8 0F30           14800         PUSH.W  R4, R5
0039CA 99720014       14802         SUB.W   R7,#014H
                      14805 ; rs232cmd.c 4168               char buffer[20];
                      14806 ; rs232cmd.c 4169       
                      14807 ; rs232cmd.c 4170               if ( CmdExecute && !SCPIError)
0039CE 964842rr       14809         MOV.B   ES,#SEG( _CmdExecute )
0039D2 9908rrrr       14810         MOV.W   R0,#SOF( _CmdExecute )
0039D6 8200           14811         MOV.B   R0L,[R0]
0039D8 F333           14812         BEQ     _1049
0039DA 964842rr       14813         MOV.B   ES,#SEG( _SCPIError )
0039DE 9908rrrr       14814         MOV.W   R0,#SOF( _SCPIError )
0039E2 8A00           14815         MOV.W   R0,[R0]
0039E4 F22D           14816         BNE     _1049
                      14817 ; rs232cmd.c 4171               {
                      14818 ; rs232cmd.c 4172                       if ( CmdRequest)
0039E6 964842rr       14820         MOV.B   ES,#SEG( _CmdRequest )
0039EA 9908rrrr       14821         MOV.W   R0,#SOF( _CmdRequest )
0039EE 8200           14822         MOV.B   R0L,[R0]
0039F0 F322           14823         BEQ     _1045
                      14824 ; rs232cmd.c 4173                       {
                      14825 ; rs232cmd.c 4174                               if ( ParCnt)
0039F2 964842rr       14827         MOV.B   ES,#SEG( _ParCnt )
0039F6 9908rrrr       14828         MOV.W   R0,#SOF( _ParCnt )
0039FA 8200           14829         MOV.B   R0L,[R0]
0039FC F306           14830         BEQ     _1044
                      14831 ; rs232cmd.c 4175                                       SCPIError = SyntaxErr;
0039FE 964842rr       14833         MOV.B   ES,#SEG( _SCPIError )
003A02 9908rrrr       14834         MOV.W   R0,#SOF( _SCPIError )
003A06 BA03           14835         MOV.W   [R0],#03H
003A08 FE1B           14836         BR      _1049
003A08 FE1B           14836         BR      _1049
003A0A                14837 _1044:
                      14838 ; rs232cmd.c 4176                               else
                      14839 ; rs232cmd.c 4177                               {
                      14840 ; rs232cmd.c 4178                                       sprintf( buffer, "%u\n", MasterSWVersion)
                            ;
003A0A 91A8rr         14842         MOV.B   R5L,#SEG( __lc_bs )
003A0D 71BB           14843         XOR.B   R5H,R5H
003A0F 8947           14844         MOV.W   R4,R7
003A11 99080016       14845         MOV.W   R0,#016H
003A15 0F01           14846         PUSH.W  R0
003A17 9918rrrr       14848         MOV.W   R1,#SEG( _1009 )
003A1B 9908rrrr       14849         MOV.W   R0,#SOF( _1009 )
003A1F 0F03           14850         PUSH.W  R0, R1
003A21 8915           14852         MOV.W   R1,R5
003A23 8904           14853         MOV.W   R0,R4
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 242

ADDR   CODE            LINE SOURCELINE
                      14854         CALL    _sprintf
003A25 C4rrrrrr       +14854 ;       FCALL   _sprintf
003A29 A976           14855         ADDS.W  R7,#06H
                      14857 ; rs232cmd.c 4179                                       rs232puts( buffer);
003A2B 8915           14859         MOV.W   R1,R5
003A2D 8904           14860         MOV.W   R0,R4
                      14861         CALL    _rs232puts
003A2F C4rrrrrr       +14861 ;       FCALL   _rs232puts
                      14862 ; rs232cmd.c 4180                               }
                      14863 ; rs232cmd.c 4181                       }
003A33 FE06           14865         BR      _1049
003A33 FE0600         14865         BR      _1049
003A36                14866 _1045:
                      14867 ; rs232cmd.c 4182                       else
                      14868 ; rs232cmd.c 4183                               SCPIError = SyntaxErr;
003A36 964842rr       14870         MOV.B   ES,#SEG( _SCPIError )
003A3A 9908rrrr       14871         MOV.W   R0,#SOF( _SCPIError )
003A3E BA03           14872         MOV.W   [R0],#03H
                      14873 ; rs232cmd.c 4184               }
003A40                14875 _1049:
                      14876 ; rs232cmd.c 4185       }
003A40 99700014       14878         ADD.W   R7,#014H
003A44 2F30           14880         POP.W   R4, R5
003A46 D680           14882         RET
                      14884 ; rs232cmd.c 4186       
                      14885 ; rs232cmd.c 4187       /************************************************************************
                            **/
                      14886 ; rs232cmd.c 4188       /* FactMainIDNCompany                                                    
                                                                                                                             
                                RS232CMD.C  */
                      14887 ; rs232cmd.c 4189       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14888 ; rs232cmd.c 4190       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      14889 ; rs232cmd.c 4191       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      14890 ; rs232cmd.c 4192       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      14891 ; rs232cmd.c 4193       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      14892 ; rs232cmd.c 4194       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      14893 ; rs232cmd.c 4195       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      14894 ; rs232cmd.c 4196       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      14895 ; rs232cmd.c 4197       /************************************************************************
                            **/
                      14896 ; rs232cmd.c 4198       void FactMainIDNCompany( void)
                      14897 ; rs232cmd.c 4199       {
                      14898         ALIGN   1
                      14900         PUBLIC  _FactMainIDNCompany
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 243

ADDR   CODE            LINE SOURCELINE
003A48                14901 _FactMainIDNCompany:
003A48 0F70           14905         PUSH.W  R4, R5, R6
003A4A 99720022       14907         SUB.W   R7,#022H
                      14910 ; rs232cmd.c 4200               char Company[33];
                      14911 ; rs232cmd.c 4201       
                      14912 ; rs232cmd.c 4202               if ( CmdExecute && !SCPIError)
003A4E 964842rr       14914         MOV.B   ES,#SEG( _CmdExecute )
003A52 9908rrrr       14915         MOV.W   R0,#SOF( _CmdExecute )
003A56 8200           14916         MOV.B   R0L,[R0]
003A58 F364           14917         BEQ     _1060
003A5A 964842rr       14918         MOV.B   ES,#SEG( _SCPIError )
003A5E 9908rrrr       14919         MOV.W   R0,#SOF( _SCPIError )
003A62 8A00           14920         MOV.W   R0,[R0]
003A64 F25E           14921         BNE     _1060
                      14922 ; rs232cmd.c 4203               {
                      14923 ; rs232cmd.c 4204                       if ( CmdRequest)
003A66 964842rr       14925         MOV.B   ES,#SEG( _CmdRequest )
003A6A 9908rrrr       14926         MOV.W   R0,#SOF( _CmdRequest )
003A6E 8200           14927         MOV.B   R0L,[R0]
003A70 F317           14928         BEQ     _1052
                      14929 ; rs232cmd.c 4205                       {
                      14930 ; rs232cmd.c 4206                               if ( ParCnt)
003A72 964842rr       14932         MOV.B   ES,#SEG( _ParCnt )
003A76 9908rrrr       14933         MOV.W   R0,#SOF( _ParCnt )
003A7A 8200           14934         MOV.B   R0L,[R0]
003A7C F306           14935         BEQ     _1051
                      14936 ; rs232cmd.c 4207                                       SCPIError = SyntaxErr;
003A7E 964842rr       14938         MOV.B   ES,#SEG( _SCPIError )
003A82 9908rrrr       14939         MOV.W   R0,#SOF( _SCPIError )
003A86 BA03           14940         MOV.W   [R0],#03H
003A88 FE4C           14941         BR      _1060
003A88 FE4C           14941         BR      _1060
003A8A                14942 _1051:
                      14943 ; rs232cmd.c 4208                               else
                      14944 ; rs232cmd.c 4209                               {
                      14945 ; rs232cmd.c 4210                                       rs232puts( Calibration.Company);
003A8A 9918rrrr       14947         MOV.W   R1,#SEG( _Calibration )
003A8E 9908rrrr       14948         MOV.W   R0,#SOF( _Calibration )
                      14949         CALL    _rs232puts
003A92 C4rrrrrr       +14949 ;       FCALL   _rs232puts
                      14950 ; rs232cmd.c 4211                                       rs232putchar( '\n');
003A96 91080A         14952         MOV.B   R0L,#0AH
                      14953         CALL    _rs232putchar
003A99 C4rrrrrr       +14953 ;       FCALL   _rs232putchar
                      14954 ; rs232cmd.c 4212                               }
                      14955 ; rs232cmd.c 4213                       }
003A9D FE42           14957         BR      _1060
003A9D FE4200         14957         BR      _1060
003AA0                14958 _1052:
                      14959 ; rs232cmd.c 4214                       else
                      14960 ; rs232cmd.c 4215                       {
                      14961 ; rs232cmd.c 4216                               if ( !PasswordProtected)
003AA0 964842rr       14963         MOV.B   ES,#SEG( _PasswordProtected )
003AA4 9908rrrr       14964         MOV.W   R0,#SOF( _PasswordProtected )
003AA8 8A00           14965         MOV.W   R0,[R0]
003AAA F23B           14966         BNE     _1060
                      14967 ; rs232cmd.c 4217                               {
                      14968 ; rs232cmd.c 4218                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%32
                            s", Company) != 1))
003AAC 964842rr       14970         MOV.B   ES,#SEG( _ParCnt )
003AB0 9908rrrr       14971         MOV.W   R0,#SOF( _ParCnt )
003AB4 8200           14972         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 244

ADDR   CODE            LINE SOURCELINE
003AB6 910401         14973         CMP.B   R0L,#01H
003AB9 F217           14974         BNE     _1053
003ABB 9918rrrr       14975         MOV.W   R1,#SEG( _Cmd )
003ABF 9908rrrr       14976         MOV.W   R0,#SOF( _Cmd )
003AC3 91A8rr         14977         MOV.B   R5L,#SEG( __lc_bs )
003AC6 71BB           14978         XOR.B   R5H,R5H
003AC8 8947           14979         MOV.W   R4,R7
003ACA 8935           14980         MOV.W   R3,R5
003ACC 8924           14981         MOV.W   R2,R4
003ACE 0F0C           14982         PUSH.W  R2, R3
003AD0 9938rrrr       14984         MOV.W   R3,#SEG( _1050 )
003AD4 9928rrrr       14985         MOV.W   R2,#SOF( _1050 )
003AD8 0F0C           14986         PUSH.W  R2, R3
                      14988         CALL    _sscanf
003ADA C4rrrrrr       +14988 ;       FCALL   _sscanf
003ADE 99700008       14989         ADD.W   R7,#08H
003AE2 99040001       14991         CMP.W   R0,#01H
003AE6 F306           14992         BEQ     _1054
003AE6 F306           14992         BEQ     _1054
003AE8                14993 _1053:
                      14994 ; rs232cmd.c 4219                                               SCPIError = SyntaxErr;
003AE8 964842rr       14996         MOV.B   ES,#SEG( _SCPIError )
003AEC 9908rrrr       14997         MOV.W   R0,#SOF( _SCPIError )
003AF0 BA03           14998         MOV.W   [R0],#03H
003AF2 FE17           14999         BR      _1060
003AF2 FE17           14999         BR      _1060
003AF4                15000 _1054:
                      15001 ; rs232cmd.c 4220                                       else
                      15002 ; rs232cmd.c 4221                                       {
                      15003 ; rs232cmd.c 4222                                               strncpy( Calibration.Company, Com
                            pany, 32);
003AF4 99680020       15005         MOV.W   R6,#020H
003AF8 9918rrrr       15006         MOV.W   R1,#SEG( _Calibration )
003AFC 9908rrrr       15007         MOV.W   R0,#SOF( _Calibration )
003B00 8935           15008         MOV.W   R3,R5
003B02 8924           15009         MOV.W   R2,R4
                      15010         CALL    _strncpy
003B04 C4rrrrrr       +15010 ;       FCALL   _strncpy
                      15011 ; rs232cmd.c 4223       
                      15012 ; rs232cmd.c 4224                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003B08 964842rr       15014         MOV.B   ES,#SEG( _CalibrationPtr )
003B0C 9928rrrr       15015         MOV.W   R2,#SOF( _CalibrationPtr )
003B10 8A22           15016         MOV.W   R2,[R2]
003B12 993800E0       15017         MOV.W   R3,#0E0H
003B16 9918rrrr       15018         MOV.W   R1,#SEG( _Calibration )
003B1A 9908rrrr       15019         MOV.W   R0,#SOF( _Calibration )
                      15020         CALL    _NV_Store
003B1E C4rrrrrr       +15020 ;       FCALL   _NV_Store
                      15021 ; rs232cmd.c 4225                                       }
                      15022 ; rs232cmd.c 4226                               }
                      15023 ; rs232cmd.c 4227                       }
                      15024 ; rs232cmd.c 4228               }
003B22                15026 _1060:
                      15027 ; rs232cmd.c 4229       }
003B22 99700022       15029         ADD.W   R7,#022H
003B26 2F70           15031         POP.W   R4, R5, R6
003B28 D680           15033         RET
                      15035 ; rs232cmd.c 4230       
                      15036 ; rs232cmd.c 4231       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 245

ADDR   CODE            LINE SOURCELINE
                      15037 ; rs232cmd.c 4232       /* FactMainIDNType                                                       
                                                                                                                             
                                         RS232CMD.C */
                      15038 ; rs232cmd.c 4233       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15039 ; rs232cmd.c 4234       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15040 ; rs232cmd.c 4235       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      15041 ; rs232cmd.c 4236       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15042 ; rs232cmd.c 4237       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15043 ; rs232cmd.c 4238       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15044 ; rs232cmd.c 4239       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15045 ; rs232cmd.c 4240       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15046 ; rs232cmd.c 4241       /************************************************************************
                            **/
                      15047 ; rs232cmd.c 4242       void FactMainIDNType( void)
                      15048 ; rs232cmd.c 4243       {
                      15049         ALIGN   1
                      15051         PUBLIC  _FactMainIDNType
003B2A                15052 _FactMainIDNType:
003B2A 0F70           15056         PUSH.W  R4, R5, R6
003B2C 99720022       15058         SUB.W   R7,#022H
                      15061 ; rs232cmd.c 4244               char Type[33];
                      15062 ; rs232cmd.c 4245       
                      15063 ; rs232cmd.c 4246               if ( CmdExecute && !SCPIError)
003B30 964842rr       15065         MOV.B   ES,#SEG( _CmdExecute )
003B34 9908rrrr       15066         MOV.W   R0,#SOF( _CmdExecute )
003B38 8200           15067         MOV.B   R0L,[R0]
003B3A F364           15068         BEQ     _1072
003B3C 964842rr       15069         MOV.B   ES,#SEG( _SCPIError )
003B40 9908rrrr       15070         MOV.W   R0,#SOF( _SCPIError )
003B44 8A00           15071         MOV.W   R0,[R0]
003B46 F25E           15072         BNE     _1072
                      15073 ; rs232cmd.c 4247               {
                      15074 ; rs232cmd.c 4248                       if ( CmdRequest)
003B48 964842rr       15076         MOV.B   ES,#SEG( _CmdRequest )
003B4C 9908rrrr       15077         MOV.W   R0,#SOF( _CmdRequest )
003B50 8200           15078         MOV.B   R0L,[R0]
003B52 F317           15079         BEQ     _1064
                      15080 ; rs232cmd.c 4249                       {
                      15081 ; rs232cmd.c 4250                               if ( ParCnt)
003B54 964842rr       15083         MOV.B   ES,#SEG( _ParCnt )
003B58 9908rrrr       15084         MOV.W   R0,#SOF( _ParCnt )
003B5C 8200           15085         MOV.B   R0L,[R0]
003B5E F306           15086         BEQ     _1063
                      15087 ; rs232cmd.c 4251                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 246

ADDR   CODE            LINE SOURCELINE
003B60 964842rr       15089         MOV.B   ES,#SEG( _SCPIError )
003B64 9908rrrr       15090         MOV.W   R0,#SOF( _SCPIError )
003B68 BA03           15091         MOV.W   [R0],#03H
003B6A FE4C           15092         BR      _1072
003B6A FE4C           15092         BR      _1072
003B6C                15093 _1063:
                      15094 ; rs232cmd.c 4252                               else
                      15095 ; rs232cmd.c 4253                               {
                      15096 ; rs232cmd.c 4254                                       rs232puts( Calibration.Type);
003B6C 9918rrrr       15098         MOV.W   R1,#SEG( _Calibration+33 )
003B70 9908rrrr       15099         MOV.W   R0,#SOF( _Calibration+33 )
                      15100         CALL    _rs232puts
003B74 C4rrrrrr       +15100 ;       FCALL   _rs232puts
                      15101 ; rs232cmd.c 4255                                       rs232putchar( '\n');
003B78 91080A         15103         MOV.B   R0L,#0AH
                      15104         CALL    _rs232putchar
003B7B C4rrrrrr       +15104 ;       FCALL   _rs232putchar
                      15105 ; rs232cmd.c 4256                               }
                      15106 ; rs232cmd.c 4257                       }
003B7F FE42           15108         BR      _1072
003B7F FE4200         15108         BR      _1072
003B82                15109 _1064:
                      15110 ; rs232cmd.c 4258                       else
                      15111 ; rs232cmd.c 4259                       {
                      15112 ; rs232cmd.c 4260                               if ( !PasswordProtected)
003B82 964842rr       15114         MOV.B   ES,#SEG( _PasswordProtected )
003B86 9908rrrr       15115         MOV.W   R0,#SOF( _PasswordProtected )
003B8A 8A00           15116         MOV.W   R0,[R0]
003B8C F23B           15117         BNE     _1072
                      15118 ; rs232cmd.c 4261                               {
                      15119 ; rs232cmd.c 4262                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%32
                            s", Type) != 1))
003B8E 964842rr       15121         MOV.B   ES,#SEG( _ParCnt )
003B92 9908rrrr       15122         MOV.W   R0,#SOF( _ParCnt )
003B96 8200           15123         MOV.B   R0L,[R0]
003B98 910401         15124         CMP.B   R0L,#01H
003B9B F217           15125         BNE     _1065
003B9D 9918rrrr       15126         MOV.W   R1,#SEG( _Cmd )
003BA1 9908rrrr       15127         MOV.W   R0,#SOF( _Cmd )
003BA5 91A8rr         15128         MOV.B   R5L,#SEG( __lc_bs )
003BA8 71BB           15129         XOR.B   R5H,R5H
003BAA 8947           15130         MOV.W   R4,R7
003BAC 8935           15131         MOV.W   R3,R5
003BAE 8924           15132         MOV.W   R2,R4
003BB0 0F0C           15133         PUSH.W  R2, R3
003BB2 9938rrrr       15135         MOV.W   R3,#SEG( _1050 )
003BB6 9928rrrr       15136         MOV.W   R2,#SOF( _1050 )
003BBA 0F0C           15137         PUSH.W  R2, R3
                      15139         CALL    _sscanf
003BBC C4rrrrrr       +15139 ;       FCALL   _sscanf
003BC0 99700008       15140         ADD.W   R7,#08H
003BC4 99040001       15142         CMP.W   R0,#01H
003BC8 F306           15143         BEQ     _1066
003BC8 F306           15143         BEQ     _1066
003BCA                15144 _1065:
                      15145 ; rs232cmd.c 4263                                               SCPIError = SyntaxErr;
003BCA 964842rr       15147         MOV.B   ES,#SEG( _SCPIError )
003BCE 9908rrrr       15148         MOV.W   R0,#SOF( _SCPIError )
003BD2 BA03           15149         MOV.W   [R0],#03H
003BD4 FE17           15150         BR      _1072
003BD4 FE17           15150         BR      _1072
003BD6                15151 _1066:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 247

ADDR   CODE            LINE SOURCELINE
                      15152 ; rs232cmd.c 4264                                       else
                      15153 ; rs232cmd.c 4265                                       {
                      15154 ; rs232cmd.c 4266                                               strncpy( Calibration.Type, Type, 
                            32);
003BD6 9918rrrr       15156         MOV.W   R1,#SEG( _Calibration+33 )
003BDA 9908rrrr       15157         MOV.W   R0,#SOF( _Calibration+33 )
003BDE 99680020       15158         MOV.W   R6,#020H
003BE2 8935           15159         MOV.W   R3,R5
003BE4 8924           15160         MOV.W   R2,R4
                      15161         CALL    _strncpy
003BE6 C4rrrrrr       +15161 ;       FCALL   _strncpy
                      15162 ; rs232cmd.c 4267       
                      15163 ; rs232cmd.c 4268                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003BEA 9918rrrr       15165         MOV.W   R1,#SEG( _Calibration )
003BEE 9908rrrr       15166         MOV.W   R0,#SOF( _Calibration )
003BF2 964842rr       15167         MOV.B   ES,#SEG( _CalibrationPtr )
003BF6 9928rrrr       15168         MOV.W   R2,#SOF( _CalibrationPtr )
003BFA 8A22           15169         MOV.W   R2,[R2]
003BFC 993800E0       15170         MOV.W   R3,#0E0H
                      15171         CALL    _NV_Store
003C00 C4rrrrrr       +15171 ;       FCALL   _NV_Store
                      15172 ; rs232cmd.c 4269                                       }
                      15173 ; rs232cmd.c 4270                               }
                      15174 ; rs232cmd.c 4271                       }
                      15175 ; rs232cmd.c 4272               }
003C04                15177 _1072:
                      15178 ; rs232cmd.c 4273       }
003C04 99700022       15180         ADD.W   R7,#022H
003C08 2F70           15182         POP.W   R4, R5, R6
003C0A D680           15184         RET
                      15186 ; rs232cmd.c 4274       
                      15187 ; rs232cmd.c 4275       /************************************************************************
                            **/
                      15188 ; rs232cmd.c 4276       /* FactMainIDNNumber                                                     
                                                                                                                         RS23
                            2CMD.C  */
                      15189 ; rs232cmd.c 4277       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15190 ; rs232cmd.c 4278       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15191 ; rs232cmd.c 4279       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      15192 ; rs232cmd.c 4280       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15193 ; rs232cmd.c 4281       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15194 ; rs232cmd.c 4282       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15195 ; rs232cmd.c 4283       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 248

ADDR   CODE            LINE SOURCELINE
                      15196 ; rs232cmd.c 4284       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15197 ; rs232cmd.c 4285       /************************************************************************
                            **/
                      15198 ; rs232cmd.c 4286       void FactMainIDNKUNumber( void)
                      15199 ; rs232cmd.c 4287       {
                      15200         ALIGN   1
                      15202         PUBLIC  _FactMainIDNKUNumber
003C0C                15203 _FactMainIDNKUNumber:
003C0C 0F70           15207         PUSH.W  R4, R5, R6
003C0E 9972000A       15209         SUB.W   R7,#0AH
                      15213 ; rs232cmd.c 4288               char KUNumber[9];
                      15214 ; rs232cmd.c 4289       
                      15215 ; rs232cmd.c 4290               if ( CmdExecute && !SCPIError)
003C12 964842rr       15217         MOV.B   ES,#SEG( _CmdExecute )
003C16 9908rrrr       15218         MOV.W   R0,#SOF( _CmdExecute )
003C1A 8200           15219         MOV.B   R0L,[R0]
003C1C F364           15220         BEQ     _1085
003C1E 964842rr       15221         MOV.B   ES,#SEG( _SCPIError )
003C22 9908rrrr       15222         MOV.W   R0,#SOF( _SCPIError )
003C26 8A00           15223         MOV.W   R0,[R0]
003C28 F25E           15224         BNE     _1085
                      15225 ; rs232cmd.c 4291               {
                      15226 ; rs232cmd.c 4292                       if ( CmdRequest)
003C2A 964842rr       15228         MOV.B   ES,#SEG( _CmdRequest )
003C2E 9908rrrr       15229         MOV.W   R0,#SOF( _CmdRequest )
003C32 8200           15230         MOV.B   R0L,[R0]
003C34 F317           15231         BEQ     _1077
                      15232 ; rs232cmd.c 4293                       {
                      15233 ; rs232cmd.c 4294                               if ( ParCnt)
003C36 964842rr       15235         MOV.B   ES,#SEG( _ParCnt )
003C3A 9908rrrr       15236         MOV.W   R0,#SOF( _ParCnt )
003C3E 8200           15237         MOV.B   R0L,[R0]
003C40 F306           15238         BEQ     _1076
                      15239 ; rs232cmd.c 4295                                       SCPIError = SyntaxErr;
003C42 964842rr       15241         MOV.B   ES,#SEG( _SCPIError )
003C46 9908rrrr       15242         MOV.W   R0,#SOF( _SCPIError )
003C4A BA03           15243         MOV.W   [R0],#03H
003C4C FE4C           15244         BR      _1085
003C4C FE4C           15244         BR      _1085
003C4E                15245 _1076:
                      15246 ; rs232cmd.c 4296                               else
                      15247 ; rs232cmd.c 4297                               {
                      15248 ; rs232cmd.c 4298                                       rs232puts( Calibration.KUNumber);
003C4E 9918rrrr       15250         MOV.W   R1,#SEG( _Calibration+66 )
003C52 9908rrrr       15251         MOV.W   R0,#SOF( _Calibration+66 )
                      15252         CALL    _rs232puts
003C56 C4rrrrrr       +15252 ;       FCALL   _rs232puts
                      15253 ; rs232cmd.c 4299                                       rs232putchar( '\n');
003C5A 91080A         15255         MOV.B   R0L,#0AH
                      15256         CALL    _rs232putchar
003C5D C4rrrrrr       +15256 ;       FCALL   _rs232putchar
                      15257 ; rs232cmd.c 4300                               }
                      15258 ; rs232cmd.c 4301                       }
003C61 FE42           15260         BR      _1085
003C61 FE4200         15260         BR      _1085
003C64                15261 _1077:
                      15262 ; rs232cmd.c 4302                       else
                      15263 ; rs232cmd.c 4303                       {
                      15264 ; rs232cmd.c 4304                               if ( !PasswordProtected)
003C64 964842rr       15266         MOV.B   ES,#SEG( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 249

ADDR   CODE            LINE SOURCELINE
003C68 9908rrrr       15267         MOV.W   R0,#SOF( _PasswordProtected )
003C6C 8A00           15268         MOV.W   R0,[R0]
003C6E F23B           15269         BNE     _1085
                      15270 ; rs232cmd.c 4305                               {
                      15271 ; rs232cmd.c 4306                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%8s
                            ", KUNumber) != 1))
003C70 964842rr       15273         MOV.B   ES,#SEG( _ParCnt )
003C74 9908rrrr       15274         MOV.W   R0,#SOF( _ParCnt )
003C78 8200           15275         MOV.B   R0L,[R0]
003C7A 910401         15276         CMP.B   R0L,#01H
003C7D F217           15277         BNE     _1078
003C7F 9918rrrr       15278         MOV.W   R1,#SEG( _Cmd )
003C83 9908rrrr       15279         MOV.W   R0,#SOF( _Cmd )
003C87 91A8rr         15280         MOV.B   R5L,#SEG( __lc_bs )
003C8A 71BB           15281         XOR.B   R5H,R5H
003C8C 8947           15282         MOV.W   R4,R7
003C8E 8935           15283         MOV.W   R3,R5
003C90 8924           15284         MOV.W   R2,R4
003C92 0F0C           15285         PUSH.W  R2, R3
003C94 9938rrrr       15287         MOV.W   R3,#SEG( _1075 )
003C98 9928rrrr       15288         MOV.W   R2,#SOF( _1075 )
003C9C 0F0C           15289         PUSH.W  R2, R3
                      15291         CALL    _sscanf
003C9E C4rrrrrr       +15291 ;       FCALL   _sscanf
003CA2 99700008       15292         ADD.W   R7,#08H
003CA6 99040001       15294         CMP.W   R0,#01H
003CAA F306           15295         BEQ     _1079
003CAA F306           15295         BEQ     _1079
003CAC                15296 _1078:
                      15297 ; rs232cmd.c 4307                                               SCPIError = SyntaxErr;
003CAC 964842rr       15299         MOV.B   ES,#SEG( _SCPIError )
003CB0 9908rrrr       15300         MOV.W   R0,#SOF( _SCPIError )
003CB4 BA03           15301         MOV.W   [R0],#03H
003CB6 FE17           15302         BR      _1085
003CB6 FE17           15302         BR      _1085
003CB8                15303 _1079:
                      15304 ; rs232cmd.c 4308                                       else
                      15305 ; rs232cmd.c 4309                                       {
                      15306 ; rs232cmd.c 4310                                               strncpy( Calibration.KUNumber, KU
                            Number, 9);
003CB8 9918rrrr       15308         MOV.W   R1,#SEG( _Calibration+66 )
003CBC 9908rrrr       15309         MOV.W   R0,#SOF( _Calibration+66 )
003CC0 99680009       15310         MOV.W   R6,#09H
003CC4 8935           15311         MOV.W   R3,R5
003CC6 8924           15312         MOV.W   R2,R4
                      15313         CALL    _strncpy
003CC8 C4rrrrrr       +15313 ;       FCALL   _strncpy
                      15314 ; rs232cmd.c 4311       
                      15315 ; rs232cmd.c 4312                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003CCC 9918rrrr       15317         MOV.W   R1,#SEG( _Calibration )
003CD0 9908rrrr       15318         MOV.W   R0,#SOF( _Calibration )
003CD4 964842rr       15319         MOV.B   ES,#SEG( _CalibrationPtr )
003CD8 9928rrrr       15320         MOV.W   R2,#SOF( _CalibrationPtr )
003CDC 8A22           15321         MOV.W   R2,[R2]
003CDE 993800E0       15322         MOV.W   R3,#0E0H
                      15323         CALL    _NV_Store
003CE2 C4rrrrrr       +15323 ;       FCALL   _NV_Store
                      15324 ; rs232cmd.c 4313                                       }
                      15325 ; rs232cmd.c 4314                               }
                      15326 ; rs232cmd.c 4315                       }
                      15327 ; rs232cmd.c 4316               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 250

ADDR   CODE            LINE SOURCELINE
003CE6                15329 _1085:
                      15330 ; rs232cmd.c 4317       }
003CE6 9970000A       15332         ADD.W   R7,#0AH
003CEA 2F70           15334         POP.W   R4, R5, R6
003CEC D680           15336         RET
                      15338 ; rs232cmd.c 4318       
                      15339 ; rs232cmd.c 4319       /************************************************************************
                            **/
                      15340 ; rs232cmd.c 4320       /* FactMainIDNSWRevision                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      15341 ; rs232cmd.c 4321       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15342 ; rs232cmd.c 4322       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15343 ; rs232cmd.c 4323       /* Revised:       000616                                                 
                                                                                                                             
                                                                                    */
                      15344 ; rs232cmd.c 4324       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15345 ; rs232cmd.c 4325       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15346 ; rs232cmd.c 4326       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15347 ; rs232cmd.c 4327       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15348 ; rs232cmd.c 4328       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15349 ; rs232cmd.c 4329       /************************************************************************
                            **/
                      15350 ; rs232cmd.c 4330       void FactMainIDNSWRevision( void)
                      15351 ; rs232cmd.c 4331       {
                      15352         ALIGN   1
                      15354         PUBLIC  _FactMainIDNSWRevision
003CEE                15355 _FactMainIDNSWRevision:
003CEE 0F70           15359         PUSH.W  R4, R5, R6
003CF0 9972000A       15361         SUB.W   R7,#0AH
                      15364 ; rs232cmd.c 4332               char SWRevision[9];
                      15365 ; rs232cmd.c 4333       
                      15366 ; rs232cmd.c 4334               if ( CmdExecute && !SCPIError)
003CF4 964842rr       15368         MOV.B   ES,#SEG( _CmdExecute )
003CF8 9908rrrr       15369         MOV.W   R0,#SOF( _CmdExecute )
003CFC 8200           15370         MOV.B   R0L,[R0]
003CFE F364           15371         BEQ     _1097
003D00 964842rr       15372         MOV.B   ES,#SEG( _SCPIError )
003D04 9908rrrr       15373         MOV.W   R0,#SOF( _SCPIError )
003D08 8A00           15374         MOV.W   R0,[R0]
003D0A F25E           15375         BNE     _1097
                      15376 ; rs232cmd.c 4335               {
                      15377 ; rs232cmd.c 4336                       if ( CmdRequest)
003D0C 964842rr       15379         MOV.B   ES,#SEG( _CmdRequest )
003D10 9908rrrr       15380         MOV.W   R0,#SOF( _CmdRequest )
003D14 8200           15381         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 251

ADDR   CODE            LINE SOURCELINE
003D16 F317           15382         BEQ     _1089
                      15383 ; rs232cmd.c 4337                       {
                      15384 ; rs232cmd.c 4338                               if ( ParCnt)
003D18 964842rr       15386         MOV.B   ES,#SEG( _ParCnt )
003D1C 9908rrrr       15387         MOV.W   R0,#SOF( _ParCnt )
003D20 8200           15388         MOV.B   R0L,[R0]
003D22 F306           15389         BEQ     _1088
                      15390 ; rs232cmd.c 4339                                       SCPIError = SyntaxErr;
003D24 964842rr       15392         MOV.B   ES,#SEG( _SCPIError )
003D28 9908rrrr       15393         MOV.W   R0,#SOF( _SCPIError )
003D2C BA03           15394         MOV.W   [R0],#03H
003D2E FE4C           15395         BR      _1097
003D2E FE4C           15395         BR      _1097
003D30                15396 _1088:
                      15397 ; rs232cmd.c 4340                               else
                      15398 ; rs232cmd.c 4341                               {
                      15399 ; rs232cmd.c 4342                                       rs232puts( Calibration.SWRevision);
003D30 9918rrrr       15401         MOV.W   R1,#SEG( _Calibration+75 )
003D34 9908rrrr       15402         MOV.W   R0,#SOF( _Calibration+75 )
                      15403         CALL    _rs232puts
003D38 C4rrrrrr       +15403 ;       FCALL   _rs232puts
                      15404 ; rs232cmd.c 4343                                       rs232putchar( '\n');
003D3C 91080A         15406         MOV.B   R0L,#0AH
                      15407         CALL    _rs232putchar
003D3F C4rrrrrr       +15407 ;       FCALL   _rs232putchar
                      15408 ; rs232cmd.c 4344                               }
                      15409 ; rs232cmd.c 4345                       }
003D43 FE42           15411         BR      _1097
003D43 FE4200         15411         BR      _1097
003D46                15412 _1089:
                      15413 ; rs232cmd.c 4346                       else
                      15414 ; rs232cmd.c 4347                       {
                      15415 ; rs232cmd.c 4348                               if ( !PasswordProtected)
003D46 964842rr       15417         MOV.B   ES,#SEG( _PasswordProtected )
003D4A 9908rrrr       15418         MOV.W   R0,#SOF( _PasswordProtected )
003D4E 8A00           15419         MOV.W   R0,[R0]
003D50 F23B           15420         BNE     _1097
                      15421 ; rs232cmd.c 4349                               {
                      15422 ; rs232cmd.c 4350                                       if (( ParCnt != 1) || ( sscanf( Cmd, "%8s
                            ", SWRevision) != 1))
003D52 964842rr       15424         MOV.B   ES,#SEG( _ParCnt )
003D56 9908rrrr       15425         MOV.W   R0,#SOF( _ParCnt )
003D5A 8200           15426         MOV.B   R0L,[R0]
003D5C 910401         15427         CMP.B   R0L,#01H
003D5F F217           15428         BNE     _1090
003D61 9918rrrr       15429         MOV.W   R1,#SEG( _Cmd )
003D65 9908rrrr       15430         MOV.W   R0,#SOF( _Cmd )
003D69 91A8rr         15431         MOV.B   R5L,#SEG( __lc_bs )
003D6C 71BB           15432         XOR.B   R5H,R5H
003D6E 8947           15433         MOV.W   R4,R7
003D70 8935           15434         MOV.W   R3,R5
003D72 8924           15435         MOV.W   R2,R4
003D74 0F0C           15436         PUSH.W  R2, R3
003D76 9938rrrr       15438         MOV.W   R3,#SEG( _1075 )
003D7A 9928rrrr       15439         MOV.W   R2,#SOF( _1075 )
003D7E 0F0C           15440         PUSH.W  R2, R3
                      15442         CALL    _sscanf
003D80 C4rrrrrr       +15442 ;       FCALL   _sscanf
003D84 99700008       15443         ADD.W   R7,#08H
003D88 99040001       15445         CMP.W   R0,#01H
003D8C F306           15446         BEQ     _1091
003D8C F306           15446         BEQ     _1091
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 252

ADDR   CODE            LINE SOURCELINE
003D8E                15447 _1090:
                      15448 ; rs232cmd.c 4351                                               SCPIError = SyntaxErr;
003D8E 964842rr       15450         MOV.B   ES,#SEG( _SCPIError )
003D92 9908rrrr       15451         MOV.W   R0,#SOF( _SCPIError )
003D96 BA03           15452         MOV.W   [R0],#03H
003D98 FE17           15453         BR      _1097
003D98 FE17           15453         BR      _1097
003D9A                15454 _1091:
                      15455 ; rs232cmd.c 4352                                       else
                      15456 ; rs232cmd.c 4353                                       {
                      15457 ; rs232cmd.c 4354                                               strncpy( Calibration.SWRevision, 
                            SWRevision, 8);
003D9A 9918rrrr       15459         MOV.W   R1,#SEG( _Calibration+75 )
003D9E 9908rrrr       15460         MOV.W   R0,#SOF( _Calibration+75 )
003DA2 99680008       15461         MOV.W   R6,#08H
003DA6 8935           15462         MOV.W   R3,R5
003DA8 8924           15463         MOV.W   R2,R4
                      15464         CALL    _strncpy
003DAA C4rrrrrr       +15464 ;       FCALL   _strncpy
                      15465 ; rs232cmd.c 4355       
                      15466 ; rs232cmd.c 4356                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
003DAE 9918rrrr       15468         MOV.W   R1,#SEG( _Calibration )
003DB2 9908rrrr       15469         MOV.W   R0,#SOF( _Calibration )
003DB6 964842rr       15470         MOV.B   ES,#SEG( _CalibrationPtr )
003DBA 9928rrrr       15471         MOV.W   R2,#SOF( _CalibrationPtr )
003DBE 8A22           15472         MOV.W   R2,[R2]
003DC0 993800E0       15473         MOV.W   R3,#0E0H
                      15474         CALL    _NV_Store
003DC4 C4rrrrrr       +15474 ;       FCALL   _NV_Store
                      15475 ; rs232cmd.c 4357                                       }
                      15476 ; rs232cmd.c 4358                               }
                      15477 ; rs232cmd.c 4359                       }
                      15478 ; rs232cmd.c 4360               }
003DC8                15480 _1097:
                      15481 ; rs232cmd.c 4361       }
003DC8 9970000A       15483         ADD.W   R7,#0AH
003DCC 2F70           15485         POP.W   R4, R5, R6
003DCE D680           15487         RET
                      15489 ; rs232cmd.c 4362       
                      15490 ; rs232cmd.c 4363       /************************************************************************
                            **/
                      15491 ; rs232cmd.c 4364       /* FactMainSystem                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      15492 ; rs232cmd.c 4365       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15493 ; rs232cmd.c 4366       /* Author:              Kim Engedahl, DEV, 000617                        
                                                                                                                             
                                    */
                      15494 ; rs232cmd.c 4367       /* Revised:       000617                                                 
                                                                                                                             
                                                                                    */
                      15495 ; rs232cmd.c 4368       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15496 ; rs232cmd.c 4369       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 253

ADDR   CODE            LINE SOURCELINE
                      15497 ; rs232cmd.c 4370       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15498 ; rs232cmd.c 4371       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15499 ; rs232cmd.c 4372       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15500 ; rs232cmd.c 4373       /************************************************************************
                            **/
                      15501 ; rs232cmd.c 4374       void FactMainSystem( void)
                      15502 ; rs232cmd.c 4375       {
                      15503         ALIGN   1
                      15505         PUBLIC  _FactMainSystem
003DD0                15506 _FactMainSystem:
003DD0 0F30           15510         PUSH.W  R4, R5
                      15516 ; rs232cmd.c 4376               int system;
                      15517 ; rs232cmd.c 4377               char code *str;
                      15518 ; rs232cmd.c 4378       
                      15519 ; rs232cmd.c 4379               if ( CmdExecute && !SCPIError)
003DD2 964842rr       15521         MOV.B   ES,#SEG( _CmdExecute )
003DD6 9908rrrr       15522         MOV.W   R0,#SOF( _CmdExecute )
003DDA 8200           15523         MOV.B   R0L,[R0]
                      15524         BEQ     _1113
003DDC F202           +15524 ;       BNE     _LG_1046
003DDE D5008C         +15524 ;       JMP.L   _1113
003DE2 D5008C00       +15524 ;       JMP.L   _1113
003DE2                +15524 _LG_1046:
003DE2 964842rr       15525         MOV.B   ES,#SEG( _SCPIError )
003DE6 9908rrrr       15526         MOV.W   R0,#SOF( _SCPIError )
003DEA 8A00           15527         MOV.W   R0,[R0]
                      15528         BNE     _1113
003DEC F302           +15528 ;       BEQ     _LG_1048
003DEE D50084         +15528 ;       JMP.L   _1113
003DF2 D5008400       +15528 ;       JMP.L   _1113
003DF2                +15528 _LG_1048:
                      15529 ; rs232cmd.c 4380               {
                      15530 ; rs232cmd.c 4381                       if ( CmdRequest)
003DF2 964842rr       15532         MOV.B   ES,#SEG( _CmdRequest )
003DF6 9908rrrr       15533         MOV.W   R0,#SOF( _CmdRequest )
003DFA 8200           15534         MOV.B   R0L,[R0]
003DFC F33F           15535         BEQ     _1103
                      15536 ; rs232cmd.c 4382                       {
                      15537 ; rs232cmd.c 4383                               if ( ParCnt)
003DFE 964842rr       15539         MOV.B   ES,#SEG( _ParCnt )
003E02 9908rrrr       15540         MOV.W   R0,#SOF( _ParCnt )
003E06 8200           15541         MOV.B   R0L,[R0]
003E08 F306           15542         BEQ     _1100
                      15543 ; rs232cmd.c 4384                                       SCPIError = ParNotAllowed;
003E0A 964842rr       15545         MOV.B   ES,#SEG( _SCPIError )
003E0E 9908rrrr       15546         MOV.W   R0,#SOF( _SCPIError )
003E12 BA06           15547         MOV.W   [R0],#06H
003E14 FE71           15548         BR      _1113
003E14 FE71           15548         BR      _1113
003E16                15549 _1100:
                      15550 ; rs232cmd.c 4385                               else
                      15551 ; rs232cmd.c 4386                               {
                      15552 ; rs232cmd.c 4387                                       str = SystemPar[Calibration.ResetSystem].
                            LongName;
003E16 964842rr       15554         MOV.B   ES,#SEG( _Calibration+97 )
003E1A 9908rrrr       15555         MOV.W   R0,#SOF( _Calibration+97 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 254

ADDR   CODE            LINE SOURCELINE
003E1E 8200           15556         MOV.B   R0L,[R0]
003E20 E8000C         15557         MULU.B  R0L,#0CH
003E23 8920           15558         MOV.W   R2,R0
003E25 B930           15559         MOVS.W  R3,#00H
003E27 9918rrrr       15560         MOV.W   R1,#SEG( _SystemPar )
003E2B 9908rrrr       15561         MOV.W   R0,#SOF( _SystemPar )
003E2F 0902           15562         ADD.W   R0,R2
003E31 1913           15563         ADDC.W  R1,R3
003E33 862C43         15564         MOV.B   CS,R1L
003E36 8820           15565         MOVC.W  R2,[R0+]
003E38 99040000       15566         CMP.W   R0,#00H
003E3C F202           15567         BNE     _1114
003E3E A64143         15568         ADDS.B  CS,#01H
003E3E A6414300       15568         ADDS.B  CS,#01H
003E42                15569 _1114:
003E42 8830           15570         MOVC.W  R3,[R0+]
003E44 8953           15571         MOV.W   R5,R3
003E46 8942           15572         MOV.W   R4,R2
                      15574 ; rs232cmd.c 4388       
                      15575 ; rs232cmd.c 4389                                       while ( *str)
003E48 866C43         15577         MOV.B   CS,R3L
003E4B 8062           15578         MOVC.B  R3L,[R2+]
003E4D F312           15579         BEQ     _1102
003E4D F31200         15579         BEQ     _1102
003E50                15580 _1101:
                      15581 ; rs232cmd.c 4390                                               rs232putchar( *str++);
003E50 8915           15583         MOV.W   R1,R5
003E52 8904           15584         MOV.W   R0,R4
003E54 862C43         15585         MOV.B   CS,R1L
003E57 8020           15586         MOVC.B  R1L,[R0+]
003E59 8102           15587         MOV.B   R0L,R1L
                      15588         CALL    _rs232putchar
003E5B C4rrrrrr       +15588 ;       FCALL   _rs232putchar
003E5F 99400001       15589         ADD.W   R4,#01H
003E63 99510000       15590         ADDC.W  R5,#00H
003E67 8915           15594         MOV.W   R1,R5
003E69 8904           15595         MOV.W   R0,R4
003E6B 862C43         15596         MOV.B   CS,R1L
003E6E 8020           15597         MOVC.B  R1L,[R0+]
003E70 F2EF           15598         BNE     _1101
003E72                15600 _1102:
                      15601 ; rs232cmd.c 4391       
                      15602 ; rs232cmd.c 4392                                       rs232putchar('\n');
003E72 91080A         15604         MOV.B   R0L,#0AH
                      15605         CALL    _rs232putchar
003E75 C4rrrrrr       +15605 ;       FCALL   _rs232putchar
                      15606 ; rs232cmd.c 4393                               }
                      15607 ; rs232cmd.c 4394                       }
003E79 FE3F           15609         BR      _1113
003E79 FE3F00         15609         BR      _1113
003E7C                15610 _1103:
                      15611 ; rs232cmd.c 4395                       else
                      15612 ; rs232cmd.c 4396                       {
                      15613 ; rs232cmd.c 4397                               if ( ParCnt != 1)
003E7C 964842rr       15615         MOV.B   ES,#SEG( _ParCnt )
003E80 9908rrrr       15616         MOV.W   R0,#SOF( _ParCnt )
003E84 8200           15617         MOV.B   R0L,[R0]
003E86 910401         15618         CMP.B   R0L,#01H
003E89 F307           15619         BEQ     _1104
                      15620 ; rs232cmd.c 4398                                       SCPIError = SyntaxErr;
003E8B 964842rr       15622         MOV.B   ES,#SEG( _SCPIError )
003E8F 9908rrrr       15623         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 255

ADDR   CODE            LINE SOURCELINE
003E93 BA03           15624         MOV.W   [R0],#03H
003E95 FE31           15625         BR      _1113
003E95 FE3100         15625         BR      _1113
003E98                15626 _1104:
                      15627 ; rs232cmd.c 4399                               else
                      15628 ; rs232cmd.c 4400                               {
                      15629 ; rs232cmd.c 4401                                       system = FindParameter( Cmd, SystemPar);
003E98 9918rrrr       15631         MOV.W   R1,#SEG( _Cmd )
003E9C 9908rrrr       15632         MOV.W   R0,#SOF( _Cmd )
003EA0 9938rrrr       15633         MOV.W   R3,#SEG( _SystemPar )
003EA4 9928rrrr       15634         MOV.W   R2,#SOF( _SystemPar )
003EA8 C5107B         15635         CALL    _FindParameter
                      15637 ; rs232cmd.c 4402       
                      15638 ; rs232cmd.c 4403                                       if ( system == PAL_PALID)                
                                                            // If line7, (PAL w/ID), ever should
003EAB 99040001       15640         CMP.W   R0,#01H
003EAF F208           15641         BNE     _1105
                      15642 ; rs232cmd.c 4404                                               SCPIError = DataOutOfRange;      
                                                    //  be supported remove this exception
003EB1 964842rr       15644         MOV.B   ES,#SEG( _SCPIError )
003EB5 9908rrrr       15645         MOV.W   R0,#SOF( _SCPIError )
003EB9 9A080021       15646         MOV.W   [R0],#021H
003EBD FE1D           15647         BR      _1113
003EBD FE1D00         15647         BR      _1113
003EC0                15648 _1105:
                      15650 ; rs232cmd.c 4405                                       else                                     
                                    
                      15651 ; rs232cmd.c 4406                                       {       
                      15652 ; rs232cmd.c 4407                                               if ( system > -1)
003EC0 9904FFFF       15654         CMP.W   R0,#0FFFFH
003EC4 FD13           15655         BLE     _1106
                      15656 ; rs232cmd.c 4408                                               {
                      15657 ; rs232cmd.c 4409                                                       Calibration.ResetSystem =
                             system;
003EC6 964842rr       15659         MOV.B   ES,#SEG( _Calibration+97 )
003ECA 9918rrrr       15660         MOV.W   R1,#SOF( _Calibration+97 )
003ECE 8209           15661         MOV.B   [R1],R0L
                      15662 ; rs232cmd.c 4410       
                      15663 ; rs232cmd.c 4411                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
003ED0 9918rrrr       15665         MOV.W   R1,#SEG( _Calibration )
003ED4 9908rrrr       15666         MOV.W   R0,#SOF( _Calibration )
003ED8 964842rr       15667         MOV.B   ES,#SEG( _CalibrationPtr )
003EDC 9928rrrr       15668         MOV.W   R2,#SOF( _CalibrationPtr )
003EE0 8A22           15669         MOV.W   R2,[R2]
003EE2 993800E0       15670         MOV.W   R3,#0E0H
                      15671         CALL    _NV_Store
003EE6 C4rrrrrr       +15671 ;       FCALL   _NV_Store
                      15672 ; rs232cmd.c 4412                                               }
003EEA FE06           15674         BR      _1113
003EEA FE06           15674         BR      _1113
003EEC                15675 _1106:
                      15676 ; rs232cmd.c 4413                                               else
                      15677 ; rs232cmd.c 4414                                                       SCPIError = DataOutOfRang
                            e;
003EEC 964842rr       15679         MOV.B   ES,#SEG( _SCPIError )
003EF0 9908rrrr       15680         MOV.W   R0,#SOF( _SCPIError )
003EF4 9A080021       15681         MOV.W   [R0],#021H
                      15682 ; rs232cmd.c 4415                                       }
                      15683 ; rs232cmd.c 4416                               }
                      15684 ; rs232cmd.c 4417                       }
                      15685 ; rs232cmd.c 4418               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 256

ADDR   CODE            LINE SOURCELINE
003EF8                15687 _1113:
                      15688 ; rs232cmd.c 4419       }
003EF8 2F30           15690         POP.W   R4, R5
003EFA D680           15692         RET
                      15695 ; rs232cmd.c 4420       
                      15696 ; rs232cmd.c 4421       /************************************************************************
                            **/
                      15697 ; rs232cmd.c 4422       /* FactMainFMSDateProd                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      15698 ; rs232cmd.c 4423       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15699 ; rs232cmd.c 4424       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15700 ; rs232cmd.c 4425       /* Revised:       0006014                                                
                                                                                                                             
                                                                                    */
                      15701 ; rs232cmd.c 4426       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15702 ; rs232cmd.c 4427       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15703 ; rs232cmd.c 4428       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15704 ; rs232cmd.c 4429       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15705 ; rs232cmd.c 4430       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15706 ; rs232cmd.c 4431       /************************************************************************
                            **/
                      15707 ; rs232cmd.c 4432       void FactMainFMSDateProd( void)
                      15708 ; rs232cmd.c 4433       {
                      15709         ALIGN   1
                      15711         PUBLIC  _FactMainFMSDateProd
003EFC                15712 _FactMainFMSDateProd:
003EFC 0F30           15716         PUSH.W  R4, R5
003EFE 9972001A       15718         SUB.W   R7,#01AH
                      15724 ; rs232cmd.c 4434               UI year, month, day;
                      15725 ; rs232cmd.c 4435               char buffer[20];
                      15726 ; rs232cmd.c 4436       
                      15727 ; rs232cmd.c 4437               if ( CmdExecute && !SCPIError)
003F02 964842rr       15729         MOV.B   ES,#SEG( _CmdExecute )
003F06 9908rrrr       15730         MOV.W   R0,#SOF( _CmdExecute )
003F0A 8200           15731         MOV.B   R0L,[R0]
                      15732         BEQ     _1130
003F0C F202           +15732 ;       BNE     _LG_1066
003F0E D500C7         +15732 ;       JMP.L   _1130
003F12 D500C700       +15732 ;       JMP.L   _1130
003F12                +15732 _LG_1066:
003F12 964842rr       15733         MOV.B   ES,#SEG( _SCPIError )
003F16 9908rrrr       15734         MOV.W   R0,#SOF( _SCPIError )
003F1A 8A00           15735         MOV.W   R0,[R0]
                      15736         BNE     _1130
003F1C F302           +15736 ;       BEQ     _LG_1068
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 257

ADDR   CODE            LINE SOURCELINE
003F1E D500BF         +15736 ;       JMP.L   _1130
003F22 D500BF00       +15736 ;       JMP.L   _1130
003F22                +15736 _LG_1068:
                      15737 ; rs232cmd.c 4438               {
                      15738 ; rs232cmd.c 4439                       if ( CmdRequest)
003F22 964842rr       15740         MOV.B   ES,#SEG( _CmdRequest )
003F26 9908rrrr       15741         MOV.W   R0,#SOF( _CmdRequest )
003F2A 8200           15742         MOV.B   R0L,[R0]
003F2C F35A           15743         BEQ     _1120
                      15744 ; rs232cmd.c 4440                       {
                      15745 ; rs232cmd.c 4441                               if ( ParCnt)
003F2E 964842rr       15747         MOV.B   ES,#SEG( _ParCnt )
003F32 9908rrrr       15748         MOV.W   R0,#SOF( _ParCnt )
003F36 8200           15749         MOV.B   R0L,[R0]
003F38 F307           15750         BEQ     _1119
                      15751 ; rs232cmd.c 4442                                       SCPIError = SyntaxErr;
003F3A 964842rr       15753         MOV.B   ES,#SEG( _SCPIError )
003F3E 9908rrrr       15754         MOV.W   R0,#SOF( _SCPIError )
003F42 BA03           15755         MOV.W   [R0],#03H
                      15756         BR      _1130
003F44 D500AC         +15756         JMP.L   _1130
003F44 D500AC00       +15756         JMP.L   _1130
003F48                15757 _1119:
                      15758 ; rs232cmd.c 4443                               else
                      15759 ; rs232cmd.c 4444                               {
                      15760 ; rs232cmd.c 4445                                       day = Calibration.ProdDate % 100;
003F48 964842rr       15762         MOV.B   ES,#SEG( _Calibration+98 )
003F4C 9918rrrr       15763         MOV.W   R1,#SOF( _Calibration+98 )
003F50 8B01           15764         MOV.W   R0,[R1+]
003F52 8A11           15765         MOV.W   R1,[R1]
003F54 B930           15766         MOV.W   R3,#00H
003F56 99280064       15767         MOV.W   R2,#064H
003F5A 964842rr       15768         MOV.B   ES,#SEG( _Calibration+98 )
003F5E 9948rrrr       15769         MOV.W   R4,#SOF( _Calibration+98 )
003F62 8B0C           15770         MOV.W   [R4+],R0
003F64 8A1C           15771         MOV.W   [R4],R1
003F66 C4rrrrrr       15772         FCALL   __UMODL
003F6A 8C0F04         15773         MOV.W   [R7+4],R0
003F6D 964842rr       15774         MOV.B   ES,#SEG( _Calibration+98 )
003F71 9918rrrr       15775         MOV.W   R1,#SOF( _Calibration+98 )
003F75 8B01           15776         MOV.W   R0,[R1+]
003F77 8A11           15777         MOV.W   R1,[R1]
                      15778 ; rs232cmd.c 4446                                       month = ( Calibration.ProdDate / 100) % 1
                            00;
003F79 B930           15780         MOV.W   R3,#00H
003F7B 99280064       15781         MOV.W   R2,#064H
003F7F 8953           15782         MOV.W   R5,R3
003F81 8942           15783         MOV.W   R4,R2
003F83 C4rrrrrr       15784         FCALL   __UDIVL
003F87 8935           15785         MOV.W   R3,R5
003F89 8924           15786         MOV.W   R2,R4
003F8B C4rrrrrr       15787         FCALL   __UMODL
003F8F 8C0F02         15788         MOV.W   [R7+2],R0
                      15789 ; rs232cmd.c 4447                                       year = ( Calibration.ProdDate / 10000);
003F92 B930           15791         MOV.W   R3,#00H
003F94 99282710       15792         MOV.W   R2,#02710H
003F98 964842rr       15793         MOV.B   ES,#SEG( _Calibration+98 )
003F9C 9918rrrr       15794         MOV.W   R1,#SOF( _Calibration+98 )
003FA0 8B01           15795         MOV.W   R0,[R1+]
003FA2 8A11           15796         MOV.W   R1,[R1]
003FA4 C4rrrrrr       15797         FCALL   __UDIVL
003FA8 8A0F           15798         MOV.W   [R7],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 258

ADDR   CODE            LINE SOURCELINE
                      15799 ; rs232cmd.c 4448       
                      15800 ; rs232cmd.c 4449                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
003FAA 91A8rr         15802         MOV.B   R5L,#SEG( __lc_bs )
003FAD 71BB           15803         XOR.B   R5H,R5H
003FAF 404706         15804         LEA     R4,R7+6
003FB2 8C0704         15805         MOV.W   R0,[R7+4]
003FB5 0F01           15806         PUSH.W  R0
003FB7 8C0704         15808         MOV.W   R0,[R7+4]
003FBA 0F01           15809         PUSH.W  R0
003FBC 8C0704         15811         MOV.W   R0,[R7+4]
003FBF 0F01           15812         PUSH.W  R0
003FC1 9918rrrr       15814         MOV.W   R1,#SEG( _183 )
003FC5 9908rrrr       15815         MOV.W   R0,#SOF( _183 )
003FC9 0F03           15816         PUSH.W  R0, R1
003FCB 8915           15818         MOV.W   R1,R5
003FCD 8904           15819         MOV.W   R0,R4
                      15820         CALL    _sprintf
003FCF C4rrrrrr       +15820 ;       FCALL   _sprintf
003FD3 9970000A       15821         ADD.W   R7,#0AH
                      15823 ; rs232cmd.c 4450       
                      15824 ; rs232cmd.c 4451                                       rs232puts( buffer);
003FD7 8915           15826         MOV.W   R1,R5
003FD9 8904           15827         MOV.W   R0,R4
                      15828         CALL    _rs232puts
003FDB C4rrrrrr       +15828 ;       FCALL   _rs232puts
                      15829 ; rs232cmd.c 4452                               }
                      15830 ; rs232cmd.c 4453                       }
003FDF FE5F           15832         BR      _1130
003FDF FE5F00         15832         BR      _1130
003FE2                15833 _1120:
                      15834 ; rs232cmd.c 4454                       else
                      15835 ; rs232cmd.c 4455                       {
                      15836 ; rs232cmd.c 4456                               if ( !PasswordProtected)
003FE2 964842rr       15838         MOV.B   ES,#SEG( _PasswordProtected )
003FE6 9908rrrr       15839         MOV.W   R0,#SOF( _PasswordProtected )
003FEA 8A00           15840         MOV.W   R0,[R0]
003FEC F258           15841         BNE     _1130
                      15842 ; rs232cmd.c 4457                               {
                      15843 ; rs232cmd.c 4458                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
003FEE 964842rr       15845         MOV.B   ES,#SEG( _ParCnt )
003FF2 9908rrrr       15846         MOV.W   R0,#SOF( _ParCnt )
003FF6 8200           15847         MOV.B   R0L,[R0]
003FF8 910403         15848         CMP.B   R0L,#03H
003FFB F21F           15849         BNE     _1121
003FFD 9168rr         15850         MOV.B   R3L,#SEG( __lc_bs )
004000 7177           15851         XOR.B   R3H,R3H
004002 8927           15852         MOV.W   R2,R7
004004 91A8rr         15853         MOV.B   R5L,#SEG( __lc_bs )
004007 71BB           15854         XOR.B   R5H,R5H
004009 404702         15855         LEA     R4,R7+2
00400C 9128rr         15856         MOV.B   R1L,#SEG( __lc_bs )
00400F 7133           15857         XOR.B   R1H,R1H
004011 400704         15858         LEA     R0,R7+4
004014 0F03           15859         PUSH.W  R0, R1
004016 0F30           15861         PUSH.W  R4, R5
004018 0F0C           15863         PUSH.W  R2, R3
00401A 9938rrrr       15865         MOV.W   R3,#SEG( _1118 )
00401E 9928rrrr       15866         MOV.W   R2,#SOF( _1118 )
004022 0F0C           15867         PUSH.W  R2, R3
004024 9918rrrr       15869         MOV.W   R1,#SEG( _Cmd )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 259

ADDR   CODE            LINE SOURCELINE
004028 9908rrrr       15870         MOV.W   R0,#SOF( _Cmd )
                      15871         CALL    _sscanf
00402C C4rrrrrr       +15871 ;       FCALL   _sscanf
004030 99700010       15872         ADD.W   R7,#010H
004034 99040003       15874         CMP.W   R0,#03H
004038 F306           15875         BEQ     _1122
004038 F306           15875         BEQ     _1122
00403A                15876 _1121:
                      15877 ; rs232cmd.c 4459                                               SCPIError = SyntaxErr;
00403A 964842rr       15879         MOV.B   ES,#SEG( _SCPIError )
00403E 9908rrrr       15880         MOV.W   R0,#SOF( _SCPIError )
004042 BA03           15881         MOV.W   [R0],#03H
004044 FE2C           15882         BR      _1130
004044 FE2C           15882         BR      _1130
004046                15883 _1122:
                      15884 ; rs232cmd.c 4460                                       else
                      15885 ; rs232cmd.c 4461                                       {
                      15886 ; rs232cmd.c 4462                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
004046 8A07           15888         MOV.W   R0,[R7]
004048 8C1702         15889         MOV.W   R1,[R7+2]
00404B 8C2704         15890         MOV.W   R2,[R7+4]
                      15891         CALL    _ValidateDate
00404E C4rrrrrr       +15891 ;       FCALL   _ValidateDate
004052 6900           15892         OR.W    R0,R0
004054 F207           15893         BNE     _1123
                      15894 ; rs232cmd.c 4463                                                       SCPIError = ExecErr;
004056 964842rr       15896         MOV.B   ES,#SEG( _SCPIError )
00405A 9908rrrr       15897         MOV.W   R0,#SOF( _SCPIError )
00405E 9A08001D       15898         MOV.W   [R0],#01DH
004062 FE1D           15899         BR      _1130
004062 FE1D           15899         BR      _1130
004064                15900 _1123:
                      15901 ; rs232cmd.c 4464                                               else
                      15902 ; rs232cmd.c 4465                                               {
                      15903 ; rs232cmd.c 4466                                                       Calibration.ProdDate = da
                            y + 100*month + 10000*year;
004064 8C0702         15905         MOV.W   R0,[R7+2]
004067 E9000064       15906         MULU.W  R0,#064H
00406B 0C0704         15907         ADD.W   R0,[R7+4]
00406E 8A27           15908         MOV.W   R2,[R7]
004070 E9202710       15909         MULU.W  R2,#02710H
004074 0902           15910         ADD.W   R0,R2
004076 B910           15911         MOVS.W  R1,#00H
004078 964842rr       15912         MOV.B   ES,#SEG( _Calibration+98 )
00407C 9928rrrr       15913         MOV.W   R2,#SOF( _Calibration+98 )
004080 8B0A           15914         MOV.W   [R2+],R0
004082 8A1A           15915         MOV.W   [R2],R1
                      15916 ; rs232cmd.c 4467                                               
                      15917 ; rs232cmd.c 4468                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
004084 9918rrrr       15919         MOV.W   R1,#SEG( _Calibration )
004088 9908rrrr       15920         MOV.W   R0,#SOF( _Calibration )
00408C 964842rr       15921         MOV.B   ES,#SEG( _CalibrationPtr )
004090 9928rrrr       15922         MOV.W   R2,#SOF( _CalibrationPtr )
004094 8A22           15923         MOV.W   R2,[R2]
004096 993800E0       15924         MOV.W   R3,#0E0H
                      15925         CALL    _NV_Store
00409A C4rrrrrr       +15925 ;       FCALL   _NV_Store
                      15926 ; rs232cmd.c 4469                                               }
                      15927 ; rs232cmd.c 4470                                       }                               
                      15928 ; rs232cmd.c 4471                               }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 260

ADDR   CODE            LINE SOURCELINE
                      15929 ; rs232cmd.c 4472                       }
                      15930 ; rs232cmd.c 4473               }
00409E                15932 _1130:
                      15933 ; rs232cmd.c 4474       }
00409E 9970001A       15935         ADD.W   R7,#01AH
0040A2 2F30           15937         POP.W   R4, R5
0040A4 D680           15939         RET
                      15941 ; rs232cmd.c 4475       
                      15942 ; rs232cmd.c 4476       /************************************************************************
                            **/
                      15943 ; rs232cmd.c 4477       /* FactMainFMSDateUpd                                                    
                                                                                                                             
                                RS232CMD.C  */
                      15944 ; rs232cmd.c 4478       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15945 ; rs232cmd.c 4479       /* Author:              Kim Engedahl, DEV, 000407                        
                                                                                                                             
                                    */
                      15946 ; rs232cmd.c 4480       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      15947 ; rs232cmd.c 4481       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      15948 ; rs232cmd.c 4482       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      15949 ; rs232cmd.c 4483       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      15950 ; rs232cmd.c 4484       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      15951 ; rs232cmd.c 4485       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      15952 ; rs232cmd.c 4486       /************************************************************************
                            **/
                      15953 ; rs232cmd.c 4487       void FactMainFMSDateUpd( void)
                      15954 ; rs232cmd.c 4488       {
                      15955         ALIGN   1
                      15957         PUBLIC  _FactMainFMSDateUpd
0040A6                15958 _FactMainFMSDateUpd:
0040A6 0F30           15962         PUSH.W  R4, R5
0040A8 9972001A       15964         SUB.W   R7,#01AH
                      15970 ; rs232cmd.c 4489               UI year, month, day;
                      15971 ; rs232cmd.c 4490               char buffer[20];
                      15972 ; rs232cmd.c 4491       
                      15973 ; rs232cmd.c 4492               if ( CmdExecute && !SCPIError)
0040AC 964842rr       15975         MOV.B   ES,#SEG( _CmdExecute )
0040B0 9908rrrr       15976         MOV.W   R0,#SOF( _CmdExecute )
0040B4 8200           15977         MOV.B   R0L,[R0]
                      15978         BEQ     _1144
0040B6 F202           +15978 ;       BNE     _LG_1082
0040B8 D500C7         +15978 ;       JMP.L   _1144
0040BC D500C700       +15978 ;       JMP.L   _1144
0040BC                +15978 _LG_1082:
0040BC 964842rr       15979         MOV.B   ES,#SEG( _SCPIError )
0040C0 9908rrrr       15980         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 261

ADDR   CODE            LINE SOURCELINE
0040C4 8A00           15981         MOV.W   R0,[R0]
                      15982         BNE     _1144
0040C6 F302           +15982 ;       BEQ     _LG_1084
0040C8 D500BF         +15982 ;       JMP.L   _1144
0040CC D500BF00       +15982 ;       JMP.L   _1144
0040CC                +15982 _LG_1084:
                      15983 ; rs232cmd.c 4493               {
                      15984 ; rs232cmd.c 4494                       if ( CmdRequest)
0040CC 964842rr       15986         MOV.B   ES,#SEG( _CmdRequest )
0040D0 9908rrrr       15987         MOV.W   R0,#SOF( _CmdRequest )
0040D4 8200           15988         MOV.B   R0L,[R0]
0040D6 F35A           15989         BEQ     _1134
                      15990 ; rs232cmd.c 4495                       {
                      15991 ; rs232cmd.c 4496                               if ( ParCnt)
0040D8 964842rr       15993         MOV.B   ES,#SEG( _ParCnt )
0040DC 9908rrrr       15994         MOV.W   R0,#SOF( _ParCnt )
0040E0 8200           15995         MOV.B   R0L,[R0]
0040E2 F307           15996         BEQ     _1133
                      15997 ; rs232cmd.c 4497                                       SCPIError = SyntaxErr;
0040E4 964842rr       15999         MOV.B   ES,#SEG( _SCPIError )
0040E8 9908rrrr       16000         MOV.W   R0,#SOF( _SCPIError )
0040EC BA03           16001         MOV.W   [R0],#03H
                      16002         BR      _1144
0040EE D500AC         +16002         JMP.L   _1144
0040EE D500AC00       +16002         JMP.L   _1144
0040F2                16003 _1133:
                      16004 ; rs232cmd.c 4498                               else
                      16005 ; rs232cmd.c 4499                               {
                      16006 ; rs232cmd.c 4500                                       day = Calibration.UpdateDate % 100;
0040F2 964842rr       16008         MOV.B   ES,#SEG( _Calibration+102 )
0040F6 9918rrrr       16009         MOV.W   R1,#SOF( _Calibration+102 )
0040FA 8B01           16010         MOV.W   R0,[R1+]
0040FC 8A11           16011         MOV.W   R1,[R1]
0040FE B930           16012         MOV.W   R3,#00H
004100 99280064       16013         MOV.W   R2,#064H
004104 964842rr       16014         MOV.B   ES,#SEG( _Calibration+102 )
004108 9948rrrr       16015         MOV.W   R4,#SOF( _Calibration+102 )
00410C 8B0C           16016         MOV.W   [R4+],R0
00410E 8A1C           16017         MOV.W   [R4],R1
004110 C4rrrrrr       16018         FCALL   __UMODL
004114 8C0F04         16019         MOV.W   [R7+4],R0
004117 964842rr       16020         MOV.B   ES,#SEG( _Calibration+102 )
00411B 9918rrrr       16021         MOV.W   R1,#SOF( _Calibration+102 )
00411F 8B01           16022         MOV.W   R0,[R1+]
004121 8A11           16023         MOV.W   R1,[R1]
                      16024 ; rs232cmd.c 4501                                       month = ( Calibration.UpdateDate / 100) %
                             100;
004123 B930           16026         MOV.W   R3,#00H
004125 99280064       16027         MOV.W   R2,#064H
004129 8953           16028         MOV.W   R5,R3
00412B 8942           16029         MOV.W   R4,R2
00412D C4rrrrrr       16030         FCALL   __UDIVL
004131 8935           16031         MOV.W   R3,R5
004133 8924           16032         MOV.W   R2,R4
004135 C4rrrrrr       16033         FCALL   __UMODL
004139 8C0F02         16034         MOV.W   [R7+2],R0
                      16035 ; rs232cmd.c 4502                                       year = ( Calibration.UpdateDate / 10000);
                            
00413C B930           16037         MOV.W   R3,#00H
00413E 99282710       16038         MOV.W   R2,#02710H
004142 964842rr       16039         MOV.B   ES,#SEG( _Calibration+102 )
004146 9918rrrr       16040         MOV.W   R1,#SOF( _Calibration+102 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 262

ADDR   CODE            LINE SOURCELINE
00414A 8B01           16041         MOV.W   R0,[R1+]
00414C 8A11           16042         MOV.W   R1,[R1]
00414E C4rrrrrr       16043         FCALL   __UDIVL
004152 8A0F           16044         MOV.W   [R7],R0
                      16045 ; rs232cmd.c 4503       
                      16046 ; rs232cmd.c 4504                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
004154 91A8rr         16048         MOV.B   R5L,#SEG( __lc_bs )
004157 71BB           16049         XOR.B   R5H,R5H
004159 404706         16050         LEA     R4,R7+6
00415C 8C0704         16051         MOV.W   R0,[R7+4]
00415F 0F01           16052         PUSH.W  R0
004161 8C0704         16054         MOV.W   R0,[R7+4]
004164 0F01           16055         PUSH.W  R0
004166 8C0704         16057         MOV.W   R0,[R7+4]
004169 0F01           16058         PUSH.W  R0
00416B 9918rrrr       16060         MOV.W   R1,#SEG( _183 )
00416F 9908rrrr       16061         MOV.W   R0,#SOF( _183 )
004173 0F03           16062         PUSH.W  R0, R1
004175 8915           16064         MOV.W   R1,R5
004177 8904           16065         MOV.W   R0,R4
                      16066         CALL    _sprintf
004179 C4rrrrrr       +16066 ;       FCALL   _sprintf
00417D 9970000A       16067         ADD.W   R7,#0AH
                      16069 ; rs232cmd.c 4505       
                      16070 ; rs232cmd.c 4506                                       rs232puts( buffer);
004181 8915           16072         MOV.W   R1,R5
004183 8904           16073         MOV.W   R0,R4
                      16074         CALL    _rs232puts
004185 C4rrrrrr       +16074 ;       FCALL   _rs232puts
                      16075 ; rs232cmd.c 4507                               }
                      16076 ; rs232cmd.c 4508                       }
004189 FE5F           16078         BR      _1144
004189 FE5F00         16078         BR      _1144
00418C                16079 _1134:
                      16080 ; rs232cmd.c 4509                       else
                      16081 ; rs232cmd.c 4510                       {
                      16082 ; rs232cmd.c 4511                               if ( !PasswordProtected)
00418C 964842rr       16084         MOV.B   ES,#SEG( _PasswordProtected )
004190 9908rrrr       16085         MOV.W   R0,#SOF( _PasswordProtected )
004194 8A00           16086         MOV.W   R0,[R0]
004196 F258           16087         BNE     _1144
                      16088 ; rs232cmd.c 4512                               {
                      16089 ; rs232cmd.c 4513                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
004198 964842rr       16091         MOV.B   ES,#SEG( _ParCnt )
00419C 9908rrrr       16092         MOV.W   R0,#SOF( _ParCnt )
0041A0 8200           16093         MOV.B   R0L,[R0]
0041A2 910403         16094         CMP.B   R0L,#03H
0041A5 F21F           16095         BNE     _1135
0041A7 9168rr         16096         MOV.B   R3L,#SEG( __lc_bs )
0041AA 7177           16097         XOR.B   R3H,R3H
0041AC 8927           16098         MOV.W   R2,R7
0041AE 91A8rr         16099         MOV.B   R5L,#SEG( __lc_bs )
0041B1 71BB           16100         XOR.B   R5H,R5H
0041B3 404702         16101         LEA     R4,R7+2
0041B6 9128rr         16102         MOV.B   R1L,#SEG( __lc_bs )
0041B9 7133           16103         XOR.B   R1H,R1H
0041BB 400704         16104         LEA     R0,R7+4
0041BE 0F03           16105         PUSH.W  R0, R1
0041C0 0F30           16107         PUSH.W  R4, R5
0041C2 0F0C           16109         PUSH.W  R2, R3
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 263

ADDR   CODE            LINE SOURCELINE
0041C4 9938rrrr       16111         MOV.W   R3,#SEG( _1118 )
0041C8 9928rrrr       16112         MOV.W   R2,#SOF( _1118 )
0041CC 0F0C           16113         PUSH.W  R2, R3
0041CE 9918rrrr       16115         MOV.W   R1,#SEG( _Cmd )
0041D2 9908rrrr       16116         MOV.W   R0,#SOF( _Cmd )
                      16117         CALL    _sscanf
0041D6 C4rrrrrr       +16117 ;       FCALL   _sscanf
0041DA 99700010       16118         ADD.W   R7,#010H
0041DE 99040003       16120         CMP.W   R0,#03H
0041E2 F306           16121         BEQ     _1136
0041E2 F306           16121         BEQ     _1136
0041E4                16122 _1135:
                      16123 ; rs232cmd.c 4514                                               SCPIError = SyntaxErr;
0041E4 964842rr       16125         MOV.B   ES,#SEG( _SCPIError )
0041E8 9908rrrr       16126         MOV.W   R0,#SOF( _SCPIError )
0041EC BA03           16127         MOV.W   [R0],#03H
0041EE FE2C           16128         BR      _1144
0041EE FE2C           16128         BR      _1144
0041F0                16129 _1136:
                      16130 ; rs232cmd.c 4515                                       else
                      16131 ; rs232cmd.c 4516                                       {
                      16132 ; rs232cmd.c 4517                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
0041F0 8A07           16134         MOV.W   R0,[R7]
0041F2 8C1702         16135         MOV.W   R1,[R7+2]
0041F5 8C2704         16136         MOV.W   R2,[R7+4]
                      16137         CALL    _ValidateDate
0041F8 C4rrrrrr       +16137 ;       FCALL   _ValidateDate
0041FC 6900           16138         OR.W    R0,R0
0041FE F207           16139         BNE     _1137
                      16140 ; rs232cmd.c 4518                                                       SCPIError = ExecErr;
004200 964842rr       16142         MOV.B   ES,#SEG( _SCPIError )
004204 9908rrrr       16143         MOV.W   R0,#SOF( _SCPIError )
004208 9A08001D       16144         MOV.W   [R0],#01DH
00420C FE1D           16145         BR      _1144
00420C FE1D           16145         BR      _1144
00420E                16146 _1137:
                      16147 ; rs232cmd.c 4519                                               else
                      16148 ; rs232cmd.c 4520                                               {
                      16149 ; rs232cmd.c 4521                                                       Calibration.UpdateDate = 
                            day + 100*month + 10000*year;
00420E 8C0702         16151         MOV.W   R0,[R7+2]
004211 E9000064       16152         MULU.W  R0,#064H
004215 0C0704         16153         ADD.W   R0,[R7+4]
004218 8A27           16154         MOV.W   R2,[R7]
00421A E9202710       16155         MULU.W  R2,#02710H
00421E 0902           16156         ADD.W   R0,R2
004220 B910           16157         MOVS.W  R1,#00H
004222 964842rr       16158         MOV.B   ES,#SEG( _Calibration+102 )
004226 9928rrrr       16159         MOV.W   R2,#SOF( _Calibration+102 )
00422A 8B0A           16160         MOV.W   [R2+],R0
00422C 8A1A           16161         MOV.W   [R2],R1
                      16162 ; rs232cmd.c 4522                                               
                      16163 ; rs232cmd.c 4523                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
00422E 9918rrrr       16165         MOV.W   R1,#SEG( _Calibration )
004232 9908rrrr       16166         MOV.W   R0,#SOF( _Calibration )
004236 964842rr       16167         MOV.B   ES,#SEG( _CalibrationPtr )
00423A 9928rrrr       16168         MOV.W   R2,#SOF( _CalibrationPtr )
00423E 8A22           16169         MOV.W   R2,[R2]
004240 993800E0       16170         MOV.W   R3,#0E0H
                      16171         CALL    _NV_Store
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 264

ADDR   CODE            LINE SOURCELINE
004244 C4rrrrrr       +16171 ;       FCALL   _NV_Store
                      16172 ; rs232cmd.c 4524                                               }
                      16173 ; rs232cmd.c 4525                                       }                               
                      16174 ; rs232cmd.c 4526                               }
                      16175 ; rs232cmd.c 4527                       }
                      16176 ; rs232cmd.c 4528               }
004248                16178 _1144:
                      16179 ; rs232cmd.c 4529       }
004248 9970001A       16181         ADD.W   R7,#01AH
00424C 2F30           16183         POP.W   R4, R5
00424E D680           16185         RET
                      16187 ; rs232cmd.c 4530       
                      16188 ; rs232cmd.c 4531       /************************************************************************
                            **/
                      16189 ; rs232cmd.c 4532       /* FactGenlockGenDate                                                    
                                                                                                                             
                                RS232CMD.C  */
                      16190 ; rs232cmd.c 4533       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16191 ; rs232cmd.c 4534       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      16192 ; rs232cmd.c 4535       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      16193 ; rs232cmd.c 4536       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16194 ; rs232cmd.c 4537       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16195 ; rs232cmd.c 4538       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16196 ; rs232cmd.c 4539       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16197 ; rs232cmd.c 4540       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16198 ; rs232cmd.c 4541       /************************************************************************
                            **/
                      16199 ; rs232cmd.c 4542       void FactGenlockGenDate( void)
                      16200 ; rs232cmd.c 4543       {
                      16201         ALIGN   1
                      16203         PUBLIC  _FactGenlockGenDate
004250                16204 _FactGenlockGenDate:
004250 0F30           16208         PUSH.W  R4, R5
004252 9972001A       16210         SUB.W   R7,#01AH
                      16216 ; rs232cmd.c 4544               UI year, month, day;
                      16217 ; rs232cmd.c 4545               char buffer[20];
                      16218 ; rs232cmd.c 4546       
                      16219 ; rs232cmd.c 4547               if ( CmdExecute && !SCPIError)
004256 964842rr       16221         MOV.B   ES,#SEG( _CmdExecute )
00425A 9908rrrr       16222         MOV.W   R0,#SOF( _CmdExecute )
00425E 8200           16223         MOV.B   R0L,[R0]
                      16224         BEQ     _1158
004260 F202           +16224 ;       BNE     _LG_1098
004262 D500C7         +16224 ;       JMP.L   _1158
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 265

ADDR   CODE            LINE SOURCELINE
004266 D500C700       +16224 ;       JMP.L   _1158
004266                +16224 _LG_1098:
004266 964842rr       16225         MOV.B   ES,#SEG( _SCPIError )
00426A 9908rrrr       16226         MOV.W   R0,#SOF( _SCPIError )
00426E 8A00           16227         MOV.W   R0,[R0]
                      16228         BNE     _1158
004270 F302           +16228 ;       BEQ     _LG_1100
004272 D500BF         +16228 ;       JMP.L   _1158
004276 D500BF00       +16228 ;       JMP.L   _1158
004276                +16228 _LG_1100:
                      16229 ; rs232cmd.c 4548               {
                      16230 ; rs232cmd.c 4549                       if ( CmdRequest)
004276 964842rr       16232         MOV.B   ES,#SEG( _CmdRequest )
00427A 9908rrrr       16233         MOV.W   R0,#SOF( _CmdRequest )
00427E 8200           16234         MOV.B   R0L,[R0]
004280 F35A           16235         BEQ     _1148
                      16236 ; rs232cmd.c 4550                       {
                      16237 ; rs232cmd.c 4551                               if ( ParCnt)
004282 964842rr       16239         MOV.B   ES,#SEG( _ParCnt )
004286 9908rrrr       16240         MOV.W   R0,#SOF( _ParCnt )
00428A 8200           16241         MOV.B   R0L,[R0]
00428C F307           16242         BEQ     _1147
                      16243 ; rs232cmd.c 4552                                       SCPIError = SyntaxErr;
00428E 964842rr       16245         MOV.B   ES,#SEG( _SCPIError )
004292 9908rrrr       16246         MOV.W   R0,#SOF( _SCPIError )
004296 BA03           16247         MOV.W   [R0],#03H
                      16248         BR      _1158
004298 D500AC         +16248         JMP.L   _1158
004298 D500AC00       +16248         JMP.L   _1158
00429C                16249 _1147:
                      16250 ; rs232cmd.c 4553                               else
                      16251 ; rs232cmd.c 4554                               {
                      16252 ; rs232cmd.c 4555                                       day = Calibration.GenlockCalibration.Date
                             % 100;
00429C 964842rr       16254         MOV.B   ES,#SEG( _Calibration+106 )
0042A0 9918rrrr       16255         MOV.W   R1,#SOF( _Calibration+106 )
0042A4 8B01           16256         MOV.W   R0,[R1+]
0042A6 8A11           16257         MOV.W   R1,[R1]
0042A8 B930           16258         MOV.W   R3,#00H
0042AA 99280064       16259         MOV.W   R2,#064H
0042AE 964842rr       16260         MOV.B   ES,#SEG( _Calibration+106 )
0042B2 9948rrrr       16261         MOV.W   R4,#SOF( _Calibration+106 )
0042B6 8B0C           16262         MOV.W   [R4+],R0
0042B8 8A1C           16263         MOV.W   [R4],R1
0042BA C4rrrrrr       16264         FCALL   __UMODL
0042BE 8C0F04         16265         MOV.W   [R7+4],R0
0042C1 964842rr       16266         MOV.B   ES,#SEG( _Calibration+106 )
0042C5 9918rrrr       16267         MOV.W   R1,#SOF( _Calibration+106 )
0042C9 8B01           16268         MOV.W   R0,[R1+]
0042CB 8A11           16269         MOV.W   R1,[R1]
                      16270 ; rs232cmd.c 4556                                       month = ( Calibration.GenlockCalibration.
                            Date / 100) % 100;
0042CD B930           16272         MOV.W   R3,#00H
0042CF 99280064       16273         MOV.W   R2,#064H
0042D3 8953           16274         MOV.W   R5,R3
0042D5 8942           16275         MOV.W   R4,R2
0042D7 C4rrrrrr       16276         FCALL   __UDIVL
0042DB 8935           16277         MOV.W   R3,R5
0042DD 8924           16278         MOV.W   R2,R4
0042DF C4rrrrrr       16279         FCALL   __UMODL
0042E3 8C0F02         16280         MOV.W   [R7+2],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 266

ADDR   CODE            LINE SOURCELINE
                      16281 ; rs232cmd.c 4557                                       year = ( Calibration.GenlockCalibration.D
                            ate / 10000);
0042E6 B930           16283         MOV.W   R3,#00H
0042E8 99282710       16284         MOV.W   R2,#02710H
0042EC 964842rr       16285         MOV.B   ES,#SEG( _Calibration+106 )
0042F0 9918rrrr       16286         MOV.W   R1,#SOF( _Calibration+106 )
0042F4 8B01           16287         MOV.W   R0,[R1+]
0042F6 8A11           16288         MOV.W   R1,[R1]
0042F8 C4rrrrrr       16289         FCALL   __UDIVL
0042FC 8A0F           16290         MOV.W   [R7],R0
                      16291 ; rs232cmd.c 4558       
                      16292 ; rs232cmd.c 4559                                       sprintf( buffer, "%d,%d,%d\n", year, mont
                            h, day);
0042FE 91A8rr         16294         MOV.B   R5L,#SEG( __lc_bs )
004301 71BB           16295         XOR.B   R5H,R5H
004303 404706         16296         LEA     R4,R7+6
004306 8C0704         16297         MOV.W   R0,[R7+4]
004309 0F01           16298         PUSH.W  R0
00430B 8C0704         16300         MOV.W   R0,[R7+4]
00430E 0F01           16301         PUSH.W  R0
004310 8C0704         16303         MOV.W   R0,[R7+4]
004313 0F01           16304         PUSH.W  R0
004315 9918rrrr       16306         MOV.W   R1,#SEG( _183 )
004319 9908rrrr       16307         MOV.W   R0,#SOF( _183 )
00431D 0F03           16308         PUSH.W  R0, R1
00431F 8915           16310         MOV.W   R1,R5
004321 8904           16311         MOV.W   R0,R4
                      16312         CALL    _sprintf
004323 C4rrrrrr       +16312 ;       FCALL   _sprintf
004327 9970000A       16313         ADD.W   R7,#0AH
                      16315 ; rs232cmd.c 4560       
                      16316 ; rs232cmd.c 4561                                       rs232puts( buffer);
00432B 8915           16318         MOV.W   R1,R5
00432D 8904           16319         MOV.W   R0,R4
                      16320         CALL    _rs232puts
00432F C4rrrrrr       +16320 ;       FCALL   _rs232puts
                      16321 ; rs232cmd.c 4562                               }
                      16322 ; rs232cmd.c 4563                       }
004333 FE5F           16324         BR      _1158
004333 FE5F00         16324         BR      _1158
004336                16325 _1148:
                      16326 ; rs232cmd.c 4564                       else
                      16327 ; rs232cmd.c 4565                       {
                      16328 ; rs232cmd.c 4566                               if ( !PasswordProtected)
004336 964842rr       16330         MOV.B   ES,#SEG( _PasswordProtected )
00433A 9908rrrr       16331         MOV.W   R0,#SOF( _PasswordProtected )
00433E 8A00           16332         MOV.W   R0,[R0]
004340 F258           16333         BNE     _1158
                      16334 ; rs232cmd.c 4567                               {
                      16335 ; rs232cmd.c 4568                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%d
                            ,%d,%d", &year, &month, &day)) != 3))
004342 964842rr       16337         MOV.B   ES,#SEG( _ParCnt )
004346 9908rrrr       16338         MOV.W   R0,#SOF( _ParCnt )
00434A 8200           16339         MOV.B   R0L,[R0]
00434C 910403         16340         CMP.B   R0L,#03H
00434F F21F           16341         BNE     _1149
004351 9168rr         16342         MOV.B   R3L,#SEG( __lc_bs )
004354 7177           16343         XOR.B   R3H,R3H
004356 8927           16344         MOV.W   R2,R7
004358 91A8rr         16345         MOV.B   R5L,#SEG( __lc_bs )
00435B 71BB           16346         XOR.B   R5H,R5H
00435D 404702         16347         LEA     R4,R7+2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 267

ADDR   CODE            LINE SOURCELINE
004360 9128rr         16348         MOV.B   R1L,#SEG( __lc_bs )
004363 7133           16349         XOR.B   R1H,R1H
004365 400704         16350         LEA     R0,R7+4
004368 0F03           16351         PUSH.W  R0, R1
00436A 0F30           16353         PUSH.W  R4, R5
00436C 0F0C           16355         PUSH.W  R2, R3
00436E 9938rrrr       16357         MOV.W   R3,#SEG( _1118 )
004372 9928rrrr       16358         MOV.W   R2,#SOF( _1118 )
004376 0F0C           16359         PUSH.W  R2, R3
004378 9918rrrr       16361         MOV.W   R1,#SEG( _Cmd )
00437C 9908rrrr       16362         MOV.W   R0,#SOF( _Cmd )
                      16363         CALL    _sscanf
004380 C4rrrrrr       +16363 ;       FCALL   _sscanf
004384 99700010       16364         ADD.W   R7,#010H
004388 99040003       16366         CMP.W   R0,#03H
00438C F306           16367         BEQ     _1150
00438C F306           16367         BEQ     _1150
00438E                16368 _1149:
                      16369 ; rs232cmd.c 4569                                               SCPIError = SyntaxErr;
00438E 964842rr       16371         MOV.B   ES,#SEG( _SCPIError )
004392 9908rrrr       16372         MOV.W   R0,#SOF( _SCPIError )
004396 BA03           16373         MOV.W   [R0],#03H
004398 FE2C           16374         BR      _1158
004398 FE2C           16374         BR      _1158
00439A                16375 _1150:
                      16376 ; rs232cmd.c 4570                                       else
                      16377 ; rs232cmd.c 4571                                       {
                      16378 ; rs232cmd.c 4572                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
00439A 8A07           16380         MOV.W   R0,[R7]
00439C 8C1702         16381         MOV.W   R1,[R7+2]
00439F 8C2704         16382         MOV.W   R2,[R7+4]
                      16383         CALL    _ValidateDate
0043A2 C4rrrrrr       +16383 ;       FCALL   _ValidateDate
0043A6 6900           16384         OR.W    R0,R0
0043A8 F207           16385         BNE     _1151
                      16386 ; rs232cmd.c 4573                                                       SCPIError = ExecErr;
0043AA 964842rr       16388         MOV.B   ES,#SEG( _SCPIError )
0043AE 9908rrrr       16389         MOV.W   R0,#SOF( _SCPIError )
0043B2 9A08001D       16390         MOV.W   [R0],#01DH
0043B6 FE1D           16391         BR      _1158
0043B6 FE1D           16391         BR      _1158
0043B8                16392 _1151:
                      16393 ; rs232cmd.c 4574                                               else
                      16394 ; rs232cmd.c 4575                                               {
                      16395 ; rs232cmd.c 4576                                                       Calibration.GenlockCalibr
                            ation.Date = day + 100*month + 10000*year;
0043B8 8C0702         16397         MOV.W   R0,[R7+2]
0043BB E9000064       16398         MULU.W  R0,#064H
0043BF 0C0704         16399         ADD.W   R0,[R7+4]
0043C2 8A27           16400         MOV.W   R2,[R7]
0043C4 E9202710       16401         MULU.W  R2,#02710H
0043C8 0902           16402         ADD.W   R0,R2
0043CA B910           16403         MOVS.W  R1,#00H
0043CC 964842rr       16404         MOV.B   ES,#SEG( _Calibration+106 )
0043D0 9928rrrr       16405         MOV.W   R2,#SOF( _Calibration+106 )
0043D4 8B0A           16406         MOV.W   [R2+],R0
0043D6 8A1A           16407         MOV.W   [R2],R1
                      16408 ; rs232cmd.c 4577                                               
                      16409 ; rs232cmd.c 4578                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
0043D8 9918rrrr       16411         MOV.W   R1,#SEG( _Calibration )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 268

ADDR   CODE            LINE SOURCELINE
0043DC 9908rrrr       16412         MOV.W   R0,#SOF( _Calibration )
0043E0 964842rr       16413         MOV.B   ES,#SEG( _CalibrationPtr )
0043E4 9928rrrr       16414         MOV.W   R2,#SOF( _CalibrationPtr )
0043E8 8A22           16415         MOV.W   R2,[R2]
0043EA 993800E0       16416         MOV.W   R3,#0E0H
                      16417         CALL    _NV_Store
0043EE C4rrrrrr       +16417 ;       FCALL   _NV_Store
                      16418 ; rs232cmd.c 4579                                               }
                      16419 ; rs232cmd.c 4580                                       }                               
                      16420 ; rs232cmd.c 4581                               }
                      16421 ; rs232cmd.c 4582                       }
                      16422 ; rs232cmd.c 4583               }
0043F2                16424 _1158:
                      16425 ; rs232cmd.c 4584       }
0043F2 9970001A       16427         ADD.W   R7,#01AH
0043F6 2F30           16429         POP.W   R4, R5
0043F8 D680           16431         RET
                      16433 ; rs232cmd.c 4585       
                      16434 ; rs232cmd.c 4586       /************************************************************************
                            **/
                      16435 ; rs232cmd.c 4587       /* FactGenlockGenVersion                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      16436 ; rs232cmd.c 4588       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16437 ; rs232cmd.c 4589       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16438 ; rs232cmd.c 4590       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      16439 ; rs232cmd.c 4591       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16440 ; rs232cmd.c 4592       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16441 ; rs232cmd.c 4593       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16442 ; rs232cmd.c 4594       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16443 ; rs232cmd.c 4595       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16444 ; rs232cmd.c 4596       /************************************************************************
                            **/
                      16445 ; rs232cmd.c 4597       void FactGenlockGenVersion( void)
                      16446 ; rs232cmd.c 4598       {
                      16447         ALIGN   1
                      16449         PUBLIC  _FactGenlockGenVersion
0043FA                16450 _FactGenlockGenVersion:
0043FA 0F30           16454         PUSH.W  R4, R5
0043FC 9972000A       16456         SUB.W   R7,#0AH
                      16460 ; rs232cmd.c 4599               char result[10];
                      16461 ; rs232cmd.c 4600       
                      16462 ; rs232cmd.c 4601               if ( CmdExecute && !SCPIError)
004400 964842rr       16464         MOV.B   ES,#SEG( _CmdExecute )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 269

ADDR   CODE            LINE SOURCELINE
004404 9908rrrr       16465         MOV.W   R0,#SOF( _CmdExecute )
004408 8200           16466         MOV.B   R0L,[R0]
00440A F337           16467         BEQ     _1168
00440C 964842rr       16468         MOV.B   ES,#SEG( _SCPIError )
004410 9908rrrr       16469         MOV.W   R0,#SOF( _SCPIError )
004414 8A00           16470         MOV.W   R0,[R0]
004416 F231           16471         BNE     _1168
                      16472 ; rs232cmd.c 4602               {
                      16473 ; rs232cmd.c 4603                       if ( CmdRequest)
004418 964842rr       16475         MOV.B   ES,#SEG( _CmdRequest )
00441C 9908rrrr       16476         MOV.W   R0,#SOF( _CmdRequest )
004420 8200           16477         MOV.B   R0L,[R0]
004422 F326           16478         BEQ     _1163
                      16479 ; rs232cmd.c 4604                       {
                      16480 ; rs232cmd.c 4605                               if ( ParCnt)
004424 964842rr       16482         MOV.B   ES,#SEG( _ParCnt )
004428 9908rrrr       16483         MOV.W   R0,#SOF( _ParCnt )
00442C 8200           16484         MOV.B   R0L,[R0]
00442E F306           16485         BEQ     _1161
                      16486 ; rs232cmd.c 4606                                       SCPIError = SyntaxErr;
004430 964842rr       16488         MOV.B   ES,#SEG( _SCPIError )
004434 9908rrrr       16489         MOV.W   R0,#SOF( _SCPIError )
004438 BA03           16490         MOV.W   [R0],#03H
00443A FE1F           16491         BR      _1168
00443A FE1F           16491         BR      _1168
00443C                16492 _1161:
                      16493 ; rs232cmd.c 4607                               else
                      16494 ; rs232cmd.c 4608                               {
                      16495 ; rs232cmd.c 4609                                       if ( GenlockVersion( result) == OK)
00443C 91A8rr         16497         MOV.B   R5L,#SEG( __lc_bs )
00443F 71BB           16498         XOR.B   R5H,R5H
004441 8947           16499         MOV.W   R4,R7
004443 8915           16500         MOV.W   R1,R5
004445 8904           16501         MOV.W   R0,R4
                      16502         CALL    _GenlockVersion
004447 C4rrrrrr       +16502 ;       FCALL   _GenlockVersion
00444B 9904FFFF       16503         CMP.W   R0,#0FFFFH
00444F F209           16504         BNE     _1162
                      16505 ; rs232cmd.c 4610                                       {
                      16506 ; rs232cmd.c 4611                                               rs232puts( result);
004451 8915           16508         MOV.W   R1,R5
004453 8904           16509         MOV.W   R0,R4
                      16510         CALL    _rs232puts
004455 C4rrrrrr       +16510 ;       FCALL   _rs232puts
                      16511 ; rs232cmd.c 4612                                               rs232putchar( '\n');
004459 91080A         16513         MOV.B   R0L,#0AH
                      16514         CALL    _rs232putchar
00445C C4rrrrrr       +16514 ;       FCALL   _rs232putchar
                      16515 ; rs232cmd.c 4613                                       }
004460 FE0C           16517         BR      _1168
004460 FE0C           16517         BR      _1168
004462                16518 _1162:
                      16519 ; rs232cmd.c 4614                                       else
                      16520 ; rs232cmd.c 4615                                               SCPIError = ExecErr;             
                                    
004462 964842rr       16522         MOV.B   ES,#SEG( _SCPIError )
004466 9908rrrr       16523         MOV.W   R0,#SOF( _SCPIError )
00446A 9A08001D       16524         MOV.W   [R0],#01DH
                      16525 ; rs232cmd.c 4616                               }
                      16526 ; rs232cmd.c 4617                       }
00446E FE05           16528         BR      _1168
00446E FE05           16528         BR      _1168
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 270

ADDR   CODE            LINE SOURCELINE
004470                16529 _1163:
                      16530 ; rs232cmd.c 4618                       else
                      16531 ; rs232cmd.c 4619                               SCPIError = SyntaxErr;
004470 964842rr       16533         MOV.B   ES,#SEG( _SCPIError )
004474 9908rrrr       16534         MOV.W   R0,#SOF( _SCPIError )
004478 BA03           16535         MOV.W   [R0],#03H
                      16536 ; rs232cmd.c 4620               }
00447A                16538 _1168:
                      16539 ; rs232cmd.c 4621       }
00447A 9970000A       16541         ADD.W   R7,#0AH
00447E 2F30           16543         POP.W   R4, R5
004480 D680           16545         RET
                      16547 ; rs232cmd.c 4622       
                      16548 ; rs232cmd.c 4623       /************************************************************************
                            **/
                      16549 ; rs232cmd.c 4624       /* FactGenlockGenFRefDate                                                
                                                                                                                         RS23
                            2CMD.C  */
                      16550 ; rs232cmd.c 4625       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16551 ; rs232cmd.c 4626       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16552 ; rs232cmd.c 4627       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16553 ; rs232cmd.c 4628       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16554 ; rs232cmd.c 4629       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16555 ; rs232cmd.c 4630       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16556 ; rs232cmd.c 4631       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16557 ; rs232cmd.c 4632       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16558 ; rs232cmd.c 4633       /************************************************************************
                            **/
                      16559 ; rs232cmd.c 4634       void FactGenlockGenFRefDate( void)
                      16560 ; rs232cmd.c 4635       {
                      16561         ALIGN   1
                      16563         PUBLIC  _FactGenlockGenFRefDate
004482                16564 _FactGenlockGenFRefDate:
004482 0F30           16568         PUSH.W  R4, R5
004484 9972001A       16570         SUB.W   R7,#01AH
                      16576 ; rs232cmd.c 4636               UI year, month, day;
                      16577 ; rs232cmd.c 4637               char buffer[20];
                      16578 ; rs232cmd.c 4638       
                      16579 ; rs232cmd.c 4639               if ( CmdExecute && !SCPIError)
004488 964842rr       16581         MOV.B   ES,#SEG( _CmdExecute )
00448C 9908rrrr       16582         MOV.W   R0,#SOF( _CmdExecute )
004490 8200           16583         MOV.B   R0L,[R0]
                      16584         BEQ     _1183
004492 F202           +16584 ;       BNE     _LG_1124
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 271

ADDR   CODE            LINE SOURCELINE
004494 D500C7         +16584 ;       JMP.L   _1183
004498 D500C700       +16584 ;       JMP.L   _1183
004498                +16584 _LG_1124:
004498 964842rr       16585         MOV.B   ES,#SEG( _SCPIError )
00449C 9908rrrr       16586         MOV.W   R0,#SOF( _SCPIError )
0044A0 8A00           16587         MOV.W   R0,[R0]
                      16588         BNE     _1183
0044A2 F302           +16588 ;       BEQ     _LG_1126
0044A4 D500BF         +16588 ;       JMP.L   _1183
0044A8 D500BF00       +16588 ;       JMP.L   _1183
0044A8                +16588 _LG_1126:
                      16589 ; rs232cmd.c 4640               {
                      16590 ; rs232cmd.c 4641                       if ( CmdRequest)
0044A8 964842rr       16592         MOV.B   ES,#SEG( _CmdRequest )
0044AC 9908rrrr       16593         MOV.W   R0,#SOF( _CmdRequest )
0044B0 8200           16594         MOV.B   R0L,[R0]
0044B2 F35A           16595         BEQ     _1173
                      16596 ; rs232cmd.c 4642                       {
                      16597 ; rs232cmd.c 4643                               if ( ParCnt)
0044B4 964842rr       16599         MOV.B   ES,#SEG( _ParCnt )
0044B8 9908rrrr       16600         MOV.W   R0,#SOF( _ParCnt )
0044BC 8200           16601         MOV.B   R0L,[R0]
0044BE F307           16602         BEQ     _1172
                      16603 ; rs232cmd.c 4644                                       SCPIError = SyntaxErr;
0044C0 964842rr       16605         MOV.B   ES,#SEG( _SCPIError )
0044C4 9908rrrr       16606         MOV.W   R0,#SOF( _SCPIError )
0044C8 BA03           16607         MOV.W   [R0],#03H
                      16608         BR      _1183
0044CA D500AC         +16608         JMP.L   _1183
0044CA D500AC00       +16608         JMP.L   _1183
0044CE                16609 _1172:
                      16610 ; rs232cmd.c 4645                               else
                      16611 ; rs232cmd.c 4646                               {
                      16612 ; rs232cmd.c 4647                                       day = Calibration.GenlockCalibration.DACF
                            actDate % 100;
0044CE 964842rr       16614         MOV.B   ES,#SEG( _Calibration+110 )
0044D2 9918rrrr       16615         MOV.W   R1,#SOF( _Calibration+110 )
0044D6 8B01           16616         MOV.W   R0,[R1+]
0044D8 8A11           16617         MOV.W   R1,[R1]
0044DA B930           16618         MOV.W   R3,#00H
0044DC 99280064       16619         MOV.W   R2,#064H
0044E0 964842rr       16620         MOV.B   ES,#SEG( _Calibration+110 )
0044E4 9948rrrr       16621         MOV.W   R4,#SOF( _Calibration+110 )
0044E8 8B0C           16622         MOV.W   [R4+],R0
0044EA 8A1C           16623         MOV.W   [R4],R1
0044EC C4rrrrrr       16624         FCALL   __UMODL
0044F0 8C0F04         16625         MOV.W   [R7+4],R0
0044F3 964842rr       16626         MOV.B   ES,#SEG( _Calibration+110 )
0044F7 9918rrrr       16627         MOV.W   R1,#SOF( _Calibration+110 )
0044FB 8B01           16628         MOV.W   R0,[R1+]
0044FD 8A11           16629         MOV.W   R1,[R1]
                      16630 ; rs232cmd.c 4648                                       month = ( Calibration.GenlockCalibration.
                            DACFactDate / 100) % 100;
0044FF B930           16632         MOV.W   R3,#00H
004501 99280064       16633         MOV.W   R2,#064H
004505 8953           16634         MOV.W   R5,R3
004507 8942           16635         MOV.W   R4,R2
004509 C4rrrrrr       16636         FCALL   __UDIVL
00450D 8935           16637         MOV.W   R3,R5
00450F 8924           16638         MOV.W   R2,R4
004511 C4rrrrrr       16639         FCALL   __UMODL
004515 8C0F02         16640         MOV.W   [R7+2],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 272

ADDR   CODE            LINE SOURCELINE
                      16641 ; rs232cmd.c 4649                                       year = ( Calibration.GenlockCalibration.D
                            ACFactDate / 10000);
004518 B930           16643         MOV.W   R3,#00H
00451A 99282710       16644         MOV.W   R2,#02710H
00451E 964842rr       16645         MOV.B   ES,#SEG( _Calibration+110 )
004522 9918rrrr       16646         MOV.W   R1,#SOF( _Calibration+110 )
004526 8B01           16647         MOV.W   R0,[R1+]
004528 8A11           16648         MOV.W   R1,[R1]
00452A C4rrrrrr       16649         FCALL   __UDIVL
00452E 8A0F           16650         MOV.W   [R7],R0
                      16651 ; rs232cmd.c 4650       
                      16652 ; rs232cmd.c 4651                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
004530 91A8rr         16654         MOV.B   R5L,#SEG( __lc_bs )
004533 71BB           16655         XOR.B   R5H,R5H
004535 404706         16656         LEA     R4,R7+6
004538 8C0704         16657         MOV.W   R0,[R7+4]
00453B 0F01           16658         PUSH.W  R0
00453D 8C0704         16660         MOV.W   R0,[R7+4]
004540 0F01           16661         PUSH.W  R0
004542 8C0704         16663         MOV.W   R0,[R7+4]
004545 0F01           16664         PUSH.W  R0
004547 9918rrrr       16666         MOV.W   R1,#SEG( _1170 )
00454B 9908rrrr       16667         MOV.W   R0,#SOF( _1170 )
00454F 0F03           16668         PUSH.W  R0, R1
004551 8915           16670         MOV.W   R1,R5
004553 8904           16671         MOV.W   R0,R4
                      16672         CALL    _sprintf
004555 C4rrrrrr       +16672 ;       FCALL   _sprintf
004559 9970000A       16673         ADD.W   R7,#0AH
                      16675 ; rs232cmd.c 4652       
                      16676 ; rs232cmd.c 4653                                       rs232puts( buffer);
00455D 8915           16678         MOV.W   R1,R5
00455F 8904           16679         MOV.W   R0,R4
                      16680         CALL    _rs232puts
004561 C4rrrrrr       +16680 ;       FCALL   _rs232puts
                      16681 ; rs232cmd.c 4654                               }
                      16682 ; rs232cmd.c 4655                       }
004565 FE5F           16684         BR      _1183
004565 FE5F00         16684         BR      _1183
004568                16685 _1173:
                      16686 ; rs232cmd.c 4656                       else
                      16687 ; rs232cmd.c 4657                       {
                      16688 ; rs232cmd.c 4658                               if ( !PasswordProtected)
004568 964842rr       16690         MOV.B   ES,#SEG( _PasswordProtected )
00456C 9908rrrr       16691         MOV.W   R0,#SOF( _PasswordProtected )
004570 8A00           16692         MOV.W   R0,[R0]
004572 F258           16693         BNE     _1183
                      16694 ; rs232cmd.c 4659                               {
                      16695 ; rs232cmd.c 4660                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
004574 964842rr       16697         MOV.B   ES,#SEG( _ParCnt )
004578 9908rrrr       16698         MOV.W   R0,#SOF( _ParCnt )
00457C 8200           16699         MOV.B   R0L,[R0]
00457E 910403         16700         CMP.B   R0L,#03H
004581 F21F           16701         BNE     _1174
004583 9168rr         16702         MOV.B   R3L,#SEG( __lc_bs )
004586 7177           16703         XOR.B   R3H,R3H
004588 8927           16704         MOV.W   R2,R7
00458A 91A8rr         16705         MOV.B   R5L,#SEG( __lc_bs )
00458D 71BB           16706         XOR.B   R5H,R5H
00458F 404702         16707         LEA     R4,R7+2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 273

ADDR   CODE            LINE SOURCELINE
004592 9128rr         16708         MOV.B   R1L,#SEG( __lc_bs )
004595 7133           16709         XOR.B   R1H,R1H
004597 400704         16710         LEA     R0,R7+4
00459A 0F03           16711         PUSH.W  R0, R1
00459C 0F30           16713         PUSH.W  R4, R5
00459E 0F0C           16715         PUSH.W  R2, R3
0045A0 9938rrrr       16717         MOV.W   R3,#SEG( _1171 )
0045A4 9928rrrr       16718         MOV.W   R2,#SOF( _1171 )
0045A8 0F0C           16719         PUSH.W  R2, R3
0045AA 9918rrrr       16721         MOV.W   R1,#SEG( _Cmd )
0045AE 9908rrrr       16722         MOV.W   R0,#SOF( _Cmd )
                      16723         CALL    _sscanf
0045B2 C4rrrrrr       +16723 ;       FCALL   _sscanf
0045B6 99700010       16724         ADD.W   R7,#010H
0045BA 99040003       16726         CMP.W   R0,#03H
0045BE F306           16727         BEQ     _1175
0045BE F306           16727         BEQ     _1175
0045C0                16728 _1174:
                      16729 ; rs232cmd.c 4661                                               SCPIError = SyntaxErr;
0045C0 964842rr       16731         MOV.B   ES,#SEG( _SCPIError )
0045C4 9908rrrr       16732         MOV.W   R0,#SOF( _SCPIError )
0045C8 BA03           16733         MOV.W   [R0],#03H
0045CA FE2C           16734         BR      _1183
0045CA FE2C           16734         BR      _1183
0045CC                16735 _1175:
                      16736 ; rs232cmd.c 4662                                       else
                      16737 ; rs232cmd.c 4663                                       {
                      16738 ; rs232cmd.c 4664                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
0045CC 8A07           16740         MOV.W   R0,[R7]
0045CE 8C1702         16741         MOV.W   R1,[R7+2]
0045D1 8C2704         16742         MOV.W   R2,[R7+4]
                      16743         CALL    _ValidateDate
0045D4 C4rrrrrr       +16743 ;       FCALL   _ValidateDate
0045D8 6900           16744         OR.W    R0,R0
0045DA F207           16745         BNE     _1176
                      16746 ; rs232cmd.c 4665                                                       SCPIError = ExecErr;
0045DC 964842rr       16748         MOV.B   ES,#SEG( _SCPIError )
0045E0 9908rrrr       16749         MOV.W   R0,#SOF( _SCPIError )
0045E4 9A08001D       16750         MOV.W   [R0],#01DH
0045E8 FE1D           16751         BR      _1183
0045E8 FE1D           16751         BR      _1183
0045EA                16752 _1176:
                      16753 ; rs232cmd.c 4666                                               else
                      16754 ; rs232cmd.c 4667                                               {
                      16755 ; rs232cmd.c 4668                                                       Calibration.GenlockCalibr
                            ation.DACFactDate = day + 100*month + 10000*year;
0045EA 8C0702         16757         MOV.W   R0,[R7+2]
0045ED E9000064       16758         MULU.W  R0,#064H
0045F1 0C0704         16759         ADD.W   R0,[R7+4]
0045F4 8A27           16760         MOV.W   R2,[R7]
0045F6 E9202710       16761         MULU.W  R2,#02710H
0045FA 0902           16762         ADD.W   R0,R2
0045FC B910           16763         MOVS.W  R1,#00H
0045FE 964842rr       16764         MOV.B   ES,#SEG( _Calibration+110 )
004602 9928rrrr       16765         MOV.W   R2,#SOF( _Calibration+110 )
004606 8B0A           16766         MOV.W   [R2+],R0
004608 8A1A           16767         MOV.W   [R2],R1
                      16768 ; rs232cmd.c 4669                                               
                      16769 ; rs232cmd.c 4670                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
00460A 9918rrrr       16771         MOV.W   R1,#SEG( _Calibration )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 274

ADDR   CODE            LINE SOURCELINE
00460E 9908rrrr       16772         MOV.W   R0,#SOF( _Calibration )
004612 964842rr       16773         MOV.B   ES,#SEG( _CalibrationPtr )
004616 9928rrrr       16774         MOV.W   R2,#SOF( _CalibrationPtr )
00461A 8A22           16775         MOV.W   R2,[R2]
00461C 993800E0       16776         MOV.W   R3,#0E0H
                      16777         CALL    _NV_Store
004620 C4rrrrrr       +16777 ;       FCALL   _NV_Store
                      16778 ; rs232cmd.c 4671                                               }
                      16779 ; rs232cmd.c 4672                                       }                               
                      16780 ; rs232cmd.c 4673                               }
                      16781 ; rs232cmd.c 4674                       }
                      16782 ; rs232cmd.c 4675               }
004624                16784 _1183:
                      16785 ; rs232cmd.c 4676       }
004624 9970001A       16787         ADD.W   R7,#01AH
004628 2F30           16789         POP.W   R4, R5
00462A D680           16791         RET
                      16793 ; rs232cmd.c 4677       
                      16794 ; rs232cmd.c 4678       /************************************************************************
                            **/
                      16795 ; rs232cmd.c 4679       /* FactGenlockGenFRefDAC                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      16796 ; rs232cmd.c 4680       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16797 ; rs232cmd.c 4681       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16798 ; rs232cmd.c 4682       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16799 ; rs232cmd.c 4683       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16800 ; rs232cmd.c 4684       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16801 ; rs232cmd.c 4685       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16802 ; rs232cmd.c 4686       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16803 ; rs232cmd.c 4687       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16804 ; rs232cmd.c 4688       /************************************************************************
                            **/
                      16805 ; rs232cmd.c 4689       void FactGenlockGenFRefDAC( void)
                      16806 ; rs232cmd.c 4690       {
                      16807         ALIGN   1
                      16809         PUBLIC  _FactGenlockGenFRefDAC
00462C                16810 _FactGenlockGenFRefDAC:
00462C 0F30           16814         PUSH.W  R4, R5
00462E 99720016       16816         SUB.W   R7,#016H
                      16820 ; rs232cmd.c 4691               char buffer[20];
                      16821 ; rs232cmd.c 4692               UI DACValue;
                      16822 ; rs232cmd.c 4693       
                      16823 ; rs232cmd.c 4694               if ( CmdExecute && !SCPIError)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 275

ADDR   CODE            LINE SOURCELINE
004632 964842rr       16825         MOV.B   ES,#SEG( _CmdExecute )
004636 9908rrrr       16826         MOV.W   R0,#SOF( _CmdExecute )
00463A 8200           16827         MOV.B   R0L,[R0]
00463C F36E           16828         BEQ     _1196
00463E 964842rr       16829         MOV.B   ES,#SEG( _SCPIError )
004642 9908rrrr       16830         MOV.W   R0,#SOF( _SCPIError )
004646 8A00           16831         MOV.W   R0,[R0]
004648 F268           16832         BNE     _1196
                      16833 ; rs232cmd.c 4695               {
                      16834 ; rs232cmd.c 4696                       if ( CmdRequest)
00464A 964842rr       16836         MOV.B   ES,#SEG( _CmdRequest )
00464E 9908rrrr       16837         MOV.W   R0,#SOF( _CmdRequest )
004652 8200           16838         MOV.B   R0L,[R0]
004654 F325           16839         BEQ     _1188
                      16840 ; rs232cmd.c 4697                       {
                      16841 ; rs232cmd.c 4698                               if ( ParCnt)
004656 964842rr       16843         MOV.B   ES,#SEG( _ParCnt )
00465A 9908rrrr       16844         MOV.W   R0,#SOF( _ParCnt )
00465E 8200           16845         MOV.B   R0L,[R0]
004660 F306           16846         BEQ     _1187
                      16847 ; rs232cmd.c 4699                                       SCPIError = SyntaxErr;
004662 964842rr       16849         MOV.B   ES,#SEG( _SCPIError )
004666 9908rrrr       16850         MOV.W   R0,#SOF( _SCPIError )
00466A BA03           16851         MOV.W   [R0],#03H
00466C FE56           16852         BR      _1196
00466C FE56           16852         BR      _1196
00466E                16853 _1187:
                      16854 ; rs232cmd.c 4700                               else
                      16855 ; rs232cmd.c 4701                               {
                      16856 ; rs232cmd.c 4702                                       sprintf( buffer, "%u\n", Calibration.Genl
                            ockCalibration.DACFactValue);
00466E 91A8rr         16858         MOV.B   R5L,#SEG( __lc_bs )
004671 71BB           16859         XOR.B   R5H,R5H
004673 8947           16860         MOV.W   R4,R7
004675 964842rr       16861         MOV.B   ES,#SEG( _Calibration+118 )
004679 9908rrrr       16862         MOV.W   R0,#SOF( _Calibration+118 )
00467D 8A00           16863         MOV.W   R0,[R0]
00467F 0F01           16864         PUSH.W  R0
004681 9918rrrr       16866         MOV.W   R1,#SEG( _1009 )
004685 9908rrrr       16867         MOV.W   R0,#SOF( _1009 )
004689 0F03           16868         PUSH.W  R0, R1
00468B 8915           16870         MOV.W   R1,R5
00468D 8904           16871         MOV.W   R0,R4
                      16872         CALL    _sprintf
00468F C4rrrrrr       +16872 ;       FCALL   _sprintf
004693 A976           16873         ADDS.W  R7,#06H
                      16875 ; rs232cmd.c 4703       
                      16876 ; rs232cmd.c 4704                                       rs232puts( buffer);
004695 8915           16878         MOV.W   R1,R5
004697 8904           16879         MOV.W   R0,R4
                      16880         CALL    _rs232puts
004699 C4rrrrrr       +16880 ;       FCALL   _rs232puts
                      16881 ; rs232cmd.c 4705                               }
                      16882 ; rs232cmd.c 4706                       }
00469D FE3E           16884         BR      _1196
00469D FE3E00         16884         BR      _1196
0046A0                16885 _1188:
                      16886 ; rs232cmd.c 4707                       else
                      16887 ; rs232cmd.c 4708                       {
                      16888 ; rs232cmd.c 4709                               if ( !PasswordProtected)
0046A0 964842rr       16890         MOV.B   ES,#SEG( _PasswordProtected )
0046A4 9908rrrr       16891         MOV.W   R0,#SOF( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 276

ADDR   CODE            LINE SOURCELINE
0046A8 8A00           16892         MOV.W   R0,[R0]
0046AA F237           16893         BNE     _1196
                      16894 ; rs232cmd.c 4710                               {
                      16895 ; rs232cmd.c 4711                                       if (( ParCnt != 1) || (( sscanf( Cmd, "%u
                            ", &DACValue)) != 1))
0046AC 964842rr       16897         MOV.B   ES,#SEG( _ParCnt )
0046B0 9908rrrr       16898         MOV.W   R0,#SOF( _ParCnt )
0046B4 8200           16899         MOV.B   R0L,[R0]
0046B6 910401         16900         CMP.B   R0L,#01H
0046B9 F216           16901         BNE     _1189
0046BB 9918rrrr       16902         MOV.W   R1,#SEG( _Cmd )
0046BF 9908rrrr       16903         MOV.W   R0,#SOF( _Cmd )
0046C3 9168rr         16904         MOV.B   R3L,#SEG( __lc_bs )
0046C6 7177           16905         XOR.B   R3H,R3H
0046C8 402714         16906         LEA     R2,R7+20
0046CB 0F0C           16907         PUSH.W  R2, R3
0046CD 9938rrrr       16909         MOV.W   R3,#SEG( _1186 )
0046D1 9928rrrr       16910         MOV.W   R2,#SOF( _1186 )
0046D5 0F0C           16911         PUSH.W  R2, R3
                      16913         CALL    _sscanf
0046D7 C4rrrrrr       +16913 ;       FCALL   _sscanf
0046DB 99700008       16914         ADD.W   R7,#08H
0046DF 99040001       16916         CMP.W   R0,#01H
0046E3 F307           16917         BEQ     _1190
0046E3 F30700         16917         BEQ     _1190
0046E6                16918 _1189:
                      16919 ; rs232cmd.c 4712                                               SCPIError = SyntaxErr;
0046E6 964842rr       16921         MOV.B   ES,#SEG( _SCPIError )
0046EA 9908rrrr       16922         MOV.W   R0,#SOF( _SCPIError )
0046EE BA03           16923         MOV.W   [R0],#03H
0046F0 FE14           16924         BR      _1196
0046F0 FE14           16924         BR      _1196
0046F2                16925 _1190:
                      16926 ; rs232cmd.c 4713                                       else
                      16927 ; rs232cmd.c 4714                                       {
                      16928 ; rs232cmd.c 4715                                               Calibration.GenlockCalibration.DA
                            CFactValue = DACValue;
0046F2 8C0714         16930         MOV.W   R0,[R7+20]
0046F5 964842rr       16931         MOV.B   ES,#SEG( _Calibration+118 )
0046F9 9918rrrr       16932         MOV.W   R1,#SOF( _Calibration+118 )
0046FD 8A09           16933         MOV.W   [R1],R0
                      16934 ; rs232cmd.c 4716                                                               
                      16935 ; rs232cmd.c 4717                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0046FF 9918rrrr       16937         MOV.W   R1,#SEG( _Calibration )
004703 9908rrrr       16938         MOV.W   R0,#SOF( _Calibration )
004707 964842rr       16939         MOV.B   ES,#SEG( _CalibrationPtr )
00470B 9928rrrr       16940         MOV.W   R2,#SOF( _CalibrationPtr )
00470F 8A22           16941         MOV.W   R2,[R2]
004711 993800E0       16942         MOV.W   R3,#0E0H
                      16943         CALL    _NV_Store
004715 C4rrrrrr       +16943 ;       FCALL   _NV_Store
                      16944 ; rs232cmd.c 4718                                       }
                      16945 ; rs232cmd.c 4719                               }
                      16946 ; rs232cmd.c 4720                       }
                      16947 ; rs232cmd.c 4721               }
00471A                16949 _1196:
                      16950 ; rs232cmd.c 4722       }
00471A 99700016       16952         ADD.W   R7,#016H
00471E 2F30           16954         POP.W   R4, R5
004720 D680           16956         RET
                      16958 ; rs232cmd.c 4723       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 277

ADDR   CODE            LINE SOURCELINE
                      16959 ; rs232cmd.c 4724       /************************************************************************
                            **/
                      16960 ; rs232cmd.c 4725       /* FactGenlockGenURefDate                                                
                                                                                                                         RS23
                            2CMD.C  */
                      16961 ; rs232cmd.c 4726       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16962 ; rs232cmd.c 4727       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      16963 ; rs232cmd.c 4728       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      16964 ; rs232cmd.c 4729       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      16965 ; rs232cmd.c 4730       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      16966 ; rs232cmd.c 4731       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      16967 ; rs232cmd.c 4732       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      16968 ; rs232cmd.c 4733       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      16969 ; rs232cmd.c 4734       /************************************************************************
                            **/
                      16970 ; rs232cmd.c 4735       void FactGenlockGenURefDate( void)
                      16971 ; rs232cmd.c 4736       {
                      16972         ALIGN   1
                      16974         PUBLIC  _FactGenlockGenURefDate
004722                16975 _FactGenlockGenURefDate:
004722 0F30           16979         PUSH.W  R4, R5
004724 9972001A       16981         SUB.W   R7,#01AH
                      16987 ; rs232cmd.c 4737               UI year, month, day;
                      16988 ; rs232cmd.c 4738               char buffer[20];
                      16989 ; rs232cmd.c 4739       
                      16990 ; rs232cmd.c 4740               if ( CmdExecute && !SCPIError)
004728 964842rr       16992         MOV.B   ES,#SEG( _CmdExecute )
00472C 9908rrrr       16993         MOV.W   R0,#SOF( _CmdExecute )
004730 8200           16994         MOV.B   R0L,[R0]
                      16995         BEQ     _1209
004732 F202           +16995 ;       BNE     _LG_1154
004734 D500C1         +16995 ;       JMP.L   _1209
004738 D500C100       +16995 ;       JMP.L   _1209
004738                +16995 _LG_1154:
004738 964842rr       16996         MOV.B   ES,#SEG( _SCPIError )
00473C 9908rrrr       16997         MOV.W   R0,#SOF( _SCPIError )
004740 8A00           16998         MOV.W   R0,[R0]
                      16999         BNE     _1209
004742 F302           +16999 ;       BEQ     _LG_1156
004744 D500B9         +16999 ;       JMP.L   _1209
004748 D500B900       +16999 ;       JMP.L   _1209
004748                +16999 _LG_1156:
                      17000 ; rs232cmd.c 4741               {
                      17001 ; rs232cmd.c 4742                       if ( CmdRequest)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 278

ADDR   CODE            LINE SOURCELINE
004748 964842rr       17003         MOV.B   ES,#SEG( _CmdRequest )
00474C 9908rrrr       17004         MOV.W   R0,#SOF( _CmdRequest )
004750 8200           17005         MOV.B   R0L,[R0]
004752 F35A           17006         BEQ     _1200
                      17007 ; rs232cmd.c 4743                       {
                      17008 ; rs232cmd.c 4744                               if ( ParCnt)
004754 964842rr       17010         MOV.B   ES,#SEG( _ParCnt )
004758 9908rrrr       17011         MOV.W   R0,#SOF( _ParCnt )
00475C 8200           17012         MOV.B   R0L,[R0]
00475E F307           17013         BEQ     _1199
                      17014 ; rs232cmd.c 4745                                       SCPIError = SyntaxErr;
004760 964842rr       17016         MOV.B   ES,#SEG( _SCPIError )
004764 9908rrrr       17017         MOV.W   R0,#SOF( _SCPIError )
004768 BA03           17018         MOV.W   [R0],#03H
                      17019         BR      _1209
00476A D500A6         +17019         JMP.L   _1209
00476A D500A600       +17019         JMP.L   _1209
00476E                17020 _1199:
                      17021 ; rs232cmd.c 4746                               else
                      17022 ; rs232cmd.c 4747                               {
                      17023 ; rs232cmd.c 4748                                       day = Calibration.GenlockCalibration.DACU
                            serDate % 100;
00476E 964842rr       17025         MOV.B   ES,#SEG( _Calibration+114 )
004772 9918rrrr       17026         MOV.W   R1,#SOF( _Calibration+114 )
004776 8B01           17027         MOV.W   R0,[R1+]
004778 8A11           17028         MOV.W   R1,[R1]
00477A B930           17029         MOV.W   R3,#00H
00477C 99280064       17030         MOV.W   R2,#064H
004780 964842rr       17031         MOV.B   ES,#SEG( _Calibration+114 )
004784 9948rrrr       17032         MOV.W   R4,#SOF( _Calibration+114 )
004788 8B0C           17033         MOV.W   [R4+],R0
00478A 8A1C           17034         MOV.W   [R4],R1
00478C C4rrrrrr       17035         FCALL   __UMODL
004790 8C0F04         17036         MOV.W   [R7+4],R0
004793 964842rr       17037         MOV.B   ES,#SEG( _Calibration+114 )
004797 9918rrrr       17038         MOV.W   R1,#SOF( _Calibration+114 )
00479B 8B01           17039         MOV.W   R0,[R1+]
00479D 8A11           17040         MOV.W   R1,[R1]
                      17041 ; rs232cmd.c 4749                                       month = ( Calibration.GenlockCalibration.
                            DACUserDate / 100) % 100;
00479F B930           17043         MOV.W   R3,#00H
0047A1 99280064       17044         MOV.W   R2,#064H
0047A5 8953           17045         MOV.W   R5,R3
0047A7 8942           17046         MOV.W   R4,R2
0047A9 C4rrrrrr       17047         FCALL   __UDIVL
0047AD 8935           17048         MOV.W   R3,R5
0047AF 8924           17049         MOV.W   R2,R4
0047B1 C4rrrrrr       17050         FCALL   __UMODL
0047B5 8C0F02         17051         MOV.W   [R7+2],R0
                      17052 ; rs232cmd.c 4750                                       year = ( Calibration.GenlockCalibration.D
                            ACUserDate / 10000);
0047B8 B930           17054         MOV.W   R3,#00H
0047BA 99282710       17055         MOV.W   R2,#02710H
0047BE 964842rr       17056         MOV.B   ES,#SEG( _Calibration+114 )
0047C2 9918rrrr       17057         MOV.W   R1,#SOF( _Calibration+114 )
0047C6 8B01           17058         MOV.W   R0,[R1+]
0047C8 8A11           17059         MOV.W   R1,[R1]
0047CA C4rrrrrr       17060         FCALL   __UDIVL
0047CE 8A0F           17061         MOV.W   [R7],R0
                      17062 ; rs232cmd.c 4751       
                      17063 ; rs232cmd.c 4752                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 279

ADDR   CODE            LINE SOURCELINE
0047D0 91A8rr         17065         MOV.B   R5L,#SEG( __lc_bs )
0047D3 71BB           17066         XOR.B   R5H,R5H
0047D5 404706         17067         LEA     R4,R7+6
0047D8 8C0704         17068         MOV.W   R0,[R7+4]
0047DB 0F01           17069         PUSH.W  R0
0047DD 8C0704         17071         MOV.W   R0,[R7+4]
0047E0 0F01           17072         PUSH.W  R0
0047E2 8C0704         17074         MOV.W   R0,[R7+4]
0047E5 0F01           17075         PUSH.W  R0
0047E7 9918rrrr       17077         MOV.W   R1,#SEG( _1170 )
0047EB 9908rrrr       17078         MOV.W   R0,#SOF( _1170 )
0047EF 0F03           17079         PUSH.W  R0, R1
0047F1 8915           17081         MOV.W   R1,R5
0047F3 8904           17082         MOV.W   R0,R4
                      17083         CALL    _sprintf
0047F5 C4rrrrrr       +17083 ;       FCALL   _sprintf
0047F9 9970000A       17084         ADD.W   R7,#0AH
                      17086 ; rs232cmd.c 4753       
                      17087 ; rs232cmd.c 4754                                       rs232puts( buffer);
0047FD 8915           17089         MOV.W   R1,R5
0047FF 8904           17090         MOV.W   R0,R4
                      17091         CALL    _rs232puts
004801 C4rrrrrr       +17091 ;       FCALL   _rs232puts
                      17092 ; rs232cmd.c 4755                               }
                      17093 ; rs232cmd.c 4756                       }
004805 FE59           17095         BR      _1209
004805 FE5900         17095         BR      _1209
004808                17096 _1200:
                      17097 ; rs232cmd.c 4757                       else
                      17098 ; rs232cmd.c 4758                       {
                      17099 ; rs232cmd.c 4759                               if (( ParCnt != 3) || (( sscanf( Cmd, "%u,%u,%u",
                             &year, &month, &day)) != 3))
004808 964842rr       17101         MOV.B   ES,#SEG( _ParCnt )
00480C 9908rrrr       17102         MOV.W   R0,#SOF( _ParCnt )
004810 8200           17103         MOV.B   R0L,[R0]
004812 910403         17104         CMP.B   R0L,#03H
004815 F21F           17105         BNE     _1201
004817 9168rr         17106         MOV.B   R3L,#SEG( __lc_bs )
00481A 7177           17107         XOR.B   R3H,R3H
00481C 8927           17108         MOV.W   R2,R7
00481E 91A8rr         17109         MOV.B   R5L,#SEG( __lc_bs )
004821 71BB           17110         XOR.B   R5H,R5H
004823 404702         17111         LEA     R4,R7+2
004826 9128rr         17112         MOV.B   R1L,#SEG( __lc_bs )
004829 7133           17113         XOR.B   R1H,R1H
00482B 400704         17114         LEA     R0,R7+4
00482E 0F03           17115         PUSH.W  R0, R1
004830 0F30           17117         PUSH.W  R4, R5
004832 0F0C           17119         PUSH.W  R2, R3
004834 9938rrrr       17121         MOV.W   R3,#SEG( _1171 )
004838 9928rrrr       17122         MOV.W   R2,#SOF( _1171 )
00483C 0F0C           17123         PUSH.W  R2, R3
00483E 9918rrrr       17125         MOV.W   R1,#SEG( _Cmd )
004842 9908rrrr       17126         MOV.W   R0,#SOF( _Cmd )
                      17127         CALL    _sscanf
004846 C4rrrrrr       +17127 ;       FCALL   _sscanf
00484A 99700010       17128         ADD.W   R7,#010H
00484E 99040003       17130         CMP.W   R0,#03H
004852 F306           17131         BEQ     _1202
004852 F306           17131         BEQ     _1202
004854                17132 _1201:
                      17133 ; rs232cmd.c 4760                                       SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 280

ADDR   CODE            LINE SOURCELINE
004854 964842rr       17135         MOV.B   ES,#SEG( _SCPIError )
004858 9908rrrr       17136         MOV.W   R0,#SOF( _SCPIError )
00485C BA03           17137         MOV.W   [R0],#03H
00485E FE2C           17138         BR      _1209
00485E FE2C           17138         BR      _1209
004860                17139 _1202:
                      17140 ; rs232cmd.c 4761                               else
                      17141 ; rs232cmd.c 4762                               {
                      17142 ; rs232cmd.c 4763                                       if ( ValidateDate( year, month, day) == F
                            AIL)
004860 8A07           17144         MOV.W   R0,[R7]
004862 8C1702         17145         MOV.W   R1,[R7+2]
004865 8C2704         17146         MOV.W   R2,[R7+4]
                      17147         CALL    _ValidateDate
004868 C4rrrrrr       +17147 ;       FCALL   _ValidateDate
00486C 6900           17148         OR.W    R0,R0
00486E F207           17149         BNE     _1203
                      17150 ; rs232cmd.c 4764                                               SCPIError = ExecErr;
004870 964842rr       17152         MOV.B   ES,#SEG( _SCPIError )
004874 9908rrrr       17153         MOV.W   R0,#SOF( _SCPIError )
004878 9A08001D       17154         MOV.W   [R0],#01DH
00487C FE1D           17155         BR      _1209
00487C FE1D           17155         BR      _1209
00487E                17156 _1203:
                      17157 ; rs232cmd.c 4765                                       else
                      17158 ; rs232cmd.c 4766                                       {
                      17159 ; rs232cmd.c 4767                                               Calibration.GenlockCalibration.DA
                            CUserDate = day + 100*month + 10000*year;
00487E 8C0702         17161         MOV.W   R0,[R7+2]
004881 E9000064       17162         MULU.W  R0,#064H
004885 0C0704         17163         ADD.W   R0,[R7+4]
004888 8A27           17164         MOV.W   R2,[R7]
00488A E9202710       17165         MULU.W  R2,#02710H
00488E 0902           17166         ADD.W   R0,R2
004890 B910           17167         MOVS.W  R1,#00H
004892 964842rr       17168         MOV.B   ES,#SEG( _Calibration+114 )
004896 9928rrrr       17169         MOV.W   R2,#SOF( _Calibration+114 )
00489A 8B0A           17170         MOV.W   [R2+],R0
00489C 8A1A           17171         MOV.W   [R2],R1
                      17172 ; rs232cmd.c 4768                                               
                      17173 ; rs232cmd.c 4769                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
00489E 9918rrrr       17175         MOV.W   R1,#SEG( _Calibration )
0048A2 9908rrrr       17176         MOV.W   R0,#SOF( _Calibration )
0048A6 964842rr       17177         MOV.B   ES,#SEG( _CalibrationPtr )
0048AA 9928rrrr       17178         MOV.W   R2,#SOF( _CalibrationPtr )
0048AE 8A22           17179         MOV.W   R2,[R2]
0048B0 993800E0       17180         MOV.W   R3,#0E0H
                      17181         CALL    _NV_Store
0048B4 C4rrrrrr       +17181 ;       FCALL   _NV_Store
                      17182 ; rs232cmd.c 4770                                       }                               
                      17183 ; rs232cmd.c 4771                               }
                      17184 ; rs232cmd.c 4772                       }
                      17185 ; rs232cmd.c 4773               }
0048B8                17187 _1209:
                      17188 ; rs232cmd.c 4774       }
0048B8 9970001A       17190         ADD.W   R7,#01AH
0048BC 2F30           17192         POP.W   R4, R5
0048BE D680           17194         RET
                      17196 ; rs232cmd.c 4775       
                      17197 ; rs232cmd.c 4776       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 281

ADDR   CODE            LINE SOURCELINE
                      17198 ; rs232cmd.c 4777       /* FactGenlockGenURefDAC                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      17199 ; rs232cmd.c 4778       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17200 ; rs232cmd.c 4779       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      17201 ; rs232cmd.c 4780       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17202 ; rs232cmd.c 4781       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17203 ; rs232cmd.c 4782       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17204 ; rs232cmd.c 4783       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17205 ; rs232cmd.c 4784       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17206 ; rs232cmd.c 4785       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17207 ; rs232cmd.c 4786       /************************************************************************
                            **/
                      17208 ; rs232cmd.c 4787       void FactGenlockGenURefDAC( void)
                      17209 ; rs232cmd.c 4788       {
                      17210         ALIGN   1
                      17212         PUBLIC  _FactGenlockGenURefDAC
0048C0                17213 _FactGenlockGenURefDAC:
0048C0 0F30           17217         PUSH.W  R4, R5
0048C2 99720016       17219         SUB.W   R7,#016H
                      17223 ; rs232cmd.c 4789               char buffer[20];
                      17224 ; rs232cmd.c 4790               UI DACValue;
                      17225 ; rs232cmd.c 4791       
                      17226 ; rs232cmd.c 4792               if ( CmdExecute && !SCPIError)
0048C6 964842rr       17228         MOV.B   ES,#SEG( _CmdExecute )
0048CA 9908rrrr       17229         MOV.W   R0,#SOF( _CmdExecute )
0048CE 8200           17230         MOV.B   R0L,[R0]
0048D0 F368           17231         BEQ     _1220
0048D2 964842rr       17232         MOV.B   ES,#SEG( _SCPIError )
0048D6 9908rrrr       17233         MOV.W   R0,#SOF( _SCPIError )
0048DA 8A00           17234         MOV.W   R0,[R0]
0048DC F262           17235         BNE     _1220
                      17236 ; rs232cmd.c 4793               {
                      17237 ; rs232cmd.c 4794                       if ( CmdRequest)
0048DE 964842rr       17239         MOV.B   ES,#SEG( _CmdRequest )
0048E2 9908rrrr       17240         MOV.W   R0,#SOF( _CmdRequest )
0048E6 8200           17241         MOV.B   R0L,[R0]
0048E8 F325           17242         BEQ     _1213
                      17243 ; rs232cmd.c 4795                       {
                      17244 ; rs232cmd.c 4796                               if ( ParCnt)
0048EA 964842rr       17246         MOV.B   ES,#SEG( _ParCnt )
0048EE 9908rrrr       17247         MOV.W   R0,#SOF( _ParCnt )
0048F2 8200           17248         MOV.B   R0L,[R0]
0048F4 F306           17249         BEQ     _1212
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 282

ADDR   CODE            LINE SOURCELINE
                      17250 ; rs232cmd.c 4797                                       SCPIError = SyntaxErr;
0048F6 964842rr       17252         MOV.B   ES,#SEG( _SCPIError )
0048FA 9908rrrr       17253         MOV.W   R0,#SOF( _SCPIError )
0048FE BA03           17254         MOV.W   [R0],#03H
004900 FE50           17255         BR      _1220
004900 FE50           17255         BR      _1220
004902                17256 _1212:
                      17257 ; rs232cmd.c 4798                               else
                      17258 ; rs232cmd.c 4799                               {
                      17259 ; rs232cmd.c 4800                                       sprintf( buffer, "%u\n", Calibration.Genl
                            ockCalibration.DACUserValue);
004902 91A8rr         17261         MOV.B   R5L,#SEG( __lc_bs )
004905 71BB           17262         XOR.B   R5H,R5H
004907 8947           17263         MOV.W   R4,R7
004909 964842rr       17264         MOV.B   ES,#SEG( _Calibration+120 )
00490D 9908rrrr       17265         MOV.W   R0,#SOF( _Calibration+120 )
004911 8A00           17266         MOV.W   R0,[R0]
004913 0F01           17267         PUSH.W  R0
004915 9918rrrr       17269         MOV.W   R1,#SEG( _1009 )
004919 9908rrrr       17270         MOV.W   R0,#SOF( _1009 )
00491D 0F03           17271         PUSH.W  R0, R1
00491F 8915           17273         MOV.W   R1,R5
004921 8904           17274         MOV.W   R0,R4
                      17275         CALL    _sprintf
004923 C4rrrrrr       +17275 ;       FCALL   _sprintf
004927 A976           17276         ADDS.W  R7,#06H
                      17278 ; rs232cmd.c 4801       
                      17279 ; rs232cmd.c 4802                                       rs232puts( buffer);
004929 8915           17281         MOV.W   R1,R5
00492B 8904           17282         MOV.W   R0,R4
                      17283         CALL    _rs232puts
00492D C4rrrrrr       +17283 ;       FCALL   _rs232puts
                      17284 ; rs232cmd.c 4803                               }
                      17285 ; rs232cmd.c 4804                       }
004931 FE38           17287         BR      _1220
004931 FE3800         17287         BR      _1220
004934                17288 _1213:
                      17289 ; rs232cmd.c 4805                       else
                      17290 ; rs232cmd.c 4806                       {
                      17291 ; rs232cmd.c 4807                               if (( ParCnt != 1) || (( sscanf( Cmd, "%u", &DACV
                            alue)) != 1))
004934 964842rr       17293         MOV.B   ES,#SEG( _ParCnt )
004938 9908rrrr       17294         MOV.W   R0,#SOF( _ParCnt )
00493C 8200           17295         MOV.B   R0L,[R0]
00493E 910401         17296         CMP.B   R0L,#01H
004941 F216           17297         BNE     _1214
004943 9918rrrr       17298         MOV.W   R1,#SEG( _Cmd )
004947 9908rrrr       17299         MOV.W   R0,#SOF( _Cmd )
00494B 9168rr         17300         MOV.B   R3L,#SEG( __lc_bs )
00494E 7177           17301         XOR.B   R3H,R3H
004950 402714         17302         LEA     R2,R7+20
004953 0F0C           17303         PUSH.W  R2, R3
004955 9938rrrr       17305         MOV.W   R3,#SEG( _1186 )
004959 9928rrrr       17306         MOV.W   R2,#SOF( _1186 )
00495D 0F0C           17307         PUSH.W  R2, R3
                      17309         CALL    _sscanf
00495F C4rrrrrr       +17309 ;       FCALL   _sscanf
004963 99700008       17310         ADD.W   R7,#08H
004967 99040001       17312         CMP.W   R0,#01H
00496B F307           17313         BEQ     _1215
00496B F30700         17313         BEQ     _1215
00496E                17314 _1214:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 283

ADDR   CODE            LINE SOURCELINE
                      17315 ; rs232cmd.c 4808                                       SCPIError = SyntaxErr;
00496E 964842rr       17317         MOV.B   ES,#SEG( _SCPIError )
004972 9908rrrr       17318         MOV.W   R0,#SOF( _SCPIError )
004976 BA03           17319         MOV.W   [R0],#03H
004978 FE14           17320         BR      _1220
004978 FE14           17320         BR      _1220
00497A                17321 _1215:
                      17322 ; rs232cmd.c 4809                               else
                      17323 ; rs232cmd.c 4810                               {
                      17324 ; rs232cmd.c 4811                                       Calibration.GenlockCalibration.DACUserVal
                            ue = DACValue;
00497A 8C0714         17326         MOV.W   R0,[R7+20]
00497D 964842rr       17327         MOV.B   ES,#SEG( _Calibration+120 )
004981 9918rrrr       17328         MOV.W   R1,#SOF( _Calibration+120 )
004985 8A09           17329         MOV.W   [R1],R0
                      17330 ; rs232cmd.c 4812                                                               
                      17331 ; rs232cmd.c 4813                                       NV_Store( &Calibration, CalibrationPtr, s
                            izeof( Calibration));
004987 9918rrrr       17333         MOV.W   R1,#SEG( _Calibration )
00498B 9908rrrr       17334         MOV.W   R0,#SOF( _Calibration )
00498F 964842rr       17335         MOV.B   ES,#SEG( _CalibrationPtr )
004993 9928rrrr       17336         MOV.W   R2,#SOF( _CalibrationPtr )
004997 8A22           17337         MOV.W   R2,[R2]
004999 993800E0       17338         MOV.W   R3,#0E0H
                      17339         CALL    _NV_Store
00499D C4rrrrrr       +17339 ;       FCALL   _NV_Store
                      17340 ; rs232cmd.c 4814                               }
                      17341 ; rs232cmd.c 4815                       }
                      17342 ; rs232cmd.c 4816               }
0049A2                17344 _1220:
                      17345 ; rs232cmd.c 4817       }
0049A2 99700016       17347         ADD.W   R7,#016H
0049A6 2F30           17349         POP.W   R4, R5
0049A8 D680           17351         RET
                      17353 ; rs232cmd.c 4818       
                      17354 ; rs232cmd.c 4819       /************************************************************************
                            **/
                      17355 ; rs232cmd.c 4820       /* FactGenlockGenHPHZero                                                 
                                                                                                                         RS23
                            2CMD.C  */
                      17356 ; rs232cmd.c 4821       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17357 ; rs232cmd.c 4822       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      17358 ; rs232cmd.c 4823       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17359 ; rs232cmd.c 4824       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17360 ; rs232cmd.c 4825       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17361 ; rs232cmd.c 4826       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 284

ADDR   CODE            LINE SOURCELINE
                      17362 ; rs232cmd.c 4827       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17363 ; rs232cmd.c 4828       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17364 ; rs232cmd.c 4829       /************************************************************************
                            **/
                      17365 ; rs232cmd.c 4830       void FactGenlockGenHPHZero( void)
                      17366 ; rs232cmd.c 4831       {
                      17367         ALIGN   1
                      17369         PUBLIC  _FactGenlockGenHPHZero
0049AA                17370 _FactGenlockGenHPHZero:
0049AA 0F30           17374         PUSH.W  R4, R5
0049AC 99720026       17376         SUB.W   R7,#026H
                      17381 ; rs232cmd.c 4832               char buffer[30];
                      17382 ; rs232cmd.c 4833               UL HPHZeroG, HPHZeroM;
                      17383 ; rs232cmd.c 4834       
                      17384 ; rs232cmd.c 4835               if ( CmdExecute && !SCPIError)
0049B0 964842rr       17386         MOV.B   ES,#SEG( _CmdExecute )
0049B4 9908rrrr       17387         MOV.W   R0,#SOF( _CmdExecute )
0049B8 8200           17388         MOV.B   R0L,[R0]
                      17389         BEQ     _1233
0049BA F202           +17389 ;       BNE     _LG_1180
0049BC D5008A         +17389 ;       JMP.L   _1233
0049C0 D5008A00       +17389 ;       JMP.L   _1233
0049C0                +17389 _LG_1180:
0049C0 964842rr       17390         MOV.B   ES,#SEG( _SCPIError )
0049C4 9908rrrr       17391         MOV.W   R0,#SOF( _SCPIError )
0049C8 8A00           17392         MOV.W   R0,[R0]
                      17393         BNE     _1233
0049CA F302           +17393 ;       BEQ     _LG_1182
0049CC D50082         +17393 ;       JMP.L   _1233
0049D0 D5008200       +17393 ;       JMP.L   _1233
0049D0                +17393 _LG_1182:
                      17394 ; rs232cmd.c 4836               {
                      17395 ; rs232cmd.c 4837                       if ( CmdRequest)
0049D0 964842rr       17397         MOV.B   ES,#SEG( _CmdRequest )
0049D4 9908rrrr       17398         MOV.W   R0,#SOF( _CmdRequest )
0049D8 8200           17399         MOV.B   R0L,[R0]
0049DA F32E           17400         BEQ     _1225
                      17401 ; rs232cmd.c 4838                       {
                      17402 ; rs232cmd.c 4839                               if ( ParCnt)
0049DC 964842rr       17404         MOV.B   ES,#SEG( _ParCnt )
0049E0 9908rrrr       17405         MOV.W   R0,#SOF( _ParCnt )
0049E4 8200           17406         MOV.B   R0L,[R0]
0049E6 F306           17407         BEQ     _1224
                      17408 ; rs232cmd.c 4840                                       SCPIError = SyntaxErr;
0049E8 964842rr       17410         MOV.B   ES,#SEG( _SCPIError )
0049EC 9908rrrr       17411         MOV.W   R0,#SOF( _SCPIError )
0049F0 BA03           17412         MOV.W   [R0],#03H
0049F2 FE6F           17413         BR      _1233
0049F2 FE6F           17413         BR      _1233
0049F4                17414 _1224:
                      17415 ; rs232cmd.c 4841                               else
                      17416 ; rs232cmd.c 4842                               {
                      17417 ; rs232cmd.c 4843                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .GenlockCalibration.HPHZeroG, 
                      17418 ; rs232cmd.c 4844                                                                                
                                                                                                Calibration.GenlockCalibratio
                            n.HPHZeroM);
0049F4 91A8rr         17420         MOV.B   R5L,#SEG( __lc_bs )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 285

ADDR   CODE            LINE SOURCELINE
0049F7 71BB           17421         XOR.B   R5H,R5H
0049F9 8947           17422         MOV.W   R4,R7
0049FB 964842rr       17423         MOV.B   ES,#SEG( _Calibration+122 )
0049FF 9918rrrr       17424         MOV.W   R1,#SOF( _Calibration+122 )
004A03 8B01           17425         MOV.W   R0,[R1+]
004A05 8A11           17426         MOV.W   R1,[R1]
004A07 964842rr       17427         MOV.B   ES,#SEG( _Calibration+130 )
004A0B 9938rrrr       17428         MOV.W   R3,#SOF( _Calibration+130 )
004A0F 8B23           17429         MOV.W   R2,[R3+]
004A11 8A33           17430         MOV.W   R3,[R3]
004A13 0F0C           17431         PUSH.W  R2, R3
004A15 0F03           17433         PUSH.W  R0, R1
004A17 9918rrrr       17435         MOV.W   R1,#SEG( _1223 )
004A1B 9908rrrr       17436         MOV.W   R0,#SOF( _1223 )
004A1F 0F03           17437         PUSH.W  R0, R1
004A21 8915           17439         MOV.W   R1,R5
004A23 8904           17440         MOV.W   R0,R4
                      17441         CALL    _sprintf
004A25 C4rrrrrr       +17441 ;       FCALL   _sprintf
004A29 9970000C       17442         ADD.W   R7,#0CH
                      17444 ; rs232cmd.c 4845                                       rs232puts( buffer);
004A2D 8915           17446         MOV.W   R1,R5
004A2F 8904           17447         MOV.W   R0,R4
                      17448         CALL    _rs232puts
004A31 C4rrrrrr       +17448 ;       FCALL   _rs232puts
                      17449 ; rs232cmd.c 4846                               }
                      17450 ; rs232cmd.c 4847                       }
004A35 FE4E           17452         BR      _1233
004A35 FE4E00         17452         BR      _1233
004A38                17453 _1225:
                      17454 ; rs232cmd.c 4848                       else
                      17455 ; rs232cmd.c 4849                       {
                      17456 ; rs232cmd.c 4850                               if ( !PasswordProtected)
004A38 964842rr       17458         MOV.B   ES,#SEG( _PasswordProtected )
004A3C 9908rrrr       17459         MOV.W   R0,#SOF( _PasswordProtected )
004A40 8A00           17460         MOV.W   R0,[R0]
004A42 F247           17461         BNE     _1233
                      17462 ; rs232cmd.c 4851                               {
                      17463 ; rs232cmd.c 4852                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &HPHZeroG, &HPHZeroM)) != 2))
004A44 964842rr       17465         MOV.B   ES,#SEG( _ParCnt )
004A48 9908rrrr       17466         MOV.W   R0,#SOF( _ParCnt )
004A4C 8200           17467         MOV.B   R0L,[R0]
004A4E 910402         17468         CMP.B   R0L,#02H
004A51 F21B           17469         BNE     _1226
004A53 9918rrrr       17470         MOV.W   R1,#SEG( _Cmd )
004A57 9908rrrr       17471         MOV.W   R0,#SOF( _Cmd )
004A5B 9168rr         17472         MOV.B   R3L,#SEG( __lc_bs )
004A5E 7177           17473         XOR.B   R3H,R3H
004A60 40271E         17474         LEA     R2,R7+30
004A63 91A8rr         17475         MOV.B   R5L,#SEG( __lc_bs )
004A66 71BB           17476         XOR.B   R5H,R5H
004A68 404722         17477         LEA     R4,R7+34
004A6B 0F30           17478         PUSH.W  R4, R5
004A6D 0F0C           17480         PUSH.W  R2, R3
004A6F 9938rrrr       17482         MOV.W   R3,#SEG( _1034 )
004A73 9928rrrr       17483         MOV.W   R2,#SOF( _1034 )
004A77 0F0C           17484         PUSH.W  R2, R3
                      17486         CALL    _sscanf
004A79 C4rrrrrr       +17486 ;       FCALL   _sscanf
004A7D 9970000C       17487         ADD.W   R7,#0CH
004A81 99040002       17489         CMP.W   R0,#02H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 286

ADDR   CODE            LINE SOURCELINE
004A85 F307           17490         BEQ     _1227
004A85 F30700         17490         BEQ     _1227
004A88                17491 _1226:
                      17492 ; rs232cmd.c 4853                                               SCPIError = SyntaxErr;
004A88 964842rr       17494         MOV.B   ES,#SEG( _SCPIError )
004A8C 9908rrrr       17495         MOV.W   R0,#SOF( _SCPIError )
004A90 BA03           17496         MOV.W   [R0],#03H
004A92 FE1F           17497         BR      _1233
004A92 FE1F           17497         BR      _1233
004A94                17498 _1227:
                      17499 ; rs232cmd.c 4854                                       else
                      17500 ; rs232cmd.c 4855                                       {
                      17501 ; rs232cmd.c 4856                                               Calibration.GenlockCalibration.HP
                            HZeroG = HPHZeroG;
004A94 8C1720         17503         MOV.W   R1,[R7+32]
004A97 8C071E         17504         MOV.W   R0,[R7+30]
004A9A 964842rr       17505         MOV.B   ES,#SEG( _Calibration+122 )
004A9E 9928rrrr       17506         MOV.W   R2,#SOF( _Calibration+122 )
004AA2 8B0A           17507         MOV.W   [R2+],R0
004AA4 8A1A           17508         MOV.W   [R2],R1
                      17509 ; rs232cmd.c 4857                                               Calibration.GenlockCalibration.HP
                            HZeroM = HPHZeroM;
004AA6 8C1724         17511         MOV.W   R1,[R7+36]
004AA9 8C0722         17512         MOV.W   R0,[R7+34]
004AAC 964842rr       17513         MOV.B   ES,#SEG( _Calibration+130 )
004AB0 9928rrrr       17514         MOV.W   R2,#SOF( _Calibration+130 )
004AB4 8B0A           17515         MOV.W   [R2+],R0
004AB6 8A1A           17516         MOV.W   [R2],R1
                      17517 ; rs232cmd.c 4858                                       
                      17518 ; rs232cmd.c 4859                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
004AB8 9918rrrr       17520         MOV.W   R1,#SEG( _Calibration )
004ABC 9908rrrr       17521         MOV.W   R0,#SOF( _Calibration )
004AC0 964842rr       17522         MOV.B   ES,#SEG( _CalibrationPtr )
004AC4 9928rrrr       17523         MOV.W   R2,#SOF( _CalibrationPtr )
004AC8 8A22           17524         MOV.W   R2,[R2]
004ACA 993800E0       17525         MOV.W   R3,#0E0H
                      17526         CALL    _NV_Store
004ACE C4rrrrrr       +17526 ;       FCALL   _NV_Store
                      17527 ; rs232cmd.c 4860                                       }
                      17528 ; rs232cmd.c 4861                               }
                      17529 ; rs232cmd.c 4862                       }
                      17530 ; rs232cmd.c 4863               }
004AD2                17532 _1233:
                      17533 ; rs232cmd.c 4864       }
004AD2 99700026       17535         ADD.W   R7,#026H
004AD6 2F30           17537         POP.W   R4, R5
004AD8 D680           17539         RET
                      17541 ; rs232cmd.c 4865       
                      17542 ; rs232cmd.c 4866       /************************************************************************
                            **/
                      17543 ; rs232cmd.c 4867       /* FactGenlockGenPhase                                                   
                                                                                                                         RS23
                            2CMD.C  */
                      17544 ; rs232cmd.c 4868       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17545 ; rs232cmd.c 4869       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 287

ADDR   CODE            LINE SOURCELINE
                      17546 ; rs232cmd.c 4870       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17547 ; rs232cmd.c 4871       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17548 ; rs232cmd.c 4872       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17549 ; rs232cmd.c 4873       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17550 ; rs232cmd.c 4874       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17551 ; rs232cmd.c 4875       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17552 ; rs232cmd.c 4876       /************************************************************************
                            **/
                      17553 ; rs232cmd.c 4877       void FactGenlockGenPhase( void)
                      17554 ; rs232cmd.c 4878       {
                      17555         ALIGN   1
                      17557         PUBLIC  _FactGenlockGenPhase
004ADA                17558 _FactGenlockGenPhase:
004ADA 0F30           17562         PUSH.W  R4, R5
004ADC 99720026       17564         SUB.W   R7,#026H
                      17569 ; rs232cmd.c 4879               char buffer[30];
                      17570 ; rs232cmd.c 4880               UL PhaseG, PhaseM;
                      17571 ; rs232cmd.c 4881       
                      17572 ; rs232cmd.c 4882               if ( CmdExecute && !SCPIError)
004AE0 964842rr       17574         MOV.B   ES,#SEG( _CmdExecute )
004AE4 9908rrrr       17575         MOV.W   R0,#SOF( _CmdExecute )
004AE8 8200           17576         MOV.B   R0L,[R0]
                      17577         BEQ     _1245
004AEA F202           +17577 ;       BNE     _LG_1194
004AEC D5008A         +17577 ;       JMP.L   _1245
004AF0 D5008A00       +17577 ;       JMP.L   _1245
004AF0                +17577 _LG_1194:
004AF0 964842rr       17578         MOV.B   ES,#SEG( _SCPIError )
004AF4 9908rrrr       17579         MOV.W   R0,#SOF( _SCPIError )
004AF8 8A00           17580         MOV.W   R0,[R0]
                      17581         BNE     _1245
004AFA F302           +17581 ;       BEQ     _LG_1196
004AFC D50082         +17581 ;       JMP.L   _1245
004B00 D5008200       +17581 ;       JMP.L   _1245
004B00                +17581 _LG_1196:
                      17582 ; rs232cmd.c 4883               {
                      17583 ; rs232cmd.c 4884                       if ( CmdRequest)
004B00 964842rr       17585         MOV.B   ES,#SEG( _CmdRequest )
004B04 9908rrrr       17586         MOV.W   R0,#SOF( _CmdRequest )
004B08 8200           17587         MOV.B   R0L,[R0]
004B0A F32E           17588         BEQ     _1237
                      17589 ; rs232cmd.c 4885                       {
                      17590 ; rs232cmd.c 4886                               if ( ParCnt)
004B0C 964842rr       17592         MOV.B   ES,#SEG( _ParCnt )
004B10 9908rrrr       17593         MOV.W   R0,#SOF( _ParCnt )
004B14 8200           17594         MOV.B   R0L,[R0]
004B16 F306           17595         BEQ     _1236
                      17596 ; rs232cmd.c 4887                                       SCPIError = SyntaxErr;
004B18 964842rr       17598         MOV.B   ES,#SEG( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 288

ADDR   CODE            LINE SOURCELINE
004B1C 9908rrrr       17599         MOV.W   R0,#SOF( _SCPIError )
004B20 BA03           17600         MOV.W   [R0],#03H
004B22 FE6F           17601         BR      _1245
004B22 FE6F           17601         BR      _1245
004B24                17602 _1236:
                      17603 ; rs232cmd.c 4888                               else
                      17604 ; rs232cmd.c 4889                               {
                      17605 ; rs232cmd.c 4890                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .GenlockCalibration.PhaseG, 
                      17606 ; rs232cmd.c 4891                                                                                
                                                                                                Calibration.GenlockCalibratio
                            n.PhaseM);
004B24 91A8rr         17608         MOV.B   R5L,#SEG( __lc_bs )
004B27 71BB           17609         XOR.B   R5H,R5H
004B29 8947           17610         MOV.W   R4,R7
004B2B 964842rr       17611         MOV.B   ES,#SEG( _Calibration+126 )
004B2F 9918rrrr       17612         MOV.W   R1,#SOF( _Calibration+126 )
004B33 8B01           17613         MOV.W   R0,[R1+]
004B35 8A11           17614         MOV.W   R1,[R1]
004B37 964842rr       17615         MOV.B   ES,#SEG( _Calibration+134 )
004B3B 9938rrrr       17616         MOV.W   R3,#SOF( _Calibration+134 )
004B3F 8B23           17617         MOV.W   R2,[R3+]
004B41 8A33           17618         MOV.W   R3,[R3]
004B43 0F0C           17619         PUSH.W  R2, R3
004B45 0F03           17621         PUSH.W  R0, R1
004B47 9918rrrr       17623         MOV.W   R1,#SEG( _1223 )
004B4B 9908rrrr       17624         MOV.W   R0,#SOF( _1223 )
004B4F 0F03           17625         PUSH.W  R0, R1
004B51 8915           17627         MOV.W   R1,R5
004B53 8904           17628         MOV.W   R0,R4
                      17629         CALL    _sprintf
004B55 C4rrrrrr       +17629 ;       FCALL   _sprintf
004B59 9970000C       17630         ADD.W   R7,#0CH
                      17632 ; rs232cmd.c 4892                                       rs232puts( buffer);
004B5D 8915           17634         MOV.W   R1,R5
004B5F 8904           17635         MOV.W   R0,R4
                      17636         CALL    _rs232puts
004B61 C4rrrrrr       +17636 ;       FCALL   _rs232puts
                      17637 ; rs232cmd.c 4893                               }
                      17638 ; rs232cmd.c 4894                       }
004B65 FE4E           17640         BR      _1245
004B65 FE4E00         17640         BR      _1245
004B68                17641 _1237:
                      17642 ; rs232cmd.c 4895                       else
                      17643 ; rs232cmd.c 4896                       {
                      17644 ; rs232cmd.c 4897                               if ( !PasswordProtected)
004B68 964842rr       17646         MOV.B   ES,#SEG( _PasswordProtected )
004B6C 9908rrrr       17647         MOV.W   R0,#SOF( _PasswordProtected )
004B70 8A00           17648         MOV.W   R0,[R0]
004B72 F247           17649         BNE     _1245
                      17650 ; rs232cmd.c 4898                               {
                      17651 ; rs232cmd.c 4899                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
004B74 964842rr       17653         MOV.B   ES,#SEG( _ParCnt )
004B78 9908rrrr       17654         MOV.W   R0,#SOF( _ParCnt )
004B7C 8200           17655         MOV.B   R0L,[R0]
004B7E 910402         17656         CMP.B   R0L,#02H
004B81 F21B           17657         BNE     _1238
004B83 9918rrrr       17658         MOV.W   R1,#SEG( _Cmd )
004B87 9908rrrr       17659         MOV.W   R0,#SOF( _Cmd )
004B8B 9168rr         17660         MOV.B   R3L,#SEG( __lc_bs )
004B8E 7177           17661         XOR.B   R3H,R3H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 289

ADDR   CODE            LINE SOURCELINE
004B90 40271E         17662         LEA     R2,R7+30
004B93 91A8rr         17663         MOV.B   R5L,#SEG( __lc_bs )
004B96 71BB           17664         XOR.B   R5H,R5H
004B98 404722         17665         LEA     R4,R7+34
004B9B 0F30           17666         PUSH.W  R4, R5
004B9D 0F0C           17668         PUSH.W  R2, R3
004B9F 9938rrrr       17670         MOV.W   R3,#SEG( _1034 )
004BA3 9928rrrr       17671         MOV.W   R2,#SOF( _1034 )
004BA7 0F0C           17672         PUSH.W  R2, R3
                      17674         CALL    _sscanf
004BA9 C4rrrrrr       +17674 ;       FCALL   _sscanf
004BAD 9970000C       17675         ADD.W   R7,#0CH
004BB1 99040002       17677         CMP.W   R0,#02H
004BB5 F307           17678         BEQ     _1239
004BB5 F30700         17678         BEQ     _1239
004BB8                17679 _1238:
                      17680 ; rs232cmd.c 4900                                               SCPIError = SyntaxErr;
004BB8 964842rr       17682         MOV.B   ES,#SEG( _SCPIError )
004BBC 9908rrrr       17683         MOV.W   R0,#SOF( _SCPIError )
004BC0 BA03           17684         MOV.W   [R0],#03H
004BC2 FE1F           17685         BR      _1245
004BC2 FE1F           17685         BR      _1245
004BC4                17686 _1239:
                      17687 ; rs232cmd.c 4901                                       else
                      17688 ; rs232cmd.c 4902                                       {
                      17689 ; rs232cmd.c 4903                                               Calibration.GenlockCalibration.Ph
                            aseG = PhaseG;
004BC4 8C1720         17691         MOV.W   R1,[R7+32]
004BC7 8C071E         17692         MOV.W   R0,[R7+30]
004BCA 964842rr       17693         MOV.B   ES,#SEG( _Calibration+126 )
004BCE 9928rrrr       17694         MOV.W   R2,#SOF( _Calibration+126 )
004BD2 8B0A           17695         MOV.W   [R2+],R0
004BD4 8A1A           17696         MOV.W   [R2],R1
                      17697 ; rs232cmd.c 4904                                               Calibration.GenlockCalibration.Ph
                            aseM = PhaseM;
004BD6 8C1724         17699         MOV.W   R1,[R7+36]
004BD9 8C0722         17700         MOV.W   R0,[R7+34]
004BDC 964842rr       17701         MOV.B   ES,#SEG( _Calibration+134 )
004BE0 9928rrrr       17702         MOV.W   R2,#SOF( _Calibration+134 )
004BE4 8B0A           17703         MOV.W   [R2+],R0
004BE6 8A1A           17704         MOV.W   [R2],R1
                      17705 ; rs232cmd.c 4905                                       
                      17706 ; rs232cmd.c 4906                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
004BE8 9918rrrr       17708         MOV.W   R1,#SEG( _Calibration )
004BEC 9908rrrr       17709         MOV.W   R0,#SOF( _Calibration )
004BF0 964842rr       17710         MOV.B   ES,#SEG( _CalibrationPtr )
004BF4 9928rrrr       17711         MOV.W   R2,#SOF( _CalibrationPtr )
004BF8 8A22           17712         MOV.W   R2,[R2]
004BFA 993800E0       17713         MOV.W   R3,#0E0H
                      17714         CALL    _NV_Store
004BFE C4rrrrrr       +17714 ;       FCALL   _NV_Store
                      17715 ; rs232cmd.c 4907                                       }
                      17716 ; rs232cmd.c 4908                               }
                      17717 ; rs232cmd.c 4909                       }
                      17718 ; rs232cmd.c 4910               }
004C02                17720 _1245:
                      17721 ; rs232cmd.c 4911       }
004C02 99700026       17723         ADD.W   R7,#026H
004C06 2F30           17725         POP.W   R4, R5
004C08 D680           17727         RET
                      17729 ; rs232cmd.c 4912       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 290

ADDR   CODE            LINE SOURCELINE
                      17730 ; rs232cmd.c 4913       /************************************************************************
                            **/
                      17731 ; rs232cmd.c 4914       /* FactBBGenDate                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      17732 ; rs232cmd.c 4915       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17733 ; rs232cmd.c 4916       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      17734 ; rs232cmd.c 4917       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      17735 ; rs232cmd.c 4918       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17736 ; rs232cmd.c 4919       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17737 ; rs232cmd.c 4920       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17738 ; rs232cmd.c 4921       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17739 ; rs232cmd.c 4922       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17740 ; rs232cmd.c 4923       /************************************************************************
                            **/
                      17741 ; rs232cmd.c 4924       void FactBBGenDate( void)
                      17742 ; rs232cmd.c 4925       {
                      17743         ALIGN   1
                      17745         PUBLIC  _FactBBGenDate
004C0A                17746 _FactBBGenDate:
004C0A 0F30           17750         PUSH.W  R4, R5
004C0C 9972001E       17752         SUB.W   R7,#01EH
                      17758 ; rs232cmd.c 4926               UI year, month, day;
                      17759 ; rs232cmd.c 4927               char buffer[20];
                      17760 ; rs232cmd.c 4928       
                      17761 ; rs232cmd.c 4929               if ( CmdExecute && !SCPIError)
004C10 964842rr       17763         MOV.B   ES,#SEG( _CmdExecute )
004C14 9908rrrr       17764         MOV.W   R0,#SOF( _CmdExecute )
004C18 8200           17765         MOV.B   R0L,[R0]
                      17766         BEQ     _1259
004C1A F202           +17766 ;       BNE     _LG_1208
004C1C D500D0         +17766 ;       JMP.L   _1259
004C20 D500D000       +17766 ;       JMP.L   _1259
004C20                +17766 _LG_1208:
004C20 964842rr       17767         MOV.B   ES,#SEG( _SCPIError )
004C24 9908rrrr       17768         MOV.W   R0,#SOF( _SCPIError )
004C28 8A00           17769         MOV.W   R0,[R0]
                      17770         BNE     _1259
004C2A F302           +17770 ;       BEQ     _LG_1210
004C2C D500C8         +17770 ;       JMP.L   _1259
004C30 D500C800       +17770 ;       JMP.L   _1259
004C30                +17770 _LG_1210:
                      17771 ; rs232cmd.c 4930               {
                      17772 ; rs232cmd.c 4931                       if ( CmdRequest)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 291

ADDR   CODE            LINE SOURCELINE
004C30 964842rr       17774         MOV.B   ES,#SEG( _CmdRequest )
004C34 9908rrrr       17775         MOV.W   R0,#SOF( _CmdRequest )
004C38 8200           17776         MOV.B   R0L,[R0]
004C3A F358           17777         BEQ     _1249
                      17778 ; rs232cmd.c 4932                       {
                      17779 ; rs232cmd.c 4933                               if ( ParCnt)
004C3C 964842rr       17781         MOV.B   ES,#SEG( _ParCnt )
004C40 9908rrrr       17782         MOV.W   R0,#SOF( _ParCnt )
004C44 8200           17783         MOV.B   R0L,[R0]
004C46 F307           17784         BEQ     _1248
                      17785 ; rs232cmd.c 4934                                       SCPIError = SyntaxErr;
004C48 964842rr       17787         MOV.B   ES,#SEG( _SCPIError )
004C4C 9908rrrr       17788         MOV.W   R0,#SOF( _SCPIError )
004C50 BA03           17789         MOV.W   [R0],#03H
                      17790         BR      _1259
004C52 D500B5         +17790         JMP.L   _1259
004C52 D500B500       +17790         JMP.L   _1259
004C56                17791 _1248:
                      17792 ; rs232cmd.c 4935                               else
                      17793 ; rs232cmd.c 4936                               {
                      17794 ; rs232cmd.c 4937                                       day = Calibration.BBCalibration[Suffix[0]
                            ].Date % 100;
004C56 964842rr       17796         MOV.B   ES,#SEG( _Suffix )
004C5A 9908rrrr       17797         MOV.W   R0,#SOF( _Suffix )
004C5E 8A00           17798         MOV.W   R0,[R0]
004C60 E9000014       17799         MULU.W  R0,#014H
004C64 B910           17800         MOVS.W  R1,#00H
004C66 964842rr       17801         MOV.B   ES,#SEG( _Calibration+138 )
004C6A 8D10rrrr       17802         MOV.W   R1,[R0+SOF( _Calibration+140 )]
004C6E 8D00rrrr       17803         MOV.W   R0,[R0+SOF( _Calibration+138 )]
004C72 B930           17804         MOV.W   R3,#00H
004C74 99280064       17805         MOV.W   R2,#064H
004C78 8C1F02         17806         MOV.W   [R7+2],R1
004C7B 8A0F           17807         MOV.W   [R7],R0
004C7D C4rrrrrr       17808         FCALL   __UMODL
004C81 8C0F08         17809         MOV.W   [R7+8],R0
                      17810 ; rs232cmd.c 4938                                       month = ( Calibration.BBCalibration[Suffi
                            x[0]].Date / 100) % 100;
004C84 B930           17812         MOV.W   R3,#00H
004C86 99280064       17813         MOV.W   R2,#064H
004C8A 8953           17814         MOV.W   R5,R3
004C8C 8942           17815         MOV.W   R4,R2
004C8E 8C1702         17816         MOV.W   R1,[R7+2]
004C91 8A07           17817         MOV.W   R0,[R7]
004C93 C4rrrrrr       17818         FCALL   __UDIVL
004C97 8935           17819         MOV.W   R3,R5
004C99 8924           17820         MOV.W   R2,R4
004C9B C4rrrrrr       17821         FCALL   __UMODL
004C9F 8C0F06         17822         MOV.W   [R7+6],R0
                      17823 ; rs232cmd.c 4939                                       year = ( Calibration.BBCalibration[Suffix
                            [0]].Date / 10000);
004CA2 B930           17825         MOV.W   R3,#00H
004CA4 99282710       17826         MOV.W   R2,#02710H
004CA8 8C1702         17827         MOV.W   R1,[R7+2]
004CAB 8A07           17828         MOV.W   R0,[R7]
004CAD C4rrrrrr       17829         FCALL   __UDIVL
004CB1 8C0F04         17830         MOV.W   [R7+4],R0
                      17831 ; rs232cmd.c 4940       
                      17832 ; rs232cmd.c 4941                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
004CB4 91A8rr         17834         MOV.B   R5L,#SEG( __lc_bs )
004CB7 71BB           17835         XOR.B   R5H,R5H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 292

ADDR   CODE            LINE SOURCELINE
004CB9 40470A         17836         LEA     R4,R7+10
004CBC 8C0708         17837         MOV.W   R0,[R7+8]
004CBF 0F01           17838         PUSH.W  R0
004CC1 8C0708         17840         MOV.W   R0,[R7+8]
004CC4 0F01           17841         PUSH.W  R0
004CC6 8C0708         17843         MOV.W   R0,[R7+8]
004CC9 0F01           17844         PUSH.W  R0
004CCB 9918rrrr       17846         MOV.W   R1,#SEG( _1170 )
004CCF 9908rrrr       17847         MOV.W   R0,#SOF( _1170 )
004CD3 0F03           17848         PUSH.W  R0, R1
004CD5 8915           17850         MOV.W   R1,R5
004CD7 8904           17851         MOV.W   R0,R4
                      17852         CALL    _sprintf
004CD9 C4rrrrrr       +17852 ;       FCALL   _sprintf
004CDD 9970000A       17853         ADD.W   R7,#0AH
                      17855 ; rs232cmd.c 4942       
                      17856 ; rs232cmd.c 4943                                       rs232puts( buffer);
004CE1 8915           17858         MOV.W   R1,R5
004CE3 8904           17859         MOV.W   R0,R4
                      17860         CALL    _rs232puts
004CE5 C4rrrrrr       +17860 ;       FCALL   _rs232puts
                      17861 ; rs232cmd.c 4944                               }
                      17862 ; rs232cmd.c 4945                       }
004CE9 FE6A           17864         BR      _1259
004CE9 FE6A00         17864         BR      _1259
004CEC                17865 _1249:
                      17866 ; rs232cmd.c 4946                       else
                      17867 ; rs232cmd.c 4947                       {
                      17868 ; rs232cmd.c 4948                               if ( !PasswordProtected)
004CEC 964842rr       17870         MOV.B   ES,#SEG( _PasswordProtected )
004CF0 9908rrrr       17871         MOV.W   R0,#SOF( _PasswordProtected )
004CF4 8A00           17872         MOV.W   R0,[R0]
004CF6 F263           17873         BNE     _1259
                      17874 ; rs232cmd.c 4949                               {
                      17875 ; rs232cmd.c 4950                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
004CF8 964842rr       17877         MOV.B   ES,#SEG( _ParCnt )
004CFC 9908rrrr       17878         MOV.W   R0,#SOF( _ParCnt )
004D00 8200           17879         MOV.B   R0L,[R0]
004D02 910403         17880         CMP.B   R0L,#03H
004D05 F220           17881         BNE     _1250
004D07 9168rr         17882         MOV.B   R3L,#SEG( __lc_bs )
004D0A 7177           17883         XOR.B   R3H,R3H
004D0C 402704         17884         LEA     R2,R7+4
004D0F 91A8rr         17885         MOV.B   R5L,#SEG( __lc_bs )
004D12 71BB           17886         XOR.B   R5H,R5H
004D14 404706         17887         LEA     R4,R7+6
004D17 9128rr         17888         MOV.B   R1L,#SEG( __lc_bs )
004D1A 7133           17889         XOR.B   R1H,R1H
004D1C 400708         17890         LEA     R0,R7+8
004D1F 0F03           17891         PUSH.W  R0, R1
004D21 0F30           17893         PUSH.W  R4, R5
004D23 0F0C           17895         PUSH.W  R2, R3
004D25 9938rrrr       17897         MOV.W   R3,#SEG( _1171 )
004D29 9928rrrr       17898         MOV.W   R2,#SOF( _1171 )
004D2D 0F0C           17899         PUSH.W  R2, R3
004D2F 9918rrrr       17901         MOV.W   R1,#SEG( _Cmd )
004D33 9908rrrr       17902         MOV.W   R0,#SOF( _Cmd )
                      17903         CALL    _sscanf
004D37 C4rrrrrr       +17903 ;       FCALL   _sscanf
004D3B 99700010       17904         ADD.W   R7,#010H
004D3F 99040003       17906         CMP.W   R0,#03H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 293

ADDR   CODE            LINE SOURCELINE
004D43 F307           17907         BEQ     _1251
004D43 F30700         17907         BEQ     _1251
004D46                17908 _1250:
                      17909 ; rs232cmd.c 4951                                               SCPIError = SyntaxErr;
004D46 964842rr       17911         MOV.B   ES,#SEG( _SCPIError )
004D4A 9908rrrr       17912         MOV.W   R0,#SOF( _SCPIError )
004D4E BA03           17913         MOV.W   [R0],#03H
004D50 FE36           17914         BR      _1259
004D50 FE36           17914         BR      _1259
004D52                17915 _1251:
                      17916 ; rs232cmd.c 4952                                       else
                      17917 ; rs232cmd.c 4953                                       {
                      17918 ; rs232cmd.c 4954                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
004D52 8C0704         17920         MOV.W   R0,[R7+4]
004D55 8C1706         17921         MOV.W   R1,[R7+6]
004D58 8C2708         17922         MOV.W   R2,[R7+8]
                      17923         CALL    _ValidateDate
004D5B C4rrrrrr       +17923 ;       FCALL   _ValidateDate
004D5F 6900           17924         OR.W    R0,R0
004D61 F208           17925         BNE     _1252
                      17926 ; rs232cmd.c 4955                                                       SCPIError = ExecErr;
004D63 964842rr       17928         MOV.B   ES,#SEG( _SCPIError )
004D67 9908rrrr       17929         MOV.W   R0,#SOF( _SCPIError )
004D6B 9A08001D       17930         MOV.W   [R0],#01DH
004D6F FE27           17931         BR      _1259
004D6F FE2700         17931         BR      _1259
004D72                17932 _1252:
                      17933 ; rs232cmd.c 4956                                               else
                      17934 ; rs232cmd.c 4957                                               {
                      17935 ; rs232cmd.c 4958                                                       Calibration.BBCalibration
                            [Suffix[0]].Date = day + 100*month + 10000*year;
004D72 8C0706         17937         MOV.W   R0,[R7+6]
004D75 E9000064       17938         MULU.W  R0,#064H
004D79 0C0708         17939         ADD.W   R0,[R7+8]
004D7C 8C2704         17940         MOV.W   R2,[R7+4]
004D7F E9202710       17941         MULU.W  R2,#02710H
004D83 0902           17942         ADD.W   R0,R2
004D85 B910           17943         MOVS.W  R1,#00H
004D87 964842rr       17944         MOV.B   ES,#SEG( _Suffix )
004D8B 9928rrrr       17945         MOV.W   R2,#SOF( _Suffix )
004D8F 8A22           17946         MOV.W   R2,[R2]
004D91 E9200014       17947         MULU.W  R2,#014H
004D95 B930           17948         MOVS.W  R3,#00H
004D97 964842rr       17949         MOV.B   ES,#SEG( _Calibration+138 )
004D9B 8D0Arrrr       17950         MOV.W   [R2+SOF( _Calibration+138 )],R0
004D9F 8D1Arrrr       17951         MOV.W   [R2+SOF( _Calibration+140 )],R1
                      17952 ; rs232cmd.c 4959                                               
                      17953 ; rs232cmd.c 4960                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
004DA3 9918rrrr       17955         MOV.W   R1,#SEG( _Calibration )
004DA7 9908rrrr       17956         MOV.W   R0,#SOF( _Calibration )
004DAB 964842rr       17957         MOV.B   ES,#SEG( _CalibrationPtr )
004DAF 9928rrrr       17958         MOV.W   R2,#SOF( _CalibrationPtr )
004DB3 8A22           17959         MOV.W   R2,[R2]
004DB5 993800E0       17960         MOV.W   R3,#0E0H
                      17961         CALL    _NV_Store
004DB9 C4rrrrrr       +17961 ;       FCALL   _NV_Store
                      17962 ; rs232cmd.c 4961                                               }
                      17963 ; rs232cmd.c 4962                                       }                               
                      17964 ; rs232cmd.c 4963                               }
                      17965 ; rs232cmd.c 4964                       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 294

ADDR   CODE            LINE SOURCELINE
                      17966 ; rs232cmd.c 4965               }
004DBE                17968 _1259:
                      17969 ; rs232cmd.c 4966       }
004DBE 9970001E       17971         ADD.W   R7,#01EH
004DC2 2F30           17973         POP.W   R4, R5
004DC4 D680           17975         RET
                      17977 ; rs232cmd.c 4967       
                      17978 ; rs232cmd.c 4968       /************************************************************************
                            **/
                      17979 ; rs232cmd.c 4969       /* FactBBGenVersion                                                      
                                                                                                                             
                                         RS232CMD.C */
                      17980 ; rs232cmd.c 4970       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17981 ; rs232cmd.c 4971       /* Author:              Kim Engedahl, DEV, 000504                        
                                                                                                                             
                                    */
                      17982 ; rs232cmd.c 4972       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      17983 ; rs232cmd.c 4973       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      17984 ; rs232cmd.c 4974       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      17985 ; rs232cmd.c 4975       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      17986 ; rs232cmd.c 4976       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      17987 ; rs232cmd.c 4977       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      17988 ; rs232cmd.c 4978       /************************************************************************
                            **/
                      17989 ; rs232cmd.c 4979       void FactBBGenVersion( void)
                      17990 ; rs232cmd.c 4980       {
                      17991         ALIGN   1
                      17993         PUBLIC  _FactBBGenVersion
004DC6                17994 _FactBBGenVersion:
004DC6 0F30           17998         PUSH.W  R4, R5
004DC8 9972000A       18000         SUB.W   R7,#0AH
                      18003 ; rs232cmd.c 4981               char result[10];
                      18004 ; rs232cmd.c 4982       
                      18005 ; rs232cmd.c 4983               if ( CmdExecute && !SCPIError)
004DCC 964842rr       18007         MOV.B   ES,#SEG( _CmdExecute )
004DD0 9908rrrr       18008         MOV.W   R0,#SOF( _CmdExecute )
004DD4 8200           18009         MOV.B   R0L,[R0]
004DD6 F33D           18010         BEQ     _1270
004DD8 964842rr       18011         MOV.B   ES,#SEG( _SCPIError )
004DDC 9908rrrr       18012         MOV.W   R0,#SOF( _SCPIError )
004DE0 8A00           18013         MOV.W   R0,[R0]
004DE2 F237           18014         BNE     _1270
                      18015 ; rs232cmd.c 4984               {
                      18016 ; rs232cmd.c 4985                       if ( CmdRequest)
004DE4 964842rr       18018         MOV.B   ES,#SEG( _CmdRequest )
004DE8 9908rrrr       18019         MOV.W   R0,#SOF( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 295

ADDR   CODE            LINE SOURCELINE
004DEC 8200           18020         MOV.B   R0L,[R0]
004DEE F32C           18021         BEQ     _1265
                      18022 ; rs232cmd.c 4986                       {
                      18023 ; rs232cmd.c 4987                               if ( ParCnt || Suffix[0])
004DF0 964842rr       18025         MOV.B   ES,#SEG( _ParCnt )
004DF4 9908rrrr       18026         MOV.W   R0,#SOF( _ParCnt )
004DF8 8200           18027         MOV.B   R0L,[R0]
004DFA F206           18028         BNE     _1262
004DFC 964842rr       18029         MOV.B   ES,#SEG( _Suffix )
004E00 9908rrrr       18030         MOV.W   R0,#SOF( _Suffix )
004E04 8A00           18031         MOV.W   R0,[R0]
004E06 F306           18032         BEQ     _1263
004E06 F306           18032         BEQ     _1263
004E08                18033 _1262:
                      18034 ; rs232cmd.c 4988                                       SCPIError = SyntaxErr;
004E08 964842rr       18036         MOV.B   ES,#SEG( _SCPIError )
004E0C 9908rrrr       18037         MOV.W   R0,#SOF( _SCPIError )
004E10 BA03           18038         MOV.W   [R0],#03H
004E12 FE1F           18039         BR      _1270
004E12 FE1F           18039         BR      _1270
004E14                18040 _1263:
                      18041 ; rs232cmd.c 4989                               else
                      18042 ; rs232cmd.c 4990                               {
                      18043 ; rs232cmd.c 4991                                       if ( BBVersion( result) == OK)
004E14 91A8rr         18045         MOV.B   R5L,#SEG( __lc_bs )
004E17 71BB           18046         XOR.B   R5H,R5H
004E19 8947           18047         MOV.W   R4,R7
004E1B 8915           18048         MOV.W   R1,R5
004E1D 8904           18049         MOV.W   R0,R4
                      18050         CALL    _BBVersion
004E1F C4rrrrrr       +18050 ;       FCALL   _BBVersion
004E23 9904FFFF       18051         CMP.W   R0,#0FFFFH
004E27 F209           18052         BNE     _1264
                      18053 ; rs232cmd.c 4992                                       {
                      18054 ; rs232cmd.c 4993                                               rs232puts( result);
004E29 8915           18056         MOV.W   R1,R5
004E2B 8904           18057         MOV.W   R0,R4
                      18058         CALL    _rs232puts
004E2D C4rrrrrr       +18058 ;       FCALL   _rs232puts
                      18059 ; rs232cmd.c 4994                                               rs232putchar( '\n');
004E31 91080A         18061         MOV.B   R0L,#0AH
                      18062         CALL    _rs232putchar
004E34 C4rrrrrr       +18062 ;       FCALL   _rs232putchar
                      18063 ; rs232cmd.c 4995                                       }
004E38 FE0C           18065         BR      _1270
004E38 FE0C           18065         BR      _1270
004E3A                18066 _1264:
                      18067 ; rs232cmd.c 4996                                       else
                      18068 ; rs232cmd.c 4997                                               SCPIError = ExecErr;             
                                    
004E3A 964842rr       18070         MOV.B   ES,#SEG( _SCPIError )
004E3E 9908rrrr       18071         MOV.W   R0,#SOF( _SCPIError )
004E42 9A08001D       18072         MOV.W   [R0],#01DH
                      18073 ; rs232cmd.c 4998                               }
                      18074 ; rs232cmd.c 4999                       }
004E46 FE05           18076         BR      _1270
004E46 FE05           18076         BR      _1270
004E48                18077 _1265:
                      18078 ; rs232cmd.c 5000                       else
                      18079 ; rs232cmd.c 5001                               SCPIError = SyntaxErr;
004E48 964842rr       18081         MOV.B   ES,#SEG( _SCPIError )
004E4C 9908rrrr       18082         MOV.W   R0,#SOF( _SCPIError )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 296

ADDR   CODE            LINE SOURCELINE
004E50 BA03           18083         MOV.W   [R0],#03H
                      18084 ; rs232cmd.c 5002               }
004E52                18086 _1270:
                      18087 ; rs232cmd.c 5003       }
004E52 9970000A       18089         ADD.W   R7,#0AH
004E56 2F30           18091         POP.W   R4, R5
004E58 D680           18093         RET
                      18095 ; rs232cmd.c 5004       
                      18096 ; rs232cmd.c 5005       /************************************************************************
                            **/
                      18097 ; rs232cmd.c 5006       /* FactBBGenSignal                                                       
                                                                                                                             
                                         RS232CMD.C */
                      18098 ; rs232cmd.c 5007       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18099 ; rs232cmd.c 5008       /* Author:              Kim Engedahl, DEV, 000503                        
                                                                                                                             
                                    */
                      18100 ; rs232cmd.c 5009       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      18101 ; rs232cmd.c 5010       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18102 ; rs232cmd.c 5011       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18103 ; rs232cmd.c 5012       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18104 ; rs232cmd.c 5013       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18105 ; rs232cmd.c 5014       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18106 ; rs232cmd.c 5015       /************************************************************************
                            **/
                      18107 ; rs232cmd.c 5016       void FactBBGenSignal( void)
                      18108 ; rs232cmd.c 5017       {
                      18109         ALIGN   1
                      18111         PUBLIC  _FactBBGenSignal
004E5A                18112 _FactBBGenSignal:
                      18118 ; rs232cmd.c 5018               int signal;
                      18119 ; rs232cmd.c 5019       
                      18120 ; rs232cmd.c 5020               if ( CmdExecute && !SCPIError)
004E5A 964842rr       18122         MOV.B   ES,#SEG( _CmdExecute )
004E5E 9908rrrr       18123         MOV.W   R0,#SOF( _CmdExecute )
004E62 8200           18124         MOV.B   R0L,[R0]
004E64 F349           18125         BEQ     _1283
004E66 964842rr       18126         MOV.B   ES,#SEG( _SCPIError )
004E6A 9908rrrr       18127         MOV.W   R0,#SOF( _SCPIError )
004E6E 8A00           18128         MOV.W   R0,[R0]
004E70 F243           18129         BNE     _1283
                      18130 ; rs232cmd.c 5021               {
                      18131 ; rs232cmd.c 5022                       if ( CmdRequest)
004E72 964842rr       18133         MOV.B   ES,#SEG( _CmdRequest )
004E76 9908rrrr       18134         MOV.W   R0,#SOF( _CmdRequest )
004E7A 8200           18135         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 297

ADDR   CODE            LINE SOURCELINE
004E7C F306           18136         BEQ     _1272
                      18137 ; rs232cmd.c 5023                               SCPIError = SyntaxErr;
004E7E 964842rr       18139         MOV.B   ES,#SEG( _SCPIError )
004E82 9908rrrr       18140         MOV.W   R0,#SOF( _SCPIError )
004E86 BA03           18141         MOV.W   [R0],#03H
004E88 D680           18142         RET
004E88 D680           18142         RET
004E8A                18143 _1272:
                      18144 ; rs232cmd.c 5024                       else
                      18145 ; rs232cmd.c 5025                       {
                      18146 ; rs232cmd.c 5026                               if ( !PasswordProtected)
004E8A 964842rr       18148         MOV.B   ES,#SEG( _PasswordProtected )
004E8E 9908rrrr       18149         MOV.W   R0,#SOF( _PasswordProtected )
004E92 8A00           18150         MOV.W   R0,[R0]
004E94 F231           18151         BNE     _1283
                      18152 ; rs232cmd.c 5027                               {
                      18153 ; rs232cmd.c 5028                                       if ( ParCnt != 1)
004E96 964842rr       18155         MOV.B   ES,#SEG( _ParCnt )
004E9A 9908rrrr       18156         MOV.W   R0,#SOF( _ParCnt )
004E9E 8200           18157         MOV.B   R0L,[R0]
004EA0 910401         18158         CMP.B   R0L,#01H
004EA3 F307           18159         BEQ     _1273
                      18160 ; rs232cmd.c 5029                                               SCPIError = SyntaxErr;
004EA5 964842rr       18162         MOV.B   ES,#SEG( _SCPIError )
004EA9 9908rrrr       18163         MOV.W   R0,#SOF( _SCPIError )
004EAD BA03           18164         MOV.W   [R0],#03H
004EAF D680           18165         RET
004EAF D68000         18165         RET
004EB2                18166 _1273:
                      18167 ; rs232cmd.c 5030                                       else
                      18168 ; rs232cmd.c 5031                                       {
                      18169 ; rs232cmd.c 5032                                               signal = FindParameter( Cmd, Fact
                            BBGenSignalPar);
004EB2 9918rrrr       18171         MOV.W   R1,#SEG( _Cmd )
004EB6 9908rrrr       18172         MOV.W   R0,#SOF( _Cmd )
004EBA 9938rrrr       18173         MOV.W   R3,#SEG( _FactBBGenSignalPar )
004EBE 9928rrrr       18174         MOV.W   R2,#SOF( _FactBBGenSignalPar )
004EC2 C5086E         18175         CALL    _FindParameter
                      18177 ; rs232cmd.c 5033               
                      18178 ; rs232cmd.c 5034                                               switch ( signal)
004EC5 99040000       18180         CMP.W   R0,#00H
004EC9 F305           18181         BEQ     _1274
004ECB 99040001       18182         CMP.W   R0,#01H
004ECF F308           18183         BEQ     _1275
004ED1 FE0D           18184         BR      _1276
                      18185 ; rs232cmd.c 5035                                               {
                      18186 ; rs232cmd.c 5036                                                       case 0:
004ED4                18188 _1274:
                      18189 ; rs232cmd.c 5037                                                               BBControlPort = 0
                            ;
004ED4 964842rr       18191         MOV.B   ES,#SEG( _BBControlPort )
004ED8 9908rrrr       18192         MOV.W   R0,#SOF( _BBControlPort )
004EDC BA00           18193         MOV.W   [R0],#00H
                      18194 ; rs232cmd.c 5038                                                               break;
004EDE D680           18196         RET
                      18197 ; rs232cmd.c 5039       
                      18198 ; rs232cmd.c 5040                                                       case 1:
004EE0                18200 _1275:
                      18201 ; rs232cmd.c 5041                                                               BBControlPort = 1
                            ;
004EE0 964842rr       18203         MOV.B   ES,#SEG( _BBControlPort )
004EE4 9908rrrr       18204         MOV.W   R0,#SOF( _BBControlPort )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 298

ADDR   CODE            LINE SOURCELINE
004EE8 BA01           18205         MOV.W   [R0],#01H
                      18206 ; rs232cmd.c 5042                                                               break;
004EEA D680           18208         RET
                      18209 ; rs232cmd.c 5043       
                      18210 ; rs232cmd.c 5044                                                       default:
004EEC                18212 _1276:
                      18213 ; rs232cmd.c 5045                                                               SCPIError = DataO
                            utOfRange;
004EEC 964842rr       18215         MOV.B   ES,#SEG( _SCPIError )
004EF0 9908rrrr       18216         MOV.W   R0,#SOF( _SCPIError )
004EF4 9A080021       18217         MOV.W   [R0],#021H
                      18218 ; rs232cmd.c 5046                                                               break;
                      18219 ; rs232cmd.c 5047                                               }
                      18220 ; rs232cmd.c 5048                                       }
                      18221 ; rs232cmd.c 5049                               }
                      18222 ; rs232cmd.c 5050                       }
                      18223 ; rs232cmd.c 5051               }
004EF8                18225 _1283:
                      18226 ; rs232cmd.c 5052       }
004EF8 D680           18228         RET
                      18231 ; rs232cmd.c 5053       
                      18232 ; rs232cmd.c 5054       /************************************************************************
                            **/
                      18233 ; rs232cmd.c 5055       /* FactBBGenPhase                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      18234 ; rs232cmd.c 5056       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18235 ; rs232cmd.c 5057       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18236 ; rs232cmd.c 5058       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18237 ; rs232cmd.c 5059       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18238 ; rs232cmd.c 5060       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18239 ; rs232cmd.c 5061       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18240 ; rs232cmd.c 5062       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18241 ; rs232cmd.c 5063       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18242 ; rs232cmd.c 5064       /************************************************************************
                            **/
                      18243 ; rs232cmd.c 5065       void FactBBGenPhase( void)
                      18244 ; rs232cmd.c 5066       {
                      18245         ALIGN   1
                      18247         PUBLIC  _FactBBGenPhase
004EFA                18248 _FactBBGenPhase:
004EFA 0F30           18252         PUSH.W  R4, R5
004EFC 99720026       18254         SUB.W   R7,#026H
                      18259 ; rs232cmd.c 5067               char buffer[30];
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 299

ADDR   CODE            LINE SOURCELINE
                      18260 ; rs232cmd.c 5068               UL PhaseG, PhaseM;
                      18261 ; rs232cmd.c 5069       
                      18262 ; rs232cmd.c 5070               if ( CmdExecute && !SCPIError)
004F00 964842rr       18264         MOV.B   ES,#SEG( _CmdExecute )
004F04 9908rrrr       18265         MOV.W   R0,#SOF( _CmdExecute )
004F08 8200           18266         MOV.B   R0L,[R0]
                      18267         BEQ     _1294
004F0A F202           +18267 ;       BNE     _LG_1250
004F0C D5009A         +18267 ;       JMP.L   _1294
004F10 D5009A00       +18267 ;       JMP.L   _1294
004F10                +18267 _LG_1250:
004F10 964842rr       18268         MOV.B   ES,#SEG( _SCPIError )
004F14 9908rrrr       18269         MOV.W   R0,#SOF( _SCPIError )
004F18 8A00           18270         MOV.W   R0,[R0]
                      18271         BNE     _1294
004F1A F302           +18271 ;       BEQ     _LG_1252
004F1C D50092         +18271 ;       JMP.L   _1294
004F20 D5009200       +18271 ;       JMP.L   _1294
004F20                +18271 _LG_1252:
                      18272 ; rs232cmd.c 5071               {
                      18273 ; rs232cmd.c 5072                       if ( CmdRequest)
004F20 964842rr       18275         MOV.B   ES,#SEG( _CmdRequest )
004F24 9908rrrr       18276         MOV.W   R0,#SOF( _CmdRequest )
004F28 8200           18277         MOV.B   R0L,[R0]
004F2A F336           18278         BEQ     _1286
                      18279 ; rs232cmd.c 5073                       {
                      18280 ; rs232cmd.c 5074                               if ( ParCnt)
004F2C 964842rr       18282         MOV.B   ES,#SEG( _ParCnt )
004F30 9908rrrr       18283         MOV.W   R0,#SOF( _ParCnt )
004F34 8200           18284         MOV.B   R0L,[R0]
004F36 F306           18285         BEQ     _1285
                      18286 ; rs232cmd.c 5075                                       SCPIError = SyntaxErr;
004F38 964842rr       18288         MOV.B   ES,#SEG( _SCPIError )
004F3C 9908rrrr       18289         MOV.W   R0,#SOF( _SCPIError )
004F40 BA03           18290         MOV.W   [R0],#03H
004F42 FE7F           18291         BR      _1294
004F42 FE7F           18291         BR      _1294
004F44                18292 _1285:
                      18293 ; rs232cmd.c 5076                               else
                      18294 ; rs232cmd.c 5077                               {
                      18295 ; rs232cmd.c 5078                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .BBCalibration[Suffix[0]].PhaseG, 
                      18296 ; rs232cmd.c 5079                                                                                
                                                                                                Calibration.BBCalibration[Suf
                            fix[0]].PhaseM);
004F44 91A8rr         18298         MOV.B   R5L,#SEG( __lc_bs )
004F47 71BB           18299         XOR.B   R5H,R5H
004F49 8947           18300         MOV.W   R4,R7
004F4B 964842rr       18301         MOV.B   ES,#SEG( _Suffix )
004F4F 9908rrrr       18302         MOV.W   R0,#SOF( _Suffix )
004F53 8A00           18303         MOV.W   R0,[R0]
004F55 E9000014       18304         MULU.W  R0,#014H
004F59 B910           18305         MOVS.W  R1,#00H
004F5B 964842rr       18306         MOV.B   ES,#SEG( _Calibration+142 )
004F5F 8D20rrrr       18307         MOV.W   R2,[R0+SOF( _Calibration+142 )]
004F63 8D30rrrr       18308         MOV.W   R3,[R0+SOF( _Calibration+144 )]
004F67 964842rr       18309         MOV.B   ES,#SEG( _Calibration+148 )
004F6B 8D10rrrr       18310         MOV.W   R1,[R0+SOF( _Calibration+150 )]
004F6F 8D00rrrr       18311         MOV.W   R0,[R0+SOF( _Calibration+148 )]
004F73 0F03           18312         PUSH.W  R0, R1
004F75 0F0C           18314         PUSH.W  R2, R3
004F77 9918rrrr       18316         MOV.W   R1,#SEG( _1223 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 300

ADDR   CODE            LINE SOURCELINE
004F7B 9908rrrr       18317         MOV.W   R0,#SOF( _1223 )
004F7F 0F03           18318         PUSH.W  R0, R1
004F81 8915           18320         MOV.W   R1,R5
004F83 8904           18321         MOV.W   R0,R4
                      18322         CALL    _sprintf
004F85 C4rrrrrr       +18322 ;       FCALL   _sprintf
004F89 9970000C       18323         ADD.W   R7,#0CH
                      18325 ; rs232cmd.c 5080                                       rs232puts( buffer);
004F8D 8915           18327         MOV.W   R1,R5
004F8F 8904           18328         MOV.W   R0,R4
                      18329         CALL    _rs232puts
004F91 C4rrrrrr       +18329 ;       FCALL   _rs232puts
                      18330 ; rs232cmd.c 5081                               }
                      18331 ; rs232cmd.c 5082                       }
004F95 FE56           18333         BR      _1294
004F95 FE5600         18333         BR      _1294
004F98                18334 _1286:
                      18335 ; rs232cmd.c 5083                       else
                      18336 ; rs232cmd.c 5084                       {
                      18337 ; rs232cmd.c 5085                               if ( !PasswordProtected)
004F98 964842rr       18339         MOV.B   ES,#SEG( _PasswordProtected )
004F9C 9908rrrr       18340         MOV.W   R0,#SOF( _PasswordProtected )
004FA0 8A00           18341         MOV.W   R0,[R0]
004FA2 F24F           18342         BNE     _1294
                      18343 ; rs232cmd.c 5086                               {
                      18344 ; rs232cmd.c 5087                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
004FA4 964842rr       18346         MOV.B   ES,#SEG( _ParCnt )
004FA8 9908rrrr       18347         MOV.W   R0,#SOF( _ParCnt )
004FAC 8200           18348         MOV.B   R0L,[R0]
004FAE 910402         18349         CMP.B   R0L,#02H
004FB1 F21B           18350         BNE     _1287
004FB3 9918rrrr       18351         MOV.W   R1,#SEG( _Cmd )
004FB7 9908rrrr       18352         MOV.W   R0,#SOF( _Cmd )
004FBB 9168rr         18353         MOV.B   R3L,#SEG( __lc_bs )
004FBE 7177           18354         XOR.B   R3H,R3H
004FC0 40271E         18355         LEA     R2,R7+30
004FC3 91A8rr         18356         MOV.B   R5L,#SEG( __lc_bs )
004FC6 71BB           18357         XOR.B   R5H,R5H
004FC8 404722         18358         LEA     R4,R7+34
004FCB 0F30           18359         PUSH.W  R4, R5
004FCD 0F0C           18361         PUSH.W  R2, R3
004FCF 9938rrrr       18363         MOV.W   R3,#SEG( _1034 )
004FD3 9928rrrr       18364         MOV.W   R2,#SOF( _1034 )
004FD7 0F0C           18365         PUSH.W  R2, R3
                      18367         CALL    _sscanf
004FD9 C4rrrrrr       +18367 ;       FCALL   _sscanf
004FDD 9970000C       18368         ADD.W   R7,#0CH
004FE1 99040002       18370         CMP.W   R0,#02H
004FE5 F307           18371         BEQ     _1288
004FE5 F30700         18371         BEQ     _1288
004FE8                18372 _1287:
                      18373 ; rs232cmd.c 5088                                               SCPIError = SyntaxErr;
004FE8 964842rr       18375         MOV.B   ES,#SEG( _SCPIError )
004FEC 9908rrrr       18376         MOV.W   R0,#SOF( _SCPIError )
004FF0 BA03           18377         MOV.W   [R0],#03H
004FF2 FE27           18378         BR      _1294
004FF2 FE27           18378         BR      _1294
004FF4                18379 _1288:
                      18380 ; rs232cmd.c 5089                                       else
                      18381 ; rs232cmd.c 5090                                       {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 301

ADDR   CODE            LINE SOURCELINE
                      18382 ; rs232cmd.c 5091                                               Calibration.BBCalibration[Suffix[
                            0]].PhaseG = PhaseG;
004FF4 964842rr       18384         MOV.B   ES,#SEG( _Suffix )
004FF8 9908rrrr       18385         MOV.W   R0,#SOF( _Suffix )
004FFC 8A00           18386         MOV.W   R0,[R0]
004FFE E9000014       18387         MULU.W  R0,#014H
005002 B910           18388         MOVS.W  R1,#00H
005004 8C3720         18389         MOV.W   R3,[R7+32]
005007 8C271E         18390         MOV.W   R2,[R7+30]
00500A 964842rr       18391         MOV.B   ES,#SEG( _Calibration+142 )
00500E 8D28rrrr       18392         MOV.W   [R0+SOF( _Calibration+142 )],R2
005012 8D38rrrr       18393         MOV.W   [R0+SOF( _Calibration+144 )],R3
                      18394 ; rs232cmd.c 5092                                               Calibration.BBCalibration[Suffix[
                            0]].PhaseM = PhaseM;
005016 8C3724         18396         MOV.W   R3,[R7+36]
005019 8C2722         18397         MOV.W   R2,[R7+34]
00501C 964842rr       18398         MOV.B   ES,#SEG( _Calibration+148 )
005020 8D28rrrr       18399         MOV.W   [R0+SOF( _Calibration+148 )],R2
005024 8D38rrrr       18400         MOV.W   [R0+SOF( _Calibration+150 )],R3
                      18401 ; rs232cmd.c 5093                                       
                      18402 ; rs232cmd.c 5094                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005028 9918rrrr       18404         MOV.W   R1,#SEG( _Calibration )
00502C 9908rrrr       18405         MOV.W   R0,#SOF( _Calibration )
005030 964842rr       18406         MOV.B   ES,#SEG( _CalibrationPtr )
005034 9928rrrr       18407         MOV.W   R2,#SOF( _CalibrationPtr )
005038 8A22           18408         MOV.W   R2,[R2]
00503A 993800E0       18409         MOV.W   R3,#0E0H
                      18410         CALL    _NV_Store
00503E C4rrrrrr       +18410 ;       FCALL   _NV_Store
                      18411 ; rs232cmd.c 5095                                       }
                      18412 ; rs232cmd.c 5096                               }
                      18413 ; rs232cmd.c 5097                       }
                      18414 ; rs232cmd.c 5098               }
005042                18416 _1294:
                      18417 ; rs232cmd.c 5099       }
005042 99700026       18419         ADD.W   R7,#026H
005046 2F30           18421         POP.W   R4, R5
005048 D680           18423         RET
                      18425 ; rs232cmd.c 5100       
                      18426 ; rs232cmd.c 5101       /************************************************************************
                            **/
                      18427 ; rs232cmd.c 5102       /* FactBBGenScHPhase                                                     
                                                                                                                             
                                RS232CMD.C  */
                      18428 ; rs232cmd.c 5103       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18429 ; rs232cmd.c 5104       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18430 ; rs232cmd.c 5105       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18431 ; rs232cmd.c 5106       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18432 ; rs232cmd.c 5107       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 302

ADDR   CODE            LINE SOURCELINE
                      18433 ; rs232cmd.c 5108       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18434 ; rs232cmd.c 5109       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18435 ; rs232cmd.c 5110       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18436 ; rs232cmd.c 5111       /************************************************************************
                            **/
                      18437 ; rs232cmd.c 5112       void FactBBGenScHPhase( void)
                      18438 ; rs232cmd.c 5113       {
                      18439         ALIGN   1
                      18441         PUBLIC  _FactBBGenScHPhase
00504A                18442 _FactBBGenScHPhase:
00504A 0F30           18446         PUSH.W  R4, R5
00504C 99720022       18448         SUB.W   R7,#022H
                      18453 ; rs232cmd.c 5114               char buffer[30];
                      18454 ; rs232cmd.c 5115               UI ScHPhaseG, ScHPhaseM;
                      18455 ; rs232cmd.c 5116       
                      18456 ; rs232cmd.c 5117               if ( CmdExecute && !SCPIError)
005050 964842rr       18458         MOV.B   ES,#SEG( _CmdExecute )
005054 9908rrrr       18459         MOV.W   R0,#SOF( _CmdExecute )
005058 8200           18460         MOV.B   R0L,[R0]
                      18461         BEQ     _1308
00505A F202           +18461 ;       BNE     _LG_1264
00505C D50097         +18461 ;       JMP.L   _1308
005060 D5009700       +18461 ;       JMP.L   _1308
005060                +18461 _LG_1264:
005060 964842rr       18462         MOV.B   ES,#SEG( _SCPIError )
005064 9908rrrr       18463         MOV.W   R0,#SOF( _SCPIError )
005068 8A00           18464         MOV.W   R0,[R0]
                      18465         BNE     _1308
00506A F302           +18465 ;       BEQ     _LG_1266
00506C D5008F         +18465 ;       JMP.L   _1308
005070 D5008F00       +18465 ;       JMP.L   _1308
005070                +18465 _LG_1266:
                      18466 ; rs232cmd.c 5118               {
                      18467 ; rs232cmd.c 5119                       if ( CmdRequest)
005070 964842rr       18469         MOV.B   ES,#SEG( _CmdRequest )
005074 9908rrrr       18470         MOV.W   R0,#SOF( _CmdRequest )
005078 8200           18471         MOV.B   R0L,[R0]
00507A F332           18472         BEQ     _1300
                      18473 ; rs232cmd.c 5120                       {
                      18474 ; rs232cmd.c 5121                               if ( ParCnt)
00507C 964842rr       18476         MOV.B   ES,#SEG( _ParCnt )
005080 9908rrrr       18477         MOV.W   R0,#SOF( _ParCnt )
005084 8200           18478         MOV.B   R0L,[R0]
005086 F306           18479         BEQ     _1299
                      18480 ; rs232cmd.c 5122                                       SCPIError = SyntaxErr;
005088 964842rr       18482         MOV.B   ES,#SEG( _SCPIError )
00508C 9908rrrr       18483         MOV.W   R0,#SOF( _SCPIError )
005090 BA03           18484         MOV.W   [R0],#03H
005092 FE7C           18485         BR      _1308
005092 FE7C           18485         BR      _1308
005094                18486 _1299:
                      18487 ; rs232cmd.c 5123                               else
                      18488 ; rs232cmd.c 5124                               {
                      18489 ; rs232cmd.c 5125                                       sprintf( buffer, "%u,%u\n", Calibration.B
                            BCalibration[Suffix[0]].ScHPhaseG, 
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 303

ADDR   CODE            LINE SOURCELINE
                      18490 ; rs232cmd.c 5126                                                                                
                                                                                        Calibration.BBCalibration[Suffix[0]].
                            ScHPhaseM);
005094 91A8rr         18492         MOV.B   R5L,#SEG( __lc_bs )
005097 71BB           18493         XOR.B   R5H,R5H
005099 8947           18494         MOV.W   R4,R7
00509B 964842rr       18495         MOV.B   ES,#SEG( _Suffix )
00509F 9908rrrr       18496         MOV.W   R0,#SOF( _Suffix )
0050A3 8A00           18497         MOV.W   R0,[R0]
0050A5 E9000014       18498         MULU.W  R0,#014H
0050A9 B910           18499         MOVS.W  R1,#00H
0050AB 964842rr       18500         MOV.B   ES,#SEG( _Calibration+146 )
0050AF 8D20rrrr       18501         MOV.W   R2,[R0+SOF( _Calibration+146 )]
0050B3 964842rr       18502         MOV.B   ES,#SEG( _Calibration+152 )
0050B7 8D00rrrr       18503         MOV.W   R0,[R0+SOF( _Calibration+152 )]
0050BB 0F01           18504         PUSH.W  R0
0050BD 0F04           18506         PUSH.W  R2
0050BF 9918rrrr       18508         MOV.W   R1,#SEG( _1297 )
0050C3 9908rrrr       18509         MOV.W   R0,#SOF( _1297 )
0050C7 0F03           18510         PUSH.W  R0, R1
0050C9 8915           18512         MOV.W   R1,R5
0050CB 8904           18513         MOV.W   R0,R4
                      18514         CALL    _sprintf
0050CD C4rrrrrr       +18514 ;       FCALL   _sprintf
0050D1 99700008       18515         ADD.W   R7,#08H
                      18517 ; rs232cmd.c 5127                                       rs232puts( buffer);
0050D5 8915           18519         MOV.W   R1,R5
0050D7 8904           18520         MOV.W   R0,R4
                      18521         CALL    _rs232puts
0050D9 C4rrrrrr       +18521 ;       FCALL   _rs232puts
                      18522 ; rs232cmd.c 5128                               }
                      18523 ; rs232cmd.c 5129                       }
0050DD FE57           18525         BR      _1308
0050DD FE5700         18525         BR      _1308
0050E0                18526 _1300:
                      18527 ; rs232cmd.c 5130                       else
                      18528 ; rs232cmd.c 5131                       {
                      18529 ; rs232cmd.c 5132                               if ( !PasswordProtected)
0050E0 964842rr       18531         MOV.B   ES,#SEG( _PasswordProtected )
0050E4 9908rrrr       18532         MOV.W   R0,#SOF( _PasswordProtected )
0050E8 8A00           18533         MOV.W   R0,[R0]
0050EA F250           18534         BNE     _1308
                      18535 ; rs232cmd.c 5133                               {
                      18536 ; rs232cmd.c 5134                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ScHPhaseG, &ScHPhaseM)) != 2))
0050EC 964842rr       18538         MOV.B   ES,#SEG( _ParCnt )
0050F0 9908rrrr       18539         MOV.W   R0,#SOF( _ParCnt )
0050F4 8200           18540         MOV.B   R0L,[R0]
0050F6 910402         18541         CMP.B   R0L,#02H
0050F9 F21B           18542         BNE     _1301
0050FB 9918rrrr       18543         MOV.W   R1,#SEG( _Cmd )
0050FF 9908rrrr       18544         MOV.W   R0,#SOF( _Cmd )
005103 9168rr         18545         MOV.B   R3L,#SEG( __lc_bs )
005106 7177           18546         XOR.B   R3H,R3H
005108 40271E         18547         LEA     R2,R7+30
00510B 91A8rr         18548         MOV.B   R5L,#SEG( __lc_bs )
00510E 71BB           18549         XOR.B   R5H,R5H
005110 404720         18550         LEA     R4,R7+32
005113 0F30           18551         PUSH.W  R4, R5
005115 0F0C           18553         PUSH.W  R2, R3
005117 9938rrrr       18555         MOV.W   R3,#SEG( _1298 )
00511B 9928rrrr       18556         MOV.W   R2,#SOF( _1298 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 304

ADDR   CODE            LINE SOURCELINE
00511F 0F0C           18557         PUSH.W  R2, R3
                      18559         CALL    _sscanf
005121 C4rrrrrr       +18559 ;       FCALL   _sscanf
005125 9970000C       18560         ADD.W   R7,#0CH
005129 99040002       18562         CMP.W   R0,#02H
00512D F307           18563         BEQ     _1302
00512D F30700         18563         BEQ     _1302
005130                18564 _1301:
                      18565 ; rs232cmd.c 5135                                               SCPIError = SyntaxErr;
005130 964842rr       18567         MOV.B   ES,#SEG( _SCPIError )
005134 9908rrrr       18568         MOV.W   R0,#SOF( _SCPIError )
005138 BA03           18569         MOV.W   [R0],#03H
00513A FE28           18570         BR      _1308
00513A FE28           18570         BR      _1308
00513C                18571 _1302:
                      18572 ; rs232cmd.c 5136                                       else
                      18573 ; rs232cmd.c 5137                                       {
                      18574 ; rs232cmd.c 5138                                               Calibration.BBCalibration[Suffix[
                            0]].ScHPhaseG = ScHPhaseG;
00513C 964842rr       18576         MOV.B   ES,#SEG( _Suffix )
005140 9908rrrr       18577         MOV.W   R0,#SOF( _Suffix )
005144 8A00           18578         MOV.W   R0,[R0]
005146 E9000014       18579         MULU.W  R0,#014H
00514A B910           18580         MOVS.W  R1,#00H
00514C 8C271E         18581         MOV.W   R2,[R7+30]
00514F 964842rr       18582         MOV.B   ES,#SEG( _Calibration+146 )
005153 8D28rrrr       18583         MOV.W   [R0+SOF( _Calibration+146 )],R2
                      18584 ; rs232cmd.c 5139                                               Calibration.BBCalibration[Suffix[
                            0]].ScHPhaseM = ScHPhaseM;
005157 964842rr       18586         MOV.B   ES,#SEG( _Suffix )
00515B 9908rrrr       18587         MOV.W   R0,#SOF( _Suffix )
00515F 8A00           18588         MOV.W   R0,[R0]
005161 E9000014       18589         MULU.W  R0,#014H
005165 B910           18590         MOVS.W  R1,#00H
005167 8C2720         18591         MOV.W   R2,[R7+32]
00516A 964842rr       18592         MOV.B   ES,#SEG( _Calibration+152 )
00516E 8D28rrrr       18593         MOV.W   [R0+SOF( _Calibration+152 )],R2
                      18594 ; rs232cmd.c 5140                                       
                      18595 ; rs232cmd.c 5141                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005172 9918rrrr       18597         MOV.W   R1,#SEG( _Calibration )
005176 9908rrrr       18598         MOV.W   R0,#SOF( _Calibration )
00517A 964842rr       18599         MOV.B   ES,#SEG( _CalibrationPtr )
00517E 9928rrrr       18600         MOV.W   R2,#SOF( _CalibrationPtr )
005182 8A22           18601         MOV.W   R2,[R2]
005184 993800E0       18602         MOV.W   R3,#0E0H
                      18603         CALL    _NV_Store
005188 C4rrrrrr       +18603 ;       FCALL   _NV_Store
                      18604 ; rs232cmd.c 5142                                       }
                      18605 ; rs232cmd.c 5143                               }
                      18606 ; rs232cmd.c 5144                       }
                      18607 ; rs232cmd.c 5145               }
00518C                18609 _1308:
                      18610 ; rs232cmd.c 5146       }
00518C 99700022       18612         ADD.W   R7,#022H
005190 2F30           18614         POP.W   R4, R5
005192 D680           18616         RET
                      18618 ; rs232cmd.c 5147       
                      18619 ; rs232cmd.c 5148       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 305

ADDR   CODE            LINE SOURCELINE
                      18620 ; rs232cmd.c 5149       /* FactBBGenDAC                                                          
                                                                                                                             
                                                 RS232CMD.C */
                      18621 ; rs232cmd.c 5150       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18622 ; rs232cmd.c 5151       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18623 ; rs232cmd.c 5152       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      18624 ; rs232cmd.c 5153       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18625 ; rs232cmd.c 5154       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18626 ; rs232cmd.c 5155       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18627 ; rs232cmd.c 5156       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18628 ; rs232cmd.c 5157       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18629 ; rs232cmd.c 5158       /************************************************************************
                            **/
                      18630 ; rs232cmd.c 5159       void FactBBGenDAC( void)
                      18631 ; rs232cmd.c 5160       {
                      18632         ALIGN   1
                      18634         PUBLIC  _FactBBGenDAC
005194                18635 _FactBBGenDAC:
005194 0F30           18639         PUSH.W  R4, R5
005196 99720024       18641         SUB.W   R7,#024H
                      18647 ; rs232cmd.c 5161               char buffer[30];
                      18648 ; rs232cmd.c 5162               UI DACGain, DACOffset, DACLevel;
                      18649 ; rs232cmd.c 5163       
                      18650 ; rs232cmd.c 5164               if ( CmdExecute && !SCPIError)
00519A 964842rr       18652         MOV.B   ES,#SEG( _CmdExecute )
00519E 9908rrrr       18653         MOV.W   R0,#SOF( _CmdExecute )
0051A2 8200           18654         MOV.B   R0L,[R0]
                      18655         BEQ     _1320
0051A4 F202           +18655 ;       BNE     _LG_1278
0051A6 D500A3         +18655 ;       JMP.L   _1320
0051AA D500A300       +18655 ;       JMP.L   _1320
0051AA                +18655 _LG_1278:
0051AA 964842rr       18656         MOV.B   ES,#SEG( _SCPIError )
0051AE 9908rrrr       18657         MOV.W   R0,#SOF( _SCPIError )
0051B2 8A00           18658         MOV.W   R0,[R0]
                      18659         BNE     _1320
0051B4 F302           +18659 ;       BEQ     _LG_1280
0051B6 D5009B         +18659 ;       JMP.L   _1320
0051BA D5009B00       +18659 ;       JMP.L   _1320
0051BA                +18659 _LG_1280:
                      18660 ; rs232cmd.c 5165               {
                      18661 ; rs232cmd.c 5166                       if ( CmdRequest)
0051BA 964842rr       18663         MOV.B   ES,#SEG( _CmdRequest )
0051BE 9908rrrr       18664         MOV.W   R0,#SOF( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 306

ADDR   CODE            LINE SOURCELINE
0051C2 8200           18665         MOV.B   R0L,[R0]
0051C4 F33B           18666         BEQ     _1312
                      18667 ; rs232cmd.c 5167                       {
                      18668 ; rs232cmd.c 5168                               if ( ParCnt)
0051C6 964842rr       18670         MOV.B   ES,#SEG( _ParCnt )
0051CA 9908rrrr       18671         MOV.W   R0,#SOF( _ParCnt )
0051CE 8200           18672         MOV.B   R0L,[R0]
0051D0 F307           18673         BEQ     _1311
                      18674 ; rs232cmd.c 5169                                       SCPIError = SyntaxErr;
0051D2 964842rr       18676         MOV.B   ES,#SEG( _SCPIError )
0051D6 9908rrrr       18677         MOV.W   R0,#SOF( _SCPIError )
0051DA BA03           18678         MOV.W   [R0],#03H
                      18679         BR      _1320
0051DC D50088         +18679         JMP.L   _1320
0051DC D5008800       +18679         JMP.L   _1320
0051E0                18680 _1311:
                      18681 ; rs232cmd.c 5170                               else
                      18682 ; rs232cmd.c 5171                               {
                      18683 ; rs232cmd.c 5172                                       sprintf( buffer, "%u,%u,%u\n", Calibratio
                            n.BBCalibration[Suffix[0]].DACGain, 
                      18684 ; rs232cmd.c 5173                                                                                
                                                                                                 Calibration.BBCalibration[Su
                            ffix[0]].DACOffset,
                      18685 ; rs232cmd.c 5174                                                                                
                                                                                                 Calibration.BBCalibration[Su
                            ffix[0]].DACLevel);
0051E0 91A8rr         18687         MOV.B   R5L,#SEG( __lc_bs )
0051E3 71BB           18688         XOR.B   R5H,R5H
0051E5 8947           18689         MOV.W   R4,R7
0051E7 964842rr       18690         MOV.B   ES,#SEG( _Suffix )
0051EB 9908rrrr       18691         MOV.W   R0,#SOF( _Suffix )
0051EF 8A00           18692         MOV.W   R0,[R0]
0051F1 E9000014       18693         MULU.W  R0,#014H
0051F5 B910           18694         MOVS.W  R1,#00H
0051F7 964842rr       18695         MOV.B   ES,#SEG( _Calibration+154 )
0051FB 8540rrrr       18696         MOV.B   R2L,[R0+SOF( _Calibration+154 )]
0051FF B150           18697         MOVS.B  R2H,#00H
005201 964842rr       18698         MOV.B   ES,#SEG( _Calibration+155 )
005205 8560rrrr       18699         MOV.B   R3L,[R0+SOF( _Calibration+155 )]
005209 B170           18700         MOVS.B  R3H,#00H
00520B 964842rr       18701         MOV.B   ES,#SEG( _Calibration+156 )
00520F 8500rrrr       18702         MOV.B   R0L,[R0+SOF( _Calibration+156 )]
005213 B110           18703         MOVS.B  R0H,#00H
005215 0F01           18704         PUSH.W  R0
005217 0F08           18706         PUSH.W  R3
005219 0F04           18708         PUSH.W  R2
00521B 9918rrrr       18710         MOV.W   R1,#SEG( _1170 )
00521F 9908rrrr       18711         MOV.W   R0,#SOF( _1170 )
005223 0F03           18712         PUSH.W  R0, R1
005225 8915           18714         MOV.W   R1,R5
005227 8904           18715         MOV.W   R0,R4
                      18716         CALL    _sprintf
005229 C4rrrrrr       +18716 ;       FCALL   _sprintf
00522D 9970000A       18717         ADD.W   R7,#0AH
                      18719 ; rs232cmd.c 5175                                       rs232puts( buffer);
005231 8915           18721         MOV.W   R1,R5
005233 8904           18722         MOV.W   R0,R4
                      18723         CALL    _rs232puts
005235 C4rrrrrr       +18723 ;       FCALL   _rs232puts
                      18724 ; rs232cmd.c 5176                               }
                      18725 ; rs232cmd.c 5177                       }
005239 FE5A           18727         BR      _1320
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 307

ADDR   CODE            LINE SOURCELINE
005239 FE5A00         18727         BR      _1320
00523C                18728 _1312:
                      18729 ; rs232cmd.c 5178                       else
                      18730 ; rs232cmd.c 5179                       {
                      18731 ; rs232cmd.c 5180                               if ( !PasswordProtected)
00523C 964842rr       18733         MOV.B   ES,#SEG( _PasswordProtected )
005240 9908rrrr       18734         MOV.W   R0,#SOF( _PasswordProtected )
005244 8A00           18735         MOV.W   R0,[R0]
005246 F253           18736         BNE     _1320
                      18737 ; rs232cmd.c 5181                               {
                      18738 ; rs232cmd.c 5182                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &DACGain, &DACOffset, &DACLevel)) != 3))
005248 964842rr       18740         MOV.B   ES,#SEG( _ParCnt )
00524C 9908rrrr       18741         MOV.W   R0,#SOF( _ParCnt )
005250 8200           18742         MOV.B   R0L,[R0]
005252 910403         18743         CMP.B   R0L,#03H
005255 F220           18744         BNE     _1313
005257 9168rr         18745         MOV.B   R3L,#SEG( __lc_bs )
00525A 7177           18746         XOR.B   R3H,R3H
00525C 40271E         18747         LEA     R2,R7+30
00525F 91A8rr         18748         MOV.B   R5L,#SEG( __lc_bs )
005262 71BB           18749         XOR.B   R5H,R5H
005264 404720         18750         LEA     R4,R7+32
005267 9128rr         18751         MOV.B   R1L,#SEG( __lc_bs )
00526A 7133           18752         XOR.B   R1H,R1H
00526C 400722         18753         LEA     R0,R7+34
00526F 0F03           18754         PUSH.W  R0, R1
005271 0F30           18756         PUSH.W  R4, R5
005273 0F0C           18758         PUSH.W  R2, R3
005275 9938rrrr       18760         MOV.W   R3,#SEG( _1171 )
005279 9928rrrr       18761         MOV.W   R2,#SOF( _1171 )
00527D 0F0C           18762         PUSH.W  R2, R3
00527F 9918rrrr       18764         MOV.W   R1,#SEG( _Cmd )
005283 9908rrrr       18765         MOV.W   R0,#SOF( _Cmd )
                      18766         CALL    _sscanf
005287 C4rrrrrr       +18766 ;       FCALL   _sscanf
00528B 99700010       18767         ADD.W   R7,#010H
00528F 99040003       18769         CMP.W   R0,#03H
005293 F307           18770         BEQ     _1314
005293 F30700         18770         BEQ     _1314
005296                18771 _1313:
                      18772 ; rs232cmd.c 5183                                               SCPIError = SyntaxErr;
005296 964842rr       18774         MOV.B   ES,#SEG( _SCPIError )
00529A 9908rrrr       18775         MOV.W   R0,#SOF( _SCPIError )
00529E BA03           18776         MOV.W   [R0],#03H
0052A0 FE26           18777         BR      _1320
0052A0 FE26           18777         BR      _1320
0052A2                18778 _1314:
                      18779 ; rs232cmd.c 5184                                       else
                      18780 ; rs232cmd.c 5185                                       {
                      18781 ; rs232cmd.c 5186                                               Calibration.BBCalibration[Suffix[
                            0]].DACGain = DACGain;
0052A2 8C271E         18783         MOV.W   R2,[R7+30]
0052A5 964842rr       18784         MOV.B   ES,#SEG( _Suffix )
0052A9 9908rrrr       18785         MOV.W   R0,#SOF( _Suffix )
0052AD 8A00           18786         MOV.W   R0,[R0]
0052AF E9000014       18787         MULU.W  R0,#014H
0052B3 B910           18788         MOVS.W  R1,#00H
0052B5 964842rr       18789         MOV.B   ES,#SEG( _Calibration+154 )
0052B9 8548rrrr       18790         MOV.B   [R0+SOF( _Calibration+154 )],R2L
                      18791 ; rs232cmd.c 5187                                               Calibration.BBCalibration[Suffix[
                            0]].DACOffset = DACOffset;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 308

ADDR   CODE            LINE SOURCELINE
0052BD 8C2720         18793         MOV.W   R2,[R7+32]
0052C0 964842rr       18794         MOV.B   ES,#SEG( _Calibration+155 )
0052C4 8548rrrr       18795         MOV.B   [R0+SOF( _Calibration+155 )],R2L
                      18796 ; rs232cmd.c 5188                                               Calibration.BBCalibration[Suffix[
                            0]].DACLevel = DACLevel;        
0052C8 8C2722         18798         MOV.W   R2,[R7+34]
0052CB 964842rr       18799         MOV.B   ES,#SEG( _Calibration+156 )
0052CF 8548rrrr       18800         MOV.B   [R0+SOF( _Calibration+156 )],R2L
                      18801 ; rs232cmd.c 5189                                                               
                      18802 ; rs232cmd.c 5190                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0052D3 9918rrrr       18804         MOV.W   R1,#SEG( _Calibration )
0052D7 9908rrrr       18805         MOV.W   R0,#SOF( _Calibration )
0052DB 964842rr       18806         MOV.B   ES,#SEG( _CalibrationPtr )
0052DF 9928rrrr       18807         MOV.W   R2,#SOF( _CalibrationPtr )
0052E3 8A22           18808         MOV.W   R2,[R2]
0052E5 993800E0       18809         MOV.W   R3,#0E0H
                      18810         CALL    _NV_Store
0052E9 C4rrrrrr       +18810 ;       FCALL   _NV_Store
                      18811 ; rs232cmd.c 5191                                       }
                      18812 ; rs232cmd.c 5192                               }
                      18813 ; rs232cmd.c 5193                       }
                      18814 ; rs232cmd.c 5194               }
0052EE                18816 _1320:
                      18817 ; rs232cmd.c 5195       }
0052EE 99700024       18819         ADD.W   R7,#024H
0052F2 2F30           18821         POP.W   R4, R5
0052F4 D680           18823         RET
                      18825 ; rs232cmd.c 5196       
                      18826 ; rs232cmd.c 5197       /************************************************************************
                            **/
                      18827 ; rs232cmd.c 5198       /* FactTSGenDate                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      18828 ; rs232cmd.c 5199       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18829 ; rs232cmd.c 5200       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      18830 ; rs232cmd.c 5201       /* Revised:       000727                                                 
                                                                                                                             
                                                                                    */
                      18831 ; rs232cmd.c 5202       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      18832 ; rs232cmd.c 5203       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      18833 ; rs232cmd.c 5204       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      18834 ; rs232cmd.c 5205       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      18835 ; rs232cmd.c 5206       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      18836 ; rs232cmd.c 5207       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 309

ADDR   CODE            LINE SOURCELINE
                      18837 ; rs232cmd.c 5208       void FactTSGenDate( void)
                      18838 ; rs232cmd.c 5209       {
                      18839         ALIGN   1
                      18841         PUBLIC  _FactTSGenDate
0052F6                18842 _FactTSGenDate:
0052F6 0F30           18846         PUSH.W  R4, R5
0052F8 9972001A       18848         SUB.W   R7,#01AH
                      18854 ; rs232cmd.c 5210               UI year, month, day;
                      18855 ; rs232cmd.c 5211               char buffer[20];
                      18856 ; rs232cmd.c 5212       
                      18857 ; rs232cmd.c 5213               if ( CmdExecute && !SCPIError)
0052FC 964842rr       18859         MOV.B   ES,#SEG( _CmdExecute )
005300 9908rrrr       18860         MOV.W   R0,#SOF( _CmdExecute )
005304 8200           18861         MOV.B   R0L,[R0]
                      18862         BEQ     _1334
005306 F202           +18862 ;       BNE     _LG_1292
005308 D500C7         +18862 ;       JMP.L   _1334
00530C D500C700       +18862 ;       JMP.L   _1334
00530C                +18862 _LG_1292:
00530C 964842rr       18863         MOV.B   ES,#SEG( _SCPIError )
005310 9908rrrr       18864         MOV.W   R0,#SOF( _SCPIError )
005314 8A00           18865         MOV.W   R0,[R0]
                      18866         BNE     _1334
005316 F302           +18866 ;       BEQ     _LG_1294
005318 D500BF         +18866 ;       JMP.L   _1334
00531C D500BF00       +18866 ;       JMP.L   _1334
00531C                +18866 _LG_1294:
                      18867 ; rs232cmd.c 5214               {
                      18868 ; rs232cmd.c 5215                       if ( CmdRequest)
00531C 964842rr       18870         MOV.B   ES,#SEG( _CmdRequest )
005320 9908rrrr       18871         MOV.W   R0,#SOF( _CmdRequest )
005324 8200           18872         MOV.B   R0L,[R0]
005326 F35A           18873         BEQ     _1324
                      18874 ; rs232cmd.c 5216                       {
                      18875 ; rs232cmd.c 5217                               if ( ParCnt)
005328 964842rr       18877         MOV.B   ES,#SEG( _ParCnt )
00532C 9908rrrr       18878         MOV.W   R0,#SOF( _ParCnt )
005330 8200           18879         MOV.B   R0L,[R0]
005332 F307           18880         BEQ     _1323
                      18881 ; rs232cmd.c 5218                                       SCPIError = SyntaxErr;
005334 964842rr       18883         MOV.B   ES,#SEG( _SCPIError )
005338 9908rrrr       18884         MOV.W   R0,#SOF( _SCPIError )
00533C BA03           18885         MOV.W   [R0],#03H
                      18886         BR      _1334
00533E D500AC         +18886         JMP.L   _1334
00533E D500AC00       +18886         JMP.L   _1334
005342                18887 _1323:
                      18888 ; rs232cmd.c 5219                               else
                      18889 ; rs232cmd.c 5220                               {
                      18890 ; rs232cmd.c 5221                                       day = Calibration.CBCalibration.Date % 10
                            0;
005342 964842rr       18892         MOV.B   ES,#SEG( _Calibration+198 )
005346 9918rrrr       18893         MOV.W   R1,#SOF( _Calibration+198 )
00534A 8B01           18894         MOV.W   R0,[R1+]
00534C 8A11           18895         MOV.W   R1,[R1]
00534E B930           18896         MOV.W   R3,#00H
005350 99280064       18897         MOV.W   R2,#064H
005354 964842rr       18898         MOV.B   ES,#SEG( _Calibration+198 )
005358 9948rrrr       18899         MOV.W   R4,#SOF( _Calibration+198 )
00535C 8B0C           18900         MOV.W   [R4+],R0
00535E 8A1C           18901         MOV.W   [R4],R1
005360 C4rrrrrr       18902         FCALL   __UMODL
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 310

ADDR   CODE            LINE SOURCELINE
005364 8C0F04         18903         MOV.W   [R7+4],R0
005367 964842rr       18904         MOV.B   ES,#SEG( _Calibration+198 )
00536B 9918rrrr       18905         MOV.W   R1,#SOF( _Calibration+198 )
00536F 8B01           18906         MOV.W   R0,[R1+]
005371 8A11           18907         MOV.W   R1,[R1]
                      18908 ; rs232cmd.c 5222                                       month = ( Calibration.CBCalibration.Date 
                            / 100) % 100;
005373 B930           18910         MOV.W   R3,#00H
005375 99280064       18911         MOV.W   R2,#064H
005379 8953           18912         MOV.W   R5,R3
00537B 8942           18913         MOV.W   R4,R2
00537D C4rrrrrr       18914         FCALL   __UDIVL
005381 8935           18915         MOV.W   R3,R5
005383 8924           18916         MOV.W   R2,R4
005385 C4rrrrrr       18917         FCALL   __UMODL
005389 8C0F02         18918         MOV.W   [R7+2],R0
                      18919 ; rs232cmd.c 5223                                       year = ( Calibration.CBCalibration.Date /
                             10000);
00538C B930           18921         MOV.W   R3,#00H
00538E 99282710       18922         MOV.W   R2,#02710H
005392 964842rr       18923         MOV.B   ES,#SEG( _Calibration+198 )
005396 9918rrrr       18924         MOV.W   R1,#SOF( _Calibration+198 )
00539A 8B01           18925         MOV.W   R0,[R1+]
00539C 8A11           18926         MOV.W   R1,[R1]
00539E C4rrrrrr       18927         FCALL   __UDIVL
0053A2 8A0F           18928         MOV.W   [R7],R0
                      18929 ; rs232cmd.c 5224       
                      18930 ; rs232cmd.c 5225                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
0053A4 91A8rr         18932         MOV.B   R5L,#SEG( __lc_bs )
0053A7 71BB           18933         XOR.B   R5H,R5H
0053A9 404706         18934         LEA     R4,R7+6
0053AC 8C0704         18935         MOV.W   R0,[R7+4]
0053AF 0F01           18936         PUSH.W  R0
0053B1 8C0704         18938         MOV.W   R0,[R7+4]
0053B4 0F01           18939         PUSH.W  R0
0053B6 8C0704         18941         MOV.W   R0,[R7+4]
0053B9 0F01           18942         PUSH.W  R0
0053BB 9918rrrr       18944         MOV.W   R1,#SEG( _1170 )
0053BF 9908rrrr       18945         MOV.W   R0,#SOF( _1170 )
0053C3 0F03           18946         PUSH.W  R0, R1
0053C5 8915           18948         MOV.W   R1,R5
0053C7 8904           18949         MOV.W   R0,R4
                      18950         CALL    _sprintf
0053C9 C4rrrrrr       +18950 ;       FCALL   _sprintf
0053CD 9970000A       18951         ADD.W   R7,#0AH
                      18953 ; rs232cmd.c 5226       
                      18954 ; rs232cmd.c 5227                                       rs232puts( buffer);
0053D1 8915           18956         MOV.W   R1,R5
0053D3 8904           18957         MOV.W   R0,R4
                      18958         CALL    _rs232puts
0053D5 C4rrrrrr       +18958 ;       FCALL   _rs232puts
                      18959 ; rs232cmd.c 5228                               }
                      18960 ; rs232cmd.c 5229                       }
0053D9 FE5F           18962         BR      _1334
0053D9 FE5F00         18962         BR      _1334
0053DC                18963 _1324:
                      18964 ; rs232cmd.c 5230                       else
                      18965 ; rs232cmd.c 5231                       {
                      18966 ; rs232cmd.c 5232                               if ( !PasswordProtected)
0053DC 964842rr       18968         MOV.B   ES,#SEG( _PasswordProtected )
0053E0 9908rrrr       18969         MOV.W   R0,#SOF( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 311

ADDR   CODE            LINE SOURCELINE
0053E4 8A00           18970         MOV.W   R0,[R0]
0053E6 F258           18971         BNE     _1334
                      18972 ; rs232cmd.c 5233                               {
                      18973 ; rs232cmd.c 5234                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
0053E8 964842rr       18975         MOV.B   ES,#SEG( _ParCnt )
0053EC 9908rrrr       18976         MOV.W   R0,#SOF( _ParCnt )
0053F0 8200           18977         MOV.B   R0L,[R0]
0053F2 910403         18978         CMP.B   R0L,#03H
0053F5 F21F           18979         BNE     _1325
0053F7 9168rr         18980         MOV.B   R3L,#SEG( __lc_bs )
0053FA 7177           18981         XOR.B   R3H,R3H
0053FC 8927           18982         MOV.W   R2,R7
0053FE 91A8rr         18983         MOV.B   R5L,#SEG( __lc_bs )
005401 71BB           18984         XOR.B   R5H,R5H
005403 404702         18985         LEA     R4,R7+2
005406 9128rr         18986         MOV.B   R1L,#SEG( __lc_bs )
005409 7133           18987         XOR.B   R1H,R1H
00540B 400704         18988         LEA     R0,R7+4
00540E 0F03           18989         PUSH.W  R0, R1
005410 0F30           18991         PUSH.W  R4, R5
005412 0F0C           18993         PUSH.W  R2, R3
005414 9938rrrr       18995         MOV.W   R3,#SEG( _1171 )
005418 9928rrrr       18996         MOV.W   R2,#SOF( _1171 )
00541C 0F0C           18997         PUSH.W  R2, R3
00541E 9918rrrr       18999         MOV.W   R1,#SEG( _Cmd )
005422 9908rrrr       19000         MOV.W   R0,#SOF( _Cmd )
                      19001         CALL    _sscanf
005426 C4rrrrrr       +19001 ;       FCALL   _sscanf
00542A 99700010       19002         ADD.W   R7,#010H
00542E 99040003       19004         CMP.W   R0,#03H
005432 F306           19005         BEQ     _1326
005432 F306           19005         BEQ     _1326
005434                19006 _1325:
                      19007 ; rs232cmd.c 5235                                               SCPIError = SyntaxErr;
005434 964842rr       19009         MOV.B   ES,#SEG( _SCPIError )
005438 9908rrrr       19010         MOV.W   R0,#SOF( _SCPIError )
00543C BA03           19011         MOV.W   [R0],#03H
00543E FE2C           19012         BR      _1334
00543E FE2C           19012         BR      _1334
005440                19013 _1326:
                      19014 ; rs232cmd.c 5236                                       else
                      19015 ; rs232cmd.c 5237                                       {
                      19016 ; rs232cmd.c 5238                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
005440 8A07           19018         MOV.W   R0,[R7]
005442 8C1702         19019         MOV.W   R1,[R7+2]
005445 8C2704         19020         MOV.W   R2,[R7+4]
                      19021         CALL    _ValidateDate
005448 C4rrrrrr       +19021 ;       FCALL   _ValidateDate
00544C 6900           19022         OR.W    R0,R0
00544E F207           19023         BNE     _1327
                      19024 ; rs232cmd.c 5239                                                       SCPIError = ExecErr;
005450 964842rr       19026         MOV.B   ES,#SEG( _SCPIError )
005454 9908rrrr       19027         MOV.W   R0,#SOF( _SCPIError )
005458 9A08001D       19028         MOV.W   [R0],#01DH
00545C FE1D           19029         BR      _1334
00545C FE1D           19029         BR      _1334
00545E                19030 _1327:
                      19031 ; rs232cmd.c 5240                                               else
                      19032 ; rs232cmd.c 5241                                               {
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 312

ADDR   CODE            LINE SOURCELINE
                      19033 ; rs232cmd.c 5242                                                       Calibration.CBCalibration
                            .Date = day + 100*month + 10000*year;
00545E 8C0702         19035         MOV.W   R0,[R7+2]
005461 E9000064       19036         MULU.W  R0,#064H
005465 0C0704         19037         ADD.W   R0,[R7+4]
005468 8A27           19038         MOV.W   R2,[R7]
00546A E9202710       19039         MULU.W  R2,#02710H
00546E 0902           19040         ADD.W   R0,R2
005470 B910           19041         MOVS.W  R1,#00H
005472 964842rr       19042         MOV.B   ES,#SEG( _Calibration+198 )
005476 9928rrrr       19043         MOV.W   R2,#SOF( _Calibration+198 )
00547A 8B0A           19044         MOV.W   [R2+],R0
00547C 8A1A           19045         MOV.W   [R2],R1
                      19046 ; rs232cmd.c 5243                                               
                      19047 ; rs232cmd.c 5244                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
00547E 9918rrrr       19049         MOV.W   R1,#SEG( _Calibration )
005482 9908rrrr       19050         MOV.W   R0,#SOF( _Calibration )
005486 964842rr       19051         MOV.B   ES,#SEG( _CalibrationPtr )
00548A 9928rrrr       19052         MOV.W   R2,#SOF( _CalibrationPtr )
00548E 8A22           19053         MOV.W   R2,[R2]
005490 993800E0       19054         MOV.W   R3,#0E0H
                      19055         CALL    _NV_Store
005494 C4rrrrrr       +19055 ;       FCALL   _NV_Store
                      19056 ; rs232cmd.c 5245                                               }
                      19057 ; rs232cmd.c 5246                                       }                               
                      19058 ; rs232cmd.c 5247                               }
                      19059 ; rs232cmd.c 5248                       }
                      19060 ; rs232cmd.c 5249               }
005498                19062 _1334:
                      19063 ; rs232cmd.c 5250       }
005498 9970001A       19065         ADD.W   R7,#01AH
00549C 2F30           19067         POP.W   R4, R5
00549E D680           19069         RET
                      19071 ; rs232cmd.c 5251       
                      19072 ; rs232cmd.c 5252       /************************************************************************
                            **/
                      19073 ; rs232cmd.c 5253       /* FactTSGenAGain                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19074 ; rs232cmd.c 5254       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19075 ; rs232cmd.c 5255       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19076 ; rs232cmd.c 5256       /* Revised:       000727,                                                
                                                                                                                             
                                                                                    */
                      19077 ; rs232cmd.c 5257       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19078 ; rs232cmd.c 5258       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19079 ; rs232cmd.c 5259       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 313

ADDR   CODE            LINE SOURCELINE
                      19080 ; rs232cmd.c 5260       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19081 ; rs232cmd.c 5261       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19082 ; rs232cmd.c 5262       /************************************************************************
                            **/
                      19083 ; rs232cmd.c 5263       void FactTSGenAGain( void)
                      19084 ; rs232cmd.c 5264       {
                      19085         ALIGN   1
                      19087         PUBLIC  _FactTSGenAGain
0054A0                19088 _FactTSGenAGain:
0054A0 0F30           19092         PUSH.W  R4, R5
0054A2 99720018       19094         SUB.W   R7,#018H
                      19099 ; rs232cmd.c 5265               char buffer[20];
                      19100 ; rs232cmd.c 5266               UC GainG, GainM;
                      19101 ; rs232cmd.c 5267       
                      19102 ; rs232cmd.c 5268               if ( CmdExecute && !SCPIError)
0054A6 964842rr       19104         MOV.B   ES,#SEG( _CmdExecute )
0054AA 9908rrrr       19105         MOV.W   R0,#SOF( _CmdExecute )
0054AE 8200           19106         MOV.B   R0L,[R0]
                      19107         BEQ     _1348
0054B0 F202           +19107 ;       BNE     _LG_1308
0054B2 D50095         +19107 ;       JMP.L   _1348
0054B6 D5009500       +19107 ;       JMP.L   _1348
0054B6                +19107 _LG_1308:
0054B6 964842rr       19108         MOV.B   ES,#SEG( _SCPIError )
0054BA 9908rrrr       19109         MOV.W   R0,#SOF( _SCPIError )
0054BE 8A00           19110         MOV.W   R0,[R0]
                      19111         BNE     _1348
0054C0 F302           +19111 ;       BEQ     _LG_1310
0054C2 D5008D         +19111 ;       JMP.L   _1348
0054C6 D5008D00       +19111 ;       JMP.L   _1348
0054C6                +19111 _LG_1310:
                      19112 ; rs232cmd.c 5269               {
                      19113 ; rs232cmd.c 5270                       if ( CmdRequest)
0054C6 964842rr       19115         MOV.B   ES,#SEG( _CmdRequest )
0054CA 9908rrrr       19116         MOV.W   R0,#SOF( _CmdRequest )
0054CE 8200           19117         MOV.B   R0L,[R0]
0054D0 F32E           19118         BEQ     _1338
                      19119 ; rs232cmd.c 5271                       {
                      19120 ; rs232cmd.c 5272                               if ( ParCnt)
0054D2 964842rr       19122         MOV.B   ES,#SEG( _ParCnt )
0054D6 9908rrrr       19123         MOV.W   R0,#SOF( _ParCnt )
0054DA 8200           19124         MOV.B   R0L,[R0]
0054DC F306           19125         BEQ     _1337
                      19126 ; rs232cmd.c 5273                                       SCPIError = SyntaxErr;
0054DE 964842rr       19128         MOV.B   ES,#SEG( _SCPIError )
0054E2 9908rrrr       19129         MOV.W   R0,#SOF( _SCPIError )
0054E6 BA03           19130         MOV.W   [R0],#03H
0054E8 FE7A           19131         BR      _1348
0054E8 FE7A           19131         BR      _1348
0054EA                19132 _1337:
                      19133 ; rs232cmd.c 5274                               else
                      19134 ; rs232cmd.c 5275                               {
                      19135 ; rs232cmd.c 5276                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.GainG, 
                      19136 ; rs232cmd.c 5277                                                                                
                                                                                        Calibration.CBCalibration.GainM);
0054EA 91A8rr         19138         MOV.B   R5L,#SEG( __lc_bs )
0054ED 71BB           19139         XOR.B   R5H,R5H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 314

ADDR   CODE            LINE SOURCELINE
0054EF 8947           19140         MOV.W   R4,R7
0054F1 964842rr       19141         MOV.B   ES,#SEG( _Calibration+213 )
0054F5 9908rrrr       19142         MOV.W   R0,#SOF( _Calibration+213 )
0054F9 8200           19143         MOV.B   R0L,[R0]
0054FB B110           19144         MOVS.B  R0H,#00H
0054FD 964842rr       19145         MOV.B   ES,#SEG( _Calibration+215 )
005501 9918rrrr       19146         MOV.W   R1,#SOF( _Calibration+215 )
005505 8221           19147         MOV.B   R1L,[R1]
005507 B130           19148         MOVS.B  R1H,#00H
005509 0F02           19149         PUSH.W  R1
00550B 0F01           19151         PUSH.W  R0
00550D 9918rrrr       19153         MOV.W   R1,#SEG( _1297 )
005511 9908rrrr       19154         MOV.W   R0,#SOF( _1297 )
005515 0F03           19155         PUSH.W  R0, R1
005517 8915           19157         MOV.W   R1,R5
005519 8904           19158         MOV.W   R0,R4
                      19159         CALL    _sprintf
00551B C4rrrrrr       +19159 ;       FCALL   _sprintf
00551F 99700008       19160         ADD.W   R7,#08H
                      19162 ; rs232cmd.c 5278                                       rs232puts( buffer);
005523 8915           19164         MOV.W   R1,R5
005525 8904           19165         MOV.W   R0,R4
                      19166         CALL    _rs232puts
005527 C4rrrrrr       +19166 ;       FCALL   _rs232puts
                      19167 ; rs232cmd.c 5279                               }
                      19168 ; rs232cmd.c 5280                       }
00552B FE59           19170         BR      _1348
00552B FE5900         19170         BR      _1348
00552E                19171 _1338:
                      19172 ; rs232cmd.c 5281                       else
                      19173 ; rs232cmd.c 5282                       {
                      19174 ; rs232cmd.c 5283                               if ( !PasswordProtected)
00552E 964842rr       19176         MOV.B   ES,#SEG( _PasswordProtected )
005532 9908rrrr       19177         MOV.W   R0,#SOF( _PasswordProtected )
005536 8A00           19178         MOV.W   R0,[R0]
005538 F252           19179         BNE     _1348
                      19180 ; rs232cmd.c 5284                               {
                      19181 ; rs232cmd.c 5285                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &GainG, &GainM)) != 2))
00553A 964842rr       19183         MOV.B   ES,#SEG( _ParCnt )
00553E 9908rrrr       19184         MOV.W   R0,#SOF( _ParCnt )
005542 8200           19185         MOV.B   R0L,[R0]
005544 910402         19186         CMP.B   R0L,#02H
005547 F21B           19187         BNE     _1339
005549 9918rrrr       19188         MOV.W   R1,#SEG( _Cmd )
00554D 9908rrrr       19189         MOV.W   R0,#SOF( _Cmd )
005551 9168rr         19190         MOV.B   R3L,#SEG( __lc_bs )
005554 7177           19191         XOR.B   R3H,R3H
005556 402714         19192         LEA     R2,R7+20
005559 91A8rr         19193         MOV.B   R5L,#SEG( __lc_bs )
00555C 71BB           19194         XOR.B   R5H,R5H
00555E 404716         19195         LEA     R4,R7+22
005561 0F30           19196         PUSH.W  R4, R5
005563 0F0C           19198         PUSH.W  R2, R3
005565 9938rrrr       19200         MOV.W   R3,#SEG( _1298 )
005569 9928rrrr       19201         MOV.W   R2,#SOF( _1298 )
00556D 0F0C           19202         PUSH.W  R2, R3
                      19204         CALL    _sscanf
00556F C4rrrrrr       +19204 ;       FCALL   _sscanf
005573 9970000C       19205         ADD.W   R7,#0CH
005577 99040002       19207         CMP.W   R0,#02H
00557B F307           19208         BEQ     _1340
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 315

ADDR   CODE            LINE SOURCELINE
00557B F30700         19208         BEQ     _1340
00557E                19209 _1339:
                      19210 ; rs232cmd.c 5286                                               SCPIError = SyntaxErr;
00557E 964842rr       19212         MOV.B   ES,#SEG( _SCPIError )
005582 9908rrrr       19213         MOV.W   R0,#SOF( _SCPIError )
005586 BA03           19214         MOV.W   [R0],#03H
005588 FE2A           19215         BR      _1348
005588 FE2A           19215         BR      _1348
00558A                19216 _1340:
                      19217 ; rs232cmd.c 5287                                       else
                      19218 ; rs232cmd.c 5288                                       {
                      19219 ; rs232cmd.c 5289                                               Calibration.CBCalibration.GainG =
                             GainG;
00558A 840714         19221         MOV.B   R0L,[R7+20]
00558D 964842rr       19222         MOV.B   ES,#SEG( _Calibration+213 )
005591 9918rrrr       19223         MOV.W   R1,#SOF( _Calibration+213 )
005595 8209           19224         MOV.B   [R1],R0L
                      19225 ; rs232cmd.c 5290                                               Calibration.CBCalibration.GainM =
                             GainM;
005597 840716         19227         MOV.B   R0L,[R7+22]
00559A 964842rr       19228         MOV.B   ES,#SEG( _Calibration+215 )
00559E 9918rrrr       19229         MOV.W   R1,#SOF( _Calibration+215 )
0055A2 8209           19230         MOV.B   [R1],R0L
                      19231 ; rs232cmd.c 5291                                                                                
                                                                                                                             
                                                                                                                            
                      19232 ; rs232cmd.c 5292                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0055A4 9918rrrr       19234         MOV.W   R1,#SEG( _Calibration )
0055A8 9908rrrr       19235         MOV.W   R0,#SOF( _Calibration )
0055AC 964842rr       19236         MOV.B   ES,#SEG( _CalibrationPtr )
0055B0 9928rrrr       19237         MOV.W   R2,#SOF( _CalibrationPtr )
0055B4 8A22           19238         MOV.W   R2,[R2]
0055B6 993800E0       19239         MOV.W   R3,#0E0H
                      19240         CALL    _NV_Store
0055BA C4rrrrrr       +19240 ;       FCALL   _NV_Store
                      19241 ; rs232cmd.c 5293       
                      19242 ; rs232cmd.c 5294                                               if ( CBSetup.System < NTSC)
0055BE 964842rr       19244         MOV.B   ES,#SEG( _CBSetup )
0055C2 9908rrrr       19245         MOV.W   R0,#SOF( _CBSetup )
0055C6 8200           19246         MOV.B   R0L,[R0]
0055C8 910402         19247         CMP.B   R0L,#02H
0055CB F005           19248         BCC     _1341
                      19249 ; rs232cmd.c 5295                                                       WriteCBGain( GainG);
0055CD 840714         19251         MOV.B   R0L,[R7+20]
                      19252         CALL    _WriteCBGain
0055D0 C4rrrrrr       +19252 ;       FCALL   _WriteCBGain
0055D4 FE04           19253         BR      _1348
0055D4 FE04           19253         BR      _1348
0055D6                19254 _1341:
                      19255 ; rs232cmd.c 5296                                               else
                      19256 ; rs232cmd.c 5297                                                       WriteCBGain( GainM);
0055D6 840716         19258         MOV.B   R0L,[R7+22]
                      19259         CALL    _WriteCBGain
0055D9 C4rrrrrr       +19259 ;       FCALL   _WriteCBGain
                      19260 ; rs232cmd.c 5298                                       }
                      19261 ; rs232cmd.c 5299                               }
                      19262 ; rs232cmd.c 5300                       }
                      19263 ; rs232cmd.c 5301               }
0055DE                19265 _1348:
                      19266 ; rs232cmd.c 5302       }
0055DE 99700018       19268         ADD.W   R7,#018H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 316

ADDR   CODE            LINE SOURCELINE
0055E2 2F30           19270         POP.W   R4, R5
0055E4 D680           19272         RET
                      19274 ; rs232cmd.c 5303       
                      19275 ; rs232cmd.c 5304       /************************************************************************
                            **/
                      19276 ; rs232cmd.c 5305       /* FactTSGenCGain                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19277 ; rs232cmd.c 5306       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19278 ; rs232cmd.c 5307       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19279 ; rs232cmd.c 5308       /* Revised:       000727,                                                
                                                                                                                             
                                                                                    */
                      19280 ; rs232cmd.c 5309       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19281 ; rs232cmd.c 5310       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19282 ; rs232cmd.c 5311       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19283 ; rs232cmd.c 5312       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19284 ; rs232cmd.c 5313       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19285 ; rs232cmd.c 5314       /************************************************************************
                            **/
                      19286 ; rs232cmd.c 5315       void FactTSGenCGain( void)
                      19287 ; rs232cmd.c 5316       {
                      19288         ALIGN   1
                      19290         PUBLIC  _FactTSGenCGain
0055E6                19291 _FactTSGenCGain:
0055E6 0F30           19295         PUSH.W  R4, R5
0055E8 99720018       19297         SUB.W   R7,#018H
                      19302 ; rs232cmd.c 5317               char buffer[20];
                      19303 ; rs232cmd.c 5318               UC ChromaGainG, ChromaGainM;
                      19304 ; rs232cmd.c 5319       
                      19305 ; rs232cmd.c 5320               if ( CmdExecute && !SCPIError)
0055EC 964842rr       19307         MOV.B   ES,#SEG( _CmdExecute )
0055F0 9908rrrr       19308         MOV.W   R0,#SOF( _CmdExecute )
0055F4 8200           19309         MOV.B   R0L,[R0]
                      19310         BEQ     _1363
0055F6 F202           +19310 ;       BNE     _LG_1324
0055F8 D50095         +19310 ;       JMP.L   _1363
0055FC D5009500       +19310 ;       JMP.L   _1363
0055FC                +19310 _LG_1324:
0055FC 964842rr       19311         MOV.B   ES,#SEG( _SCPIError )
005600 9908rrrr       19312         MOV.W   R0,#SOF( _SCPIError )
005604 8A00           19313         MOV.W   R0,[R0]
                      19314         BNE     _1363
005606 F302           +19314 ;       BEQ     _LG_1326
005608 D5008D         +19314 ;       JMP.L   _1363
00560C D5008D00       +19314 ;       JMP.L   _1363
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 317

ADDR   CODE            LINE SOURCELINE
00560C                +19314 _LG_1326:
                      19315 ; rs232cmd.c 5321               {
                      19316 ; rs232cmd.c 5322                       if ( CmdRequest)
00560C 964842rr       19318         MOV.B   ES,#SEG( _CmdRequest )
005610 9908rrrr       19319         MOV.W   R0,#SOF( _CmdRequest )
005614 8200           19320         MOV.B   R0L,[R0]
005616 F32E           19321         BEQ     _1353
                      19322 ; rs232cmd.c 5323                       {
                      19323 ; rs232cmd.c 5324                               if ( ParCnt)
005618 964842rr       19325         MOV.B   ES,#SEG( _ParCnt )
00561C 9908rrrr       19326         MOV.W   R0,#SOF( _ParCnt )
005620 8200           19327         MOV.B   R0L,[R0]
005622 F306           19328         BEQ     _1352
                      19329 ; rs232cmd.c 5325                                       SCPIError = SyntaxErr;
005624 964842rr       19331         MOV.B   ES,#SEG( _SCPIError )
005628 9908rrrr       19332         MOV.W   R0,#SOF( _SCPIError )
00562C BA03           19333         MOV.W   [R0],#03H
00562E FE7A           19334         BR      _1363
00562E FE7A           19334         BR      _1363
005630                19335 _1352:
                      19336 ; rs232cmd.c 5326                               else
                      19337 ; rs232cmd.c 5327                               {
                      19338 ; rs232cmd.c 5328                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.ChromaGainG, 
                      19339 ; rs232cmd.c 5329                                                                                
                                                                                        Calibration.CBCalibration.ChromaGainM
                            );
005630 91A8rr         19341         MOV.B   R5L,#SEG( __lc_bs )
005633 71BB           19342         XOR.B   R5H,R5H
005635 8947           19343         MOV.W   R4,R7
005637 964842rr       19344         MOV.B   ES,#SEG( _Calibration+214 )
00563B 9908rrrr       19345         MOV.W   R0,#SOF( _Calibration+214 )
00563F 8200           19346         MOV.B   R0L,[R0]
005641 B110           19347         MOVS.B  R0H,#00H
005643 964842rr       19348         MOV.B   ES,#SEG( _Calibration+216 )
005647 9918rrrr       19349         MOV.W   R1,#SOF( _Calibration+216 )
00564B 8221           19350         MOV.B   R1L,[R1]
00564D B130           19351         MOVS.B  R1H,#00H
00564F 0F02           19352         PUSH.W  R1
005651 0F01           19354         PUSH.W  R0
005653 9918rrrr       19356         MOV.W   R1,#SEG( _1297 )
005657 9908rrrr       19357         MOV.W   R0,#SOF( _1297 )
00565B 0F03           19358         PUSH.W  R0, R1
00565D 8915           19360         MOV.W   R1,R5
00565F 8904           19361         MOV.W   R0,R4
                      19362         CALL    _sprintf
005661 C4rrrrrr       +19362 ;       FCALL   _sprintf
005665 99700008       19363         ADD.W   R7,#08H
                      19365 ; rs232cmd.c 5330                                       rs232puts( buffer);
005669 8915           19367         MOV.W   R1,R5
00566B 8904           19368         MOV.W   R0,R4
                      19369         CALL    _rs232puts
00566D C4rrrrrr       +19369 ;       FCALL   _rs232puts
                      19370 ; rs232cmd.c 5331                               }
                      19371 ; rs232cmd.c 5332                       }
005671 FE59           19373         BR      _1363
005671 FE5900         19373         BR      _1363
005674                19374 _1353:
                      19375 ; rs232cmd.c 5333                       else
                      19376 ; rs232cmd.c 5334                       {
                      19377 ; rs232cmd.c 5335                               if ( !PasswordProtected)
005674 964842rr       19379         MOV.B   ES,#SEG( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 318

ADDR   CODE            LINE SOURCELINE
005678 9908rrrr       19380         MOV.W   R0,#SOF( _PasswordProtected )
00567C 8A00           19381         MOV.W   R0,[R0]
00567E F252           19382         BNE     _1363
                      19383 ; rs232cmd.c 5336                               {
                      19384 ; rs232cmd.c 5337                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ChromaGainG, &ChromaGainM)) != 2))
005680 964842rr       19386         MOV.B   ES,#SEG( _ParCnt )
005684 9908rrrr       19387         MOV.W   R0,#SOF( _ParCnt )
005688 8200           19388         MOV.B   R0L,[R0]
00568A 910402         19389         CMP.B   R0L,#02H
00568D F21B           19390         BNE     _1354
00568F 9918rrrr       19391         MOV.W   R1,#SEG( _Cmd )
005693 9908rrrr       19392         MOV.W   R0,#SOF( _Cmd )
005697 9168rr         19393         MOV.B   R3L,#SEG( __lc_bs )
00569A 7177           19394         XOR.B   R3H,R3H
00569C 402714         19395         LEA     R2,R7+20
00569F 91A8rr         19396         MOV.B   R5L,#SEG( __lc_bs )
0056A2 71BB           19397         XOR.B   R5H,R5H
0056A4 404716         19398         LEA     R4,R7+22
0056A7 0F30           19399         PUSH.W  R4, R5
0056A9 0F0C           19401         PUSH.W  R2, R3
0056AB 9938rrrr       19403         MOV.W   R3,#SEG( _1298 )
0056AF 9928rrrr       19404         MOV.W   R2,#SOF( _1298 )
0056B3 0F0C           19405         PUSH.W  R2, R3
                      19407         CALL    _sscanf
0056B5 C4rrrrrr       +19407 ;       FCALL   _sscanf
0056B9 9970000C       19408         ADD.W   R7,#0CH
0056BD 99040002       19410         CMP.W   R0,#02H
0056C1 F307           19411         BEQ     _1355
0056C1 F30700         19411         BEQ     _1355
0056C4                19412 _1354:
                      19413 ; rs232cmd.c 5338                                               SCPIError = SyntaxErr;
0056C4 964842rr       19415         MOV.B   ES,#SEG( _SCPIError )
0056C8 9908rrrr       19416         MOV.W   R0,#SOF( _SCPIError )
0056CC BA03           19417         MOV.W   [R0],#03H
0056CE FE2A           19418         BR      _1363
0056CE FE2A           19418         BR      _1363
0056D0                19419 _1355:
                      19420 ; rs232cmd.c 5339                                       else
                      19421 ; rs232cmd.c 5340                                       {
                      19422 ; rs232cmd.c 5341                                               Calibration.CBCalibration.ChromaG
                            ainG = ChromaGainG;
0056D0 840714         19424         MOV.B   R0L,[R7+20]
0056D3 964842rr       19425         MOV.B   ES,#SEG( _Calibration+214 )
0056D7 9918rrrr       19426         MOV.W   R1,#SOF( _Calibration+214 )
0056DB 8209           19427         MOV.B   [R1],R0L
                      19428 ; rs232cmd.c 5342                                               Calibration.CBCalibration.ChromaG
                            ainM = ChromaGainM;
0056DD 840716         19430         MOV.B   R0L,[R7+22]
0056E0 964842rr       19431         MOV.B   ES,#SEG( _Calibration+216 )
0056E4 9918rrrr       19432         MOV.W   R1,#SOF( _Calibration+216 )
0056E8 8209           19433         MOV.B   [R1],R0L
                      19434 ; rs232cmd.c 5343                                                                                
                                                                                                                             
                                                                                                                            
                      19435 ; rs232cmd.c 5344                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
0056EA 9918rrrr       19437         MOV.W   R1,#SEG( _Calibration )
0056EE 9908rrrr       19438         MOV.W   R0,#SOF( _Calibration )
0056F2 964842rr       19439         MOV.B   ES,#SEG( _CalibrationPtr )
0056F6 9928rrrr       19440         MOV.W   R2,#SOF( _CalibrationPtr )
0056FA 8A22           19441         MOV.W   R2,[R2]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 319

ADDR   CODE            LINE SOURCELINE
0056FC 993800E0       19442         MOV.W   R3,#0E0H
                      19443         CALL    _NV_Store
005700 C4rrrrrr       +19443 ;       FCALL   _NV_Store
                      19444 ; rs232cmd.c 5345       
                      19445 ; rs232cmd.c 5346                                               if ( CBSetup.System < NTSC)
005704 964842rr       19447         MOV.B   ES,#SEG( _CBSetup )
005708 9908rrrr       19448         MOV.W   R0,#SOF( _CBSetup )
00570C 8200           19449         MOV.B   R0L,[R0]
00570E 910402         19450         CMP.B   R0L,#02H
005711 F005           19451         BCC     _1356
                      19452 ; rs232cmd.c 5347                                                       WriteCBChromaGain( Chroma
                            GainG);
005713 840714         19454         MOV.B   R0L,[R7+20]
                      19455         CALL    _WriteCBChromaGain
005716 C4rrrrrr       +19455 ;       FCALL   _WriteCBChromaGain
00571A FE04           19456         BR      _1363
00571A FE04           19456         BR      _1363
00571C                19457 _1356:
                      19458 ; rs232cmd.c 5348                                               else
                      19459 ; rs232cmd.c 5349                                                       WriteCBChromaGain( Chroma
                            GainM);
00571C 840716         19461         MOV.B   R0L,[R7+22]
                      19462         CALL    _WriteCBChromaGain
00571F C4rrrrrr       +19462 ;       FCALL   _WriteCBChromaGain
                      19463 ; rs232cmd.c 5350                                       }
                      19464 ; rs232cmd.c 5351                               }
                      19465 ; rs232cmd.c 5352                       }
                      19466 ; rs232cmd.c 5353               }
005724                19468 _1363:
                      19469 ; rs232cmd.c 5354       }
005724 99700018       19471         ADD.W   R7,#018H
005728 2F30           19473         POP.W   R4, R5
00572A D680           19475         RET
                      19477 ; rs232cmd.c 5355       
                      19478 ; rs232cmd.c 5356       /************************************************************************
                            **/
                      19479 ; rs232cmd.c 5357       /* FactTSGenPhase                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      19480 ; rs232cmd.c 5358       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19481 ; rs232cmd.c 5359       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19482 ; rs232cmd.c 5360       /* Revised:       000727                                                 
                                                                                                                             
                                                                                    */
                      19483 ; rs232cmd.c 5361       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19484 ; rs232cmd.c 5362       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19485 ; rs232cmd.c 5363       /* Remarks:             PAL range: 0-4*625*1728, NTSC range: 0-2*525*1716
                                                                            */
                      19486 ; rs232cmd.c 5364       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 320

ADDR   CODE            LINE SOURCELINE
                      19487 ; rs232cmd.c 5365       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19488 ; rs232cmd.c 5366       /************************************************************************
                            **/
                      19489 ; rs232cmd.c 5367       void FactTSGenPhase( void)
                      19490 ; rs232cmd.c 5368       {
                      19491         ALIGN   1
                      19493         PUBLIC  _FactTSGenPhase
00572C                19494 _FactTSGenPhase:
00572C 0F30           19498         PUSH.W  R4, R5
00572E 99720026       19500         SUB.W   R7,#026H
                      19505 ; rs232cmd.c 5369               char buffer[30];
                      19506 ; rs232cmd.c 5370               UL PhaseG, PhaseM;
                      19507 ; rs232cmd.c 5371       
                      19508 ; rs232cmd.c 5372               if ( CmdExecute && !SCPIError)
005732 964842rr       19510         MOV.B   ES,#SEG( _CmdExecute )
005736 9908rrrr       19511         MOV.W   R0,#SOF( _CmdExecute )
00573A 8200           19512         MOV.B   R0L,[R0]
                      19513         BEQ     _1376
00573C F202           +19513 ;       BNE     _LG_1340
00573E D50092         +19513 ;       JMP.L   _1376
005742 D5009200       +19513 ;       JMP.L   _1376
005742                +19513 _LG_1340:
005742 964842rr       19514         MOV.B   ES,#SEG( _SCPIError )
005746 9908rrrr       19515         MOV.W   R0,#SOF( _SCPIError )
00574A 8A00           19516         MOV.W   R0,[R0]
                      19517         BNE     _1376
00574C F302           +19517 ;       BEQ     _LG_1342
00574E D5008A         +19517 ;       JMP.L   _1376
005752 D5008A00       +19517 ;       JMP.L   _1376
005752                +19517 _LG_1342:
                      19518 ; rs232cmd.c 5373               {
                      19519 ; rs232cmd.c 5374                       if ( CmdRequest)
005752 964842rr       19521         MOV.B   ES,#SEG( _CmdRequest )
005756 9908rrrr       19522         MOV.W   R0,#SOF( _CmdRequest )
00575A 8200           19523         MOV.B   R0L,[R0]
00575C F32E           19524         BEQ     _1368
                      19525 ; rs232cmd.c 5375                       {
                      19526 ; rs232cmd.c 5376                               if ( ParCnt)
00575E 964842rr       19528         MOV.B   ES,#SEG( _ParCnt )
005762 9908rrrr       19529         MOV.W   R0,#SOF( _ParCnt )
005766 8200           19530         MOV.B   R0L,[R0]
005768 F306           19531         BEQ     _1367
                      19532 ; rs232cmd.c 5377                                       SCPIError = SyntaxErr;
00576A 964842rr       19534         MOV.B   ES,#SEG( _SCPIError )
00576E 9908rrrr       19535         MOV.W   R0,#SOF( _SCPIError )
005772 BA03           19536         MOV.W   [R0],#03H
005774 FE77           19537         BR      _1376
005774 FE77           19537         BR      _1376
005776                19538 _1367:
                      19539 ; rs232cmd.c 5378                               else
                      19540 ; rs232cmd.c 5379                               {
                      19541 ; rs232cmd.c 5380                                       sprintf( buffer, "%lu,%lu\n", Calibration
                            .CBCalibration.PhaseG, 
                      19542 ; rs232cmd.c 5381                                                                                
                                                                                                Calibration.CBCalibration.Pha
                            seM);
005776 91A8rr         19544         MOV.B   R5L,#SEG( __lc_bs )
005779 71BB           19545         XOR.B   R5H,R5H
00577B 8947           19546         MOV.W   R4,R7
00577D 964842rr       19547         MOV.B   ES,#SEG( _Calibration+202 )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 321

ADDR   CODE            LINE SOURCELINE
005781 9918rrrr       19548         MOV.W   R1,#SOF( _Calibration+202 )
005785 8B01           19549         MOV.W   R0,[R1+]
005787 8A11           19550         MOV.W   R1,[R1]
005789 964842rr       19551         MOV.B   ES,#SEG( _Calibration+208 )
00578D 9938rrrr       19552         MOV.W   R3,#SOF( _Calibration+208 )
005791 8B23           19553         MOV.W   R2,[R3+]
005793 8A33           19554         MOV.W   R3,[R3]
005795 0F0C           19555         PUSH.W  R2, R3
005797 0F03           19557         PUSH.W  R0, R1
005799 9918rrrr       19559         MOV.W   R1,#SEG( _1223 )
00579D 9908rrrr       19560         MOV.W   R0,#SOF( _1223 )
0057A1 0F03           19561         PUSH.W  R0, R1
0057A3 8915           19563         MOV.W   R1,R5
0057A5 8904           19564         MOV.W   R0,R4
                      19565         CALL    _sprintf
0057A7 C4rrrrrr       +19565 ;       FCALL   _sprintf
0057AB 9970000C       19566         ADD.W   R7,#0CH
                      19568 ; rs232cmd.c 5382                                       rs232puts( buffer);
0057AF 8915           19570         MOV.W   R1,R5
0057B1 8904           19571         MOV.W   R0,R4
                      19572         CALL    _rs232puts
0057B3 C4rrrrrr       +19572 ;       FCALL   _rs232puts
                      19573 ; rs232cmd.c 5383                               }
                      19574 ; rs232cmd.c 5384                       }
0057B7 FE56           19576         BR      _1376
0057B7 FE5600         19576         BR      _1376
0057BA                19577 _1368:
                      19578 ; rs232cmd.c 5385                       else
                      19579 ; rs232cmd.c 5386                       {
                      19580 ; rs232cmd.c 5387                               if ( !PasswordProtected)
0057BA 964842rr       19582         MOV.B   ES,#SEG( _PasswordProtected )
0057BE 9908rrrr       19583         MOV.W   R0,#SOF( _PasswordProtected )
0057C2 8A00           19584         MOV.W   R0,[R0]
0057C4 F24F           19585         BNE     _1376
                      19586 ; rs232cmd.c 5388                               {
                      19587 ; rs232cmd.c 5389                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%l
                            u,%lu", &PhaseG, &PhaseM)) != 2))
0057C6 964842rr       19589         MOV.B   ES,#SEG( _ParCnt )
0057CA 9908rrrr       19590         MOV.W   R0,#SOF( _ParCnt )
0057CE 8200           19591         MOV.B   R0L,[R0]
0057D0 910402         19592         CMP.B   R0L,#02H
0057D3 F21B           19593         BNE     _1369
0057D5 9918rrrr       19594         MOV.W   R1,#SEG( _Cmd )
0057D9 9908rrrr       19595         MOV.W   R0,#SOF( _Cmd )
0057DD 9168rr         19596         MOV.B   R3L,#SEG( __lc_bs )
0057E0 7177           19597         XOR.B   R3H,R3H
0057E2 40271E         19598         LEA     R2,R7+30
0057E5 91A8rr         19599         MOV.B   R5L,#SEG( __lc_bs )
0057E8 71BB           19600         XOR.B   R5H,R5H
0057EA 404722         19601         LEA     R4,R7+34
0057ED 0F30           19602         PUSH.W  R4, R5
0057EF 0F0C           19604         PUSH.W  R2, R3
0057F1 9938rrrr       19606         MOV.W   R3,#SEG( _1034 )
0057F5 9928rrrr       19607         MOV.W   R2,#SOF( _1034 )
0057F9 0F0C           19608         PUSH.W  R2, R3
                      19610         CALL    _sscanf
0057FB C4rrrrrr       +19610 ;       FCALL   _sscanf
0057FF 9970000C       19611         ADD.W   R7,#0CH
005803 99040002       19613         CMP.W   R0,#02H
005807 F307           19614         BEQ     _1370
005807 F30700         19614         BEQ     _1370
00580A                19615 _1369:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 322

ADDR   CODE            LINE SOURCELINE
                      19616 ; rs232cmd.c 5390                                               SCPIError = SyntaxErr;
00580A 964842rr       19618         MOV.B   ES,#SEG( _SCPIError )
00580E 9908rrrr       19619         MOV.W   R0,#SOF( _SCPIError )
005812 BA03           19620         MOV.W   [R0],#03H
005814 FE27           19621         BR      _1376
005814 FE27           19621         BR      _1376
005816                19622 _1370:
                      19623 ; rs232cmd.c 5391                                       else
                      19624 ; rs232cmd.c 5392                                       {
                      19625 ; rs232cmd.c 5393                                               Calibration.CBCalibration.PhaseG 
                            = PhaseG;
005816 8C1720         19627         MOV.W   R1,[R7+32]
005819 8C071E         19628         MOV.W   R0,[R7+30]
00581C 964842rr       19629         MOV.B   ES,#SEG( _Calibration+202 )
005820 9928rrrr       19630         MOV.W   R2,#SOF( _Calibration+202 )
005824 8B0A           19631         MOV.W   [R2+],R0
005826 8A1A           19632         MOV.W   [R2],R1
                      19633 ; rs232cmd.c 5394                                               Calibration.CBCalibration.PhaseM 
                            = PhaseM;
005828 8C1724         19635         MOV.W   R1,[R7+36]
00582B 8C0722         19636         MOV.W   R0,[R7+34]
00582E 964842rr       19637         MOV.B   ES,#SEG( _Calibration+208 )
005832 9928rrrr       19638         MOV.W   R2,#SOF( _Calibration+208 )
005836 8B0A           19639         MOV.W   [R2+],R0
005838 8A1A           19640         MOV.W   [R2],R1
                      19641 ; rs232cmd.c 5395                                       
                      19642 ; rs232cmd.c 5396                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
00583A 9918rrrr       19644         MOV.W   R1,#SEG( _Calibration )
00583E 9908rrrr       19645         MOV.W   R0,#SOF( _Calibration )
005842 964842rr       19646         MOV.B   ES,#SEG( _CalibrationPtr )
005846 9928rrrr       19647         MOV.W   R2,#SOF( _CalibrationPtr )
00584A 8A22           19648         MOV.W   R2,[R2]
00584C 993800E0       19649         MOV.W   R3,#0E0H
                      19650         CALL    _NV_Store
005850 C4rrrrrr       +19650 ;       FCALL   _NV_Store
                      19651 ; rs232cmd.c 5397       
                      19652 ; rs232cmd.c 5398                                               SetCBDelay( CBSetup.Delay);
005854 964842rr       19654         MOV.B   ES,#SEG( _CBSetup+4 )
005858 9918rrrr       19655         MOV.W   R1,#SOF( _CBSetup+4 )
00585C 8B01           19656         MOV.W   R0,[R1+]
00585E 8A11           19657         MOV.W   R1,[R1]
                      19658         CALL    _SetCBDelay
005860 C4rrrrrr       +19658 ;       FCALL   _SetCBDelay
                      19659 ; rs232cmd.c 5399                                       }
                      19660 ; rs232cmd.c 5400                               }
                      19661 ; rs232cmd.c 5401                       }
                      19662 ; rs232cmd.c 5402               }
005864                19664 _1376:
                      19665 ; rs232cmd.c 5403       }
005864 99700026       19667         ADD.W   R7,#026H
005868 2F30           19669         POP.W   R4, R5
00586A D680           19671         RET
                      19673 ; rs232cmd.c 5404       
                      19674 ; rs232cmd.c 5405       /************************************************************************
                            **/
                      19675 ; rs232cmd.c 5406       /* FactTSGenScHPhase                                                     
                                                                                                                             
                                RS232CMD.C  */
                      19676 ; rs232cmd.c 5407       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 323

ADDR   CODE            LINE SOURCELINE
                      19677 ; rs232cmd.c 5408       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19678 ; rs232cmd.c 5409       /* Revised:       000727                                                 
                                                                                                                             
                                                                                    */
                      19679 ; rs232cmd.c 5410       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19680 ; rs232cmd.c 5411       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19681 ; rs232cmd.c 5412       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19682 ; rs232cmd.c 5413       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19683 ; rs232cmd.c 5414       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19684 ; rs232cmd.c 5415       /************************************************************************
                            **/
                      19685 ; rs232cmd.c 5416       void FactTSGenScHPhase( void)
                      19686 ; rs232cmd.c 5417       {
                      19687         ALIGN   1
                      19689         PUBLIC  _FactTSGenScHPhase
00586C                19690 _FactTSGenScHPhase:
00586C 0F30           19694         PUSH.W  R4, R5
00586E 99720022       19696         SUB.W   R7,#022H
                      19701 ; rs232cmd.c 5418               char buffer[30];
                      19702 ; rs232cmd.c 5419               UC ScHPhaseG, ScHPhaseM;
                      19703 ; rs232cmd.c 5420       
                      19704 ; rs232cmd.c 5421               if ( CmdExecute && !SCPIError)
005872 964842rr       19706         MOV.B   ES,#SEG( _CmdExecute )
005876 9908rrrr       19707         MOV.W   R0,#SOF( _CmdExecute )
00587A 8200           19708         MOV.B   R0L,[R0]
                      19709         BEQ     _1388
00587C F202           +19709 ;       BNE     _LG_1354
00587E D5008C         +19709 ;       JMP.L   _1388
005882 D5008C00       +19709 ;       JMP.L   _1388
005882                +19709 _LG_1354:
005882 964842rr       19710         MOV.B   ES,#SEG( _SCPIError )
005886 9908rrrr       19711         MOV.W   R0,#SOF( _SCPIError )
00588A 8A00           19712         MOV.W   R0,[R0]
                      19713         BNE     _1388
00588C F302           +19713 ;       BEQ     _LG_1356
00588E D50084         +19713 ;       JMP.L   _1388
005892 D5008400       +19713 ;       JMP.L   _1388
005892                +19713 _LG_1356:
                      19714 ; rs232cmd.c 5422               {
                      19715 ; rs232cmd.c 5423                       if ( CmdRequest)
005892 964842rr       19717         MOV.B   ES,#SEG( _CmdRequest )
005896 9908rrrr       19718         MOV.W   R0,#SOF( _CmdRequest )
00589A 8200           19719         MOV.B   R0L,[R0]
00589C F32E           19720         BEQ     _1380
                      19721 ; rs232cmd.c 5424                       {
                      19722 ; rs232cmd.c 5425                               if ( ParCnt)
00589E 964842rr       19724         MOV.B   ES,#SEG( _ParCnt )
0058A2 9908rrrr       19725         MOV.W   R0,#SOF( _ParCnt )
0058A6 8200           19726         MOV.B   R0L,[R0]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 324

ADDR   CODE            LINE SOURCELINE
0058A8 F306           19727         BEQ     _1379
                      19728 ; rs232cmd.c 5426                                       SCPIError = SyntaxErr;
0058AA 964842rr       19730         MOV.B   ES,#SEG( _SCPIError )
0058AE 9908rrrr       19731         MOV.W   R0,#SOF( _SCPIError )
0058B2 BA03           19732         MOV.W   [R0],#03H
0058B4 FE71           19733         BR      _1388
0058B4 FE71           19733         BR      _1388
0058B6                19734 _1379:
                      19735 ; rs232cmd.c 5427                               else
                      19736 ; rs232cmd.c 5428                               {
                      19737 ; rs232cmd.c 5429                                       sprintf( buffer, "%u,%u\n", Calibration.C
                            BCalibration.ScHPhaseG, 
                      19738 ; rs232cmd.c 5430                                                                                
                                                                                        Calibration.CBCalibration.ScHPhaseM);
                            
0058B6 91A8rr         19740         MOV.B   R5L,#SEG( __lc_bs )
0058B9 71BB           19741         XOR.B   R5H,R5H
0058BB 8947           19742         MOV.W   R4,R7
0058BD 964842rr       19743         MOV.B   ES,#SEG( _Calibration+206 )
0058C1 9908rrrr       19744         MOV.W   R0,#SOF( _Calibration+206 )
0058C5 8200           19745         MOV.B   R0L,[R0]
0058C7 B110           19746         MOVS.B  R0H,#00H
0058C9 964842rr       19747         MOV.B   ES,#SEG( _Calibration+212 )
0058CD 9918rrrr       19748         MOV.W   R1,#SOF( _Calibration+212 )
0058D1 8221           19749         MOV.B   R1L,[R1]
0058D3 B130           19750         MOVS.B  R1H,#00H
0058D5 0F02           19751         PUSH.W  R1
0058D7 0F01           19753         PUSH.W  R0
0058D9 9918rrrr       19755         MOV.W   R1,#SEG( _1297 )
0058DD 9908rrrr       19756         MOV.W   R0,#SOF( _1297 )
0058E1 0F03           19757         PUSH.W  R0, R1
0058E3 8915           19759         MOV.W   R1,R5
0058E5 8904           19760         MOV.W   R0,R4
                      19761         CALL    _sprintf
0058E7 C4rrrrrr       +19761 ;       FCALL   _sprintf
0058EB 99700008       19762         ADD.W   R7,#08H
                      19764 ; rs232cmd.c 5431                                       rs232puts( buffer);
0058EF 8915           19766         MOV.W   R1,R5
0058F1 8904           19767         MOV.W   R0,R4
                      19768         CALL    _rs232puts
0058F3 C4rrrrrr       +19768 ;       FCALL   _rs232puts
                      19769 ; rs232cmd.c 5432                               }
                      19770 ; rs232cmd.c 5433                       }
0058F7 FE50           19772         BR      _1388
0058F7 FE5000         19772         BR      _1388
0058FA                19773 _1380:
                      19774 ; rs232cmd.c 5434                       else
                      19775 ; rs232cmd.c 5435                       {
                      19776 ; rs232cmd.c 5436                               if ( !PasswordProtected)
0058FA 964842rr       19778         MOV.B   ES,#SEG( _PasswordProtected )
0058FE 9908rrrr       19779         MOV.W   R0,#SOF( _PasswordProtected )
005902 8A00           19780         MOV.W   R0,[R0]
005904 F249           19781         BNE     _1388
                      19782 ; rs232cmd.c 5437                               {
                      19783 ; rs232cmd.c 5438                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &ScHPhaseG, &ScHPhaseM)) != 2))
005906 964842rr       19785         MOV.B   ES,#SEG( _ParCnt )
00590A 9908rrrr       19786         MOV.W   R0,#SOF( _ParCnt )
00590E 8200           19787         MOV.B   R0L,[R0]
005910 910402         19788         CMP.B   R0L,#02H
005913 F21B           19789         BNE     _1381
005915 9918rrrr       19790         MOV.W   R1,#SEG( _Cmd )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 325

ADDR   CODE            LINE SOURCELINE
005919 9908rrrr       19791         MOV.W   R0,#SOF( _Cmd )
00591D 9168rr         19792         MOV.B   R3L,#SEG( __lc_bs )
005920 7177           19793         XOR.B   R3H,R3H
005922 40271E         19794         LEA     R2,R7+30
005925 91A8rr         19795         MOV.B   R5L,#SEG( __lc_bs )
005928 71BB           19796         XOR.B   R5H,R5H
00592A 404720         19797         LEA     R4,R7+32
00592D 0F30           19798         PUSH.W  R4, R5
00592F 0F0C           19800         PUSH.W  R2, R3
005931 9938rrrr       19802         MOV.W   R3,#SEG( _1298 )
005935 9928rrrr       19803         MOV.W   R2,#SOF( _1298 )
005939 0F0C           19804         PUSH.W  R2, R3
                      19806         CALL    _sscanf
00593B C4rrrrrr       +19806 ;       FCALL   _sscanf
00593F 9970000C       19807         ADD.W   R7,#0CH
005943 99040002       19809         CMP.W   R0,#02H
005947 F307           19810         BEQ     _1382
005947 F30700         19810         BEQ     _1382
00594A                19811 _1381:
                      19812 ; rs232cmd.c 5439                                               SCPIError = SyntaxErr;
00594A 964842rr       19814         MOV.B   ES,#SEG( _SCPIError )
00594E 9908rrrr       19815         MOV.W   R0,#SOF( _SCPIError )
005952 BA03           19816         MOV.W   [R0],#03H
005954 FE21           19817         BR      _1388
005954 FE21           19817         BR      _1388
005956                19818 _1382:
                      19819 ; rs232cmd.c 5440                                       else
                      19820 ; rs232cmd.c 5441                                       {
                      19821 ; rs232cmd.c 5442                                               Calibration.CBCalibration.ScHPhas
                            eG = ScHPhaseG;
005956 84071E         19823         MOV.B   R0L,[R7+30]
005959 964842rr       19824         MOV.B   ES,#SEG( _Calibration+206 )
00595D 9918rrrr       19825         MOV.W   R1,#SOF( _Calibration+206 )
005961 8209           19826         MOV.B   [R1],R0L
                      19827 ; rs232cmd.c 5443                                               Calibration.CBCalibration.ScHPhas
                            eM = ScHPhaseM;
005963 840720         19829         MOV.B   R0L,[R7+32]
005966 964842rr       19830         MOV.B   ES,#SEG( _Calibration+212 )
00596A 9918rrrr       19831         MOV.W   R1,#SOF( _Calibration+212 )
00596E 8209           19832         MOV.B   [R1],R0L
                      19833 ; rs232cmd.c 5444                                       
                      19834 ; rs232cmd.c 5445                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005970 9918rrrr       19836         MOV.W   R1,#SEG( _Calibration )
005974 9908rrrr       19837         MOV.W   R0,#SOF( _Calibration )
005978 964842rr       19838         MOV.B   ES,#SEG( _CalibrationPtr )
00597C 9928rrrr       19839         MOV.W   R2,#SOF( _CalibrationPtr )
005980 8A22           19840         MOV.W   R2,[R2]
005982 993800E0       19841         MOV.W   R3,#0E0H
                      19842         CALL    _NV_Store
005986 C4rrrrrr       +19842 ;       FCALL   _NV_Store
                      19843 ; rs232cmd.c 5446       
                      19844 ; rs232cmd.c 5447                                               SetCBScHPhase( CBSetup.ScHPhase);
                            
00598A 964842rr       19846         MOV.B   ES,#SEG( _CBSetup+8 )
00598E 9908rrrr       19847         MOV.W   R0,#SOF( _CBSetup+8 )
005992 8A00           19848         MOV.W   R0,[R0]
                      19849         CALL    _SetCBScHPhase
005994 C4rrrrrr       +19849 ;       FCALL   _SetCBScHPhase
                      19850 ; rs232cmd.c 5448                                       }
                      19851 ; rs232cmd.c 5449                               }
                      19852 ; rs232cmd.c 5450                       }
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 326

ADDR   CODE            LINE SOURCELINE
                      19853 ; rs232cmd.c 5451               }
005998                19855 _1388:
                      19856 ; rs232cmd.c 5452       }
005998 99700022       19858         ADD.W   R7,#022H
00599C 2F30           19860         POP.W   R4, R5
00599E D680           19862         RET
                      19864 ; rs232cmd.c 5453       
                      19865 ; rs232cmd.c 5454       /************************************************************************
                            **/
                      19866 ; rs232cmd.c 5455       /* FactAudioGenStatus                                                    
                                                                                                                             
                                RS232CMD.C  */
                      19867 ; rs232cmd.c 5456       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19868 ; rs232cmd.c 5457       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      19869 ; rs232cmd.c 5458       /* Revised:       000625                                                 
                                                                                                                             
                                                                                    */
                      19870 ; rs232cmd.c 5459       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19871 ; rs232cmd.c 5460       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19872 ; rs232cmd.c 5461       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                      19873 ; rs232cmd.c 5462       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19874 ; rs232cmd.c 5463       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19875 ; rs232cmd.c 5464       /************************************************************************
                            **/
                      19876 ; rs232cmd.c 5465       void FactAudioGenStatus( void)
                      19877 ; rs232cmd.c 5466       {
                      19878         ALIGN   1
                      19880         PUBLIC  _FactAudioGenStatus
0059A0                19881 _FactAudioGenStatus:
0059A0 0F30           19885         PUSH.W  R4, R5
0059A2 99720014       19887         SUB.W   R7,#014H
                      19890 ; rs232cmd.c 5467               char buffer[20];
                      19891 ; rs232cmd.c 5468       
                      19892 ; rs232cmd.c 5469               if ( CmdExecute && !SCPIError)
0059A6 964842rr       19894         MOV.B   ES,#SEG( _CmdExecute )
0059AA 9908rrrr       19895         MOV.W   R0,#SOF( _CmdExecute )
0059AE 8200           19896         MOV.B   R0L,[R0]
0059B0 F337           19897         BEQ     _1396
0059B2 964842rr       19898         MOV.B   ES,#SEG( _SCPIError )
0059B6 9908rrrr       19899         MOV.W   R0,#SOF( _SCPIError )
0059BA 8A00           19900         MOV.W   R0,[R0]
0059BC F231           19901         BNE     _1396
                      19902 ; rs232cmd.c 5470               {
                      19903 ; rs232cmd.c 5471                       if ( CmdRequest)
0059BE 964842rr       19905         MOV.B   ES,#SEG( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 327

ADDR   CODE            LINE SOURCELINE
0059C2 9908rrrr       19906         MOV.W   R0,#SOF( _CmdRequest )
0059C6 8200           19907         MOV.B   R0L,[R0]
0059C8 F326           19908         BEQ     _1392
                      19909 ; rs232cmd.c 5472                       {
                      19910 ; rs232cmd.c 5473                               if ( ParCnt)
0059CA 964842rr       19912         MOV.B   ES,#SEG( _ParCnt )
0059CE 9908rrrr       19913         MOV.W   R0,#SOF( _ParCnt )
0059D2 8200           19914         MOV.B   R0L,[R0]
0059D4 F306           19915         BEQ     _1391
                      19916 ; rs232cmd.c 5474                                       SCPIError = SyntaxErr;
0059D6 964842rr       19918         MOV.B   ES,#SEG( _SCPIError )
0059DA 9908rrrr       19919         MOV.W   R0,#SOF( _SCPIError )
0059DE BA03           19920         MOV.W   [R0],#03H
0059E0 FE1F           19921         BR      _1396
0059E0 FE1F           19921         BR      _1396
0059E2                19922 _1391:
                      19923 ; rs232cmd.c 5475                               else
                      19924 ; rs232cmd.c 5476                               {
                      19925 ; rs232cmd.c 5477                                       sprintf( buffer, "%u\n", 0, AudioStatus()
                            );
                      19927         CALL    _AudioStatus
0059E2 C4rrrrrr       +19927 ;       FCALL   _AudioStatus
0059E6 B110           19928         MOVS.B  R0H,#00H
0059E8 91A8rr         19929         MOV.B   R5L,#SEG( __lc_bs )
0059EB 71BB           19930         XOR.B   R5H,R5H
0059ED 8947           19931         MOV.W   R4,R7
0059EF 0F01           19932         PUSH.W  R0
0059F1 B900           19934         MOV.W   R0,#00H
0059F3 0F01           19935         PUSH.W  R0
0059F5 9918rrrr       19937         MOV.W   R1,#SEG( _1009 )
0059F9 9908rrrr       19938         MOV.W   R0,#SOF( _1009 )
0059FD 0F03           19939         PUSH.W  R0, R1
0059FF 8915           19941         MOV.W   R1,R5
005A01 8904           19942         MOV.W   R0,R4
                      19943         CALL    _sprintf
005A03 C4rrrrrr       +19943 ;       FCALL   _sprintf
005A07 99700008       19944         ADD.W   R7,#08H
                      19946 ; rs232cmd.c 5478                                       rs232puts( buffer);
005A0B 8915           19948         MOV.W   R1,R5
005A0D 8904           19949         MOV.W   R0,R4
                      19950         CALL    _rs232puts
005A0F C4rrrrrr       +19950 ;       FCALL   _rs232puts
                      19951 ; rs232cmd.c 5479                               }
                      19952 ; rs232cmd.c 5480                       }
005A13 FE06           19954         BR      _1396
005A13 FE0600         19954         BR      _1396
005A16                19955 _1392:
                      19956 ; rs232cmd.c 5481                       else
                      19957 ; rs232cmd.c 5482                               SCPIError = SyntaxErr;
005A16 964842rr       19959         MOV.B   ES,#SEG( _SCPIError )
005A1A 9908rrrr       19960         MOV.W   R0,#SOF( _SCPIError )
005A1E BA03           19961         MOV.W   [R0],#03H
                      19962 ; rs232cmd.c 5483               }
005A20                19964 _1396:
                      19965 ; rs232cmd.c 5484       }
005A20 99700014       19967         ADD.W   R7,#014H
005A24 2F30           19969         POP.W   R4, R5
005A26 D680           19971         RET
                      19973 ; rs232cmd.c 5485       
                      19974 ; rs232cmd.c 5486       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 328

ADDR   CODE            LINE SOURCELINE
                      19975 ; rs232cmd.c 5487       /* FactAudioGenDate                                                      
                                                                                                                             
                                         RS232CMD.C */
                      19976 ; rs232cmd.c 5488       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19977 ; rs232cmd.c 5489       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      19978 ; rs232cmd.c 5490       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      19979 ; rs232cmd.c 5491       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      19980 ; rs232cmd.c 5492       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      19981 ; rs232cmd.c 5493       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      19982 ; rs232cmd.c 5494       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      19983 ; rs232cmd.c 5495       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      19984 ; rs232cmd.c 5496       /************************************************************************
                            **/
                      19985 ; rs232cmd.c 5497       void FactAudioGenDate( void)
                      19986 ; rs232cmd.c 5498       {
                      19987         ALIGN   1
                      19989         PUBLIC  _FactAudioGenDate
005A28                19990 _FactAudioGenDate:
005A28 0F30           19994         PUSH.W  R4, R5
005A2A 9972001A       19996         SUB.W   R7,#01AH
                      20002 ; rs232cmd.c 5499               UI year, month, day;
                      20003 ; rs232cmd.c 5500               char buffer[20];
                      20004 ; rs232cmd.c 5501       
                      20005 ; rs232cmd.c 5502               if ( CmdExecute && !SCPIError)
005A2E 964842rr       20007         MOV.B   ES,#SEG( _CmdExecute )
005A32 9908rrrr       20008         MOV.W   R0,#SOF( _CmdExecute )
005A36 8200           20009         MOV.B   R0L,[R0]
                      20010         BEQ     _1408
005A38 F202           +20010 ;       BNE     _LG_1376
005A3A D500C7         +20010 ;       JMP.L   _1408
005A3E D500C700       +20010 ;       JMP.L   _1408
005A3E                +20010 _LG_1376:
005A3E 964842rr       20011         MOV.B   ES,#SEG( _SCPIError )
005A42 9908rrrr       20012         MOV.W   R0,#SOF( _SCPIError )
005A46 8A00           20013         MOV.W   R0,[R0]
                      20014         BNE     _1408
005A48 F302           +20014 ;       BEQ     _LG_1378
005A4A D500BF         +20014 ;       JMP.L   _1408
005A4E D500BF00       +20014 ;       JMP.L   _1408
005A4E                +20014 _LG_1378:
                      20015 ; rs232cmd.c 5503               {
                      20016 ; rs232cmd.c 5504                       if ( CmdRequest)
005A4E 964842rr       20018         MOV.B   ES,#SEG( _CmdRequest )
005A52 9908rrrr       20019         MOV.W   R0,#SOF( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 329

ADDR   CODE            LINE SOURCELINE
005A56 8200           20020         MOV.B   R0L,[R0]
005A58 F35A           20021         BEQ     _1398
                      20022 ; rs232cmd.c 5505                       {
                      20023 ; rs232cmd.c 5506                               if ( ParCnt)
005A5A 964842rr       20025         MOV.B   ES,#SEG( _ParCnt )
005A5E 9908rrrr       20026         MOV.W   R0,#SOF( _ParCnt )
005A62 8200           20027         MOV.B   R0L,[R0]
005A64 F307           20028         BEQ     _1397
                      20029 ; rs232cmd.c 5507                                       SCPIError = SyntaxErr;
005A66 964842rr       20031         MOV.B   ES,#SEG( _SCPIError )
005A6A 9908rrrr       20032         MOV.W   R0,#SOF( _SCPIError )
005A6E BA03           20033         MOV.W   [R0],#03H
                      20034         BR      _1408
005A70 D500AC         +20034         JMP.L   _1408
005A70 D500AC00       +20034         JMP.L   _1408
005A74                20035 _1397:
                      20036 ; rs232cmd.c 5508                               else
                      20037 ; rs232cmd.c 5509                               {
                      20038 ; rs232cmd.c 5510                                       day = Calibration.AudioCalibration.Date %
                             100;
005A74 964842rr       20040         MOV.B   ES,#SEG( _Calibration+218 )
005A78 9918rrrr       20041         MOV.W   R1,#SOF( _Calibration+218 )
005A7C 8B01           20042         MOV.W   R0,[R1+]
005A7E 8A11           20043         MOV.W   R1,[R1]
005A80 B930           20044         MOV.W   R3,#00H
005A82 99280064       20045         MOV.W   R2,#064H
005A86 964842rr       20046         MOV.B   ES,#SEG( _Calibration+218 )
005A8A 9948rrrr       20047         MOV.W   R4,#SOF( _Calibration+218 )
005A8E 8B0C           20048         MOV.W   [R4+],R0
005A90 8A1C           20049         MOV.W   [R4],R1
005A92 C4rrrrrr       20050         FCALL   __UMODL
005A96 8C0F04         20051         MOV.W   [R7+4],R0
005A99 964842rr       20052         MOV.B   ES,#SEG( _Calibration+218 )
005A9D 9918rrrr       20053         MOV.W   R1,#SOF( _Calibration+218 )
005AA1 8B01           20054         MOV.W   R0,[R1+]
005AA3 8A11           20055         MOV.W   R1,[R1]
                      20056 ; rs232cmd.c 5511                                       month = ( Calibration.AudioCalibration.Da
                            te / 100) % 100;
005AA5 B930           20058         MOV.W   R3,#00H
005AA7 99280064       20059         MOV.W   R2,#064H
005AAB 8953           20060         MOV.W   R5,R3
005AAD 8942           20061         MOV.W   R4,R2
005AAF C4rrrrrr       20062         FCALL   __UDIVL
005AB3 8935           20063         MOV.W   R3,R5
005AB5 8924           20064         MOV.W   R2,R4
005AB7 C4rrrrrr       20065         FCALL   __UMODL
005ABB 8C0F02         20066         MOV.W   [R7+2],R0
                      20067 ; rs232cmd.c 5512                                       year = ( Calibration.AudioCalibration.Dat
                            e / 10000);
005ABE B930           20069         MOV.W   R3,#00H
005AC0 99282710       20070         MOV.W   R2,#02710H
005AC4 964842rr       20071         MOV.B   ES,#SEG( _Calibration+218 )
005AC8 9918rrrr       20072         MOV.W   R1,#SOF( _Calibration+218 )
005ACC 8B01           20073         MOV.W   R0,[R1+]
005ACE 8A11           20074         MOV.W   R1,[R1]
005AD0 C4rrrrrr       20075         FCALL   __UDIVL
005AD4 8A0F           20076         MOV.W   [R7],R0
                      20077 ; rs232cmd.c 5513       
                      20078 ; rs232cmd.c 5514                                       sprintf( buffer, "%u,%u,%u\n", year, mont
                            h, day);
005AD6 91A8rr         20080         MOV.B   R5L,#SEG( __lc_bs )
005AD9 71BB           20081         XOR.B   R5H,R5H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 330

ADDR   CODE            LINE SOURCELINE
005ADB 404706         20082         LEA     R4,R7+6
005ADE 8C0704         20083         MOV.W   R0,[R7+4]
005AE1 0F01           20084         PUSH.W  R0
005AE3 8C0704         20086         MOV.W   R0,[R7+4]
005AE6 0F01           20087         PUSH.W  R0
005AE8 8C0704         20089         MOV.W   R0,[R7+4]
005AEB 0F01           20090         PUSH.W  R0
005AED 9918rrrr       20092         MOV.W   R1,#SEG( _1170 )
005AF1 9908rrrr       20093         MOV.W   R0,#SOF( _1170 )
005AF5 0F03           20094         PUSH.W  R0, R1
005AF7 8915           20096         MOV.W   R1,R5
005AF9 8904           20097         MOV.W   R0,R4
                      20098         CALL    _sprintf
005AFB C4rrrrrr       +20098 ;       FCALL   _sprintf
005AFF 9970000A       20099         ADD.W   R7,#0AH
                      20101 ; rs232cmd.c 5515       
                      20102 ; rs232cmd.c 5516                                       rs232puts( buffer);
005B03 8915           20104         MOV.W   R1,R5
005B05 8904           20105         MOV.W   R0,R4
                      20106         CALL    _rs232puts
005B07 C4rrrrrr       +20106 ;       FCALL   _rs232puts
                      20107 ; rs232cmd.c 5517                               }
                      20108 ; rs232cmd.c 5518                       }
005B0B FE5F           20110         BR      _1408
005B0B FE5F00         20110         BR      _1408
005B0E                20111 _1398:
                      20112 ; rs232cmd.c 5519                       else
                      20113 ; rs232cmd.c 5520                       {
                      20114 ; rs232cmd.c 5521                               if ( !PasswordProtected)
005B0E 964842rr       20116         MOV.B   ES,#SEG( _PasswordProtected )
005B12 9908rrrr       20117         MOV.W   R0,#SOF( _PasswordProtected )
005B16 8A00           20118         MOV.W   R0,[R0]
005B18 F258           20119         BNE     _1408
                      20120 ; rs232cmd.c 5522                               {
                      20121 ; rs232cmd.c 5523                                       if (( ParCnt != 3) || (( sscanf( Cmd, "%u
                            ,%u,%u", &year, &month, &day)) != 3))
005B1A 964842rr       20123         MOV.B   ES,#SEG( _ParCnt )
005B1E 9908rrrr       20124         MOV.W   R0,#SOF( _ParCnt )
005B22 8200           20125         MOV.B   R0L,[R0]
005B24 910403         20126         CMP.B   R0L,#03H
005B27 F21F           20127         BNE     _1399
005B29 9168rr         20128         MOV.B   R3L,#SEG( __lc_bs )
005B2C 7177           20129         XOR.B   R3H,R3H
005B2E 8927           20130         MOV.W   R2,R7
005B30 91A8rr         20131         MOV.B   R5L,#SEG( __lc_bs )
005B33 71BB           20132         XOR.B   R5H,R5H
005B35 404702         20133         LEA     R4,R7+2
005B38 9128rr         20134         MOV.B   R1L,#SEG( __lc_bs )
005B3B 7133           20135         XOR.B   R1H,R1H
005B3D 400704         20136         LEA     R0,R7+4
005B40 0F03           20137         PUSH.W  R0, R1
005B42 0F30           20139         PUSH.W  R4, R5
005B44 0F0C           20141         PUSH.W  R2, R3
005B46 9938rrrr       20143         MOV.W   R3,#SEG( _1171 )
005B4A 9928rrrr       20144         MOV.W   R2,#SOF( _1171 )
005B4E 0F0C           20145         PUSH.W  R2, R3
005B50 9918rrrr       20147         MOV.W   R1,#SEG( _Cmd )
005B54 9908rrrr       20148         MOV.W   R0,#SOF( _Cmd )
                      20149         CALL    _sscanf
005B58 C4rrrrrr       +20149 ;       FCALL   _sscanf
005B5C 99700010       20150         ADD.W   R7,#010H
005B60 99040003       20152         CMP.W   R0,#03H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 331

ADDR   CODE            LINE SOURCELINE
005B64 F306           20153         BEQ     _1400
005B64 F306           20153         BEQ     _1400
005B66                20154 _1399:
                      20155 ; rs232cmd.c 5524                                               SCPIError = SyntaxErr;
005B66 964842rr       20157         MOV.B   ES,#SEG( _SCPIError )
005B6A 9908rrrr       20158         MOV.W   R0,#SOF( _SCPIError )
005B6E BA03           20159         MOV.W   [R0],#03H
005B70 FE2C           20160         BR      _1408
005B70 FE2C           20160         BR      _1408
005B72                20161 _1400:
                      20162 ; rs232cmd.c 5525                                       else
                      20163 ; rs232cmd.c 5526                                       {
                      20164 ; rs232cmd.c 5527                                               if ( ValidateDate( year, month, d
                            ay) == FAIL)
005B72 8A07           20166         MOV.W   R0,[R7]
005B74 8C1702         20167         MOV.W   R1,[R7+2]
005B77 8C2704         20168         MOV.W   R2,[R7+4]
                      20169         CALL    _ValidateDate
005B7A C4rrrrrr       +20169 ;       FCALL   _ValidateDate
005B7E 6900           20170         OR.W    R0,R0
005B80 F207           20171         BNE     _1401
                      20172 ; rs232cmd.c 5528                                                       SCPIError = ExecErr;
005B82 964842rr       20174         MOV.B   ES,#SEG( _SCPIError )
005B86 9908rrrr       20175         MOV.W   R0,#SOF( _SCPIError )
005B8A 9A08001D       20176         MOV.W   [R0],#01DH
005B8E FE1D           20177         BR      _1408
005B8E FE1D           20177         BR      _1408
005B90                20178 _1401:
                      20179 ; rs232cmd.c 5529                                               else
                      20180 ; rs232cmd.c 5530                                               {
                      20181 ; rs232cmd.c 5531                                                       Calibration.AudioCalibrat
                            ion.Date = day + 100*month + 10000*year;
005B90 8C0702         20183         MOV.W   R0,[R7+2]
005B93 E9000064       20184         MULU.W  R0,#064H
005B97 0C0704         20185         ADD.W   R0,[R7+4]
005B9A 8A27           20186         MOV.W   R2,[R7]
005B9C E9202710       20187         MULU.W  R2,#02710H
005BA0 0902           20188         ADD.W   R0,R2
005BA2 B910           20189         MOVS.W  R1,#00H
005BA4 964842rr       20190         MOV.B   ES,#SEG( _Calibration+218 )
005BA8 9928rrrr       20191         MOV.W   R2,#SOF( _Calibration+218 )
005BAC 8B0A           20192         MOV.W   [R2+],R0
005BAE 8A1A           20193         MOV.W   [R2],R1
                      20194 ; rs232cmd.c 5532                                               
                      20195 ; rs232cmd.c 5533                                                       NV_Store( &Calibration, C
                            alibrationPtr, sizeof( Calibration));
005BB0 9918rrrr       20197         MOV.W   R1,#SEG( _Calibration )
005BB4 9908rrrr       20198         MOV.W   R0,#SOF( _Calibration )
005BB8 964842rr       20199         MOV.B   ES,#SEG( _CalibrationPtr )
005BBC 9928rrrr       20200         MOV.W   R2,#SOF( _CalibrationPtr )
005BC0 8A22           20201         MOV.W   R2,[R2]
005BC2 993800E0       20202         MOV.W   R3,#0E0H
                      20203         CALL    _NV_Store
005BC6 C4rrrrrr       +20203 ;       FCALL   _NV_Store
                      20204 ; rs232cmd.c 5534                                               }
                      20205 ; rs232cmd.c 5535                                       }                               
                      20206 ; rs232cmd.c 5536                               }
                      20207 ; rs232cmd.c 5537                       }
                      20208 ; rs232cmd.c 5538               }
005BCA                20210 _1408:
                      20211 ; rs232cmd.c 5539       }
005BCA 9970001A       20213         ADD.W   R7,#01AH
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 332

ADDR   CODE            LINE SOURCELINE
005BCE 2F30           20215         POP.W   R4, R5
005BD0 D680           20217         RET
                      20219 ; rs232cmd.c 5540       
                      20220 ; rs232cmd.c 5541       /************************************************************************
                            **/
                      20221 ; rs232cmd.c 5542       /* FactAudioGenLevel                                                     
                                                                                                                             
                                RS232CMD.C  */
                      20222 ; rs232cmd.c 5543       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20223 ; rs232cmd.c 5544       /* Author:              Kim Engedahl, DEV, 000411                        
                                                                                                                             
                                    */
                      20224 ; rs232cmd.c 5545       /* Revised:       000622                                                 
                                                                                                                             
                                                                                    */
                      20225 ; rs232cmd.c 5546       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20226 ; rs232cmd.c 5547       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20227 ; rs232cmd.c 5548       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20228 ; rs232cmd.c 5549       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20229 ; rs232cmd.c 5550       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20230 ; rs232cmd.c 5551       /************************************************************************
                            **/
                      20231 ; rs232cmd.c 5552       void FactAudioGenLevel( void)
                      20232 ; rs232cmd.c 5553       {
                      20233         ALIGN   1
                      20235         PUBLIC  _FactAudioGenLevel
005BD2                20236 _FactAudioGenLevel:
005BD2 0F30           20240         PUSH.W  R4, R5
005BD4 99720018       20242         SUB.W   R7,#018H
                      20247 ; rs232cmd.c 5554               char buffer[20];
                      20248 ; rs232cmd.c 5555               UC AnalogLeft, AnalogRight;
                      20249 ; rs232cmd.c 5556       
                      20250 ; rs232cmd.c 5557               if ( CmdExecute && !SCPIError)
005BD8 964842rr       20252         MOV.B   ES,#SEG( _CmdExecute )
005BDC 9908rrrr       20253         MOV.W   R0,#SOF( _CmdExecute )
005BE0 8200           20254         MOV.B   R0L,[R0]
                      20255         BEQ     _1420
005BE2 F202           +20255 ;       BNE     _LG_1392
005BE4 D5008A         +20255 ;       JMP.L   _1420
005BE8 D5008A00       +20255 ;       JMP.L   _1420
005BE8                +20255 _LG_1392:
005BE8 964842rr       20256         MOV.B   ES,#SEG( _SCPIError )
005BEC 9908rrrr       20257         MOV.W   R0,#SOF( _SCPIError )
005BF0 8A00           20258         MOV.W   R0,[R0]
                      20259         BNE     _1420
005BF2 F302           +20259 ;       BEQ     _LG_1394
005BF4 D50082         +20259 ;       JMP.L   _1420
005BF8 D5008200       +20259 ;       JMP.L   _1420
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 333

ADDR   CODE            LINE SOURCELINE
005BF8                +20259 _LG_1394:
                      20260 ; rs232cmd.c 5558               {
                      20261 ; rs232cmd.c 5559                       if ( CmdRequest)
005BF8 964842rr       20263         MOV.B   ES,#SEG( _CmdRequest )
005BFC 9908rrrr       20264         MOV.W   R0,#SOF( _CmdRequest )
005C00 8200           20265         MOV.B   R0L,[R0]
005C02 F32E           20266         BEQ     _1412
                      20267 ; rs232cmd.c 5560                       {
                      20268 ; rs232cmd.c 5561                               if ( ParCnt)
005C04 964842rr       20270         MOV.B   ES,#SEG( _ParCnt )
005C08 9908rrrr       20271         MOV.W   R0,#SOF( _ParCnt )
005C0C 8200           20272         MOV.B   R0L,[R0]
005C0E F306           20273         BEQ     _1411
                      20274 ; rs232cmd.c 5562                                       SCPIError = SyntaxErr;
005C10 964842rr       20276         MOV.B   ES,#SEG( _SCPIError )
005C14 9908rrrr       20277         MOV.W   R0,#SOF( _SCPIError )
005C18 BA03           20278         MOV.W   [R0],#03H
005C1A FE6F           20279         BR      _1420
005C1A FE6F           20279         BR      _1420
005C1C                20280 _1411:
                      20281 ; rs232cmd.c 5563                               else
                      20282 ; rs232cmd.c 5564                               {
                      20283 ; rs232cmd.c 5565                                       sprintf( buffer, "%u,%u\n", Calibration.A
                            udioCalibration.AnalogLeftChannel, 
                      20284 ; rs232cmd.c 5566                                                                                
                                                                                        Calibration.AudioCalibration.AnalogRi
                            ghtChannel);
005C1C 91A8rr         20286         MOV.B   R5L,#SEG( __lc_bs )
005C1F 71BB           20287         XOR.B   R5H,R5H
005C21 8947           20288         MOV.W   R4,R7
005C23 964842rr       20289         MOV.B   ES,#SEG( _Calibration+222 )
005C27 9908rrrr       20290         MOV.W   R0,#SOF( _Calibration+222 )
005C2B 8200           20291         MOV.B   R0L,[R0]
005C2D B110           20292         MOVS.B  R0H,#00H
005C2F 964842rr       20293         MOV.B   ES,#SEG( _Calibration+223 )
005C33 9918rrrr       20294         MOV.W   R1,#SOF( _Calibration+223 )
005C37 8221           20295         MOV.B   R1L,[R1]
005C39 B130           20296         MOVS.B  R1H,#00H
005C3B 0F02           20297         PUSH.W  R1
005C3D 0F01           20299         PUSH.W  R0
005C3F 9918rrrr       20301         MOV.W   R1,#SEG( _1297 )
005C43 9908rrrr       20302         MOV.W   R0,#SOF( _1297 )
005C47 0F03           20303         PUSH.W  R0, R1
005C49 8915           20305         MOV.W   R1,R5
005C4B 8904           20306         MOV.W   R0,R4
                      20307         CALL    _sprintf
005C4D C4rrrrrr       +20307 ;       FCALL   _sprintf
005C51 99700008       20308         ADD.W   R7,#08H
                      20310 ; rs232cmd.c 5567                                       rs232puts( buffer);
005C55 8915           20312         MOV.W   R1,R5
005C57 8904           20313         MOV.W   R0,R4
                      20314         CALL    _rs232puts
005C59 C4rrrrrr       +20314 ;       FCALL   _rs232puts
                      20315 ; rs232cmd.c 5568                               }
                      20316 ; rs232cmd.c 5569                       }
005C5D FE4E           20318         BR      _1420
005C5D FE4E00         20318         BR      _1420
005C60                20319 _1412:
                      20320 ; rs232cmd.c 5570                       else
                      20321 ; rs232cmd.c 5571                       {
                      20322 ; rs232cmd.c 5572                               if ( !PasswordProtected)
005C60 964842rr       20324         MOV.B   ES,#SEG( _PasswordProtected )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 334

ADDR   CODE            LINE SOURCELINE
005C64 9908rrrr       20325         MOV.W   R0,#SOF( _PasswordProtected )
005C68 8A00           20326         MOV.W   R0,[R0]
005C6A F247           20327         BNE     _1420
                      20328 ; rs232cmd.c 5573                               {
                      20329 ; rs232cmd.c 5574                                       if (( ParCnt != 2) || (( sscanf( Cmd, "%u
                            ,%u", &AnalogLeft, &AnalogRight)) != 2))
005C6C 964842rr       20331         MOV.B   ES,#SEG( _ParCnt )
005C70 9908rrrr       20332         MOV.W   R0,#SOF( _ParCnt )
005C74 8200           20333         MOV.B   R0L,[R0]
005C76 910402         20334         CMP.B   R0L,#02H
005C79 F21B           20335         BNE     _1413
005C7B 9918rrrr       20336         MOV.W   R1,#SEG( _Cmd )
005C7F 9908rrrr       20337         MOV.W   R0,#SOF( _Cmd )
005C83 9168rr         20338         MOV.B   R3L,#SEG( __lc_bs )
005C86 7177           20339         XOR.B   R3H,R3H
005C88 402714         20340         LEA     R2,R7+20
005C8B 91A8rr         20341         MOV.B   R5L,#SEG( __lc_bs )
005C8E 71BB           20342         XOR.B   R5H,R5H
005C90 404716         20343         LEA     R4,R7+22
005C93 0F30           20344         PUSH.W  R4, R5
005C95 0F0C           20346         PUSH.W  R2, R3
005C97 9938rrrr       20348         MOV.W   R3,#SEG( _1298 )
005C9B 9928rrrr       20349         MOV.W   R2,#SOF( _1298 )
005C9F 0F0C           20350         PUSH.W  R2, R3
                      20352         CALL    _sscanf
005CA1 C4rrrrrr       +20352 ;       FCALL   _sscanf
005CA5 9970000C       20353         ADD.W   R7,#0CH
005CA9 99040002       20355         CMP.W   R0,#02H
005CAD F307           20356         BEQ     _1414
005CAD F30700         20356         BEQ     _1414
005CB0                20357 _1413:
                      20358 ; rs232cmd.c 5575                                               SCPIError = SyntaxErr;
005CB0 964842rr       20360         MOV.B   ES,#SEG( _SCPIError )
005CB4 9908rrrr       20361         MOV.W   R0,#SOF( _SCPIError )
005CB8 BA03           20362         MOV.W   [R0],#03H
005CBA FE1F           20363         BR      _1420
005CBA FE1F           20363         BR      _1420
005CBC                20364 _1414:
                      20365 ; rs232cmd.c 5576                                       else
                      20366 ; rs232cmd.c 5577                                       {
                      20367 ; rs232cmd.c 5578                                               Calibration.AudioCalibration.Anal
                            ogLeftChannel = AnalogLeft;
005CBC 840714         20369         MOV.B   R0L,[R7+20]
005CBF 964842rr       20370         MOV.B   ES,#SEG( _Calibration+222 )
005CC3 9918rrrr       20371         MOV.W   R1,#SOF( _Calibration+222 )
005CC7 8209           20372         MOV.B   [R1],R0L
                      20373 ; rs232cmd.c 5579                                               Calibration.AudioCalibration.Anal
                            ogRightChannel = AnalogRight;
005CC9 840716         20375         MOV.B   R0L,[R7+22]
005CCC 964842rr       20376         MOV.B   ES,#SEG( _Calibration+223 )
005CD0 9918rrrr       20377         MOV.W   R1,#SOF( _Calibration+223 )
005CD4 8209           20378         MOV.B   [R1],R0L
                      20379 ; rs232cmd.c 5580                                                               
                      20380 ; rs232cmd.c 5581                                               NV_Store( &Calibration, Calibrati
                            onPtr, sizeof( Calibration));
005CD6 9918rrrr       20382         MOV.W   R1,#SEG( _Calibration )
005CDA 9908rrrr       20383         MOV.W   R0,#SOF( _Calibration )
005CDE 964842rr       20384         MOV.B   ES,#SEG( _CalibrationPtr )
005CE2 9928rrrr       20385         MOV.W   R2,#SOF( _CalibrationPtr )
005CE6 8A22           20386         MOV.W   R2,[R2]
005CE8 993800E0       20387         MOV.W   R3,#0E0H
                      20388         CALL    _NV_Store
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 335

ADDR   CODE            LINE SOURCELINE
005CEC C4rrrrrr       +20388 ;       FCALL   _NV_Store
                      20389 ; rs232cmd.c 5582       
                      20390 ; rs232cmd.c 5583                                               WriteAnlAudioDACLevel( AnalogLeft
                            , AnalogRight);
005CF0 840714         20392         MOV.B   R0L,[R7+20]
005CF3 841716         20393         MOV.B   R0H,[R7+22]
                      20394         CALL    _WriteAnlAudioDACLevel
005CF6 C4rrrrrr       +20394 ;       FCALL   _WriteAnlAudioDACLevel
                      20395 ; rs232cmd.c 5584                                       }
                      20396 ; rs232cmd.c 5585                               }
                      20397 ; rs232cmd.c 5586                       }
                      20398 ; rs232cmd.c 5587               }
005CFA                20400 _1420:
                      20401 ; rs232cmd.c 5588       }
005CFA 99700018       20403         ADD.W   R7,#018H
005CFE 2F30           20405         POP.W   R4, R5
005D00 D680           20407         RET
                      20409 ; rs232cmd.c 5589       
                      20410 ; rs232cmd.c 5590       /************************************************************************
                            **/
                      20411 ; rs232cmd.c 5591       /* FactPLDVersion                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      20412 ; rs232cmd.c 5592       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20413 ; rs232cmd.c 5593       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      20414 ; rs232cmd.c 5594       /* Revised:       000625                                                 
                                                                                                                             
                                                                                    */
                      20415 ; rs232cmd.c 5595       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20416 ; rs232cmd.c 5596       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20417 ; rs232cmd.c 5597       /* Remarks:             NOTE! The video PLD version has not been implemen
                            ted at this*/
                      20418 ; rs232cmd.c 5598       /*                                              this time, hence the retu
                            rn value of 0 does NOT reflect the      */
                      20419 ; rs232cmd.c 5599       /*                                              video PLD version.       
                                                                                                                             
                                                                                            */
                      20420 ; rs232cmd.c 5600       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20421 ; rs232cmd.c 5601       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20422 ; rs232cmd.c 5602       /************************************************************************
                            **/
                      20423 ; rs232cmd.c 5603       void FactPLDVersion( void)
                      20424 ; rs232cmd.c 5604       {
                      20425         ALIGN   1
                      20427         PUBLIC  _FactPLDVersion
005D02                20428 _FactPLDVersion:
005D02 0F30           20432         PUSH.W  R4, R5
005D04 99720014       20434         SUB.W   R7,#014H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 336

ADDR   CODE            LINE SOURCELINE
                      20437 ; rs232cmd.c 5605               char buffer[20];
                      20438 ; rs232cmd.c 5606       
                      20439 ; rs232cmd.c 5607               if ( CmdExecute && !SCPIError)
005D08 964842rr       20441         MOV.B   ES,#SEG( _CmdExecute )
005D0C 9908rrrr       20442         MOV.W   R0,#SOF( _CmdExecute )
005D10 8200           20443         MOV.B   R0L,[R0]
005D12 F336           20444         BEQ     _1428
005D14 964842rr       20445         MOV.B   ES,#SEG( _SCPIError )
005D18 9908rrrr       20446         MOV.W   R0,#SOF( _SCPIError )
005D1C 8A00           20447         MOV.W   R0,[R0]
005D1E F230           20448         BNE     _1428
                      20449 ; rs232cmd.c 5608               {
                      20450 ; rs232cmd.c 5609                       if ( CmdRequest)
005D20 964842rr       20452         MOV.B   ES,#SEG( _CmdRequest )
005D24 9908rrrr       20453         MOV.W   R0,#SOF( _CmdRequest )
005D28 8200           20454         MOV.B   R0L,[R0]
005D2A F325           20455         BEQ     _1424
                      20456 ; rs232cmd.c 5610                       {
                      20457 ; rs232cmd.c 5611                               if ( ParCnt)
005D2C 964842rr       20459         MOV.B   ES,#SEG( _ParCnt )
005D30 9908rrrr       20460         MOV.W   R0,#SOF( _ParCnt )
005D34 8200           20461         MOV.B   R0L,[R0]
005D36 F306           20462         BEQ     _1423
                      20463 ; rs232cmd.c 5612                                       SCPIError = SyntaxErr;
005D38 964842rr       20465         MOV.B   ES,#SEG( _SCPIError )
005D3C 9908rrrr       20466         MOV.W   R0,#SOF( _SCPIError )
005D40 BA03           20467         MOV.W   [R0],#03H
005D42 FE1E           20468         BR      _1428
005D42 FE1E           20468         BR      _1428
005D44                20469 _1423:
                      20470 ; rs232cmd.c 5613                               else
                      20471 ; rs232cmd.c 5614                               {
                      20472 ; rs232cmd.c 5615                                       sprintf( buffer, "%u,%u\n", 0, pld_versio
                            n());
                      20474         CALL    _pld_version
005D44 C4rrrrrr       +20474 ;       FCALL   _pld_version
005D48 91A8rr         20475         MOV.B   R5L,#SEG( __lc_bs )
005D4B 71BB           20476         XOR.B   R5H,R5H
005D4D 8947           20477         MOV.W   R4,R7
005D4F 0F01           20478         PUSH.W  R0
005D51 B900           20480         MOV.W   R0,#00H
005D53 0F01           20481         PUSH.W  R0
005D55 9918rrrr       20483         MOV.W   R1,#SEG( _1297 )
005D59 9908rrrr       20484         MOV.W   R0,#SOF( _1297 )
005D5D 0F03           20485         PUSH.W  R0, R1
005D5F 8915           20487         MOV.W   R1,R5
005D61 8904           20488         MOV.W   R0,R4
                      20489         CALL    _sprintf
005D63 C4rrrrrr       +20489 ;       FCALL   _sprintf
005D67 99700008       20490         ADD.W   R7,#08H
                      20492 ; rs232cmd.c 5616                                       rs232puts( buffer);
005D6B 8915           20494         MOV.W   R1,R5
005D6D 8904           20495         MOV.W   R0,R4
                      20496         CALL    _rs232puts
005D6F C4rrrrrr       +20496 ;       FCALL   _rs232puts
                      20497 ; rs232cmd.c 5617                               }
                      20498 ; rs232cmd.c 5618                       }
005D73 FE06           20500         BR      _1428
005D73 FE0600         20500         BR      _1428
005D76                20501 _1424:
                      20502 ; rs232cmd.c 5619                       else
                      20503 ; rs232cmd.c 5620                               SCPIError = SyntaxErr;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 337

ADDR   CODE            LINE SOURCELINE
005D76 964842rr       20505         MOV.B   ES,#SEG( _SCPIError )
005D7A 9908rrrr       20506         MOV.W   R0,#SOF( _SCPIError )
005D7E BA03           20507         MOV.W   [R0],#03H
                      20508 ; rs232cmd.c 5621               }
005D80                20510 _1428:
                      20511 ; rs232cmd.c 5622       }
005D80 99700014       20513         ADD.W   R7,#014H
005D84 2F30           20515         POP.W   R4, R5
005D86 D680           20517         RET
                      20519 ; rs232cmd.c 5623       
                      20520 ; rs232cmd.c 5624       /************************************************************************
                            **/
                      20521 ; rs232cmd.c 5625       /* FactTCXOStatus                                                        
                                                                                                                             
                                                 RS232CMD.C */
                      20522 ; rs232cmd.c 5626       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20523 ; rs232cmd.c 5627       /* Author:              Kim Engedahl, DEV, 000628                        
                                                                                                                             
                                    */
                      20524 ; rs232cmd.c 5628       /* Revised:       000628                                                 
                                                                                                                             
                                                                                    */
                      20525 ; rs232cmd.c 5629       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20526 ; rs232cmd.c 5630       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20527 ; rs232cmd.c 5631       /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                      20528 ; rs232cmd.c 5632       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20529 ; rs232cmd.c 5633       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20530 ; rs232cmd.c 5634       /************************************************************************
                            **/
                      20531 ; rs232cmd.c 5635       void FactTCXOStatus( void)
                      20532 ; rs232cmd.c 5636       {
                      20533         ALIGN   1
                      20535         PUBLIC  _FactTCXOStatus
005D88                20536 _FactTCXOStatus:
005D88 0F30           20540         PUSH.W  R4, R5
005D8A 99720014       20542         SUB.W   R7,#014H
                      20545 ; rs232cmd.c 5637               char buffer[20];
                      20546 ; rs232cmd.c 5638       
                      20547 ; rs232cmd.c 5639               if ( CmdExecute && !SCPIError)
005D8E 964842rr       20549         MOV.B   ES,#SEG( _CmdExecute )
005D92 9908rrrr       20550         MOV.W   R0,#SOF( _CmdExecute )
005D96 8200           20551         MOV.B   R0L,[R0]
005D98 F333           20552         BEQ     _1434
005D9A 964842rr       20553         MOV.B   ES,#SEG( _SCPIError )
005D9E 9908rrrr       20554         MOV.W   R0,#SOF( _SCPIError )
005DA2 8A00           20555         MOV.W   R0,[R0]
005DA4 F22D           20556         BNE     _1434
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 338

ADDR   CODE            LINE SOURCELINE
                      20557 ; rs232cmd.c 5640               {
                      20558 ; rs232cmd.c 5641                       if ( CmdRequest)
005DA6 964842rr       20560         MOV.B   ES,#SEG( _CmdRequest )
005DAA 9908rrrr       20561         MOV.W   R0,#SOF( _CmdRequest )
005DAE 8200           20562         MOV.B   R0L,[R0]
005DB0 F322           20563         BEQ     _1430
                      20564 ; rs232cmd.c 5642                       {
                      20565 ; rs232cmd.c 5643                               if ( ParCnt)
005DB2 964842rr       20567         MOV.B   ES,#SEG( _ParCnt )
005DB6 9908rrrr       20568         MOV.W   R0,#SOF( _ParCnt )
005DBA 8200           20569         MOV.B   R0L,[R0]
005DBC F306           20570         BEQ     _1429
                      20571 ; rs232cmd.c 5644                                       SCPIError = SyntaxErr;
005DBE 964842rr       20573         MOV.B   ES,#SEG( _SCPIError )
005DC2 9908rrrr       20574         MOV.W   R0,#SOF( _SCPIError )
005DC6 BA03           20575         MOV.W   [R0],#03H
005DC8 FE1B           20576         BR      _1434
005DC8 FE1B           20576         BR      _1434
005DCA                20577 _1429:
                      20578 ; rs232cmd.c 5645                               else
                      20579 ; rs232cmd.c 5646                               {
                      20580 ; rs232cmd.c 5647                                       sprintf( buffer, "%u\n", tcxo_status());
                      20582         CALL    _tcxo_status
005DCA C4rrrrrr       +20582 ;       FCALL   _tcxo_status
005DCE 91A8rr         20583         MOV.B   R5L,#SEG( __lc_bs )
005DD1 71BB           20584         XOR.B   R5H,R5H
005DD3 8947           20585         MOV.W   R4,R7
005DD5 0F01           20586         PUSH.W  R0
005DD7 9918rrrr       20588         MOV.W   R1,#SEG( _1009 )
005DDB 9908rrrr       20589         MOV.W   R0,#SOF( _1009 )
005DDF 0F03           20590         PUSH.W  R0, R1
005DE1 8915           20592         MOV.W   R1,R5
005DE3 8904           20593         MOV.W   R0,R4
                      20594         CALL    _sprintf
005DE5 C4rrrrrr       +20594 ;       FCALL   _sprintf
005DE9 A976           20595         ADDS.W  R7,#06H
                      20597 ; rs232cmd.c 5648                                       rs232puts( buffer);
005DEB 8915           20599         MOV.W   R1,R5
005DED 8904           20600         MOV.W   R0,R4
                      20601         CALL    _rs232puts
005DEF C4rrrrrr       +20601 ;       FCALL   _rs232puts
                      20602 ; rs232cmd.c 5649                               }
                      20603 ; rs232cmd.c 5650                       }
005DF3 FE06           20605         BR      _1434
005DF3 FE0600         20605         BR      _1434
005DF6                20606 _1430:
                      20607 ; rs232cmd.c 5651                       else
                      20608 ; rs232cmd.c 5652                               SCPIError = SyntaxErr;
005DF6 964842rr       20610         MOV.B   ES,#SEG( _SCPIError )
005DFA 9908rrrr       20611         MOV.W   R0,#SOF( _SCPIError )
005DFE BA03           20612         MOV.W   [R0],#03H
                      20613 ; rs232cmd.c 5653               }
005E00                20615 _1434:
                      20616 ; rs232cmd.c 5654       }
005E00 99700014       20618         ADD.W   R7,#014H
005E04 2F30           20620         POP.W   R4, R5
005E06 D680           20622         RET
                      20624 ; rs232cmd.c 5655       
                      20625 ; rs232cmd.c 5656       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 339

ADDR   CODE            LINE SOURCELINE
                      20626 ; rs232cmd.c 5657       /* FactMultiMediaChip                                                    
                                                                                                                             
                                RS232CMD.C  */
                      20627 ; rs232cmd.c 5658       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20628 ; rs232cmd.c 5659       /* Author:              Kim Engedahl, DEV, 000505                        
                                                                                                                             
                                    */
                      20629 ; rs232cmd.c 5660       /* Revised:       000614                                                 
                                                                                                                             
                                                                                    */
                      20630 ; rs232cmd.c 5661       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20631 ; rs232cmd.c 5662       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      20632 ; rs232cmd.c 5663       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20633 ; rs232cmd.c 5664       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      20634 ; rs232cmd.c 5665       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20635 ; rs232cmd.c 5666       /************************************************************************
                            **/
                      20636 ; rs232cmd.c 5667       void FactMultiMediaChip( void)
                      20637 ; rs232cmd.c 5668       {
                      20638         ALIGN   1
                      20640         PUBLIC  _FactMultiMediaChip
005E08                20641 _FactMultiMediaChip:
005E08 0F30           20645         PUSH.W  R4, R5
005E0A A97A           20647         ADDS.W  R7,#0AH
                      20653 ; rs232cmd.c 5669               UI test[2];
                      20654 ; rs232cmd.c 5670               UC tmp[2];
                      20655 ; rs232cmd.c 5671       
                      20656 ; rs232cmd.c 5672               if ( CmdExecute && !SCPIError)
005E0C 964842rr       20658         MOV.B   ES,#SEG( _CmdExecute )
005E10 9908rrrr       20659         MOV.W   R0,#SOF( _CmdExecute )
005E14 8200           20660         MOV.B   R0L,[R0]
                      20661         BEQ     _1445
005E16 F202           +20661 ;       BNE     _LG_1422
005E18 D500C0         +20661 ;       JMP.L   _1445
005E1C D500C000       +20661 ;       JMP.L   _1445
005E1C                +20661 _LG_1422:
005E1C 964842rr       20662         MOV.B   ES,#SEG( _SCPIError )
005E20 9908rrrr       20663         MOV.W   R0,#SOF( _SCPIError )
005E24 8A00           20664         MOV.W   R0,[R0]
                      20665         BNE     _1445
005E26 F302           +20665 ;       BEQ     _LG_1424
005E28 D500B8         +20665 ;       JMP.L   _1445
005E2C D500B800       +20665 ;       JMP.L   _1445
005E2C                +20665 _LG_1424:
                      20666 ; rs232cmd.c 5673               {
                      20667 ; rs232cmd.c 5674                       if ( CmdRequest)
005E2C 964842rr       20669         MOV.B   ES,#SEG( _CmdRequest )
005E30 9908rrrr       20670         MOV.W   R0,#SOF( _CmdRequest )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 340

ADDR   CODE            LINE SOURCELINE
005E34 8200           20671         MOV.B   R0L,[R0]
005E36 F34C           20672         BEQ     _1438
                      20673 ; rs232cmd.c 5675                       {
                      20674 ; rs232cmd.c 5676                               if ( ParCnt != 1)
005E38 964842rr       20676         MOV.B   ES,#SEG( _ParCnt )
005E3C 9908rrrr       20677         MOV.W   R0,#SOF( _ParCnt )
005E40 8200           20678         MOV.B   R0L,[R0]
005E42 910401         20679         CMP.B   R0L,#01H
005E45 F307           20680         BEQ     _1437
                      20681 ; rs232cmd.c 5677                                       SCPIError = SyntaxErr;
005E47 964842rr       20683         MOV.B   ES,#SEG( _SCPIError )
005E4B 9908rrrr       20684         MOV.W   R0,#SOF( _SCPIError )
005E4F BA03           20685         MOV.W   [R0],#03H
                      20686         BR      _1445
005E51 D500A3         +20686         JMP.L   _1445
005E51 D500A3         +20686         JMP.L   _1445
005E54                20687 _1437:
                      20688 ; rs232cmd.c 5678                               else
                      20689 ; rs232cmd.c 5679                               {
                      20690 ; rs232cmd.c 5680                                       sscanf( Cmd, "%d", &test[0]);
005E54 9918rrrr       20692         MOV.W   R1,#SEG( _Cmd )
005E58 9908rrrr       20693         MOV.W   R0,#SOF( _Cmd )
005E5C 9168rr         20694         MOV.B   R3L,#SEG( __lc_bs )
005E5F 7177           20695         XOR.B   R3H,R3H
005E61 8927           20696         MOV.W   R2,R7
005E63 0F0C           20697         PUSH.W  R2, R3
005E65 9938rrrr       20699         MOV.W   R3,#SEG( _10 )
005E69 9928rrrr       20700         MOV.W   R2,#SOF( _10 )
005E6D 0F0C           20701         PUSH.W  R2, R3
                      20703         CALL    _sscanf
005E6F C4rrrrrr       +20703 ;       FCALL   _sscanf
005E73 99700008       20704         ADD.W   R7,#08H
                      20706 ; rs232cmd.c 5681       
                      20707 ; rs232cmd.c 5682                                       tmp[0] = test[0] & 0x0FF;
005E77 8A07           20709         MOV.W   R0,[R7]
005E79 9105FF         20710         AND.B   R0L,#0FFH
005E7C 840F04         20711         MOV.B   [R7+4],R0L
                      20712 ; rs232cmd.c 5683       
                      20713 ; rs232cmd.c 5684                                       TransmitIIC( 0x40, 1, tmp, IIC_PTV);
005E7F 9168rr         20715         MOV.B   R3L,#SEG( __lc_bs )
005E82 7177           20716         XOR.B   R3H,R3H
005E84 402704         20717         LEA     R2,R7+4
005E87 912800         20718         MOV.B   R1L,#00H
005E8A 911801         20719         MOV.B   R0H,#01H
005E8D 910840         20720         MOV.B   R0L,#040H
                      20721         CALL    _TransmitIIC
005E90 C4rrrrrr       +20721 ;       FCALL   _TransmitIIC
                      20722 ; rs232cmd.c 5685                                       ReceiveIIC( 0x40, 1, &tmp[1], IIC_PTV);
005E94 9168rr         20724         MOV.B   R3L,#SEG( __lc_bs )
005E97 7177           20725         XOR.B   R3H,R3H
005E99 402705         20726         LEA     R2,R7+5
005E9C 910840         20727         MOV.B   R0L,#040H
005E9F 911801         20728         MOV.B   R0H,#01H
005EA2 912800         20729         MOV.B   R1L,#00H
                      20730         CALL    _ReceiveIIC
005EA5 C4rrrrrr       +20730 ;       FCALL   _ReceiveIIC
                      20731 ; rs232cmd.c 5686       
                      20732 ; rs232cmd.c 5687                                       rs232printf( 12,"%03d,%03d\n", ( int) tmp
                            [0], ( int) tmp[1]);
005EA9 9908000C       20734         MOV.W   R0,#0CH
005EAD 842704         20735         MOV.B   R1L,[R7+4]
005EB0 B130           20736         MOVS.B  R1H,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 341

ADDR   CODE            LINE SOURCELINE
005EB2 844705         20737         MOV.B   R2L,[R7+5]
005EB5 B150           20738         MOVS.B  R2H,#00H
005EB7 0F04           20739         PUSH.W  R2
005EB9 0F02           20741         PUSH.W  R1
005EBB 9938rrrr       20743         MOV.W   R3,#SEG( _1435 )
005EBF 9928rrrr       20744         MOV.W   R2,#SOF( _1435 )
005EC3 0F0C           20745         PUSH.W  R2, R3
                      20747         CALL    _rs232printf
005EC5 C4rrrrrr       +20747 ;       FCALL   _rs232printf
005EC9 99700008       20748         ADD.W   R7,#08H
                      20750 ; rs232cmd.c 5688                               }
                      20751 ; rs232cmd.c 5689                       }
005ECD FE66           20753         BR      _1445
005ECD FE6600         20753         BR      _1445
005ED0                20754 _1438:
                      20755 ; rs232cmd.c 5690                       else
                      20756 ; rs232cmd.c 5691                       {
                      20757 ; rs232cmd.c 5692                               if ( !PasswordProtected)
005ED0 964842rr       20759         MOV.B   ES,#SEG( _PasswordProtected )
005ED4 9908rrrr       20760         MOV.W   R0,#SOF( _PasswordProtected )
005ED8 8A00           20761         MOV.W   R0,[R0]
005EDA F25F           20762         BNE     _1445
                      20763 ; rs232cmd.c 5693                               {
                      20764 ; rs232cmd.c 5694                                       if ( ParCnt != 2)
005EDC 964842rr       20766         MOV.B   ES,#SEG( _ParCnt )
005EE0 9908rrrr       20767         MOV.W   R0,#SOF( _ParCnt )
005EE4 8200           20768         MOV.B   R0L,[R0]
005EE6 910402         20769         CMP.B   R0L,#02H
005EE9 F307           20770         BEQ     _1439
                      20771 ; rs232cmd.c 5695                                               SCPIError = SyntaxErr;  
005EEB 964842rr       20773         MOV.B   ES,#SEG( _SCPIError )
005EEF 9908rrrr       20774         MOV.W   R0,#SOF( _SCPIError )
005EF3 BA03           20775         MOV.W   [R0],#03H
005EF5 FE52           20776         BR      _1445
005EF5 FE5200         20776         BR      _1445
005EF8                20777 _1439:
                      20778 ; rs232cmd.c 5696                                       else
                      20779 ; rs232cmd.c 5697                                       {
                      20780 ; rs232cmd.c 5698                                               sscanf( Cmd, "%d,%d", &test[0], &
                            test[1]);
005EF8 9918rrrr       20782         MOV.W   R1,#SEG( _Cmd )
005EFC 9908rrrr       20783         MOV.W   R0,#SOF( _Cmd )
005F00 9168rr         20784         MOV.B   R3L,#SEG( __lc_bs )
005F03 7177           20785         XOR.B   R3H,R3H
005F05 8927           20786         MOV.W   R2,R7
005F07 91A8rr         20787         MOV.B   R5L,#SEG( __lc_bs )
005F0A 71BB           20788         XOR.B   R5H,R5H
005F0C 404702         20789         LEA     R4,R7+2
005F0F 0F30           20790         PUSH.W  R4, R5
005F11 0F0C           20792         PUSH.W  R2, R3
005F13 9938rrrr       20794         MOV.W   R3,#SEG( _1436 )
005F17 9928rrrr       20795         MOV.W   R2,#SOF( _1436 )
005F1B 0F0C           20796         PUSH.W  R2, R3
                      20798         CALL    _sscanf
005F1D C4rrrrrr       +20798 ;       FCALL   _sscanf
005F21 9970000C       20799         ADD.W   R7,#0CH
                      20801 ; rs232cmd.c 5699       
                      20802 ; rs232cmd.c 5700                                               tmp[0] = test[0] & 0x0FF;
005F25 8A07           20804         MOV.W   R0,[R7]
005F27 9105FF         20805         AND.B   R0L,#0FFH
005F2A 840F04         20806         MOV.B   [R7+4],R0L
                      20807 ; rs232cmd.c 5701                                               tmp[1] = test[1] & 0x0FF;
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 342

ADDR   CODE            LINE SOURCELINE
005F2D 8C0702         20809         MOV.W   R0,[R7+2]
005F30 9105FF         20810         AND.B   R0L,#0FFH
005F33 840F05         20811         MOV.B   [R7+5],R0L
                      20812 ; rs232cmd.c 5702       
                      20813 ; rs232cmd.c 5703                                               TransmitIIC( 0x40, 2, tmp, IIC_PT
                            V);
005F36 911802         20815         MOV.B   R0H,#02H
005F39 91A8rr         20816         MOV.B   R5L,#SEG( __lc_bs )
005F3C 71BB           20817         XOR.B   R5H,R5H
005F3E 404704         20818         LEA     R4,R7+4
005F41 912800         20819         MOV.B   R1L,#00H
005F44 8935           20820         MOV.W   R3,R5
005F46 8924           20821         MOV.W   R2,R4
005F48 910840         20822         MOV.B   R0L,#040H
                      20823         CALL    _TransmitIIC
005F4B C4rrrrrr       +20823 ;       FCALL   _TransmitIIC
                      20824 ; rs232cmd.c 5704       
                      20825 ; rs232cmd.c 5705                                               TransmitIIC( 0x40, 1, tmp, IIC_PT
                            V);
005F4F 912800         20827         MOV.B   R1L,#00H
005F52 911801         20828         MOV.B   R0H,#01H
005F55 910840         20829         MOV.B   R0L,#040H
005F58 8935           20830         MOV.W   R3,R5
005F5A 8924           20831         MOV.W   R2,R4
                      20832         CALL    _TransmitIIC
005F5C C4rrrrrr       +20832 ;       FCALL   _TransmitIIC
                      20833 ; rs232cmd.c 5706                                               ReceiveIIC( 0x40, 1, &tmp[1], IIC
                            _PTV);
005F60 9168rr         20835         MOV.B   R3L,#SEG( __lc_bs )
005F63 7177           20836         XOR.B   R3H,R3H
005F65 402705         20837         LEA     R2,R7+5
005F68 910840         20838         MOV.B   R0L,#040H
005F6B 911801         20839         MOV.B   R0H,#01H
005F6E 912800         20840         MOV.B   R1L,#00H
                      20841         CALL    _ReceiveIIC
005F71 C4rrrrrr       +20841 ;       FCALL   _ReceiveIIC
                      20842 ; rs232cmd.c 5707       
                      20843 ; rs232cmd.c 5708                                               rs232printf( 12,"%03d,%03d\n", ( 
                            int) tmp[0], ( int) tmp[1]);
005F75 9908000C       20845         MOV.W   R0,#0CH
005F79 842704         20846         MOV.B   R1L,[R7+4]
005F7C B130           20847         MOVS.B  R1H,#00H
005F7E 844705         20848         MOV.B   R2L,[R7+5]
005F81 B150           20849         MOVS.B  R2H,#00H
005F83 0F04           20850         PUSH.W  R2
005F85 0F02           20852         PUSH.W  R1
005F87 9938rrrr       20854         MOV.W   R3,#SEG( _1435 )
005F8B 9928rrrr       20855         MOV.W   R2,#SOF( _1435 )
005F8F 0F0C           20856         PUSH.W  R2, R3
                      20858         CALL    _rs232printf
005F91 C4rrrrrr       +20858 ;       FCALL   _rs232printf
005F95 99700008       20859         ADD.W   R7,#08H
                      20861 ; rs232cmd.c 5709                                       }
                      20862 ; rs232cmd.c 5710                               }
                      20863 ; rs232cmd.c 5711                       }
                      20864 ; rs232cmd.c 5712               }
005F9A                20866 _1445:
                      20867 ; rs232cmd.c 5713       }
005F9A A976           20869         ADDS.W  R7,#06H
005F9C 2F30           20871         POP.W   R4, R5
005F9E D680           20873         RET
                      20875 ; rs232cmd.c 5714       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 343

ADDR   CODE            LINE SOURCELINE
                      20876 ; rs232cmd.c 5715       /************************************************************************
                            **/
                      20877 ; rs232cmd.c 5716       /* FindParameter                                                         
                                                                                                                             
                                                 RS232CMD.C */
                      20878 ; rs232cmd.c 5717       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20879 ; rs232cmd.c 5718       /* Author:              Kim Engedahl, DEV, 941124                        
                                                                                                                             
                                    */
                      20880 ; rs232cmd.c 5719       /* Revised:             000603                                           
                                                                                                                             
                                                                                    */
                      20881 ; rs232cmd.c 5720       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      20882 ; rs232cmd.c 5721       /* Function:    Find the character defined parameter                     
                                                                                                    */
                      20883 ; rs232cmd.c 5722       /* Remarks:             --                                               
                                                                                                                             
                                                                                                                    */
                      20884 ; rs232cmd.c 5723       /* Returns:             The array number containing the parameter or max.
                             array+1                */
                      20885 ; rs232cmd.c 5724       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      20886 ; rs232cmd.c 5725       /************************************************************************
                            **/
                      20887 ; rs232cmd.c 5726       int FindParameter( char* par, struct PAR_STRUCT code* ParPtr)
                      20888 ; rs232cmd.c 5727       {
                      20889         ALIGN   1
                      20891         PUBLIC  _FindParameter
005FA0                20892 _FindParameter:
005FA0 0F70           20896         PUSH.W  R4, R5, R6
005FA2 A97C           20898         ADDS.W  R7,#0CH
005FA4 8951           20902         MOV.W   R5,R1
005FA6 8940           20903         MOV.W   R4,R0
                      20910 ; rs232cmd.c 5728               int tmp = 0;
005FA8 B960           20912         MOV.W   R6,#00H
                      20914 ; rs232cmd.c 5729       
                      20915 ; rs232cmd.c 5730               while ( ParPtr)
005FAA 8913           20917         MOV.W   R1,R3
005FAC 8902           20918         MOV.W   R0,R2
005FAE 6932           20919         OR.W    R3,R2
005FB0 F33F           20922         BEQ     _1452
005FB0 F33F           20922         BEQ     _1452
005FB2                20923 _1448:
                      20924 ; rs232cmd.c 5731               {
                      20925 ; rs232cmd.c 5732                       if (( !Cstrcmp( par, ParPtr->LongName)) || ( !Cstrcmp( pa
                            r, ParPtr->ShortName)))
005FB2 8C1F02         20927         MOV.W   [R7+2],R1
005FB5 8A0F           20928         MOV.W   [R7],R0
005FB7 862C43         20929         MOV.B   CS,R1L
005FBA 8820           20930         MOVC.W  R2,[R0+]
005FBC 99040000       20931         CMP.W   R0,#00H
005FC0 F202           20932         BNE     _1454
005FC2 A64143         20933         ADDS.B  CS,#01H
005FC2 A6414300       20933         ADDS.B  CS,#01H
005FC6                20934 _1454:
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 344

ADDR   CODE            LINE SOURCELINE
005FC6 8830           20935         MOVC.W  R3,[R0+]
005FC8 8915           20938         MOV.W   R1,R5
005FCA 8904           20939         MOV.W   R0,R4
                      20942         CALL    _Cstrcmp
005FCC C4rrrrrr       +20942 ;       FCALL   _Cstrcmp
005FD0 6900           20945         OR.W    R0,R0
005FD2 F315           20946         BEQ     _1449
005FD4 8C1702         20947         MOV.W   R1,[R7+2]
005FD7 8A07           20948         MOV.W   R0,[R7]
005FD9 99000004       20949         ADD.W   R0,#04H
005FDD 99110000       20950         ADDC.W  R1,#00H
005FE1 862C43         20951         MOV.B   CS,R1L
005FE4 8820           20952         MOVC.W  R2,[R0+]
005FE6 99040000       20953         CMP.W   R0,#00H
005FEA F202           20954         BNE     _1455
005FEC A64143         20955         ADDS.B  CS,#01H
005FEC A6414300       20955         ADDS.B  CS,#01H
005FF0                20956 _1455:
005FF0 8830           20957         MOVC.W  R3,[R0+]
005FF2 8915           20958         MOV.W   R1,R5
005FF4 8904           20959         MOV.W   R0,R4
                      20962         CALL    _Cstrcmp
005FF6 C4rrrrrr       +20962 ;       FCALL   _Cstrcmp
005FFA 6900           20965         OR.W    R0,R0
005FFC F202           20966         BNE     _1450
005FFC F202           20966         BNE     _1450
005FFE                20967 _1449:
                      20968 ; rs232cmd.c 5733                               return( tmp);
005FFE 8906           20970         MOV.W   R0,R6
006000 FE19           20973         BR      _1453
006000 FE19           20973         BR      _1453
006002                20974 _1450:
                      20981 ; rs232cmd.c 5734       
                      20982 ; rs232cmd.c 5735                       ParPtr = ParPtr->SameLevel;
006002 8C1702         20984         MOV.W   R1,[R7+2]
006005 8A07           20985         MOV.W   R0,[R7]
006007 99000008       20986         ADD.W   R0,#08H
00600B 99110000       20987         ADDC.W  R1,#00H
00600F 862C43         20991         MOV.B   CS,R1L
006012 8820           20992         MOVC.W  R2,[R0+]
006014 99040000       20993         CMP.W   R0,#00H
006018 F202           20994         BNE     _1456
00601A A64143         20995         ADDS.B  CS,#01H
00601A A6414300       20995         ADDS.B  CS,#01H
00601E                20996 _1456:
00601E 8830           20997         MOVC.W  R3,[R0+]
                      20999 ; rs232cmd.c 5736       
                      21000 ; rs232cmd.c 5737                       if ( tmp < 255)
006020 996400FF       21002         CMP.W   R6,#0FFH
006024 FA05           21003         BGE     _1452
                      21004 ; rs232cmd.c 5738                               tmp++;
006026 A961           21006         ADDS.W  R6,#01H
006028 8913           21010         MOV.W   R1,R3
00602A 8902           21011         MOV.W   R0,R2
00602C 6932           21012         OR.W    R3,R2
00602E F2C1           21015         BNE     _1448
                      21016 ; rs232cmd.c 5739                       else
                      21017 ; rs232cmd.c 5740                               break;
                      21018 ; rs232cmd.c 5741               }
006030                21020 _1452:
                      21021 ; rs232cmd.c 5742       
                      21022 ; rs232cmd.c 5743               return( -1);
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 345

ADDR   CODE            LINE SOURCELINE
006030 9908FFFF       21024         MOV.W   R0,#0FFFFH
                      21026 ; rs232cmd.c 5744       }
006034                21028 _1453:
006034 A974           21029         ADDS.W  R7,#04H
006036 2F70           21031         POP.W   R4, R5, R6
006038 D680           21033         RET
                      21037 ; rs232cmd.c 5745       
                      21038 ; rs232cmd.c 5746       
                      21039 ; rs232cmd.c 5747       /************************************************************************
                            **/
                      21040 ; rs232cmd.c 5748       /* FLTToSamples                                                          
                                                                                                                             
                                                     RS232CMD.C */
                      21041 ; rs232cmd.c 5749       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21042 ; rs232cmd.c 5750       /* Author:              Kim Engedahl, DEV, 970211                        
                                                                                                                             
                                    */
                      21043 ; rs232cmd.c 5751       /* Revised:             000530                                           
                                                                                                                             
                                                                                    */
                      21044 ; rs232cmd.c 5752       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */      
                      21045 ; rs232cmd.c 5753       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      21046 ; rs232cmd.c 5754       /* Remarks:             PAL Range: 1728*256, NTSC Range: 1716*256        
                                                                                                    */
                      21047 ; rs232cmd.c 5755       /* Returns:             FLT in samples, or -1 if illegal                 
                                                                                                                            *
                            /
                      21048 ; rs232cmd.c 5756       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      21049 ; rs232cmd.c 5757       /************************************************************************
                            ***/
                      21050 ; rs232cmd.c 5758       long FLTToSamples( UC system, int F, int L, float T) {
                      21051         ALIGN   1
                      21053         PUBLIC  _FLTToSamples
00603A                21054 _FLTToSamples:
00603A 0F70           21058         PUSH.W  R4, R5, R6
00603C 99720018       21060         SUB.W   R7,#018H
006040 840F12         21063         MOV.B   [R7+18],R0L
006043 8C2F0E         21066         MOV.W   [R7+14],R2
                      21076 ; rs232cmd.c 5759       
                      21077 ; rs232cmd.c 5760               long samples;
                      21078 ; rs232cmd.c 5761               char minus;
                      21079 ; rs232cmd.c 5762       
                      21080 ; rs232cmd.c 5763               if (( F == 0) && ( L == 0) && ( T == 0))
006046 8C1F10         21082         MOV.W   [R7+16],R1
006049 6911           21083         OR.W    R1,R1
00604B F210           21084         BNE     _1463
00604D 8C070E         21085         MOV.W   R0,[R7+14]
006050 F20D           21086         BNE     _1463
006052 B930           21087         MOV.W   R3,#00H
006054 B920           21088         MOV.W   R2,#00H
006056 8C1724         21089         MOV.W   R1,[R7+36]
006059 8C0722         21090         MOV.W   R0,[R7+34]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 346

ADDR   CODE            LINE SOURCELINE
00605C C4rrrrrr       21091         FCALL   __CMP_SPF
006060 910400         21092         CMP.B   R0L,#00H
006063 F204           21093         BNE     _1463
                      21094 ; rs232cmd.c 5764                       return( 0);
006065 B910           21096         MOV.W   R1,#00H
006067 B900           21097         MOV.W   R0,#00H
                      21098         BR      _1530
006069 D5021E         +21098         JMP.L   _1530
006069 D5021E         +21098         JMP.L   _1530
00606C                21099 _1463:
                      21102 ; rs232cmd.c 5765       
                      21103 ; rs232cmd.c 5766               if (( F <= 0) && ( L <= 0) && ( T <= 0))
00606C 9C74100000     21105         CMP.W   [R7+16],#00H
006071 FC10           21106         BGT     _1466
006073 9C740E0000     21107         CMP.W   [R7+14],#00H
006078 FC0C           21108         BGT     _1466
00607A B930           21109         MOV.W   R3,#00H
00607C B920           21110         MOV.W   R2,#00H
00607E 8C1724         21111         MOV.W   R1,[R7+36]
006081 8C0722         21112         MOV.W   R0,[R7+34]
006084 C4rrrrrr       21113         FCALL   __CMP_SPF
006088 910400         21114         CMP.B   R0L,#00H
00608B FC03           21115         BGT     _1466
                      21116 ; rs232cmd.c 5767               {
                      21117 ; rs232cmd.c 5768                       minus = 1;
00608D B4710C         21119         MOV.B   [R7+12],#01H
                      21121 ; rs232cmd.c 5769               }
006090 FE19           21123         BR      _1470
006090 FE19           21123         BR      _1470
006092                21124 _1466:
                      21125 ; rs232cmd.c 5770               else
                      21126 ; rs232cmd.c 5771               {
                      21127 ; rs232cmd.c 5772                       if (( F >= 0) && ( L >= 0) && ( T >= 0))
006092 9C74100000     21129         CMP.W   [R7+16],#00H
006097 FB0E           21130         BLT     _1468
006099 9C740E0000     21131         CMP.W   [R7+14],#00H
00609E FB0A           21132         BLT     _1468
0060A0 B930           21133         MOV.W   R3,#00H
0060A2 B920           21134         MOV.W   R2,#00H
0060A4 8C1724         21135         MOV.W   R1,[R7+36]
0060A7 8C0722         21136         MOV.W   R0,[R7+34]
0060AA C4rrrrrr       21137         FCALL   __CMP_SPF
0060AE 910400         21138         CMP.B   R0L,#00H
0060B1 FA07           21139         BGE     _1469
                      21140 ; rs232cmd.c 5773                               minus = 0;
0060B4                21142 _1468:
                      21143 ; rs232cmd.c 5774                       else
                      21144 ; rs232cmd.c 5775                               return( -1);
0060B4 9918FFFF       21146         MOV.W   R1,#0FFFFH
0060B8 9908FFFF       21147         MOV.W   R0,#0FFFFH
                      21148         BR      _1530
0060BC D501F5         +21148         JMP.L   _1530
0060C0                21150 _1469:
0060C0 B4700C         21153         MOV.B   [R7+12],#00H
                      21156 ; rs232cmd.c 5776               }
0060C4                21158 _1470:
                      21159 ; rs232cmd.c 5777       
                      21160 ; rs232cmd.c 5778                                                                                
                                                                                                            // 1 sample = (1/
                            27MHz)/256
                      21161 ; rs232cmd.c 5779               samples = ( long)(( T*6912L)/1000L + 0.5);      
0060C4 991845D8       21163         MOV.W   R1,#045D8H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 347

ADDR   CODE            LINE SOURCELINE
0060C8 B900           21164         MOV.W   R0,#00H
0060CA 8C3724         21165         MOV.W   R3,[R7+36]
0060CD 8C2722         21166         MOV.W   R2,[R7+34]
0060D0 C4rrrrrr       21167         FCALL   __MUL_SPF
0060D4 9938447A       21168         MOV.W   R3,#0447AH
0060D8 B920           21169         MOV.W   R2,#00H
0060DA C4rrrrrr       21170         FCALL   __DIV_SPF
0060DE C4rrrrrr       21171         FCALL   __SPF2DPF
0060E2 9C780A3FE0     21172         MOV.W   [R7+10],#03FE0H
0060E7 BC7008         21173         MOV.W   [R7+8],#00H
0060EA BC7006         21174         MOV.W   [R7+6],#00H
0060ED BC7004         21175         MOV.W   [R7+4],#00H
0060F0 406704         21176         LEA     R6,R7+4
0060F3 C4rrrrrr       21177         FCALL   __ADD_DPF
0060F7 C4rrrrrr       21178         FCALL   __DPF2L
0060FB 8C1F16         21179         MOV.W   [R7+22],R1
0060FE 8C0F14         21180         MOV.W   [R7+20],R0
                      21181 ; rs232cmd.c 5780       
                      21182 ; rs232cmd.c 5781               if ( system < NTSC)                                              
                                                    // If selected system is PAL..
006101 844712         21184         MOV.B   R2L,[R7+18]
006104 914402         21185         CMP.B   R2L,#02H
                      21188         BCC     _1495
006107 F102           +21188 ;       BCS     _LG_1468
006109 D500EB         +21188 ;       JMP.L   _1495
00610C D500EB         +21188 ;       JMP.L   _1495
00610C                +21188 _LG_1468:
00610C 8C1F0A         21189         MOV.W   [R7+10],R1
00610F 8C0F08         21190         MOV.W   [R7+8],R0
                      21191 ; rs232cmd.c 5782               {
                      21192 ; rs232cmd.c 5783       
                      21193 ; rs232cmd.c 5784                       if ( labs( samples) > 442367L)          // Test for illeg
                            al time var
                      21195         CALL    _labs
006112 C4rrrrrr       +21195 ;       FCALL   _labs
006116 99140006       21197         CMP.W   R1,#06H
00611A FB0A           21198         BLT     _1471
00611C FC03           21199         BGT     _1536
00611E 9904BFFF       21200         CMP.W   R0,#0BFFFH
006122 F906           21201         BL      _1471
006122 F906           21201         BL      _1471
006124                21202 _1536:
                      21203 ; rs232cmd.c 5785                               return( -1);
006124 9918FFFF       21205         MOV.W   R1,#0FFFFH
006128 9908FFFF       21206         MOV.W   R0,#0FFFFH
                      21207         BR      _1530
00612C D501BD         +21207         JMP.L   _1530
00612C D501BD00       +21207         JMP.L   _1530
006130                21208 _1471:
                      21211 ; rs232cmd.c 5786       
                      21212 ; rs232cmd.c 5787                       switch ( F)                                              
                                                                            // Test for illegal field & line
006130 9C74100000     21214         CMP.W   [R7+16],#00H
006135 F31A           21215         BEQ     _1472
006137 9C7410FFFF     21216         CMP.W   [R7+16],#0FFFFH
00613C F328           21217         BEQ     _1477
00613E 9C7410FFFD     21218         CMP.W   [R7+16],#0FFFDH
006143 F325           21219         BEQ     _1477
006145 9C74100002     21220         CMP.W   [R7+16],#02H
00614A F321           21221         BEQ     _1477
00614C 9C7410FFFE     21222         CMP.W   [R7+16],#0FFFEH
006151 F32A           21223         BEQ     _1480
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 348

ADDR   CODE            LINE SOURCELINE
006153 9C74100001     21224         CMP.W   [R7+16],#01H
006158 F326           21225         BEQ     _1480
00615A 9C74100003     21226         CMP.W   [R7+16],#03H
00615F F323           21227         BEQ     _1480
006161 9C74100004     21228         CMP.W   [R7+16],#04H
006166 F32B           21229         BEQ     _1481
006168 FE44           21230         BR      _1483
                      21231 ; rs232cmd.c 5788                       {
                      21232 ; rs232cmd.c 5789                               case 0:
00616A                21234 _1472:
                      21235 ; rs232cmd.c 5790                                       if (( minus && ( L < -311)) || ( !minus &
                            & ( L > 312)))
00616A 84070C         21237         MOV.B   R0L,[R7+12]
00616D F304           21238         BEQ     _1473
00616F 9C740EFEC9     21239         CMP.W   [R7+14],#0FEC9H
006174 FB06           21240         BLT     _1474
006174 FB06           21240         BLT     _1474
006176                21241 _1473:
006176 84070C         21242         MOV.B   R0L,[R7+12]
006179 F242           21243         BNE     _1488
00617B 9C740E0138     21244         CMP.W   [R7+14],#0138H
006180 FD3E           21245         BLE     _1488
006180 FD3E           21245         BLE     _1488
006182                21246 _1474:
                      21247 ; rs232cmd.c 5791                                               return( -1);
006182 9918FFFF       21249         MOV.W   R1,#0FFFFH
006186 9908FFFF       21250         MOV.W   R0,#0FFFFH
                      21251         BR      _1530
00618A D5018E         +21251         JMP.L   _1530
                      21252 ; rs232cmd.c 5792                                       break;
                      21253 ; rs232cmd.c 5793       
                      21254 ; rs232cmd.c 5794                               case -1:
                      21255 ; rs232cmd.c 5795                               case -3:
                      21256 ; rs232cmd.c 5796                               case 2:
00618E                21258 _1477:
                      21261 ; rs232cmd.c 5797                                       if ( abs( L) > 312)
00618E 8C070E         21263         MOV.W   R0,[R7+14]
                      21264         CALL    _abs
006191 C4rrrrrr       +21264 ;       FCALL   _abs
006195 99040138       21265         CMP.W   R0,#0138H
006199 FD32           21266         BLE     _1488
                      21267 ; rs232cmd.c 5798                                               return( -1);
00619B 9918FFFF       21269         MOV.W   R1,#0FFFFH
00619F 9908FFFF       21270         MOV.W   R0,#0FFFFH
                      21271         BR      _1530
0061A3 D50181         +21271         JMP.L   _1530
                      21272 ; rs232cmd.c 5799                                       break;
                      21273 ; rs232cmd.c 5800       
                      21274 ; rs232cmd.c 5801                               case -2:
                      21275 ; rs232cmd.c 5802                               case 1:
                      21276 ; rs232cmd.c 5803                               case 3:
0061A6                21278 _1480:
                      21281 ; rs232cmd.c 5804                                       if ( abs( L) > 311)
0061A6 8C070E         21283         MOV.W   R0,[R7+14]
                      21284         CALL    _abs
0061A9 C4rrrrrr       +21284 ;       FCALL   _abs
0061AD 99040137       21285         CMP.W   R0,#0137H
0061B1 FD26           21286         BLE     _1488
                      21287 ; rs232cmd.c 5805                                               return( -1);
0061B3 9918FFFF       21289         MOV.W   R1,#0FFFFH
0061B7 9908FFFF       21290         MOV.W   R0,#0FFFFH
                      21291         BR      _1530
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 349

ADDR   CODE            LINE SOURCELINE
0061BB D50175         +21291         JMP.L   _1530
                      21292 ; rs232cmd.c 5806                                       break;
                      21293 ; rs232cmd.c 5807       
                      21294 ; rs232cmd.c 5808                               case 4:
0061BE                21296 _1481:
                      21299 ; rs232cmd.c 5809                                       if (( L > 0) || ( T > 0.0))
0061BE 9C740E0000     21301         CMP.W   [R7+14],#00H
0061C3 FC11           21302         BGT     _1482
0061C5 8C1724         21303         MOV.W   R1,[R7+36]
0061C8 8C0722         21304         MOV.W   R0,[R7+34]
0061CB C4rrrrrr       21305         FCALL   __SPF2DPF
0061CF BC7006         21306         MOV.W   [R7+6],#00H
0061D2 BC7004         21307         MOV.W   [R7+4],#00H
0061D5 BC7002         21308         MOV.W   [R7+2],#00H
0061D8 BA70           21309         MOV.W   [R7],#00H
0061DA 8967           21310         MOV.W   R6,R7
0061DC C4rrrrrr       21311         FCALL   __CMP_DPF
0061E0 910401         21312         CMP.B   R0L,#01H
0061E3 F20D           21313         BNE     _1488
0061E3 F20D00         21313         BNE     _1488
0061E6                21314 _1482:
                      21315 ; rs232cmd.c 5810                                               return( -1);
0061E6 9918FFFF       21317         MOV.W   R1,#0FFFFH
0061EA 9908FFFF       21318         MOV.W   R0,#0FFFFH
                      21319         BR      _1530
0061EE D5015C         +21319         JMP.L   _1530
                      21320 ; rs232cmd.c 5811                                       break;
                      21321 ; rs232cmd.c 5812       
                      21322 ; rs232cmd.c 5813                               default:
0061F2                21324 _1483:
                      21325 ; rs232cmd.c 5814                                       return( -1);
0061F2 9918FFFF       21327         MOV.W   R1,#0FFFFH
0061F6 9908FFFF       21328         MOV.W   R0,#0FFFFH
                      21329         BR      _1530
0061FA D50156         +21329         JMP.L   _1530
                      21330 ; rs232cmd.c 5815                       }
0061FE                21332 _1488:
                      21335 ; rs232cmd.c 5816       
                      21336 ; rs232cmd.c 5817                       if ( !minus)                                             
                                                                    // if posistive delay..
0061FE 84070C         21338         MOV.B   R0L,[R7+12]
006201 F212           21341         BNE     _1489
                      21342 ; rs232cmd.c 5818                       {
                      21343 ; rs232cmd.c 5819                               if ( F % 2)
006203 8C0710         21345         MOV.W   R0,[R7+16]
006206 8910           21346         MOV.W   R1,R0
006208 9819           21347         SEXT.W  R1
00620A E9090002       21348         DIV.D   R0,#02H
00620E 6911           21349         OR.W    R1,R1
006210 F341           21350         BEQ     _1494
                      21351 ; rs232cmd.c 5820                               {
                      21352 ; rs232cmd.c 5821                                       L += 313;
006212 8C070E         21354         MOV.W   R0,[R7+14]
006215 99000139       21355         ADD.W   R0,#0139H
006219 8C0F0E         21357         MOV.W   [R7+14],R0
                      21358 ; rs232cmd.c 5822                                       F--;
00621C 8C0710         21360         MOV.W   R0,[R7+16]
00621F A90F           21361         ADDS.W  R0,#0FH
006221 8C0F10         21362         MOV.W   [R7+16],R0
                      21363 ; rs232cmd.c 5823                               }
                      21364 ; rs232cmd.c 5824                       }
006224 FE37           21366         BR      _1494
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 350

ADDR   CODE            LINE SOURCELINE
006224 FE37           21366         BR      _1494
006226                21367 _1489:
                      21368 ; rs232cmd.c 5825                       else                                                     
                                                                                            // ..else delay is negative
                      21369 ; rs232cmd.c 5826                       {
                      21370 ; rs232cmd.c 5827                               F += 7;
006226 8C0710         21372         MOV.W   R0,[R7+16]
006229 A907           21373         ADDS.W  R0,#07H
                      21374 ; rs232cmd.c 5828       
                      21375 ; rs232cmd.c 5829                               samples += 442367L;
00622B 8C370A         21377         MOV.W   R3,[R7+10]
00622E 8C2708         21378         MOV.W   R2,[R7+8]
006231 9920BFFF       21379         ADD.W   R2,#0BFFFH
006235 99310006       21380         ADDC.W  R3,#06H
006239 8C3F16         21381         MOV.W   [R7+22],R3
00623C 8C2F14         21382         MOV.W   [R7+20],R2
                      21383 ; rs232cmd.c 5830       
                      21384 ; rs232cmd.c 5831                               if ( F % 2) {
00623F 8C0F10         21386         MOV.W   [R7+16],R0
006242 8910           21387         MOV.W   R1,R0
006244 9819           21388         SEXT.W  R1
006246 E9090002       21389         DIV.D   R0,#02H
00624A 6911           21390         OR.W    R1,R1
00624C F30A           21391         BEQ     _1490
                      21392 ; rs232cmd.c 5832                                       L += 624;
00624E 8C070E         21394         MOV.W   R0,[R7+14]
006251 99000270       21395         ADD.W   R0,#0270H
006255 8C0F0E         21396         MOV.W   [R7+14],R0
                      21397 ; rs232cmd.c 5833                                       F--;
006258 8C0710         21399         MOV.W   R0,[R7+16]
00625B A90F           21400         ADDS.W  R0,#0FH
00625D 8C0F10         21401         MOV.W   [R7+16],R0
                      21402 ; rs232cmd.c 5834                               }
006260 FE05           21404         BR      _1491
006260 FE05           21404         BR      _1491
006262                21405 _1490:
                      21406 ; rs232cmd.c 5835                               else
                      21407 ; rs232cmd.c 5836                                       L += 312;
006262 8C070E         21409         MOV.W   R0,[R7+14]
006265 99000138       21410         ADD.W   R0,#0138H
006269 8C0F0E         21411         MOV.W   [R7+14],R0
006269 8C0F0E         21411         MOV.W   [R7+14],R0
00626C                21412 _1491:
                      21413 ; rs232cmd.c 5837       
                      21414 ; rs232cmd.c 5838                               if ( T == 0)
00626C B930           21416         MOV.W   R3,#00H
00626E B920           21417         MOV.W   R2,#00H
006270 8C1724         21418         MOV.W   R1,[R7+36]
006273 8C0722         21419         MOV.W   R0,[R7+34]
006276 C4rrrrrr       21420         FCALL   __CMP_SPF
00627A 910400         21421         CMP.B   R0L,#00H
00627D F20B           21422         BNE     _1494
                      21423 ; rs232cmd.c 5839                                       samples++;
00627F 8C1716         21425         MOV.W   R1,[R7+22]
006282 8C0714         21426         MOV.W   R0,[R7+20]
006285 99000001       21427         ADD.W   R0,#01H
006289 99110000       21428         ADDC.W  R1,#00H
00628D 8C1F16         21429         MOV.W   [R7+22],R1
006290 8C0F14         21430         MOV.W   [R7+20],R0
                      21431 ; rs232cmd.c 5840                       }
006294                21433 _1494:
                      21434 ; rs232cmd.c 5841       
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 351

ADDR   CODE            LINE SOURCELINE
                      21435 ; rs232cmd.c 5842                       samples += F*138240000L + L*442368L;
006294 8C0710         21437         MOV.W   R0,[R7+16]
006297 9819           21438         SEXT.W  R1
006299 8931           21439         MOV.W   R3,R1
00629B 8920           21440         MOV.W   R2,R0
00629D DD25           21441         ASL.D   R2,#05H
00629F 0920           21442         ADD.W   R2,R0
0062A1 1931           21443         ADDC.W  R3,R1
0062A3 DD25           21444         ASL.D   R2,#05H
0062A5 2920           21445         SUB.W   R2,R0
0062A7 3931           21446         SUBB.W  R3,R1
0062A9 DD22           21447         ASL.D   R2,#02H
0062AB 2920           21448         SUB.W   R2,R0
0062AD 3931           21449         SUBB.W  R3,R1
0062AF DD22           21450         ASL.D   R2,#02H
0062B1 2920           21451         SUB.W   R2,R0
0062B3 3931           21452         SUBB.W  R3,R1
0062B5 DD2D           21453         ASL.D   R2,#0DH
0062B7 8C070E         21454         MOV.W   R0,[R7+14]
0062BA 8940           21455         MOV.W   R4,R0
0062BC 9859           21456         SEXT.W  R5
0062BE 8915           21457         MOV.W   R1,R5
0062C0 8904           21458         MOV.W   R0,R4
0062C2 DD03           21459         ASL.D   R0,#03H
0062C4 2904           21460         SUB.W   R0,R4
0062C6 3915           21461         SUBB.W  R1,R5
0062C8 DD02           21462         ASL.D   R0,#02H
0062CA 2904           21463         SUB.W   R0,R4
0062CC 3915           21464         SUBB.W  R1,R5
0062CE DD0E           21465         ASL.D   R0,#0EH
0062D0 0920           21466         ADD.W   R2,R0
0062D2 1931           21467         ADDC.W  R3,R1
0062D4 8C1716         21468         MOV.W   R1,[R7+22]
0062D7 8C0714         21469         MOV.W   R0,[R7+20]
0062DA 0902           21470         ADD.W   R0,R2
0062DC 1913           21471         ADDC.W  R1,R3
                      21472 ; rs232cmd.c 5843               }
                      21474         BR      _1516
0062DE D500E4         +21474         JMP.L   _1516
0062DE D500E400       +21474         JMP.L   _1516
0062E2                21475 _1495:
                      21477 ; rs232cmd.c 5844               else                                                             
                                                                                            // ..else system is NTSC
                      21478 ; rs232cmd.c 5845               {
                      21479 ; rs232cmd.c 5846       
                      21480 ; rs232cmd.c 5847                       if ( labs( samples) > 439295L)          // Test for illeg
                            al time var
0062E2 8C1716         21482         MOV.W   R1,[R7+22]
0062E5 8C0714         21483         MOV.W   R0,[R7+20]
                      21484         CALL    _labs
0062E8 C4rrrrrr       +21484 ;       FCALL   _labs
0062EC 99140006       21485         CMP.W   R1,#06H
0062F0 FB0A           21486         BLT     _1496
0062F2 FC03           21487         BGT     _1542
0062F4 9904B3FF       21488         CMP.W   R0,#0B3FFH
0062F8 F906           21489         BL      _1496
0062F8 F906           21489         BL      _1496
0062FA                21490 _1542:
                      21491 ; rs232cmd.c 5848                               return( -1);
0062FA 9918FFFF       21493         MOV.W   R1,#0FFFFH
0062FE 9908FFFF       21494         MOV.W   R0,#0FFFFH
                      21495         BR      _1530
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 352

ADDR   CODE            LINE SOURCELINE
006302 D500D2         +21495         JMP.L   _1530
006302 D500D200       +21495         JMP.L   _1530
006306                21496 _1496:
                      21499 ; rs232cmd.c 5849       
                      21500 ; rs232cmd.c 5850                       switch ( F)                                              
                                                                            // Test for illegal field & line
006306 9C74100000     21502         CMP.W   [R7+16],#00H
00630B F30C           21503         BEQ     _1497
00630D 9C7410FFFF     21504         CMP.W   [R7+16],#0FFFFH
006312 F31A           21505         BEQ     _1500
006314 9C74100001     21506         CMP.W   [R7+16],#01H
006319 F323           21507         BEQ     _1501
00631B 9C74100002     21508         CMP.W   [R7+16],#02H
006320 F32B           21509         BEQ     _1502
006322 FE44           21510         BR      _1504
                      21511 ; rs232cmd.c 5851                       {
                      21512 ; rs232cmd.c 5852                               case 0:
006324                21514 _1497:
                      21515 ; rs232cmd.c 5853                                       if (( minus && ( L < -261)) || ( !minus &
                            & ( L > 262)))
006324 84070C         21517         MOV.B   R0L,[R7+12]
006327 F304           21518         BEQ     _1498
006329 9C740EFEFB     21519         CMP.W   [R7+14],#0FEFBH
00632E FB06           21520         BLT     _1499
00632E FB06           21520         BLT     _1499
006330                21521 _1498:
006330 84070C         21522         MOV.B   R0L,[R7+12]
006333 F241           21523         BNE     _1509
006335 9C740E0106     21524         CMP.W   [R7+14],#0106H
00633A FD3D           21525         BLE     _1509
00633A FD3D           21525         BLE     _1509
00633C                21526 _1499:
                      21527 ; rs232cmd.c 5854                                               return( -1);
00633C 9918FFFF       21529         MOV.W   R1,#0FFFFH
006340 9908FFFF       21530         MOV.W   R0,#0FFFFH
                      21531         BR      _1530
006344 D500B1         +21531         JMP.L   _1530
                      21532 ; rs232cmd.c 5855                                       break;
                      21533 ; rs232cmd.c 5856       
                      21534 ; rs232cmd.c 5857                               case -1:
006348                21536 _1500:
                      21539 ; rs232cmd.c 5858                                       if ( abs( L) > 262)
006348 8C070E         21541         MOV.W   R0,[R7+14]
                      21542         CALL    _abs
00634B C4rrrrrr       +21542 ;       FCALL   _abs
00634F 99040106       21543         CMP.W   R0,#0106H
006353 FD31           21544         BLE     _1509
                      21545 ; rs232cmd.c 5859                                               return( -1);
006355 9918FFFF       21547         MOV.W   R1,#0FFFFH
006359 9908FFFF       21548         MOV.W   R0,#0FFFFH
                      21549         BR      _1530
00635D D500A4         +21549         JMP.L   _1530
                      21550 ; rs232cmd.c 5860                                       break;
                      21551 ; rs232cmd.c 5861       
                      21552 ; rs232cmd.c 5862                               case 1:
006360                21554 _1501:
                      21557 ; rs232cmd.c 5863                                       if ( abs( L) > 261)
006360 8C070E         21559         MOV.W   R0,[R7+14]
                      21560         CALL    _abs
006363 C4rrrrrr       +21560 ;       FCALL   _abs
006367 99040105       21561         CMP.W   R0,#0105H
00636B FD25           21562         BLE     _1509
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 353

ADDR   CODE            LINE SOURCELINE
                      21563 ; rs232cmd.c 5864                                               return( -1);
00636D 9918FFFF       21565         MOV.W   R1,#0FFFFH
006371 9908FFFF       21566         MOV.W   R0,#0FFFFH
                      21567         BR      _1530
006375 D50098         +21567         JMP.L   _1530
                      21568 ; rs232cmd.c 5865                                       break;
                      21569 ; rs232cmd.c 5866       
                      21570 ; rs232cmd.c 5867                               case 2:
006378                21572 _1502:
                      21575 ; rs232cmd.c 5868                                       if (( L > 0) || ( T > 0.0))
006378 9C740E0000     21577         CMP.W   [R7+14],#00H
00637D FC12           21578         BGT     _1503
00637F 8C1724         21579         MOV.W   R1,[R7+36]
006382 8C0722         21580         MOV.W   R0,[R7+34]
006385 C4rrrrrr       21581         FCALL   __SPF2DPF
006389 BC700A         21582         MOV.W   [R7+10],#00H
00638C BC7008         21583         MOV.W   [R7+8],#00H
00638F BC7006         21584         MOV.W   [R7+6],#00H
006392 BC7004         21585         MOV.W   [R7+4],#00H
006395 406704         21586         LEA     R6,R7+4
006398 C4rrrrrr       21587         FCALL   __CMP_DPF
00639C 910401         21588         CMP.B   R0L,#01H
00639F F20B           21589         BNE     _1509
00639F F20B00         21589         BNE     _1509
0063A2                21590 _1503:
                      21591 ; rs232cmd.c 5869                                               return( -1);
0063A2 9918FFFF       21593         MOV.W   R1,#0FFFFH
0063A6 9908FFFF       21594         MOV.W   R0,#0FFFFH
0063AA FE7E           21595         BR      _1530
                      21596 ; rs232cmd.c 5870                                       break;
                      21597 ; rs232cmd.c 5871       
                      21598 ; rs232cmd.c 5872                               default:
0063AC                21600 _1504:
                      21601 ; rs232cmd.c 5873                                       return( -1);
0063AC 9918FFFF       21603         MOV.W   R1,#0FFFFH
0063B0 9908FFFF       21604         MOV.W   R0,#0FFFFH
0063B4 FE79           21605         BR      _1530
                      21606 ; rs232cmd.c 5874                       }
0063B6                21608 _1509:
                      21611 ; rs232cmd.c 5875       
                      21612 ; rs232cmd.c 5876                       if ( !minus)                                             
                                                            // if posistive delay..
0063B6 84070C         21614         MOV.B   R0L,[R7+12]
0063B9 F212           21617         BNE     _1510
                      21618 ; rs232cmd.c 5877                       {                                               
                      21619 ; rs232cmd.c 5878       
                      21620 ; rs232cmd.c 5879                               if ( F % 2)
0063BB 8C0710         21622         MOV.W   R0,[R7+16]
0063BE 8910           21623         MOV.W   R1,R0
0063C0 9819           21624         SEXT.W  R1
0063C2 E9090002       21625         DIV.D   R0,#02H
0063C6 6911           21626         OR.W    R1,R1
0063C8 F341           21627         BEQ     _1515
                      21628 ; rs232cmd.c 5880                               {
                      21629 ; rs232cmd.c 5881                                       L += 263;
0063CA 8C070E         21631         MOV.W   R0,[R7+14]
0063CD 99000107       21632         ADD.W   R0,#0107H
0063D1 8C0F0E         21634         MOV.W   [R7+14],R0
                      21635 ; rs232cmd.c 5882                                       F--;
0063D4 8C0710         21637         MOV.W   R0,[R7+16]
0063D7 A90F           21638         ADDS.W  R0,#0FH
0063D9 8C0F10         21639         MOV.W   [R7+16],R0
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 354

ADDR   CODE            LINE SOURCELINE
                      21640 ; rs232cmd.c 5883                               }
                      21641 ; rs232cmd.c 5884                       }
0063DC FE37           21643         BR      _1515
0063DC FE37           21643         BR      _1515
0063DE                21644 _1510:
                      21645 ; rs232cmd.c 5885                       else                                                     
                                                                                            // ..else delay is negative
                      21646 ; rs232cmd.c 5886                       {                                                        
                                                                                                            
                      21647 ; rs232cmd.c 5887                               F += 3;
0063DE 8C0710         21649         MOV.W   R0,[R7+16]
0063E1 A903           21650         ADDS.W  R0,#03H
                      21651 ; rs232cmd.c 5888       
                      21652 ; rs232cmd.c 5889                               samples += 439295;
0063E3 8C3716         21654         MOV.W   R3,[R7+22]
0063E6 8C2714         21655         MOV.W   R2,[R7+20]
0063E9 9920B3FF       21656         ADD.W   R2,#0B3FFH
0063ED 99310006       21657         ADDC.W  R3,#06H
0063F1 8C3F16         21658         MOV.W   [R7+22],R3
0063F4 8C2F14         21659         MOV.W   [R7+20],R2
                      21660 ; rs232cmd.c 5890       
                      21661 ; rs232cmd.c 5891                               if ( F % 2)
0063F7 8C0F10         21663         MOV.W   [R7+16],R0
0063FA 8910           21664         MOV.W   R1,R0
0063FC 9819           21665         SEXT.W  R1
0063FE E9090002       21666         DIV.D   R0,#02H
006402 6911           21667         OR.W    R1,R1
006404 F30A           21668         BEQ     _1511
                      21669 ; rs232cmd.c 5892                               {
                      21670 ; rs232cmd.c 5893                                       L += 524;
006406 8C070E         21672         MOV.W   R0,[R7+14]
006409 9900020C       21673         ADD.W   R0,#020CH
00640D 8C0F0E         21674         MOV.W   [R7+14],R0
                      21675 ; rs232cmd.c 5894                                       F--;
006410 8C0710         21677         MOV.W   R0,[R7+16]
006413 A90F           21678         ADDS.W  R0,#0FH
006415 8C0F10         21679         MOV.W   [R7+16],R0
                      21680 ; rs232cmd.c 5895                               }
006418 FE05           21682         BR      _1512
006418 FE05           21682         BR      _1512
00641A                21683 _1511:
                      21684 ; rs232cmd.c 5896                               else
                      21685 ; rs232cmd.c 5897                                       L += 262;
00641A 8C070E         21687         MOV.W   R0,[R7+14]
00641D 99000106       21688         ADD.W   R0,#0106H
006421 8C0F0E         21689         MOV.W   [R7+14],R0
006421 8C0F0E         21689         MOV.W   [R7+14],R0
006424                21690 _1512:
                      21691 ; rs232cmd.c 5898       
                      21692 ; rs232cmd.c 5899                               if ( T == 0)
006424 B930           21694         MOV.W   R3,#00H
006426 B920           21695         MOV.W   R2,#00H
006428 8C1724         21696         MOV.W   R1,[R7+36]
00642B 8C0722         21697         MOV.W   R0,[R7+34]
00642E C4rrrrrr       21698         FCALL   __CMP_SPF
006432 910400         21699         CMP.B   R0L,#00H
006435 F20B           21700         BNE     _1515
                      21701 ; rs232cmd.c 5900                                       samples++;
006437 8C1716         21703         MOV.W   R1,[R7+22]
00643A 8C0714         21704         MOV.W   R0,[R7+20]
00643D 99000001       21705         ADD.W   R0,#01H
006441 99110000       21706         ADDC.W  R1,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 355

ADDR   CODE            LINE SOURCELINE
006445 8C1F16         21707         MOV.W   [R7+22],R1
006448 8C0F14         21708         MOV.W   [R7+20],R0
                      21709 ; rs232cmd.c 5901                       }
00644C                21711 _1515:
                      21712 ; rs232cmd.c 5902       
                      21713 ; rs232cmd.c 5903                       samples += F*115315200L + L*439296L;
00644C 8C0710         21715         MOV.W   R0,[R7+16]
00644F 9819           21716         SEXT.W  R1
006451 8931           21717         MOV.W   R3,R1
006453 8920           21718         MOV.W   R2,R0
006455 DD23           21719         ASL.D   R2,#03H
006457 2920           21720         SUB.W   R2,R0
006459 3931           21721         SUBB.W  R3,R1
00645B DD23           21722         ASL.D   R2,#03H
00645D 2920           21723         SUB.W   R2,R0
00645F 3931           21724         SUBB.W  R3,R1
006461 DD26           21725         ASL.D   R2,#06H
006463 2920           21726         SUB.W   R2,R0
006465 3931           21727         SUBB.W  R3,R1
006467 DD23           21728         ASL.D   R2,#03H
006469 0920           21729         ADD.W   R2,R0
00646B 1931           21730         ADDC.W  R3,R1
00646D DD23           21731         ASL.D   R2,#03H
00646F 0920           21732         ADD.W   R2,R0
006471 1931           21733         ADDC.W  R3,R1
006473 DD29           21734         ASL.D   R2,#09H
006475 8C070E         21735         MOV.W   R0,[R7+14]
006478 8940           21736         MOV.W   R4,R0
00647A 9859           21737         SEXT.W  R5
00647C 8915           21738         MOV.W   R1,R5
00647E 8904           21739         MOV.W   R0,R4
006480 DD03           21740         ASL.D   R0,#03H
006482 2904           21741         SUB.W   R0,R4
006484 3915           21742         SUBB.W  R1,R5
006486 DD02           21743         ASL.D   R0,#02H
006488 2904           21744         SUB.W   R0,R4
00648A 3915           21745         SUBB.W  R1,R5
00648C DD02           21746         ASL.D   R0,#02H
00648E 2904           21747         SUB.W   R0,R4
006490 3915           21748         SUBB.W  R1,R5
006492 DD02           21749         ASL.D   R0,#02H
006494 0904           21750         ADD.W   R0,R4
006496 1915           21751         ADDC.W  R1,R5
006498 DD0A           21752         ASL.D   R0,#0AH
00649A 0920           21753         ADD.W   R2,R0
00649C 1931           21754         ADDC.W  R3,R1
00649E 8C1716         21755         MOV.W   R1,[R7+22]
0064A1 8C0714         21756         MOV.W   R0,[R7+20]
0064A4 0902           21757         ADD.W   R0,R2
0064A6 1913           21758         ADDC.W  R1,R3
                      21759 ; rs232cmd.c 5904               }
0064A8                21761 _1516:
                      21762 ; rs232cmd.c 5905       
                      21763 ; rs232cmd.c 5906               return( samples);
                      21764 ; rs232cmd.c 5907       }
0064A8                21766 _1530:
0064A8 99700018       21767         ADD.W   R7,#018H
0064AC 2F70           21769         POP.W   R4, R5, R6
0064AE D680           21771         RET
                      21773 ; rs232cmd.c 5908       
                      21774 ; rs232cmd.c 5909       /************************************************************************
                            **/
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 356

ADDR   CODE            LINE SOURCELINE
                      21775 ; rs232cmd.c 5910       /* PrintSamplesToFLT                                                     
                                                                                                                             
                                     RS232CMD.C */
                      21776 ; rs232cmd.c 5911       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21777 ; rs232cmd.c 5912       /* Author:              Kim Engedahl, DEV, 970211                        
                                                                                                                             
                                    */
                      21778 ; rs232cmd.c 5913       /* Revised:             000530                                           
                                                                                                                             
                                                                                    */
                      21779 ; rs232cmd.c 5914       /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                      21780 ; rs232cmd.c 5915       /* Function:    --                                                       
                                                                                                                             
                                                                                                            */
                      21781 ; rs232cmd.c 5916       /* Remarks:             PAL Range: 1728*256, NTSC Range: 1716*256        
                                                                                                    */
                      21782 ; rs232cmd.c 5917       /* Returns:             --                                               
                                                                                                                             
                                                                                                                    */
                      21783 ; rs232cmd.c 5918       /* Updates:             --                                               
                                                                                                                             
                                                                                                                    */
                      21784 ; rs232cmd.c 5919       /************************************************************************
                            **/
                      21785 ; rs232cmd.c 5920       void PrintSamplesToFLT( UC system, long samples) {
                      21786         ALIGN   1
                      21788         PUBLIC  _PrintSamplesToFLT
0064B0                21789 _PrintSamplesToFLT:
0064B0 0F70           21793         PUSH.W  R4, R5, R6
0064B2 A97A           21795         ADDS.W  R7,#0AH
                      21808 ; rs232cmd.c 5921       
                      21809 ; rs232cmd.c 5922               char sign;
                      21810 ; rs232cmd.c 5923               int frame, field, line;
                      21811 ; rs232cmd.c 5924       
                      21812 ; rs232cmd.c 5925               sign = '+';
0064B4 9478022B       21814         MOV.B   [R7+2],#02BH
                      21816 ; rs232cmd.c 5926       
                      21817 ; rs232cmd.c 5927               if ( system < NTSC)                                              
                                                                            // If system selected is PAL..
0064B8 910402         21819         CMP.B   R0L,#02H
                      21820         BCC     _1553
0064BB F102           +21820 ;       BCS     _LG_1554
0064BD D50087         +21820 ;       JMP.L   _1553
0064C0 D50087         +21820 ;       JMP.L   _1553
0064C0                +21820 _LG_1554:
                      21821 ; rs232cmd.c 5928               {
                      21822 ; rs232cmd.c 5929                       // 552960000 = 2*625*1728*256
                      21823 ; rs232cmd.c 5930                       // 276480000 = 625*1728*256
                      21824 ; rs232cmd.c 5931                       // 442368    = 1728*256
                      21825 ; rs232cmd.c 5932       
                      21826 ; rs232cmd.c 5933                       if ( samples >= 552960000L)
0064C0 8953           21828         MOV.W   R5,R3
0064C2 8942           21829         MOV.W   R4,R2
0064C4 993420F5       21830         CMP.W   R3,#020F5H
0064C8 FB50           21831         BLT     _1552
0064CA FC03           21832         BGT     _1565
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 357

ADDR   CODE            LINE SOURCELINE
0064CC 99248000       21833         CMP.W   R2,#08000H
0064D0 F14C           21834         BCS     _1552
0064D0 F14C           21834         BCS     _1552
0064D2                21835 _1565:
                      21836 ; rs232cmd.c 5934                       {
                      21837 ; rs232cmd.c 5935                               samples--;
0064D2 99420001       21839         SUB.W   R4,#01H
0064D6 99530000       21840         SUBB.W  R5,#00H
0064DA 8915           21841         MOV.W   R1,R5
0064DC 8904           21842         MOV.W   R0,R4
                      21845 ; rs232cmd.c 5936       
                      21846 ; rs232cmd.c 5937                               frame = samples / 276480000L;
0064DE 9938107A       21848         MOV.W   R3,#0107AH
0064E2 9928C000       21849         MOV.W   R2,#0C000H
0064E6 8951           21850         MOV.W   R5,R1
0064E8 8940           21851         MOV.W   R4,R0
0064EA C4rrrrrr       21852         FCALL   __SDIVL
0064EE 8A0F           21855         MOV.W   [R7],R0
                      21857 ; rs232cmd.c 5938                               line = ( samples % 276480000L) /  442368L;
0064F0 9938107A       21859         MOV.W   R3,#0107AH
0064F4 9928C000       21860         MOV.W   R2,#0C000H
0064F8 8915           21861         MOV.W   R1,R5
0064FA 8904           21862         MOV.W   R0,R4
0064FC C4rrrrrr       21863         FCALL   __SMODL
006500 B936           21867         MOV.W   R3,#06H
006502 9928C000       21868         MOV.W   R2,#0C000H
006506 8951           21869         MOV.W   R5,R1
006508 8940           21870         MOV.W   R4,R0
00650A C4rrrrrr       21871         FCALL   __SDIVL
00650E 8960           21872         MOV.W   R6,R0
006510 8C6F04         21873         MOV.W   [R7+4],R6
                      21874 ; rs232cmd.c 5939                               samples = ( samples % 276480000L) %  442368L;
006513 8915           21876         MOV.W   R1,R5
006515 8904           21877         MOV.W   R0,R4
006517 B936           21878         MOV.W   R3,#06H
006519 9928C000       21879         MOV.W   R2,#0C000H
00651D C4rrrrrr       21880         FCALL   __SMODL
                      21882 ; rs232cmd.c 5940                               field = 2*frame;
006521 8A27           21884         MOV.W   R2,[R7]
006523 D921           21885         ASL.W   R2,#01H
006525 8932           21889         MOV.W   R3,R2
                      21891 ; rs232cmd.c 5941       
                      21892 ; rs232cmd.c 5942                               if ( line > 312)
006527 99480138       21894         MOV.W   R4,#0138H
00652B 99640138       21895         CMP.W   R6,#0138H
00652F FD08           21896         BLE     _1550
                      21897 ; rs232cmd.c 5943                               {
                      21898 ; rs232cmd.c 5944                                       field++;
006531 A921           21900         ADDS.W  R2,#01H
006533 8932           21901         MOV.W   R3,R2
                      21904 ; rs232cmd.c 5945                                       line = 624-line;
006535 99280270       21906         MOV.W   R2,#0270H
006539 2926           21907         SUB.W   R2,R6
00653B 8C2F04         21908         MOV.W   [R7+4],R2
                      21909 ; rs232cmd.c 5946                               }
00653E FE04           21911         BR      _1551
00653E FE04           21911         BR      _1551
006540                21912 _1550:
                      21913 ; rs232cmd.c 5947                               else
                      21914 ; rs232cmd.c 5948                                       line = 312-line;
006540 8C2704         21916         MOV.W   R2,[R7+4]
006543 2942           21917         SUB.W   R4,R2
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 358

ADDR   CODE            LINE SOURCELINE
006545 8C4F04         21918         MOV.W   [R7+4],R4
006545 8C4F04         21918         MOV.W   [R7+4],R4
006548                21919 _1551:
                      21920 ; rs232cmd.c 5949       
                      21921 ; rs232cmd.c 5950                               samples = 442368L - 1 - samples;
006548 B956           21923         MOV.W   R5,#06H
00654A 9948BFFF       21924         MOV.W   R4,#0BFFFH
00654E 2940           21925         SUB.W   R4,R0
006550 3951           21926         SUBB.W  R5,R1
                      21929 ; rs232cmd.c 5951                               field = 7-field;
006552 B917           21931         MOV.W   R1,#07H
006554 2913           21932         SUB.W   R1,R3
006556 8901           21933         MOV.W   R0,R1
                      21936 ; rs232cmd.c 5952       
                      21937 ; rs232cmd.c 5953                               if ( field != 4)
006558 99140004       21939         CMP.W   R1,#04H
                      21940         BEQ     _1563
00655C F202           +21940 ;       BNE     _LG_1564
00655E D500B8         +21940 ;       JMP.L   _1563
006562 D500B800       +21940 ;       JMP.L   _1563
006562                +21940 _LG_1564:
                      21941 ; rs232cmd.c 5954                                       sign = '-';
006562 9478022D       21943         MOV.B   [R7+2],#02DH
                      21946 ; rs232cmd.c 5955                       }
                      21948         BR      _1563
006566 D500B4         +21948         JMP.L   _1563
006566 D500B400       +21948         JMP.L   _1563
00656A                21949 _1552:
                      21950 ; rs232cmd.c 5956                       else
                      21951 ; rs232cmd.c 5957                       {
                      21952 ; rs232cmd.c 5958                               frame = samples / 276480000L;
00656A 9938107A       21954         MOV.W   R3,#0107AH
00656E 9928C000       21955         MOV.W   R2,#0C000H
006572 8915           21956         MOV.W   R1,R5
006574 8904           21957         MOV.W   R0,R4
006576 C4rrrrrr       21958         FCALL   __SDIVL
00657A 8A0F           21960         MOV.W   [R7],R0
                      21962 ; rs232cmd.c 5959                               line = ( samples % 276480000L) / 442368L;
00657C 9938107A       21964         MOV.W   R3,#0107AH
006580 9928C000       21965         MOV.W   R2,#0C000H
006584 8915           21966         MOV.W   R1,R5
006586 8904           21967         MOV.W   R0,R4
006588 C4rrrrrr       21968         FCALL   __SMODL
00658C B936           21972         MOV.W   R3,#06H
00658E 9928C000       21973         MOV.W   R2,#0C000H
006592 8951           21974         MOV.W   R5,R1
006594 8940           21975         MOV.W   R4,R0
006596 C4rrrrrr       21976         FCALL   __SDIVL
00659A 8960           21977         MOV.W   R6,R0
00659C 8C6F04         21978         MOV.W   [R7+4],R6
                      21979 ; rs232cmd.c 5960                               samples = ( samples % 276480000L) % 442368L;
00659F 8915           21981         MOV.W   R1,R5
0065A1 8904           21982         MOV.W   R0,R4
0065A3 B936           21983         MOV.W   R3,#06H
0065A5 9928C000       21984         MOV.W   R2,#0C000H
0065A9 C4rrrrrr       21985         FCALL   __SMODL
0065AD 8951           21986         MOV.W   R5,R1
0065AF 8940           21987         MOV.W   R4,R0
                      21989 ; rs232cmd.c 5961                               field = 2*frame;
0065B1 8A17           21991         MOV.W   R1,[R7]
0065B3 D911           21992         ASL.W   R1,#01H
0065B5 8901           21996         MOV.W   R0,R1
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 359

ADDR   CODE            LINE SOURCELINE
                      21998 ; rs232cmd.c 5962       
                      21999 ; rs232cmd.c 5963                               if ( line > 312)
0065B7 99640138       22001         CMP.W   R6,#0138H
                      22002         BLE     _1563
0065BB FC02           +22002 ;       BGT     _LG_1566
0065BD D50088         +22002 ;       JMP.L   _1563
0065C0 D50088         +22002 ;       JMP.L   _1563
0065C0                +22002 _LG_1566:
                      22003 ; rs232cmd.c 5964                               {
                      22004 ; rs232cmd.c 5965                                       field++;
0065C0 A911           22006         ADDS.W  R1,#01H
0065C2 8901           22007         MOV.W   R0,R1
                      22010 ; rs232cmd.c 5966                                       line -= 313;
0065C4 99620139       22012         SUB.W   R6,#0139H
0065C8 8C6F04         22013         MOV.W   [R7+4],R6
                      22014 ; rs232cmd.c 5967                               }
                      22015 ; rs232cmd.c 5968                       }
                      22016 ; rs232cmd.c 5969               }
                      22018         BR      _1563
0065CB D50081         +22018         JMP.L   _1563
0065CB D50081         +22018         JMP.L   _1563
0065CE                22019 _1553:
                      22022 ; rs232cmd.c 5970               else {                                                           
                                                            // ..system selected is NTSC
                      22023 ; rs232cmd.c 5971                       if ( samples >= 230630400L)
0065CE 8953           22025         MOV.W   R5,R3
0065D0 8942           22026         MOV.W   R4,R2
0065D2 99340DBF       22027         CMP.W   R3,#0DBFH
0065D6 FB4D           22028         BLT     _1556
0065D8 FC03           22029         BGT     _1569
0065DA 99242400       22030         CMP.W   R2,#02400H
0065DE F149           22031         BCS     _1556
0065DE F149           22031         BCS     _1556
0065E0                22032 _1569:
                      22035 ; rs232cmd.c 5972                       {
                      22036 ; rs232cmd.c 5973                               // 230630400 = 525*1716*256
                      22037 ; rs232cmd.c 5974                               // 439296    = 1716*256
                      22038 ; rs232cmd.c 5975       
                      22039 ; rs232cmd.c 5976                               samples--;
0065E0 99420001       22041         SUB.W   R4,#01H
0065E4 99530000       22042         SUBB.W  R5,#00H
0065E8 8915           22044         MOV.W   R1,R5
0065EA 8904           22045         MOV.W   R0,R4
                      22048 ; rs232cmd.c 5977       
                      22049 ; rs232cmd.c 5978                               frame = samples / 230630400L;
0065EC 99380DBF       22051         MOV.W   R3,#0DBFH
0065F0 99282400       22052         MOV.W   R2,#02400H
0065F4 8951           22053         MOV.W   R5,R1
0065F6 8940           22054         MOV.W   R4,R0
0065F8 C4rrrrrr       22055         FCALL   __SDIVL
0065FC 8A0F           22058         MOV.W   [R7],R0
                      22060 ; rs232cmd.c 5979                               line = ( samples % 230630400L) / 439296L;
0065FE 99380DBF       22062         MOV.W   R3,#0DBFH
006602 99282400       22063         MOV.W   R2,#02400H
006606 8915           22064         MOV.W   R1,R5
006608 8904           22065         MOV.W   R0,R4
00660A C4rrrrrr       22066         FCALL   __SMODL
00660E B936           22070         MOV.W   R3,#06H
006610 9928B400       22071         MOV.W   R2,#0B400H
006614 8951           22072         MOV.W   R5,R1
006616 8940           22073         MOV.W   R4,R0
006618 C4rrrrrr       22074         FCALL   __SDIVL
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 360

ADDR   CODE            LINE SOURCELINE
00661C 8960           22075         MOV.W   R6,R0
00661E 8C6F04         22076         MOV.W   [R7+4],R6
                      22077 ; rs232cmd.c 5980                               samples = ( samples % 230630400L) % 439296L;
006621 8915           22079         MOV.W   R1,R5
006623 8904           22080         MOV.W   R0,R4
006625 B936           22081         MOV.W   R3,#06H
006627 9928B400       22082         MOV.W   R2,#0B400H
00662B C4rrrrrr       22083         FCALL   __SMODL
                      22085 ; rs232cmd.c 5981       
                      22086 ; rs232cmd.c 5982                               field = 2*frame;
00662F 8A27           22088         MOV.W   R2,[R7]
006631 D921           22089         ASL.W   R2,#01H
006633 8932           22093         MOV.W   R3,R2
                      22095 ; rs232cmd.c 5983       
                      22096 ; rs232cmd.c 5984                               if ( line > 262)
006635 99480106       22098         MOV.W   R4,#0106H
006639 99640106       22099         CMP.W   R6,#0106H
00663D FD08           22100         BLE     _1554
                      22101 ; rs232cmd.c 5985                               {
                      22102 ; rs232cmd.c 5986                                       field++;
00663F A921           22104         ADDS.W  R2,#01H
006641 8932           22105         MOV.W   R3,R2
                      22108 ; rs232cmd.c 5987                                       line = 524-line;
006643 9928020C       22110         MOV.W   R2,#020CH
006647 2926           22111         SUB.W   R2,R6
006649 8C2F04         22112         MOV.W   [R7+4],R2
                      22113 ; rs232cmd.c 5988                               }
00664C FE04           22115         BR      _1555
00664C FE04           22115         BR      _1555
00664E                22116 _1554:
                      22117 ; rs232cmd.c 5989                               else
                      22118 ; rs232cmd.c 5990                                       line = 262-line;
00664E 8C2704         22120         MOV.W   R2,[R7+4]
006651 2942           22121         SUB.W   R4,R2
006653 8C4F04         22122         MOV.W   [R7+4],R4
006653 8C4F04         22122         MOV.W   [R7+4],R4
006656                22123 _1555:
                      22124 ; rs232cmd.c 5991       
                      22125 ; rs232cmd.c 5992                               samples = 439296L - 1 - samples;
006656 B956           22127         MOV.W   R5,#06H
006658 9948B3FF       22128         MOV.W   R4,#0B3FFH
00665C 2940           22129         SUB.W   R4,R0
00665E 3951           22130         SUBB.W  R5,R1
                      22133 ; rs232cmd.c 5993                               field = 3 - field;
006660 B913           22135         MOV.W   R1,#03H
006662 2913           22136         SUB.W   R1,R3
006664 8901           22137         MOV.W   R0,R1
                      22140 ; rs232cmd.c 5994       
                      22141 ; rs232cmd.c 5995                               if ( field != 2)
006666 99140002       22143         CMP.W   R1,#02H
00666A F332           22144         BEQ     _1563
                      22145 ; rs232cmd.c 5996                                       sign = '-';
00666C 9478022D       22147         MOV.B   [R7+2],#02DH
                      22150 ; rs232cmd.c 5997                       }
006670 FE2F           22152         BR      _1563
006670 FE2F           22152         BR      _1563
006672                22153 _1556:
                      22154 ; rs232cmd.c 5998                       else
                      22155 ; rs232cmd.c 5999                       {
                      22156 ; rs232cmd.c 6000                               frame = samples / 230630400L;
006672 99380DBF       22158         MOV.W   R3,#0DBFH
006676 99282400       22159         MOV.W   R2,#02400H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 361

ADDR   CODE            LINE SOURCELINE
00667A 8915           22160         MOV.W   R1,R5
00667C 8904           22161         MOV.W   R0,R4
00667E C4rrrrrr       22162         FCALL   __SDIVL
006682 8A0F           22164         MOV.W   [R7],R0
                      22166 ; rs232cmd.c 6001                               line = ( samples % 230630400L) / 439296L;
006684 99380DBF       22168         MOV.W   R3,#0DBFH
006688 99282400       22169         MOV.W   R2,#02400H
00668C 8915           22170         MOV.W   R1,R5
00668E 8904           22171         MOV.W   R0,R4
006690 C4rrrrrr       22172         FCALL   __SMODL
006694 B936           22176         MOV.W   R3,#06H
006696 9928B400       22177         MOV.W   R2,#0B400H
00669A 8951           22178         MOV.W   R5,R1
00669C 8940           22179         MOV.W   R4,R0
00669E C4rrrrrr       22180         FCALL   __SDIVL
0066A2 8960           22181         MOV.W   R6,R0
0066A4 8C6F04         22182         MOV.W   [R7+4],R6
                      22183 ; rs232cmd.c 6002                               samples = ( samples % 230630400L) % 439296L;
0066A7 B936           22185         MOV.W   R3,#06H
0066A9 9928B400       22186         MOV.W   R2,#0B400H
0066AD 8915           22187         MOV.W   R1,R5
0066AF 8904           22188         MOV.W   R0,R4
0066B1 C4rrrrrr       22189         FCALL   __SMODL
0066B5 8951           22190         MOV.W   R5,R1
0066B7 8940           22191         MOV.W   R4,R0
                      22193 ; rs232cmd.c 6003                               field = 2*frame;
0066B9 8A17           22195         MOV.W   R1,[R7]
0066BB D911           22196         ASL.W   R1,#01H
0066BD 8901           22200         MOV.W   R0,R1
                      22202 ; rs232cmd.c 6004       
                      22203 ; rs232cmd.c 6005                               if ( line > 262)
0066BF 99640106       22205         CMP.W   R6,#0106H
0066C3 FD06           22206         BLE     _1563
                      22207 ; rs232cmd.c 6006                               {
                      22208 ; rs232cmd.c 6007                                       field++;
0066C5 A911           22210         ADDS.W  R1,#01H
0066C7 8901           22211         MOV.W   R0,R1
                      22214 ; rs232cmd.c 6008                                       line -= 263;
0066C9 99620107       22216         SUB.W   R6,#0107H
0066CD 8C6F04         22217         MOV.W   [R7+4],R6
                      22218 ; rs232cmd.c 6009                               }
                      22219 ; rs232cmd.c 6010                       }
                      22220 ; rs232cmd.c 6011               }
0066D0                22222 _1563:
                      22223 ; rs232cmd.c 6012       
                      22224 ; rs232cmd.c 6013               rs232printf( 12, "%c%d,", sign, abs( field));
                      22226         CALL    _abs
0066D0 C4rrrrrr       +22226 ;       FCALL   _abs
0066D4 842702         22228         MOV.B   R1L,[R7+2]
0066D7 9039           22229         SEXT.B  R1H
0066D9 0F01           22233         PUSH.W  R0
0066DB 8961           22235         MOV.W   R6,R1
0066DD 0F02           22236         PUSH.W  R1
0066DF 9918rrrr       22238         MOV.W   R1,#SEG( _1548 )
0066E3 9908rrrr       22239         MOV.W   R0,#SOF( _1548 )
0066E7 0F03           22240         PUSH.W  R0, R1
0066E9 9908000C       22242         MOV.W   R0,#0CH
                      22243         CALL    _rs232printf
0066ED C4rrrrrr       +22243 ;       FCALL   _rs232printf
0066F1 99700008       22244         ADD.W   R7,#08H
                      22246 ; rs232cmd.c 6014               rs232printf( 12, "%c%d,", sign, abs( line));
0066F5 8C0704         22248         MOV.W   R0,[R7+4]
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 362

ADDR   CODE            LINE SOURCELINE
                      22249         CALL    _abs
0066F8 C4rrrrrr       +22249 ;       FCALL   _abs
0066FC 0F01           22250         PUSH.W  R0
0066FE 8C6F02         22252         MOV.W   [R7+2],R6
006701 0F40           22253         PUSH.W  R6
006703 9918rrrr       22255         MOV.W   R1,#SEG( _1548 )
006707 9908rrrr       22256         MOV.W   R0,#SOF( _1548 )
00670B 0F03           22257         PUSH.W  R0, R1
00670D 9908000C       22259         MOV.W   R0,#0CH
                      22260         CALL    _rs232printf
006711 C4rrrrrr       +22260 ;       FCALL   _rs232printf
006715 99700008       22261         ADD.W   R7,#08H
                      22263 ; rs232cmd.c 6015               rs232printf( 12, "%c%.1f", sign, fabs((float) ( samples*1000L)/69
                            12L));
006719 8915           22265         MOV.W   R1,R5
00671B 8904           22266         MOV.W   R0,R4
00671D DD05           22267         ASL.D   R0,#05H
00671F 2904           22268         SUB.W   R0,R4
006721 3915           22269         SUBB.W  R1,R5
006723 DD02           22270         ASL.D   R0,#02H
006725 0904           22271         ADD.W   R0,R4
006727 1915           22272         ADDC.W  R1,R5
006729 DD03           22273         ASL.D   R0,#03H
00672B C4rrrrrr       22274         FCALL   __L2SPF
00672F 993845D8       22275         MOV.W   R3,#045D8H
006733 B920           22276         MOV.W   R2,#00H
006735 C4rrrrrr       22277         FCALL   __DIV_SPF
006739 C4rrrrrr       22278         FCALL   __SPF2DPF
                      22279         CALL    _fabs
00673D C4rrrrrr       +22279 ;       FCALL   _fabs
006741 0F0F           22280         PUSH.W  R0, R1, R2, R3
006743 8C0708         22282         MOV.W   R0,[R7+8]
006746 0F01           22283         PUSH.W  R0
006748 9918rrrr       22285         MOV.W   R1,#SEG( _1549 )
00674C 9908rrrr       22286         MOV.W   R0,#SOF( _1549 )
006750 0F03           22287         PUSH.W  R0, R1
006752 9908000C       22289         MOV.W   R0,#0CH
                      22290         CALL    _rs232printf
006756 C4rrrrrr       +22290 ;       FCALL   _rs232printf
00675A 9970000E       22291         ADD.W   R7,#0EH
                      22293 ; rs232cmd.c 6016       }
00675E A976           22295         ADDS.W  R7,#06H
006760 2F70           22297         POP.W   R4, R5, R6
006762 D680           22299         RET
                      22302 ; rs232cmd.c 6017       
00000E                22305         RSEG    RS232CMD_INI_FA
00000E 2C25640A00     22306 _362:   DB      02CH,025H,064H,00AH,000H
                      22309         EXTRN   HDATA(_PresetPtr)
                      22311         EXTRN   HDATA(_CmdExecute)
000013 256C752C256C75 22312 _1223:  DB      025H,06CH,075H,02CH,025H,06CH,075H,00AH,000H
       0A00                 
                      22315         EXTRN   HCODE(_ValidateDate)
                      22318         EXTRN   HCODE(_SetGenlockSystem)
                      22321         EXTRN   HCODE(_StorePreset)
                      22324         EXTRN   HCODE(_UpdateSTBRegister)
00001C 25733B00       22325 _983:   DB      025H,073H,03BH,000H
000020 25640A00       22326 _9:     DB      025H,064H,00AH,000H
                      22329         EXTRN   HCODE(_SetBBSystem)
000024 220A00         22330 _110:   DB      022H,00AH,000H
                      22333         EXTRN   HCODE(_SetBBDelay)
                      22336         EXTRN   HCODE(_strlen)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 363

ADDR   CODE            LINE SOURCELINE
000027 25752C25752C25 22337 _1170:  DB      025H,075H,02CH,025H,075H,02CH,025H,075H,00AH,000H
       750A00               
                      22340         EXTRN   HCODE(_SetCBDelay)
000031 256325642C00   22341 _1548:  DB      025H,063H,025H,064H,02CH,000H
                      22344         EXTRN   HCODE(_SetBBScHPhase)
                      22347         EXTRN   HCODE(_BBUpdate)
                      22348         EXTRN   HCODE(__UMODL)
                      22351         EXTRN   HCODE(_ResetErrorEventQueue)
                      22354         EXTRN   HCODE(_GenlockVersion)
                      22357         EXTRN   HCODE(_Cstrcmp)
                      22360         EXTRN   HCODE(_SetAudioTiming)
000037 25752C25752C25 22361 _1171:  DB      025H,075H,02CH,025H,075H,02CH,025H,075H,000H
       7500                 
                      22364         EXTRN   HCODE(_strncpy)
                      22366         EXTRN   HDATA(_AudioOutput)
                      22369         EXTRN   HCODE(_SetAudioWordClock)
                      22370         EXTRN   HCODE(__DIV_DPF)
000040 252E31662C00   22371 _781:   DB      025H,02EH,031H,066H,02CH,000H
                      22374         EXTRN   HCODE(_abs)
000046 25750A00       22375 _1009:  DB      025H,075H,00AH,000H
                      22378         EXTRN   HCODE(_ReadErrorEventQueue)
                      22383         EXTRN   HCODE(_TransmitIIC)
                      22386         EXTRN   HCODE(_CBUpdate)
                      22389         EXTRN   HCODE(_SetAudioSystem)
                      22392         EXTRN   HCODE(_sio0SndCommand)
                      22395         EXTRN   HCODE(_strcmp)
                      22398         EXTRN   HCODE(_AudioStatus)
00004A 25752C25750A00 22399 _1297:  DB      025H,075H,02CH,025H,075H,00AH,000H
                      22402         EXTRN   HCODE(_sscanf)
000051 253033642C2530 22403 _1435:  DB      025H,030H,033H,064H,02CH,025H,030H,033H,064H,00AH,000H
       33640A00             
00005C 25752C257500   22404 _1298:  DB      025H,075H,02CH,025H,075H,000H
000062 256400         22405 _10:    DB      025H,064H,000H
000065 256600         22406 _898:   DB      025H,066H,000H
                      22407         EXTRN   HCODE(__MUL_SPF)
                      22410         EXTRN   HCODE(_SetCBSystem)
                      22412         EXTRN   HDATA(_CBSetup)
                      22414         EXTRN   HDATA(_BBSetup)
000068 256C00         22415 _221:   DB      025H,06CH,000H
                      22417         EXTRN   HDATA(_OperEnableReg)
00006B 475825643B00   22418 _312:   DB      047H,058H,025H,064H,03BH,000H
                      22419         EXTRN   HCODE(__SUBR_DPF)
000071 257300         22420 _982:   DB      025H,073H,000H
                      22423         EXTRN   HCODE(_GenlockInit)
                      22426         EXTRN   HDATA(_Cmd)
                      22429         EXTRN   HCODE(_GenlockUpdate)
000074 4F4E00         22430 _956:   DB      04FH,04EH,000H
000077 257500         22431 _1186:  DB      025H,075H,000H
                      22434         EXTRN   HCODE(_SetAudioSignal)
                      22435         EXTRN   HCODE(__SPF2DPF)
                      22438         EXTRN   HCODE(_CBInit)
                      22441         EXTRN   HCODE(_strcpy)
00007A 252E31660A00   22442 _897:   DB      025H,02EH,031H,066H,00AH,000H
                      22445         EXTRN   HCODE(_WriteCBChromaGain)
                      22448         EXTRN   HCODE(_fabs)
                      22450         EXTRN   HDATA(_ParCnt)
                      22453         EXTRN   HCODE(_NV_Recall)
                      22456         EXTRN   HCODE(_labs)
000080 4F464600       22457 _262:   DB      04FH,046H,046H,000H
                      22460         EXTRN   HCODE(_ReceiveIIC)
                      22463         EXTRN   HCODE(_SetAudioOutput)
                      22465         EXTRN   HDATA(_NumSuffix)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 364

ADDR   CODE            LINE SOURCELINE
                      22468         EXTRN   HCODE(_rs232puts)
                      22470         EXTRN   HDATA(_CalibrationPtr)
                      22472         EXTRN   HDATA(_CmdRequest)
                      22474         EXTRN   HDATA(_ESRReg)
                      22476         EXTRN   HDATA(_STBReg)
                      22478         EXTRN   HDATA(_AudioSetup)
000084 256C752C256C75 22479 _1034:  DB      025H,06CH,075H,02CH,025H,06CH,075H,000H
       00                   
                      22485         EXTRN   HCODE(_ErrorTxt_Array)
                      22488         EXTRN   HCODE(_SetGenlockDelay)
                      22491         EXTRN   HCODE(_WriteCBGain)
00008C 25642C256400   22492 _1436:  DB      025H,064H,02CH,025H,064H,000H
000092 2563252E316600 22493 _1549:  DB      025H,063H,025H,02EH,031H,066H,000H
                      22495         EXTRN   HDATA(_BBControlPort)
000099 4847256C643B00 22496 _311:   DB      048H,047H,025H,06CH,064H,03BH,000H
                      22499         EXTRN   HCODE(_BBDefaults)
                      22501         EXTRN   HDATA(_SettingsPtr)
0000A0 474D3000       22502 _310:   DB      047H,04DH,030H,000H
                      22503         EXTRN   HCODE(__L2SPF)
                      22505         EXTRN   HDATA(_ESEReg)
                      22508         EXTRN   HCODE(_BBVersion)
0000A4 4F46460A00     22509 _955:   DB      04FH,046H,046H,00AH,000H
                      22512         EXTRN   HCODE(_BBInit)
                      22515         EXTRN   HCODE(_CBDefaults)
0000A9 25642C257300   22516 _981:   DB      025H,064H,02CH,025H,073H,000H
0000AF 475825753B00   22517 _330:   DB      047H,058H,025H,075H,03BH,000H
                      22519         EXTRN   HDATA(_GenlockSetup)
                      22522         EXTRN   HCODE(_SetCBEmbAudioSignal)
                      22525         EXTRN   HCODE(_rs232printf)
                      22528         EXTRN   HCODE(_AudioUpdate)
                      22530         EXTRN   HDATA(_Settings)
                      22533         EXTRN   HCODE(_sprintf)
                      22535         EXTRN   HDATA(_OperEventReg)
                      22536         EXTRN   HCODE(__CMP_SPF)
                      22537         EXTRN   HCODE(__DIV_SPF)
                      22539         EXTRN   HDATA(_SREReg)
                      22542         EXTRN   HCODE(_NV_Store)
0000B5 25642C25642C25 22543 _184:   DB      025H,064H,02CH,025H,064H,02CH,025H,064H,02CH,025H,064H,000H
       642C256400           
                      22546         EXTRN   HCODE(_pld_version)
                      22549         EXTRN   HCODE(_RecallPreset)
                      22552         EXTRN   HCODE(_AudioInit)
                      22554         EXTRN   HDATA(_Calibration)
                      22557         EXTRN   HCODE(_BBSPGCommunication)
0000C1 25642C25642C25 22558 _1118:  DB      025H,064H,02CH,025H,064H,02CH,025H,064H,000H
       6400                 
0000CA 25642C25642C25 22559 _295:   DB      025H,064H,02CH,025H,064H,02CH,025H,066H,000H
       6600                 
                      22560         EXTRN   HCODE(__ADD_DPF)
                      22561         EXTRN   HCODE(__SMODL)
                      22564         EXTRN   HCODE(_tcxo_status)
0000D3 25642C25377300 22565 _157:   DB      025H,064H,02CH,025H,037H,073H,000H
                      22567         EXTRN   HDATA(_QuestEnableReg)
                      22568         EXTRN   IDATA(__lc_bs)
                      22571         EXTRN   HCODE(_ResetInstrument)
                      22573         EXTRN   HDATA(_QuestConditionReg)
                      22576         EXTRN   HCODE(_SetAudioClick)
0000DA 25387300       22577 _1075:  DB      025H,038H,073H,000H
                      22580         EXTRN   HCODE(_SetCBPattern)
                      22581         EXTRN   HCODE(__SDIVL)
0000DE 2533327300     22582 _1050:  DB      025H,033H,032H,073H,000H
                      22585         EXTRN   HCODE(_GenlockDefaults)
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 365

ADDR   CODE            LINE SOURCELINE
0000E3 25642C00       22586 _529:   DB      025H,064H,02CH,000H
                      22589         EXTRN   HCODE(_rs232putchar)
                      22590         EXTRN   HCODE(__DPF2L)
                      22591         EXTRN   HCODE(__CMP_DPF)
                      22593         EXTRN   HDATA(_OperConditionReg)
                      22596         EXTRN   HCODE(_AudioDefaults)
0000E7 25642C25642C25 22597 _183:   DB      025H,064H,02CH,025H,064H,02CH,025H,064H,00AH,000H
       640A00               
0000F1 25642C25313773 22598 _131:   DB      025H,064H,02CH,025H,031H,037H,073H,000H
       00                   
                      22600         EXTRN   HDATA(_SCPIError)
                      22601         EXTRN   HCODE(__UDIVL)
                      22604         EXTRN   HCODE(_ROMChecksum)
                      22607         EXTRN   HCODE(_WriteAnlAudioDACLevel)
0000F9 25642C2200     22608 _109:   DB      025H,064H,02CH,022H,000H
0000FE 4F4E0A00       22609 _954:   DB      04FH,04EH,00AH,000H
                      22612         EXTRN   HCODE(_SetAudioLevel)
000102 2C25642C00     22613 _417:   DB      02CH,025H,064H,02CH,000H
                      22614         EXTRN   HCODE(__DPF2S)
                      22617         EXTRN   HCODE(_sio0SndRequest)
                      22620         EXTRN   HCODE(_UpdateESRRegister)
                      22622         EXTRN   HDATA(_QuestEventReg)
                      22625         EXTRN   HCODE(_SetCBScHPhase)
                      22626         EXTRN   DATA(__lc_ub_xvwbuffer)
                      22627         EXTRN   DATA(__lc_ue_xvwbuffer)
                      22628         CALLS   'CLSCommand', 'ResetErrorEventQueue'
                      22629         CALLS   'ESECommand', 'rs232printf'
                      22630         CALLS   'ESECommand', 'sscanf'
                      22631         CALLS   'ESRCommand', 'UpdateESRRegister'
                      22632         CALLS   'ESRCommand', 'rs232printf'
                      22633         CALLS   'SRECommand', 'rs232printf'
                      22634         CALLS   'SRECommand', 'sscanf'
                      22635         CALLS   'STBCommand', 'UpdateSTBRegister'
                      22636         CALLS   'STBCommand', 'rs232printf'
                      22637         CALLS   'RSTCommand', 'ResetInstrument'
                      22638         CALLS   'IDNCommand', 'rs232puts'
                      22639         CALLS   'IDNCommand', 'rs232putchar'
                      22640         CALLS   'IDNCommand', 'rs232puts'
                      22641         CALLS   'IDNCommand', 'rs232putchar'
                      22642         CALLS   'IDNCommand', 'rs232puts'
                      22643         CALLS   'IDNCommand', 'rs232putchar'
                      22644         CALLS   'IDNCommand', 'rs232puts'
                      22645         CALLS   'IDNCommand', 'rs232putchar'
                      22646         CALLS   'RCLCommand', 'sscanf'
                      22647         CALLS   'RCLCommand', 'RecallPreset'
                      22648         CALLS   'SAVCommand', 'sscanf'
                      22649         CALLS   'SAVCommand', 'StorePreset'
                      22650         CALLS   'SystemError', 'ReadErrorEventQueue'
                      22651         CALLS   'SystemError', 'sprintf'
                      22652         CALLS   'SystemError', 'rs232puts'
                      22653         CALLS   'SystemError', 'rs232putchar'
                      22654         CALLS   'SystemError', 'rs232puts'
                      22655         CALLS   'SystemVersion', 'rs232putchar'
                      22656         CALLS   'SystemPresetName', 'sscanf'
                      22657         CALLS   'SystemPresetName', 'NV_Recall'
                      22658         CALLS   'SystemPresetName', 'rs232puts'
                      22659         CALLS   'SystemPresetName', 'rs232putchar'
                      22660         CALLS   'SystemPresetName', 'sscanf'
                      22661         CALLS   'SystemPresetName', 'strlen'
                      22662         CALLS   'SystemPresetName', 'NV_Recall'
                      22663         CALLS   'SystemPresetName', 'strcpy'
                      22664         CALLS   'SystemPresetName', 'NV_Store'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 366

ADDR   CODE            LINE SOURCELINE
                      22665         CALLS   'SystemPresetAuthor', 'sscanf'
                      22666         CALLS   'SystemPresetAuthor', 'NV_Recall'
                      22667         CALLS   'SystemPresetAuthor', 'rs232puts'
                      22668         CALLS   'SystemPresetAuthor', 'rs232putchar'
                      22669         CALLS   'SystemPresetAuthor', 'sscanf'
                      22670         CALLS   'SystemPresetAuthor', 'strlen'
                      22671         CALLS   'SystemPresetAuthor', 'NV_Recall'
                      22672         CALLS   'SystemPresetAuthor', 'strcpy'
                      22673         CALLS   'SystemPresetAuthor', 'NV_Store'
                      22674         CALLS   'SystemPresetDate', 'sscanf'
                      22675         CALLS   'SystemPresetDate', 'NV_Recall'
                      22676         CALLS   'SystemPresetDate', 'sprintf'
                      22677         CALLS   'SystemPresetDate', 'rs232puts'
                      22678         CALLS   'SystemPresetDate', 'sscanf'
                      22679         CALLS   'SystemPresetDate', 'ValidateDate'
                      22680         CALLS   'SystemPresetDate', 'NV_Recall'
                      22681         CALLS   'SystemPresetDate', 'NV_Store'
                      22682         CALLS   'StatusOperEvent', 'rs232printf'
                      22683         CALLS   'StatusOperCondition', 'rs232printf'
                      22684         CALLS   'StatusOperEnable', 'rs232printf'
                      22685         CALLS   'StatusOperEnable', 'sscanf'
                      22686         CALLS   'StatusQuestEvent', 'rs232printf'
                      22687         CALLS   'StatusQuestCondition', 'rs232printf'
                      22688         CALLS   'StatusQuestEnable', 'rs232printf'
                      22689         CALLS   'StatusQuestEnable', 'sscanf'
                      22690         CALLS   'StatusPreset', 'rs232putchar'
                      22691         CALLS   'StatusPreset', 'rs232puts'
                      22692         CALLS   'StatusPreset', 'rs232putchar'
                      22693         CALLS   'GenlockGen', 'rs232putchar'
                      22694         CALLS   'GenlockGen', 'PrintSamplesToFLT'
                      22695         CALLS   'GenlockGen', 'rs232putchar'
                      22696         CALLS   'GenlockGenSystem', 'rs232putchar'
                      22697         CALLS   'GenlockGenSystem', 'FindParameter'
                      22698         CALLS   'GenlockGenSystem', 'SetGenlockSystem'
                      22699         CALLS   'GenlockGenDelay', 'PrintSamplesToFLT'
                      22700         CALLS   'GenlockGenDelay', 'rs232putchar'
                      22701         CALLS   'GenlockGenDelay', 'sscanf'
                      22702         CALLS   'GenlockGenDelay', 'FLTToSamples'
                      22703         CALLS   'GenlockGenDelay', 'SetGenlockDelay'
                      22704         CALLS   'GenlockGenCalibrateEnable', 'rs232putchar'
                      22705         CALLS   'GenlockGenCalibrateEnable', 'FindParameter'
                      22706         CALLS   'GenlockGenCalibrateEnable', 'SetGenlockSystem'
                      22707         CALLS   'GenlockGenCalibrateEnable', 'SetBBSystem'
                      22708         CALLS   'GenlockGenCalibrateEnable', 'sio0SndCommand'
                      22709         CALLS   'GenlockGenCalibrateAdjust', 'FindParameter'
                      22710         CALLS   'GenlockGenCalibrateAdjust', 'sio0SndCommand'
                      22711         CALLS   'GenlockGenCalibrateAdjust', 'FindParameter'
                      22712         CALLS   'GenlockGenCalibrateAdjust', 'sio0SndCommand'
                      22713         CALLS   'GenlockGenCalibrateStore', 'NV_Store'
                      22714         CALLS   'BBGen', 'rs232putchar'
                      22715         CALLS   'BBGen', 'PrintSamplesToFLT'
                      22716         CALLS   'BBGen', 'rs232printf'
                      22717         CALLS   'BBGenSystem', 'rs232putchar'
                      22718         CALLS   'BBGenSystem', 'FindParameter'
                      22719         CALLS   'BBGenSystem', 'SetBBSystem'
                      22720         CALLS   'BBGenDelay', 'PrintSamplesToFLT'
                      22721         CALLS   'BBGenDelay', 'rs232putchar'
                      22722         CALLS   'BBGenDelay', 'sscanf'
                      22723         CALLS   'BBGenDelay', 'FLTToSamples'
                      22724         CALLS   'BBGenDelay', 'SetBBDelay'
                      22725         CALLS   'BBGenScHPhase', 'rs232printf'
                      22726         CALLS   'BBGenScHPhase', 'sscanf'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 367

ADDR   CODE            LINE SOURCELINE
                      22727         CALLS   'BBGenScHPhase', 'SetBBScHPhase'
                      22728         CALLS   'TSGen', 'rs232putchar'
                      22729         CALLS   'TSGen', 'PrintSamplesToFLT'
                      22730         CALLS   'TSGen', 'rs232printf'
                      22731         CALLS   'TSGen', 'rs232putchar'
                      22732         CALLS   'TSGenPattern', 'rs232putchar'
                      22733         CALLS   'TSGenPattern', 'FindParameter'
                      22734         CALLS   'TSGenPattern', 'SetCBPattern'
                      22735         CALLS   'TSGenSystem', 'rs232putchar'
                      22736         CALLS   'TSGenSystem', 'FindParameter'
                      22737         CALLS   'TSGenSystem', 'SetCBSystem'
                      22738         CALLS   'TSGenDelay', 'PrintSamplesToFLT'
                      22739         CALLS   'TSGenDelay', 'rs232putchar'
                      22740         CALLS   'TSGenDelay', 'sscanf'
                      22741         CALLS   'TSGenDelay', 'FLTToSamples'
                      22742         CALLS   'TSGenDelay', 'SetCBDelay'
                      22743         CALLS   'TSGenScHPhase', 'rs232printf'
                      22744         CALLS   'TSGenScHPhase', 'sscanf'
                      22745         CALLS   'TSGenScHPhase', 'SetCBScHPhase'
                      22746         CALLS   'TSGenEmbAudioSignal', 'rs232putchar'
                      22747         CALLS   'TSGenEmbAudioSignal', 'FindParameter'
                      22748         CALLS   'TSGenEmbAudioSignal', 'SetCBEmbAudioSignal'
                      22749         CALLS   'AudioGenOutput', 'rs232putchar'
                      22750         CALLS   'AudioGenOutput', 'FindParameter'
                      22751         CALLS   'AudioGenOutput', 'SetAudioOutput'
                      22752         CALLS   'AudioGenAnalog', 'rs232putchar'
                      22753         CALLS   'AudioGenAnalog', 'rs232printf'
                      22754         CALLS   'AudioGenAnalogSignal', 'rs232putchar'
                      22755         CALLS   'AudioGenAnalogSignal', 'FindParameter'
                      22756         CALLS   'AudioGenAnalogSignal', 'SetAudioSignal'
                      22757         CALLS   'AudioGenAnalogLevel', 'rs232putchar'
                      22758         CALLS   'AudioGenAnalogLevel', 'rs232printf'
                      22759         CALLS   'AudioGenAnalogLevel', 'FindParameter'
                      22760         CALLS   'AudioGenAnalogLevel', 'sscanf'
                      22761         CALLS   'AudioGenAnalogLevel', 'SetAudioLevel'
                      22762         CALLS   'AudioGenAnalogClick', 'rs232printf'
                      22763         CALLS   'AudioGenAnalogClick', 'sscanf'
                      22764         CALLS   'AudioGenAnalogClick', 'SetAudioClick'
                      22765         CALLS   'AudioGenAESEBU', 'rs232putchar'
                      22766         CALLS   'AudioGenAESEBU', 'rs232printf'
                      22767         CALLS   'AudioGenAESEBU', 'rs232putchar'
                      22768         CALLS   'AudioGenAESEBU', 'rs232printf'
                      22769         CALLS   'AudioGenAESEBUSystem', 'rs232putchar'
                      22770         CALLS   'AudioGenAESEBUSystem', 'FindParameter'
                      22771         CALLS   'AudioGenAESEBUSystem', 'SetAudioSystem'
                      22772         CALLS   'AudioGenAESEBUSignal', 'rs232putchar'
                      22773         CALLS   'AudioGenAESEBUSignal', 'FindParameter'
                      22774         CALLS   'AudioGenAESEBUSignal', 'SetAudioSignal'
                      22775         CALLS   'AudioGenAESEBULevel', 'rs232putchar'
                      22776         CALLS   'AudioGenAESEBULevel', 'rs232printf'
                      22777         CALLS   'AudioGenAESEBULevel', 'FindParameter'
                      22778         CALLS   'AudioGenAESEBULevel', 'sscanf'
                      22779         CALLS   'AudioGenAESEBULevel', 'SetAudioLevel'
                      22780         CALLS   'AudioGenAESEBUTiming', 'rs232printf'
                      22781         CALLS   'AudioGenAESEBUTiming', 'sscanf'
                      22782         CALLS   'AudioGenAESEBUTiming', 'SetAudioTiming'
                      22783         CALLS   'AudioGenAESEBUWordClock', 'rs232putchar'
                      22784         CALLS   'AudioGenAESEBUWordClock', 'FindParameter'
                      22785         CALLS   'AudioGenAESEBUWordClock', 'SetAudioWordClock'
                      22786         CALLS   'AudioGenAESEBUClick', 'rs232printf'
                      22787         CALLS   'AudioGenAESEBUClick', 'sscanf'
                      22788         CALLS   'AudioGenAESEBUClick', 'SetAudioClick'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 368

ADDR   CODE            LINE SOURCELINE
                      22789         CALLS   'FactPassword', 'rs232puts'
                      22790         CALLS   'FactPassword', 'strcmp'
                      22791         CALLS   'FactPassword', 'Cstrcmp'
                      22792         CALLS   'FactReset', 'GenlockDefaults'
                      22793         CALLS   'FactReset', 'BBDefaults'
                      22794         CALLS   'FactReset', 'CBDefaults'
                      22795         CALLS   'FactReset', 'AudioDefaults'
                      22796         CALLS   'FactReset', 'GenlockInit'
                      22797         CALLS   'FactReset', 'BBInit'
                      22798         CALLS   'FactReset', 'CBInit'
                      22799         CALLS   'FactReset', 'AudioInit'
                      22800         CALLS   'FactReset', 'GenlockUpdate'
                      22801         CALLS   'FactReset', 'CBUpdate'
                      22802         CALLS   'FactReset', 'BBUpdate'
                      22803         CALLS   'FactReset', 'AudioUpdate'
                      22804         CALLS   'FactReset', 'StorePreset'
                      22805         CALLS   'FactReset', 'NV_Store'
                      22806         CALLS   'FactV24Command', 'sscanf'
                      22807         CALLS   'FactV24Command', 'sio0SndRequest'
                      22808         CALLS   'FactV24Command', 'rs232puts'
                      22809         CALLS   'FactV24Command', 'sio0SndCommand'
                      22810         CALLS   'FactV24Transparent', 'FindParameter'
                      22811         CALLS   'FactV24Transparent', 'BBSPGCommunication'
                      22812         CALLS   'FactChecksumCode', 'ROMChecksum'
                      22813         CALLS   'FactChecksumCode', 'sprintf'
                      22814         CALLS   'FactChecksumCode', 'rs232puts'
                      22815         CALLS   'FactChecksumPLD', 'ROMChecksum'
                      22816         CALLS   'FactChecksumPLD', 'sprintf'
                      22817         CALLS   'FactChecksumPLD', 'rs232puts'
                      22818         CALLS   'FactChecksumEmbAudio', 'ROMChecksum'
                      22819         CALLS   'FactChecksumEmbAudio', 'sprintf'
                      22820         CALLS   'FactChecksumEmbAudio', 'rs232puts'
                      22821         CALLS   'FactChecksumPattern', 'ROMChecksum'
                      22822         CALLS   'FactChecksumPattern', 'sprintf'
                      22823         CALLS   'FactChecksumPattern', 'rs232puts'
                      22824         CALLS   'FactChecksumRange', 'sscanf'
                      22825         CALLS   'FactChecksumRange', 'ROMChecksum'
                      22826         CALLS   'FactChecksumRange', 'sprintf'
                      22827         CALLS   'FactChecksumRange', 'rs232puts'
                      22828         CALLS   'FactMainVersion', 'sprintf'
                      22829         CALLS   'FactMainVersion', 'rs232puts'
                      22830         CALLS   'FactMainIDNCompany', 'rs232puts'
                      22831         CALLS   'FactMainIDNCompany', 'rs232putchar'
                      22832         CALLS   'FactMainIDNCompany', 'sscanf'
                      22833         CALLS   'FactMainIDNCompany', 'strncpy'
                      22834         CALLS   'FactMainIDNCompany', 'NV_Store'
                      22835         CALLS   'FactMainIDNType', 'rs232puts'
                      22836         CALLS   'FactMainIDNType', 'rs232putchar'
                      22837         CALLS   'FactMainIDNType', 'sscanf'
                      22838         CALLS   'FactMainIDNType', 'strncpy'
                      22839         CALLS   'FactMainIDNType', 'NV_Store'
                      22840         CALLS   'FactMainIDNKUNumber', 'rs232puts'
                      22841         CALLS   'FactMainIDNKUNumber', 'rs232putchar'
                      22842         CALLS   'FactMainIDNKUNumber', 'sscanf'
                      22843         CALLS   'FactMainIDNKUNumber', 'strncpy'
                      22844         CALLS   'FactMainIDNKUNumber', 'NV_Store'
                      22845         CALLS   'FactMainIDNSWRevision', 'rs232puts'
                      22846         CALLS   'FactMainIDNSWRevision', 'rs232putchar'
                      22847         CALLS   'FactMainIDNSWRevision', 'sscanf'
                      22848         CALLS   'FactMainIDNSWRevision', 'strncpy'
                      22849         CALLS   'FactMainIDNSWRevision', 'NV_Store'
                      22850         CALLS   'FactMainSystem', 'rs232putchar'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 369

ADDR   CODE            LINE SOURCELINE
                      22851         CALLS   'FactMainSystem', 'FindParameter'
                      22852         CALLS   'FactMainSystem', 'NV_Store'
                      22853         CALLS   'FactMainFMSDateProd', 'sprintf'
                      22854         CALLS   'FactMainFMSDateProd', 'rs232puts'
                      22855         CALLS   'FactMainFMSDateProd', 'sscanf'
                      22856         CALLS   'FactMainFMSDateProd', 'ValidateDate'
                      22857         CALLS   'FactMainFMSDateProd', 'NV_Store'
                      22858         CALLS   'FactMainFMSDateUpd', 'sprintf'
                      22859         CALLS   'FactMainFMSDateUpd', 'rs232puts'
                      22860         CALLS   'FactMainFMSDateUpd', 'sscanf'
                      22861         CALLS   'FactMainFMSDateUpd', 'ValidateDate'
                      22862         CALLS   'FactMainFMSDateUpd', 'NV_Store'
                      22863         CALLS   'FactGenlockGenDate', 'sprintf'
                      22864         CALLS   'FactGenlockGenDate', 'rs232puts'
                      22865         CALLS   'FactGenlockGenDate', 'sscanf'
                      22866         CALLS   'FactGenlockGenDate', 'ValidateDate'
                      22867         CALLS   'FactGenlockGenDate', 'NV_Store'
                      22868         CALLS   'FactGenlockGenVersion', 'GenlockVersion'
                      22869         CALLS   'FactGenlockGenVersion', 'rs232puts'
                      22870         CALLS   'FactGenlockGenVersion', 'rs232putchar'
                      22871         CALLS   'FactGenlockGenFRefDate', 'sprintf'
                      22872         CALLS   'FactGenlockGenFRefDate', 'rs232puts'
                      22873         CALLS   'FactGenlockGenFRefDate', 'sscanf'
                      22874         CALLS   'FactGenlockGenFRefDate', 'ValidateDate'
                      22875         CALLS   'FactGenlockGenFRefDate', 'NV_Store'
                      22876         CALLS   'FactGenlockGenFRefDAC', 'sprintf'
                      22877         CALLS   'FactGenlockGenFRefDAC', 'rs232puts'
                      22878         CALLS   'FactGenlockGenFRefDAC', 'sscanf'
                      22879         CALLS   'FactGenlockGenFRefDAC', 'NV_Store'
                      22880         CALLS   'FactGenlockGenURefDate', 'sprintf'
                      22881         CALLS   'FactGenlockGenURefDate', 'rs232puts'
                      22882         CALLS   'FactGenlockGenURefDate', 'sscanf'
                      22883         CALLS   'FactGenlockGenURefDate', 'ValidateDate'
                      22884         CALLS   'FactGenlockGenURefDate', 'NV_Store'
                      22885         CALLS   'FactGenlockGenURefDAC', 'sprintf'
                      22886         CALLS   'FactGenlockGenURefDAC', 'rs232puts'
                      22887         CALLS   'FactGenlockGenURefDAC', 'sscanf'
                      22888         CALLS   'FactGenlockGenURefDAC', 'NV_Store'
                      22889         CALLS   'FactGenlockGenHPHZero', 'sprintf'
                      22890         CALLS   'FactGenlockGenHPHZero', 'rs232puts'
                      22891         CALLS   'FactGenlockGenHPHZero', 'sscanf'
                      22892         CALLS   'FactGenlockGenHPHZero', 'NV_Store'
                      22893         CALLS   'FactGenlockGenPhase', 'sprintf'
                      22894         CALLS   'FactGenlockGenPhase', 'rs232puts'
                      22895         CALLS   'FactGenlockGenPhase', 'sscanf'
                      22896         CALLS   'FactGenlockGenPhase', 'NV_Store'
                      22897         CALLS   'FactBBGenDate', 'sprintf'
                      22898         CALLS   'FactBBGenDate', 'rs232puts'
                      22899         CALLS   'FactBBGenDate', 'sscanf'
                      22900         CALLS   'FactBBGenDate', 'ValidateDate'
                      22901         CALLS   'FactBBGenDate', 'NV_Store'
                      22902         CALLS   'FactBBGenVersion', 'BBVersion'
                      22903         CALLS   'FactBBGenVersion', 'rs232puts'
                      22904         CALLS   'FactBBGenVersion', 'rs232putchar'
                      22905         CALLS   'FactBBGenSignal', 'FindParameter'
                      22906         CALLS   'FactBBGenPhase', 'sprintf'
                      22907         CALLS   'FactBBGenPhase', 'rs232puts'
                      22908         CALLS   'FactBBGenPhase', 'sscanf'
                      22909         CALLS   'FactBBGenPhase', 'NV_Store'
                      22910         CALLS   'FactBBGenScHPhase', 'sprintf'
                      22911         CALLS   'FactBBGenScHPhase', 'rs232puts'
                      22912         CALLS   'FactBBGenScHPhase', 'sscanf'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 370

ADDR   CODE            LINE SOURCELINE
                      22913         CALLS   'FactBBGenScHPhase', 'NV_Store'
                      22914         CALLS   'FactBBGenDAC', 'sprintf'
                      22915         CALLS   'FactBBGenDAC', 'rs232puts'
                      22916         CALLS   'FactBBGenDAC', 'sscanf'
                      22917         CALLS   'FactBBGenDAC', 'NV_Store'
                      22918         CALLS   'FactTSGenDate', 'sprintf'
                      22919         CALLS   'FactTSGenDate', 'rs232puts'
                      22920         CALLS   'FactTSGenDate', 'sscanf'
                      22921         CALLS   'FactTSGenDate', 'ValidateDate'
                      22922         CALLS   'FactTSGenDate', 'NV_Store'
                      22923         CALLS   'FactTSGenAGain', 'sprintf'
                      22924         CALLS   'FactTSGenAGain', 'rs232puts'
                      22925         CALLS   'FactTSGenAGain', 'sscanf'
                      22926         CALLS   'FactTSGenAGain', 'NV_Store'
                      22927         CALLS   'FactTSGenAGain', 'WriteCBGain'
                      22928         CALLS   'FactTSGenCGain', 'sprintf'
                      22929         CALLS   'FactTSGenCGain', 'rs232puts'
                      22930         CALLS   'FactTSGenCGain', 'sscanf'
                      22931         CALLS   'FactTSGenCGain', 'NV_Store'
                      22932         CALLS   'FactTSGenCGain', 'WriteCBChromaGain'
                      22933         CALLS   'FactTSGenPhase', 'sprintf'
                      22934         CALLS   'FactTSGenPhase', 'rs232puts'
                      22935         CALLS   'FactTSGenPhase', 'sscanf'
                      22936         CALLS   'FactTSGenPhase', 'NV_Store'
                      22937         CALLS   'FactTSGenPhase', 'SetCBDelay'
                      22938         CALLS   'FactTSGenScHPhase', 'sprintf'
                      22939         CALLS   'FactTSGenScHPhase', 'rs232puts'
                      22940         CALLS   'FactTSGenScHPhase', 'sscanf'
                      22941         CALLS   'FactTSGenScHPhase', 'NV_Store'
                      22942         CALLS   'FactTSGenScHPhase', 'SetCBScHPhase'
                      22943         CALLS   'FactAudioGenStatus', 'AudioStatus'
                      22944         CALLS   'FactAudioGenStatus', 'sprintf'
                      22945         CALLS   'FactAudioGenStatus', 'rs232puts'
                      22946         CALLS   'FactAudioGenDate', 'sprintf'
                      22947         CALLS   'FactAudioGenDate', 'rs232puts'
                      22948         CALLS   'FactAudioGenDate', 'sscanf'
                      22949         CALLS   'FactAudioGenDate', 'ValidateDate'
                      22950         CALLS   'FactAudioGenDate', 'NV_Store'
                      22951         CALLS   'FactAudioGenLevel', 'sprintf'
                      22952         CALLS   'FactAudioGenLevel', 'rs232puts'
                      22953         CALLS   'FactAudioGenLevel', 'sscanf'
                      22954         CALLS   'FactAudioGenLevel', 'NV_Store'
                      22955         CALLS   'FactAudioGenLevel', 'WriteAnlAudioDACLevel'
                      22956         CALLS   'FactPLDVersion', 'pld_version'
                      22957         CALLS   'FactPLDVersion', 'sprintf'
                      22958         CALLS   'FactPLDVersion', 'rs232puts'
                      22959         CALLS   'FactTCXOStatus', 'tcxo_status'
                      22960         CALLS   'FactTCXOStatus', 'sprintf'
                      22961         CALLS   'FactTCXOStatus', 'rs232puts'
                      22962         CALLS   'FactMultiMediaChip', 'sscanf'
                      22963         CALLS   'FactMultiMediaChip', 'TransmitIIC'
                      22964         CALLS   'FactMultiMediaChip', 'ReceiveIIC'
                      22965         CALLS   'FactMultiMediaChip', 'rs232printf'
                      22966         CALLS   'FactMultiMediaChip', 'sscanf'
                      22967         CALLS   'FactMultiMediaChip', 'TransmitIIC'
                      22968         CALLS   'FactMultiMediaChip', 'ReceiveIIC'
                      22969         CALLS   'FactMultiMediaChip', 'rs232printf'
                      22970         CALLS   'FindParameter', 'Cstrcmp'
                      22971         CALLS   'FLTToSamples', 'labs'
                      22972         CALLS   'FLTToSamples', 'abs'
                      22973         CALLS   'FLTToSamples', 'labs'
                      22974         CALLS   'FLTToSamples', 'abs'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page 371

ADDR   CODE            LINE SOURCELINE
                      22975         CALLS   'PrintSamplesToFLT', 'abs'
                      22976         CALLS   'PrintSamplesToFLT', 'rs232printf'
                      22977         CALLS   'PrintSamplesToFLT', 'abs'
                      22978         CALLS   'PrintSamplesToFLT', 'rs232printf'
                      22979         CALLS   'PrintSamplesToFLT', 'fabs'
                      22980         CALLS   'PrintSamplesToFLT', 'rs232printf'
