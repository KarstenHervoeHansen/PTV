XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\Master\Source\MAKE\1_1\temp\xa\ext0drv.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -I..\..\rtxcdef\xa
                          3 ;          -I..\..\rtxc\xa\include -I..\..\code\include\1_0 -I..\..\app_spec\xa
                          4 ;          -Ml -O2 -s
                          6 $NOZPAGE
                          7         NAME    EXT0DRV
                         11 ; ext0drv.c    1        /************************************************************************
                            ****/
                         12 ; ext0drv.c    2        /* MODULE:                                                               
                               */
                         13 ; ext0drv.c    3        /*  ext0drv.c - external interrupt 0 driver                              
                               */
                         14 ; ext0drv.c    4        /************************************************************************
                            ****/
                         15 ; ext0drv.c    5        /* FUNCTIONS:                                                            
                               */
                         16 ; ext0drv.c    6        /*                                                                       
                               */
                         17 ; ext0drv.c    7            void ext0_init(void);
                         18 ; ext0drv.c    8        /*                                                                       
                               */
                         19 ; ext0drv.c    9        /* TASKS:                                                                
                               */
                         20 ; ext0drv.c   10        /*                                                                       
                               */
                         21 ; ext0drv.c   11        /* NOTES:                                                                
                               */
                         22 ; ext0drv.c   12        /*                                                                       
                               */
                         23 ; ext0drv.c   13        /************************************************************************
                            ****/
                         24 ; ext0drv.c   14        /*
                         25 ; ext0drv.c   15         *   PTV software for PT5201
                         26 ; ext0drv.c   16         *   Copyright (c) 
                         27 ; ext0drv.c   17         *   ProTeleVision Technologies A/S.
                         28 ; ext0drv.c   18         *   ALL RIGHTS RESERVED
                         29 ; ext0drv.c   19        */
                         30 ; ext0drv.c   20        /************************************************************************
                            ****/
                         31 ; ext0drv.c   21        
                         32 ; ext0drv.c   22        #include <periphal.h>
                         35 ; ext0drv.c   23        #include "ext0drv.h"
                        369 ; ext0drv.c   24        
                        370 ; ext0drv.c   25        
                        371 ; ext0drv.c   26        /************************************************************************
                            **/
                        372 ; ext0drv.c   27        /* ext0_init                                                             
                                                                                                                             
                                                                     EXT0_DRV.C     */
                        373 ; ext0drv.c   28        /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                        374 ; ext0drv.c   29        /* Author:              Kim Engedahl, DEV, 000208                        
                                                                                                                             
                                                    */
                        375 ; ext0drv.c   30        /* Revised:             000321, KEn, DEV                                 
                                                                                                                             
                                                            */
                        376 ; ext0drv.c   31        /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                        377 ; ext0drv.c   32        /* Function:                                                             
                                                                                                                             
                                                                                                            */
                        378 ; ext0drv.c   33        /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        379 ; ext0drv.c   34        /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        380 ; ext0drv.c   35        /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        381 ; ext0drv.c   36        /************************************************************************
                            **/
                        382 ; ext0drv.c   37        void ext0_init( void)
                        383 ; ext0drv.c   38        {
000000                  384 EXT0DRV_PR      SEGMENT HCODE
000000                  385         RSEG    EXT0DRV_PR
                        386         ALIGN   1
                        388         PUBLIC  _ext0_init
000000                  389 _ext0_init:
                        393 ; ext0drv.c   39          IPA0 = (IPA0 & 0xF0) | EX0INTLVL;
000000 8604A0           395         MOV.B   R0L,04A0H
000003 9105F0           396         AND.B   R0L,#0F0H
000006 91060F           397         OR.B    R0L,#0FH
000009 860CA0           398         MOV.B   04A0H,R0L
                        399 ; ext0drv.c   40        
                        400 ; ext0drv.c   41          IT0 = 1;   // Set to specify falling edge triggered ext. interrupt
00000C 081280           402         SETB    0280H
                        403 ; ext0drv.c   42          EX0 = 1;   // Enable external 0 interrupt
00000F 081330           405         SETB    0330H
                        406 ; ext0drv.c   43        }
000012 D680             408         RET
                        412         EXTRN   DATA(__lc_ub_xvwbuffer)
                        413         EXTRN   DATA(__lc_ue_xvwbuffer)
