XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\BootProgram\Source\work\flash.src
ADDR   CODE            LINE SOURCELINE
                          2 ; options: -IC:\cxa\include -Ml -Cxag3 -Sd -A1 -O1 -DWritableSector=0
                          3 ;          -DBootProgram=1 -g
                          5 $NOZPAGE
                          6         NAME    FLASH
000000                   20 FLASH_RO        SEGMENT HCODE ROMDATA
000000                   21         RSEG    FLASH_RO
                         25         PUBLIC  __FL_STATUSREADYTxt
000000                   26 __FL_STATUSREADYTxt:
000000 52454144590D0A    27         DB      052H,045H,041H,044H,059H,00DH,00AH,000H
       00                   
                         30         PUBLIC  __FL_STATUSBUSYTxt
000008                   31 __FL_STATUSBUSYTxt:
000008 425553590D0A00    32         DB      042H,055H,053H,059H,00DH,00AH,000H
                         35         PUBLIC  __FL_STATUSERSUSPTxt
00000F                   36 __FL_STATUSERSUSPTxt:
00000F 45524153452053    37         DB      045H,052H,041H,053H,045H,020H,053H,055H,053H,050H,045H,04EH
       555350454E           
00001B 4445440D0A00      38         DB      044H,045H,044H,00DH,00AH,000H
                         41         PUBLIC  __FL_STATUSTIMEOUTTxt
000021                   42 __FL_STATUSTIMEOUTTxt:
000021 54494D452D4F55    43         DB      054H,049H,04DH,045H,02DH,04FH,055H,054H,00DH,00AH,000H
       540D0A00             
                         46         PUBLIC  __FL_STATUSERRORTxt
00002C                   47 __FL_STATUSERRORTxt:
00002C 4552524F520D0A    48         DB      045H,052H,052H,04FH,052H,00DH,00AH,000H
       00                   
                         51         PUBLIC  __FL_ONTxt
000034                   52 __FL_ONTxt:
000034 4F4E0D0A00        53         DB      04FH,04EH,00DH,00AH,000H
                         56         PUBLIC  __FL_OFFTxt
000039                   57 __FL_OFFTxt:
000039 4F46460D0A00      58         DB      04FH,046H,046H,00DH,00AH,000H
                         75         PUBLIC  _memdesc
00003F RESERVED          76         ALIGN   1
00003F
000040                   77 _memdesc:
000040 rrrrrrrrrrrrrr    78         DD      _3
       rr                   
000044 16000E000000      79         DW      00016H,0000EH,00000H
00004A 00000100000000    80         DD      000010000H,000000000H
       00                   
000052 0200              81         DW      00002H
000054 00000100000001    82         DD      000010000H,000010000H
       00                   
00005C 0200              83         DW      00002H
00005E 00000100000002    84         DD      000010000H,000020000H
       00                   
000066 0200              85         DW      00002H
000068 00000100000003    86         DD      000010000H,000030000H
       00                   
000070 0200              87         DW      00002H
000072 00000100000004    88         DD      000010000H,000040000H
       00                   
00007A 0200              89         DW      00002H
00007C 00000100000005    90         DD      000010000H,000050000H
       00                   
000084 0200              91         DW      00002H
000086 00000100000006    92         DD      000010000H,000060000H
       00                   
00008E 0200              93         DW      00002H
000090 00000100000007    94         DD      000010000H,000070000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
000098 0200              95         DW      00002H
00009A 00000100000008    96         DD      000010000H,000080000H
       00                   
0000A2 0200              97         DW      00002H
0000A4 00000100000009    98         DD      000010000H,000090000H
       00                   
0000AC 0200              99         DW      00002H
0000AE 0000010000000A   100         DD      000010000H,0000A0000H
       00                   
0000B6 0200             101         DW      00002H
0000B8 0000010000000B   102         DD      000010000H,0000B0000H
       00                   
0000C0 0200             103         DW      00002H
0000C2 0000010000000C   104         DD      000010000H,0000C0000H
       00                   
0000CA 0200             105         DW      00002H
0000CC 0000010000000D   106         DD      000010000H,0000D0000H
       00                   
0000D4 0200             107         DW      00002H
0000D6 0040000000000E   108         DD      000004000H,0000E0000H
       00                   
0000DE 0100             109         DW      00001H
0000E0 0080000000400E   110         DD      000008000H,0000E4000H
       00                   
0000E8 0100             111         DW      00001H
0000EA 0020000000C00E   112         DD      000002000H,0000EC000H
       00                   
0000F2 0100             113         DW      00001H
0000F4 0020000000E00E   114         DD      000002000H,0000EE000H
       00                   
0000FC 0100             115         DW      00001H
0000FE 0020000000000F   116         DD      000002000H,0000F0000H
       00                   
000106 0100             117         DW      00001H
000108 0020000000200F   118         DD      000002000H,0000F2000H
       00                   
000110 0100             119         DW      00001H
000112 0080000000400F   120         DD      000008000H,0000F4000H
       00                   
00011A 0100             121         DW      00001H
00011C 0040000000C00F   122         DD      000004000H,0000FC000H
       00                   
000124 0100             123         DW      00001H
000126 00000000000010   124         DD      000000000H,000100000H
       00                   
00012E 0100             125         DW      00001H
000130 rrrrrrrrrrrrrr   126         DD      _4
       rr                   
000134 160000000800     127         DW      00016H,00000H,00008H
00013A 00400000000000   128         DD      000004000H,000000000H
       00                   
000142 0100             129         DW      00001H
000144 00800000004000   130         DD      000008000H,000004000H
       00                   
00014C 0100             131         DW      00001H
00014E 0020000000C000   132         DD      000002000H,00000C000H
       00                   
000156 0100             133         DW      00001H
000158 0020000000E000   134         DD      000002000H,00000E000H
       00                   
000160 0100             135         DW      00001H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
000162 00200000000001   136         DD      000002000H,000010000H
       00                   
00016A 0100             137         DW      00001H
00016C 00200000002001   138         DD      000002000H,000012000H
       00                   
000174 0100             139         DW      00001H
000176 00800000004001   140         DD      000008000H,000014000H
       00                   
00017E 0100             141         DW      00001H
000180 0040000000C001   142         DD      000004000H,00001C000H
       00                   
000188 0100             143         DW      00001H
00018A 00000100000002   144         DD      000010000H,000020000H
       00                   
000192 0200             145         DW      00002H
000194 00000100000003   146         DD      000010000H,000030000H
       00                   
00019C 0200             147         DW      00002H
00019E 00000100000004   148         DD      000010000H,000040000H
       00                   
0001A6 0200             149         DW      00002H
0001A8 00000100000005   150         DD      000010000H,000050000H
       00                   
0001B0 0200             151         DW      00002H
0001B2 00000100000006   152         DD      000010000H,000060000H
       00                   
0001BA 0200             153         DW      00002H
0001BC 00000100000007   154         DD      000010000H,000070000H
       00                   
0001C4 0200             155         DW      00002H
0001C6 00000100000008   156         DD      000010000H,000080000H
       00                   
0001CE 0200             157         DW      00002H
0001D0 00000100000009   158         DD      000010000H,000090000H
       00                   
0001D8 0200             159         DW      00002H
0001DA 0000010000000A   160         DD      000010000H,0000A0000H
       00                   
0001E2 0200             161         DW      00002H
0001E4 0000010000000B   162         DD      000010000H,0000B0000H
       00                   
0001EC 0200             163         DW      00002H
0001EE 0000010000000C   164         DD      000010000H,0000C0000H
       00                   
0001F6 0200             165         DW      00002H
0001F8 0000010000000D   166         DD      000010000H,0000D0000H
       00                   
000200 0200             167         DW      00002H
000202 0000010000000E   168         DD      000010000H,0000E0000H
       00                   
00020A 0200             169         DW      00002H
00020C 0000010000000F   170         DD      000010000H,0000F0000H
       00                   
000214 0200             171         DW      00002H
000216 00000000000010   172         DD      000000000H,000100000H
       00                   
00021E 0200             173         DW      00002H
000220 rrrrrrrrrrrrrr   174         DD      _5
       rr                   
000224 0B0000000000     175         DW      0000BH,00000H,00000H
00022A 00000100000000   176         DD      000010000H,000000000H
       00                   
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
000232 0100             177         DW      00001H
000234 00000100000001   178         DD      000010000H,000010000H
       00                   
00023C 0100             179         DW      00001H
00023E 00000100000002   180         DD      000010000H,000020000H
       00                   
000246 0100             181         DW      00001H
000248 00000100000003   182         DD      000010000H,000030000H
       00                   
000250 0100             183         DW      00001H
000252 00000100000004   184         DD      000010000H,000040000H
       00                   
00025A 0100             185         DW      00001H
00025C 00000100000005   186         DD      000010000H,000050000H
       00                   
000264 0100             187         DW      00001H
000266 00000100000006   188         DD      000010000H,000060000H
       00                   
00026E 0100             189         DW      00001H
000270 00800000000007   190         DD      000008000H,000070000H
       00                   
000278 0100             191         DW      00001H
00027A 00200000008007   192         DD      000002000H,000078000H
       00                   
000282 0100             193         DW      00001H
000284 0020000000A007   194         DD      000002000H,00007A000H
       00                   
00028C 0100             195         DW      00001H
00028E 0040000000C007   196         DD      000004000H,00007C000H
       00                   
000296 0100             197         DW      00001H
000298 00000000000008   198         DD      000000000H,000080000H
       00                   
0002A0 0100             199         DW      00001H
0002A2 00000000000000   200         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002AE 00000000000000   201         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002BA 00000000000000   202         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002C6 00000000000000   203         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002D2 00000000000000   204         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002DE 00000000000000   205         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002EA 00000000000000   206         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0002F6 00000000000000   207         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
000302 00000000000000   208         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
00030E 0000             209         DB      000H,000H
000310 rrrrrrrrrrrrrr   210         DD      _6
       rr                   
000314 0B0000000000     211         DW      0000BH,00000H,00000H
00031A 00400000000000   212         DD      000004000H,000000000H
       00                   
000322 0100             213         DW      00001H
000324 00200000004000   214         DD      000002000H,000004000H
       00                   
00032C 0100             215         DW      00001H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   5

ADDR   CODE            LINE SOURCELINE
00032E 00200000006000   216         DD      000002000H,000006000H
       00                   
000336 0100             217         DW      00001H
000338 00800000008000   218         DD      000008000H,000008000H
       00                   
000340 0100             219         DW      00001H
000342 00000100000001   220         DD      000010000H,000010000H
       00                   
00034A 0100             221         DW      00001H
00034C 00000100000002   222         DD      000010000H,000020000H
       00                   
000354 0100             223         DW      00001H
000356 00000100000003   224         DD      000010000H,000030000H
       00                   
00035E 0100             225         DW      00001H
000360 00000100000004   226         DD      000010000H,000040000H
       00                   
000368 0100             227         DW      00001H
00036A 00000100000005   228         DD      000010000H,000050000H
       00                   
000372 0100             229         DW      00001H
000374 00000100000006   230         DD      000010000H,000060000H
       00                   
00037C 0100             231         DW      00001H
00037E 00000100000007   232         DD      000010000H,000070000H
       00                   
000386 0100             233         DW      00001H
000388 00000000000008   234         DD      000000000H,000080000H
       00                   
000390 0100             235         DW      00001H
000392 00000000000000   236         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
00039E 00000000000000   237         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003AA 00000000000000   238         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003B6 00000000000000   239         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003C2 00000000000000   240         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003CE 00000000000000   241         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003DA 00000000000000   242         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003E6 00000000000000   243         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003F2 00000000000000   244         DB      000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
       0000000000           
0003FE 0000             245         DB      000H,000H
000000                  246 FLASH_PR        SEGMENT HCODE
000000                  247         RSEG    FLASH_PR
                        248         ALIGN   1
                        250         PUBLIC  _flash_init
000000                  251 _flash_init:
000000 E800F0           262         MULU.B  R0L,#0F0H
000003 B910             264         MOVS.W  R1,#00H
000005 9900rrrr         265         ADD.W   R0,#SOF( _memdesc )
000009 9911rrrr         266         ADDC.W  R1,#SEG( _memdesc )
00000D 8E1rrr           267         MOV.W   _meminfo+2,R1
000010 8E0rrr           268         MOV.W   _meminfo,R0
000013 96484208         270         MOV.B   ES,#SEG( 080000H )
000017 99080000         271         MOV.W   R0,#SOF( 080000H )
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   6

ADDR   CODE            LINE SOURCELINE
00001B 9A0800F0         272         MOV.W   [R0],#0F0H
00001F D680             274         RET
000021 00               276         ALIGN   1
                        278         PUBLIC  _flash_reset
000022                  279 _flash_reset:
000022 96484208         286         MOV.B   ES,#SEG( 080000H )
000026 99080000         287         MOV.W   R0,#SOF( 080000H )
00002A 9A0800F0         288         MOV.W   [R0],#0F0H
00002E D680             290         RET
                        292         ALIGN   1
                        294         PUBLIC  _flash_status
000030                  295 _flash_status:
000030 0F10             299         PUSH.W  R4
000032 916801           310         MOV.B   R3L,#01H
000036                  313 _7:
000036 862C42           315         MOV.B   ES,R1L
000039 8A40             316         MOV.W   R4,[R0]
00003B 8924             318         MOV.W   R2,R4
00003D 862C42           320         MOV.B   ES,R1L
000040 7A20             321         XOR.W   R2,[R0]
000042 F203             324         BNE     _8
000044 910800           326         MOV.B   R0L,#00H
000047 FE1B             328         BR      _16
000047 FE1B00           328         BR      _16
00004A                  329 _8:
00004A 99240004         337         CMP.W   R2,#04H
00004E F205             338         BNE     _9
000050 6166             340         OR.B    R3L,R3L
000052 F20F             341         BNE     _12
000054 910802           343         MOV.B   R0L,#02H
000057 FE13             345         BR      _16
00005A                  347 _9:
00005A 99250040         354         AND.W   R2,#040H
00005E F309             356         BEQ     _12
000060 99450020         358         AND.W   R4,#020H
000064 F303             359         BEQ     _10
000066 910803           361         MOV.B   R0L,#03H
000069 FE0A             363         BR      _16
000069 FE0A00           363         BR      _16
00006C                  364 _10:
00006C 910801           366         MOV.B   R0L,#01H
00006F FE07             367         BR      _16
000072                  369 _12:
000072 8146             374         MOV.B   R2L,R3L
000074 A16F             377         ADDS.B  R3L,#0FH
000076 6144             380         OR.B    R2L,R2L
000078 F2DE             381         BNE     _7
00007A 910804           383         MOV.B   R0L,#04H
00007E                  386 _16:
00007E 2F10             387         POP.W   R4
000080 D680             389         RET
                        392         ALIGN   1
                        394         PUBLIC  _flash_get_device_info
000082                  395 _flash_get_device_info:
000082 0F30             401         PUSH.W  R4, R5
000084 E8000A           411         MULU.B  R0L,#0AH
000087 8940             413         MOV.W   R4,R0
000089 9859             414         SEXT.W  R5
00008B 8E1rrr           415         MOV.W   R1,_meminfo+2
00008E 8E0rrr           416         MOV.W   R0,_meminfo
000091 9900000E         417         ADD.W   R0,#0EH
000095 99110000         418         ADDC.W  R1,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   7

ADDR   CODE            LINE SOURCELINE
000099 0904             419         ADD.W   R0,R4
00009B 1915             420         ADDC.W  R1,R5
00009D 862C43           421         MOV.B   CS,R1L
0000A0 8840             422         MOVC.W  R4,[R0+]
0000A2 99040000         423         CMP.W   R0,#00H
0000A6 F202             424         BNE     _18
0000A8 A64143           425         ADDS.B  CS,#01H
0000A8 A6414300         425         ADDS.B  CS,#01H
0000AC                  426 _18:
0000AC 8850             427         MOVC.W  R5,[R0+]
0000AE 99570008         428         XOR.W   R5,#08H
0000B2 86AC42           431         MOV.B   ES,R5L
0000B5 9A4800F0         432         MOV.W   [R4],#0F0H
0000B9 8915             434         MOV.W   R1,R5
0000BB 8904             435         MOV.W   R0,R4
0000BD 99000AAA         436         ADD.W   R0,#0AAAH
0000C1 862C42           437         MOV.B   ES,R1L
0000C4 9A0800AA         438         MOV.W   [R0],#0AAH
0000C8 86AC42           440         MOV.B   ES,R5L
0000CB 9D4805540055     441         MOV.W   [R4+1364],#055H
0000D1 862C42           443         MOV.B   ES,R1L
0000D4 9A080090         444         MOV.W   [R0],#090H
0000D8 86AC42           446         MOV.B   ES,R5L
0000DB 8A04             447         MOV.W   R0,[R4]
0000DD 9105FF           448         AND.B   R0L,#0FFH
0000E0 866C42           449         MOV.B   ES,R3L
0000E3 820A             450         MOV.B   [R2],R0L
0000E5 86AC42           452         MOV.B   ES,R5L
0000E8 8C0402           453         MOV.W   R0,[R4+2]
0000EB 8C370A           454         MOV.W   R3,[R7+10]
0000EE 8C2708           455         MOV.W   R2,[R7+8]
0000F1 866C42           456         MOV.B   ES,R3L
0000F4 8A0A             457         MOV.W   [R2],R0
0000F6 86AC42           460         MOV.B   ES,R5L
0000F9 9A4800F0         461         MOV.W   [R4],#0F0H
0000FD 2F30             463         POP.W   R4, R5
0000FF D680             465         RET
000101 00               468         ALIGN   1
                        470         PUBLIC  _flash_get_status
000102                  471 _flash_get_status:
000102 E8000A           478         MULU.B  R0L,#0AH
000105 8920             480         MOV.W   R2,R0
000107 9839             481         SEXT.W  R3
000109 8E1rrr           482         MOV.W   R1,_meminfo+2
00010C 8E0rrr           483         MOV.W   R0,_meminfo
00010F 9900000E         484         ADD.W   R0,#0EH
000113 99110000         485         ADDC.W  R1,#00H
000117 0902             486         ADD.W   R0,R2
000119 1913             487         ADDC.W  R1,R3
00011B 862C43           488         MOV.B   CS,R1L
00011E 8820             489         MOVC.W  R2,[R0+]
000120 99040000         490         CMP.W   R0,#00H
000124 F202             491         BNE     _19
000126 A64143           492         ADDS.B  CS,#01H
000126 A6414300         492         ADDS.B  CS,#01H
00012A                  493 _19:
00012A 8830             494         MOVC.W  R3,[R0+]
00012C 8913             495         MOV.W   R1,R3
00012E 8902             496         MOV.W   R0,R2
000130 99170008         497         XOR.W   R1,#08H
000134 C5FF7D           498         CALL    _flash_status
000137 D680             500         RET
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   8

ADDR   CODE            LINE SOURCELINE
000139 00               502         ALIGN   1
                        504         PUBLIC  _flash_sector_protect_verify
00013A                  505 _flash_sector_protect_verify:
00013A E8000A           516         MULU.B  R0L,#0AH
00013D 8920             518         MOV.W   R2,R0
00013F 9839             519         SEXT.W  R3
000141 8E1rrr           520         MOV.W   R1,_meminfo+2
000144 8E0rrr           521         MOV.W   R0,_meminfo
000147 9900000E         522         ADD.W   R0,#0EH
00014B 99110000         523         ADDC.W  R1,#00H
00014F 0902             524         ADD.W   R0,R2
000151 1913             525         ADDC.W  R1,R3
000153 862C43           526         MOV.B   CS,R1L
000156 8820             527         MOVC.W  R2,[R0+]
000158 99040000         528         CMP.W   R0,#00H
00015C F202             529         BNE     _20
00015E A64143           530         ADDS.B  CS,#01H
00015E A6414300         530         ADDS.B  CS,#01H
000162                  531 _20:
000162 8830             532         MOVC.W  R3,[R0+]
000164 99370008         533         XOR.W   R3,#08H
000168 866C42           536         MOV.B   ES,R3L
00016B 9A2800F0         537         MOV.W   [R2],#0F0H
00016F 8913             539         MOV.W   R1,R3
000171 8902             540         MOV.W   R0,R2
000173 99000AAA         541         ADD.W   R0,#0AAAH
000177 862C42           542         MOV.B   ES,R1L
00017A 9A0800AA         543         MOV.W   [R0],#0AAH
00017E 866C42           545         MOV.B   ES,R3L
000181 9D2805540055     546         MOV.W   [R2+1364],#055H
000187 862C42           548         MOV.B   ES,R1L
00018A 9A080090         549         MOV.W   [R0],#090H
00018E 866C42           551         MOV.B   ES,R3L
000191 8A02             552         MOV.W   R0,[R2]
000193 910501           553         AND.B   R0L,#01H
000196 866C42           556         MOV.B   ES,R3L
000199 9A2800F0         557         MOV.W   [R2],#0F0H
00019D D680             559         RET
00019F 00               563         ALIGN   1
                        565         PUBLIC  _flash_sector_erase
0001A0                  566 _flash_sector_erase:
0001A0 E8000A           575         MULU.B  R0L,#0AH
0001A3 8920             577         MOV.W   R2,R0
0001A5 9839             578         SEXT.W  R3
0001A7 8E1rrr           579         MOV.W   R1,_meminfo+2
0001AA 8E0rrr           580         MOV.W   R0,_meminfo
0001AD 9900000E         581         ADD.W   R0,#0EH
0001B1 99110000         582         ADDC.W  R1,#00H
0001B5 0902             583         ADD.W   R0,R2
0001B7 1913             584         ADDC.W  R1,R3
0001B9 862C43           585         MOV.B   CS,R1L
0001BC 8820             586         MOVC.W  R2,[R0+]
0001BE 99040000         587         CMP.W   R0,#00H
0001C2 F202             588         BNE     _21
0001C4 A64143           589         ADDS.B  CS,#01H
0001C4 A6414300         589         ADDS.B  CS,#01H
0001C8                  590 _21:
0001C8 8830             591         MOVC.W  R3,[R0+]
0001CA 8913             592         MOV.W   R1,R3
0001CC 8902             593         MOV.W   R0,R2
0001CE 99170008         594         XOR.W   R1,#08H
0001D2 862C42           597         MOV.B   ES,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   9

ADDR   CODE            LINE SOURCELINE
0001D5 9D080AAA00AA     598         MOV.W   [R0+2730],#0AAH
0001DB 862C42           600         MOV.B   ES,R1L
0001DE 9D0805540055     601         MOV.W   [R0+1364],#055H
0001E4 862C42           603         MOV.B   ES,R1L
0001E7 9D080AAA0080     604         MOV.W   [R0+2730],#080H
0001ED 862C42           606         MOV.B   ES,R1L
0001F0 9D080AAA00AA     607         MOV.W   [R0+2730],#0AAH
0001F6 862C42           609         MOV.B   ES,R1L
0001F9 9D0805540055     610         MOV.W   [R0+1364],#055H
0001FF 862C42           612         MOV.B   ES,R1L
000202 9A080030         613         MOV.W   [R0],#030H
000206 D680             615         RET
                        618         ALIGN   1
                        620         PUBLIC  _flash_sector_erase_int
000208                  621 _flash_sector_erase_int:
000208 0F30             625         PUSH.W  R4, R5
00020A E8000A           632         MULU.B  R0L,#0AH
00020D 8920             634         MOV.W   R2,R0
00020F 9839             635         SEXT.W  R3
000211 8E1rrr           636         MOV.W   R1,_meminfo+2
000214 8E0rrr           637         MOV.W   R0,_meminfo
000217 9900000E         638         ADD.W   R0,#0EH
00021B 99110000         639         ADDC.W  R1,#00H
00021F 0902             640         ADD.W   R0,R2
000221 1913             641         ADDC.W  R1,R3
000223 862C43           642         MOV.B   CS,R1L
000226 8840             643         MOVC.W  R4,[R0+]
000228 99040000         644         CMP.W   R0,#00H
00022C F202             645         BNE     _23
00022E A64143           646         ADDS.B  CS,#01H
00022E A6414300         646         ADDS.B  CS,#01H
000232                  647 _23:
000232 8850             648         MOVC.W  R5,[R0+]
000234 99570008         649         XOR.W   R5,#08H
000238 86AC42           652         MOV.B   ES,R5L
00023B 9D480AAA00AA     653         MOV.W   [R4+2730],#0AAH
000241 86AC42           655         MOV.B   ES,R5L
000244 9D4805540055     656         MOV.W   [R4+1364],#055H
00024A 86AC42           658         MOV.B   ES,R5L
00024D 9D480AAA0080     659         MOV.W   [R4+2730],#080H
000253 86AC42           661         MOV.B   ES,R5L
000256 9D480AAA00AA     662         MOV.W   [R4+2730],#0AAH
00025C 86AC42           664         MOV.B   ES,R5L
00025F 9D4805540055     665         MOV.W   [R4+1364],#055H
000265 86AC42           667         MOV.B   ES,R5L
000268 9A480030         668         MOV.W   [R4],#030H
00026C                  670 _22:
00026C 8915             671         MOV.W   R1,R5
00026E 8904             672         MOV.W   R0,R4
000270 C5FEDF           673         CALL    _flash_status
000273 910401           674         CMP.B   R0L,#01H
000276 F3FA             675         BEQ     _22
000278 8915             677         MOV.W   R1,R5
00027A 8904             678         MOV.W   R0,R4
00027C C5FED9           679         CALL    _flash_status
00027F 2F30             684         POP.W   R4, R5
000281 D680             686         RET
000283 00               688         ALIGN   1
                        690         PUBLIC  _flash_read_word
000284                  691 _flash_read_word:
000284 99170008         700         XOR.W   R1,#08H
000288 862C42           704         MOV.B   ES,R1L
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  10

ADDR   CODE            LINE SOURCELINE
00028B 8A00             705         MOV.W   R0,[R0]
00028D D680             708         RET
00028F 00               710         ALIGN   1
                        712         PUBLIC  _flash_write_word
000290                  713 _flash_write_word:
000290 0F70             717         PUSH.W  R4, R5, R6
000292 A97C             719         ADDS.W  R7,#0CH
000294 8962             723         MOV.W   R6,R2
000296 99170008         737         XOR.W   R1,#08H
00029A 8931             739         MOV.W   R3,R1
00029C 8920             740         MOV.W   R2,R0
00029E 8C3F02           741         MOV.W   [R7+2],R3
0002A1 8A2F             742         MOV.W   [R7],R2
0002A3 99050000         745         AND.W   R0,#00H
0002A7 9915000F         746         AND.W   R1,#0FH
0002AB 8951             747         MOV.W   R5,R1
0002AD 8940             748         MOV.W   R4,R0
0002AF 86AC42           751         MOV.B   ES,R5L
0002B2 9A4800F0         752         MOV.W   [R4],#0F0H
0002B6                  754 _28:
0002B6 8915             755         MOV.W   R1,R5
0002B8 8904             756         MOV.W   R0,R4
0002BA C5FEBA           757         CALL    _flash_status
0002BD 8110             758         MOV.B   R0H,R0L
0002BF 911401           760         CMP.B   R0H,#01H
0002C2 F3F9             761         BEQ     _28
0002C4 6100             763         OR.B    R0L,R0L
0002C6 F21E             764         BNE     _30
0002C8 86AC42           766         MOV.B   ES,R5L
0002CB 9D480AAA00AA     767         MOV.W   [R4+2730],#0AAH
0002D1 86AC42           769         MOV.B   ES,R5L
0002D4 9D4805540055     770         MOV.W   [R4+1364],#055H
0002DA 86AC42           772         MOV.B   ES,R5L
0002DD 9D480AAA00A0     773         MOV.W   [R4+2730],#0A0H
0002E3 8C1702           775         MOV.W   R1,[R7+2]
0002E6 8A07             776         MOV.W   R0,[R7]
0002E8 862C42           777         MOV.B   ES,R1L
0002EB 8A68             778         MOV.W   [R0],R6
0002EE                  783 _29:
0002EE 8915             784         MOV.W   R1,R5
0002F0 8904             785         MOV.W   R0,R4
0002F2 C5FE9E           787         CALL    _flash_status
0002F5 8110             788         MOV.B   R0H,R0L
0002F7 911401           790         CMP.B   R0H,#01H
0002FA F3F9             791         BEQ     _29
0002FC 86AC42           793         MOV.B   ES,R5L
0002FF 9A4800F0         794         MOV.W   [R4],#0F0H
000304                  796 _30:
000304 8101             798         MOV.B   R0L,R0H
000306 A974             802         ADDS.W  R7,#04H
000308 2F70             804         POP.W   R4, R5, R6
00030A D680             806         RET
                        811         ALIGN   1
                        813         PUBLIC  _flash_get_sector_size
00030C                  814 _flash_get_sector_size:
00030C E8000A           821         MULU.B  R0L,#0AH
00030F 8900             823         MOV.W   R0,R0
000311 9819             824         SEXT.W  R1
000313 8E3rrr           825         MOV.W   R3,_meminfo+2
000316 8E2rrr           826         MOV.W   R2,_meminfo
000319 9920000A         827         ADD.W   R2,#0AH
00031D 99310000         828         ADDC.W  R3,#00H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page  11

ADDR   CODE            LINE SOURCELINE
000321 0920             829         ADD.W   R2,R0
000323 1931             830         ADDC.W  R3,R1
000325 866C43           831         MOV.B   CS,R3L
000328 8802             832         MOVC.W  R0,[R2+]
00032A 99240000         833         CMP.W   R2,#00H
00032E F202             834         BNE     _33
000330 A64143           835         ADDS.B  CS,#01H
000330 A6414300         835         ADDS.B  CS,#01H
000334                  836 _33:
000334 8812             837         MOVC.W  R1,[R2+]
000336 D680             839         RET
                        841         ALIGN   1
                        843         PUBLIC  _flash_get_numsectors
000338                  844 _flash_get_numsectors:
000338 8E1rrr           849         MOV.W   R1,_meminfo+2
00033B 8E0rrr           850         MOV.W   R0,_meminfo
00033E 99000004         851         ADD.W   R0,#04H
000342 99110000         852         ADDC.W  R1,#00H
000346 862C43           853         MOV.B   CS,R1L
000349 8810             854         MOVC.W  R1,[R0+]
00034B 8102             855         MOV.B   R0L,R1L
00034D D680             857         RET
000000                  861 FLASH_ROM_FA    SEGMENT HDATA INSEGMENT ROMDATA
000000                  862         RSEG    FLASH_ROM_FA
000000 416D3239444C38   863 _4:     DB      041H,06DH,032H,039H,044H,04CH,038H,030H,030H,042H,000H
       30304200             
00000B 416D3239444C38   864 _3:     DB      041H,06DH,032H,039H,044H,04CH,038H,030H,030H,054H,000H
       30305400             
000000                  869 FLASH_CLR_NE@DS SEGMENT DATA JOIN CLEAR
000000                  870         RSEG    FLASH_CLR_NE@DS
                        871         PUBLIC  _meminfo
                        872         ALIGN   1
000000                  873 _meminfo:       DS      4
   |  RESERVED             
000003
000016                  874         RSEG    FLASH_ROM_FA
000016 4D424D32394634   875 _6:     DB      04DH,042H,04DH,032H,039H,046H,034H,030H,030H,042H,000H
       30304200             
000021 4D424D32394634   876 _5:     DB      04DH,042H,04DH,032H,039H,046H,034H,030H,030H,054H,000H
       30305400             
                        877         EXTRN   DATA(__lc_ub_xvwbuffer)
                        878         EXTRN   DATA(__lc_ue_xvwbuffer)
                        879         CALLS   'flash_get_status', 'flash_status'
                        880         CALLS   'flash_sector_erase_int', 'flash_status'
                        881         CALLS   'flash_write_word', 'flash_status'
