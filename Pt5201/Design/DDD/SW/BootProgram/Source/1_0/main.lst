XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
U:\Pt5201\Design\DDD\SW\BootProgram\Source\work\main.src
ADDR   CODE            LINE SOURCELINE
                          2 ; options: -IC:\cxa\include -Ml -Cxag3 -Sd -A1 -O1 -DWritableSector=0
                          3 ;          -DBootProgram=1 -g
                          5 $NOZPAGE
                          6         NAME    MAIN
000000                   33 MAIN_PR SEGMENT HCODE
000000                   34         RSEG    MAIN_PR
                         35         ALIGN   1
000000                   37 MAIN_INI_BI@DS  SEGMENT BIT JOIN INIT
000000                   38         RSEG    MAIN_INI_BI@DS
000000 0                 39 _3:     DB      000H
000000                   40 MAIN_INI_FA     SEGMENT HDATA INSEGMENT INIT
000000                   41         RSEG    MAIN_INI_FA
000000 00                42 _4:     DB      000H
000000                   43 MAIN_CLR_FA     SEGMENT HDATA INSEGMENT CLEAR
000000                   44         RSEG    MAIN_CLR_FA
000000 RESERVED          45 _5:     DS      1
000000
                         46         PUBLIC  _timer_int
000000                   47         RSEG    MAIN_PR
000000                   47         RSEG    MAIN_PR
000000                   48 _timer_int:
000000 0F03              52         PUSH.W  R0, R1
000002 873441            53         PUSH.B  DS
000005 964841rr          54         MOV.B   DS,#SEG( __DS )
000009 873442            55         PUSH.B  ES
00000C 873403            56         PUSH.B  SSEL
00000F 9646037F          57         OR.B    SSEL,#07FH
000013 96485140          62         MOV.B   0451H,#040H
000017 964842rr          64         MOV.B   ES,#SEG( _5 )
00001B 9908rrrr          65         MOV.W   R0,#SOF( _5 )
00001F 8200              66         MOV.B   R0L,[R0]
000021 A101              67         ADDS.B  R0L,#01H
000023 964842rr          68         MOV.B   ES,#SEG( _5 )
000027 9918rrrr          69         MOV.W   R1,#SOF( _5 )
00002B 8209              70         MOV.B   [R1],R0L
00002D 910402            71         CMP.B   R0L,#02H
000030 F93B              72         BL      _11
000032 964842rr          74         MOV.B   ES,#SEG( _5 )
000036 9908rrrr          75         MOV.W   R0,#SOF( _5 )
00003A B200              76         MOV.B   [R0],#00H
00003C 860rrr            78         MOV.B   R0L,_UserTimer
00003F F302              79         BEQ     _6
000041 A6rFrr            81         ADDS.B  _UserTimer,#0FH
000041 A6rFrr            81         ADDS.B  _UserTimer,#0FH
000044                   82 _6:
000044 082rrr            84         MOV     C,_LEDFlashON
000047 F030              85         BCC     _11
000049 964842rr          87         MOV.B   ES,#SEG( _4 )
00004D 9908rrrr          88         MOV.W   R0,#SOF( _4 )
000051 8200              89         MOV.B   R0L,[R0]
000053 8110              90         MOV.B   R0H,R0L
000055 A10F              91         ADDS.B  R0L,#0FH
000057 964842rr          92         MOV.B   ES,#SEG( _4 )
00005B 9918rrrr          93         MOV.W   R1,#SOF( _4 )
00005F 8209              94         MOV.B   [R1],R0L
000061 6111              95         OR.B    R0H,R0H
000063 F222              96         BNE     _11
000065 964842rr          98         MOV.B   ES,#SEG( _4 )
000069 9908rrrr          99         MOV.W   R0,#SOF( _4 )
00006D 920814           100         MOV.B   [R0],#014H
000070 97Arrr02         102         JNB     _3,_13
000074 B101             103         MOVS.B  R0L,#01H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
000076 FE01             104         BR      _14
000076 FE01             104         BR      _14
000078                  105 _13:
000078 B100             106         MOVS.B  R0L,#00H
000078 B100             106         MOVS.B  R0L,#00H
00007A                  107 _14:
00007A 910701           108         XOR.B   R0L,#01H
00007D 080000           109         CLR     R0.0
000080 F302             110         BEQ     _15
000082 081000           111         SETB    R0.0
000082 08100000         111         SETB    R0.0
000086                  112 _15:
000086 082000           113         MOV     C,R0.0
000089 083rrr           114         MOV     _3,C
00008C 082000           116         MOV     C,R0.0
00008F F007             117         BCC     _7
000091 9648420E         119         MOV.B   ES,#SEG( _TestLEDPort )
000095 9908A014         120         MOV.W   R0,#SOF( _TestLEDPort )
000099 B203             121         MOV.B   [R0],#03H
00009B FE06             122         BR      _11
00009B FE0600           122         BR      _11
00009E                  123 _7:
00009E 9648420E         125         MOV.B   ES,#SEG( _TestLEDPort )
0000A2 9908A014         126         MOV.W   R0,#SOF( _TestLEDPort )
0000A6 B200             127         MOV.B   [R0],#00H
0000A8                  129 _11:
0000A8 871403           131         POP.B   SSEL
0000AB 871442           132         POP.B   ES
0000AE 871441           133         POP.B   DS
0000B1 2F03             134         POP.W   R0, R1
0000B3 D690             135         RETI
000084                  136         HCSEG AT 084H
000084 008Frrrrrrrrrr   137         DW      08F00H,_16
       rrrrrr               
000000                  138 MAIN_CO SEGMENT CODE
000000                  139         RSEG    MAIN_CO
000000                  139         RSEG    MAIN_CO
000000                  140 _16:
000000 D4rrrrrr         141         FJMP    _timer_int
0000B5                  142         RSEG    MAIN_PR
0000B5 00               144         ALIGN   1
000001                  146         RSEG    MAIN_CLR_FA
000001 RESERVED         147         ALIGN   1
000001
000002                  148 _17:    DS      2
   |  RESERVED             
000003
                        149         PUBLIC  _main
0000B6                  150         RSEG    MAIN_PR
0000B6                  150         RSEG    MAIN_PR
0000B6                  151 _main:
0000B6 B6466A           157         MOV.B   046AH,#06H
0000B9 964801AF         159         MOV.B   0401H,#0AFH
0000BD 964869AA         161         MOV.B   0469H,#0AAH
0000C1 9648688A         163         MOV.B   0468H,#08AH
0000C5 B64000           165         MOV.B   0400H,#00H
0000C8 B64040           167         MOV.B   0440H,#00H
0000CB 964501F0         169         AND.B   0401H,#0F0H
0000CF B6415C           171         MOV.B   045CH,#01H
0000D2 B64151           173         MOV.B   0451H,#01H
0000D5 081331           175         SETB    0331H
0000D8 9648A0F0         177         MOV.B   04A0H,#0F0H
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   3

ADDR   CODE            LINE SOURCELINE
0000DC 9648A5EE         179         MOV.B   04A5H,#0EEH
0000E0 081284           181         SETB    0284H
0000E3 081337           183         SETB    0337H
0000E6 910802           185         MOV.B   R0L,#02H
                        186         CALL    _flash_init
0000E9 C4rrrrrr        +186 ;       FCALL   _flash_init
0000ED 911800           188         MOV.B   R0H,#00H
0000F0 910803           189         MOV.B   R0L,#03H
                        190         CALL    _Udr_InitUart
0000F3 C4rrrrrr        +190 ;       FCALL   _Udr_InitUart
0000F7 96r8rr32         192         MOV.B   _UserTimer,#032H
0000FC                  194 _18:
0000FC 860rrr           195         MOV.B   R0L,_UserTimer
0000FF F2FE             196         BNE     _18
000101 9648420E         198         MOV.B   ES,#SEG( _TestLEDPort )
000105 9908A014         199         MOV.W   R0,#SOF( _TestLEDPort )
000109 B203             200         MOV.B   [R0],#03H
00010B 081rrr           202         SETB    _LEDFlashON
00010E FE07             204         BR      _21
000110                  206 _19:
000110 964842rr         208         MOV.B   ES,#SEG( _17 )
000114 9908rrrr         209         MOV.W   R0,#SOF( _17 )
000118 8A00             210         MOV.W   R0,[R0]
                        211         CALL    _CmdHandler
00011A C4rrrrrr        +211 ;       FCALL   _CmdHandler
00011E                  213 _21:
                        214         CALL    _Udr_InChar
00011E C4rrrrrr        +214 ;       FCALL   _Udr_InChar
000122 8100             215         MOV.B   R0L,R0L
000124 9019             216         SEXT.B  R0H
000126 964842rr         217         MOV.B   ES,#SEG( _17 )
00012A 9918rrrr         218         MOV.W   R1,#SOF( _17 )
00012E 8A09             219         MOV.W   [R1],R0
000130 9904FFFF         220         CMP.W   R0,#0FFFFH
000134 F2ED             221         BNE     _19
000136 FEF3             223         BR      _21
000138 D680             225         RET
000000                  231 MAIN_CLR_BI@DS  SEGMENT BIT JOIN
000000                  232         RSEG    MAIN_CLR_BI@DS
                        233         PUBLIC  _LEDFlashON
000000 RESERVED         234 _LEDFlashON:    DBIT    1
000000
                        237         EXTRN   HCODE(_flash_init)
                        240         EXTRN   HCODE(_CmdHandler)
000000                  243 MAIN_CLR_NE@DS  SEGMENT DATA JOIN CLEAR
000000                  244         RSEG    MAIN_CLR_NE@DS
                        245         PUBLIC  _UserTimer
000000 RESERVED         246 _UserTimer:     DS      1
000000
                        249         EXTRN   HCODE(_Udr_InChar)
                        250         EXTRN   DATA(__DS)
                        253         EXTRN   HCODE(_Udr_InitUart)
0EA014                  256         HSEG AT 0EA014H
                        257         PUBLIC  _TestLEDPort
0EA014 RESERVED         258 _TestLEDPort:   DS      1
0EA014
                        259         EXTRN   HCODE(__START)
                        260         EXTRN   DATA(__lc_ub_xvwbuffer)
                        261         EXTRN   DATA(__lc_ue_xvwbuffer)
                        262         CALLS   'main', 'flash_init'
                        263         CALLS   'main', 'Udr_InitUart'
                        264         CALLS   'main', 'CmdHandler'
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   4

ADDR   CODE            LINE SOURCELINE
                        265         CALLS   'main', 'Udr_InChar'
