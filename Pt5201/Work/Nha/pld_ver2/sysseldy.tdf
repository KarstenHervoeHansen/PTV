SUBDESIGN sysseldy
(
	clk,hload,syssel,fh_g,fh_m,f8_g,f4_m,vdly:	INPUT;
	sys_h,field:							OUTPUT;
)

VARIABLE
	g2,vint:	DFFE;

BEGIN
	sys_h = (fh_g & !syssel) # (fh_m & syssel);	

	vint.clk	= clk;
	vint.ena	= hload;
	vint.d	    = (f8_g & !syssel) # (f4_m & syssel);

	g2.clk		= clk;
	g2.ena		= hload;
	g2.d		= vint;

	field		= (vdly & vint) # (!vdly & g2);

END;

