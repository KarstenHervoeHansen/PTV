XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   1
C:\LT428\work\ver.4_9\temp\xa\ext0drv.src
ADDR   CODE            LINE SOURCELINE
                          1 ; XA C compiler v2.0 r2                   SN00085795-Ccz (c) 1998 TASKING, Inc.
                          2 ; options: -A1 -Cxag3 -e -g -Ic:\cxa\include -Ic:\LT428\rtxc\xa\include -I. -Ml
                          3 ;          -O2 -s
                          5 $NOZPAGE
                          6         NAME    EXT0DRV
                         10 ; ext0drv.c    1        /************************************************************************
                            ****/
                         11 ; ext0drv.c    2        /* MODULE:                                                               
                               */
                         12 ; ext0drv.c    3        /*  ext0drv.c - external interrupt 0 driver                              
                               */
                         13 ; ext0drv.c    4        /************************************************************************
                            ****/
                         14 ; ext0drv.c    5        /* FUNCTIONS:                                                            
                               */
                         15 ; ext0drv.c    6        /*                                                                       
                               */
                         16 ; ext0drv.c    7            void ext0_init(void);
                         17 ; ext0drv.c    8        /*                                                                       
                               */
                         18 ; ext0drv.c    9        /* TASKS:                                                                
                               */
                         19 ; ext0drv.c   10        /*                                                                       
                               */
                         20 ; ext0drv.c   11        /* NOTES:                                                                
                               */
                         21 ; ext0drv.c   12        /*                                                                       
                               */
                         22 ; ext0drv.c   13        /************************************************************************
                            ****/
                         23 ; ext0drv.c   14        /*
                         24 ; ext0drv.c   15         *   PTV software for PT5201
                         25 ; ext0drv.c   16         *   Copyright (c) 
                         26 ; ext0drv.c   17         *   ProTeleVision Technologies A/S.
                         27 ; ext0drv.c   18         *   ALL RIGHTS RESERVED
                         28 ; ext0drv.c   19        */
                         29 ; ext0drv.c   20        /************************************************************************
                            ****/
                         30 ; ext0drv.c   21        
                         31 ; ext0drv.c   22        #include "reg8051.h"
                         34 ; ext0drv.c   23        #include <periphal.h>
                         37 ; ext0drv.c   24        #include "ext0drv.h"
                        371 ; ext0drv.c   25        
                        372 ; ext0drv.c   26        
                        373 ; ext0drv.c   27        /************************************************************************
                            **/
                        374 ; ext0drv.c   28        /* ext0_init                                                             
                                                                                                                             
                                                                     EXT0_DRV.C     */
                        375 ; ext0drv.c   29        /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
                        376 ; ext0drv.c   30        /* Author:              Kim Engedahl, DEV, 000208                        
                                                                                                                             
                                                    */
                        377 ; ext0drv.c   31        /* Revised:             000321, KEn, DEV                                 
                                                                                                                             
                                                            */
                        378 ; ext0drv.c   32        /*                                                                       
                                                                                                                             
                                                                                                                             
                                                    */
XA assembler v2.0 r2                    SN00085795-037 (c) 1998 TASKING, Inc.
                                                                                                                            Page   2

ADDR   CODE            LINE SOURCELINE
                        379 ; ext0drv.c   33        /* Function:                                                             
                                                                                                                             
                                                                                                            */
                        380 ; ext0drv.c   34        /* Remarks:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        381 ; ext0drv.c   35        /* Returns:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        382 ; ext0drv.c   36        /* Updates:                                                              
                                                                                                                             
                                                                                                                            *
                            /
                        383 ; ext0drv.c   37        /************************************************************************
                            **/
                        384 ; ext0drv.c   38        void ext0_init( void)
                        385 ; ext0drv.c   39        {
000000                  386 EXT0DRV_PR      SEGMENT HCODE
000000                  387         RSEG    EXT0DRV_PR
                        388         ALIGN   1
                        390         PUBLIC  _ext0_init
000000                  391 _ext0_init:
                        395 ; ext0drv.c   40          IPA0 = (IPA0 & 0xF0) | EX0INTLVL;
000000 8604A0           397         MOV.B   R0L,04A0H
000003 9105F0           398         AND.B   R0L,#0F0H
000006 91060F           399         OR.B    R0L,#0FH
000009 860CA0           400         MOV.B   04A0H,R0L
                        401 ; ext0drv.c   41        
                        402 ; ext0drv.c   42          IT0 = 1;   // Set to specify falling edge triggered ext. interrupt
00000C 081280           404         SETB    0280H
                        405 ; ext0drv.c   43          EX0 = 1;   // Enable external 0 interrupt
00000F 081330           407         SETB    0330H
                        408 ; ext0drv.c   44        }
000012 D680             410         RET
                        414         EXTRN   DATA(__lc_ub_xvwbuffer)
                        415         EXTRN   DATA(__lc_ue_xvwbuffer)
